const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FullCalendar-HKjneGqb.js","assets/FullCalendar-BMZ8iuz7.css","assets/CropsAndUploadsImage-Celk3FxC.js","assets/CropsAndUploadsImage-DCgp0ZE2.css"])))=>i.map(i=>d[i]);
const mC=Vue.BaseTransition,fC=Vue.BaseTransitionPropsValidators,Q1=Vue.Comment,pC=Vue.DeprecationTypes,vC=Vue.EffectScope,hC=Vue.ErrorCodes,gC=Vue.ErrorTypeStrings,de=Vue.Fragment,bC=Vue.KeepAlive,yC=Vue.ReactiveEffect,_C=Vue.Static,wC=Vue.Suspense,To=Vue.Teleport,ap=Vue.Text,IC=Vue.TrackOpTypes,sr=Vue.Transition,wi=Vue.TransitionGroup,xC=Vue.TriggerOpTypes,kC=Vue.VueElement,$C=Vue.assertNumber,CC=Vue.callWithAsyncErrorHandling,SC=Vue.callWithErrorHandling,TC=Vue.camelize,EC=Vue.capitalize,Ii=Vue.cloneVNode,FC=Vue.compatUtils,AC=Vue.compile,P=Vue.computed,J1=Vue.createApp,R=Vue.createBlock,Z=Vue.createCommentVNode,D=Vue.createElementBlock,_=Vue.createElementVNode,RC=Vue.createHydrationRenderer,DC=Vue.createPropsRestProxy,OC=Vue.createRenderer,PC=Vue.createSSRApp,gn=Vue.createSlots,MC=Vue.createStaticVNode,ne=Vue.createTextVNode,l=Vue.createVNode,ey=Vue.customRef,Xl=Vue.defineAsyncComponent,Ve=Vue.defineComponent,BC=Vue.defineCustomElement,NC=Vue.defineEmits,VC=Vue.defineExpose,LC=Vue.defineModel,qC=Vue.defineOptions,UC=Vue.defineProps,jC=Vue.defineSSRCustomElement,zC=Vue.defineSlots,HC=Vue.devtools,WC=Vue.effect,Ec=Vue.effectScope,ya=Vue.getCurrentInstance,rp=Vue.getCurrentScope,GC=Vue.getCurrentWatcher,KC=Vue.getTransitionRawChildren,Qt=Vue.guardReactiveProps,Ae=Vue.h,ZC=Vue.handleError,YC=Vue.hasInjectionContext,XC=Vue.hydrate,QC=Vue.hydrateOnIdle,JC=Vue.hydrateOnInteraction,e8=Vue.hydrateOnMediaQuery,t8=Vue.hydrateOnVisible,n8=Vue.initCustomFormatter,o8=Vue.initDirectivesForSSR,Le=Vue.inject,Fc=Vue.isMemoSame,a8=Vue.isProxy,r8=Vue.isReactive,l8=Vue.isReadonly,hn=Vue.isRef,s8=Vue.isRuntimeOnly,i8=Vue.isShallow,ty=Vue.isVNode,u8=Vue.markRaw,c8=Vue.mergeDefaults,pt=Vue.mergeModels,Ue=Vue.mergeProps,We=Vue.nextTick,be=Vue.normalizeClass,zt=Vue.normalizeProps,Nt=Vue.normalizeStyle,lp=Vue.onActivated,La=Vue.onBeforeMount,mn=Vue.onBeforeUnmount,d8=Vue.onBeforeUpdate,sp=Vue.onDeactivated,m8=Vue.onErrorCaptured,Xe=Vue.onMounted,f8=Vue.onRenderTracked,p8=Vue.onRenderTriggered,ip=Vue.onScopeDispose,v8=Vue.onServerPrefetch,un=Vue.onUnmounted,Jr=Vue.onUpdated,h8=Vue.onWatcherCleanup,g=Vue.openBlock,g8=Vue.popScopeId,st=Vue.provide,b8=Vue.proxyRefs,y8=Vue.pushScopeId,_8=Vue.queuePostFlushCb,ro=Vue.reactive,xi=Vue.readonly,V=Vue.ref,w8=Vue.registerRuntimeCompiler,ef=Vue.render,Ie=Vue.renderList,Ee=Vue.renderSlot,c=Vue.resolveComponent,ze=Vue.resolveDirective,_t=Vue.resolveDynamicComponent,I8=Vue.resolveFilter,x8=Vue.resolveTransitionHooks,He=Vue.setBlockTracking,k8=Vue.setDevtoolsHook,$8=Vue.setTransitionHooks,el=Vue.shallowReactive,Or=Vue.shallowReadonly,Pt=Vue.shallowRef,C8=Vue.ssrContextKey,S8=Vue.ssrUtils,T8=Vue.stop,K=Vue.toDisplayString,E8=Vue.toHandlerKey,Kr=Vue.toHandlers,Wn=Vue.toRaw,xt=Vue.toRef,ny=Vue.toRefs,bt=Vue.toValue,F8=Vue.transformVNodeArgs,Nr=Vue.triggerRef,v=Vue.unref,A8=Vue.useAttrs,R8=Vue.useCssModule,D8=Vue.useCssVars,O8=Vue.useHost,oy=Vue.useId,Ht=Vue.useModel,P8=Vue.useSSRContext,M8=Vue.useShadowRoot,B8=Vue.useSlots,N8=Vue.useTemplateRef,V8=Vue.useTransitionState,L8=Vue.vModelCheckbox,q8=Vue.vModelDynamic,U8=Vue.vModelRadio,ay=Vue.vModelSelect,pa=Vue.vModelText,fe=Vue.vShow,j8=Vue.version,z8=Vue.warn,Se=Vue.watch,Jt=Vue.watchEffect,ry=Vue.watchPostEffect,H8=Vue.watchSyncEffect,W8=Vue.withAsyncContext,p=Vue.withCtx,G8=Vue.withDefaults,te=Vue.withDirectives,mo=Vue.withKeys,Ia=Vue.withMemo,ot=Vue.withModifiers,K8=Vue.withScopeId,Z8=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:mC,BaseTransitionPropsValidators:fC,Comment:Q1,DeprecationTypes:pC,EffectScope:vC,ErrorCodes:hC,ErrorTypeStrings:gC,Fragment:de,KeepAlive:bC,ReactiveEffect:yC,Static:_C,Suspense:wC,Teleport:To,Text:ap,TrackOpTypes:IC,Transition:sr,TransitionGroup:wi,TriggerOpTypes:xC,VueElement:kC,assertNumber:$C,callWithAsyncErrorHandling:CC,callWithErrorHandling:SC,camelize:TC,capitalize:EC,cloneVNode:Ii,compatUtils:FC,compile:AC,computed:P,createApp:J1,createBlock:R,createCommentVNode:Z,createElementBlock:D,createElementVNode:_,createHydrationRenderer:RC,createPropsRestProxy:DC,createRenderer:OC,createSSRApp:PC,createSlots:gn,createStaticVNode:MC,createTextVNode:ne,createVNode:l,customRef:ey,defineAsyncComponent:Xl,defineComponent:Ve,defineCustomElement:BC,defineEmits:NC,defineExpose:VC,defineModel:LC,defineOptions:qC,defineProps:UC,defineSSRCustomElement:jC,defineSlots:zC,devtools:HC,effect:WC,effectScope:Ec,getCurrentInstance:ya,getCurrentScope:rp,getCurrentWatcher:GC,getTransitionRawChildren:KC,guardReactiveProps:Qt,h:Ae,handleError:ZC,hasInjectionContext:YC,hydrate:XC,hydrateOnIdle:QC,hydrateOnInteraction:JC,hydrateOnMediaQuery:e8,hydrateOnVisible:t8,initCustomFormatter:n8,initDirectivesForSSR:o8,inject:Le,isMemoSame:Fc,isProxy:a8,isReactive:r8,isReadonly:l8,isRef:hn,isRuntimeOnly:s8,isShallow:i8,isVNode:ty,markRaw:u8,mergeDefaults:c8,mergeModels:pt,mergeProps:Ue,nextTick:We,normalizeClass:be,normalizeProps:zt,normalizeStyle:Nt,onActivated:lp,onBeforeMount:La,onBeforeUnmount:mn,onBeforeUpdate:d8,onDeactivated:sp,onErrorCaptured:m8,onMounted:Xe,onRenderTracked:f8,onRenderTriggered:p8,onScopeDispose:ip,onServerPrefetch:v8,onUnmounted:un,onUpdated:Jr,onWatcherCleanup:h8,openBlock:g,popScopeId:g8,provide:st,proxyRefs:b8,pushScopeId:y8,queuePostFlushCb:_8,reactive:ro,readonly:xi,ref:V,registerRuntimeCompiler:w8,render:ef,renderList:Ie,renderSlot:Ee,resolveComponent:c,resolveDirective:ze,resolveDynamicComponent:_t,resolveFilter:I8,resolveTransitionHooks:x8,setBlockTracking:He,setDevtoolsHook:k8,setTransitionHooks:$8,shallowReactive:el,shallowReadonly:Or,shallowRef:Pt,ssrContextKey:C8,ssrUtils:S8,stop:T8,toDisplayString:K,toHandlerKey:E8,toHandlers:Kr,toRaw:Wn,toRef:xt,toRefs:ny,toValue:bt,transformVNodeArgs:F8,triggerRef:Nr,unref:v,useAttrs:A8,useCssModule:R8,useCssVars:D8,useHost:O8,useId:oy,useModel:Ht,useSSRContext:P8,useShadowRoot:M8,useSlots:B8,useTemplateRef:N8,useTransitionState:V8,vModelCheckbox:L8,vModelDynamic:q8,vModelRadio:U8,vModelSelect:ay,vModelText:pa,vShow:fe,version:j8,warn:z8,watch:Se,watchEffect:Jt,watchPostEffect:ry,watchSyncEffect:H8,withAsyncContext:W8,withCtx:p,withDefaults:G8,withDirectives:te,withKeys:mo,withMemo:Ia,withModifiers:ot,withScopeId:K8},Symbol.toStringTag,{value:"Module"}));var Vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ly(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}),n}var Y8=Array.isArray,$n=Y8;const X8=Rt($n);var Q8=typeof Vr=="object"&&Vr&&Vr.Object===Object&&Vr,sy=Q8,J8=sy,eS=typeof self=="object"&&self&&self.Object===Object&&self,tS=J8||eS||Function("return this")(),ra=tS,nS=ra,oS=nS.Symbol,Ql=oS,Ah=Ql,iy=Object.prototype,aS=iy.hasOwnProperty,rS=iy.toString,Bs=Ah?Ah.toStringTag:void 0;function lS(e){var t=aS.call(e,Bs),n=e[Bs];try{e[Bs]=void 0;var o=!0}catch{}var a=rS.call(e);return o&&(t?e[Bs]=n:delete e[Bs]),a}var sS=lS,iS=Object.prototype,uS=iS.toString;function cS(e){return uS.call(e)}var dS=cS,Rh=Ql,mS=sS,fS=dS,pS="[object Null]",vS="[object Undefined]",Dh=Rh?Rh.toStringTag:void 0;function hS(e){return e==null?e===void 0?vS:pS:Dh&&Dh in Object(e)?mS(e):fS(e)}var br=hS;function gS(e){return e!=null&&typeof e=="object"}var la=gS,bS=br,yS=la,_S="[object Symbol]";function wS(e){return typeof e=="symbol"||yS(e)&&bS(e)==_S}var ki=wS,IS=$n,xS=ki,kS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$S=/^\w*$/;function CS(e,t){if(IS(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||xS(e)?!0:$S.test(e)||!kS.test(e)||t!=null&&e in Object(t)}var up=CS;function SS(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var go=SS;const Ml=Rt(go);var TS=br,ES=go,FS="[object AsyncFunction]",AS="[object Function]",RS="[object GeneratorFunction]",DS="[object Proxy]";function OS(e){if(!ES(e))return!1;var t=TS(e);return t==AS||t==RS||t==FS||t==DS}var Ac=OS;const PS=Rt(Ac);var MS=ra,BS=MS["__core-js_shared__"],NS=BS,tm=NS,Oh=function(){var e=/[^.]+$/.exec(tm&&tm.keys&&tm.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function VS(e){return!!Oh&&Oh in e}var LS=VS,qS=Function.prototype,US=qS.toString;function jS(e){if(e!=null){try{return US.call(e)}catch{}try{return e+""}catch{}}return""}var uy=jS,zS=Ac,HS=LS,WS=go,GS=uy,KS=/[\\^$.*+?()[\]{}|]/g,ZS=/^\[object .+?Constructor\]$/,YS=Function.prototype,XS=Object.prototype,QS=YS.toString,JS=XS.hasOwnProperty,e3=RegExp("^"+QS.call(JS).replace(KS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function t3(e){if(!WS(e)||HS(e))return!1;var t=zS(e)?e3:ZS;return t.test(GS(e))}var n3=t3;function o3(e,t){return e==null?void 0:e[t]}var a3=o3,r3=n3,l3=a3;function s3(e,t){var n=l3(e,t);return r3(n)?n:void 0}var tl=s3,i3=tl,u3=i3(Object,"create"),Rc=u3,Ph=Rc;function c3(){this.__data__=Ph?Ph(null):{},this.size=0}var d3=c3;function m3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var f3=m3,p3=Rc,v3="__lodash_hash_undefined__",h3=Object.prototype,g3=h3.hasOwnProperty;function b3(e){var t=this.__data__;if(p3){var n=t[e];return n===v3?void 0:n}return g3.call(t,e)?t[e]:void 0}var y3=b3,_3=Rc,w3=Object.prototype,I3=w3.hasOwnProperty;function x3(e){var t=this.__data__;return _3?t[e]!==void 0:I3.call(t,e)}var k3=x3,$3=Rc,C3="__lodash_hash_undefined__";function S3(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=$3&&t===void 0?C3:t,this}var T3=S3,E3=d3,F3=f3,A3=y3,R3=k3,D3=T3;function Jl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}Jl.prototype.clear=E3;Jl.prototype.delete=F3;Jl.prototype.get=A3;Jl.prototype.has=R3;Jl.prototype.set=D3;var O3=Jl;function P3(){this.__data__=[],this.size=0}var M3=P3;function B3(e,t){return e===t||e!==e&&t!==t}var $i=B3,N3=$i;function V3(e,t){for(var n=e.length;n--;)if(N3(e[n][0],t))return n;return-1}var Dc=V3,L3=Dc,q3=Array.prototype,U3=q3.splice;function j3(e){var t=this.__data__,n=L3(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():U3.call(t,n,1),--this.size,!0}var z3=j3,H3=Dc;function W3(e){var t=this.__data__,n=H3(t,e);return n<0?void 0:t[n][1]}var G3=W3,K3=Dc;function Z3(e){return K3(this.__data__,e)>-1}var Y3=Z3,X3=Dc;function Q3(e,t){var n=this.__data__,o=X3(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}var J3=Q3,e4=M3,t4=z3,n4=G3,o4=Y3,a4=J3;function es(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}es.prototype.clear=e4;es.prototype.delete=t4;es.prototype.get=n4;es.prototype.has=o4;es.prototype.set=a4;var Oc=es,r4=tl,l4=ra,s4=r4(l4,"Map"),cp=s4,Mh=O3,i4=Oc,u4=cp;function c4(){this.size=0,this.__data__={hash:new Mh,map:new(u4||i4),string:new Mh}}var d4=c4;function m4(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var f4=m4,p4=f4;function v4(e,t){var n=e.__data__;return p4(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Pc=v4,h4=Pc;function g4(e){var t=h4(this,e).delete(e);return this.size-=t?1:0,t}var b4=g4,y4=Pc;function _4(e){return y4(this,e).get(e)}var w4=_4,I4=Pc;function x4(e){return I4(this,e).has(e)}var k4=x4,$4=Pc;function C4(e,t){var n=$4(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}var S4=C4,T4=d4,E4=b4,F4=w4,A4=k4,R4=S4;function ts(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}ts.prototype.clear=T4;ts.prototype.delete=E4;ts.prototype.get=F4;ts.prototype.has=A4;ts.prototype.set=R4;var dp=ts,cy=dp,D4="Expected a function";function mp(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(D4);var n=function(){var o=arguments,a=t?t.apply(this,o):o[0],r=n.cache;if(r.has(a))return r.get(a);var s=e.apply(this,o);return n.cache=r.set(a,s)||r,s};return n.cache=new(mp.Cache||cy),n}mp.Cache=cy;var O4=mp,P4=O4,M4=500;function B4(e){var t=P4(e,function(o){return n.size===M4&&n.clear(),o}),n=t.cache;return t}var N4=B4,V4=N4,L4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q4=/\\(\\)?/g,U4=V4(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(L4,function(n,o,a,r){t.push(a?r.replace(q4,"$1"):o||n)}),t}),j4=U4;function z4(e,t){for(var n=-1,o=e==null?0:e.length,a=Array(o);++n<o;)a[n]=t(e[n],n,e);return a}var ns=z4,Bh=Ql,H4=ns,W4=$n,G4=ki,K4=1/0,Nh=Bh?Bh.prototype:void 0,Vh=Nh?Nh.toString:void 0;function dy(e){if(typeof e=="string")return e;if(W4(e))return H4(e,dy)+"";if(G4(e))return Vh?Vh.call(e):"";var t=e+"";return t=="0"&&1/e==-K4?"-0":t}var Z4=dy,Y4=Z4;function X4(e){return e==null?"":Y4(e)}var Q4=X4,J4=$n,eT=up,tT=j4,nT=Q4;function oT(e,t){return J4(e)?e:eT(e,t)?[e]:tT(nT(e))}var os=oT,aT=ki,rT=1/0;function lT(e){if(typeof e=="string"||aT(e))return e;var t=e+"";return t=="0"&&1/e==-rT?"-0":t}var as=lT,sT=os,iT=as;function uT(e,t){t=sT(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[iT(t[n++])];return n&&n==o?e:void 0}var Ci=uT,cT=Ci;function dT(e,t,n){var o=e==null?void 0:cT(e,t);return o===void 0?n:o}var my=dT;const En=Rt(my);var mT=tl,fT=function(){try{var e=mT(Object,"defineProperty");return e({},"",{}),e}catch{}}(),fy=fT,Lh=fy;function pT(e,t,n){t=="__proto__"&&Lh?Lh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Si=pT,vT=Si,hT=$i,gT=Object.prototype,bT=gT.hasOwnProperty;function yT(e,t,n){var o=e[t];(!(bT.call(e,t)&&hT(o,n))||n===void 0&&!(t in e))&&vT(e,t,n)}var fp=yT,_T=9007199254740991,wT=/^(?:0|[1-9]\d*)$/;function IT(e,t){var n=typeof e;return t=t??_T,!!t&&(n=="number"||n!="symbol"&&wT.test(e))&&e>-1&&e%1==0&&e<t}var Mc=IT,xT=fp,kT=os,$T=Mc,qh=go,CT=as;function ST(e,t,n,o){if(!qh(e))return e;t=kT(t,e);for(var a=-1,r=t.length,s=r-1,i=e;i!=null&&++a<r;){var u=CT(t[a]),d=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(a!=s){var m=i[u];d=o?o(m,u,i):void 0,d===void 0&&(d=qh(m)?m:$T(t[a+1])?[]:{})}xT(i,u,d),i=i[u]}return e}var py=ST,TT=py;function ET(e,t,n){return e==null?e:TT(e,t,n)}var FT=ET;const AT=Rt(FT);function Bc(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map(function(a){a(n)}),(o=e.get("*"))&&o.slice().map(function(a){a(t,n)})}}}var vy={exports:{}};(function(e){(function(t,n,o){if(!t)return;for(var a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},i={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u,d=1;d<20;++d)a[111+d]="f"+d;for(d=0;d<=9;++d)a[d+96]=d.toString();function m(S,A,E){if(S.addEventListener){S.addEventListener(A,E,!1);return}S.attachEvent("on"+A,E)}function f(S){if(S.type=="keypress"){var A=String.fromCharCode(S.which);return S.shiftKey||(A=A.toLowerCase()),A}return a[S.which]?a[S.which]:r[S.which]?r[S.which]:String.fromCharCode(S.which).toLowerCase()}function h(S,A){return S.sort().join(",")===A.sort().join(",")}function y(S){var A=[];return S.shiftKey&&A.push("shift"),S.altKey&&A.push("alt"),S.ctrlKey&&A.push("ctrl"),S.metaKey&&A.push("meta"),A}function b(S){if(S.preventDefault){S.preventDefault();return}S.returnValue=!1}function I(S){if(S.stopPropagation){S.stopPropagation();return}S.cancelBubble=!0}function w(S){return S=="shift"||S=="ctrl"||S=="alt"||S=="meta"}function k(){if(!u){u={};for(var S in a)S>95&&S<112||a.hasOwnProperty(S)&&(u[a[S]]=S)}return u}function x(S,A,E){return E||(E=k()[S]?"keydown":"keypress"),E=="keypress"&&A.length&&(E="keydown"),E}function $(S){return S==="+"?["+"]:(S=S.replace(/\+{2}/g,"+plus"),S.split("+"))}function C(S,A){var E,B,M,N=[];for(E=$(S),M=0;M<E.length;++M)B=E[M],i[B]&&(B=i[B]),A&&A!="keypress"&&s[B]&&(B=s[B],N.push("shift")),w(B)&&N.push(B);return A=x(B,N,A),{key:B,modifiers:N,action:A}}function F(S,A){return S===null||S===n?!1:S===A?!0:F(S.parentNode,A)}function T(S){var A=this;if(S=S||n,!(A instanceof T))return new T(S);A.target=S,A._callbacks={},A._directMap={};var E={},B,M=!1,N=!1,G=!1;function U(L){L=L||{};var ee=!1,ce;for(ce in E){if(L[ce]){ee=!0;continue}E[ce]=0}ee||(G=!1)}function j(L,ee,ce,ue,oe,re){var Y,ae,se=[],xe=ce.type;if(!A._callbacks[L])return[];for(xe=="keyup"&&w(L)&&(ee=[L]),Y=0;Y<A._callbacks[L].length;++Y)if(ae=A._callbacks[L][Y],!(!ue&&ae.seq&&E[ae.seq]!=ae.level)&&xe==ae.action&&(xe=="keypress"&&!ce.metaKey&&!ce.ctrlKey||h(ee,ae.modifiers))){var le=!ue&&ae.combo==oe,ge=ue&&ae.seq==ue&&ae.level==re;(le||ge)&&A._callbacks[L].splice(Y,1),se.push(ae)}return se}function O(L,ee,ce,ue){A.stopCallback(ee,ee.target||ee.srcElement,ce,ue)||L(ee,ce)===!1&&(b(ee),I(ee))}A._handleKey=function(L,ee,ce){var ue=j(L,ee,ce),oe,re={},Y=0,ae=!1;for(oe=0;oe<ue.length;++oe)ue[oe].seq&&(Y=Math.max(Y,ue[oe].level));for(oe=0;oe<ue.length;++oe){if(ue[oe].seq){if(ue[oe].level!=Y)continue;ae=!0,re[ue[oe].seq]=1,O(ue[oe].callback,ce,ue[oe].combo,ue[oe].seq);continue}ae||O(ue[oe].callback,ce,ue[oe].combo)}var se=ce.type=="keypress"&&N;ce.type==G&&!w(L)&&!se&&U(re),N=ae&&ce.type=="keydown"};function H(L){typeof L.which!="number"&&(L.which=L.keyCode);var ee=f(L);if(ee){if(L.type=="keyup"&&M===ee){M=!1;return}A.handleKey(ee,y(L),L)}}function W(){clearTimeout(B),B=setTimeout(U,1e3)}function X(L,ee,ce,ue){E[L]=0;function oe(xe){return function(){G=xe,++E[L],W()}}function re(xe){O(ce,xe,L),ue!=="keyup"&&(M=f(xe)),setTimeout(U,10)}for(var Y=0;Y<ee.length;++Y){var ae=Y+1===ee.length,se=ae?re:oe(ue||C(ee[Y+1]).action);q(ee[Y],se,ue,L,Y)}}function q(L,ee,ce,ue,oe){A._directMap[L+":"+ce]=ee,L=L.replace(/\s+/g," ");var re=L.split(" "),Y;if(re.length>1){X(L,re,ee,ce);return}Y=C(L,ce),A._callbacks[Y.key]=A._callbacks[Y.key]||[],j(Y.key,Y.modifiers,{type:Y.action},ue,L,oe),A._callbacks[Y.key][ue?"unshift":"push"]({callback:ee,modifiers:Y.modifiers,action:Y.action,seq:ue,level:oe,combo:L})}A._bindMultiple=function(L,ee,ce){for(var ue=0;ue<L.length;++ue)q(L[ue],ee,ce)},m(S,"keypress",H),m(S,"keydown",H),m(S,"keyup",H)}T.prototype.bind=function(S,A,E){var B=this;return S=S instanceof Array?S:[S],B._bindMultiple.call(B,S,A,E),B},T.prototype.unbind=function(S,A){var E=this;return E.bind.call(E,S,function(){},A)},T.prototype.trigger=function(S,A){var E=this;return E._directMap[S+":"+A]&&E._directMap[S+":"+A]({},S),E},T.prototype.reset=function(){var S=this;return S._callbacks={},S._directMap={},S},T.prototype.stopCallback=function(S,A){var E=this;if((" "+A.className+" ").indexOf(" mousetrap ")>-1||F(A,E.target))return!1;if("composedPath"in S&&typeof S.composedPath=="function"){var B=S.composedPath()[0];B!==S.target&&(A=B)}return A.tagName=="INPUT"||A.tagName=="SELECT"||A.tagName=="TEXTAREA"||A.isContentEditable},T.prototype.handleKey=function(){var S=this;return S._handleKey.apply(S,arguments)},T.addKeycodes=function(S){for(var A in S)S.hasOwnProperty(A)&&(a[A]=S[A]);u=null},T.init=function(){var S=T(n);for(var A in S)A.charAt(0)!=="_"&&(T[A]=function(E){return function(){return S[E].apply(S,arguments)}}(A))},T.init(),t.Mousetrap=T,e.exports&&(e.exports=T)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(vy);var RT=vy.exports;const nm=Rt(RT);/*!
  * shared v9.14.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Yu=typeof window<"u",yr=(e,t=!1)=>t?Symbol.for(e):Symbol(e),DT=(e,t,n)=>OT({l:e,k:t,s:n}),OT=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),qn=e=>typeof e=="number"&&isFinite(e),PT=e=>gy(e)==="[object Date]",dr=e=>gy(e)==="[object RegExp]",Nc=e=>kt(e)&&Object.keys(e).length===0,Zn=Object.assign;let Uh;const Pa=()=>Uh||(Uh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jh(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const MT=Object.prototype.hasOwnProperty;function Xu(e,t){return MT.call(e,t)}const wn=Array.isArray,vn=e=>typeof e=="function",nt=e=>typeof e=="string",Bt=e=>typeof e=="boolean",on=e=>e!==null&&typeof e=="object",BT=e=>on(e)&&vn(e.then)&&vn(e.catch),hy=Object.prototype.toString,gy=e=>hy.call(e),kt=e=>{if(!on(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},NT=e=>e==null?"":wn(e)||kt(e)&&e.toString===hy?JSON.stringify(e,null,2):String(e);function VT(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}function Vc(e){let t=e;return()=>++t}function LT(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const gu=e=>!on(e)||wn(e);function Nu(e,t){if(gu(e)||gu(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:o,des:a}=n.pop();Object.keys(o).forEach(r=>{gu(o[r])||gu(a[r])?a[r]=o[r]:n.push({src:o[r],des:a[r]})})}}/*!
  * message-compiler v9.14.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function qT(e,t,n){return{line:e,column:t,offset:n}}function Qu(e,t,n){return{start:e,end:t}}const UT=/\{([0-9a-zA-Z]+)\}/g;function by(e,...t){return t.length===1&&jT(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(UT,(n,o)=>t.hasOwnProperty(o)?t[o]:"")}const yy=Object.assign,zh=e=>typeof e=="string",jT=e=>e!==null&&typeof e=="object";function _y(e,t=""){return e.reduce((n,o,a)=>a===0?n+o:n+t+o,"")}const pp={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},zT={[pp.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function HT(e,t,...n){const o=by(zT[e],...n||[]),a={message:String(o),code:e};return t&&(a.location=t),a}const gt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},WT={[gt.EXPECTED_TOKEN]:"Expected token: '{0}'",[gt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[gt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[gt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[gt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[gt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[gt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[gt.EMPTY_PLACEHOLDER]:"Empty placeholder",[gt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[gt.INVALID_LINKED_FORMAT]:"Invalid linked format",[gt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[gt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[gt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[gt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[gt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[gt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function rs(e,t,n={}){const{domain:o,messages:a,args:r}=n,s=by((a||WT)[e]||"",...r||[]),i=new SyntaxError(String(s));return i.code=e,t&&(i.location=t),i.domain=o,i}function GT(e){throw e}const Ea=" ",KT="\r",oo=`
`,ZT="\u2028",YT="\u2029";function XT(e){const t=e;let n=0,o=1,a=1,r=0;const s=S=>t[S]===KT&&t[S+1]===oo,i=S=>t[S]===oo,u=S=>t[S]===YT,d=S=>t[S]===ZT,m=S=>s(S)||i(S)||u(S)||d(S),f=()=>n,h=()=>o,y=()=>a,b=()=>r,I=S=>s(S)||u(S)||d(S)?oo:t[S],w=()=>I(n),k=()=>I(n+r);function x(){return r=0,m(n)&&(o++,a=0),s(n)&&n++,n++,a++,t[n]}function $(){return s(n+r)&&r++,r++,t[n+r]}function C(){n=0,o=1,a=1,r=0}function F(S=0){r=S}function T(){const S=n+r;for(;S!==n;)x();r=0}return{index:f,line:h,column:y,peekOffset:b,charAt:I,currentChar:w,currentPeek:k,next:x,peek:$,reset:C,resetPeek:F,skipToPeek:T}}const Ga=void 0,QT=".",Hh="'",JT="tokenizer";function eE(e,t={}){const n=t.location!==!1,o=XT(e),a=()=>o.index(),r=()=>qT(o.line(),o.column(),o.index()),s=r(),i=a(),u={currentType:14,offset:i,startLoc:s,endLoc:s,lastType:14,lastOffset:i,lastStartLoc:s,lastEndLoc:s,braceNest:0,inLinked:!1,text:""},d=()=>u,{onError:m}=t;function f(he,_e,Te,...Ne){const lt=d();if(_e.column+=Te,_e.offset+=Te,m){const Ke=n?Qu(lt.startLoc,_e):null,$e=rs(he,Ke,{domain:JT,args:Ne});m($e)}}function h(he,_e,Te){he.endLoc=r(),he.currentType=_e;const Ne={type:_e};return n&&(Ne.loc=Qu(he.startLoc,he.endLoc)),Te!=null&&(Ne.value=Te),Ne}const y=he=>h(he,14);function b(he,_e){return he.currentChar()===_e?(he.next(),_e):(f(gt.EXPECTED_TOKEN,r(),0,_e),"")}function I(he){let _e="";for(;he.currentPeek()===Ea||he.currentPeek()===oo;)_e+=he.currentPeek(),he.peek();return _e}function w(he){const _e=I(he);return he.skipToPeek(),_e}function k(he){if(he===Ga)return!1;const _e=he.charCodeAt(0);return _e>=97&&_e<=122||_e>=65&&_e<=90||_e===95}function x(he){if(he===Ga)return!1;const _e=he.charCodeAt(0);return _e>=48&&_e<=57}function $(he,_e){const{currentType:Te}=_e;if(Te!==2)return!1;I(he);const Ne=k(he.currentPeek());return he.resetPeek(),Ne}function C(he,_e){const{currentType:Te}=_e;if(Te!==2)return!1;I(he);const Ne=he.currentPeek()==="-"?he.peek():he.currentPeek(),lt=x(Ne);return he.resetPeek(),lt}function F(he,_e){const{currentType:Te}=_e;if(Te!==2)return!1;I(he);const Ne=he.currentPeek()===Hh;return he.resetPeek(),Ne}function T(he,_e){const{currentType:Te}=_e;if(Te!==8)return!1;I(he);const Ne=he.currentPeek()===".";return he.resetPeek(),Ne}function S(he,_e){const{currentType:Te}=_e;if(Te!==9)return!1;I(he);const Ne=k(he.currentPeek());return he.resetPeek(),Ne}function A(he,_e){const{currentType:Te}=_e;if(!(Te===8||Te===12))return!1;I(he);const Ne=he.currentPeek()===":";return he.resetPeek(),Ne}function E(he,_e){const{currentType:Te}=_e;if(Te!==10)return!1;const Ne=()=>{const Ke=he.currentPeek();return Ke==="{"?k(he.peek()):Ke==="@"||Ke==="%"||Ke==="|"||Ke===":"||Ke==="."||Ke===Ea||!Ke?!1:Ke===oo?(he.peek(),Ne()):N(he,!1)},lt=Ne();return he.resetPeek(),lt}function B(he){I(he);const _e=he.currentPeek()==="|";return he.resetPeek(),_e}function M(he){const _e=I(he),Te=he.currentPeek()==="%"&&he.peek()==="{";return he.resetPeek(),{isModulo:Te,hasSpace:_e.length>0}}function N(he,_e=!0){const Te=(lt=!1,Ke="",$e=!1)=>{const De=he.currentPeek();return De==="{"?Ke==="%"?!1:lt:De==="@"||!De?Ke==="%"?!0:lt:De==="%"?(he.peek(),Te(lt,"%",!0)):De==="|"?Ke==="%"||$e?!0:!(Ke===Ea||Ke===oo):De===Ea?(he.peek(),Te(!0,Ea,$e)):De===oo?(he.peek(),Te(!0,oo,$e)):!0},Ne=Te();return _e&&he.resetPeek(),Ne}function G(he,_e){const Te=he.currentChar();return Te===Ga?Ga:_e(Te)?(he.next(),Te):null}function U(he){const _e=he.charCodeAt(0);return _e>=97&&_e<=122||_e>=65&&_e<=90||_e>=48&&_e<=57||_e===95||_e===36}function j(he){return G(he,U)}function O(he){const _e=he.charCodeAt(0);return _e>=97&&_e<=122||_e>=65&&_e<=90||_e>=48&&_e<=57||_e===95||_e===36||_e===45}function H(he){return G(he,O)}function W(he){const _e=he.charCodeAt(0);return _e>=48&&_e<=57}function X(he){return G(he,W)}function q(he){const _e=he.charCodeAt(0);return _e>=48&&_e<=57||_e>=65&&_e<=70||_e>=97&&_e<=102}function L(he){return G(he,q)}function ee(he){let _e="",Te="";for(;_e=X(he);)Te+=_e;return Te}function ce(he){w(he);const _e=he.currentChar();return _e!=="%"&&f(gt.EXPECTED_TOKEN,r(),0,_e),he.next(),"%"}function ue(he){let _e="";for(;;){const Te=he.currentChar();if(Te==="{"||Te==="}"||Te==="@"||Te==="|"||!Te)break;if(Te==="%")if(N(he))_e+=Te,he.next();else break;else if(Te===Ea||Te===oo)if(N(he))_e+=Te,he.next();else{if(B(he))break;_e+=Te,he.next()}else _e+=Te,he.next()}return _e}function oe(he){w(he);let _e="",Te="";for(;_e=H(he);)Te+=_e;return he.currentChar()===Ga&&f(gt.UNTERMINATED_CLOSING_BRACE,r(),0),Te}function re(he){w(he);let _e="";return he.currentChar()==="-"?(he.next(),_e+=`-${ee(he)}`):_e+=ee(he),he.currentChar()===Ga&&f(gt.UNTERMINATED_CLOSING_BRACE,r(),0),_e}function Y(he){return he!==Hh&&he!==oo}function ae(he){w(he),b(he,"'");let _e="",Te="";for(;_e=G(he,Y);)_e==="\\"?Te+=se(he):Te+=_e;const Ne=he.currentChar();return Ne===oo||Ne===Ga?(f(gt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,r(),0),Ne===oo&&(he.next(),b(he,"'")),Te):(b(he,"'"),Te)}function se(he){const _e=he.currentChar();switch(_e){case"\\":case"'":return he.next(),`\\${_e}`;case"u":return xe(he,_e,4);case"U":return xe(he,_e,6);default:return f(gt.UNKNOWN_ESCAPE_SEQUENCE,r(),0,_e),""}}function xe(he,_e,Te){b(he,_e);let Ne="";for(let lt=0;lt<Te;lt++){const Ke=L(he);if(!Ke){f(gt.INVALID_UNICODE_ESCAPE_SEQUENCE,r(),0,`\\${_e}${Ne}${he.currentChar()}`);break}Ne+=Ke}return`\\${_e}${Ne}`}function le(he){return he!=="{"&&he!=="}"&&he!==Ea&&he!==oo}function ge(he){w(he);let _e="",Te="";for(;_e=G(he,le);)Te+=_e;return Te}function ve(he){let _e="",Te="";for(;_e=j(he);)Te+=_e;return Te}function ie(he){const _e=Te=>{const Ne=he.currentChar();return Ne==="{"||Ne==="%"||Ne==="@"||Ne==="|"||Ne==="("||Ne===")"||!Ne||Ne===Ea?Te:(Te+=Ne,he.next(),_e(Te))};return _e("")}function me(he){w(he);const _e=b(he,"|");return w(he),_e}function Ce(he,_e){let Te=null;switch(he.currentChar()){case"{":return _e.braceNest>=1&&f(gt.NOT_ALLOW_NEST_PLACEHOLDER,r(),0),he.next(),Te=h(_e,2,"{"),w(he),_e.braceNest++,Te;case"}":return _e.braceNest>0&&_e.currentType===2&&f(gt.EMPTY_PLACEHOLDER,r(),0),he.next(),Te=h(_e,3,"}"),_e.braceNest--,_e.braceNest>0&&w(he),_e.inLinked&&_e.braceNest===0&&(_e.inLinked=!1),Te;case"@":return _e.braceNest>0&&f(gt.UNTERMINATED_CLOSING_BRACE,r(),0),Te=ke(he,_e)||y(_e),_e.braceNest=0,Te;default:{let lt=!0,Ke=!0,$e=!0;if(B(he))return _e.braceNest>0&&f(gt.UNTERMINATED_CLOSING_BRACE,r(),0),Te=h(_e,1,me(he)),_e.braceNest=0,_e.inLinked=!1,Te;if(_e.braceNest>0&&(_e.currentType===5||_e.currentType===6||_e.currentType===7))return f(gt.UNTERMINATED_CLOSING_BRACE,r(),0),_e.braceNest=0,Be(he,_e);if(lt=$(he,_e))return Te=h(_e,5,oe(he)),w(he),Te;if(Ke=C(he,_e))return Te=h(_e,6,re(he)),w(he),Te;if($e=F(he,_e))return Te=h(_e,7,ae(he)),w(he),Te;if(!lt&&!Ke&&!$e)return Te=h(_e,13,ge(he)),f(gt.INVALID_TOKEN_IN_PLACEHOLDER,r(),0,Te.value),w(he),Te;break}}return Te}function ke(he,_e){const{currentType:Te}=_e;let Ne=null;const lt=he.currentChar();switch((Te===8||Te===9||Te===12||Te===10)&&(lt===oo||lt===Ea)&&f(gt.INVALID_LINKED_FORMAT,r(),0),lt){case"@":return he.next(),Ne=h(_e,8,"@"),_e.inLinked=!0,Ne;case".":return w(he),he.next(),h(_e,9,".");case":":return w(he),he.next(),h(_e,10,":");default:return B(he)?(Ne=h(_e,1,me(he)),_e.braceNest=0,_e.inLinked=!1,Ne):T(he,_e)||A(he,_e)?(w(he),ke(he,_e)):S(he,_e)?(w(he),h(_e,12,ve(he))):E(he,_e)?(w(he),lt==="{"?Ce(he,_e)||Ne:h(_e,11,ie(he))):(Te===8&&f(gt.INVALID_LINKED_FORMAT,r(),0),_e.braceNest=0,_e.inLinked=!1,Be(he,_e))}}function Be(he,_e){let Te={type:14};if(_e.braceNest>0)return Ce(he,_e)||y(_e);if(_e.inLinked)return ke(he,_e)||y(_e);switch(he.currentChar()){case"{":return Ce(he,_e)||y(_e);case"}":return f(gt.UNBALANCED_CLOSING_BRACE,r(),0),he.next(),h(_e,3,"}");case"@":return ke(he,_e)||y(_e);default:{if(B(he))return Te=h(_e,1,me(he)),_e.braceNest=0,_e.inLinked=!1,Te;const{isModulo:lt,hasSpace:Ke}=M(he);if(lt)return Ke?h(_e,0,ue(he)):h(_e,4,ce(he));if(N(he))return h(_e,0,ue(he));break}}return Te}function Fe(){const{currentType:he,offset:_e,startLoc:Te,endLoc:Ne}=u;return u.lastType=he,u.lastOffset=_e,u.lastStartLoc=Te,u.lastEndLoc=Ne,u.offset=a(),u.startLoc=r(),o.currentChar()===Ga?h(u,14):Be(o,u)}return{nextToken:Fe,currentOffset:a,currentPosition:r,context:d}}const tE="parser",nE=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function oE(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const o=parseInt(t||n,16);return o<=55295||o>=57344?String.fromCodePoint(o):"�"}}}function aE(e={}){const t=e.location!==!1,{onError:n,onWarn:o}=e;function a($,C,F,T,...S){const A=$.currentPosition();if(A.offset+=T,A.column+=T,n){const E=t?Qu(F,A):null,B=rs(C,E,{domain:tE,args:S});n(B)}}function r($,C,F,T,...S){const A=$.currentPosition();if(A.offset+=T,A.column+=T,o){const E=t?Qu(F,A):null;o(HT(C,E,S))}}function s($,C,F){const T={type:$};return t&&(T.start=C,T.end=C,T.loc={start:F,end:F}),T}function i($,C,F,T){t&&($.end=C,$.loc&&($.loc.end=F))}function u($,C){const F=$.context(),T=s(3,F.offset,F.startLoc);return T.value=C,i(T,$.currentOffset(),$.currentPosition()),T}function d($,C){const F=$.context(),{lastOffset:T,lastStartLoc:S}=F,A=s(5,T,S);return A.index=parseInt(C,10),$.nextToken(),i(A,$.currentOffset(),$.currentPosition()),A}function m($,C,F){const T=$.context(),{lastOffset:S,lastStartLoc:A}=T,E=s(4,S,A);return E.key=C,F===!0&&(E.modulo=!0),$.nextToken(),i(E,$.currentOffset(),$.currentPosition()),E}function f($,C){const F=$.context(),{lastOffset:T,lastStartLoc:S}=F,A=s(9,T,S);return A.value=C.replace(nE,oE),$.nextToken(),i(A,$.currentOffset(),$.currentPosition()),A}function h($){const C=$.nextToken(),F=$.context(),{lastOffset:T,lastStartLoc:S}=F,A=s(8,T,S);return C.type!==12?(a($,gt.UNEXPECTED_EMPTY_LINKED_MODIFIER,F.lastStartLoc,0),A.value="",i(A,T,S),{nextConsumeToken:C,node:A}):(C.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,jo(C)),A.value=C.value||"",i(A,$.currentOffset(),$.currentPosition()),{node:A})}function y($,C){const F=$.context(),T=s(7,F.offset,F.startLoc);return T.value=C,i(T,$.currentOffset(),$.currentPosition()),T}function b($){const C=$.context(),F=s(6,C.offset,C.startLoc);let T=$.nextToken();if(T.type===9){const S=h($);F.modifier=S.node,T=S.nextConsumeToken||$.nextToken()}switch(T.type!==10&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(T)),T=$.nextToken(),T.type===2&&(T=$.nextToken()),T.type){case 11:T.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(T)),F.key=y($,T.value||"");break;case 5:T.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(T)),F.key=m($,T.value||"");break;case 6:T.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(T)),F.key=d($,T.value||"");break;case 7:T.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(T)),F.key=f($,T.value||"");break;default:{a($,gt.UNEXPECTED_EMPTY_LINKED_KEY,C.lastStartLoc,0);const S=$.context(),A=s(7,S.offset,S.startLoc);return A.value="",i(A,S.offset,S.startLoc),F.key=A,i(F,S.offset,S.startLoc),{nextConsumeToken:T,node:F}}}return i(F,$.currentOffset(),$.currentPosition()),{node:F}}function I($){const C=$.context(),F=C.currentType===1?$.currentOffset():C.offset,T=C.currentType===1?C.endLoc:C.startLoc,S=s(2,F,T);S.items=[];let A=null,E=null;do{const N=A||$.nextToken();switch(A=null,N.type){case 0:N.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(N)),S.items.push(u($,N.value||""));break;case 6:N.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(N)),S.items.push(d($,N.value||""));break;case 4:E=!0;break;case 5:N.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(N)),S.items.push(m($,N.value||"",!!E)),E&&(r($,pp.USE_MODULO_SYNTAX,C.lastStartLoc,0,jo(N)),E=null);break;case 7:N.value==null&&a($,gt.UNEXPECTED_LEXICAL_ANALYSIS,C.lastStartLoc,0,jo(N)),S.items.push(f($,N.value||""));break;case 8:{const G=b($);S.items.push(G.node),A=G.nextConsumeToken||null;break}}}while(C.currentType!==14&&C.currentType!==1);const B=C.currentType===1?C.lastOffset:$.currentOffset(),M=C.currentType===1?C.lastEndLoc:$.currentPosition();return i(S,B,M),S}function w($,C,F,T){const S=$.context();let A=T.items.length===0;const E=s(1,C,F);E.cases=[],E.cases.push(T);do{const B=I($);A||(A=B.items.length===0),E.cases.push(B)}while(S.currentType!==14);return A&&a($,gt.MUST_HAVE_MESSAGES_IN_PLURAL,F,0),i(E,$.currentOffset(),$.currentPosition()),E}function k($){const C=$.context(),{offset:F,startLoc:T}=C,S=I($);return C.currentType===14?S:w($,F,T,S)}function x($){const C=eE($,yy({},e)),F=C.context(),T=s(0,F.offset,F.startLoc);return t&&T.loc&&(T.loc.source=$),T.body=k(C),e.onCacheKey&&(T.cacheKey=e.onCacheKey($)),F.currentType!==14&&a(C,gt.UNEXPECTED_LEXICAL_ANALYSIS,F.lastStartLoc,0,$[F.offset]||""),i(T,C.currentOffset(),C.currentPosition()),T}return{parse:x}}function jo(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function rE(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:r=>(n.helpers.add(r),r)}}function Wh(e,t){for(let n=0;n<e.length;n++)vp(e[n],t)}function vp(e,t){switch(e.type){case 1:Wh(e.cases,t),t.helper("plural");break;case 2:Wh(e.items,t);break;case 6:{vp(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function lE(e,t={}){const n=rE(e);n.helper("normalize"),e.body&&vp(e.body,n);const o=n.context();e.helpers=Array.from(o.helpers)}function sE(e){const t=e.body;return t.type===2?Gh(t):t.cases.forEach(n=>Gh(n)),e}function Gh(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const o=e.items[n];if(!(o.type===3||o.type===9)||o.value==null)break;t.push(o.value)}if(t.length===e.items.length){e.static=_y(t);for(let n=0;n<e.items.length;n++){const o=e.items[n];(o.type===3||o.type===9)&&delete o.value}}}}const iE="minifier";function gl(e){switch(e.t=e.type,e.type){case 0:{const t=e;gl(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let o=0;o<n.length;o++)gl(n[o]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let o=0;o<n.length;o++)gl(n[o]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;gl(t.key),t.k=t.key,delete t.key,t.modifier&&(gl(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw rs(gt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:iE,args:[e.type]})}delete e.type}const uE="parser";function cE(e,t){const{sourceMap:n,filename:o,breakLineCode:a,needIndent:r}=t,s=t.location!==!1,i={filename:o,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:a,needIndent:r,indentLevel:0};s&&e.loc&&(i.source=e.loc.source);const u=()=>i;function d(w,k){i.code+=w}function m(w,k=!0){const x=k?a:"";d(r?x+"  ".repeat(w):x)}function f(w=!0){const k=++i.indentLevel;w&&m(k)}function h(w=!0){const k=--i.indentLevel;w&&m(k)}function y(){m(i.indentLevel)}return{context:u,push:d,indent:f,deindent:h,newline:y,helper:w=>`_${w}`,needIndent:()=>i.needIndent}}function dE(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),Bl(e,t.key),t.modifier?(e.push(", "),Bl(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function mE(e,t){const{helper:n,needIndent:o}=e;e.push(`${n("normalize")}([`),e.indent(o());const a=t.items.length;for(let r=0;r<a&&(Bl(e,t.items[r]),r!==a-1);r++)e.push(", ");e.deindent(o()),e.push("])")}function fE(e,t){const{helper:n,needIndent:o}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(o());const a=t.cases.length;for(let r=0;r<a&&(Bl(e,t.cases[r]),r!==a-1);r++)e.push(", ");e.deindent(o()),e.push("])")}}function pE(e,t){t.body?Bl(e,t.body):e.push("null")}function Bl(e,t){const{helper:n}=e;switch(t.type){case 0:pE(e,t);break;case 1:fE(e,t);break;case 2:mE(e,t);break;case 6:dE(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw rs(gt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:uE,args:[t.type]})}}const vE=(e,t={})=>{const n=zh(t.mode)?t.mode:"normal",o=zh(t.filename)?t.filename:"message.intl",a=!!t.sourceMap,r=t.breakLineCode!=null?t.breakLineCode:n==="arrow"?";":`
`,s=t.needIndent?t.needIndent:n!=="arrow",i=e.helpers||[],u=cE(e,{mode:n,filename:o,sourceMap:a,breakLineCode:r,needIndent:s});u.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),u.indent(s),i.length>0&&(u.push(`const { ${_y(i.map(f=>`${f}: _${f}`),", ")} } = ctx`),u.newline()),u.push("return "),Bl(u,e),u.deindent(s),u.push("}"),delete e.helpers;const{code:d,map:m}=u.context();return{ast:e,code:d,map:m?m.toJSON():void 0}};function hE(e,t={}){const n=yy({},t),o=!!n.jit,a=!!n.minify,r=n.optimize==null?!0:n.optimize,i=aE(n).parse(e);return o?(r&&sE(i),a&&gl(i),{ast:i,code:""}):(lE(i,n),vE(i,n))}/*!
  * core-base v9.14.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function gE(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Pa().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Pa().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Pa().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const _r=[];_r[0]={w:[0],i:[3,0],"[":[4],o:[7]};_r[1]={w:[1],".":[2],"[":[4],o:[7]};_r[2]={w:[2],i:[3,0],0:[3,0]};_r[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};_r[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};_r[5]={"'":[4,0],o:8,l:[5,0]};_r[6]={'"':[4,0],o:8,l:[6,0]};const bE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function yE(e){return bE.test(e)}function _E(e){const t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t===n&&(t===34||t===39)?e.slice(1,-1):e}function wE(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function IE(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:yE(t)?_E(t):"*"+t}function xE(e){const t=[];let n=-1,o=0,a=0,r,s,i,u,d,m,f;const h=[];h[0]=()=>{s===void 0?s=i:s+=i},h[1]=()=>{s!==void 0&&(t.push(s),s=void 0)},h[2]=()=>{h[0](),a++},h[3]=()=>{if(a>0)a--,o=4,h[0]();else{if(a=0,s===void 0||(s=IE(s),s===!1))return!1;h[1]()}};function y(){const b=e[n+1];if(o===5&&b==="'"||o===6&&b==='"')return n++,i="\\"+b,h[0](),!0}for(;o!==null;)if(n++,r=e[n],!(r==="\\"&&y())){if(u=wE(r),f=_r[o],d=f[u]||f.l||8,d===8||(o=d[0],d[1]!==void 0&&(m=h[d[1]],m&&(i=r,m()===!1))))return;if(o===7)return t}}const Kh=new Map;function kE(e,t){return on(e)?e[t]:null}function wy(e,t){if(!on(e))return null;let n=Kh.get(t);if(n||(n=xE(t),n&&Kh.set(t,n)),!n)return null;const o=n.length;let a=e,r=0;for(;r<o;){const s=a[n[r]];if(s===void 0||vn(a))return null;a=s,r++}return a}const $E=e=>e,CE=e=>"",SE="text",TE=e=>e.length===0?"":VT(e),EE=NT;function Zh(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function FE(e){const t=qn(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(qn(e.named.count)||qn(e.named.n))?qn(e.named.count)?e.named.count:qn(e.named.n)?e.named.n:t:t}function AE(e,t){t.count||(t.count=e),t.n||(t.n=e)}function RE(e={}){const t=e.locale,n=FE(e),o=on(e.pluralRules)&&nt(t)&&vn(e.pluralRules[t])?e.pluralRules[t]:Zh,a=on(e.pluralRules)&&nt(t)&&vn(e.pluralRules[t])?Zh:void 0,r=k=>k[o(n,k.length,a)],s=e.list||[],i=k=>s[k],u=e.named||{};qn(e.pluralIndex)&&AE(n,u);const d=k=>u[k];function m(k){const x=vn(e.messages)?e.messages(k):on(e.messages)?e.messages[k]:!1;return x||(e.parent?e.parent.message(k):CE)}const f=k=>e.modifiers?e.modifiers[k]:$E,h=kt(e.processor)&&vn(e.processor.normalize)?e.processor.normalize:TE,y=kt(e.processor)&&vn(e.processor.interpolate)?e.processor.interpolate:EE,b=kt(e.processor)&&nt(e.processor.type)?e.processor.type:SE,w={list:i,named:d,plural:r,linked:(k,...x)=>{const[$,C]=x;let F="text",T="";x.length===1?on($)?(T=$.modifier||T,F=$.type||F):nt($)&&(T=$||T):x.length===2&&(nt($)&&(T=$||T),nt(C)&&(F=C||F));const S=m(k)(w),A=F==="vnode"&&wn(S)&&T?S[0]:S;return T?f(T)(A,F):A},message:m,type:b,interpolate:y,normalize:h,values:Zn({},s,u)};return w}let ai=null;function DE(e){ai=e}function OE(e,t,n){ai&&ai.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:n})}const PE=ME("function:translate");function ME(e){return t=>ai&&ai.emit(e,t)}const Iy=pp.__EXTEND_POINT__,Tr=Vc(Iy),BE={NOT_FOUND_KEY:Iy,FALLBACK_TO_TRANSLATE:Tr(),CANNOT_FORMAT_NUMBER:Tr(),FALLBACK_TO_NUMBER_FORMAT:Tr(),CANNOT_FORMAT_DATE:Tr(),FALLBACK_TO_DATE_FORMAT:Tr(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Tr(),__EXTEND_POINT__:Tr()},xy=gt.__EXTEND_POINT__,Er=Vc(xy),Zo={INVALID_ARGUMENT:xy,INVALID_DATE_ARGUMENT:Er(),INVALID_ISO_DATE_ARGUMENT:Er(),NOT_SUPPORT_NON_STRING_MESSAGE:Er(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Er(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Er(),NOT_SUPPORT_LOCALE_TYPE:Er(),__EXTEND_POINT__:Er()};function va(e){return rs(e,null,void 0)}function hp(e,t){return t.locale!=null?Yh(t.locale):Yh(e.locale)}let om;function Yh(e){if(nt(e))return e;if(vn(e)){if(e.resolvedOnce&&om!=null)return om;if(e.constructor.name==="Function"){const t=e();if(BT(t))throw va(Zo.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return om=t}else throw va(Zo.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw va(Zo.NOT_SUPPORT_LOCALE_TYPE)}function NE(e,t,n){return[...new Set([n,...wn(t)?t:on(t)?Object.keys(t):nt(t)?[t]:[n]])]}function ky(e,t,n){const o=nt(n)?n:Nl,a=e;a.__localeChainCache||(a.__localeChainCache=new Map);let r=a.__localeChainCache.get(o);if(!r){r=[];let s=[n];for(;wn(s);)s=Xh(r,s,t);const i=wn(t)||!kt(t)?t:t.default?t.default:null;s=nt(i)?[i]:i,wn(s)&&Xh(r,s,!1),a.__localeChainCache.set(o,r)}return r}function Xh(e,t,n){let o=!0;for(let a=0;a<t.length&&Bt(o);a++){const r=t[a];nt(r)&&(o=VE(e,t[a],n))}return o}function VE(e,t,n){let o;const a=t.split("-");do{const r=a.join("-");o=LE(e,r,n),a.splice(-1,1)}while(a.length&&o===!0);return o}function LE(e,t,n){let o=!1;if(!e.includes(t)&&(o=!0,t)){o=t[t.length-1]!=="!";const a=t.replace(/!/g,"");e.push(a),(wn(n)||kt(n))&&n[a]&&(o=n[a])}return o}const qE="9.14.0",Lc=-1,Nl="en-US",Qh="",Jh=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function UE(){return{upper:(e,t)=>t==="text"&&nt(e)?e.toUpperCase():t==="vnode"&&on(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&nt(e)?e.toLowerCase():t==="vnode"&&on(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&nt(e)?Jh(e):t==="vnode"&&on(e)&&"__v_isVNode"in e?Jh(e.children):e}}let $y;function e0(e){$y=e}let Cy;function jE(e){Cy=e}let Sy;function zE(e){Sy=e}let Ty=null;const HE=e=>{Ty=e},WE=()=>Ty;let Ey=null;const t0=e=>{Ey=e},GE=()=>Ey;let n0=0;function KE(e={}){const t=vn(e.onWarn)?e.onWarn:LT,n=nt(e.version)?e.version:qE,o=nt(e.locale)||vn(e.locale)?e.locale:Nl,a=vn(o)?Nl:o,r=wn(e.fallbackLocale)||kt(e.fallbackLocale)||nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:a,s=kt(e.messages)?e.messages:{[a]:{}},i=kt(e.datetimeFormats)?e.datetimeFormats:{[a]:{}},u=kt(e.numberFormats)?e.numberFormats:{[a]:{}},d=Zn({},e.modifiers||{},UE()),m=e.pluralRules||{},f=vn(e.missing)?e.missing:null,h=Bt(e.missingWarn)||dr(e.missingWarn)?e.missingWarn:!0,y=Bt(e.fallbackWarn)||dr(e.fallbackWarn)?e.fallbackWarn:!0,b=!!e.fallbackFormat,I=!!e.unresolving,w=vn(e.postTranslation)?e.postTranslation:null,k=kt(e.processor)?e.processor:null,x=Bt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,$=!!e.escapeParameter,C=vn(e.messageCompiler)?e.messageCompiler:$y,F=vn(e.messageResolver)?e.messageResolver:Cy||kE,T=vn(e.localeFallbacker)?e.localeFallbacker:Sy||NE,S=on(e.fallbackContext)?e.fallbackContext:void 0,A=e,E=on(A.__datetimeFormatters)?A.__datetimeFormatters:new Map,B=on(A.__numberFormatters)?A.__numberFormatters:new Map,M=on(A.__meta)?A.__meta:{};n0++;const N={version:n,cid:n0,locale:o,fallbackLocale:r,messages:s,modifiers:d,pluralRules:m,missing:f,missingWarn:h,fallbackWarn:y,fallbackFormat:b,unresolving:I,postTranslation:w,processor:k,warnHtmlMessage:x,escapeParameter:$,messageCompiler:C,messageResolver:F,localeFallbacker:T,fallbackContext:S,onWarn:t,__meta:M};return N.datetimeFormats=i,N.numberFormats=u,N.__datetimeFormatters=E,N.__numberFormatters=B,__INTLIFY_PROD_DEVTOOLS__&&OE(N,n,M),N}function gp(e,t,n,o,a){const{missing:r,onWarn:s}=e;if(r!==null){const i=r(e,n,t,a);return nt(i)?i:t}else return t}function Ns(e,t,n){const o=e;o.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function ZE(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function YE(e,t){const n=t.indexOf(e);if(n===-1)return!1;for(let o=n+1;o<t.length;o++)if(ZE(e,t[o]))return!0;return!1}function am(e){return n=>XE(n,e)}function XE(e,t){const n=t.b||t.body;if((n.t||n.type)===1){const o=n,a=o.c||o.cases;return e.plural(a.reduce((r,s)=>[...r,o0(e,s)],[]))}else return o0(e,n)}function o0(e,t){const n=t.s||t.static;if(n)return e.type==="text"?n:e.normalize([n]);{const o=(t.i||t.items).reduce((a,r)=>[...a,tf(e,r)],[]);return e.normalize(o)}}function tf(e,t){const n=t.t||t.type;switch(n){case 3:{const o=t;return o.v||o.value}case 9:{const o=t;return o.v||o.value}case 4:{const o=t;return e.interpolate(e.named(o.k||o.key))}case 5:{const o=t;return e.interpolate(e.list(o.i!=null?o.i:o.index))}case 6:{const o=t,a=o.m||o.modifier;return e.linked(tf(e,o.k||o.key),a?tf(e,a):void 0,e.type)}case 7:{const o=t;return o.v||o.value}case 8:{const o=t;return o.v||o.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const Fy=e=>e;let kl=Object.create(null);const Vl=e=>on(e)&&(e.t===0||e.type===0)&&("b"in e||"body"in e);function Ay(e,t={}){let n=!1;const o=t.onError||GT;return t.onError=a=>{n=!0,o(a)},{...hE(e,t),detectError:n}}const QE=(e,t)=>{if(!nt(e))throw va(Zo.NOT_SUPPORT_NON_STRING_MESSAGE);{Bt(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||Fy)(e),a=kl[o];if(a)return a;const{code:r,detectError:s}=Ay(e,t),i=new Function(`return ${r}`)();return s?i:kl[o]=i}};function JE(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&nt(e)){Bt(t.warnHtmlMessage)&&t.warnHtmlMessage;const o=(t.onCacheKey||Fy)(e),a=kl[o];if(a)return a;const{ast:r,detectError:s}=Ay(e,{...t,location:!1,jit:!0}),i=am(r);return s?i:kl[o]=i}else{const n=e.cacheKey;if(n){const o=kl[n];return o||(kl[n]=am(e))}else return am(e)}}const a0=()=>"",Mo=e=>vn(e);function r0(e,...t){const{fallbackFormat:n,postTranslation:o,unresolving:a,messageCompiler:r,fallbackLocale:s,messages:i}=e,[u,d]=nf(...t),m=Bt(d.missingWarn)?d.missingWarn:e.missingWarn,f=Bt(d.fallbackWarn)?d.fallbackWarn:e.fallbackWarn,h=Bt(d.escapeParameter)?d.escapeParameter:e.escapeParameter,y=!!d.resolvedMessage,b=nt(d.default)||Bt(d.default)?Bt(d.default)?r?u:()=>u:d.default:n?r?u:()=>u:"",I=n||b!=="",w=hp(e,d);h&&e6(d);let[k,x,$]=y?[u,w,i[w]||{}]:Ry(e,u,w,s,f,m),C=k,F=u;if(!y&&!(nt(C)||Vl(C)||Mo(C))&&I&&(C=b,F=C),!y&&(!(nt(C)||Vl(C)||Mo(C))||!nt(x)))return a?Lc:u;let T=!1;const S=()=>{T=!0},A=Mo(C)?C:Dy(e,u,x,C,F,S);if(T)return C;const E=o6(e,x,$,d),B=RE(E),M=t6(e,A,B),N=o?o(M,u):M;if(__INTLIFY_PROD_DEVTOOLS__){const G={timestamp:Date.now(),key:nt(u)?u:Mo(C)?C.key:"",locale:x||(Mo(C)?C.locale:""),format:nt(C)?C:Mo(C)?C.source:"",message:N};G.meta=Zn({},e.__meta,WE()||{}),PE(G)}return N}function e6(e){wn(e.list)?e.list=e.list.map(t=>nt(t)?jh(t):t):on(e.named)&&Object.keys(e.named).forEach(t=>{nt(e.named[t])&&(e.named[t]=jh(e.named[t]))})}function Ry(e,t,n,o,a,r){const{messages:s,onWarn:i,messageResolver:u,localeFallbacker:d}=e,m=d(e,o,n);let f={},h,y=null;const b="translate";for(let I=0;I<m.length&&(h=m[I],f=s[h]||{},(y=u(f,t))===null&&(y=f[t]),!(nt(y)||Vl(y)||Mo(y)));I++)if(!YE(h,m)){const w=gp(e,t,h,r,b);w!==t&&(y=w)}return[y,h,f]}function Dy(e,t,n,o,a,r){const{messageCompiler:s,warnHtmlMessage:i}=e;if(Mo(o)){const d=o;return d.locale=d.locale||n,d.key=d.key||t,d}if(s==null){const d=()=>o;return d.locale=n,d.key=t,d}const u=s(o,n6(e,n,a,o,i,r));return u.locale=n,u.key=t,u.source=o,u}function t6(e,t,n){return t(n)}function nf(...e){const[t,n,o]=e,a={};if(!nt(t)&&!qn(t)&&!Mo(t)&&!Vl(t))throw va(Zo.INVALID_ARGUMENT);const r=qn(t)?String(t):(Mo(t),t);return qn(n)?a.plural=n:nt(n)?a.default=n:kt(n)&&!Nc(n)?a.named=n:wn(n)&&(a.list=n),qn(o)?a.plural=o:nt(o)?a.default=o:kt(o)&&Zn(a,o),[r,a]}function n6(e,t,n,o,a,r){return{locale:t,key:n,warnHtmlMessage:a,onError:s=>{throw r&&r(s),s},onCacheKey:s=>DT(t,n,s)}}function o6(e,t,n,o){const{modifiers:a,pluralRules:r,messageResolver:s,fallbackLocale:i,fallbackWarn:u,missingWarn:d,fallbackContext:m}=e,h={locale:t,modifiers:a,pluralRules:r,messages:y=>{let b=s(n,y);if(b==null&&m){const[,,I]=Ry(m,y,t,i,u,d);b=s(I,y)}if(nt(b)||Vl(b)){let I=!1;const k=Dy(e,y,t,b,y,()=>{I=!0});return I?a0:k}else return Mo(b)?b:a0}};return e.processor&&(h.processor=e.processor),o.list&&(h.list=o.list),o.named&&(h.named=o.named),qn(o.plural)&&(h.pluralIndex=o.plural),h}function l0(e,...t){const{datetimeFormats:n,unresolving:o,fallbackLocale:a,onWarn:r,localeFallbacker:s}=e,{__datetimeFormatters:i}=e,[u,d,m,f]=of(...t),h=Bt(m.missingWarn)?m.missingWarn:e.missingWarn;Bt(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const y=!!m.part,b=hp(e,m),I=s(e,a,b);if(!nt(u)||u==="")return new Intl.DateTimeFormat(b,f).format(d);let w={},k,x=null;const $="datetime format";for(let T=0;T<I.length&&(k=I[T],w=n[k]||{},x=w[u],!kt(x));T++)gp(e,u,k,h,$);if(!kt(x)||!nt(k))return o?Lc:u;let C=`${k}__${u}`;Nc(f)||(C=`${C}__${JSON.stringify(f)}`);let F=i.get(C);return F||(F=new Intl.DateTimeFormat(k,Zn({},x,f)),i.set(C,F)),y?F.formatToParts(d):F.format(d)}const Oy=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function of(...e){const[t,n,o,a]=e,r={};let s={},i;if(nt(t)){const u=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw va(Zo.INVALID_ISO_DATE_ARGUMENT);const d=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();i=new Date(d);try{i.toISOString()}catch{throw va(Zo.INVALID_ISO_DATE_ARGUMENT)}}else if(PT(t)){if(isNaN(t.getTime()))throw va(Zo.INVALID_DATE_ARGUMENT);i=t}else if(qn(t))i=t;else throw va(Zo.INVALID_ARGUMENT);return nt(n)?r.key=n:kt(n)&&Object.keys(n).forEach(u=>{Oy.includes(u)?s[u]=n[u]:r[u]=n[u]}),nt(o)?r.locale=o:kt(o)&&(s=o),kt(a)&&(s=a),[r.key||"",i,r,s]}function s0(e,t,n){const o=e;for(const a in n){const r=`${t}__${a}`;o.__datetimeFormatters.has(r)&&o.__datetimeFormatters.delete(r)}}function i0(e,...t){const{numberFormats:n,unresolving:o,fallbackLocale:a,onWarn:r,localeFallbacker:s}=e,{__numberFormatters:i}=e,[u,d,m,f]=af(...t),h=Bt(m.missingWarn)?m.missingWarn:e.missingWarn;Bt(m.fallbackWarn)?m.fallbackWarn:e.fallbackWarn;const y=!!m.part,b=hp(e,m),I=s(e,a,b);if(!nt(u)||u==="")return new Intl.NumberFormat(b,f).format(d);let w={},k,x=null;const $="number format";for(let T=0;T<I.length&&(k=I[T],w=n[k]||{},x=w[u],!kt(x));T++)gp(e,u,k,h,$);if(!kt(x)||!nt(k))return o?Lc:u;let C=`${k}__${u}`;Nc(f)||(C=`${C}__${JSON.stringify(f)}`);let F=i.get(C);return F||(F=new Intl.NumberFormat(k,Zn({},x,f)),i.set(C,F)),y?F.formatToParts(d):F.format(d)}const Py=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function af(...e){const[t,n,o,a]=e,r={};let s={};if(!qn(t))throw va(Zo.INVALID_ARGUMENT);const i=t;return nt(n)?r.key=n:kt(n)&&Object.keys(n).forEach(u=>{Py.includes(u)?s[u]=n[u]:r[u]=n[u]}),nt(o)?r.locale=o:kt(o)&&(s=o),kt(a)&&(s=a),[r.key||"",i,r,s]}function u0(e,t,n){const o=e;for(const a in n){const r=`${t}__${a}`;o.__numberFormatters.has(r)&&o.__numberFormatters.delete(r)}}gE();function a6(){return My().__VUE_DEVTOOLS_GLOBAL_HOOK__}function My(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const r6=typeof Proxy=="function",l6="devtools-plugin:setup",s6="plugin:settings:set";let il,rf;function i6(){var e;return il!==void 0||(typeof window<"u"&&window.performance?(il=!0,rf=window.performance):typeof globalThis<"u"&&(!((e=globalThis.perf_hooks)===null||e===void 0)&&e.performance)?(il=!0,rf=globalThis.perf_hooks.performance):il=!1),il}function u6(){return i6()?rf.now():Date.now()}class c6{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const o={};if(t.settings)for(const s in t.settings){const i=t.settings[s];o[s]=i.defaultValue}const a=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},o);try{const s=localStorage.getItem(a),i=JSON.parse(s);Object.assign(r,i)}catch{}this.fallbacks={getSettings(){return r},setSettings(s){try{localStorage.setItem(a,JSON.stringify(s))}catch{}r=s},now(){return u6()}},n&&n.on(s6,(s,i)=>{s===this.plugin.id&&this.fallbacks.setSettings(i)}),this.proxiedOn=new Proxy({},{get:(s,i)=>this.target?this.target.on[i]:(...u)=>{this.onQueue.push({method:i,args:u})}}),this.proxiedTarget=new Proxy({},{get:(s,i)=>this.target?this.target[i]:i==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(i)?(...u)=>(this.targetQueue.push({method:i,args:u,resolve:()=>{}}),this.fallbacks[i](...u)):(...u)=>new Promise(d=>{this.targetQueue.push({method:i,args:u,resolve:d})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function d6(e,t){const n=e,o=My(),a=a6(),r=r6&&n.enableEarlyProxy;if(a&&(o.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!r))a.emit(l6,e,t);else{const s=r?new c6(n,a):null;(o.__VUE_DEVTOOLS_PLUGINS__=o.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:s}),s&&t(s.proxiedTarget)}}/*!
  * vue-i18n v9.14.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const m6="9.14.0";function f6(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Pa().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Pa().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Pa().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Pa().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Pa().__INTLIFY_PROD_DEVTOOLS__=!1)}const By=BE.__EXTEND_POINT__,Fa=Vc(By);Fa(),Fa(),Fa(),Fa(),Fa(),Fa(),Fa(),Fa(),Fa();const Ny=Zo.__EXTEND_POINT__,co=Vc(Ny),Un={UNEXPECTED_RETURN_TYPE:Ny,INVALID_ARGUMENT:co(),MUST_BE_CALL_SETUP_TOP:co(),NOT_INSTALLED:co(),NOT_AVAILABLE_IN_LEGACY_MODE:co(),REQUIRED_VALUE:co(),INVALID_VALUE:co(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:co(),NOT_INSTALLED_WITH_PROVIDE:co(),UNEXPECTED_ERROR:co(),NOT_COMPATIBLE_LEGACY_VUE_I18N:co(),BRIDGE_SUPPORT_VUE_2_ONLY:co(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:co(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:co(),__EXTEND_POINT__:co()};function Gn(e,...t){return rs(e,null,void 0)}const lf=yr("__translateVNode"),sf=yr("__datetimeParts"),uf=yr("__numberParts"),Vy=yr("__setPluralRules"),Ly=yr("__injectWithOption"),cf=yr("__dispose");function ri(e){if(!on(e))return e;for(const t in e)if(Xu(e,t))if(!t.includes("."))on(e[t])&&ri(e[t]);else{const n=t.split("."),o=n.length-1;let a=e,r=!1;for(let s=0;s<o;s++){if(n[s]in a||(a[n[s]]={}),!on(a[n[s]])){r=!0;break}a=a[n[s]]}r||(a[n[o]]=e[t],delete e[t]),on(a[n[o]])&&ri(a[n[o]])}return e}function qc(e,t){const{messages:n,__i18n:o,messageResolver:a,flatJson:r}=t,s=kt(n)?n:wn(o)?{}:{[e]:{}};if(wn(o)&&o.forEach(i=>{if("locale"in i&&"resource"in i){const{locale:u,resource:d}=i;u?(s[u]=s[u]||{},Nu(d,s[u])):Nu(d,s)}else nt(i)&&Nu(JSON.parse(i),s)}),a==null&&r)for(const i in s)Xu(s,i)&&ri(s[i]);return s}function qy(e){return e.type}function Uy(e,t,n){let o=on(t.messages)?t.messages:{};"__i18nGlobal"in n&&(o=qc(e.locale.value,{messages:o,__i18n:n.__i18nGlobal}));const a=Object.keys(o);a.length&&a.forEach(r=>{e.mergeLocaleMessage(r,o[r])});{if(on(t.datetimeFormats)){const r=Object.keys(t.datetimeFormats);r.length&&r.forEach(s=>{e.mergeDateTimeFormat(s,t.datetimeFormats[s])})}if(on(t.numberFormats)){const r=Object.keys(t.numberFormats);r.length&&r.forEach(s=>{e.mergeNumberFormat(s,t.numberFormats[s])})}}}function c0(e){return l(ap,null,e,0)}const d0="__INTLIFY_META__",m0=()=>[],p6=()=>!1;let f0=0;function p0(e){return(t,n,o,a)=>e(n,o,ya()||void 0,a)}const v6=()=>{const e=ya();let t=null;return e&&(t=qy(e)[d0])?{[d0]:t}:null};function bp(e={},t){const{__root:n,__injectWithOption:o}=e,a=n===void 0,r=e.flatJson,s=Yu?V:Pt,i=!!e.translateExistCompatible;let u=Bt(e.inheritLocale)?e.inheritLocale:!0;const d=s(n&&u?n.locale.value:nt(e.locale)?e.locale:Nl),m=s(n&&u?n.fallbackLocale.value:nt(e.fallbackLocale)||wn(e.fallbackLocale)||kt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:d.value),f=s(qc(d.value,e)),h=s(kt(e.datetimeFormats)?e.datetimeFormats:{[d.value]:{}}),y=s(kt(e.numberFormats)?e.numberFormats:{[d.value]:{}});let b=n?n.missingWarn:Bt(e.missingWarn)||dr(e.missingWarn)?e.missingWarn:!0,I=n?n.fallbackWarn:Bt(e.fallbackWarn)||dr(e.fallbackWarn)?e.fallbackWarn:!0,w=n?n.fallbackRoot:Bt(e.fallbackRoot)?e.fallbackRoot:!0,k=!!e.fallbackFormat,x=vn(e.missing)?e.missing:null,$=vn(e.missing)?p0(e.missing):null,C=vn(e.postTranslation)?e.postTranslation:null,F=n?n.warnHtmlMessage:Bt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,T=!!e.escapeParameter;const S=n?n.modifiers:kt(e.modifiers)?e.modifiers:{};let A=e.pluralRules||n&&n.pluralRules,E;E=(()=>{a&&t0(null);const $e={version:m6,locale:d.value,fallbackLocale:m.value,messages:f.value,modifiers:S,pluralRules:A,missing:$===null?void 0:$,missingWarn:b,fallbackWarn:I,fallbackFormat:k,unresolving:!0,postTranslation:C===null?void 0:C,warnHtmlMessage:F,escapeParameter:T,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};$e.datetimeFormats=h.value,$e.numberFormats=y.value,$e.__datetimeFormatters=kt(E)?E.__datetimeFormatters:void 0,$e.__numberFormatters=kt(E)?E.__numberFormatters:void 0;const De=KE($e);return a&&t0(De),De})(),Ns(E,d.value,m.value);function M(){return[d.value,m.value,f.value,h.value,y.value]}const N=P({get:()=>d.value,set:$e=>{d.value=$e,E.locale=d.value}}),G=P({get:()=>m.value,set:$e=>{m.value=$e,E.fallbackLocale=m.value,Ns(E,d.value,$e)}}),U=P(()=>f.value),j=P(()=>h.value),O=P(()=>y.value);function H(){return vn(C)?C:null}function W($e){C=$e,E.postTranslation=$e}function X(){return x}function q($e){$e!==null&&($=p0($e)),x=$e,E.missing=$}const L=($e,De,at,dt,we,Ge)=>{M();let yt;try{__INTLIFY_PROD_DEVTOOLS__,a||(E.fallbackContext=n?GE():void 0),yt=$e(E)}finally{__INTLIFY_PROD_DEVTOOLS__,a||(E.fallbackContext=void 0)}if(at!=="translate exists"&&qn(yt)&&yt===Lc||at==="translate exists"&&!yt){const[rn,Oe]=De();return n&&w?dt(n):we(rn)}else{if(Ge(yt))return yt;throw Gn(Un.UNEXPECTED_RETURN_TYPE)}};function ee(...$e){return L(De=>Reflect.apply(r0,null,[De,...$e]),()=>nf(...$e),"translate",De=>Reflect.apply(De.t,De,[...$e]),De=>De,De=>nt(De))}function ce(...$e){const[De,at,dt]=$e;if(dt&&!on(dt))throw Gn(Un.INVALID_ARGUMENT);return ee(De,at,Zn({resolvedMessage:!0},dt||{}))}function ue(...$e){return L(De=>Reflect.apply(l0,null,[De,...$e]),()=>of(...$e),"datetime format",De=>Reflect.apply(De.d,De,[...$e]),()=>Qh,De=>nt(De))}function oe(...$e){return L(De=>Reflect.apply(i0,null,[De,...$e]),()=>af(...$e),"number format",De=>Reflect.apply(De.n,De,[...$e]),()=>Qh,De=>nt(De))}function re($e){return $e.map(De=>nt(De)||qn(De)||Bt(De)?c0(String(De)):De)}const ae={normalize:re,interpolate:$e=>$e,type:"vnode"};function se(...$e){return L(De=>{let at;const dt=De;try{dt.processor=ae,at=Reflect.apply(r0,null,[dt,...$e])}finally{dt.processor=null}return at},()=>nf(...$e),"translate",De=>De[lf](...$e),De=>[c0(De)],De=>wn(De))}function xe(...$e){return L(De=>Reflect.apply(i0,null,[De,...$e]),()=>af(...$e),"number format",De=>De[uf](...$e),m0,De=>nt(De)||wn(De))}function le(...$e){return L(De=>Reflect.apply(l0,null,[De,...$e]),()=>of(...$e),"datetime format",De=>De[sf](...$e),m0,De=>nt(De)||wn(De))}function ge($e){A=$e,E.pluralRules=A}function ve($e,De){return L(()=>{if(!$e)return!1;const at=nt(De)?De:d.value,dt=Ce(at),we=E.messageResolver(dt,$e);return i?we!=null:Vl(we)||Mo(we)||nt(we)},()=>[$e],"translate exists",at=>Reflect.apply(at.te,at,[$e,De]),p6,at=>Bt(at))}function ie($e){let De=null;const at=ky(E,m.value,d.value);for(let dt=0;dt<at.length;dt++){const we=f.value[at[dt]]||{},Ge=E.messageResolver(we,$e);if(Ge!=null){De=Ge;break}}return De}function me($e){const De=ie($e);return De??(n?n.tm($e)||{}:{})}function Ce($e){return f.value[$e]||{}}function ke($e,De){if(r){const at={[$e]:De};for(const dt in at)Xu(at,dt)&&ri(at[dt]);De=at[$e]}f.value[$e]=De,E.messages=f.value}function Be($e,De){f.value[$e]=f.value[$e]||{};const at={[$e]:De};if(r)for(const dt in at)Xu(at,dt)&&ri(at[dt]);De=at[$e],Nu(De,f.value[$e]),E.messages=f.value}function Fe($e){return h.value[$e]||{}}function he($e,De){h.value[$e]=De,E.datetimeFormats=h.value,s0(E,$e,De)}function _e($e,De){h.value[$e]=Zn(h.value[$e]||{},De),E.datetimeFormats=h.value,s0(E,$e,De)}function Te($e){return y.value[$e]||{}}function Ne($e,De){y.value[$e]=De,E.numberFormats=y.value,u0(E,$e,De)}function lt($e,De){y.value[$e]=Zn(y.value[$e]||{},De),E.numberFormats=y.value,u0(E,$e,De)}f0++,n&&Yu&&(Se(n.locale,$e=>{u&&(d.value=$e,E.locale=$e,Ns(E,d.value,m.value))}),Se(n.fallbackLocale,$e=>{u&&(m.value=$e,E.fallbackLocale=$e,Ns(E,d.value,m.value))}));const Ke={id:f0,locale:N,fallbackLocale:G,get inheritLocale(){return u},set inheritLocale($e){u=$e,$e&&n&&(d.value=n.locale.value,m.value=n.fallbackLocale.value,Ns(E,d.value,m.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:U,get modifiers(){return S},get pluralRules(){return A||{}},get isGlobal(){return a},get missingWarn(){return b},set missingWarn($e){b=$e,E.missingWarn=b},get fallbackWarn(){return I},set fallbackWarn($e){I=$e,E.fallbackWarn=I},get fallbackRoot(){return w},set fallbackRoot($e){w=$e},get fallbackFormat(){return k},set fallbackFormat($e){k=$e,E.fallbackFormat=k},get warnHtmlMessage(){return F},set warnHtmlMessage($e){F=$e,E.warnHtmlMessage=$e},get escapeParameter(){return T},set escapeParameter($e){T=$e,E.escapeParameter=$e},t:ee,getLocaleMessage:Ce,setLocaleMessage:ke,mergeLocaleMessage:Be,getPostTranslationHandler:H,setPostTranslationHandler:W,getMissingHandler:X,setMissingHandler:q,[Vy]:ge};return Ke.datetimeFormats=j,Ke.numberFormats=O,Ke.rt=ce,Ke.te=ve,Ke.tm=me,Ke.d=ue,Ke.n=oe,Ke.getDateTimeFormat=Fe,Ke.setDateTimeFormat=he,Ke.mergeDateTimeFormat=_e,Ke.getNumberFormat=Te,Ke.setNumberFormat=Ne,Ke.mergeNumberFormat=lt,Ke[Ly]=o,Ke[lf]=se,Ke[sf]=le,Ke[uf]=xe,Ke}function h6(e){const t=nt(e.locale)?e.locale:Nl,n=nt(e.fallbackLocale)||wn(e.fallbackLocale)||kt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,o=vn(e.missing)?e.missing:void 0,a=Bt(e.silentTranslationWarn)||dr(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,r=Bt(e.silentFallbackWarn)||dr(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,s=Bt(e.fallbackRoot)?e.fallbackRoot:!0,i=!!e.formatFallbackMessages,u=kt(e.modifiers)?e.modifiers:{},d=e.pluralizationRules,m=vn(e.postTranslation)?e.postTranslation:void 0,f=nt(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,h=!!e.escapeParameterHtml,y=Bt(e.sync)?e.sync:!0;let b=e.messages;if(kt(e.sharedMessages)){const T=e.sharedMessages;b=Object.keys(T).reduce((A,E)=>{const B=A[E]||(A[E]={});return Zn(B,T[E]),A},b||{})}const{__i18n:I,__root:w,__injectWithOption:k}=e,x=e.datetimeFormats,$=e.numberFormats,C=e.flatJson,F=e.translateExistCompatible;return{locale:t,fallbackLocale:n,messages:b,flatJson:C,datetimeFormats:x,numberFormats:$,missing:o,missingWarn:a,fallbackWarn:r,fallbackRoot:s,fallbackFormat:i,modifiers:u,pluralRules:d,postTranslation:m,warnHtmlMessage:f,escapeParameter:h,messageResolver:e.messageResolver,inheritLocale:y,translateExistCompatible:F,__i18n:I,__root:w,__injectWithOption:k}}function df(e={},t){{const n=bp(h6(e)),{__extender:o}=e,a={id:n.id,get locale(){return n.locale.value},set locale(r){n.locale.value=r},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(r){n.fallbackLocale.value=r},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(r){},get missing(){return n.getMissingHandler()},set missing(r){n.setMissingHandler(r)},get silentTranslationWarn(){return Bt(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(r){n.missingWarn=Bt(r)?!r:r},get silentFallbackWarn(){return Bt(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(r){n.fallbackWarn=Bt(r)?!r:r},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(r){n.fallbackFormat=r},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(r){n.setPostTranslationHandler(r)},get sync(){return n.inheritLocale},set sync(r){n.inheritLocale=r},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(r){n.warnHtmlMessage=r!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(r){n.escapeParameter=r},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(r){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...r){const[s,i,u]=r,d={};let m=null,f=null;if(!nt(s))throw Gn(Un.INVALID_ARGUMENT);const h=s;return nt(i)?d.locale=i:wn(i)?m=i:kt(i)&&(f=i),wn(u)?m=u:kt(u)&&(f=u),Reflect.apply(n.t,n,[h,m||f||{},d])},rt(...r){return Reflect.apply(n.rt,n,[...r])},tc(...r){const[s,i,u]=r,d={plural:1};let m=null,f=null;if(!nt(s))throw Gn(Un.INVALID_ARGUMENT);const h=s;return nt(i)?d.locale=i:qn(i)?d.plural=i:wn(i)?m=i:kt(i)&&(f=i),nt(u)?d.locale=u:wn(u)?m=u:kt(u)&&(f=u),Reflect.apply(n.t,n,[h,m||f||{},d])},te(r,s){return n.te(r,s)},tm(r){return n.tm(r)},getLocaleMessage(r){return n.getLocaleMessage(r)},setLocaleMessage(r,s){n.setLocaleMessage(r,s)},mergeLocaleMessage(r,s){n.mergeLocaleMessage(r,s)},d(...r){return Reflect.apply(n.d,n,[...r])},getDateTimeFormat(r){return n.getDateTimeFormat(r)},setDateTimeFormat(r,s){n.setDateTimeFormat(r,s)},mergeDateTimeFormat(r,s){n.mergeDateTimeFormat(r,s)},n(...r){return Reflect.apply(n.n,n,[...r])},getNumberFormat(r){return n.getNumberFormat(r)},setNumberFormat(r,s){n.setNumberFormat(r,s)},mergeNumberFormat(r,s){n.mergeNumberFormat(r,s)},getChoiceIndex(r,s){return-1}};return a.__extender=o,a}}const yp={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function g6({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((o,a)=>[...o,...a.type===de?a.children:[a]],[]):t.reduce((n,o)=>{const a=e[o];return a&&(n[o]=a()),n},{})}function jy(e){return de}const b6=Ve({name:"i18n-t",props:Zn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>qn(e)||!isNaN(e)}},yp),setup(e,t){const{slots:n,attrs:o}=t,a=e.i18n||Pe({useScope:e.scope,__useComponent:!0});return()=>{const r=Object.keys(n).filter(f=>f!=="_"),s={};e.locale&&(s.locale=e.locale),e.plural!==void 0&&(s.plural=nt(e.plural)?+e.plural:e.plural);const i=g6(t,r),u=a[lf](e.keypath,i,s),d=Zn({},o),m=nt(e.tag)||on(e.tag)?e.tag:jy();return Ae(m,d,u)}}}),v0=b6;function y6(e){return wn(e)&&!nt(e[0])}function zy(e,t,n,o){const{slots:a,attrs:r}=t;return()=>{const s={part:!0};let i={};e.locale&&(s.locale=e.locale),nt(e.format)?s.key=e.format:on(e.format)&&(nt(e.format.key)&&(s.key=e.format.key),i=Object.keys(e.format).reduce((h,y)=>n.includes(y)?Zn({},h,{[y]:e.format[y]}):h,{}));const u=o(e.value,s,i);let d=[s.key];wn(u)?d=u.map((h,y)=>{const b=a[h.type],I=b?b({[h.type]:h.value,index:y,parts:u}):[h.value];return y6(I)&&(I[0].key=`${h.type}-${y}`),I}):nt(u)&&(d=[u]);const m=Zn({},r),f=nt(e.tag)||on(e.tag)?e.tag:jy();return Ae(f,m,d)}}const _6=Ve({name:"i18n-n",props:Zn({value:{type:Number,required:!0},format:{type:[String,Object]}},yp),setup(e,t){const n=e.i18n||Pe({useScope:e.scope,__useComponent:!0});return zy(e,t,Py,(...o)=>n[uf](...o))}}),h0=_6,w6=Ve({name:"i18n-d",props:Zn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},yp),setup(e,t){const n=e.i18n||Pe({useScope:e.scope,__useComponent:!0});return zy(e,t,Oy,(...o)=>n[sf](...o))}}),g0=w6;function I6(e,t){const n=e;if(e.mode==="composition")return n.__getInstance(t)||e.global;{const o=n.__getInstance(t);return o!=null?o.__composer:e.global.__composer}}function x6(e){const t=s=>{const{instance:i,modifiers:u,value:d}=s;if(!i||!i.$)throw Gn(Un.UNEXPECTED_ERROR);const m=I6(e,i.$),f=b0(d);return[Reflect.apply(m.t,m,[...y0(f)]),m]};return{created:(s,i)=>{const[u,d]=t(i);Yu&&e.global===d&&(s.__i18nWatcher=Se(d.locale,()=>{i.instance&&i.instance.$forceUpdate()})),s.__composer=d,s.textContent=u},unmounted:s=>{Yu&&s.__i18nWatcher&&(s.__i18nWatcher(),s.__i18nWatcher=void 0,delete s.__i18nWatcher),s.__composer&&(s.__composer=void 0,delete s.__composer)},beforeUpdate:(s,{value:i})=>{if(s.__composer){const u=s.__composer,d=b0(i);s.textContent=Reflect.apply(u.t,u,[...y0(d)])}},getSSRProps:s=>{const[i]=t(s);return{textContent:i}}}}function b0(e){if(nt(e))return{path:e};if(kt(e)){if(!("path"in e))throw Gn(Un.REQUIRED_VALUE,"path");return e}else throw Gn(Un.INVALID_VALUE)}function y0(e){const{path:t,locale:n,args:o,choice:a,plural:r}=e,s={},i=o||{};return nt(n)&&(s.locale=n),qn(a)&&(s.plural=a),qn(r)&&(s.plural=r),[t,i,s]}function k6(e,t,...n){const o=kt(n[0])?n[0]:{},a=!!o.useI18nComponentName;(Bt(o.globalInstall)?o.globalInstall:!0)&&([a?"i18n":v0.name,"I18nT"].forEach(s=>e.component(s,v0)),[h0.name,"I18nN"].forEach(s=>e.component(s,h0)),[g0.name,"I18nD"].forEach(s=>e.component(s,g0))),e.directive("t",x6(t))}function $6(e,t,n){return{beforeCreate(){const o=ya();if(!o)throw Gn(Un.UNEXPECTED_ERROR);const a=this.$options;if(a.i18n){const r=a.i18n;if(a.__i18n&&(r.__i18n=a.__i18n),r.__root=t,this===this.$root)this.$i18n=_0(e,r);else{r.__injectWithOption=!0,r.__extender=n.__vueI18nExtend,this.$i18n=df(r);const s=this.$i18n;s.__extender&&(s.__disposer=s.__extender(this.$i18n))}}else if(a.__i18n)if(this===this.$root)this.$i18n=_0(e,a);else{this.$i18n=df({__i18n:a.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:t});const r=this.$i18n;r.__extender&&(r.__disposer=r.__extender(this.$i18n))}else this.$i18n=e;a.__i18nGlobal&&Uy(t,a,a),this.$t=(...r)=>this.$i18n.t(...r),this.$rt=(...r)=>this.$i18n.rt(...r),this.$tc=(...r)=>this.$i18n.tc(...r),this.$te=(r,s)=>this.$i18n.te(r,s),this.$d=(...r)=>this.$i18n.d(...r),this.$n=(...r)=>this.$i18n.n(...r),this.$tm=r=>this.$i18n.tm(r),n.__setInstance(o,this.$i18n)},mounted(){},unmounted(){const o=ya();if(!o)throw Gn(Un.UNEXPECTED_ERROR);const a=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,a.__disposer&&(a.__disposer(),delete a.__disposer,delete a.__extender),n.__deleteInstance(o),delete this.$i18n}}}function _0(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Vy](t.pluralizationRules||e.pluralizationRules);const n=qc(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(n).forEach(o=>e.mergeLocaleMessage(o,n[o])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(o=>e.mergeDateTimeFormat(o,t.datetimeFormats[o])),t.numberFormats&&Object.keys(t.numberFormats).forEach(o=>e.mergeNumberFormat(o,t.numberFormats[o])),e}const C6=yr("global-vue-i18n");function S6(e={},t){const n=__VUE_I18N_LEGACY_API__&&Bt(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,o=Bt(e.globalInjection)?e.globalInjection:!0,a=__VUE_I18N_LEGACY_API__&&n?!!e.allowComposition:!0,r=new Map,[s,i]=T6(e,n),u=yr("");function d(h){return r.get(h)||null}function m(h,y){r.set(h,y)}function f(h){r.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return a},async install(y,...b){if(y.__VUE_I18N_SYMBOL__=u,y.provide(y.__VUE_I18N_SYMBOL__,h),kt(b[0])){const k=b[0];h.__composerExtend=k.__composerExtend,h.__vueI18nExtend=k.__vueI18nExtend}let I=null;!n&&o&&(I=B6(y,h.global)),__VUE_I18N_FULL_INSTALL__&&k6(y,h,...b),__VUE_I18N_LEGACY_API__&&n&&y.mixin($6(i,i.__composer,h));const w=y.unmount;y.unmount=()=>{I&&I(),h.dispose(),w()}},get global(){return i},dispose(){s.stop()},__instances:r,__getInstance:d,__setInstance:m,__deleteInstance:f};return h}}function Pe(e={}){const t=ya();if(t==null)throw Gn(Un.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Gn(Un.NOT_INSTALLED);const n=E6(t),o=A6(n),a=qy(t),r=F6(e,a);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!e.__useComponent){if(!n.allowComposition)throw Gn(Un.NOT_AVAILABLE_IN_LEGACY_MODE);return P6(t,r,o,e)}if(r==="global")return Uy(o,e,a),o;if(r==="parent"){let u=R6(n,t,e.__useComponent);return u==null&&(u=o),u}const s=n;let i=s.__getInstance(t);if(i==null){const u=Zn({},e);"__i18n"in a&&(u.__i18n=a.__i18n),o&&(u.__root=o),i=bp(u),s.__composerExtend&&(i[cf]=s.__composerExtend(i)),O6(s,t,i),s.__setInstance(t,i)}return i}function T6(e,t,n){const o=Ec();{const a=__VUE_I18N_LEGACY_API__&&t?o.run(()=>df(e)):o.run(()=>bp(e));if(a==null)throw Gn(Un.UNEXPECTED_ERROR);return[o,a]}}function E6(e){{const t=Le(e.isCE?C6:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Gn(e.isCE?Un.NOT_INSTALLED_WITH_PROVIDE:Un.UNEXPECTED_ERROR);return t}}function F6(e,t){return Nc(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function A6(e){return e.mode==="composition"?e.global:e.global.__composer}function R6(e,t,n=!1){let o=null;const a=t.root;let r=D6(t,n);for(;r!=null;){const s=e;if(e.mode==="composition")o=s.__getInstance(r);else if(__VUE_I18N_LEGACY_API__){const i=s.__getInstance(r);i!=null&&(o=i.__composer,n&&o&&!o[Ly]&&(o=null))}if(o!=null||a===r)break;r=r.parent}return o}function D6(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function O6(e,t,n){Xe(()=>{},t),un(()=>{const o=n;e.__deleteInstance(t);const a=o[cf];a&&(a(),delete o[cf])},t)}function P6(e,t,n,o={}){const a=t==="local",r=Pt(null);if(a&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw Gn(Un.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const s=Bt(o.inheritLocale)?o.inheritLocale:!nt(o.locale),i=V(!a||s?n.locale.value:nt(o.locale)?o.locale:Nl),u=V(!a||s?n.fallbackLocale.value:nt(o.fallbackLocale)||wn(o.fallbackLocale)||kt(o.fallbackLocale)||o.fallbackLocale===!1?o.fallbackLocale:i.value),d=V(qc(i.value,o)),m=V(kt(o.datetimeFormats)?o.datetimeFormats:{[i.value]:{}}),f=V(kt(o.numberFormats)?o.numberFormats:{[i.value]:{}}),h=a?n.missingWarn:Bt(o.missingWarn)||dr(o.missingWarn)?o.missingWarn:!0,y=a?n.fallbackWarn:Bt(o.fallbackWarn)||dr(o.fallbackWarn)?o.fallbackWarn:!0,b=a?n.fallbackRoot:Bt(o.fallbackRoot)?o.fallbackRoot:!0,I=!!o.fallbackFormat,w=vn(o.missing)?o.missing:null,k=vn(o.postTranslation)?o.postTranslation:null,x=a?n.warnHtmlMessage:Bt(o.warnHtmlMessage)?o.warnHtmlMessage:!0,$=!!o.escapeParameter,C=a?n.modifiers:kt(o.modifiers)?o.modifiers:{},F=o.pluralRules||a&&n.pluralRules;function T(){return[i.value,u.value,d.value,m.value,f.value]}const S=P({get:()=>r.value?r.value.locale.value:i.value,set:ie=>{r.value&&(r.value.locale.value=ie),i.value=ie}}),A=P({get:()=>r.value?r.value.fallbackLocale.value:u.value,set:ie=>{r.value&&(r.value.fallbackLocale.value=ie),u.value=ie}}),E=P(()=>r.value?r.value.messages.value:d.value),B=P(()=>m.value),M=P(()=>f.value);function N(){return r.value?r.value.getPostTranslationHandler():k}function G(ie){r.value&&r.value.setPostTranslationHandler(ie)}function U(){return r.value?r.value.getMissingHandler():w}function j(ie){r.value&&r.value.setMissingHandler(ie)}function O(ie){return T(),ie()}function H(...ie){return r.value?O(()=>Reflect.apply(r.value.t,null,[...ie])):O(()=>"")}function W(...ie){return r.value?Reflect.apply(r.value.rt,null,[...ie]):""}function X(...ie){return r.value?O(()=>Reflect.apply(r.value.d,null,[...ie])):O(()=>"")}function q(...ie){return r.value?O(()=>Reflect.apply(r.value.n,null,[...ie])):O(()=>"")}function L(ie){return r.value?r.value.tm(ie):{}}function ee(ie,me){return r.value?r.value.te(ie,me):!1}function ce(ie){return r.value?r.value.getLocaleMessage(ie):{}}function ue(ie,me){r.value&&(r.value.setLocaleMessage(ie,me),d.value[ie]=me)}function oe(ie,me){r.value&&r.value.mergeLocaleMessage(ie,me)}function re(ie){return r.value?r.value.getDateTimeFormat(ie):{}}function Y(ie,me){r.value&&(r.value.setDateTimeFormat(ie,me),m.value[ie]=me)}function ae(ie,me){r.value&&r.value.mergeDateTimeFormat(ie,me)}function se(ie){return r.value?r.value.getNumberFormat(ie):{}}function xe(ie,me){r.value&&(r.value.setNumberFormat(ie,me),f.value[ie]=me)}function le(ie,me){r.value&&r.value.mergeNumberFormat(ie,me)}const ge={get id(){return r.value?r.value.id:-1},locale:S,fallbackLocale:A,messages:E,datetimeFormats:B,numberFormats:M,get inheritLocale(){return r.value?r.value.inheritLocale:s},set inheritLocale(ie){r.value&&(r.value.inheritLocale=ie)},get availableLocales(){return r.value?r.value.availableLocales:Object.keys(d.value)},get modifiers(){return r.value?r.value.modifiers:C},get pluralRules(){return r.value?r.value.pluralRules:F},get isGlobal(){return r.value?r.value.isGlobal:!1},get missingWarn(){return r.value?r.value.missingWarn:h},set missingWarn(ie){r.value&&(r.value.missingWarn=ie)},get fallbackWarn(){return r.value?r.value.fallbackWarn:y},set fallbackWarn(ie){r.value&&(r.value.missingWarn=ie)},get fallbackRoot(){return r.value?r.value.fallbackRoot:b},set fallbackRoot(ie){r.value&&(r.value.fallbackRoot=ie)},get fallbackFormat(){return r.value?r.value.fallbackFormat:I},set fallbackFormat(ie){r.value&&(r.value.fallbackFormat=ie)},get warnHtmlMessage(){return r.value?r.value.warnHtmlMessage:x},set warnHtmlMessage(ie){r.value&&(r.value.warnHtmlMessage=ie)},get escapeParameter(){return r.value?r.value.escapeParameter:$},set escapeParameter(ie){r.value&&(r.value.escapeParameter=ie)},t:H,getPostTranslationHandler:N,setPostTranslationHandler:G,getMissingHandler:U,setMissingHandler:j,rt:W,d:X,n:q,tm:L,te:ee,getLocaleMessage:ce,setLocaleMessage:ue,mergeLocaleMessage:oe,getDateTimeFormat:re,setDateTimeFormat:Y,mergeDateTimeFormat:ae,getNumberFormat:se,setNumberFormat:xe,mergeNumberFormat:le};function ve(ie){ie.locale.value=i.value,ie.fallbackLocale.value=u.value,Object.keys(d.value).forEach(me=>{ie.mergeLocaleMessage(me,d.value[me])}),Object.keys(m.value).forEach(me=>{ie.mergeDateTimeFormat(me,m.value[me])}),Object.keys(f.value).forEach(me=>{ie.mergeNumberFormat(me,f.value[me])}),ie.escapeParameter=$,ie.fallbackFormat=I,ie.fallbackRoot=b,ie.fallbackWarn=y,ie.missingWarn=h,ie.warnHtmlMessage=x}return La(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw Gn(Un.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const ie=r.value=e.proxy.$i18n.__composer;t==="global"?(i.value=ie.locale.value,u.value=ie.fallbackLocale.value,d.value=ie.messages.value,m.value=ie.datetimeFormats.value,f.value=ie.numberFormats.value):a&&ve(ie)}),ge}const M6=["locale","fallbackLocale","availableLocales"],w0=["t","rt","d","n","tm","te"];function B6(e,t){const n=Object.create(null);return M6.forEach(a=>{const r=Object.getOwnPropertyDescriptor(t,a);if(!r)throw Gn(Un.UNEXPECTED_ERROR);const s=hn(r.value)?{get(){return r.value.value},set(i){r.value.value=i}}:{get(){return r.get&&r.get()}};Object.defineProperty(n,a,s)}),e.config.globalProperties.$i18n=n,w0.forEach(a=>{const r=Object.getOwnPropertyDescriptor(t,a);if(!r||!r.value)throw Gn(Un.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${a}`,r)}),()=>{delete e.config.globalProperties.$i18n,w0.forEach(a=>{delete e.config.globalProperties[`$${a}`]})}}f6();__INTLIFY_JIT_COMPILATION__?e0(JE):e0(QE);jE(wy);zE(ky);if(__INTLIFY_PROD_DEVTOOLS__){const e=Pa();e.__INTLIFY__=!0,DE(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function Hy(e,t=2){if(e===0)return"0 B";const n=1024,o=t<0?0:t,a=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(o))+" "+a[r]}/*!
 * Get the contrasting color for any hex color
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * Derived from work by Brian Suda, https://24ways.org/2010/calculating-color-contrast/
 * @param  {String} A hexcolor value
 * @return {String} The contrasting color (black or white)
 */function Zr(e){e.slice(0,1)==="#"&&(e=e.slice(1)),e.length===3&&(e=e.split("").map(function(r){return r+r}).join(""));var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),a=(t*299+n*587+o*114)/1e3;return a<=150?"white":"black"}function Uc(e="en"){if(typeof config<"u")return config.locale||config.fallback_locale||e;if(typeof window<"u"){const{userLanguage:t,language:n}=window.navigator;return(t||n).substr(0,2)}return e}const li="a-f\\d",N6=`#?[${li}]{3}[${li}]?`,V6=`#?[${li}]{6}([${li}]{2})?`,L6=new RegExp(`[^#${li}]`,"gi"),q6=new RegExp(`^${N6}$|^${V6}$`,"i");function U6(e,t={}){if(typeof e!="string"||L6.test(e)||!q6.test(e))throw new TypeError("Expected a valid hex string");e=e.replace(/^#/,"");let n=1;e.length===8&&(n=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),e.length===4&&(n=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const o=Number.parseInt(e,16),a=o>>16,r=o>>8&255,s=o&255,i=typeof t.alpha=="number"?t.alpha:n;if(t.format==="array")return[a,r,s,i];if(t.format==="css"){const u=i===1?"":` / ${Number((i*100).toFixed(2))}%`;return`rgb(${a} ${r} ${s}${u})`}return{red:a,green:r,blue:s,alpha:i}}function Ju(e){const[t,n,o]=U6(e,{format:"array"});return t+", "+n+", "+o}var j6=Object.prototype;function z6(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||j6;return e===n}var jc=z6;function H6(e,t){return function(n){return e(t(n))}}var Wy=H6,W6=Wy,G6=W6(Object.keys,Object),K6=G6,Z6=jc,Y6=K6,X6=Object.prototype,Q6=X6.hasOwnProperty;function J6(e){if(!Z6(e))return Y6(e);var t=[];for(var n in Object(e))Q6.call(e,n)&&n!="constructor"&&t.push(n);return t}var Gy=J6,eF=tl,tF=ra,nF=eF(tF,"DataView"),oF=nF,aF=tl,rF=ra,lF=aF(rF,"Promise"),sF=lF,iF=tl,uF=ra,cF=iF(uF,"Set"),Ky=cF,dF=tl,mF=ra,fF=dF(mF,"WeakMap"),pF=fF,mf=oF,ff=cp,pf=sF,vf=Ky,hf=pF,Zy=br,ls=uy,I0="[object Map]",vF="[object Object]",x0="[object Promise]",k0="[object Set]",$0="[object WeakMap]",C0="[object DataView]",hF=ls(mf),gF=ls(ff),bF=ls(pf),yF=ls(vf),_F=ls(hf),Pr=Zy;(mf&&Pr(new mf(new ArrayBuffer(1)))!=C0||ff&&Pr(new ff)!=I0||pf&&Pr(pf.resolve())!=x0||vf&&Pr(new vf)!=k0||hf&&Pr(new hf)!=$0)&&(Pr=function(e){var t=Zy(e),n=t==vF?e.constructor:void 0,o=n?ls(n):"";if(o)switch(o){case hF:return C0;case gF:return I0;case bF:return x0;case yF:return k0;case _F:return $0}return t});var Ti=Pr,wF=br,IF=la,xF="[object Arguments]";function kF(e){return IF(e)&&wF(e)==xF}var $F=kF,S0=$F,CF=la,Yy=Object.prototype,SF=Yy.hasOwnProperty,TF=Yy.propertyIsEnumerable,EF=S0(function(){return arguments}())?S0:function(e){return CF(e)&&SF.call(e,"callee")&&!TF.call(e,"callee")},Ei=EF,FF=9007199254740991;function AF(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=FF}var _p=AF,RF=Ac,DF=_p;function OF(e){return e!=null&&DF(e.length)&&!RF(e)}var wr=OF,ec={exports:{}};function PF(){return!1}var MF=PF;ec.exports;(function(e,t){var n=ra,o=MF,a=t&&!t.nodeType&&t,r=a&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===a,i=s?n.Buffer:void 0,u=i?i.isBuffer:void 0,d=u||o;e.exports=d})(ec,ec.exports);var Fi=ec.exports,BF=br,NF=_p,VF=la,LF="[object Arguments]",qF="[object Array]",UF="[object Boolean]",jF="[object Date]",zF="[object Error]",HF="[object Function]",WF="[object Map]",GF="[object Number]",KF="[object Object]",ZF="[object RegExp]",YF="[object Set]",XF="[object String]",QF="[object WeakMap]",JF="[object ArrayBuffer]",eA="[object DataView]",tA="[object Float32Array]",nA="[object Float64Array]",oA="[object Int8Array]",aA="[object Int16Array]",rA="[object Int32Array]",lA="[object Uint8Array]",sA="[object Uint8ClampedArray]",iA="[object Uint16Array]",uA="[object Uint32Array]",yn={};yn[tA]=yn[nA]=yn[oA]=yn[aA]=yn[rA]=yn[lA]=yn[sA]=yn[iA]=yn[uA]=!0;yn[LF]=yn[qF]=yn[JF]=yn[UF]=yn[eA]=yn[jF]=yn[zF]=yn[HF]=yn[WF]=yn[GF]=yn[KF]=yn[ZF]=yn[YF]=yn[XF]=yn[QF]=!1;function cA(e){return VF(e)&&NF(e.length)&&!!yn[BF(e)]}var dA=cA;function mA(e){return function(t){return e(t)}}var Ai=mA,tc={exports:{}};tc.exports;(function(e,t){var n=sy,o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,r=a&&a.exports===o,s=r&&n.process,i=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();e.exports=i})(tc,tc.exports);var wp=tc.exports,fA=dA,pA=Ai,T0=wp,E0=T0&&T0.isTypedArray,vA=E0?pA(E0):fA,zc=vA,hA=Gy,gA=Ti,bA=Ei,yA=$n,_A=wr,wA=Fi,IA=jc,xA=zc,kA="[object Map]",$A="[object Set]",CA=Object.prototype,SA=CA.hasOwnProperty;function TA(e){if(e==null)return!0;if(_A(e)&&(yA(e)||typeof e=="string"||typeof e.splice=="function"||wA(e)||xA(e)||bA(e)))return!e.length;var t=gA(e);if(t==kA||t==$A)return!e.size;if(IA(e))return!hA(e).length;for(var n in e)if(SA.call(e,n))return!1;return!0}var EA=TA;const FA=Rt(EA);var AA=br,RA=la,DA="[object Number]";function OA(e){return typeof e=="number"||RA(e)&&AA(e)==DA}var Xy=OA;const PA=Rt(Xy);var MA=Xy;function BA(e){return MA(e)&&e!=+e}var NA=BA;const VA=Rt(NA);function Ut(e){return FA(e)&&typeof e!="boolean"&&!PA(e)||VA(e)}function LA(e){return new RegExp("[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}","i").test(e)}function qA(e){return e.offsetWidth+e.offsetHeight>0}function UA(e,t){let n=!1;e[0]=="#"&&(e=e.slice(1),n=!0);let o=parseInt(e,16),a=(o>>16)+t;a>255?a=255:a<0&&(a=0);let r=(o>>8&255)+t;r>255?r=255:r<0&&(r=0);let s=(o&255)+t;return s>255?s=255:s<0&&(s=0),(n?"#":"")+(s|r<<8|a<<16).toString(16)}function F0(){if(Object.hasOwn(window,"__passiveEvt"))return window.__passiveEvt;let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e={passive:!0},!0}});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch{}return window.__passiveEvt=e,e}function So(e=15){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function jA(e,t,n="..."){return e.substring(0,t)+n}var Ip={};(function e(t,n,o,a){var r=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",i=function(){if(!t.OffscreenCanvas)return!1;var q=new OffscreenCanvas(1,1),L=q.getContext("2d");L.fillRect(0,0,1,1);var ee=q.transferToImageBitmap();try{L.createPattern(ee,"no-repeat")}catch{return!1}return!0}();function u(){}function d(q){var L=n.exports.Promise,ee=L!==void 0?L:t.Promise;return typeof ee=="function"?new ee(q):(q(u,u),null)}var m=function(q,L){return{transform:function(ee){if(q)return ee;if(L.has(ee))return L.get(ee);var ce=new OffscreenCanvas(ee.width,ee.height),ue=ce.getContext("2d");return ue.drawImage(ee,0,0),L.set(ee,ce),ce},clear:function(){L.clear()}}}(i,new Map),f=function(){var q=Math.floor(16.666666666666668),L,ee,ce={},ue=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(L=function(oe){var re=Math.random();return ce[re]=requestAnimationFrame(function Y(ae){ue===ae||ue+q-1<ae?(ue=ae,delete ce[re],oe()):ce[re]=requestAnimationFrame(Y)}),re},ee=function(oe){ce[oe]&&cancelAnimationFrame(ce[oe])}):(L=function(oe){return setTimeout(oe,q)},ee=function(oe){return clearTimeout(oe)}),{frame:L,cancel:ee}}(),h=function(){var q,L,ee={};function ce(ue){function oe(re,Y){ue.postMessage({options:re||{},callback:Y})}ue.init=function(Y){var ae=Y.transferControlToOffscreen();ue.postMessage({canvas:ae},[ae])},ue.fire=function(Y,ae,se){if(L)return oe(Y,null),L;var xe=Math.random().toString(36).slice(2);return L=d(function(le){function ge(ve){ve.data.callback===xe&&(delete ee[xe],ue.removeEventListener("message",ge),L=null,m.clear(),se(),le())}ue.addEventListener("message",ge),oe(Y,xe),ee[xe]=ge.bind(null,{data:{callback:xe}})}),L},ue.reset=function(){ue.postMessage({reset:!0});for(var Y in ee)ee[Y](),delete ee[Y]}}return function(){if(q)return q;if(!o&&r){var ue=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{q=new Worker(URL.createObjectURL(new Blob([ue])))}catch(oe){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",oe),null}ce(q)}return q}}(),y={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function b(q,L){return L?L(q):q}function I(q){return q!=null}function w(q,L,ee){return b(q&&I(q[L])?q[L]:y[L],ee)}function k(q){return q<0?0:Math.floor(q)}function x(q,L){return Math.floor(Math.random()*(L-q))+q}function $(q){return parseInt(q,16)}function C(q){return q.map(F)}function F(q){var L=String(q).replace(/[^0-9a-f]/gi,"");return L.length<6&&(L=L[0]+L[0]+L[1]+L[1]+L[2]+L[2]),{r:$(L.substring(0,2)),g:$(L.substring(2,4)),b:$(L.substring(4,6))}}function T(q){var L=w(q,"origin",Object);return L.x=w(L,"x",Number),L.y=w(L,"y",Number),L}function S(q){q.width=document.documentElement.clientWidth,q.height=document.documentElement.clientHeight}function A(q){var L=q.getBoundingClientRect();q.width=L.width,q.height=L.height}function E(q){var L=document.createElement("canvas");return L.style.position="fixed",L.style.top="0px",L.style.left="0px",L.style.pointerEvents="none",L.style.zIndex=q,L}function B(q,L,ee,ce,ue,oe,re,Y,ae){q.save(),q.translate(L,ee),q.rotate(oe),q.scale(ce,ue),q.arc(0,0,1,re,Y,ae),q.restore()}function M(q){var L=q.angle*(Math.PI/180),ee=q.spread*(Math.PI/180);return{x:q.x,y:q.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:q.startVelocity*.5+Math.random()*q.startVelocity,angle2D:-L+(.5*ee-Math.random()*ee),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:q.color,shape:q.shape,tick:0,totalTicks:q.ticks,decay:q.decay,drift:q.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:q.gravity*3,ovalScalar:.6,scalar:q.scalar,flat:q.flat}}function N(q,L){L.x+=Math.cos(L.angle2D)*L.velocity+L.drift,L.y+=Math.sin(L.angle2D)*L.velocity+L.gravity,L.velocity*=L.decay,L.flat?(L.wobble=0,L.wobbleX=L.x+10*L.scalar,L.wobbleY=L.y+10*L.scalar,L.tiltSin=0,L.tiltCos=0,L.random=1):(L.wobble+=L.wobbleSpeed,L.wobbleX=L.x+10*L.scalar*Math.cos(L.wobble),L.wobbleY=L.y+10*L.scalar*Math.sin(L.wobble),L.tiltAngle+=.1,L.tiltSin=Math.sin(L.tiltAngle),L.tiltCos=Math.cos(L.tiltAngle),L.random=Math.random()+2);var ee=L.tick++/L.totalTicks,ce=L.x+L.random*L.tiltCos,ue=L.y+L.random*L.tiltSin,oe=L.wobbleX+L.random*L.tiltCos,re=L.wobbleY+L.random*L.tiltSin;if(q.fillStyle="rgba("+L.color.r+", "+L.color.g+", "+L.color.b+", "+(1-ee)+")",q.beginPath(),s&&L.shape.type==="path"&&typeof L.shape.path=="string"&&Array.isArray(L.shape.matrix))q.fill(H(L.shape.path,L.shape.matrix,L.x,L.y,Math.abs(oe-ce)*.1,Math.abs(re-ue)*.1,Math.PI/10*L.wobble));else if(L.shape.type==="bitmap"){var Y=Math.PI/10*L.wobble,ae=Math.abs(oe-ce)*.1,se=Math.abs(re-ue)*.1,xe=L.shape.bitmap.width*L.scalar,le=L.shape.bitmap.height*L.scalar,ge=new DOMMatrix([Math.cos(Y)*ae,Math.sin(Y)*ae,-Math.sin(Y)*se,Math.cos(Y)*se,L.x,L.y]);ge.multiplySelf(new DOMMatrix(L.shape.matrix));var ve=q.createPattern(m.transform(L.shape.bitmap),"no-repeat");ve.setTransform(ge),q.globalAlpha=1-ee,q.fillStyle=ve,q.fillRect(L.x-xe/2,L.y-le/2,xe,le),q.globalAlpha=1}else if(L.shape==="circle")q.ellipse?q.ellipse(L.x,L.y,Math.abs(oe-ce)*L.ovalScalar,Math.abs(re-ue)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI):B(q,L.x,L.y,Math.abs(oe-ce)*L.ovalScalar,Math.abs(re-ue)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI);else if(L.shape==="star")for(var ie=Math.PI/2*3,me=4*L.scalar,Ce=8*L.scalar,ke=L.x,Be=L.y,Fe=5,he=Math.PI/Fe;Fe--;)ke=L.x+Math.cos(ie)*Ce,Be=L.y+Math.sin(ie)*Ce,q.lineTo(ke,Be),ie+=he,ke=L.x+Math.cos(ie)*me,Be=L.y+Math.sin(ie)*me,q.lineTo(ke,Be),ie+=he;else q.moveTo(Math.floor(L.x),Math.floor(L.y)),q.lineTo(Math.floor(L.wobbleX),Math.floor(ue)),q.lineTo(Math.floor(oe),Math.floor(re)),q.lineTo(Math.floor(ce),Math.floor(L.wobbleY));return q.closePath(),q.fill(),L.tick<L.totalTicks}function G(q,L,ee,ce,ue){var oe=L.slice(),re=q.getContext("2d"),Y,ae,se=d(function(xe){function le(){Y=ae=null,re.clearRect(0,0,ce.width,ce.height),m.clear(),ue(),xe()}function ge(){o&&!(ce.width===a.width&&ce.height===a.height)&&(ce.width=q.width=a.width,ce.height=q.height=a.height),!ce.width&&!ce.height&&(ee(q),ce.width=q.width,ce.height=q.height),re.clearRect(0,0,ce.width,ce.height),oe=oe.filter(function(ve){return N(re,ve)}),oe.length?Y=f.frame(ge):le()}Y=f.frame(ge),ae=le});return{addFettis:function(xe){return oe=oe.concat(xe),se},canvas:q,promise:se,reset:function(){Y&&f.cancel(Y),ae&&ae()}}}function U(q,L){var ee=!q,ce=!!w(L||{},"resize"),ue=!1,oe=w(L,"disableForReducedMotion",Boolean),re=r&&!!w(L||{},"useWorker"),Y=re?h():null,ae=ee?S:A,se=q&&Y?!!q.__confetti_initialized:!1,xe=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,le;function ge(ie,me,Ce){for(var ke=w(ie,"particleCount",k),Be=w(ie,"angle",Number),Fe=w(ie,"spread",Number),he=w(ie,"startVelocity",Number),_e=w(ie,"decay",Number),Te=w(ie,"gravity",Number),Ne=w(ie,"drift",Number),lt=w(ie,"colors",C),Ke=w(ie,"ticks",Number),$e=w(ie,"shapes"),De=w(ie,"scalar"),at=!!w(ie,"flat"),dt=T(ie),we=ke,Ge=[],yt=q.width*dt.x,rn=q.height*dt.y;we--;)Ge.push(M({x:yt,y:rn,angle:Be,spread:Fe,startVelocity:he,color:lt[we%lt.length],shape:$e[x(0,$e.length)],ticks:Ke,decay:_e,gravity:Te,drift:Ne,scalar:De,flat:at}));return le?le.addFettis(Ge):(le=G(q,Ge,ae,me,Ce),le.promise)}function ve(ie){var me=oe||w(ie,"disableForReducedMotion",Boolean),Ce=w(ie,"zIndex",Number);if(me&&xe)return d(function(he){he()});ee&&le?q=le.canvas:ee&&!q&&(q=E(Ce),document.body.appendChild(q)),ce&&!se&&ae(q);var ke={width:q.width,height:q.height};Y&&!se&&Y.init(q),se=!0,Y&&(q.__confetti_initialized=!0);function Be(){if(Y){var he={getBoundingClientRect:function(){if(!ee)return q.getBoundingClientRect()}};ae(he),Y.postMessage({resize:{width:he.width,height:he.height}});return}ke.width=ke.height=null}function Fe(){le=null,ce&&(ue=!1,t.removeEventListener("resize",Be)),ee&&q&&(document.body.contains(q)&&document.body.removeChild(q),q=null,se=!1)}return ce&&!ue&&(ue=!0,t.addEventListener("resize",Be,!1)),Y?Y.fire(ie,ke,Fe):ge(ie,ke,Fe)}return ve.reset=function(){Y&&Y.reset(),le&&le.reset()},ve}var j;function O(){return j||(j=U(null,{useWorker:!0,resize:!0})),j}function H(q,L,ee,ce,ue,oe,re){var Y=new Path2D(q),ae=new Path2D;ae.addPath(Y,new DOMMatrix(L));var se=new Path2D;return se.addPath(ae,new DOMMatrix([Math.cos(re)*ue,Math.sin(re)*ue,-Math.sin(re)*oe,Math.cos(re)*oe,ee,ce])),se}function W(q){if(!s)throw new Error("path confetti are not supported in this browser");var L,ee;typeof q=="string"?L=q:(L=q.path,ee=q.matrix);var ce=new Path2D(L),ue=document.createElement("canvas"),oe=ue.getContext("2d");if(!ee){for(var re=1e3,Y=re,ae=re,se=0,xe=0,le,ge,ve=0;ve<re;ve+=2)for(var ie=0;ie<re;ie+=2)oe.isPointInPath(ce,ve,ie,"nonzero")&&(Y=Math.min(Y,ve),ae=Math.min(ae,ie),se=Math.max(se,ve),xe=Math.max(xe,ie));le=se-Y,ge=xe-ae;var me=10,Ce=Math.min(me/le,me/ge);ee=[Ce,0,0,Ce,-Math.round(le/2+Y)*Ce,-Math.round(ge/2+ae)*Ce]}return{type:"path",path:L,matrix:ee}}function X(q){var L,ee=1,ce="#000000",ue='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof q=="string"?L=q:(L=q.text,ee="scalar"in q?q.scalar:ee,ue="fontFamily"in q?q.fontFamily:ue,ce="color"in q?q.color:ce);var oe=10*ee,re=""+oe+"px "+ue,Y=new OffscreenCanvas(oe,oe),ae=Y.getContext("2d");ae.font=re;var se=ae.measureText(L),xe=Math.ceil(se.actualBoundingBoxRight+se.actualBoundingBoxLeft),le=Math.ceil(se.actualBoundingBoxAscent+se.actualBoundingBoxDescent),ge=2,ve=se.actualBoundingBoxLeft+ge,ie=se.actualBoundingBoxAscent+ge;xe+=ge+ge,le+=ge+ge,Y=new OffscreenCanvas(xe,le),ae=Y.getContext("2d"),ae.font=re,ae.fillStyle=ce,ae.fillText(L,ve,ie);var me=1/ee;return{type:"bitmap",bitmap:Y.transferToImageBitmap(),matrix:[me,0,0,me,-xe*me/2,-le*me/2]}}n.exports=function(){return O().apply(this,arguments)},n.exports.reset=function(){O().reset()},n.exports.create=U,n.exports.shapeFromPath=W,n.exports.shapeFromText=X})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ip,!1);const zA=Ip.exports;Ip.exports.create;function xp(){var e=document.createElement("canvas");e.classList.add("absolute","bottom-0","w-full","h-full","confetti"),document.body.appendChild(e);var t=zA.create(e,{resize:!0});t({particleCount:300,spread:300,ticks:150,origin:{x:1}}).then(()=>{const n=e.cloneNode(!0);e.replaceWith(n),e.remove(),n.remove()})}class nl extends Error{}class HA extends nl{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class WA extends nl{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class GA extends nl{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class $l extends nl{}class Qy extends nl{constructor(t){super(`Invalid unit ${t}`)}}class Jn extends nl{}class Ka extends nl{constructor(){super("Zone is an abstract class")}}const tt="numeric",Jo="short",ko="long",nc={year:tt,month:tt,day:tt},Jy={year:tt,month:Jo,day:tt},KA={year:tt,month:Jo,day:tt,weekday:Jo},e_={year:tt,month:ko,day:tt},t_={year:tt,month:ko,day:tt,weekday:ko},n_={hour:tt,minute:tt},o_={hour:tt,minute:tt,second:tt},a_={hour:tt,minute:tt,second:tt,timeZoneName:Jo},r_={hour:tt,minute:tt,second:tt,timeZoneName:ko},l_={hour:tt,minute:tt,hourCycle:"h23"},s_={hour:tt,minute:tt,second:tt,hourCycle:"h23"},i_={hour:tt,minute:tt,second:tt,hourCycle:"h23",timeZoneName:Jo},u_={hour:tt,minute:tt,second:tt,hourCycle:"h23",timeZoneName:ko},c_={year:tt,month:tt,day:tt,hour:tt,minute:tt},d_={year:tt,month:tt,day:tt,hour:tt,minute:tt,second:tt},m_={year:tt,month:Jo,day:tt,hour:tt,minute:tt},f_={year:tt,month:Jo,day:tt,hour:tt,minute:tt,second:tt},ZA={year:tt,month:Jo,day:tt,weekday:Jo,hour:tt,minute:tt},p_={year:tt,month:ko,day:tt,hour:tt,minute:tt,timeZoneName:Jo},v_={year:tt,month:ko,day:tt,hour:tt,minute:tt,second:tt,timeZoneName:Jo},h_={year:tt,month:ko,day:tt,weekday:ko,hour:tt,minute:tt,timeZoneName:ko},g_={year:tt,month:ko,day:tt,weekday:ko,hour:tt,minute:tt,second:tt,timeZoneName:ko};class Ri{get type(){throw new Ka}get name(){throw new Ka}get ianaName(){return this.name}get isUniversal(){throw new Ka}offsetName(t,n){throw new Ka}formatOffset(t,n){throw new Ka}offset(t){throw new Ka}equals(t){throw new Ka}get isValid(){throw new Ka}}let rm=null;class Hc extends Ri{static get instance(){return rm===null&&(rm=new Hc),rm}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:o}){return C_(t,n,o)}formatOffset(t,n){return Js(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let Vu={};function YA(e){return Vu[e]||(Vu[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Vu[e]}const XA={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function QA(e,t){const n=e.format(t).replace(/\u200E/g,""),o=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,a,r,s,i,u,d,m]=o;return[s,a,r,i,u,d,m]}function JA(e,t){const n=e.formatToParts(t),o=[];for(let a=0;a<n.length;a++){const{type:r,value:s}=n[a],i=XA[r];r==="era"?o[i]=s:It(i)||(o[i]=parseInt(s,10))}return o}let bu={};class Na extends Ri{static create(t){return bu[t]||(bu[t]=new Na(t)),bu[t]}static resetCache(){bu={},Vu={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Na.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:o}){return C_(t,n,o,this.name)}formatOffset(t,n){return Js(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const o=YA(this.name);let[a,r,s,i,u,d,m]=o.formatToParts?JA(o,n):QA(o,n);i==="BC"&&(a=-Math.abs(a)+1);const h=Gc({year:a,month:r,day:s,hour:u===24?0:u,minute:d,second:m,millisecond:0});let y=+n;const b=y%1e3;return y-=b>=0?b:1e3+b,(h-y)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let A0={};function eR(e,t={}){const n=JSON.stringify([e,t]);let o=A0[n];return o||(o=new Intl.ListFormat(e,t),A0[n]=o),o}let gf={};function bf(e,t={}){const n=JSON.stringify([e,t]);let o=gf[n];return o||(o=new Intl.DateTimeFormat(e,t),gf[n]=o),o}let yf={};function tR(e,t={}){const n=JSON.stringify([e,t]);let o=yf[n];return o||(o=new Intl.NumberFormat(e,t),yf[n]=o),o}let _f={};function nR(e,t={}){const{base:n,...o}=t,a=JSON.stringify([e,o]);let r=_f[a];return r||(r=new Intl.RelativeTimeFormat(e,t),_f[a]=r),r}let Ys=null;function oR(){return Ys||(Ys=new Intl.DateTimeFormat().resolvedOptions().locale,Ys)}let R0={};function aR(e){let t=R0[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,R0[e]=t}return t}function rR(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let o,a;try{o=bf(e).resolvedOptions(),a=e}catch{const u=e.substring(0,n);o=bf(u).resolvedOptions(),a=u}const{numberingSystem:r,calendar:s}=o;return[a,r,s]}}function lR(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function sR(e){const t=[];for(let n=1;n<=12;n++){const o=ut.utc(2009,n,1);t.push(e(o))}return t}function iR(e){const t=[];for(let n=1;n<=7;n++){const o=ut.utc(2016,11,13+n);t.push(e(o))}return t}function yu(e,t,n,o){const a=e.listingMode();return a==="error"?null:a==="en"?n(t):o(t)}function uR(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class cR{constructor(t,n,o){this.padTo=o.padTo||0,this.floor=o.floor||!1;const{padTo:a,floor:r,...s}=o;if(!n||Object.keys(s).length>0){const i={useGrouping:!1,...o};o.padTo>0&&(i.minimumIntegerDigits=o.padTo),this.inf=tR(t,i)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):Tp(t,3);return Mn(n,this.padTo)}}}class dR{constructor(t,n,o){this.opts=o,this.originalZone=void 0;let a;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const s=-1*(t.offset/60),i=s>=0?`Etc/GMT+${s}`:`Etc/GMT${s}`;t.offset!==0&&Na.create(i).valid?(a=i,this.dt=t):(a="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,a=t.zone.name):(a="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const r={...this.opts};r.timeZone=r.timeZone||a,this.dtf=bf(n,r)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const o=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:o}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class mR{constructor(t,n,o){this.opts={style:"long",...o},!n&&k_()&&(this.rtf=nR(t,o))}format(t,n){return this.rtf?this.rtf.format(t,n):PR(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}const fR={firstDay:1,minimalDays:4,weekend:[6,7]};class nn{static fromOpts(t){return nn.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,n,o,a,r=!1){const s=t||_n.defaultLocale,i=s||(r?"en-US":oR()),u=n||_n.defaultNumberingSystem,d=o||_n.defaultOutputCalendar,m=wf(a)||_n.defaultWeekSettings;return new nn(i,u,d,m,s)}static resetCache(){Ys=null,gf={},yf={},_f={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:o,weekSettings:a}={}){return nn.create(t,n,o,a)}constructor(t,n,o,a,r){const[s,i,u]=rR(t);this.locale=s,this.numberingSystem=n||i||null,this.outputCalendar=o||u||null,this.weekSettings=a,this.intl=lR(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=uR(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:nn.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,wf(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return yu(this,t,E_,()=>{const o=n?{month:t,day:"numeric"}:{month:t},a=n?"format":"standalone";return this.monthsCache[a][t]||(this.monthsCache[a][t]=sR(r=>this.extract(r,o,"month"))),this.monthsCache[a][t]})}weekdays(t,n=!1){return yu(this,t,R_,()=>{const o=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},a=n?"format":"standalone";return this.weekdaysCache[a][t]||(this.weekdaysCache[a][t]=iR(r=>this.extract(r,o,"weekday"))),this.weekdaysCache[a][t]})}meridiems(){return yu(this,void 0,()=>D_,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ut.utc(2016,11,13,9),ut.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return yu(this,t,O_,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[ut.utc(-40,1,1),ut.utc(2017,1,1)].map(o=>this.extract(o,n,"era"))),this.eraCache[t]})}extract(t,n,o){const a=this.dtFormatter(t,n),r=a.formatToParts(),s=r.find(i=>i.type.toLowerCase()===o);return s?s.value:null}numberFormatter(t={}){return new cR(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new dR(t,this.intl,n)}relFormatter(t={}){return new mR(this.intl,this.isEnglish(),t)}listFormatter(t={}){return eR(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:$_()?aR(this.locale):fR}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let lm=null;class ao extends Ri{static get utcInstance(){return lm===null&&(lm=new ao(0)),lm}static instance(t){return t===0?ao.utcInstance:new ao(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new ao(Kc(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Js(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Js(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return Js(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class pR extends Ri{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ar(e,t){if(It(e)||e===null)return t;if(e instanceof Ri)return e;if(_R(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?Hc.instance:n==="utc"||n==="gmt"?ao.utcInstance:ao.parseSpecifier(n)||Na.create(e)}else return ir(e)?ao.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new pR(e)}const kp={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},D0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},vR=kp.hanidec.replace(/[\[|\]]/g,"").split("");function hR(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(e[n].search(kp.hanidec)!==-1)t+=vR.indexOf(e[n]);else for(const a in D0){const[r,s]=D0[a];o>=r&&o<=s&&(t+=o-r)}}return parseInt(t,10)}else return t}let bl={};function gR(){bl={}}function zo({numberingSystem:e},t=""){const n=e||"latn";return bl[n]||(bl[n]={}),bl[n][t]||(bl[n][t]=new RegExp(`${kp[n]}${t}`)),bl[n][t]}let O0=()=>Date.now(),P0="system",M0=null,B0=null,N0=null,V0=60,L0,q0=null;class _n{static get now(){return O0}static set now(t){O0=t}static set defaultZone(t){P0=t}static get defaultZone(){return ar(P0,Hc.instance)}static get defaultLocale(){return M0}static set defaultLocale(t){M0=t}static get defaultNumberingSystem(){return B0}static set defaultNumberingSystem(t){B0=t}static get defaultOutputCalendar(){return N0}static set defaultOutputCalendar(t){N0=t}static get defaultWeekSettings(){return q0}static set defaultWeekSettings(t){q0=wf(t)}static get twoDigitCutoffYear(){return V0}static set twoDigitCutoffYear(t){V0=t%100}static get throwOnInvalid(){return L0}static set throwOnInvalid(t){L0=t}static resetCaches(){nn.resetCache(),Na.resetCache(),ut.resetCache(),gR()}}class Yo{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const b_=[0,31,59,90,120,151,181,212,243,273,304,334],y_=[0,31,60,91,121,152,182,213,244,274,305,335];function Bo(e,t){return new Yo("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function $p(e,t,n){const o=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&o.setUTCFullYear(o.getUTCFullYear()-1900);const a=o.getUTCDay();return a===0?7:a}function __(e,t,n){return n+(Di(e)?y_:b_)[t-1]}function w_(e,t){const n=Di(e)?y_:b_,o=n.findIndex(r=>r<t),a=t-n[o];return{month:o+1,day:a}}function Cp(e,t){return(e-t+7)%7+1}function oc(e,t=4,n=1){const{year:o,month:a,day:r}=e,s=__(o,a,r),i=Cp($p(o,a,r),n);let u=Math.floor((s-i+14-t)/7),d;return u<1?(d=o-1,u=si(d,t,n)):u>si(o,t,n)?(d=o+1,u=1):d=o,{weekYear:d,weekNumber:u,weekday:i,...Zc(e)}}function U0(e,t=4,n=1){const{weekYear:o,weekNumber:a,weekday:r}=e,s=Cp($p(o,1,t),n),i=Tl(o);let u=a*7+r-s-7+t,d;u<1?(d=o-1,u+=Tl(d)):u>i?(d=o+1,u-=Tl(o)):d=o;const{month:m,day:f}=w_(d,u);return{year:d,month:m,day:f,...Zc(e)}}function sm(e){const{year:t,month:n,day:o}=e,a=__(t,n,o);return{year:t,ordinal:a,...Zc(e)}}function j0(e){const{year:t,ordinal:n}=e,{month:o,day:a}=w_(t,n);return{year:t,month:o,day:a,...Zc(e)}}function z0(e,t){if(!It(e.localWeekday)||!It(e.localWeekNumber)||!It(e.localWeekYear)){if(!It(e.weekday)||!It(e.weekNumber)||!It(e.weekYear))throw new $l("Cannot mix locale-based week fields with ISO-based week fields");return It(e.localWeekday)||(e.weekday=e.localWeekday),It(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),It(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function bR(e,t=4,n=1){const o=Wc(e.weekYear),a=No(e.weekNumber,1,si(e.weekYear,t,n)),r=No(e.weekday,1,7);return o?a?r?!1:Bo("weekday",e.weekday):Bo("week",e.weekNumber):Bo("weekYear",e.weekYear)}function yR(e){const t=Wc(e.year),n=No(e.ordinal,1,Tl(e.year));return t?n?!1:Bo("ordinal",e.ordinal):Bo("year",e.year)}function I_(e){const t=Wc(e.year),n=No(e.month,1,12),o=No(e.day,1,ac(e.year,e.month));return t?n?o?!1:Bo("day",e.day):Bo("month",e.month):Bo("year",e.year)}function x_(e){const{hour:t,minute:n,second:o,millisecond:a}=e,r=No(t,0,23)||t===24&&n===0&&o===0&&a===0,s=No(n,0,59),i=No(o,0,59),u=No(a,0,999);return r?s?i?u?!1:Bo("millisecond",a):Bo("second",o):Bo("minute",n):Bo("hour",t)}function It(e){return typeof e>"u"}function ir(e){return typeof e=="number"}function Wc(e){return typeof e=="number"&&e%1===0}function _R(e){return typeof e=="string"}function wR(e){return Object.prototype.toString.call(e)==="[object Date]"}function k_(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function $_(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function IR(e){return Array.isArray(e)?e:[e]}function H0(e,t,n){if(e.length!==0)return e.reduce((o,a)=>{const r=[t(a),a];return o&&n(o[0],r[0])===o[0]?o:r},null)[1]}function xR(e,t){return t.reduce((n,o)=>(n[o]=e[o],n),{})}function Ll(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wf(e){if(e==null)return null;if(typeof e!="object")throw new Jn("Week settings must be an object");if(!No(e.firstDay,1,7)||!No(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!No(t,1,7)))throw new Jn("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function No(e,t,n){return Wc(e)&&e>=t&&e<=n}function kR(e,t){return e-t*Math.floor(e/t)}function Mn(e,t=2){const n=e<0;let o;return n?o="-"+(""+-e).padStart(t,"0"):o=(""+e).padStart(t,"0"),o}function nr(e){if(!(It(e)||e===null||e===""))return parseInt(e,10)}function Fr(e){if(!(It(e)||e===null||e===""))return parseFloat(e)}function Sp(e){if(!(It(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Tp(e,t,n=!1){const o=10**t;return(n?Math.trunc:Math.round)(e*o)/o}function Di(e){return e%4===0&&(e%100!==0||e%400===0)}function Tl(e){return Di(e)?366:365}function ac(e,t){const n=kR(t-1,12)+1,o=e+(t-n)/12;return n===2?Di(o)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Gc(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function W0(e,t,n){return-Cp($p(e,1,t),n)+t-1}function si(e,t=4,n=1){const o=W0(e,t,n),a=W0(e+1,t,n);return(Tl(e)-o+a)/7}function If(e){return e>99?e:e>_n.twoDigitCutoffYear?1900+e:2e3+e}function C_(e,t,n,o=null){const a=new Date(e),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};o&&(r.timeZone=o);const s={timeZoneName:t,...r},i=new Intl.DateTimeFormat(n,s).formatToParts(a).find(u=>u.type.toLowerCase()==="timezonename");return i?i.value:null}function Kc(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const o=parseInt(t,10)||0,a=n<0||Object.is(n,-0)?-o:o;return n*60+a}function S_(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new Jn(`Invalid unit value ${e}`);return t}function rc(e,t){const n={};for(const o in e)if(Ll(e,o)){const a=e[o];if(a==null)continue;n[t(o)]=S_(a)}return n}function Js(e,t){const n=Math.trunc(Math.abs(e/60)),o=Math.trunc(Math.abs(e%60)),a=e>=0?"+":"-";switch(t){case"short":return`${a}${Mn(n,2)}:${Mn(o,2)}`;case"narrow":return`${a}${n}${o>0?`:${o}`:""}`;case"techie":return`${a}${Mn(n,2)}${Mn(o,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Zc(e){return xR(e,["hour","minute","second","millisecond"])}const $R=["January","February","March","April","May","June","July","August","September","October","November","December"],T_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CR=["J","F","M","A","M","J","J","A","S","O","N","D"];function E_(e){switch(e){case"narrow":return[...CR];case"short":return[...T_];case"long":return[...$R];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const F_=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],A_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],SR=["M","T","W","T","F","S","S"];function R_(e){switch(e){case"narrow":return[...SR];case"short":return[...A_];case"long":return[...F_];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const D_=["AM","PM"],TR=["Before Christ","Anno Domini"],ER=["BC","AD"],FR=["B","A"];function O_(e){switch(e){case"narrow":return[...FR];case"short":return[...ER];case"long":return[...TR];default:return null}}function AR(e){return D_[e.hour<12?0:1]}function RR(e,t){return R_(t)[e.weekday-1]}function DR(e,t){return E_(t)[e.month-1]}function OR(e,t){return O_(t)[e.year<0?0:1]}function PR(e,t,n="always",o=!1){const a={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&r){const f=e==="days";switch(t){case 1:return f?"tomorrow":`next ${a[e][0]}`;case-1:return f?"yesterday":`last ${a[e][0]}`;case 0:return f?"today":`this ${a[e][0]}`}}const s=Object.is(t,-0)||t<0,i=Math.abs(t),u=i===1,d=a[e],m=o?u?d[1]:d[2]||d[1]:u?a[e][0]:e;return s?`${i} ${m} ago`:`in ${i} ${m}`}function G0(e,t){let n="";for(const o of e)o.literal?n+=o.val:n+=t(o.val);return n}const MR={D:nc,DD:Jy,DDD:e_,DDDD:t_,t:n_,tt:o_,ttt:a_,tttt:r_,T:l_,TT:s_,TTT:i_,TTTT:u_,f:c_,ff:m_,fff:p_,ffff:h_,F:d_,FF:f_,FFF:v_,FFFF:g_};class to{static create(t,n={}){return new to(t,n)}static parseFormat(t){let n=null,o="",a=!1;const r=[];for(let s=0;s<t.length;s++){const i=t.charAt(s);i==="'"?(o.length>0&&r.push({literal:a||/^\s+$/.test(o),val:o}),n=null,o="",a=!a):a||i===n?o+=i:(o.length>0&&r.push({literal:/^\s+$/.test(o),val:o}),o=i,n=i)}return o.length>0&&r.push({literal:a||/^\s+$/.test(o),val:o}),r}static macroTokenToFormatOpts(t){return MR[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Mn(t,n);const o={...this.opts};return n>0&&(o.padTo=n),this.loc.numberFormatter(o).format(t)}formatDateTimeFromString(t,n){const o=this.loc.listingMode()==="en",a=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(y,b)=>this.loc.extract(t,y,b),s=y=>t.isOffsetFixed&&t.offset===0&&y.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,y.format):"",i=()=>o?AR(t):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(y,b)=>o?DR(t,y):r(b?{month:y}:{month:y,day:"numeric"},"month"),d=(y,b)=>o?RR(t,y):r(b?{weekday:y}:{weekday:y,month:"long",day:"numeric"},"weekday"),m=y=>{const b=to.macroTokenToFormatOpts(y);return b?this.formatWithSystemDefault(t,b):y},f=y=>o?OR(t,y):r({era:y},"era"),h=y=>{switch(y){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return i();case"d":return a?r({day:"numeric"},"day"):this.num(t.day);case"dd":return a?r({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return d("short",!0);case"cccc":return d("long",!0);case"ccccc":return d("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return d("short",!1);case"EEEE":return d("long",!1);case"EEEEE":return d("narrow",!1);case"L":return a?r({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return a?r({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return a?r({month:"numeric"},"month"):this.num(t.month);case"MM":return a?r({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return a?r({year:"numeric"},"year"):this.num(t.year);case"yy":return a?r({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return a?r({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return a?r({year:"numeric"},"year"):this.num(t.year,6);case"G":return f("short");case"GG":return f("long");case"GGGGG":return f("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return m(y)}};return G0(to.parseFormat(n),h)}formatDurationFromString(t,n){const o=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},a=u=>d=>{const m=o(d);return m?this.num(u.get(m),d.length):d},r=to.parseFormat(n),s=r.reduce((u,{literal:d,val:m})=>d?u:u.concat(m),[]),i=t.shiftTo(...s.map(o).filter(u=>u));return G0(r,a(i))}}const P_=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function ss(...e){const t=e.reduce((n,o)=>n+o.source,"");return RegExp(`^${t}$`)}function is(...e){return t=>e.reduce(([n,o,a],r)=>{const[s,i,u]=r(t,a);return[{...n,...s},i||o,u]},[{},null,1]).slice(0,2)}function us(e,...t){if(e==null)return[null,null];for(const[n,o]of t){const a=n.exec(e);if(a)return o(a)}return[null,null]}function M_(...e){return(t,n)=>{const o={};let a;for(a=0;a<e.length;a++)o[e[a]]=nr(t[n+a]);return[o,null,n+a]}}const B_=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,BR=`(?:${B_.source}?(?:\\[(${P_.source})\\])?)?`,Ep=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,N_=RegExp(`${Ep.source}${BR}`),Fp=RegExp(`(?:T${N_.source})?`),NR=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,VR=/(\d{4})-?W(\d\d)(?:-?(\d))?/,LR=/(\d{4})-?(\d{3})/,qR=M_("weekYear","weekNumber","weekDay"),UR=M_("year","ordinal"),jR=/(\d{4})-(\d\d)-(\d\d)/,V_=RegExp(`${Ep.source} ?(?:${B_.source}|(${P_.source}))?`),zR=RegExp(`(?: ${V_.source})?`);function El(e,t,n){const o=e[t];return It(o)?n:nr(o)}function HR(e,t){return[{year:El(e,t),month:El(e,t+1,1),day:El(e,t+2,1)},null,t+3]}function cs(e,t){return[{hours:El(e,t,0),minutes:El(e,t+1,0),seconds:El(e,t+2,0),milliseconds:Sp(e[t+3])},null,t+4]}function Oi(e,t){const n=!e[t]&&!e[t+1],o=Kc(e[t+1],e[t+2]),a=n?null:ao.instance(o);return[{},a,t+3]}function Pi(e,t){const n=e[t]?Na.create(e[t]):null;return[{},n,t+1]}const WR=RegExp(`^T?${Ep.source}$`),GR=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function KR(e){const[t,n,o,a,r,s,i,u,d]=e,m=t[0]==="-",f=u&&u[0]==="-",h=(y,b=!1)=>y!==void 0&&(b||y&&m)?-y:y;return[{years:h(Fr(n)),months:h(Fr(o)),weeks:h(Fr(a)),days:h(Fr(r)),hours:h(Fr(s)),minutes:h(Fr(i)),seconds:h(Fr(u),u==="-0"),milliseconds:h(Sp(d),f)}]}const ZR={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ap(e,t,n,o,a,r,s){const i={year:t.length===2?If(nr(t)):nr(t),month:T_.indexOf(n)+1,day:nr(o),hour:nr(a),minute:nr(r)};return s&&(i.second=nr(s)),e&&(i.weekday=e.length>3?F_.indexOf(e)+1:A_.indexOf(e)+1),i}const YR=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function XR(e){const[,t,n,o,a,r,s,i,u,d,m,f]=e,h=Ap(t,a,o,n,r,s,i);let y;return u?y=ZR[u]:d?y=0:y=Kc(m,f),[h,new ao(y)]}function QR(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const JR=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,eD=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,tD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function K0(e){const[,t,n,o,a,r,s,i]=e;return[Ap(t,a,o,n,r,s,i),ao.utcInstance]}function nD(e){const[,t,n,o,a,r,s,i]=e;return[Ap(t,i,n,o,a,r,s),ao.utcInstance]}const oD=ss(NR,Fp),aD=ss(VR,Fp),rD=ss(LR,Fp),lD=ss(N_),L_=is(HR,cs,Oi,Pi),sD=is(qR,cs,Oi,Pi),iD=is(UR,cs,Oi,Pi),uD=is(cs,Oi,Pi);function cD(e){return us(e,[oD,L_],[aD,sD],[rD,iD],[lD,uD])}function dD(e){return us(QR(e),[YR,XR])}function mD(e){return us(e,[JR,K0],[eD,K0],[tD,nD])}function fD(e){return us(e,[GR,KR])}const pD=is(cs);function vD(e){return us(e,[WR,pD])}const hD=ss(jR,zR),gD=ss(V_),bD=is(cs,Oi,Pi);function yD(e){return us(e,[hD,L_],[gD,bD])}const Z0="Invalid Duration",q_={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},_D={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...q_},Do=146097/400,ul=146097/4800,wD={years:{quarters:4,months:12,weeks:Do/7,days:Do,hours:Do*24,minutes:Do*24*60,seconds:Do*24*60*60,milliseconds:Do*24*60*60*1e3},quarters:{months:3,weeks:Do/28,days:Do/4,hours:Do*24/4,minutes:Do*24*60/4,seconds:Do*24*60*60/4,milliseconds:Do*24*60*60*1e3/4},months:{weeks:ul/7,days:ul,hours:ul*24,minutes:ul*24*60,seconds:ul*24*60*60,milliseconds:ul*24*60*60*1e3},...q_},Lr=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ID=Lr.slice(0).reverse();function Za(e,t,n=!1){const o={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Lt(o)}function U_(e,t){let n=t.milliseconds??0;for(const o of ID.slice(1))t[o]&&(n+=t[o]*e[o].milliseconds);return n}function Y0(e,t){const n=U_(e,t)<0?-1:1;Lr.reduceRight((o,a)=>{if(It(t[a]))return o;if(o){const r=t[o]*n,s=e[a][o],i=Math.floor(r/s);t[a]+=i*n,t[o]-=i*s*n}return a},null),Lr.reduce((o,a)=>{if(It(t[a]))return o;if(o){const r=t[o]%1;t[o]-=r,t[a]+=r*e[o][a]}return a},null)}function xD(e){const t={};for(const[n,o]of Object.entries(e))o!==0&&(t[n]=o);return t}class Lt{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let o=n?wD:_D;t.matrix&&(o=t.matrix),this.values=t.values,this.loc=t.loc||nn.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=o,this.isLuxonDuration=!0}static fromMillis(t,n){return Lt.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new Jn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Lt({values:rc(t,Lt.normalizeUnit),loc:nn.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(ir(t))return Lt.fromMillis(t);if(Lt.isDuration(t))return t;if(typeof t=="object")return Lt.fromObject(t);throw new Jn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[o]=fD(t);return o?Lt.fromObject(o,n):Lt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[o]=vD(t);return o?Lt.fromObject(o,n):Lt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Duration is invalid");const o=t instanceof Yo?t:new Yo(t,n);if(_n.throwOnInvalid)throw new GA(o);return new Lt({invalid:o})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new Qy(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const o={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?to.create(this.loc,o).formatDurationFromString(this,t):Z0}toHuman(t={}){if(!this.isValid)return Z0;const n=Lr.map(o=>{const a=this.values[o];return It(a)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:o.slice(0,-1)}).format(a)}).filter(o=>o);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=Tp(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ut.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?U_(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=Lt.fromDurationLike(t),o={};for(const a of Lr)(Ll(n.values,a)||Ll(this.values,a))&&(o[a]=n.get(a)+this.get(a));return Za(this,{values:o},!0)}minus(t){if(!this.isValid)return this;const n=Lt.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const o of Object.keys(this.values))n[o]=S_(t(this.values[o],o));return Za(this,{values:n},!0)}get(t){return this[Lt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...rc(t,Lt.normalizeUnit)};return Za(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:o,matrix:a}={}){const s={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:a,conversionAccuracy:o};return Za(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Y0(this.matrix,t),Za(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=xD(this.normalize().shiftToAll().toObject());return Za(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(s=>Lt.normalizeUnit(s));const n={},o={},a=this.toObject();let r;for(const s of Lr)if(t.indexOf(s)>=0){r=s;let i=0;for(const d in o)i+=this.matrix[d][s]*o[d],o[d]=0;ir(a[s])&&(i+=a[s]);const u=Math.trunc(i);n[s]=u,o[s]=(i*1e3-u*1e3)/1e3}else ir(a[s])&&(o[s]=a[s]);for(const s in o)o[s]!==0&&(n[r]+=s===r?o[s]:o[s]/this.matrix[r][s]);return Y0(this.matrix,n),Za(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return Za(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(o,a){return o===void 0||o===0?a===void 0||a===0:o===a}for(const o of Lr)if(!n(this.values[o],t.values[o]))return!1;return!0}}const cl="Invalid Interval";function kD(e,t){return!e||!e.isValid?Tn.invalid("missing or invalid start"):!t||!t.isValid?Tn.invalid("missing or invalid end"):t<e?Tn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Tn{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the Interval is invalid");const o=t instanceof Yo?t:new Yo(t,n);if(_n.throwOnInvalid)throw new WA(o);return new Tn({invalid:o})}static fromDateTimes(t,n){const o=Vs(t),a=Vs(n),r=kD(o,a);return r??new Tn({start:o,end:a})}static after(t,n){const o=Lt.fromDurationLike(n),a=Vs(t);return Tn.fromDateTimes(a,a.plus(o))}static before(t,n){const o=Lt.fromDurationLike(n),a=Vs(t);return Tn.fromDateTimes(a.minus(o),a)}static fromISO(t,n){const[o,a]=(t||"").split("/",2);if(o&&a){let r,s;try{r=ut.fromISO(o,n),s=r.isValid}catch{s=!1}let i,u;try{i=ut.fromISO(a,n),u=i.isValid}catch{u=!1}if(s&&u)return Tn.fromDateTimes(r,i);if(s){const d=Lt.fromISO(a,n);if(d.isValid)return Tn.after(r,d)}else if(u){const d=Lt.fromISO(o,n);if(d.isValid)return Tn.before(i,d)}}return Tn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",n){if(!this.isValid)return NaN;const o=this.start.startOf(t,n);let a;return n!=null&&n.useLocaleWeeks?a=this.end.reconfigure({locale:o.locale}):a=this.end,a=a.startOf(t,n),Math.floor(a.diff(o,t).get(t))+(a.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?Tn.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Vs).filter(s=>this.contains(s)).sort((s,i)=>s.toMillis()-i.toMillis()),o=[];let{s:a}=this,r=0;for(;a<this.e;){const s=n[r]||this.e,i=+s>+this.e?this.e:s;o.push(Tn.fromDateTimes(a,i)),a=i,r+=1}return o}splitBy(t){const n=Lt.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:o}=this,a=1,r;const s=[];for(;o<this.e;){const i=this.start.plus(n.mapUnits(u=>u*a));r=+i>+this.e?this.e:i,s.push(Tn.fromDateTimes(o,r)),o=r,a+=1}return s}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,o=this.e<t.e?this.e:t.e;return n>=o?null:Tn.fromDateTimes(n,o)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,o=this.e>t.e?this.e:t.e;return Tn.fromDateTimes(n,o)}static merge(t){const[n,o]=t.sort((a,r)=>a.s-r.s).reduce(([a,r],s)=>r?r.overlaps(s)||r.abutsStart(s)?[a,r.union(s)]:[a.concat([r]),s]:[a,s],[[],null]);return o&&n.push(o),n}static xor(t){let n=null,o=0;const a=[],r=t.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),s=Array.prototype.concat(...r),i=s.sort((u,d)=>u.time-d.time);for(const u of i)o+=u.type==="s"?1:-1,o===1?n=u.time:(n&&+n!=+u.time&&a.push(Tn.fromDateTimes(n,u.time)),n=null);return Tn.merge(a)}difference(...t){return Tn.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:cl}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=nc,n={}){return this.isValid?to.create(this.s.loc.clone(n),t).formatInterval(this):cl}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:cl}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:cl}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:cl}toFormat(t,{separator:n=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:cl}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):Lt.invalid(this.invalidReason)}mapEndpoints(t){return Tn.fromDateTimes(t(this.s),t(this.e))}}class _u{static hasDST(t=_n.defaultZone){const n=ut.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Na.isValidZone(t)}static normalizeZone(t){return ar(t,_n.defaultZone)}static getStartOfWeek({locale:t=null,locObj:n=null}={}){return(n||nn.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:n=null}={}){return(n||nn.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:n=null}={}){return(n||nn.create(t)).getWeekendDays().slice()}static months(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null,outputCalendar:r="gregory"}={}){return(a||nn.create(n,o,r)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null,outputCalendar:r="gregory"}={}){return(a||nn.create(n,o,r)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null}={}){return(a||nn.create(n,o,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:o=null,locObj:a=null}={}){return(a||nn.create(n,o,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return nn.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return nn.create(n,null,"gregory").eras(t)}static features(){return{relative:k_(),localeWeek:$_()}}}function X0(e,t){const n=a=>a.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),o=n(t)-n(e);return Math.floor(Lt.fromMillis(o).as("days"))}function $D(e,t,n){const o=[["years",(u,d)=>d.year-u.year],["quarters",(u,d)=>d.quarter-u.quarter+(d.year-u.year)*4],["months",(u,d)=>d.month-u.month+(d.year-u.year)*12],["weeks",(u,d)=>{const m=X0(u,d);return(m-m%7)/7}],["days",X0]],a={},r=e;let s,i;for(const[u,d]of o)n.indexOf(u)>=0&&(s=u,a[u]=d(e,t),i=r.plus(a),i>t?(a[u]--,e=r.plus(a),e>t&&(i=e,a[u]--,e=r.plus(a))):e=i);return[e,a,i,s]}function CD(e,t,n,o){let[a,r,s,i]=$D(e,t,n);const u=t-a,d=n.filter(f=>["hours","minutes","seconds","milliseconds"].indexOf(f)>=0);d.length===0&&(s<t&&(s=a.plus({[i]:1})),s!==a&&(r[i]=(r[i]||0)+u/(s-a)));const m=Lt.fromObject(r,o);return d.length>0?Lt.fromMillis(u,o).shiftTo(...d).plus(m):m}const SD="missing Intl.DateTimeFormat.formatToParts support";function Xt(e,t=n=>n){return{regex:e,deser:([n])=>t(hR(n))}}const TD=" ",j_=`[ ${TD}]`,z_=new RegExp(j_,"g");function ED(e){return e.replace(/\./g,"\\.?").replace(z_,j_)}function Q0(e){return e.replace(/\./g,"").replace(z_," ").toLowerCase()}function Ho(e,t){return e===null?null:{regex:RegExp(e.map(ED).join("|")),deser:([n])=>e.findIndex(o=>Q0(n)===Q0(o))+t}}function J0(e,t){return{regex:e,deser:([,n,o])=>Kc(n,o),groups:t}}function wu(e){return{regex:e,deser:([t])=>t}}function FD(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function AD(e,t){const n=zo(t),o=zo(t,"{2}"),a=zo(t,"{3}"),r=zo(t,"{4}"),s=zo(t,"{6}"),i=zo(t,"{1,2}"),u=zo(t,"{1,3}"),d=zo(t,"{1,6}"),m=zo(t,"{1,9}"),f=zo(t,"{2,4}"),h=zo(t,"{4,6}"),y=w=>({regex:RegExp(FD(w.val)),deser:([k])=>k,literal:!0}),I=(w=>{if(e.literal)return y(w);switch(w.val){case"G":return Ho(t.eras("short"),0);case"GG":return Ho(t.eras("long"),0);case"y":return Xt(d);case"yy":return Xt(f,If);case"yyyy":return Xt(r);case"yyyyy":return Xt(h);case"yyyyyy":return Xt(s);case"M":return Xt(i);case"MM":return Xt(o);case"MMM":return Ho(t.months("short",!0),1);case"MMMM":return Ho(t.months("long",!0),1);case"L":return Xt(i);case"LL":return Xt(o);case"LLL":return Ho(t.months("short",!1),1);case"LLLL":return Ho(t.months("long",!1),1);case"d":return Xt(i);case"dd":return Xt(o);case"o":return Xt(u);case"ooo":return Xt(a);case"HH":return Xt(o);case"H":return Xt(i);case"hh":return Xt(o);case"h":return Xt(i);case"mm":return Xt(o);case"m":return Xt(i);case"q":return Xt(i);case"qq":return Xt(o);case"s":return Xt(i);case"ss":return Xt(o);case"S":return Xt(u);case"SSS":return Xt(a);case"u":return wu(m);case"uu":return wu(i);case"uuu":return Xt(n);case"a":return Ho(t.meridiems(),0);case"kkkk":return Xt(r);case"kk":return Xt(f,If);case"W":return Xt(i);case"WW":return Xt(o);case"E":case"c":return Xt(n);case"EEE":return Ho(t.weekdays("short",!1),1);case"EEEE":return Ho(t.weekdays("long",!1),1);case"ccc":return Ho(t.weekdays("short",!0),1);case"cccc":return Ho(t.weekdays("long",!0),1);case"Z":case"ZZ":return J0(new RegExp(`([+-]${i.source})(?::(${o.source}))?`),2);case"ZZZ":return J0(new RegExp(`([+-]${i.source})(${o.source})?`),2);case"z":return wu(/[a-z_+-/]{1,256}?/i);case" ":return wu(/[^\S\n\r]/);default:return y(w)}})(e)||{invalidReason:SD};return I.token=e,I}const RD={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function DD(e,t,n){const{type:o,value:a}=e;if(o==="literal"){const u=/^\s+$/.test(a);return{literal:!u,val:u?" ":a}}const r=t[o];let s=o;o==="hour"&&(t.hour12!=null?s=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?s="hour12":s="hour24":s=n.hour12?"hour12":"hour24");let i=RD[s];if(typeof i=="object"&&(i=i[r]),i)return{literal:!1,val:i}}function OD(e){return[`^${e.map(n=>n.regex).reduce((n,o)=>`${n}(${o.source})`,"")}$`,e]}function PD(e,t,n){const o=e.match(t);if(o){const a={};let r=1;for(const s in n)if(Ll(n,s)){const i=n[s],u=i.groups?i.groups+1:1;!i.literal&&i.token&&(a[i.token.val[0]]=i.deser(o.slice(r,r+u))),r+=u}return[o,a]}else return[o,{}]}function MD(e){const t=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,o;return It(e.z)||(n=Na.create(e.z)),It(e.Z)||(n||(n=new ao(e.Z)),o=e.Z),It(e.q)||(e.M=(e.q-1)*3+1),It(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),It(e.u)||(e.S=Sp(e.u)),[Object.keys(e).reduce((r,s)=>{const i=t(s);return i&&(r[i]=e[s]),r},{}),n,o]}let im=null;function BD(){return im||(im=ut.fromMillis(1555555555555)),im}function ND(e,t){if(e.literal)return e;const n=to.macroTokenToFormatOpts(e.val),o=K_(n,t);return o==null||o.includes(void 0)?e:o}function H_(e,t){return Array.prototype.concat(...e.map(n=>ND(n,t)))}class W_{constructor(t,n){if(this.locale=t,this.format=n,this.tokens=H_(to.parseFormat(n),t),this.units=this.tokens.map(o=>AD(o,t)),this.disqualifyingUnit=this.units.find(o=>o.invalidReason),!this.disqualifyingUnit){const[o,a]=OD(this.units);this.regex=RegExp(o,"i"),this.handlers=a}}explainFromTokens(t){if(this.isValid){const[n,o]=PD(t,this.regex,this.handlers),[a,r,s]=o?MD(o):[null,null,void 0];if(Ll(o,"a")&&Ll(o,"H"))throw new $l("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:o,result:a,zone:r,specificOffset:s}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function G_(e,t,n){return new W_(e,n).explainFromTokens(t)}function VD(e,t,n){const{result:o,zone:a,specificOffset:r,invalidReason:s}=G_(e,t,n);return[o,a,r,s]}function K_(e,t){if(!e)return null;const o=to.create(t,e).dtFormatter(BD()),a=o.formatToParts(),r=o.resolvedOptions();return a.map(s=>DD(s,e,r))}const um="Invalid DateTime",eg=864e13;function Xs(e){return new Yo("unsupported zone",`the zone "${e.name}" is not supported`)}function cm(e){return e.weekData===null&&(e.weekData=oc(e.c)),e.weekData}function dm(e){return e.localWeekData===null&&(e.localWeekData=oc(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Ar(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ut({...n,...t,old:n})}function Z_(e,t,n){let o=e-t*60*1e3;const a=n.offset(o);if(t===a)return[o,t];o-=(a-t)*60*1e3;const r=n.offset(o);return a===r?[o,a]:[e-Math.min(a,r)*60*1e3,Math.max(a,r)]}function Iu(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Lu(e,t,n){return Z_(Gc(e),t,n)}function tg(e,t){const n=e.o,o=e.c.year+Math.trunc(t.years),a=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,r={...e.c,year:o,month:a,day:Math.min(e.c.day,ac(o,a))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},s=Lt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),i=Gc(r);let[u,d]=Z_(i,n,e.zone);return s!==0&&(u+=s,d=e.zone.offset(u)),{ts:u,o:d}}function dl(e,t,n,o,a,r){const{setZone:s,zone:i}=n;if(e&&Object.keys(e).length!==0||t){const u=t||i,d=ut.fromObject(e,{...n,zone:u,specificOffset:r});return s?d:d.setZone(i)}else return ut.invalid(new Yo("unparsable",`the input "${a}" can't be parsed as ${o}`))}function xu(e,t,n=!0){return e.isValid?to.create(nn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function mm(e,t){const n=e.c.year>9999||e.c.year<0;let o="";return n&&e.c.year>=0&&(o+="+"),o+=Mn(e.c.year,n?6:4),t?(o+="-",o+=Mn(e.c.month),o+="-",o+=Mn(e.c.day)):(o+=Mn(e.c.month),o+=Mn(e.c.day)),o}function ng(e,t,n,o,a,r){let s=Mn(e.c.hour);return t?(s+=":",s+=Mn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(s+=":")):s+=Mn(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(s+=Mn(e.c.second),(e.c.millisecond!==0||!o)&&(s+=".",s+=Mn(e.c.millisecond,3))),a&&(e.isOffsetFixed&&e.offset===0&&!r?s+="Z":e.o<0?(s+="-",s+=Mn(Math.trunc(-e.o/60)),s+=":",s+=Mn(Math.trunc(-e.o%60))):(s+="+",s+=Mn(Math.trunc(e.o/60)),s+=":",s+=Mn(Math.trunc(e.o%60)))),r&&(s+="["+e.zone.ianaName+"]"),s}const Y_={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},LD={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},qD={ordinal:1,hour:0,minute:0,second:0,millisecond:0},X_=["year","month","day","hour","minute","second","millisecond"],UD=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],jD=["year","ordinal","hour","minute","second","millisecond"];function zD(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Qy(e);return t}function og(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return zD(e)}}function HD(e){return Uu[e]||(qu===void 0&&(qu=_n.now()),Uu[e]=e.offset(qu)),Uu[e]}function ag(e,t){const n=ar(t.zone,_n.defaultZone);if(!n.isValid)return ut.invalid(Xs(n));const o=nn.fromObject(t);let a,r;if(It(e.year))a=_n.now();else{for(const u of X_)It(e[u])&&(e[u]=Y_[u]);const s=I_(e)||x_(e);if(s)return ut.invalid(s);const i=HD(n);[a,r]=Lu(e,i,n)}return new ut({ts:a,zone:n,loc:o,o:r})}function rg(e,t,n){const o=It(n.round)?!0:n.round,a=(s,i)=>(s=Tp(s,o||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(s,i)),r=s=>n.calendary?t.hasSame(e,s)?0:t.startOf(s).diff(e.startOf(s),s).get(s):t.diff(e,s).get(s);if(n.unit)return a(r(n.unit),n.unit);for(const s of n.units){const i=r(s);if(Math.abs(i)>=1)return a(i,s)}return a(e>t?-0:0,n.units[n.units.length-1])}function lg(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}let qu,Uu={};class ut{constructor(t){const n=t.zone||_n.defaultZone;let o=t.invalid||(Number.isNaN(t.ts)?new Yo("invalid input"):null)||(n.isValid?null:Xs(n));this.ts=It(t.ts)?_n.now():t.ts;let a=null,r=null;if(!o)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[a,r]=[t.old.c,t.old.o];else{const i=ir(t.o)&&!t.old?t.o:n.offset(this.ts);a=Iu(this.ts,i),o=Number.isNaN(a.year)?new Yo("invalid input"):null,a=o?null:a,r=o?null:i}this._zone=n,this.loc=t.loc||nn.create(),this.invalid=o,this.weekData=null,this.localWeekData=null,this.c=a,this.o=r,this.isLuxonDateTime=!0}static now(){return new ut({})}static local(){const[t,n]=lg(arguments),[o,a,r,s,i,u,d]=n;return ag({year:o,month:a,day:r,hour:s,minute:i,second:u,millisecond:d},t)}static utc(){const[t,n]=lg(arguments),[o,a,r,s,i,u,d]=n;return t.zone=ao.utcInstance,ag({year:o,month:a,day:r,hour:s,minute:i,second:u,millisecond:d},t)}static fromJSDate(t,n={}){const o=wR(t)?t.valueOf():NaN;if(Number.isNaN(o))return ut.invalid("invalid input");const a=ar(n.zone,_n.defaultZone);return a.isValid?new ut({ts:o,zone:a,loc:nn.fromObject(n)}):ut.invalid(Xs(a))}static fromMillis(t,n={}){if(ir(t))return t<-eg||t>eg?ut.invalid("Timestamp out of range"):new ut({ts:t,zone:ar(n.zone,_n.defaultZone),loc:nn.fromObject(n)});throw new Jn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(ir(t))return new ut({ts:t*1e3,zone:ar(n.zone,_n.defaultZone),loc:nn.fromObject(n)});throw new Jn("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const o=ar(n.zone,_n.defaultZone);if(!o.isValid)return ut.invalid(Xs(o));const a=nn.fromObject(n),r=rc(t,og),{minDaysInFirstWeek:s,startOfWeek:i}=z0(r,a),u=_n.now(),d=It(n.specificOffset)?o.offset(u):n.specificOffset,m=!It(r.ordinal),f=!It(r.year),h=!It(r.month)||!It(r.day),y=f||h,b=r.weekYear||r.weekNumber;if((y||m)&&b)throw new $l("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&m)throw new $l("Can't mix ordinal dates with month/day");const I=b||r.weekday&&!y;let w,k,x=Iu(u,d);I?(w=UD,k=LD,x=oc(x,s,i)):m?(w=jD,k=qD,x=sm(x)):(w=X_,k=Y_);let $=!1;for(const B of w){const M=r[B];It(M)?$?r[B]=k[B]:r[B]=x[B]:$=!0}const C=I?bR(r,s,i):m?yR(r):I_(r),F=C||x_(r);if(F)return ut.invalid(F);const T=I?U0(r,s,i):m?j0(r):r,[S,A]=Lu(T,d,o),E=new ut({ts:S,zone:o,o:A,loc:a});return r.weekday&&y&&t.weekday!==E.weekday?ut.invalid("mismatched weekday",`you can't specify both a weekday of ${r.weekday} and a date of ${E.toISO()}`):E.isValid?E:ut.invalid(E.invalid)}static fromISO(t,n={}){const[o,a]=cD(t);return dl(o,a,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[o,a]=dD(t);return dl(o,a,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[o,a]=mD(t);return dl(o,a,n,"HTTP",n)}static fromFormat(t,n,o={}){if(It(t)||It(n))throw new Jn("fromFormat requires an input string and a format");const{locale:a=null,numberingSystem:r=null}=o,s=nn.fromOpts({locale:a,numberingSystem:r,defaultToEN:!0}),[i,u,d,m]=VD(s,t,n);return m?ut.invalid(m):dl(i,u,o,`format ${n}`,t,d)}static fromString(t,n,o={}){return ut.fromFormat(t,n,o)}static fromSQL(t,n={}){const[o,a]=yD(t);return dl(o,a,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new Jn("need to specify a reason the DateTime is invalid");const o=t instanceof Yo?t:new Yo(t,n);if(_n.throwOnInvalid)throw new HA(o);return new ut({invalid:o})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const o=K_(t,nn.fromObject(n));return o?o.map(a=>a?a.val:null).join(""):null}static expandFormat(t,n={}){return H_(to.parseFormat(t),nn.fromObject(n)).map(a=>a.val).join("")}static resetCache(){qu=void 0,Uu={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?cm(this).weekYear:NaN}get weekNumber(){return this.isValid?cm(this).weekNumber:NaN}get weekday(){return this.isValid?cm(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?dm(this).weekday:NaN}get localWeekNumber(){return this.isValid?dm(this).weekNumber:NaN}get localWeekYear(){return this.isValid?dm(this).weekYear:NaN}get ordinal(){return this.isValid?sm(this.c).ordinal:NaN}get monthShort(){return this.isValid?_u.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?_u.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?_u.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?_u.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,o=Gc(this.c),a=this.zone.offset(o-t),r=this.zone.offset(o+t),s=this.zone.offset(o-a*n),i=this.zone.offset(o-r*n);if(s===i)return[this];const u=o-s*n,d=o-i*n,m=Iu(u,s),f=Iu(d,i);return m.hour===f.hour&&m.minute===f.minute&&m.second===f.second&&m.millisecond===f.millisecond?[Ar(this,{ts:u}),Ar(this,{ts:d})]:[this]}get isInLeapYear(){return Di(this.year)}get daysInMonth(){return ac(this.year,this.month)}get daysInYear(){return this.isValid?Tl(this.year):NaN}get weeksInWeekYear(){return this.isValid?si(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?si(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:o,calendar:a}=to.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:o,outputCalendar:a}}toUTC(t=0,n={}){return this.setZone(ao.instance(t),n)}toLocal(){return this.setZone(_n.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:o=!1}={}){if(t=ar(t,_n.defaultZone),t.equals(this.zone))return this;if(t.isValid){let a=this.ts;if(n||o){const r=t.offset(this.ts),s=this.toObject();[a]=Lu(s,r,t)}return Ar(this,{ts:a,zone:t})}else return ut.invalid(Xs(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:o}={}){const a=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:o});return Ar(this,{loc:a})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=rc(t,og),{minDaysInFirstWeek:o,startOfWeek:a}=z0(n,this.loc),r=!It(n.weekYear)||!It(n.weekNumber)||!It(n.weekday),s=!It(n.ordinal),i=!It(n.year),u=!It(n.month)||!It(n.day),d=i||u,m=n.weekYear||n.weekNumber;if((d||s)&&m)throw new $l("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&s)throw new $l("Can't mix ordinal dates with month/day");let f;r?f=U0({...oc(this.c,o,a),...n},o,a):It(n.ordinal)?(f={...this.toObject(),...n},It(n.day)&&(f.day=Math.min(ac(f.year,f.month),f.day))):f=j0({...sm(this.c),...n});const[h,y]=Lu(f,this.o,this.zone);return Ar(this,{ts:h,o:y})}plus(t){if(!this.isValid)return this;const n=Lt.fromDurationLike(t);return Ar(this,tg(this,n))}minus(t){if(!this.isValid)return this;const n=Lt.fromDurationLike(t).negate();return Ar(this,tg(this,n))}startOf(t,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const o={},a=Lt.normalizeUnit(t);switch(a){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0;break}if(a==="weeks")if(n){const r=this.loc.getStartOfWeek(),{weekday:s}=this;s<r&&(o.weekNumber=this.weekNumber-1),o.weekday=r}else o.weekday=1;if(a==="quarters"){const r=Math.ceil(this.month/3);o.month=(r-1)*3+1}return this.set(o)}endOf(t,n){return this.isValid?this.plus({[t]:1}).startOf(t,n).minus(1):this}toFormat(t,n={}){return this.isValid?to.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):um}toLocaleString(t=nc,n={}){return this.isValid?to.create(this.loc.clone(n),t).formatDateTime(this):um}toLocaleParts(t={}){return this.isValid?to.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:o=!1,includeOffset:a=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const s=t==="extended";let i=mm(this,s);return i+="T",i+=ng(this,s,n,o,a,r),i}toISODate({format:t="extended"}={}){return this.isValid?mm(this,t==="extended"):null}toISOWeekDate(){return xu(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:o=!0,includePrefix:a=!1,extendedZone:r=!1,format:s="extended"}={}){return this.isValid?(a?"T":"")+ng(this,s==="extended",n,t,o,r):null}toRFC2822(){return xu(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return xu(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?mm(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:o=!0}={}){let a="HH:mm:ss.SSS";return(n||t)&&(o&&(a+=" "),n?a+="z":t&&(a+="ZZ")),xu(this,a,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():um}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",o={}){if(!this.isValid||!t.isValid)return Lt.invalid("created by diffing an invalid DateTime");const a={locale:this.locale,numberingSystem:this.numberingSystem,...o},r=IR(n).map(Lt.normalizeUnit),s=t.valueOf()>this.valueOf(),i=s?this:t,u=s?t:this,d=CD(i,u,r,a);return s?d.negate():d}diffNow(t="milliseconds",n={}){return this.diff(ut.now(),t,n)}until(t){return this.isValid?Tn.fromDateTimes(this,t):this}hasSame(t,n,o){if(!this.isValid)return!1;const a=t.valueOf(),r=this.setZone(t.zone,{keepLocalTime:!0});return r.startOf(n,o)<=a&&a<=r.endOf(n,o)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||ut.fromObject({},{zone:this.zone}),o=t.padding?this<n?-t.padding:t.padding:0;let a=["years","months","days","hours","minutes","seconds"],r=t.unit;return Array.isArray(t.unit)&&(a=t.unit,r=void 0),rg(n,this.plus(o),{...t,numeric:"always",units:a,unit:r})}toRelativeCalendar(t={}){return this.isValid?rg(t.base||ut.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ut.isDateTime))throw new Jn("min requires all arguments be DateTimes");return H0(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(ut.isDateTime))throw new Jn("max requires all arguments be DateTimes");return H0(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,o={}){const{locale:a=null,numberingSystem:r=null}=o,s=nn.fromOpts({locale:a,numberingSystem:r,defaultToEN:!0});return G_(s,t,n)}static fromStringExplain(t,n,o={}){return ut.fromFormatExplain(t,n,o)}static buildFormatParser(t,n={}){const{locale:o=null,numberingSystem:a=null}=n,r=nn.fromOpts({locale:o,numberingSystem:a,defaultToEN:!0});return new W_(r,t)}static fromFormatParser(t,n,o={}){if(It(t)||It(n))throw new Jn("fromFormatParser requires an input string and a format parser");const{locale:a=null,numberingSystem:r=null}=o,s=nn.fromOpts({locale:a,numberingSystem:r,defaultToEN:!0});if(!s.equals(n.locale))throw new Jn(`fromFormatParser called with a locale of ${s}, but the format parser was created for ${n.locale}`);const{result:i,zone:u,specificOffset:d,invalidReason:m}=n.explainFromTokens(t);return m?ut.invalid(m):dl(i,u,o,`format ${n.format}`,t,d)}static get DATE_SHORT(){return nc}static get DATE_MED(){return Jy}static get DATE_MED_WITH_WEEKDAY(){return KA}static get DATE_FULL(){return e_}static get DATE_HUGE(){return t_}static get TIME_SIMPLE(){return n_}static get TIME_WITH_SECONDS(){return o_}static get TIME_WITH_SHORT_OFFSET(){return a_}static get TIME_WITH_LONG_OFFSET(){return r_}static get TIME_24_SIMPLE(){return l_}static get TIME_24_WITH_SECONDS(){return s_}static get TIME_24_WITH_SHORT_OFFSET(){return i_}static get TIME_24_WITH_LONG_OFFSET(){return u_}static get DATETIME_SHORT(){return c_}static get DATETIME_SHORT_WITH_SECONDS(){return d_}static get DATETIME_MED(){return m_}static get DATETIME_MED_WITH_SECONDS(){return f_}static get DATETIME_MED_WITH_WEEKDAY(){return ZA}static get DATETIME_FULL(){return p_}static get DATETIME_FULL_WITH_SECONDS(){return v_}static get DATETIME_HUGE(){return h_}static get DATETIME_HUGE_WITH_SECONDS(){return g_}}function Vs(e){if(ut.isDateTime(e))return e;if(e&&e.valueOf&&ir(e.valueOf()))return ut.fromJSDate(e);if(e&&typeof e=="object")return ut.fromObject(e);throw new Jn(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const xf=(e,t,n,o=null)=>{const a=Lt.fromObject({days:1}),r=Lt.fromObject({[n]:t}),s=a.as(n)/t,i=[];let u=ut.fromFormat(e,"hh:mm");o&&(o=ut.fromFormat(o+":00","HH:mm"));for(let d=0;d<s;d++)d!==0&&(u=u.plus(r)),(!o||o&&u<=o.startOf("hour"))&&i.push(u.toISOTime({suppressSeconds:!0,suppressMilliseconds:!0,includeOffset:!1}));return i};var WD=ra,GD=function(){return WD.Date.now()},KD=GD,ZD=/\s/;function YD(e){for(var t=e.length;t--&&ZD.test(e.charAt(t)););return t}var XD=YD,QD=XD,JD=/^\s+/;function eO(e){return e&&e.slice(0,QD(e)+1).replace(JD,"")}var tO=eO,nO=tO,sg=go,oO=ki,ig=NaN,aO=/^[-+]0x[0-9a-f]+$/i,rO=/^0b[01]+$/i,lO=/^0o[0-7]+$/i,sO=parseInt;function iO(e){if(typeof e=="number")return e;if(oO(e))return ig;if(sg(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=sg(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=nO(e);var n=rO.test(e);return n||lO.test(e)?sO(e.slice(2),n?2:8):aO.test(e)?ig:+e}var Q_=iO,uO=go,fm=KD,ug=Q_,cO="Expected a function",dO=Math.max,mO=Math.min;function fO(e,t,n){var o,a,r,s,i,u,d=0,m=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(cO);t=ug(t)||0,uO(n)&&(m=!!n.leading,f="maxWait"in n,r=f?dO(ug(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h);function y(T){var S=o,A=a;return o=a=void 0,d=T,s=e.apply(A,S),s}function b(T){return d=T,i=setTimeout(k,t),m?y(T):s}function I(T){var S=T-u,A=T-d,E=t-S;return f?mO(E,r-A):E}function w(T){var S=T-u,A=T-d;return u===void 0||S>=t||S<0||f&&A>=r}function k(){var T=fm();if(w(T))return x(T);i=setTimeout(k,I(T))}function x(T){return i=void 0,h&&o?y(T):(o=a=void 0,s)}function $(){i!==void 0&&clearTimeout(i),d=0,o=u=a=i=void 0}function C(){return i===void 0?s:x(fm())}function F(){var T=fm(),S=w(T);if(o=arguments,a=this,u=T,S){if(i===void 0)return b(u);if(f)return clearTimeout(i),i=setTimeout(k,t),y(u)}return i===void 0&&(i=setTimeout(k,t)),s}return F.cancel=$,F.flush=C,F}var J_=fO;const e2=Rt(J_),cg=600;function pO(e){return e===!1||typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"?0:e===!0?cg:typeof e=="string"?e?parseInt(e,10):cg:e}function xa(e,t=0,n={}){return e2(e,pO(t),n)}function kf(e,t){let o=(kf.canvas||(kf.canvas=document.createElement("canvas"))).getContext("2d");return o.font=t,o.measureText(e).width}function Rp(e){return e<59?"minutes":e>=10080?"weeks":e>=1440?"days":"hours"}function t2(e){const t=Rp(e);if(t==="minutes")return e;if(t==="hours")return e/60;if(t==="days")return e/1440;if(t==="weeks")return e/10080}function vO(e,t){return wy(e,t.replace("::","."))}const Dp=S6({legacy:!1,globalInjection:!0,locale:Uc(),fallbackLocale:"en",messageResolver:vO,messages:lang}),hO=Dp.global.t,rt=Dp.global.t;/*!
  * vue-router v4.4.4
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const yl=typeof document<"u";function n2(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function gO(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&n2(e.default)}const sn=Object.assign;function pm(e,t){const n={};for(const o in t){const a=t[o];n[o]=ea(a)?a.map(e):e(a)}return n}const ei=()=>{},ea=Array.isArray,o2=/#/g,bO=/&/g,yO=/\//g,_O=/=/g,wO=/\?/g,a2=/\+/g,IO=/%5B/g,xO=/%5D/g,r2=/%5E/g,kO=/%60/g,l2=/%7B/g,$O=/%7C/g,s2=/%7D/g,CO=/%20/g;function Op(e){return encodeURI(""+e).replace($O,"|").replace(IO,"[").replace(xO,"]")}function SO(e){return Op(e).replace(l2,"{").replace(s2,"}").replace(r2,"^")}function $f(e){return Op(e).replace(a2,"%2B").replace(CO,"+").replace(o2,"%23").replace(bO,"%26").replace(kO,"`").replace(l2,"{").replace(s2,"}").replace(r2,"^")}function TO(e){return $f(e).replace(_O,"%3D")}function EO(e){return Op(e).replace(o2,"%23").replace(wO,"%3F")}function FO(e){return e==null?"":EO(e).replace(yO,"%2F")}function ii(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const AO=/\/$/,RO=e=>e.replace(AO,"");function vm(e,t,n="/"){let o,a={},r="",s="";const i=t.indexOf("#");let u=t.indexOf("?");return i<u&&i>=0&&(u=-1),u>-1&&(o=t.slice(0,u),r=t.slice(u+1,i>-1?i:t.length),a=e(r)),i>-1&&(o=o||t.slice(0,i),s=t.slice(i,t.length)),o=MO(o??t,n),{fullPath:o+(r&&"?")+r+s,path:o,query:a,hash:ii(s)}}function DO(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function dg(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function OO(e,t,n){const o=t.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&ql(t.matched[o],n.matched[a])&&i2(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ql(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function i2(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!PO(e[n],t[n]))return!1;return!0}function PO(e,t){return ea(e)?mg(e,t):ea(t)?mg(t,e):e===t}function mg(e,t){return ea(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function MO(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let r=n.length-1,s,i;for(s=0;s<o.length;s++)if(i=o[s],i!==".")if(i==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(s).join("/")}const Ya={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ui;(function(e){e.pop="pop",e.push="push"})(ui||(ui={}));var ti;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ti||(ti={}));function BO(e){if(!e)if(yl){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),RO(e)}const NO=/^[^#]+#/;function VO(e,t){return e.replace(NO,"#")+t}function LO(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const Yc=()=>({left:window.scrollX,top:window.scrollY});function qO(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=LO(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function fg(e,t){return(history.state?history.state.position-t:-1)+e}const Cf=new Map;function UO(e,t){Cf.set(e,t)}function jO(e){const t=Cf.get(e);return Cf.delete(e),t}let zO=()=>location.protocol+"//"+location.host;function u2(e,t){const{pathname:n,search:o,hash:a}=t,r=e.indexOf("#");if(r>-1){let i=a.includes(e.slice(r))?e.slice(r).length:1,u=a.slice(i);return u[0]!=="/"&&(u="/"+u),dg(u,"")}return dg(n,e)+o+a}function HO(e,t,n,o){let a=[],r=[],s=null;const i=({state:h})=>{const y=u2(e,location),b=n.value,I=t.value;let w=0;if(h){if(n.value=y,t.value=h,s&&s===b){s=null;return}w=I?h.position-I.position:0}else o(y);a.forEach(k=>{k(n.value,b,{delta:w,type:ui.pop,direction:w?w>0?ti.forward:ti.back:ti.unknown})})};function u(){s=n.value}function d(h){a.push(h);const y=()=>{const b=a.indexOf(h);b>-1&&a.splice(b,1)};return r.push(y),y}function m(){const{history:h}=window;h.state&&h.replaceState(sn({},h.state,{scroll:Yc()}),"")}function f(){for(const h of r)h();r=[],window.removeEventListener("popstate",i),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",i),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:u,listen:d,destroy:f}}function pg(e,t,n,o=!1,a=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:a?Yc():null}}function WO(e){const{history:t,location:n}=window,o={value:u2(e,n)},a={value:t.state};a.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(u,d,m){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+u:zO()+e+u;try{t[m?"replaceState":"pushState"](d,"",h),a.value=d}catch(y){console.error(y),n[m?"replace":"assign"](h)}}function s(u,d){const m=sn({},t.state,pg(a.value.back,u,a.value.forward,!0),d,{position:a.value.position});r(u,m,!0),o.value=u}function i(u,d){const m=sn({},a.value,t.state,{forward:u,scroll:Yc()});r(m.current,m,!0);const f=sn({},pg(o.value,u,null),{position:m.position+1},d);r(u,f,!1),o.value=u}return{location:o,state:a,push:i,replace:s}}function GO(e){e=BO(e);const t=WO(e),n=HO(e,t.state,t.location,t.replace);function o(r,s=!0){s||n.pauseListeners(),history.go(r)}const a=sn({location:"",base:e,go:o,createHref:VO.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function KO(e){return typeof e=="string"||e&&typeof e=="object"}function c2(e){return typeof e=="string"||typeof e=="symbol"}const d2=Symbol("");var vg;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(vg||(vg={}));function Ul(e,t){return sn(new Error,{type:e,[d2]:!0},t)}function Aa(e,t){return e instanceof Error&&d2 in e&&(t==null||!!(e.type&t))}const hg="[^/]+?",ZO={sensitive:!1,strict:!1,start:!0,end:!0},YO=/[.+*?^${}()[\]/\\]/g;function XO(e,t){const n=sn({},ZO,t),o=[];let a=n.start?"^":"";const r=[];for(const d of e){const m=d.length?[]:[90];n.strict&&!d.length&&(a+="/");for(let f=0;f<d.length;f++){const h=d[f];let y=40+(n.sensitive?.25:0);if(h.type===0)f||(a+="/"),a+=h.value.replace(YO,"\\$&"),y+=40;else if(h.type===1){const{value:b,repeatable:I,optional:w,regexp:k}=h;r.push({name:b,repeatable:I,optional:w});const x=k||hg;if(x!==hg){y+=10;try{new RegExp(`(${x})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${b}" (${x}): `+C.message)}}let $=I?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;f||($=w&&d.length<2?`(?:/${$})`:"/"+$),w&&($+="?"),a+=$,y+=20,w&&(y+=-8),I&&(y+=-20),x===".*"&&(y+=-50)}m.push(y)}o.push(m)}if(n.strict&&n.end){const d=o.length-1;o[d][o[d].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const s=new RegExp(a,n.sensitive?"":"i");function i(d){const m=d.match(s),f={};if(!m)return null;for(let h=1;h<m.length;h++){const y=m[h]||"",b=r[h-1];f[b.name]=y&&b.repeatable?y.split("/"):y}return f}function u(d){let m="",f=!1;for(const h of e){(!f||!m.endsWith("/"))&&(m+="/"),f=!1;for(const y of h)if(y.type===0)m+=y.value;else if(y.type===1){const{value:b,repeatable:I,optional:w}=y,k=b in d?d[b]:"";if(ea(k)&&!I)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const x=ea(k)?k.join("/"):k;if(!x)if(w)h.length<2&&(m.endsWith("/")?m=m.slice(0,-1):f=!0);else throw new Error(`Missing required param "${b}"`);m+=x}}return m||"/"}return{re:s,score:o,keys:r,parse:i,stringify:u}}function QO(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function m2(e,t){let n=0;const o=e.score,a=t.score;for(;n<o.length&&n<a.length;){const r=QO(o[n],a[n]);if(r)return r;n++}if(Math.abs(a.length-o.length)===1){if(gg(o))return 1;if(gg(a))return-1}return a.length-o.length}function gg(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const JO={type:0,value:""},e7=/[a-zA-Z0-9_]/;function t7(e){if(!e)return[[]];if(e==="/")return[[JO]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${d}": ${y}`)}let n=0,o=n;const a=[];let r;function s(){r&&a.push(r),r=[]}let i=0,u,d="",m="";function f(){d&&(n===0?r.push({type:0,value:d}):n===1||n===2||n===3?(r.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:d,regexp:m,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),d="")}function h(){d+=u}for(;i<e.length;){if(u=e[i++],u==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:u==="/"?(d&&f(),s()):u===":"?(f(),n=1):h();break;case 4:h(),n=o;break;case 1:u==="("?n=2:e7.test(u)?h():(f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&i--);break;case 2:u===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+u:n=3:m+=u;break;case 3:f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&i--,m="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${d}"`),f(),s(),a}function n7(e,t,n){const o=XO(t7(e.path),n),a=sn(o,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function o7(e,t){const n=[],o=new Map;t=_g({strict:!1,end:!0,sensitive:!1},t);function a(f){return o.get(f)}function r(f,h,y){const b=!y,I=a7(f);I.aliasOf=y&&y.record;const w=_g(t,f),k=[I];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const F of C)k.push(sn({},I,{components:y?y.record.components:I.components,path:F,aliasOf:y?y.record:I}))}let x,$;for(const C of k){const{path:F}=C;if(h&&F[0]!=="/"){const T=h.record.path,S=T[T.length-1]==="/"?"":"/";C.path=h.record.path+(F&&S+F)}if(x=n7(C,h,w),y?y.alias.push(x):($=$||x,$!==x&&$.alias.push(x),b&&f.name&&!yg(x)&&s(f.name)),f2(x)&&u(x),I.children){const T=I.children;for(let S=0;S<T.length;S++)r(T[S],x,y&&y.children[S])}y=y||x}return $?()=>{s($)}:ei}function s(f){if(c2(f)){const h=o.get(f);h&&(o.delete(f),n.splice(n.indexOf(h),1),h.children.forEach(s),h.alias.forEach(s))}else{const h=n.indexOf(f);h>-1&&(n.splice(h,1),f.record.name&&o.delete(f.record.name),f.children.forEach(s),f.alias.forEach(s))}}function i(){return n}function u(f){const h=s7(f,n);n.splice(h,0,f),f.record.name&&!yg(f)&&o.set(f.record.name,f)}function d(f,h){let y,b={},I,w;if("name"in f&&f.name){if(y=o.get(f.name),!y)throw Ul(1,{location:f});w=y.record.name,b=sn(bg(h.params,y.keys.filter($=>!$.optional).concat(y.parent?y.parent.keys.filter($=>$.optional):[]).map($=>$.name)),f.params&&bg(f.params,y.keys.map($=>$.name))),I=y.stringify(b)}else if(f.path!=null)I=f.path,y=n.find($=>$.re.test(I)),y&&(b=y.parse(I),w=y.record.name);else{if(y=h.name?o.get(h.name):n.find($=>$.re.test(h.path)),!y)throw Ul(1,{location:f,currentLocation:h});w=y.record.name,b=sn({},h.params,f.params),I=y.stringify(b)}const k=[];let x=y;for(;x;)k.unshift(x.record),x=x.parent;return{name:w,path:I,params:b,matched:k,meta:l7(k)}}e.forEach(f=>r(f));function m(){n.length=0,o.clear()}return{addRoute:r,resolve:d,removeRoute:s,clearRoutes:m,getRoutes:i,getRecordMatcher:a}}function bg(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function a7(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:r7(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},mods:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function r7(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function yg(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function l7(e){return e.reduce((t,n)=>sn(t,n.meta),{})}function _g(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function s7(e,t){let n=0,o=t.length;for(;n!==o;){const r=n+o>>1;m2(e,t[r])<0?o=r:n=r+1}const a=i7(e);return a&&(o=t.lastIndexOf(a,o-1)),o}function i7(e){let t=e;for(;t=t.parent;)if(f2(t)&&m2(e,t)===0)return t}function f2({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function u7(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const r=o[a].replace(a2," "),s=r.indexOf("="),i=ii(s<0?r:r.slice(0,s)),u=s<0?null:ii(r.slice(s+1));if(i in t){let d=t[i];ea(d)||(d=t[i]=[d]),d.push(u)}else t[i]=u}return t}function wg(e){let t="";for(let n in e){const o=e[n];if(n=TO(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(ea(o)?o.map(r=>r&&$f(r)):[o&&$f(o)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function c7(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=ea(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return t}const Pp=Symbol(""),Ig=Symbol(""),Xc=Symbol(""),Mp=Symbol(""),Sf=Symbol("");function Ls(){let e=[];function t(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function p2(e,t,n){const o=()=>{e[t].delete(n)};un(o),sp(o),lp(()=>{e[t].add(n)}),e[t].add(n)}function v2(e){const t=Le(Pp,{}).value;t&&p2(t,"leaveGuards",e)}function Qc(e){const t=Le(Pp,{}).value;t&&p2(t,"updateGuards",e)}function or(e,t,n,o,a,r=s=>s()){const s=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((i,u)=>{const d=h=>{h===!1?u(Ul(4,{from:n,to:t})):h instanceof Error?u(h):KO(h)?u(Ul(2,{from:t,to:h})):(s&&o.enterCallbacks[a]===s&&typeof h=="function"&&s.push(h),i())},m=r(()=>e.call(o&&o.instances[a],t,n,d));let f=Promise.resolve(m);e.length<3&&(f=f.then(d)),f.catch(h=>u(h))})}function hm(e,t,n,o,a=r=>r()){const r=[];for(const s of e)for(const i in s.components){let u=s.components[i];if(!(t!=="beforeRouteEnter"&&!s.instances[i]))if(n2(u)){const m=(u.__vccOpts||u)[t];m&&r.push(or(m,n,o,s,i,a))}else{let d=u();r.push(()=>d.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${i}" at "${s.path}"`);const f=gO(m)?m.default:m;s.mods[i]=m,s.components[i]=f;const y=(f.__vccOpts||f)[t];return y&&or(y,n,o,s,i,a)()}))}}return r}function xg(e){const t=Le(Xc),n=Le(Mp),o=P(()=>{const u=v(e.to);return t.resolve(u)}),a=P(()=>{const{matched:u}=o.value,{length:d}=u,m=u[d-1],f=n.matched;if(!m||!f.length)return-1;const h=f.findIndex(ql.bind(null,m));if(h>-1)return h;const y=kg(u[d-2]);return d>1&&kg(m)===y&&f[f.length-1].path!==y?f.findIndex(ql.bind(null,u[d-2])):h}),r=P(()=>a.value>-1&&p7(n.params,o.value.params)),s=P(()=>a.value>-1&&a.value===n.matched.length-1&&i2(n.params,o.value.params));function i(u={}){return f7(u)?t[v(e.replace)?"replace":"push"](v(e.to)).catch(ei):Promise.resolve()}return{route:o,href:P(()=>o.value.href),isActive:r,isExactActive:s,navigate:i}}const d7=Ve({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xg,setup(e,{slots:t}){const n=ro(xg(e)),{options:o}=Le(Xc),a=P(()=>({[$g(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[$g(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:Ae("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},r)}}}),m7=d7;function f7(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function p7(e,t){for(const n in t){const o=t[n],a=e[n];if(typeof o=="string"){if(o!==a)return!1}else if(!ea(a)||a.length!==o.length||o.some((r,s)=>r!==a[s]))return!1}return!0}function kg(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const $g=(e,t,n)=>e??t??n,v7=Ve({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=Le(Sf),a=P(()=>e.route||o.value),r=Le(Ig,0),s=P(()=>{let d=v(r);const{matched:m}=a.value;let f;for(;(f=m[d])&&!f.components;)d++;return d}),i=P(()=>a.value.matched[s.value]);st(Ig,P(()=>s.value+1)),st(Pp,i),st(Sf,a);const u=V();return Se(()=>[u.value,i.value,e.name],([d,m,f],[h,y,b])=>{m&&(m.instances[f]=d,y&&y!==m&&d&&d===h&&(m.leaveGuards.size||(m.leaveGuards=y.leaveGuards),m.updateGuards.size||(m.updateGuards=y.updateGuards))),d&&m&&(!y||!ql(m,y)||!h)&&(m.enterCallbacks[f]||[]).forEach(I=>I(d))},{flush:"post"}),()=>{const d=a.value,m=e.name,f=i.value,h=f&&f.components[m];if(!h)return Cg(n.default,{Component:h,route:d});const y=f.props[m],b=y?y===!0?d.params:typeof y=="function"?y(d):y:null,w=Ae(h,sn({},b,t,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(f.instances[m]=null)},ref:u}));return Cg(n.default,{Component:w,route:d})||w}}});function Cg(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const h7=v7;function g7(e){const t=o7(e.routes,e),n=e.parseQuery||u7,o=e.stringifyQuery||wg,a=e.history,r=Ls(),s=Ls(),i=Ls(),u=Pt(Ya);let d=Ya;yl&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=pm.bind(null,Y=>""+Y),f=pm.bind(null,FO),h=pm.bind(null,ii);function y(Y,ae){let se,xe;return c2(Y)?(se=t.getRecordMatcher(Y),xe=ae):xe=Y,t.addRoute(xe,se)}function b(Y){const ae=t.getRecordMatcher(Y);ae&&t.removeRoute(ae)}function I(){return t.getRoutes().map(Y=>Y.record)}function w(Y){return!!t.getRecordMatcher(Y)}function k(Y,ae){if(ae=sn({},ae||u.value),typeof Y=="string"){const ie=vm(n,Y,ae.path),me=t.resolve({path:ie.path},ae),Ce=a.createHref(ie.fullPath);return sn(ie,me,{params:h(me.params),hash:ii(ie.hash),redirectedFrom:void 0,href:Ce})}let se;if(Y.path!=null)se=sn({},Y,{path:vm(n,Y.path,ae.path).path});else{const ie=sn({},Y.params);for(const me in ie)ie[me]==null&&delete ie[me];se=sn({},Y,{params:f(ie)}),ae.params=f(ae.params)}const xe=t.resolve(se,ae),le=Y.hash||"";xe.params=m(h(xe.params));const ge=DO(o,sn({},Y,{hash:SO(le),path:xe.path})),ve=a.createHref(ge);return sn({fullPath:ge,hash:le,query:o===wg?c7(Y.query):Y.query||{}},xe,{redirectedFrom:void 0,href:ve})}function x(Y){return typeof Y=="string"?vm(n,Y,u.value.path):sn({},Y)}function $(Y,ae){if(d!==Y)return Ul(8,{from:ae,to:Y})}function C(Y){return S(Y)}function F(Y){return C(sn(x(Y),{replace:!0}))}function T(Y){const ae=Y.matched[Y.matched.length-1];if(ae&&ae.redirect){const{redirect:se}=ae;let xe=typeof se=="function"?se(Y):se;return typeof xe=="string"&&(xe=xe.includes("?")||xe.includes("#")?xe=x(xe):{path:xe},xe.params={}),sn({query:Y.query,hash:Y.hash,params:xe.path!=null?{}:Y.params},xe)}}function S(Y,ae){const se=d=k(Y),xe=u.value,le=Y.state,ge=Y.force,ve=Y.replace===!0,ie=T(se);if(ie)return S(sn(x(ie),{state:typeof ie=="object"?sn({},le,ie.state):le,force:ge,replace:ve}),ae||se);const me=se;me.redirectedFrom=ae;let Ce;return!ge&&OO(o,xe,se)&&(Ce=Ul(16,{to:me,from:xe}),L(xe,xe,!0,!1)),(Ce?Promise.resolve(Ce):B(me,xe)).catch(ke=>Aa(ke)?Aa(ke,2)?ke:q(ke):W(ke,me,xe)).then(ke=>{if(ke){if(Aa(ke,2))return S(sn({replace:ve},x(ke.to),{state:typeof ke.to=="object"?sn({},le,ke.to.state):le,force:ge}),ae||me)}else ke=N(me,xe,!0,ve,le);return M(me,xe,ke),ke})}function A(Y,ae){const se=$(Y,ae);return se?Promise.reject(se):Promise.resolve()}function E(Y){const ae=ue.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(Y):Y()}function B(Y,ae){let se;const[xe,le,ge]=b7(Y,ae);se=hm(xe.reverse(),"beforeRouteLeave",Y,ae);for(const ie of xe)ie.leaveGuards.forEach(me=>{se.push(or(me,Y,ae))});const ve=A.bind(null,Y,ae);return se.push(ve),re(se).then(()=>{se=[];for(const ie of r.list())se.push(or(ie,Y,ae));return se.push(ve),re(se)}).then(()=>{se=hm(le,"beforeRouteUpdate",Y,ae);for(const ie of le)ie.updateGuards.forEach(me=>{se.push(or(me,Y,ae))});return se.push(ve),re(se)}).then(()=>{se=[];for(const ie of ge)if(ie.beforeEnter)if(ea(ie.beforeEnter))for(const me of ie.beforeEnter)se.push(or(me,Y,ae));else se.push(or(ie.beforeEnter,Y,ae));return se.push(ve),re(se)}).then(()=>(Y.matched.forEach(ie=>ie.enterCallbacks={}),se=hm(ge,"beforeRouteEnter",Y,ae,E),se.push(ve),re(se))).then(()=>{se=[];for(const ie of s.list())se.push(or(ie,Y,ae));return se.push(ve),re(se)}).catch(ie=>Aa(ie,8)?ie:Promise.reject(ie))}function M(Y,ae,se){i.list().forEach(xe=>E(()=>xe(Y,ae,se)))}function N(Y,ae,se,xe,le){const ge=$(Y,ae);if(ge)return ge;const ve=ae===Ya,ie=yl?history.state:{};se&&(xe||ve?a.replace(Y.fullPath,sn({scroll:ve&&ie&&ie.scroll},le)):a.push(Y.fullPath,le)),u.value=Y,L(Y,ae,se,ve),q()}let G;function U(){G||(G=a.listen((Y,ae,se)=>{if(!oe.listening)return;const xe=k(Y),le=T(xe);if(le){S(sn(le,{replace:!0}),xe).catch(ei);return}d=xe;const ge=u.value;yl&&UO(fg(ge.fullPath,se.delta),Yc()),B(xe,ge).catch(ve=>Aa(ve,12)?ve:Aa(ve,2)?(S(ve.to,xe).then(ie=>{Aa(ie,20)&&!se.delta&&se.type===ui.pop&&a.go(-1,!1)}).catch(ei),Promise.reject()):(se.delta&&a.go(-se.delta,!1),W(ve,xe,ge))).then(ve=>{ve=ve||N(xe,ge,!1),ve&&(se.delta&&!Aa(ve,8)?a.go(-se.delta,!1):se.type===ui.pop&&Aa(ve,20)&&a.go(-1,!1)),M(xe,ge,ve)}).catch(ei)}))}let j=Ls(),O=Ls(),H;function W(Y,ae,se){q(Y);const xe=O.list();return xe.length?xe.forEach(le=>le(Y,ae,se)):console.error(Y),Promise.reject(Y)}function X(){return H&&u.value!==Ya?Promise.resolve():new Promise((Y,ae)=>{j.add([Y,ae])})}function q(Y){return H||(H=!Y,U(),j.list().forEach(([ae,se])=>Y?se(Y):ae()),j.reset()),Y}function L(Y,ae,se,xe){const{scrollBehavior:le}=e;if(!yl||!le)return Promise.resolve();const ge=!se&&jO(fg(Y.fullPath,0))||(xe||!se)&&history.state&&history.state.scroll||null;return We().then(()=>le(Y,ae,ge)).then(ve=>ve&&qO(ve)).catch(ve=>W(ve,Y,ae))}const ee=Y=>a.go(Y);let ce;const ue=new Set,oe={currentRoute:u,listening:!0,addRoute:y,removeRoute:b,clearRoutes:t.clearRoutes,hasRoute:w,getRoutes:I,resolve:k,options:e,push:C,replace:F,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:r.add,beforeResolve:s.add,afterEach:i.add,onError:O.add,isReady:X,install(Y){const ae=this;Y.component("RouterLink",m7),Y.component("RouterView",h7),Y.config.globalProperties.$router=ae,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>v(u)}),yl&&!ce&&u.value===Ya&&(ce=!0,C(a.location).catch(le=>{}));const se={};for(const le in Ya)Object.defineProperty(se,le,{get:()=>u.value[le],enumerable:!0});Y.provide(Xc,ae),Y.provide(Mp,el(se)),Y.provide(Sf,u);const xe=Y.unmount;ue.add(Y),Y.unmount=function(){ue.delete(Y),ue.size<1&&(d=Ya,G&&G(),G=null,u.value=Ya,ce=!1,H=!1),xe()}}};function re(Y){return Y.reduce((ae,se)=>ae.then(()=>E(se)),Promise.resolve())}return oe}function b7(e,t){const n=[],o=[],a=[],r=Math.max(t.matched.length,e.matched.length);for(let s=0;s<r;s++){const i=t.matched[s];i&&(e.matched.find(d=>ql(d,i))?o.push(i):n.push(i));const u=e.matched[s];u&&(t.matched.find(d=>ql(d,u))||a.push(u))}return[n,o,a]}function wt(){return Le(Xc)}function Ct(e){return Le(Mp)}function y7(e,t,n){return n||(e.hash?{el:e.hash}:e.meta&&e.meta.scrollToTop===!1?{}:{left:0,top:0})}const Sg=g7({scrollBehavior:y7,history:GO(),routes:[]});function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _7(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xn(e,t,n){return t&&_7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ci(){return ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ci.apply(this,arguments)}function Eo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tf(e,t)}function sc(e){return sc=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},sc(e)}function Tf(e,t){return Tf=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},Tf(e,t)}function w7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x7(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I7(e)}function Fo(e){var t=w7();return function(){var o=sc(e),a;if(t){var r=sc(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return x7(this,a)}}var Bp=function(){function e(){Yn(this,e)}return Xn(e,[{key:"listenForWhisper",value:function(n,o){return this.listen(".client-"+n,o)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,o){return this.stopListening(".client-"+n,o)}}]),e}(),h2=function(){function e(t){Yn(this,e),this.namespace=t}return Xn(e,[{key:"format",value:function(n){return[".","\\"].includes(n.charAt(0))?n.substring(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),e}(),Jc=function(e){Eo(n,e);var t=Fo(n);function n(o,a,r){var s;return Yn(this,n),s=t.call(this),s.name=a,s.pusher=o,s.options=r,s.eventFormatter=new h2(s.options.namespace),s.subscribe(),s}return Xn(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(a,r){return this.on(this.eventFormatter.format(a),r),this}},{key:"listenToAll",value:function(a){var r=this;return this.subscription.bind_global(function(s,i){if(!s.startsWith("pusher:")){var u=r.options.namespace.replace(/\./g,"\\"),d=s.startsWith(u)?s.substring(u.length+1):"."+s;a(d,i)}}),this}},{key:"stopListening",value:function(a,r){return r?this.subscription.unbind(this.eventFormatter.format(a),r):this.subscription.unbind(this.eventFormatter.format(a)),this}},{key:"stopListeningToAll",value:function(a){return a?this.subscription.unbind_global(a):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(a){return this.on("pusher:subscription_succeeded",function(){a()}),this}},{key:"error",value:function(a){return this.on("pusher:subscription_error",function(r){a(r)}),this}},{key:"on",value:function(a,r){return this.subscription.bind(a,r),this}}]),n}(Bp),k7=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}}]),n}(Jc),$7=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}}]),n}(Jc),C7=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"here",value:function(a){return this.on("pusher:subscription_succeeded",function(r){a(Object.keys(r.members).map(function(s){return r.members[s]}))}),this}},{key:"joining",value:function(a){return this.on("pusher:member_added",function(r){a(r.info)}),this}},{key:"whisper",value:function(a,r){return this.pusher.channels.channels[this.name].trigger("client-".concat(a),r),this}},{key:"leaving",value:function(a){return this.on("pusher:member_removed",function(r){a(r.info)}),this}}]),n}(Jc),g2=function(e){Eo(n,e);var t=Fo(n);function n(o,a,r){var s;return Yn(this,n),s=t.call(this),s.events={},s.listeners={},s.name=a,s.socket=o,s.options=r,s.eventFormatter=new h2(s.options.namespace),s.subscribe(),s}return Xn(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(a,r){return this.on(this.eventFormatter.format(a),r),this}},{key:"stopListening",value:function(a,r){return this.unbindEvent(this.eventFormatter.format(a),r),this}},{key:"subscribed",value:function(a){return this.on("connect",function(r){a(r)}),this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,r){var s=this;return this.listeners[a]=this.listeners[a]||[],this.events[a]||(this.events[a]=function(i,u){s.name===i&&s.listeners[a]&&s.listeners[a].forEach(function(d){return d(u)})},this.socket.on(a,this.events[a])),this.listeners[a].push(r),this}},{key:"unbind",value:function(){var a=this;Object.keys(this.events).forEach(function(r){a.unbindEvent(r)})}},{key:"unbindEvent",value:function(a,r){this.listeners[a]=this.listeners[a]||[],r&&(this.listeners[a]=this.listeners[a].filter(function(s){return s!==r})),(!r||this.listeners[a].length===0)&&(this.events[a]&&(this.socket.removeListener(a,this.events[a]),delete this.events[a]),delete this.listeners[a])}}]),n}(Bp),b2=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"whisper",value:function(a,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:r}),this}}]),n}(g2),S7=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"here",value:function(a){return this.on("presence:subscribed",function(r){a(r.map(function(s){return s.user_info}))}),this}},{key:"joining",value:function(a){return this.on("presence:joining",function(r){return a(r.user_info)}),this}},{key:"whisper",value:function(a,r){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(a),data:r}),this}},{key:"leaving",value:function(a){return this.on("presence:leaving",function(r){return a(r.user_info)}),this}}]),n}(b2),ic=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(a,r){return this}},{key:"listenToAll",value:function(a){return this}},{key:"stopListening",value:function(a,r){return this}},{key:"subscribed",value:function(a){return this}},{key:"error",value:function(a){return this}},{key:"on",value:function(a,r){return this}}]),n}(Bp),Tg=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"whisper",value:function(a,r){return this}}]),n}(ic),T7=function(e){Eo(n,e);var t=Fo(n);function n(){return Yn(this,n),t.apply(this,arguments)}return Xn(n,[{key:"here",value:function(a){return this}},{key:"joining",value:function(a){return this}},{key:"whisper",value:function(a,r){return this}},{key:"leaving",value:function(a){return this}}]),n}(ic),Np=function(){function e(t){Yn(this,e),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return Xn(e,[{key:"setOptions",value:function(n){this.options=ci(this._defaultOptions,n);var o=this.csrfToken();return o&&(this.options.auth.headers["X-CSRF-TOKEN"]=o,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=o),o=this.options.bearerToken,o&&(this.options.auth.headers.Authorization="Bearer "+o,this.options.userAuthentication.headers.Authorization="Bearer "+o),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),e}(),Eg=function(e){Eo(n,e);var t=Fo(n);function n(){var o;return Yn(this,n),o=t.apply(this,arguments),o.channels={},o}return Xn(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(a,r,s){return this.channel(a).listen(r,s)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new Jc(this.pusher,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new k7(this.pusher,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"encryptedPrivateChannel",value:function(a){return this.channels["private-encrypted-"+a]||(this.channels["private-encrypted-"+a]=new $7(this.pusher,"private-encrypted-"+a,this.options)),this.channels["private-encrypted-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new C7(this.pusher,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var r=this,s=[a,"private-"+a,"private-encrypted-"+a,"presence-"+a];s.forEach(function(i,u){r.leaveChannel(i)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(Np),E7=function(e){Eo(n,e);var t=Fo(n);function n(){var o;return Yn(this,n),o=t.apply(this,arguments),o.channels={},o}return Xn(n,[{key:"connect",value:function(){var a=this,r=this.getSocketIO();return this.socket=r(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(a.channels).forEach(function(s){s.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(a,r,s){return this.channel(a).listen(r,s)}},{key:"channel",value:function(a){return this.channels[a]||(this.channels[a]=new g2(this.socket,a,this.options)),this.channels[a]}},{key:"privateChannel",value:function(a){return this.channels["private-"+a]||(this.channels["private-"+a]=new b2(this.socket,"private-"+a,this.options)),this.channels["private-"+a]}},{key:"presenceChannel",value:function(a){return this.channels["presence-"+a]||(this.channels["presence-"+a]=new S7(this.socket,"presence-"+a,this.options)),this.channels["presence-"+a]}},{key:"leave",value:function(a){var r=this,s=[a,"private-"+a,"presence-"+a];s.forEach(function(i){r.leaveChannel(i)})}},{key:"leaveChannel",value:function(a){this.channels[a]&&(this.channels[a].unsubscribe(),delete this.channels[a])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(Np),F7=function(e){Eo(n,e);var t=Fo(n);function n(){var o;return Yn(this,n),o=t.apply(this,arguments),o.channels={},o}return Xn(n,[{key:"connect",value:function(){}},{key:"listen",value:function(a,r,s){return new ic}},{key:"channel",value:function(a){return new ic}},{key:"privateChannel",value:function(a){return new Tg}},{key:"encryptedPrivateChannel",value:function(a){return new Tg}},{key:"presenceChannel",value:function(a){return new T7}},{key:"leave",value:function(a){}},{key:"leaveChannel",value:function(a){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(Np),A7=function(){function e(t){Yn(this,e),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Xn(e,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new Eg(ci(ci({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new Eg(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new E7(this.options);else if(this.options.broadcaster=="null")this.connector=new F7(this.options);else if(typeof this.options.broadcaster=="function")this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(lc(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,o,a){return this.connector.listen(n,o,a)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":lc(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(o,a){n.socketId()&&o.headers.set("X-Socket-ID",n.socketId()),a()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(o){return n.socketId()&&(o.headers["X-Socket-Id"]=n.socketId()),o})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(o,a,r){n.socketId()&&r.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(o){o.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),e}(),y2={exports:{}};/*!
 * Pusher JavaScript Library v8.3.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(o,a){e.exports=a()})(window,function(){return function(n){var o={};function a(r){if(o[r])return o[r].exports;var s=o[r]={i:r,l:!1,exports:{}};return n[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=o,a.d=function(r,s,i){a.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:i})},a.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},a.t=function(r,s){if(s&1&&(r=a(r)),s&8||s&4&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),s&2&&typeof r!="string")for(var u in r)a.d(i,u,(function(d){return r[d]}).bind(null,u));return i},a.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return a.d(s,"a",s),s},a.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},a.p="",a(a.s=2)}([function(n,o,a){var r=this&&this.__extends||function(){var I=function(w,k){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,$){x.__proto__=$}||function(x,$){for(var C in $)$.hasOwnProperty(C)&&(x[C]=$[C])},I(w,k)};return function(w,k){I(w,k);function x(){this.constructor=w}w.prototype=k===null?Object.create(k):(x.prototype=k.prototype,new x)}}();Object.defineProperty(o,"__esModule",{value:!0});var s=256,i=function(){function I(w){w===void 0&&(w="="),this._paddingCharacter=w}return I.prototype.encodedLength=function(w){return this._paddingCharacter?(w+2)/3*4|0:(w*8+5)/6|0},I.prototype.encode=function(w){for(var k="",x=0;x<w.length-2;x+=3){var $=w[x]<<16|w[x+1]<<8|w[x+2];k+=this._encodeByte($>>>3*6&63),k+=this._encodeByte($>>>2*6&63),k+=this._encodeByte($>>>1*6&63),k+=this._encodeByte($>>>0*6&63)}var C=w.length-x;if(C>0){var $=w[x]<<16|(C===2?w[x+1]<<8:0);k+=this._encodeByte($>>>3*6&63),k+=this._encodeByte($>>>2*6&63),C===2?k+=this._encodeByte($>>>1*6&63):k+=this._paddingCharacter||"",k+=this._paddingCharacter||""}return k},I.prototype.maxDecodedLength=function(w){return this._paddingCharacter?w/4*3|0:(w*6+7)/8|0},I.prototype.decodedLength=function(w){return this.maxDecodedLength(w.length-this._getPaddingLength(w))},I.prototype.decode=function(w){if(w.length===0)return new Uint8Array(0);for(var k=this._getPaddingLength(w),x=w.length-k,$=new Uint8Array(this.maxDecodedLength(x)),C=0,F=0,T=0,S=0,A=0,E=0,B=0;F<x-4;F+=4)S=this._decodeChar(w.charCodeAt(F+0)),A=this._decodeChar(w.charCodeAt(F+1)),E=this._decodeChar(w.charCodeAt(F+2)),B=this._decodeChar(w.charCodeAt(F+3)),$[C++]=S<<2|A>>>4,$[C++]=A<<4|E>>>2,$[C++]=E<<6|B,T|=S&s,T|=A&s,T|=E&s,T|=B&s;if(F<x-1&&(S=this._decodeChar(w.charCodeAt(F)),A=this._decodeChar(w.charCodeAt(F+1)),$[C++]=S<<2|A>>>4,T|=S&s,T|=A&s),F<x-2&&(E=this._decodeChar(w.charCodeAt(F+2)),$[C++]=A<<4|E>>>2,T|=E&s),F<x-3&&(B=this._decodeChar(w.charCodeAt(F+3)),$[C++]=E<<6|B,T|=B&s),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return $},I.prototype._encodeByte=function(w){var k=w;return k+=65,k+=25-w>>>8&6,k+=51-w>>>8&-75,k+=61-w>>>8&-15,k+=62-w>>>8&3,String.fromCharCode(k)},I.prototype._decodeChar=function(w){var k=s;return k+=(42-w&w-44)>>>8&-s+w-43+62,k+=(46-w&w-48)>>>8&-s+w-47+63,k+=(47-w&w-58)>>>8&-s+w-48+52,k+=(64-w&w-91)>>>8&-s+w-65+0,k+=(96-w&w-123)>>>8&-s+w-97+26,k},I.prototype._getPaddingLength=function(w){var k=0;if(this._paddingCharacter){for(var x=w.length-1;x>=0&&w[x]===this._paddingCharacter;x--)k++;if(w.length<4||k>2)throw new Error("Base64Coder: incorrect padding")}return k},I}();o.Coder=i;var u=new i;function d(I){return u.encode(I)}o.encode=d;function m(I){return u.decode(I)}o.decode=m;var f=function(I){r(w,I);function w(){return I!==null&&I.apply(this,arguments)||this}return w.prototype._encodeByte=function(k){var x=k;return x+=65,x+=25-k>>>8&6,x+=51-k>>>8&-75,x+=61-k>>>8&-13,x+=62-k>>>8&49,String.fromCharCode(x)},w.prototype._decodeChar=function(k){var x=s;return x+=(44-k&k-46)>>>8&-s+k-45+62,x+=(94-k&k-96)>>>8&-s+k-95+63,x+=(47-k&k-58)>>>8&-s+k-48+52,x+=(64-k&k-91)>>>8&-s+k-65+0,x+=(96-k&k-123)>>>8&-s+k-97+26,x},w}(i);o.URLSafeCoder=f;var h=new f;function y(I){return h.encode(I)}o.encodeURLSafe=y;function b(I){return h.decode(I)}o.decodeURLSafe=b,o.encodedLength=function(I){return u.encodedLength(I)},o.maxDecodedLength=function(I){return u.maxDecodedLength(I)},o.decodedLength=function(I){return u.decodedLength(I)}},function(n,o,a){Object.defineProperty(o,"__esModule",{value:!0});var r="utf8: invalid string",s="utf8: invalid source encoding";function i(m){for(var f=new Uint8Array(u(m)),h=0,y=0;y<m.length;y++){var b=m.charCodeAt(y);b<128?f[h++]=b:b<2048?(f[h++]=192|b>>6,f[h++]=128|b&63):b<55296?(f[h++]=224|b>>12,f[h++]=128|b>>6&63,f[h++]=128|b&63):(y++,b=(b&1023)<<10,b|=m.charCodeAt(y)&1023,b+=65536,f[h++]=240|b>>18,f[h++]=128|b>>12&63,f[h++]=128|b>>6&63,f[h++]=128|b&63)}return f}o.encode=i;function u(m){for(var f=0,h=0;h<m.length;h++){var y=m.charCodeAt(h);if(y<128)f+=1;else if(y<2048)f+=2;else if(y<55296)f+=3;else if(y<=57343){if(h>=m.length-1)throw new Error(r);h++,f+=4}else throw new Error(r)}return f}o.encodedLength=u;function d(m){for(var f=[],h=0;h<m.length;h++){var y=m[h];if(y&128){var b=void 0;if(y<224){if(h>=m.length)throw new Error(s);var I=m[++h];if((I&192)!==128)throw new Error(s);y=(y&31)<<6|I&63,b=128}else if(y<240){if(h>=m.length-1)throw new Error(s);var I=m[++h],w=m[++h];if((I&192)!==128||(w&192)!==128)throw new Error(s);y=(y&15)<<12|(I&63)<<6|w&63,b=2048}else if(y<248){if(h>=m.length-2)throw new Error(s);var I=m[++h],w=m[++h],k=m[++h];if((I&192)!==128||(w&192)!==128||(k&192)!==128)throw new Error(s);y=(y&15)<<18|(I&63)<<12|(w&63)<<6|k&63,b=65536}else throw new Error(s);if(y<b||y>=55296&&y<=57343)throw new Error(s);if(y>=65536){if(y>1114111)throw new Error(s);y-=65536,f.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}f.push(String.fromCharCode(y))}return f.join("")}o.decode=d},function(n,o,a){n.exports=a(3).default},function(n,o,a){a.r(o);class r{constructor(z,Q){this.lastId=0,this.prefix=z,this.name=Q}create(z){this.lastId++;var Q=this.lastId,pe=this.prefix+Q,ye=this.name+"["+Q+"]",Me=!1,Je=function(){Me||(z.apply(null,arguments),Me=!0)};return this[Q]=Je,{number:Q,id:pe,name:ye,callback:Je}}remove(z){delete this[z.number]}}var s=new r("_pusher_script_","Pusher.ScriptReceivers"),i={VERSION:"8.3.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},u=i;class d{constructor(z){this.options=z,this.receivers=z.receivers||s,this.loading={}}load(z,Q,pe){var ye=this;if(ye.loading[z]&&ye.loading[z].length>0)ye.loading[z].push(pe);else{ye.loading[z]=[pe];var Me=Ft.createScriptRequest(ye.getPath(z,Q)),Je=ye.receivers.create(function(ct){if(ye.receivers.remove(Je),ye.loading[z]){var St=ye.loading[z];delete ye.loading[z];for(var Gt=function(Pn){Pn||Me.cleanup()},ln=0;ln<St.length;ln++)St[ln](ct,Gt)}});Me.send(Je)}}getRoot(z){var Q,pe=Ft.getDocument().location.protocol;return z&&z.useTLS||pe==="https:"?Q=this.options.cdn_https:Q=this.options.cdn_http,Q.replace(/\/*$/,"")+"/"+this.options.version}getPath(z,Q){return this.getRoot(Q)+"/"+z+this.options.suffix+".js"}}var m=new r("_pusher_dependencies","Pusher.DependenciesReceivers"),f=new d({cdn_http:u.cdn_http,cdn_https:u.cdn_https,version:u.VERSION,suffix:u.dependency_suffix,receivers:m});const h={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var b={buildLogSuffix:function(J){const z="See:",Q=h.urls[J];if(!Q)return"";let pe;return Q.fullUrl?pe=Q.fullUrl:Q.path&&(pe=h.baseUrl+Q.path),pe?`${z} ${pe}`:""}},I;(function(J){J.UserAuthentication="user-authentication",J.ChannelAuthorization="channel-authorization"})(I||(I={}));class w extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class $ extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class F extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(z){super(z),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(z,Q){super(Q),this.status=z,Object.setPrototypeOf(this,new.target.prototype)}}var B=function(J,z,Q,pe,ye){const Me=Ft.createXHR();Me.open("POST",Q.endpoint,!0),Me.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var Je in Q.headers)Me.setRequestHeader(Je,Q.headers[Je]);if(Q.headersProvider!=null){let ct=Q.headersProvider();for(var Je in ct)Me.setRequestHeader(Je,ct[Je])}return Me.onreadystatechange=function(){if(Me.readyState===4)if(Me.status===200){let ct,St=!1;try{ct=JSON.parse(Me.responseText),St=!0}catch{ye(new A(200,`JSON returned from ${pe.toString()} endpoint was invalid, yet status code was 200. Data was: ${Me.responseText}`),null)}St&&ye(null,ct)}else{let ct="";switch(pe){case I.UserAuthentication:ct=b.buildLogSuffix("authenticationEndpoint");break;case I.ChannelAuthorization:ct=`Clients must be authorized to join private or presence channels. ${b.buildLogSuffix("authorizationEndpoint")}`;break}ye(new A(Me.status,`Unable to retrieve auth string from ${pe.toString()} endpoint - received status: ${Me.status} from ${Q.endpoint}. ${ct}`),null)}},Me.send(z),Me};function M(J){return H(j(J))}var N=String.fromCharCode,G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=function(J){var z=J.charCodeAt(0);return z<128?J:z<2048?N(192|z>>>6)+N(128|z&63):N(224|z>>>12&15)+N(128|z>>>6&63)+N(128|z&63)},j=function(J){return J.replace(/[^\x00-\x7F]/g,U)},O=function(J){var z=[0,2,1][J.length%3],Q=J.charCodeAt(0)<<16|(J.length>1?J.charCodeAt(1):0)<<8|(J.length>2?J.charCodeAt(2):0),pe=[G.charAt(Q>>>18),G.charAt(Q>>>12&63),z>=2?"=":G.charAt(Q>>>6&63),z>=1?"=":G.charAt(Q&63)];return pe.join("")},H=window.btoa||function(J){return J.replace(/[\s\S]{1,3}/g,O)};class W{constructor(z,Q,pe,ye){this.clear=Q,this.timer=z(()=>{this.timer&&(this.timer=ye(this.timer))},pe)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var X=W;function q(J){window.clearTimeout(J)}function L(J){window.clearInterval(J)}class ee extends X{constructor(z,Q){super(setTimeout,q,z,function(pe){return Q(),null})}}class ce extends X{constructor(z,Q){super(setInterval,L,z,function(pe){return Q(),pe})}}var ue={now(){return Date.now?Date.now():new Date().valueOf()},defer(J){return new ee(0,J)},method(J,...z){var Q=Array.prototype.slice.call(arguments,1);return function(pe){return pe[J].apply(pe,Q.concat(arguments))}}},oe=ue;function re(J,...z){for(var Q=0;Q<z.length;Q++){var pe=z[Q];for(var ye in pe)pe[ye]&&pe[ye].constructor&&pe[ye].constructor===Object?J[ye]=re(J[ye]||{},pe[ye]):J[ye]=pe[ye]}return J}function Y(){for(var J=["Pusher"],z=0;z<arguments.length;z++)typeof arguments[z]=="string"?J.push(arguments[z]):J.push(Ne(arguments[z]));return J.join(" : ")}function ae(J,z){var Q=Array.prototype.indexOf;if(J===null)return-1;if(Q&&J.indexOf===Q)return J.indexOf(z);for(var pe=0,ye=J.length;pe<ye;pe++)if(J[pe]===z)return pe;return-1}function se(J,z){for(var Q in J)Object.prototype.hasOwnProperty.call(J,Q)&&z(J[Q],Q,J)}function xe(J){var z=[];return se(J,function(Q,pe){z.push(pe)}),z}function le(J){var z=[];return se(J,function(Q){z.push(Q)}),z}function ge(J,z,Q){for(var pe=0;pe<J.length;pe++)z.call(Q||window,J[pe],pe,J)}function ve(J,z){for(var Q=[],pe=0;pe<J.length;pe++)Q.push(z(J[pe],pe,J,Q));return Q}function ie(J,z){var Q={};return se(J,function(pe,ye){Q[ye]=z(pe)}),Q}function me(J,z){z=z||function(ye){return!!ye};for(var Q=[],pe=0;pe<J.length;pe++)z(J[pe],pe,J,Q)&&Q.push(J[pe]);return Q}function Ce(J,z){var Q={};return se(J,function(pe,ye){(z&&z(pe,ye,J,Q)||pe)&&(Q[ye]=pe)}),Q}function ke(J){var z=[];return se(J,function(Q,pe){z.push([pe,Q])}),z}function Be(J,z){for(var Q=0;Q<J.length;Q++)if(z(J[Q],Q,J))return!0;return!1}function Fe(J,z){for(var Q=0;Q<J.length;Q++)if(!z(J[Q],Q,J))return!1;return!0}function he(J){return ie(J,function(z){return typeof z=="object"&&(z=Ne(z)),encodeURIComponent(M(z.toString()))})}function _e(J){var z=Ce(J,function(pe){return pe!==void 0}),Q=ve(ke(he(z)),oe.method("join","=")).join("&");return Q}function Te(J){var z=[],Q=[];return function pe(ye,Me){var Je,ct,St;switch(typeof ye){case"object":if(!ye)return null;for(Je=0;Je<z.length;Je+=1)if(z[Je]===ye)return{$ref:Q[Je]};if(z.push(ye),Q.push(Me),Object.prototype.toString.apply(ye)==="[object Array]")for(St=[],Je=0;Je<ye.length;Je+=1)St[Je]=pe(ye[Je],Me+"["+Je+"]");else{St={};for(ct in ye)Object.prototype.hasOwnProperty.call(ye,ct)&&(St[ct]=pe(ye[ct],Me+"["+JSON.stringify(ct)+"]"))}return St;case"number":case"string":case"boolean":return ye}}(J,"$")}function Ne(J){try{return JSON.stringify(J)}catch{return JSON.stringify(Te(J))}}class lt{constructor(){this.globalLog=z=>{window.console&&window.console.log&&window.console.log(z)}}debug(...z){this.log(this.globalLog,z)}warn(...z){this.log(this.globalLogWarn,z)}error(...z){this.log(this.globalLogError,z)}globalLogWarn(z){window.console&&window.console.warn?window.console.warn(z):this.globalLog(z)}globalLogError(z){window.console&&window.console.error?window.console.error(z):this.globalLogWarn(z)}log(z,...Q){var pe=Y.apply(this,arguments);Qd.log?Qd.log(pe):Qd.logToConsole&&z.bind(this)(pe)}}var Ke=new lt,$e=function(J,z,Q,pe,ye){(Q.headers!==void 0||Q.headersProvider!=null)&&Ke.warn(`To send headers with the ${pe.toString()} request, you must use AJAX, rather than JSONP.`);var Me=J.nextAuthCallbackID.toString();J.nextAuthCallbackID++;var Je=J.getDocument(),ct=Je.createElement("script");J.auth_callbacks[Me]=function(ln){ye(null,ln)};var St="Pusher.auth_callbacks['"+Me+"']";ct.src=Q.endpoint+"?callback="+encodeURIComponent(St)+"&"+z;var Gt=Je.getElementsByTagName("head")[0]||Je.documentElement;Gt.insertBefore(ct,Gt.firstChild)},De=$e;class at{constructor(z){this.src=z}send(z){var Q=this,pe="Error loading "+Q.src;Q.script=document.createElement("script"),Q.script.id=z.id,Q.script.src=Q.src,Q.script.type="text/javascript",Q.script.charset="UTF-8",Q.script.addEventListener?(Q.script.onerror=function(){z.callback(pe)},Q.script.onload=function(){z.callback(null)}):Q.script.onreadystatechange=function(){(Q.script.readyState==="loaded"||Q.script.readyState==="complete")&&z.callback(null)},Q.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(Q.errorScript=document.createElement("script"),Q.errorScript.id=z.id+"_error",Q.errorScript.text=z.name+"('"+pe+"');",Q.script.async=Q.errorScript.async=!1):Q.script.async=!0;var ye=document.getElementsByTagName("head")[0];ye.insertBefore(Q.script,ye.firstChild),Q.errorScript&&ye.insertBefore(Q.errorScript,Q.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class dt{constructor(z,Q){this.url=z,this.data=Q}send(z){if(!this.request){var Q=_e(this.data),pe=this.url+"/"+z.number+"?"+Q;this.request=Ft.createScriptRequest(pe),this.request.send(z)}}cleanup(){this.request&&this.request.cleanup()}}var we=function(J,z){return function(Q,pe){var ye="http"+(z?"s":"")+"://",Me=ye+(J.host||J.options.host)+J.options.path,Je=Ft.createJSONPRequest(Me,Q),ct=Ft.ScriptReceivers.create(function(St,Gt){s.remove(ct),Je.cleanup(),Gt&&Gt.host&&(J.host=Gt.host),pe&&pe(St,Gt)});Je.send(ct)}},Ge={name:"jsonp",getAgent:we},yt=Ge;function rn(J,z,Q){var pe=J+(z.useTLS?"s":""),ye=z.useTLS?z.hostTLS:z.hostNonTLS;return pe+"://"+ye+Q}function Oe(J,z){var Q="/app/"+J,pe="?protocol="+u.PROTOCOL+"&client=js&version="+u.VERSION+(z?"&"+z:"");return Q+pe}var Ze={getInitial:function(J,z){var Q=(z.httpPath||"")+Oe(J,"flash=false");return rn("ws",z,Q)}},Et={getInitial:function(J,z){var Q=(z.httpPath||"/pusher")+Oe(J);return rn("http",z,Q)}},Wt={getInitial:function(J,z){return rn("http",z,z.httpPath||"/pusher")},getPath:function(J,z){return Oe(J)}};class Qn{constructor(){this._callbacks={}}get(z){return this._callbacks[wo(z)]}add(z,Q,pe){var ye=wo(z);this._callbacks[ye]=this._callbacks[ye]||[],this._callbacks[ye].push({fn:Q,context:pe})}remove(z,Q,pe){if(!z&&!Q&&!pe){this._callbacks={};return}var ye=z?[wo(z)]:xe(this._callbacks);Q||pe?this.removeCallback(ye,Q,pe):this.removeAllCallbacks(ye)}removeCallback(z,Q,pe){ge(z,function(ye){this._callbacks[ye]=me(this._callbacks[ye]||[],function(Me){return Q&&Q!==Me.fn||pe&&pe!==Me.context}),this._callbacks[ye].length===0&&delete this._callbacks[ye]},this)}removeAllCallbacks(z){ge(z,function(Q){delete this._callbacks[Q]},this)}}function wo(J){return"_"+J}class ht{constructor(z){this.callbacks=new Qn,this.global_callbacks=[],this.failThrough=z}bind(z,Q,pe){return this.callbacks.add(z,Q,pe),this}bind_global(z){return this.global_callbacks.push(z),this}unbind(z,Q,pe){return this.callbacks.remove(z,Q,pe),this}unbind_global(z){return z?(this.global_callbacks=me(this.global_callbacks||[],Q=>Q!==z),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(z,Q,pe){for(var ye=0;ye<this.global_callbacks.length;ye++)this.global_callbacks[ye](z,Q);var Me=this.callbacks.get(z),Je=[];if(pe?Je.push(Q,pe):Q&&Je.push(Q),Me&&Me.length>0)for(var ye=0;ye<Me.length;ye++)Me[ye].fn.apply(Me[ye].context||window,Je);else this.failThrough&&this.failThrough(z,Q);return this}}class Rn extends ht{constructor(z,Q,pe,ye,Me){super(),this.initialize=Ft.transportConnectionInitializer,this.hooks=z,this.name=Q,this.priority=pe,this.key=ye,this.options=Me,this.state="new",this.timeline=Me.timeline,this.activityTimeout=Me.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var z=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(z,this.options)}catch(Q){return oe.defer(()=>{this.onError(Q),this.changeState("closed")}),!1}return this.bindListeners(),Ke.debug("Connecting",{transport:this.name,url:z}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(z){return this.state==="open"?(oe.defer(()=>{this.socket&&this.socket.send(z)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(z){this.emit("error",{type:"WebSocketError",error:z}),this.timeline.error(this.buildTimelineMessage({error:z.toString()}))}onClose(z){z?this.changeState("closed",{code:z.code,reason:z.reason,wasClean:z.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(z){this.emit("message",z)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=z=>{this.onError(z)},this.socket.onclose=z=>{this.onClose(z)},this.socket.onmessage=z=>{this.onMessage(z)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(z,Q){this.state=z,this.timeline.info(this.buildTimelineMessage({state:z,params:Q})),this.emit(z,Q)}buildTimelineMessage(z){return re({cid:this.id},z)}}class On{constructor(z){this.hooks=z}isSupported(z){return this.hooks.isSupported(z)}createConnection(z,Q,pe,ye){return new Rn(this.hooks,z,Q,pe,ye)}}var ca=new On({urls:Ze,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!Ft.getWebSocketAPI()},isSupported:function(){return!!Ft.getWebSocketAPI()},getSocket:function(J){return Ft.createWebSocket(J)}}),da={urls:Et,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},et=re({getSocket:function(J){return Ft.HTTPFactory.createStreamingSocket(J)}},da),vt=re({getSocket:function(J){return Ft.HTTPFactory.createPollingSocket(J)}},da),Sn={isSupported:function(){return Ft.isXHRSupported()}},mt=new On(re({},et,Sn)),Ln=new On(re({},vt,Sn)),so={ws:ca,xhr_streaming:mt,xhr_polling:Ln},en=so,uo=new On({file:"sockjs",urls:Wt,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(J,z){return new window.SockJS(J,null,{js_path:f.getPath("sockjs",{useTLS:z.useTLS}),ignore_null_origin:z.ignoreNullOrigin})},beforeOpen:function(J,z){J.send(JSON.stringify({path:z}))}}),Wa={isSupported:function(J){var z=Ft.isXDRSupported(J.useTLS);return z}},As=new On(re({},et,Wa)),Rs=new On(re({},vt,Wa));en.xdr_streaming=As,en.xdr_polling=Rs,en.sockjs=uo;var Ds=en;class tn extends ht{constructor(){super();var z=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){z.emit("online")},!1),window.addEventListener("offline",function(){z.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var Os=new tn;class mu{constructor(z,Q,pe){this.manager=z,this.transport=Q,this.minPingDelay=pe.minPingDelay,this.maxPingDelay=pe.maxPingDelay,this.pingDelay=void 0}createConnection(z,Q,pe,ye){ye=re({},ye,{activityTimeout:this.pingDelay});var Me=this.transport.createConnection(z,Q,pe,ye),Je=null,ct=function(){Me.unbind("open",ct),Me.bind("closed",St),Je=oe.now()},St=Gt=>{if(Me.unbind("closed",St),Gt.code===1002||Gt.code===1003)this.manager.reportDeath();else if(!Gt.wasClean&&Je){var ln=oe.now()-Je;ln<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(ln/2,this.minPingDelay))}};return Me.bind("open",ct),Me}isSupported(z){return this.manager.isAlive()&&this.transport.isSupported(z)}}const fu={decodeMessage:function(J){try{var z=JSON.parse(J.data),Q=z.data;if(typeof Q=="string")try{Q=JSON.parse(z.data)}catch{}var pe={event:z.event,channel:z.channel,data:Q};return z.user_id&&(pe.user_id=z.user_id),pe}catch(ye){throw{type:"MessageParseError",error:ye,data:J.data}}},encodeMessage:function(J){return JSON.stringify(J)},processHandshake:function(J){var z=fu.decodeMessage(J);if(z.event==="pusher:connection_established"){if(!z.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:z.data.socket_id,activityTimeout:z.data.activity_timeout*1e3}}else{if(z.event==="pusher:error")return{action:this.getCloseAction(z.data),error:this.getCloseError(z.data)};throw"Invalid handshake"}},getCloseAction:function(J){return J.code<4e3?J.code>=1002&&J.code<=1004?"backoff":null:J.code===4e3?"tls_only":J.code<4100?"refused":J.code<4200?"backoff":J.code<4300?"retry":"refused"},getCloseError:function(J){return J.code!==1e3&&J.code!==1001?{type:"PusherError",data:{code:J.code,message:J.reason||J.message}}:null}};var $r=fu;class z5 extends ht{constructor(z,Q){super(),this.id=z,this.transport=Q,this.activityTimeout=Q.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(z){return this.transport.send(z)}send_event(z,Q,pe){var ye={event:z,data:Q};return pe&&(ye.channel=pe),Ke.debug("Event sent",ye),this.send($r.encodeMessage(ye))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var z={message:pe=>{var ye;try{ye=$r.decodeMessage(pe)}catch(Me){this.emit("error",{type:"MessageParseError",error:Me,data:pe.data})}if(ye!==void 0){switch(Ke.debug("Event recd",ye),ye.event){case"pusher:error":this.emit("error",{type:"PusherError",data:ye.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",ye)}},activity:()=>{this.emit("activity")},error:pe=>{this.emit("error",pe)},closed:pe=>{Q(),pe&&pe.code&&this.handleCloseEvent(pe),this.transport=null,this.emit("closed")}},Q=()=>{se(z,(pe,ye)=>{this.transport.unbind(ye,pe)})};se(z,(pe,ye)=>{this.transport.bind(ye,pe)})}handleCloseEvent(z){var Q=$r.getCloseAction(z),pe=$r.getCloseError(z);pe&&this.emit("error",pe),Q&&this.emit(Q,{action:Q,error:pe})}}class H5{constructor(z,Q){this.transport=z,this.callback=Q,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=z=>{this.unbindListeners();var Q;try{Q=$r.processHandshake(z)}catch(pe){this.finish("error",{error:pe}),this.transport.close();return}Q.action==="connected"?this.finish("connected",{connection:new z5(Q.id,this.transport),activityTimeout:Q.activityTimeout}):(this.finish(Q.action,{error:Q.error}),this.transport.close())},this.onClosed=z=>{this.unbindListeners();var Q=$r.getCloseAction(z)||"backoff",pe=$r.getCloseError(z);this.finish(Q,{error:pe})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(z,Q){this.callback(re({transport:this.transport,action:z},Q))}}class W5{constructor(z,Q){this.timeline=z,this.options=Q||{}}send(z,Q){this.timeline.isEmpty()||this.timeline.send(Ft.TimelineTransport.getAgent(this,z),Q)}}class Hd extends ht{constructor(z,Q){super(function(pe,ye){Ke.debug("No callbacks on "+z+" for "+pe)}),this.name=z,this.pusher=Q,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(z,Q){return Q(null,{auth:""})}trigger(z,Q){if(z.indexOf("client-")!==0)throw new w("Event '"+z+"' does not start with 'client-'");if(!this.subscribed){var pe=b.buildLogSuffix("triggeringClientEvents");Ke.warn(`Client event triggered before channel 'subscription_succeeded' event . ${pe}`)}return this.pusher.send_event(z,Q,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(z){var Q=z.event,pe=z.data;if(Q==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(z);else if(Q==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(z);else if(Q.indexOf("pusher_internal:")!==0){var ye={};this.emit(Q,pe,ye)}}handleSubscriptionSucceededEvent(z){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",z.data)}handleSubscriptionCountEvent(z){z.data.subscription_count&&(this.subscriptionCount=z.data.subscription_count),this.emit("pusher:subscription_count",z.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(z,Q)=>{z?(this.subscriptionPending=!1,Ke.error(z.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:z.message},z instanceof A?{status:z.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:Q.auth,channel_data:Q.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Wd extends Hd{authorize(z,Q){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:z},Q)}}class G5{constructor(){this.reset()}get(z){return Object.prototype.hasOwnProperty.call(this.members,z)?{id:z,info:this.members[z]}:null}each(z){se(this.members,(Q,pe)=>{z(this.get(pe))})}setMyID(z){this.myID=z}onSubscription(z){this.members=z.presence.hash,this.count=z.presence.count,this.me=this.get(this.myID)}addMember(z){return this.get(z.user_id)===null&&this.count++,this.members[z.user_id]=z.user_info,this.get(z.user_id)}removeMember(z){var Q=this.get(z.user_id);return Q&&(delete this.members[z.user_id],this.count--),Q}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var K5=function(J,z,Q,pe){function ye(Me){return Me instanceof Q?Me:new Q(function(Je){Je(Me)})}return new(Q||(Q=Promise))(function(Me,Je){function ct(ln){try{Gt(pe.next(ln))}catch(Pn){Je(Pn)}}function St(ln){try{Gt(pe.throw(ln))}catch(Pn){Je(Pn)}}function Gt(ln){ln.done?Me(ln.value):ye(ln.value).then(ct,St)}Gt((pe=pe.apply(J,z||[])).next())})};class Z5 extends Wd{constructor(z,Q){super(z,Q),this.members=new G5}authorize(z,Q){super.authorize(z,(pe,ye)=>K5(this,void 0,void 0,function*(){if(!pe)if(ye=ye,ye.channel_data!=null){var Me=JSON.parse(ye.channel_data);this.members.setMyID(Me.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let Je=b.buildLogSuffix("authorizationEndpoint");Ke.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${Je}, or the user should be signed in.`),Q("Invalid auth response");return}Q(pe,ye)}))}handleEvent(z){var Q=z.event;if(Q.indexOf("pusher_internal:")===0)this.handleInternalEvent(z);else{var pe=z.data,ye={};z.user_id&&(ye.user_id=z.user_id),this.emit(Q,pe,ye)}}handleInternalEvent(z){var Q=z.event,pe=z.data;switch(Q){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(z);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(z);break;case"pusher_internal:member_added":var ye=this.members.addMember(pe);this.emit("pusher:member_added",ye);break;case"pusher_internal:member_removed":var Me=this.members.removeMember(pe);Me&&this.emit("pusher:member_removed",Me);break}}handleSubscriptionSucceededEvent(z){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(z.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Y5=a(1),Gd=a(0);class X5 extends Wd{constructor(z,Q,pe){super(z,Q),this.key=null,this.nacl=pe}authorize(z,Q){super.authorize(z,(pe,ye)=>{if(pe){Q(pe,ye);return}let Me=ye.shared_secret;if(!Me){Q(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Gd.decode)(Me),delete ye.shared_secret,Q(null,ye)})}trigger(z,Q){throw new F("Client events are not currently supported for encrypted channels")}handleEvent(z){var Q=z.event,pe=z.data;if(Q.indexOf("pusher_internal:")===0||Q.indexOf("pusher:")===0){super.handleEvent(z);return}this.handleEncryptedEvent(Q,pe)}handleEncryptedEvent(z,Q){if(!this.key){Ke.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!Q.ciphertext||!Q.nonce){Ke.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+Q);return}let pe=Object(Gd.decode)(Q.ciphertext);if(pe.length<this.nacl.secretbox.overheadLength){Ke.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${pe.length}`);return}let ye=Object(Gd.decode)(Q.nonce);if(ye.length<this.nacl.secretbox.nonceLength){Ke.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${ye.length}`);return}let Me=this.nacl.secretbox.open(pe,ye,this.key);if(Me===null){Ke.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(Je,ct)=>{if(Je){Ke.error(`Failed to make a request to the authEndpoint: ${ct}. Unable to fetch new key, so dropping encrypted event`);return}if(Me=this.nacl.secretbox.open(pe,ye,this.key),Me===null){Ke.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(z,this.getDataToEmit(Me))});return}this.emit(z,this.getDataToEmit(Me))}getDataToEmit(z){let Q=Object(Y5.decode)(z);try{return JSON.parse(Q)}catch{return Q}}}class Q5 extends ht{constructor(z,Q){super(),this.state="initialized",this.connection=null,this.key=z,this.options=Q,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var pe=Ft.getNetwork();pe.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),pe.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(z){return this.connection?this.connection.send(z):!1}send_event(z,Q,pe){return this.connection?this.connection.send_event(z,Q,pe):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var z=(Q,pe)=>{Q?this.runner=this.strategy.connect(0,z):pe.action==="error"?(this.emit("error",{type:"HandshakeError",error:pe.error}),this.timeline.error({handshakeError:pe.error})):(this.abortConnecting(),this.handshakeCallbacks[pe.action](pe))};this.runner=this.strategy.connect(0,z)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var z=this.abandonConnection();z.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(z){this.timeline.info({action:"retry",delay:z}),z>0&&this.emit("connecting_in",Math.round(z/1e3)),this.retryTimer=new ee(z||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new ee(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ee(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ee(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(z){return re({},z,{message:Q=>{this.resetActivityCheck(),this.emit("message",Q)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:Q=>{this.emit("error",Q)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(z){return re({},z,{connected:Q=>{this.activityTimeout=Math.min(this.options.activityTimeout,Q.activityTimeout,Q.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(Q.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let z=Q=>pe=>{pe.error&&this.emit("error",{type:"WebSocketError",error:pe.error}),Q(pe)};return{tls_only:z(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:z(()=>{this.disconnect()}),backoff:z(()=>{this.retryIn(1e3)}),retry:z(()=>{this.retryIn(0)})}}setConnection(z){this.connection=z;for(var Q in this.connectionCallbacks)this.connection.bind(Q,this.connectionCallbacks[Q]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var z in this.connectionCallbacks)this.connection.unbind(z,this.connectionCallbacks[z]);var Q=this.connection;return this.connection=null,Q}}updateState(z,Q){var pe=this.state;if(this.state=z,pe!==z){var ye=z;ye==="connected"&&(ye+=" with new socket ID "+Q.socket_id),Ke.debug("State changed",pe+" -> "+ye),this.timeline.info({state:z,params:Q}),this.emit("state_change",{previous:pe,current:z}),this.emit(z,Q)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class J5{constructor(){this.channels={}}add(z,Q){return this.channels[z]||(this.channels[z]=e$(z,Q)),this.channels[z]}all(){return le(this.channels)}find(z){return this.channels[z]}remove(z){var Q=this.channels[z];return delete this.channels[z],Q}disconnect(){se(this.channels,function(z){z.disconnect()})}}function e$(J,z){if(J.indexOf("private-encrypted-")===0){if(z.config.nacl)return Ta.createEncryptedChannel(J,z,z.config.nacl);let Q="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",pe=b.buildLogSuffix("encryptedChannelSupport");throw new F(`${Q}. ${pe}`)}else{if(J.indexOf("private-")===0)return Ta.createPrivateChannel(J,z);if(J.indexOf("presence-")===0)return Ta.createPresenceChannel(J,z);if(J.indexOf("#")===0)throw new k('Cannot create a channel with name "'+J+'".');return Ta.createChannel(J,z)}}var t$={createChannels(){return new J5},createConnectionManager(J,z){return new Q5(J,z)},createChannel(J,z){return new Hd(J,z)},createPrivateChannel(J,z){return new Wd(J,z)},createPresenceChannel(J,z){return new Z5(J,z)},createEncryptedChannel(J,z,Q){return new X5(J,z,Q)},createTimelineSender(J,z){return new W5(J,z)},createHandshake(J,z){return new H5(J,z)},createAssistantToTheTransportManager(J,z,Q){return new mu(J,z,Q)}},Ta=t$;class gh{constructor(z){this.options=z||{},this.livesLeft=this.options.lives||1/0}getAssistant(z){return Ta.createAssistantToTheTransportManager(this,z,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Cr{constructor(z,Q){this.strategies=z,this.loop=!!Q.loop,this.failFast=!!Q.failFast,this.timeout=Q.timeout,this.timeoutLimit=Q.timeoutLimit}isSupported(){return Be(this.strategies,oe.method("isSupported"))}connect(z,Q){var pe=this.strategies,ye=0,Me=this.timeout,Je=null,ct=(St,Gt)=>{Gt?Q(null,Gt):(ye=ye+1,this.loop&&(ye=ye%pe.length),ye<pe.length?(Me&&(Me=Me*2,this.timeoutLimit&&(Me=Math.min(Me,this.timeoutLimit))),Je=this.tryStrategy(pe[ye],z,{timeout:Me,failFast:this.failFast},ct)):Q(!0))};return Je=this.tryStrategy(pe[ye],z,{timeout:Me,failFast:this.failFast},ct),{abort:function(){Je.abort()},forceMinPriority:function(St){z=St,Je&&Je.forceMinPriority(St)}}}tryStrategy(z,Q,pe,ye){var Me=null,Je=null;return pe.timeout>0&&(Me=new ee(pe.timeout,function(){Je.abort(),ye(!0)})),Je=z.connect(Q,function(ct,St){ct&&Me&&Me.isRunning()&&!pe.failFast||(Me&&Me.ensureAborted(),ye(ct,St))}),{abort:function(){Me&&Me.ensureAborted(),Je.abort()},forceMinPriority:function(ct){Je.forceMinPriority(ct)}}}}class Kd{constructor(z){this.strategies=z}isSupported(){return Be(this.strategies,oe.method("isSupported"))}connect(z,Q){return n$(this.strategies,z,function(pe,ye){return function(Me,Je){if(ye[pe].error=Me,Me){o$(ye)&&Q(!0);return}ge(ye,function(ct){ct.forceMinPriority(Je.transport.priority)}),Q(null,Je)}})}}function n$(J,z,Q){var pe=ve(J,function(ye,Me,Je,ct){return ye.connect(z,Q(Me,ct))});return{abort:function(){ge(pe,a$)},forceMinPriority:function(ye){ge(pe,function(Me){Me.forceMinPriority(ye)})}}}function o$(J){return Fe(J,function(z){return!!z.error})}function a$(J){!J.error&&!J.aborted&&(J.abort(),J.aborted=!0)}class r${constructor(z,Q,pe){this.strategy=z,this.transports=Q,this.ttl=pe.ttl||1800*1e3,this.usingTLS=pe.useTLS,this.timeline=pe.timeline}isSupported(){return this.strategy.isSupported()}connect(z,Q){var pe=this.usingTLS,ye=l$(pe),Me=ye&&ye.cacheSkipCount?ye.cacheSkipCount:0,Je=[this.strategy];if(ye&&ye.timestamp+this.ttl>=oe.now()){var ct=this.transports[ye.transport];ct&&(["ws","wss"].includes(ye.transport)||Me>3?(this.timeline.info({cached:!0,transport:ye.transport,latency:ye.latency}),Je.push(new Cr([ct],{timeout:ye.latency*2+1e3,failFast:!0}))):Me++)}var St=oe.now(),Gt=Je.pop().connect(z,function ln(Pn,hu){Pn?(bh(pe),Je.length>0?(St=oe.now(),Gt=Je.pop().connect(z,ln)):Q(Pn)):(s$(pe,hu.transport.name,oe.now()-St,Me),Q(null,hu))});return{abort:function(){Gt.abort()},forceMinPriority:function(ln){z=ln,Gt&&Gt.forceMinPriority(ln)}}}}function Zd(J){return"pusherTransport"+(J?"TLS":"NonTLS")}function l$(J){var z=Ft.getLocalStorage();if(z)try{var Q=z[Zd(J)];if(Q)return JSON.parse(Q)}catch{bh(J)}return null}function s$(J,z,Q,pe){var ye=Ft.getLocalStorage();if(ye)try{ye[Zd(J)]=Ne({timestamp:oe.now(),transport:z,latency:Q,cacheSkipCount:pe})}catch{}}function bh(J){var z=Ft.getLocalStorage();if(z)try{delete z[Zd(J)]}catch{}}class pu{constructor(z,{delay:Q}){this.strategy=z,this.options={delay:Q}}isSupported(){return this.strategy.isSupported()}connect(z,Q){var pe=this.strategy,ye,Me=new ee(this.options.delay,function(){ye=pe.connect(z,Q)});return{abort:function(){Me.ensureAborted(),ye&&ye.abort()},forceMinPriority:function(Je){z=Je,ye&&ye.forceMinPriority(Je)}}}}class Ps{constructor(z,Q,pe){this.test=z,this.trueBranch=Q,this.falseBranch=pe}isSupported(){var z=this.test()?this.trueBranch:this.falseBranch;return z.isSupported()}connect(z,Q){var pe=this.test()?this.trueBranch:this.falseBranch;return pe.connect(z,Q)}}class i${constructor(z){this.strategy=z}isSupported(){return this.strategy.isSupported()}connect(z,Q){var pe=this.strategy.connect(z,function(ye,Me){Me&&pe.abort(),Q(ye,Me)});return pe}}function Ms(J){return function(){return J.isSupported()}}var u$=function(J,z,Q){var pe={};function ye(Eh,iC,uC,cC,dC){var Fh=Q(J,Eh,iC,uC,cC,dC);return pe[Eh]=Fh,Fh}var Me=Object.assign({},z,{hostNonTLS:J.wsHost+":"+J.wsPort,hostTLS:J.wsHost+":"+J.wssPort,httpPath:J.wsPath}),Je=Object.assign({},Me,{useTLS:!0}),ct=Object.assign({},z,{hostNonTLS:J.httpHost+":"+J.httpPort,hostTLS:J.httpHost+":"+J.httpsPort,httpPath:J.httpPath}),St={loop:!0,timeout:15e3,timeoutLimit:6e4},Gt=new gh({minPingDelay:1e4,maxPingDelay:J.activityTimeout}),ln=new gh({lives:2,minPingDelay:1e4,maxPingDelay:J.activityTimeout}),Pn=ye("ws","ws",3,Me,Gt),hu=ye("wss","ws",3,Je,Gt),oC=ye("sockjs","sockjs",1,ct),xh=ye("xhr_streaming","xhr_streaming",1,ct,ln),aC=ye("xdr_streaming","xdr_streaming",1,ct,ln),kh=ye("xhr_polling","xhr_polling",1,ct),rC=ye("xdr_polling","xdr_polling",1,ct),$h=new Cr([Pn],St),lC=new Cr([hu],St),sC=new Cr([oC],St),Ch=new Cr([new Ps(Ms(xh),xh,aC)],St),Sh=new Cr([new Ps(Ms(kh),kh,rC)],St),Th=new Cr([new Ps(Ms(Ch),new Kd([Ch,new pu(Sh,{delay:4e3})]),Sh)],St),Jd=new Ps(Ms(Th),Th,sC),em;return z.useTLS?em=new Kd([$h,new pu(Jd,{delay:2e3})]):em=new Kd([$h,new pu(lC,{delay:2e3}),new pu(Jd,{delay:5e3})]),new r$(new i$(new Ps(Ms(Pn),em,Jd)),pe,{ttl:18e5,timeline:z.timeline,useTLS:z.useTLS})},c$=u$,d$=function(){var J=this;J.timeline.info(J.buildTimelineMessage({transport:J.name+(J.options.useTLS?"s":"")})),J.hooks.isInitialized()?J.changeState("initialized"):J.hooks.file?(J.changeState("initializing"),f.load(J.hooks.file,{useTLS:J.options.useTLS},function(z,Q){J.hooks.isInitialized()?(J.changeState("initialized"),Q(!0)):(z&&J.onError(z),J.onClose(),Q(!1))})):J.onClose()},m$={getRequest:function(J){var z=new window.XDomainRequest;return z.ontimeout=function(){J.emit("error",new x),J.close()},z.onerror=function(Q){J.emit("error",Q),J.close()},z.onprogress=function(){z.responseText&&z.responseText.length>0&&J.onChunk(200,z.responseText)},z.onload=function(){z.responseText&&z.responseText.length>0&&J.onChunk(200,z.responseText),J.emit("finished",200),J.close()},z},abortRequest:function(J){J.ontimeout=J.onerror=J.onprogress=J.onload=null,J.abort()}},f$=m$;const p$=256*1024;class v$ extends ht{constructor(z,Q,pe){super(),this.hooks=z,this.method=Q,this.url=pe}start(z){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},Ft.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(z)}close(){this.unloader&&(Ft.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(z,Q){for(;;){var pe=this.advanceBuffer(Q);if(pe)this.emit("chunk",{status:z,data:pe});else break}this.isBufferTooLong(Q)&&this.emit("buffer_too_long")}advanceBuffer(z){var Q=z.slice(this.position),pe=Q.indexOf(`
`);return pe!==-1?(this.position+=pe+1,Q.slice(0,pe)):null}isBufferTooLong(z){return this.position===z.length&&z.length>p$}}var Yd;(function(J){J[J.CONNECTING=0]="CONNECTING",J[J.OPEN=1]="OPEN",J[J.CLOSED=3]="CLOSED"})(Yd||(Yd={}));var Sr=Yd,h$=1;class g${constructor(z,Q){this.hooks=z,this.session=_h(1e3)+"/"+w$(8),this.location=b$(Q),this.readyState=Sr.CONNECTING,this.openStream()}send(z){return this.sendRaw(JSON.stringify([z]))}ping(){this.hooks.sendHeartbeat(this)}close(z,Q){this.onClose(z,Q,!0)}sendRaw(z){if(this.readyState===Sr.OPEN)try{return Ft.createSocketRequest("POST",yh(y$(this.location,this.session))).start(z),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(z,Q,pe){this.closeStream(),this.readyState=Sr.CLOSED,this.onclose&&this.onclose({code:z,reason:Q,wasClean:pe})}onChunk(z){if(z.status===200){this.readyState===Sr.OPEN&&this.onActivity();var Q,pe=z.data.slice(0,1);switch(pe){case"o":Q=JSON.parse(z.data.slice(1)||"{}"),this.onOpen(Q);break;case"a":Q=JSON.parse(z.data.slice(1)||"[]");for(var ye=0;ye<Q.length;ye++)this.onEvent(Q[ye]);break;case"m":Q=JSON.parse(z.data.slice(1)||"null"),this.onEvent(Q);break;case"h":this.hooks.onHeartbeat(this);break;case"c":Q=JSON.parse(z.data.slice(1)||"[]"),this.onClose(Q[0],Q[1],!0);break}}}onOpen(z){this.readyState===Sr.CONNECTING?(z&&z.hostname&&(this.location.base=_$(this.location.base,z.hostname)),this.readyState=Sr.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(z){this.readyState===Sr.OPEN&&this.onmessage&&this.onmessage({data:z})}onActivity(){this.onactivity&&this.onactivity()}onError(z){this.onerror&&this.onerror(z)}openStream(){this.stream=Ft.createSocketRequest("POST",yh(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",z=>{this.onChunk(z)}),this.stream.bind("finished",z=>{this.hooks.onFinished(this,z)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(z){oe.defer(()=>{this.onError(z),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function b$(J){var z=/([^\?]*)\/*(\??.*)/.exec(J);return{base:z[1],queryString:z[2]}}function y$(J,z){return J.base+"/"+z+"/xhr_send"}function yh(J){var z=J.indexOf("?")===-1?"?":"&";return J+z+"t="+ +new Date+"&n="+h$++}function _$(J,z){var Q=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(J);return Q[1]+z+Q[3]}function _h(J){return Ft.randomInt(J)}function w$(J){for(var z=[],Q=0;Q<J;Q++)z.push(_h(32).toString(32));return z.join("")}var I$=g$,x$={getReceiveURL:function(J,z){return J.base+"/"+z+"/xhr_streaming"+J.queryString},onHeartbeat:function(J){J.sendRaw("[]")},sendHeartbeat:function(J){J.sendRaw("[]")},onFinished:function(J,z){J.onClose(1006,"Connection interrupted ("+z+")",!1)}},k$=x$,$$={getReceiveURL:function(J,z){return J.base+"/"+z+"/xhr"+J.queryString},onHeartbeat:function(){},sendHeartbeat:function(J){J.sendRaw("[]")},onFinished:function(J,z){z===200?J.reconnect():J.onClose(1006,"Connection interrupted ("+z+")",!1)}},C$=$$,S$={getRequest:function(J){var z=Ft.getXHRAPI(),Q=new z;return Q.onreadystatechange=Q.onprogress=function(){switch(Q.readyState){case 3:Q.responseText&&Q.responseText.length>0&&J.onChunk(Q.status,Q.responseText);break;case 4:Q.responseText&&Q.responseText.length>0&&J.onChunk(Q.status,Q.responseText),J.emit("finished",Q.status),J.close();break}},Q},abortRequest:function(J){J.onreadystatechange=null,J.abort()}},T$=S$,E$={createStreamingSocket(J){return this.createSocket(k$,J)},createPollingSocket(J){return this.createSocket(C$,J)},createSocket(J,z){return new I$(J,z)},createXHR(J,z){return this.createRequest(T$,J,z)},createRequest(J,z,Q){return new v$(J,z,Q)}},wh=E$;wh.createXDR=function(J,z){return this.createRequest(f$,J,z)};var F$=wh,A$={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:s,DependenciesReceivers:m,getDefaultStrategy:c$,Transports:Ds,transportConnectionInitializer:d$,HTTPFactory:F$,TimelineTransport:yt,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(J){window.Pusher=J;var z=()=>{this.onDocumentBody(J.ready)};window.JSON?z():f.load("json2",{},z)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:B,jsonp:De}},onDocumentBody(J){document.body?J():setTimeout(()=>{this.onDocumentBody(J)},0)},createJSONPRequest(J,z){return new dt(J,z)},createScriptRequest(J){return new at(J)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var J=this.getXHRAPI();return new J},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return Os},createWebSocket(J){var z=this.getWebSocketAPI();return new z(J)},createSocketRequest(J,z){if(this.isXHRSupported())return this.HTTPFactory.createXHR(J,z);if(this.isXDRSupported(z.indexOf("https:")===0))return this.HTTPFactory.createXDR(J,z);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var J=this.getXHRAPI();return!!J&&new J().withCredentials!==void 0},isXDRSupported(J){var z=J?"https:":"http:",Q=this.getProtocol();return!!window.XDomainRequest&&Q===z},addUnloadListener(J){window.addEventListener!==void 0?window.addEventListener("unload",J,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",J)},removeUnloadListener(J){window.addEventListener!==void 0?window.removeEventListener("unload",J,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",J)},randomInt(J){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*J)}},Ft=A$,Xd;(function(J){J[J.ERROR=3]="ERROR",J[J.INFO=6]="INFO",J[J.DEBUG=7]="DEBUG"})(Xd||(Xd={}));var vu=Xd;class R${constructor(z,Q,pe){this.key=z,this.session=Q,this.events=[],this.options=pe||{},this.sent=0,this.uniqueID=0}log(z,Q){z<=this.options.level&&(this.events.push(re({},Q,{timestamp:oe.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(z){this.log(vu.ERROR,z)}info(z){this.log(vu.INFO,z)}debug(z){this.log(vu.DEBUG,z)}isEmpty(){return this.events.length===0}send(z,Q){var pe=re({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],z(pe,(ye,Me)=>{ye||this.sent++,Q&&Q(ye,Me)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class D${constructor(z,Q,pe,ye){this.name=z,this.priority=Q,this.transport=pe,this.options=ye||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(z,Q){if(this.isSupported()){if(this.priority<z)return Ih(new $,Q)}else return Ih(new S,Q);var pe=!1,ye=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),Me=null,Je=function(){ye.unbind("initialized",Je),ye.connect()},ct=function(){Me=Ta.createHandshake(ye,function(Pn){pe=!0,ln(),Q(null,Pn)})},St=function(Pn){ln(),Q(Pn)},Gt=function(){ln();var Pn;Pn=Ne(ye),Q(new C(Pn))},ln=function(){ye.unbind("initialized",Je),ye.unbind("open",ct),ye.unbind("error",St),ye.unbind("closed",Gt)};return ye.bind("initialized",Je),ye.bind("open",ct),ye.bind("error",St),ye.bind("closed",Gt),ye.initialize(),{abort:()=>{pe||(ln(),Me?Me.close():ye.close())},forceMinPriority:Pn=>{pe||this.priority<Pn&&(Me?Me.close():ye.close())}}}}function Ih(J,z){return oe.defer(function(){z(J)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:O$}=Ft;var P$=function(J,z,Q,pe,ye,Me){var Je=O$[Q];if(!Je)throw new T(Q);var ct=(!J.enabledTransports||ae(J.enabledTransports,z)!==-1)&&(!J.disabledTransports||ae(J.disabledTransports,z)===-1),St;return ct?(ye=Object.assign({ignoreNullOrigin:J.ignoreNullOrigin},ye),St=new D$(z,pe,Me?Me.getAssistant(Je):Je,ye)):St=M$,St},M$={isSupported:function(){return!1},connect:function(J,z){var Q=oe.defer(function(){z(new S)});return{abort:function(){Q.ensureAborted()},forceMinPriority:function(){}}}};function B$(J){if(J==null)throw"You must pass an options object";if(J.cluster==null)throw"Options object must provide a cluster";"disableStats"in J&&Ke.warn("The disableStats option is deprecated in favor of enableStats")}const N$=(J,z)=>{var Q="socket_id="+encodeURIComponent(J.socketId);for(var pe in z.params)Q+="&"+encodeURIComponent(pe)+"="+encodeURIComponent(z.params[pe]);if(z.paramsProvider!=null){let ye=z.paramsProvider();for(var pe in ye)Q+="&"+encodeURIComponent(pe)+"="+encodeURIComponent(ye[pe])}return Q};var V$=J=>{if(typeof Ft.getAuthorizers()[J.transport]>"u")throw`'${J.transport}' is not a recognized auth transport`;return(z,Q)=>{const pe=N$(z,J);Ft.getAuthorizers()[J.transport](Ft,pe,J,I.UserAuthentication,Q)}};const L$=(J,z)=>{var Q="socket_id="+encodeURIComponent(J.socketId);Q+="&channel_name="+encodeURIComponent(J.channelName);for(var pe in z.params)Q+="&"+encodeURIComponent(pe)+"="+encodeURIComponent(z.params[pe]);if(z.paramsProvider!=null){let ye=z.paramsProvider();for(var pe in ye)Q+="&"+encodeURIComponent(pe)+"="+encodeURIComponent(ye[pe])}return Q};var q$=J=>{if(typeof Ft.getAuthorizers()[J.transport]>"u")throw`'${J.transport}' is not a recognized auth transport`;return(z,Q)=>{const pe=L$(z,J);Ft.getAuthorizers()[J.transport](Ft,pe,J,I.ChannelAuthorization,Q)}};const U$=(J,z,Q)=>{const pe={authTransport:z.transport,authEndpoint:z.endpoint,auth:{params:z.params,headers:z.headers}};return(ye,Me)=>{const Je=J.channel(ye.channelName);Q(Je,pe).authorize(ye.socketId,Me)}};function j$(J,z){let Q={activityTimeout:J.activityTimeout||u.activityTimeout,cluster:J.cluster,httpPath:J.httpPath||u.httpPath,httpPort:J.httpPort||u.httpPort,httpsPort:J.httpsPort||u.httpsPort,pongTimeout:J.pongTimeout||u.pongTimeout,statsHost:J.statsHost||u.stats_host,unavailableTimeout:J.unavailableTimeout||u.unavailableTimeout,wsPath:J.wsPath||u.wsPath,wsPort:J.wsPort||u.wsPort,wssPort:J.wssPort||u.wssPort,enableStats:K$(J),httpHost:z$(J),useTLS:G$(J),wsHost:H$(J),userAuthenticator:Z$(J),channelAuthorizer:X$(J,z)};return"disabledTransports"in J&&(Q.disabledTransports=J.disabledTransports),"enabledTransports"in J&&(Q.enabledTransports=J.enabledTransports),"ignoreNullOrigin"in J&&(Q.ignoreNullOrigin=J.ignoreNullOrigin),"timelineParams"in J&&(Q.timelineParams=J.timelineParams),"nacl"in J&&(Q.nacl=J.nacl),Q}function z$(J){return J.httpHost?J.httpHost:J.cluster?`sockjs-${J.cluster}.pusher.com`:u.httpHost}function H$(J){return J.wsHost?J.wsHost:W$(J.cluster)}function W$(J){return`ws-${J}.pusher.com`}function G$(J){return Ft.getProtocol()==="https:"?!0:J.forceTLS!==!1}function K$(J){return"enableStats"in J?J.enableStats:"disableStats"in J?!J.disableStats:!1}function Z$(J){const z=Object.assign(Object.assign({},u.userAuthentication),J.userAuthentication);return"customHandler"in z&&z.customHandler!=null?z.customHandler:V$(z)}function Y$(J,z){let Q;return"channelAuthorization"in J?Q=Object.assign(Object.assign({},u.channelAuthorization),J.channelAuthorization):(Q={transport:J.authTransport||u.authTransport,endpoint:J.authEndpoint||u.authEndpoint},"auth"in J&&("params"in J.auth&&(Q.params=J.auth.params),"headers"in J.auth&&(Q.headers=J.auth.headers)),"authorizer"in J&&(Q.customHandler=U$(z,Q,J.authorizer))),Q}function X$(J,z){const Q=Y$(J,z);return"customHandler"in Q&&Q.customHandler!=null?Q.customHandler:q$(Q)}class Q$ extends ht{constructor(z){super(function(Q,pe){Ke.debug(`No callbacks on watchlist events for ${Q}`)}),this.pusher=z,this.bindWatchlistInternalEvent()}handleEvent(z){z.data.events.forEach(Q=>{this.emit(Q.name,Q)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",z=>{var Q=z.event;Q==="pusher_internal:watchlist_events"&&this.handleEvent(z)})}}function J$(){let J,z;return{promise:new Promise((pe,ye)=>{J=pe,z=ye}),resolve:J,reject:z}}var eC=J$;class tC extends ht{constructor(z){super(function(Q,pe){Ke.debug("No callbacks on user for "+Q)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(Q,pe)=>{if(Q){Ke.warn(`Error during signin: ${Q}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:pe.auth,user_data:pe.user_data})},this.pusher=z,this.pusher.connection.bind("state_change",({previous:Q,current:pe})=>{Q!=="connected"&&pe==="connected"&&this._signin(),Q==="connected"&&pe!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Q$(z),this.pusher.connection.bind("message",Q=>{var pe=Q.event;pe==="pusher:signin_success"&&this._onSigninSuccess(Q.data),this.serverToUserChannel&&this.serverToUserChannel.name===Q.channel&&this.serverToUserChannel.handleEvent(Q)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(z){try{this.user_data=JSON.parse(z.user_data)}catch{Ke.error(`Failed parsing user data after signin: ${z.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Ke.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const z=Q=>{Q.subscriptionPending&&Q.subscriptionCancelled?Q.reinstateSubscription():!Q.subscriptionPending&&this.pusher.connection.state==="connected"&&Q.subscribe()};this.serverToUserChannel=new Hd(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((Q,pe)=>{Q.indexOf("pusher_internal:")===0||Q.indexOf("pusher:")===0||this.emit(Q,pe)}),z(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:z,resolve:Q,reject:pe}=eC();z.done=!1;const ye=()=>{z.done=!0};z.then(ye).catch(ye),this.signinDonePromise=z,this._signinDoneResolve=Q}}class Kn{static ready(){Kn.isReady=!0;for(var z=0,Q=Kn.instances.length;z<Q;z++)Kn.instances[z].connect()}static getClientFeatures(){return xe(Ce({ws:Ft.Transports.ws},function(z){return z.isSupported({})}))}constructor(z,Q){nC(z),B$(Q),this.key=z,this.config=j$(Q,this),this.channels=Ta.createChannels(),this.global_emitter=new ht,this.sessionID=Ft.randomInt(1e9),this.timeline=new R$(this.key,this.sessionID,{cluster:this.config.cluster,features:Kn.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:vu.INFO,version:u.VERSION}),this.config.enableStats&&(this.timelineSender=Ta.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Ft.TimelineTransport.name}));var pe=ye=>Ft.getDefaultStrategy(this.config,ye,P$);this.connection=Ta.createConnectionManager(this.key,{getStrategy:pe,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",ye=>{var Me=ye.event,Je=Me.indexOf("pusher_internal:")===0;if(ye.channel){var ct=this.channel(ye.channel);ct&&ct.handleEvent(ye)}Je||this.global_emitter.emit(ye.event,ye.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",ye=>{Ke.warn(ye)}),Kn.instances.push(this),this.timeline.info({instances:Kn.instances.length}),this.user=new tC(this),Kn.isReady&&this.connect()}channel(z){return this.channels.find(z)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var z=this.connection.isUsingTLS(),Q=this.timelineSender;this.timelineSenderTimer=new ce(6e4,function(){Q.send(z)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(z,Q,pe){return this.global_emitter.bind(z,Q,pe),this}unbind(z,Q,pe){return this.global_emitter.unbind(z,Q,pe),this}bind_global(z){return this.global_emitter.bind_global(z),this}unbind_global(z){return this.global_emitter.unbind_global(z),this}unbind_all(z){return this.global_emitter.unbind_all(),this}subscribeAll(){var z;for(z in this.channels.channels)this.channels.channels.hasOwnProperty(z)&&this.subscribe(z)}subscribe(z){var Q=this.channels.add(z,this);return Q.subscriptionPending&&Q.subscriptionCancelled?Q.reinstateSubscription():!Q.subscriptionPending&&this.connection.state==="connected"&&Q.subscribe(),Q}unsubscribe(z){var Q=this.channels.find(z);Q&&Q.subscriptionPending?Q.cancelSubscription():(Q=this.channels.remove(z),Q&&Q.subscribed&&Q.unsubscribe())}send_event(z,Q,pe){return this.connection.send_event(z,Q,pe)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Kn.instances=[],Kn.isReady=!1,Kn.logToConsole=!1,Kn.Runtime=Ft,Kn.ScriptReceivers=Ft.ScriptReceivers,Kn.DependenciesReceivers=Ft.DependenciesReceivers,Kn.auth_callbacks=Ft.auth_callbacks;var Qd=o.default=Kn;function nC(J){if(J==null)throw"You must pass your app key when you instantiate Pusher."}Ft.setup(Kn)}])})})(y2);var R7=y2.exports;const D7=Rt(R7);window.Pusher=D7;class O7{constructor(t){this.config=t,this.hasDriver()&&this.configure()}configure(){window.Echo=new A7(this.getDriverConfig())}getDriverConfig(){return{broadcaster:this.config.default,...this.getConfigByDriver(this.config.default)}}hasDriver(){return this.config.default&&this.config.default!=="log"&&this.config.default!=="null"}getConfigByDriver(t){if(t==="pusher")return{key:this.config.connection.key,cluster:this.config.connection.options.cluster,encrypted:this.config.connection.options.encrypted,authorizer:(n,o)=>({authorize:(a,r)=>{Innoclapps.request().post("/broadcasting/auth",{socket_id:a,channel_name:n.name}).then(s=>{r(!1,s.data)}).catch(s=>{r(!0,s)})}})}}}function _2(e,t){return function(){return e.apply(t,arguments)}}const{toString:P7}=Object.prototype,{getPrototypeOf:Vp}=Object,ed=(e=>t=>{const n=P7.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sa=e=>(e=e.toLowerCase(),t=>ed(t)===e),td=e=>t=>typeof t===e,{isArray:ds}=Array,di=td("undefined");function M7(e){return e!==null&&!di(e)&&e.constructor!==null&&!di(e.constructor)&&$o(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const w2=sa("ArrayBuffer");function B7(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&w2(e.buffer),t}const N7=td("string"),$o=td("function"),I2=td("number"),nd=e=>e!==null&&typeof e=="object",V7=e=>e===!0||e===!1,ju=e=>{if(ed(e)!=="object")return!1;const t=Vp(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},L7=sa("Date"),q7=sa("File"),U7=sa("Blob"),j7=sa("FileList"),z7=e=>nd(e)&&$o(e.pipe),H7=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||$o(e.append)&&((t=ed(e))==="formdata"||t==="object"&&$o(e.toString)&&e.toString()==="[object FormData]"))},W7=sa("URLSearchParams"),[G7,K7,Z7,Y7]=["ReadableStream","Request","Response","Headers"].map(sa),X7=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,a;if(typeof e!="object"&&(e=[e]),ds(e))for(o=0,a=e.length;o<a;o++)t.call(null,e[o],o,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let i;for(o=0;o<s;o++)i=r[o],t.call(null,e[i],i,e)}}function x2(e,t){t=t.toLowerCase();const n=Object.keys(e);let o=n.length,a;for(;o-- >0;)if(a=n[o],t===a.toLowerCase())return a;return null}const qr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,k2=e=>!di(e)&&e!==qr;function Ef(){const{caseless:e}=k2(this)&&this||{},t={},n=(o,a)=>{const r=e&&x2(t,a)||a;ju(t[r])&&ju(o)?t[r]=Ef(t[r],o):ju(o)?t[r]=Ef({},o):ds(o)?t[r]=o.slice():t[r]=o};for(let o=0,a=arguments.length;o<a;o++)arguments[o]&&Mi(arguments[o],n);return t}const Q7=(e,t,n,{allOwnKeys:o}={})=>(Mi(t,(a,r)=>{n&&$o(a)?e[r]=_2(a,n):e[r]=a},{allOwnKeys:o}),e),J7=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),e9=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},t9=(e,t,n,o)=>{let a,r,s;const i={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)s=a[r],(!o||o(s,e,t))&&!i[s]&&(t[s]=e[s],i[s]=!0);e=n!==!1&&Vp(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},n9=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},o9=e=>{if(!e)return null;if(ds(e))return e;let t=e.length;if(!I2(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},a9=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Vp(Uint8Array)),r9=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let a;for(;(a=o.next())&&!a.done;){const r=a.value;t.call(e,r[0],r[1])}},l9=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},s9=sa("HTMLFormElement"),i9=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,a){return o.toUpperCase()+a}),Fg=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),u9=sa("RegExp"),$2=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};Mi(n,(a,r)=>{let s;(s=t(a,r,e))!==!1&&(o[r]=s||a)}),Object.defineProperties(e,o)},c9=e=>{$2(e,(t,n)=>{if($o(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if($o(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},d9=(e,t)=>{const n={},o=a=>{a.forEach(r=>{n[r]=!0})};return ds(e)?o(e):o(String(e).split(t)),n},m9=()=>{},f9=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,gm="abcdefghijklmnopqrstuvwxyz",Ag="0123456789",C2={DIGIT:Ag,ALPHA:gm,ALPHA_DIGIT:gm+gm.toUpperCase()+Ag},p9=(e=16,t=C2.ALPHA_DIGIT)=>{let n="";const{length:o}=t;for(;e--;)n+=t[Math.random()*o|0];return n};function v9(e){return!!(e&&$o(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const h9=e=>{const t=new Array(10),n=(o,a)=>{if(nd(o)){if(t.indexOf(o)>=0)return;if(!("toJSON"in o)){t[a]=o;const r=ds(o)?[]:{};return Mi(o,(s,i)=>{const u=n(s,a+1);!di(u)&&(r[i]=u)}),t[a]=void 0,r}}return o};return n(e,0)},g9=sa("AsyncFunction"),b9=e=>e&&(nd(e)||$o(e))&&$o(e.then)&&$o(e.catch),S2=((e,t)=>e?setImmediate:t?((n,o)=>(qr.addEventListener("message",({source:a,data:r})=>{a===qr&&r===n&&o.length&&o.shift()()},!1),a=>{o.push(a),qr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$o(qr.postMessage)),y9=typeof queueMicrotask<"u"?queueMicrotask.bind(qr):typeof process<"u"&&process.nextTick||S2,Re={isArray:ds,isArrayBuffer:w2,isBuffer:M7,isFormData:H7,isArrayBufferView:B7,isString:N7,isNumber:I2,isBoolean:V7,isObject:nd,isPlainObject:ju,isReadableStream:G7,isRequest:K7,isResponse:Z7,isHeaders:Y7,isUndefined:di,isDate:L7,isFile:q7,isBlob:U7,isRegExp:u9,isFunction:$o,isStream:z7,isURLSearchParams:W7,isTypedArray:a9,isFileList:j7,forEach:Mi,merge:Ef,extend:Q7,trim:X7,stripBOM:J7,inherits:e9,toFlatObject:t9,kindOf:ed,kindOfTest:sa,endsWith:n9,toArray:o9,forEachEntry:r9,matchAll:l9,isHTMLForm:s9,hasOwnProperty:Fg,hasOwnProp:Fg,reduceDescriptors:$2,freezeMethods:c9,toObjectSet:d9,toCamelCase:i9,noop:m9,toFiniteNumber:f9,findKey:x2,global:qr,isContextDefined:k2,ALPHABET:C2,generateString:p9,isSpecCompliantForm:v9,toJSONObject:h9,isAsyncFn:g9,isThenable:b9,setImmediate:S2,asap:y9};function At(e,t,n,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),a&&(this.response=a,this.status=a.status?a.status:null)}Re.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Re.toJSONObject(this.config),code:this.code,status:this.status}}});const T2=At.prototype,E2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{E2[e]={value:e}});Object.defineProperties(At,E2);Object.defineProperty(T2,"isAxiosError",{value:!0});At.from=(e,t,n,o,a,r)=>{const s=Object.create(T2);return Re.toFlatObject(e,s,function(u){return u!==Error.prototype},i=>i!=="isAxiosError"),At.call(s,e.message,t,n,o,a),s.cause=e,s.name=e.name,r&&Object.assign(s,r),s};const _9=null;function Ff(e){return Re.isPlainObject(e)||Re.isArray(e)}function F2(e){return Re.endsWith(e,"[]")?e.slice(0,-2):e}function Rg(e,t,n){return e?e.concat(t).map(function(a,r){return a=F2(a),!n&&r?"["+a+"]":a}).join(n?".":""):t}function w9(e){return Re.isArray(e)&&!e.some(Ff)}const I9=Re.toFlatObject(Re,{},null,function(t){return/^is[A-Z]/.test(t)});function od(e,t,n){if(!Re.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Re.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,w){return!Re.isUndefined(w[I])});const o=n.metaTokens,a=n.visitor||m,r=n.dots,s=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Re.isSpecCompliantForm(t);if(!Re.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(Re.isDate(b))return b.toISOString();if(!u&&Re.isBlob(b))throw new At("Blob is not supported. Use a Buffer instead.");return Re.isArrayBuffer(b)||Re.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,I,w){let k=b;if(b&&!w&&typeof b=="object"){if(Re.endsWith(I,"{}"))I=o?I:I.slice(0,-2),b=JSON.stringify(b);else if(Re.isArray(b)&&w9(b)||(Re.isFileList(b)||Re.endsWith(I,"[]"))&&(k=Re.toArray(b)))return I=F2(I),k.forEach(function($,C){!(Re.isUndefined($)||$===null)&&t.append(s===!0?Rg([I],C,r):s===null?I:I+"[]",d($))}),!1}return Ff(b)?!0:(t.append(Rg(w,I,r),d(b)),!1)}const f=[],h=Object.assign(I9,{defaultVisitor:m,convertValue:d,isVisitable:Ff});function y(b,I){if(!Re.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+I.join("."));f.push(b),Re.forEach(b,function(k,x){(!(Re.isUndefined(k)||k===null)&&a.call(t,k,Re.isString(x)?x.trim():x,I,h))===!0&&y(k,I?I.concat(x):[x])}),f.pop()}}if(!Re.isObject(e))throw new TypeError("data must be an object");return y(e),t}function Dg(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Lp(e,t){this._pairs=[],e&&od(e,this,t)}const A2=Lp.prototype;A2.append=function(t,n){this._pairs.push([t,n])};A2.toString=function(t){const n=t?function(o){return t.call(this,o,Dg)}:Dg;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function x9(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R2(e,t,n){if(!t)return e;const o=n&&n.encode||x9,a=n&&n.serialize;let r;if(a?r=a(t,n):r=Re.isURLSearchParams(t)?t.toString():new Lp(t,n).toString(o),r){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class Og{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Re.forEach(this.handlers,function(o){o!==null&&t(o)})}}const D2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},k9=typeof URLSearchParams<"u"?URLSearchParams:Lp,$9=typeof FormData<"u"?FormData:null,C9=typeof Blob<"u"?Blob:null,S9={isBrowser:!0,classes:{URLSearchParams:k9,FormData:$9,Blob:C9},protocols:["http","https","file","blob","url","data"]},qp=typeof window<"u"&&typeof document<"u",Af=typeof navigator=="object"&&navigator||void 0,T9=qp&&(!Af||["ReactNative","NativeScript","NS"].indexOf(Af.product)<0),E9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",F9=qp&&window.location.href||"http://localhost",A9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qp,hasStandardBrowserEnv:T9,hasStandardBrowserWebWorkerEnv:E9,navigator:Af,origin:F9},Symbol.toStringTag,{value:"Module"})),po={...A9,...S9};function R9(e,t){return od(e,new po.classes.URLSearchParams,Object.assign({visitor:function(n,o,a,r){return po.isNode&&Re.isBuffer(n)?(this.append(o,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function D9(e){return Re.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function O9(e){const t={},n=Object.keys(e);let o;const a=n.length;let r;for(o=0;o<a;o++)r=n[o],t[r]=e[r];return t}function O2(e){function t(n,o,a,r){let s=n[r++];if(s==="__proto__")return!0;const i=Number.isFinite(+s),u=r>=n.length;return s=!s&&Re.isArray(a)?a.length:s,u?(Re.hasOwnProp(a,s)?a[s]=[a[s],o]:a[s]=o,!i):((!a[s]||!Re.isObject(a[s]))&&(a[s]=[]),t(n,o,a[s],r)&&Re.isArray(a[s])&&(a[s]=O9(a[s])),!i)}if(Re.isFormData(e)&&Re.isFunction(e.entries)){const n={};return Re.forEachEntry(e,(o,a)=>{t(D9(o),a,n,0)}),n}return null}function P9(e,t,n){if(Re.isString(e))try{return(t||JSON.parse)(e),Re.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const Bi={transitional:D2,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",a=o.indexOf("application/json")>-1,r=Re.isObject(t);if(r&&Re.isHTMLForm(t)&&(t=new FormData(t)),Re.isFormData(t))return a?JSON.stringify(O2(t)):t;if(Re.isArrayBuffer(t)||Re.isBuffer(t)||Re.isStream(t)||Re.isFile(t)||Re.isBlob(t)||Re.isReadableStream(t))return t;if(Re.isArrayBufferView(t))return t.buffer;if(Re.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(r){if(o.indexOf("application/x-www-form-urlencoded")>-1)return R9(t,this.formSerializer).toString();if((i=Re.isFileList(t))||o.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return od(i?{"files[]":t}:t,u&&new u,this.formSerializer)}}return r||a?(n.setContentType("application/json",!1),P9(t)):t}],transformResponse:[function(t){const n=this.transitional||Bi.transitional,o=n&&n.forcedJSONParsing,a=this.responseType==="json";if(Re.isResponse(t)||Re.isReadableStream(t))return t;if(t&&Re.isString(t)&&(o&&!this.responseType||a)){const s=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(i){if(s)throw i.name==="SyntaxError"?At.from(i,At.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:po.classes.FormData,Blob:po.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Re.forEach(["delete","get","head","post","put","patch"],e=>{Bi.headers[e]={}});const M9=Re.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),B9=e=>{const t={};let n,o,a;return e&&e.split(`
`).forEach(function(s){a=s.indexOf(":"),n=s.substring(0,a).trim().toLowerCase(),o=s.substring(a+1).trim(),!(!n||t[n]&&M9[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},Pg=Symbol("internals");function qs(e){return e&&String(e).trim().toLowerCase()}function zu(e){return e===!1||e==null?e:Re.isArray(e)?e.map(zu):String(e)}function N9(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const V9=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function bm(e,t,n,o,a){if(Re.isFunction(o))return o.call(this,t,n);if(a&&(t=n),!!Re.isString(t)){if(Re.isString(o))return t.indexOf(o)!==-1;if(Re.isRegExp(o))return o.test(t)}}function L9(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function q9(e,t){const n=Re.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(a,r,s){return this[o].call(this,t,a,r,s)},configurable:!0})})}class vo{constructor(t){t&&this.set(t)}set(t,n,o){const a=this;function r(i,u,d){const m=qs(u);if(!m)throw new Error("header name must be a non-empty string");const f=Re.findKey(a,m);(!f||a[f]===void 0||d===!0||d===void 0&&a[f]!==!1)&&(a[f||u]=zu(i))}const s=(i,u)=>Re.forEach(i,(d,m)=>r(d,m,u));if(Re.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(Re.isString(t)&&(t=t.trim())&&!V9(t))s(B9(t),n);else if(Re.isHeaders(t))for(const[i,u]of t.entries())r(u,i,o);else t!=null&&r(n,t,o);return this}get(t,n){if(t=qs(t),t){const o=Re.findKey(this,t);if(o){const a=this[o];if(!n)return a;if(n===!0)return N9(a);if(Re.isFunction(n))return n.call(this,a,o);if(Re.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=qs(t),t){const o=Re.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||bm(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let a=!1;function r(s){if(s=qs(s),s){const i=Re.findKey(o,s);i&&(!n||bm(o,o[i],i,n))&&(delete o[i],a=!0)}}return Re.isArray(t)?t.forEach(r):r(t),a}clear(t){const n=Object.keys(this);let o=n.length,a=!1;for(;o--;){const r=n[o];(!t||bm(this,this[r],r,t,!0))&&(delete this[r],a=!0)}return a}normalize(t){const n=this,o={};return Re.forEach(this,(a,r)=>{const s=Re.findKey(o,r);if(s){n[s]=zu(a),delete n[r];return}const i=t?L9(r):String(r).trim();i!==r&&delete n[r],n[i]=zu(a),o[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Re.forEach(this,(o,a)=>{o!=null&&o!==!1&&(n[a]=t&&Re.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(a=>o.set(a)),o}static accessor(t){const o=(this[Pg]=this[Pg]={accessors:{}}).accessors,a=this.prototype;function r(s){const i=qs(s);o[i]||(q9(a,s),o[i]=!0)}return Re.isArray(t)?t.forEach(r):r(t),this}}vo.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Re.reduceDescriptors(vo.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});Re.freezeMethods(vo);function ym(e,t){const n=this||Bi,o=t||n,a=vo.from(o.headers);let r=o.data;return Re.forEach(e,function(i){r=i.call(n,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function P2(e){return!!(e&&e.__CANCEL__)}function ms(e,t,n){At.call(this,e??"canceled",At.ERR_CANCELED,t,n),this.name="CanceledError"}Re.inherits(ms,At,{__CANCEL__:!0});function M2(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new At("Request failed with status code "+n.status,[At.ERR_BAD_REQUEST,At.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function U9(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function j9(e,t){e=e||10;const n=new Array(e),o=new Array(e);let a=0,r=0,s;return t=t!==void 0?t:1e3,function(u){const d=Date.now(),m=o[r];s||(s=d),n[a]=u,o[a]=d;let f=r,h=0;for(;f!==a;)h+=n[f++],f=f%e;if(a=(a+1)%e,a===r&&(r=(r+1)%e),d-s<t)return;const y=m&&d-m;return y?Math.round(h*1e3/y):void 0}}function z9(e,t){let n=0,o=1e3/t,a,r;const s=(d,m=Date.now())=>{n=m,a=null,r&&(clearTimeout(r),r=null),e.apply(null,d)};return[(...d)=>{const m=Date.now(),f=m-n;f>=o?s(d,m):(a=d,r||(r=setTimeout(()=>{r=null,s(a)},o-f)))},()=>a&&s(a)]}const uc=(e,t,n=3)=>{let o=0;const a=j9(50,250);return z9(r=>{const s=r.loaded,i=r.lengthComputable?r.total:void 0,u=s-o,d=a(u),m=s<=i;o=s;const f={loaded:s,total:i,progress:i?s/i:void 0,bytes:u,rate:d||void 0,estimated:d&&i&&m?(i-s)/d:void 0,event:r,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(f)},n)},Mg=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},Bg=e=>(...t)=>Re.asap(()=>e(...t)),H9=po.hasStandardBrowserEnv?function(){const t=po.navigator&&/(msie|trident)/i.test(po.navigator.userAgent),n=document.createElement("a");let o;function a(r){let s=r;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=a(window.location.href),function(s){const i=Re.isString(s)?a(s):s;return i.protocol===o.protocol&&i.host===o.host}}():function(){return function(){return!0}}(),W9=po.hasStandardBrowserEnv?{write(e,t,n,o,a,r){const s=[e+"="+encodeURIComponent(t)];Re.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Re.isString(o)&&s.push("path="+o),Re.isString(a)&&s.push("domain="+a),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function G9(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function K9(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function B2(e,t){return e&&!G9(t)?K9(e,t):t}const Ng=e=>e instanceof vo?{...e}:e;function Yr(e,t){t=t||{};const n={};function o(d,m,f){return Re.isPlainObject(d)&&Re.isPlainObject(m)?Re.merge.call({caseless:f},d,m):Re.isPlainObject(m)?Re.merge({},m):Re.isArray(m)?m.slice():m}function a(d,m,f){if(Re.isUndefined(m)){if(!Re.isUndefined(d))return o(void 0,d,f)}else return o(d,m,f)}function r(d,m){if(!Re.isUndefined(m))return o(void 0,m)}function s(d,m){if(Re.isUndefined(m)){if(!Re.isUndefined(d))return o(void 0,d)}else return o(void 0,m)}function i(d,m,f){if(f in t)return o(d,m);if(f in e)return o(void 0,d)}const u={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(d,m)=>a(Ng(d),Ng(m),!0)};return Re.forEach(Object.keys(Object.assign({},e,t)),function(m){const f=u[m]||a,h=f(e[m],t[m],m);Re.isUndefined(h)&&f!==i||(n[m]=h)}),n}const N2=e=>{const t=Yr({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:a,xsrfCookieName:r,headers:s,auth:i}=t;t.headers=s=vo.from(s),t.url=R2(B2(t.baseURL,t.url),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let u;if(Re.isFormData(n)){if(po.hasStandardBrowserEnv||po.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((u=s.getContentType())!==!1){const[d,...m]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...m].join("; "))}}if(po.hasStandardBrowserEnv&&(o&&Re.isFunction(o)&&(o=o(t)),o||o!==!1&&H9(t.url))){const d=a&&r&&W9.read(r);d&&s.set(a,d)}return t},Z9=typeof XMLHttpRequest<"u",Y9=Z9&&function(e){return new Promise(function(n,o){const a=N2(e);let r=a.data;const s=vo.from(a.headers).normalize();let{responseType:i,onUploadProgress:u,onDownloadProgress:d}=a,m,f,h,y,b;function I(){y&&y(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function k(){if(!w)return;const $=vo.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),F={data:!i||i==="text"||i==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:$,config:e,request:w};M2(function(S){n(S),I()},function(S){o(S),I()},F),w=null}"onloadend"in w?w.onloadend=k:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(k)},w.onabort=function(){w&&(o(new At("Request aborted",At.ECONNABORTED,e,w)),w=null)},w.onerror=function(){o(new At("Network Error",At.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const F=a.transitional||D2;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),o(new At(C,F.clarifyTimeoutError?At.ETIMEDOUT:At.ECONNABORTED,e,w)),w=null},r===void 0&&s.setContentType(null),"setRequestHeader"in w&&Re.forEach(s.toJSON(),function(C,F){w.setRequestHeader(F,C)}),Re.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),i&&i!=="json"&&(w.responseType=a.responseType),d&&([h,b]=uc(d,!0),w.addEventListener("progress",h)),u&&w.upload&&([f,y]=uc(u),w.upload.addEventListener("progress",f),w.upload.addEventListener("loadend",y)),(a.cancelToken||a.signal)&&(m=$=>{w&&(o(!$||$.type?new ms(null,e,w):$),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const x=U9(a.url);if(x&&po.protocols.indexOf(x)===-1){o(new At("Unsupported protocol "+x+":",At.ERR_BAD_REQUEST,e));return}w.send(r||null)})},X9=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,a;const r=function(d){if(!a){a=!0,i();const m=d instanceof Error?d:this.reason;o.abort(m instanceof At?m:new ms(m instanceof Error?m.message:m))}};let s=t&&setTimeout(()=>{s=null,r(new At(`timeout ${t} of ms exceeded`,At.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(r):d.removeEventListener("abort",r)}),e=null)};e.forEach(d=>d.addEventListener("abort",r));const{signal:u}=o;return u.unsubscribe=()=>Re.asap(i),u}},Q9=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let o=0,a;for(;o<n;)a=o+t,yield e.slice(o,a),o=a},J9=async function*(e,t){for await(const n of eP(e))yield*Q9(n,t)},eP=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},Vg=(e,t,n,o)=>{const a=J9(e,t);let r=0,s,i=u=>{s||(s=!0,o&&o(u))};return new ReadableStream({async pull(u){try{const{done:d,value:m}=await a.next();if(d){i(),u.close();return}let f=m.byteLength;if(n){let h=r+=f;n(h)}u.enqueue(new Uint8Array(m))}catch(d){throw i(d),d}},cancel(u){return i(u),a.return()}},{highWaterMark:2})},ad=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",V2=ad&&typeof ReadableStream=="function",tP=ad&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),L2=(e,...t)=>{try{return!!e(...t)}catch{return!1}},nP=V2&&L2(()=>{let e=!1;const t=new Request(po.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Lg=64*1024,Rf=V2&&L2(()=>Re.isReadableStream(new Response("").body)),cc={stream:Rf&&(e=>e.body)};ad&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!cc[t]&&(cc[t]=Re.isFunction(e[t])?n=>n[t]():(n,o)=>{throw new At(`Response type '${t}' is not supported`,At.ERR_NOT_SUPPORT,o)})})})(new Response);const oP=async e=>{if(e==null)return 0;if(Re.isBlob(e))return e.size;if(Re.isSpecCompliantForm(e))return(await new Request(po.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Re.isArrayBufferView(e)||Re.isArrayBuffer(e))return e.byteLength;if(Re.isURLSearchParams(e)&&(e=e+""),Re.isString(e))return(await tP(e)).byteLength},aP=async(e,t)=>{const n=Re.toFiniteNumber(e.getContentLength());return n??oP(t)},rP=ad&&(async e=>{let{url:t,method:n,data:o,signal:a,cancelToken:r,timeout:s,onDownloadProgress:i,onUploadProgress:u,responseType:d,headers:m,withCredentials:f="same-origin",fetchOptions:h}=N2(e);d=d?(d+"").toLowerCase():"text";let y=X9([a,r&&r.toAbortSignal()],s),b;const I=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let w;try{if(u&&nP&&n!=="get"&&n!=="head"&&(w=await aP(m,o))!==0){let F=new Request(t,{method:"POST",body:o,duplex:"half"}),T;if(Re.isFormData(o)&&(T=F.headers.get("content-type"))&&m.setContentType(T),F.body){const[S,A]=Mg(w,uc(Bg(u)));o=Vg(F.body,Lg,S,A)}}Re.isString(f)||(f=f?"include":"omit");const k="credentials"in Request.prototype;b=new Request(t,{...h,signal:y,method:n.toUpperCase(),headers:m.normalize().toJSON(),body:o,duplex:"half",credentials:k?f:void 0});let x=await fetch(b);const $=Rf&&(d==="stream"||d==="response");if(Rf&&(i||$&&I)){const F={};["status","statusText","headers"].forEach(E=>{F[E]=x[E]});const T=Re.toFiniteNumber(x.headers.get("content-length")),[S,A]=i&&Mg(T,uc(Bg(i),!0))||[];x=new Response(Vg(x.body,Lg,S,()=>{A&&A(),I&&I()}),F)}d=d||"text";let C=await cc[Re.findKey(cc,d)||"text"](x,e);return!$&&I&&I(),await new Promise((F,T)=>{M2(F,T,{data:C,headers:vo.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:b})})}catch(k){throw I&&I(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new At("Network Error",At.ERR_NETWORK,e,b),{cause:k.cause||k}):At.from(k,k&&k.code,e,b)}}),Df={http:_9,xhr:Y9,fetch:rP};Re.forEach(Df,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const qg=e=>`- ${e}`,lP=e=>Re.isFunction(e)||e===null||e===!1,q2={getAdapter:e=>{e=Re.isArray(e)?e:[e];const{length:t}=e;let n,o;const a={};for(let r=0;r<t;r++){n=e[r];let s;if(o=n,!lP(n)&&(o=Df[(s=String(n)).toLowerCase()],o===void 0))throw new At(`Unknown adapter '${s}'`);if(o)break;a[s||"#"+r]=o}if(!o){const r=Object.entries(a).map(([i,u])=>`adapter ${i} `+(u===!1?"is not supported by the environment":"is not available in the build"));let s=t?r.length>1?`since :
`+r.map(qg).join(`
`):" "+qg(r[0]):"as no adapter specified";throw new At("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return o},adapters:Df};function _m(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ms(null,e)}function Ug(e){return _m(e),e.headers=vo.from(e.headers),e.data=ym.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),q2.getAdapter(e.adapter||Bi.adapter)(e).then(function(o){return _m(e),o.data=ym.call(e,e.transformResponse,o),o.headers=vo.from(o.headers),o},function(o){return P2(o)||(_m(e),o&&o.response&&(o.response.data=ym.call(e,e.transformResponse,o.response),o.response.headers=vo.from(o.response.headers))),Promise.reject(o)})}const U2="1.7.7",Up={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Up[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const jg={};Up.transitional=function(t,n,o){function a(r,s){return"[Axios v"+U2+"] Transitional option '"+r+"'"+s+(o?". "+o:"")}return(r,s,i)=>{if(t===!1)throw new At(a(s," has been removed"+(n?" in "+n:"")),At.ERR_DEPRECATED);return n&&!jg[s]&&(jg[s]=!0,console.warn(a(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,s,i):!0}};function sP(e,t,n){if(typeof e!="object")throw new At("options must be an object",At.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let a=o.length;for(;a-- >0;){const r=o[a],s=t[r];if(s){const i=e[r],u=i===void 0||s(i,r,e);if(u!==!0)throw new At("option "+r+" must be "+u,At.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new At("Unknown option "+r,At.ERR_BAD_OPTION)}}const Of={assertOptions:sP,validators:Up},Xa=Of.validators;class zr{constructor(t){this.defaults=t,this.interceptors={request:new Og,response:new Og}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";try{o.stack?r&&!String(o.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+r):o.stack=r}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Yr(this.defaults,n);const{transitional:o,paramsSerializer:a,headers:r}=n;o!==void 0&&Of.assertOptions(o,{silentJSONParsing:Xa.transitional(Xa.boolean),forcedJSONParsing:Xa.transitional(Xa.boolean),clarifyTimeoutError:Xa.transitional(Xa.boolean)},!1),a!=null&&(Re.isFunction(a)?n.paramsSerializer={serialize:a}:Of.assertOptions(a,{encode:Xa.function,serialize:Xa.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=r&&Re.merge(r.common,r[n.method]);r&&Re.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),n.headers=vo.concat(s,r);const i=[];let u=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(u=u&&I.synchronous,i.unshift(I.fulfilled,I.rejected))});const d=[];this.interceptors.response.forEach(function(I){d.push(I.fulfilled,I.rejected)});let m,f=0,h;if(!u){const b=[Ug.bind(this),void 0];for(b.unshift.apply(b,i),b.push.apply(b,d),h=b.length,m=Promise.resolve(n);f<h;)m=m.then(b[f++],b[f++]);return m}h=i.length;let y=n;for(f=0;f<h;){const b=i[f++],I=i[f++];try{y=b(y)}catch(w){I.call(this,w);break}}try{m=Ug.call(this,y)}catch(b){return Promise.reject(b)}for(f=0,h=d.length;f<h;)m=m.then(d[f++],d[f++]);return m}getUri(t){t=Yr(this.defaults,t);const n=B2(t.baseURL,t.url);return R2(n,t.params,t.paramsSerializer)}}Re.forEach(["delete","get","head","options"],function(t){zr.prototype[t]=function(n,o){return this.request(Yr(o||{},{method:t,url:n,data:(o||{}).data}))}});Re.forEach(["post","put","patch"],function(t){function n(o){return function(r,s,i){return this.request(Yr(i||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}zr.prototype[t]=n(),zr.prototype[t+"Form"]=n(!0)});let iP=class j2{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const o=this;this.promise.then(a=>{if(!o._listeners)return;let r=o._listeners.length;for(;r-- >0;)o._listeners[r](a);o._listeners=null}),this.promise.then=a=>{let r;const s=new Promise(i=>{o.subscribe(i),r=i}).then(a);return s.cancel=function(){o.unsubscribe(r)},s},t(function(r,s,i){o.reason||(o.reason=new ms(r,s,i),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new j2(function(a){t=a}),cancel:t}}};function uP(e){return function(n){return e.apply(null,n)}}function cP(e){return Re.isObject(e)&&e.isAxiosError===!0}const Pf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Pf).forEach(([e,t])=>{Pf[t]=e});function z2(e){const t=new zr(e),n=_2(zr.prototype.request,t);return Re.extend(n,zr.prototype,t,{allOwnKeys:!0}),Re.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return z2(Yr(e,a))},n}const xn=z2(Bi);xn.Axios=zr;xn.CanceledError=ms;xn.CancelToken=iP;xn.isCancel=P2;xn.VERSION=U2;xn.toFormData=od;xn.AxiosError=At;xn.Cancel=xn.CanceledError;xn.all=function(t){return Promise.all(t)};xn.spread=uP;xn.isAxiosError=cP;xn.mergeConfig=Yr;xn.AxiosHeaders=vo;xn.formToJSON=e=>O2(Re.isHTMLForm(e)?new FormData(e):e);xn.getAdapter=q2.getAdapter;xn.HttpStatusCode=Pf;xn.default=xn;var dP=$n;function mP(){if(!arguments.length)return[];var e=arguments[0];return dP(e)?e:[e]}var fP=mP;const Vn=Rt(fP);function jt(e,t){Vn(e).forEach(n=>{Innoclapps.$on(n,t),un(()=>{Innoclapps.$off(n,t)})})}function Ot(...e){Innoclapps.$emit(...e)}const fs=xn.create({transformRequest:[(e,t)=>(e instanceof FormData&&pP(e)&&(t["Content-Type"]="multipart/form-data"),e),...xn.defaults.transformRequest]});fs.defaults.withCredentials=!0;fs.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";fs.defaults.headers.common["Content-Type"]="application/json";fs.interceptors.request.use(e=>(window.Echo&&window.Echo.socketId()&&(e.headers["X-Socket-ID"]=window.Echo.socketId()),e));fs.interceptors.response.use(e=>e,e=>{if(xn.isCancel(e))return e;e.isValidationError=()=>!1;const t=e.response.status;return t===404?Ot("error-404"):t===403?Ot("error-403",e):t===401?window.location.href=Innoclapps.scriptConfig("url")+"/login":t===409?Ot("conflict",e.response.data.message):t===419?Ot("token-expired",e):t===422?(e.isValidationError=()=>!0,Ot("form-validation-errors",e.response.data.errors)):t===429?Ot("too-many-requests",e):t===503?Ot("maintenance-mode",e.response.data.message):t>=500&&Ot("error",e.response.data.message),Promise.reject(e)});function pP(e){function t(n){if(n instanceof File)return!0;if(n instanceof Blob)return!1;if(Array.isArray(n)){for(const o of n)if(t(o))return!0}else if(typeof n=="object"&&n!==null){for(const o of Object.values(n))if(t(o))return!0}return!1}for(const[n,o]of e.entries())if(t(o))return!0;return!1}const ol=xn.CancelToken;/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var H2="store";function fn(e){return e===void 0&&(e=null),Le(e!==null?e:H2)}function ps(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function vP(e){return e!==null&&typeof e=="object"}function hP(e){return e&&typeof e.then=="function"}function gP(e,t){return function(){return e(t)}}function W2(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var o=t.indexOf(e);o>-1&&t.splice(o,1)}}function G2(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;rd(e,n,[],e._modules.root,!0),jp(e,n,t)}function jp(e,t,n){var o=e._state,a=e._scope;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={},i={},u=Ec(!0);u.run(function(){ps(r,function(d,m){s[m]=gP(d,e),i[m]=P(function(){return s[m]()}),Object.defineProperty(e.getters,m,{get:function(){return i[m].value},enumerable:!0})})}),e._state=ro({data:t}),e._scope=u,e.strict&&IP(e),o&&n&&e._withCommit(function(){o.data=null}),a&&a.stop()}function rd(e,t,n,o,a){var r=!n.length,s=e._modules.getNamespace(n);if(o.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=o),!r&&!a){var i=zp(t,n.slice(0,-1)),u=n[n.length-1];e._withCommit(function(){i[u]=o.state})}var d=o.context=bP(e,s,n);o.forEachMutation(function(m,f){var h=s+f;yP(e,h,m,d)}),o.forEachAction(function(m,f){var h=m.root?f:s+f,y=m.handler||m;_P(e,h,y,d)}),o.forEachGetter(function(m,f){var h=s+f;wP(e,h,m,d)}),o.forEachChild(function(m,f){rd(e,t,n.concat(f),m,a)})}function bP(e,t,n){var o=t==="",a={dispatch:o?e.dispatch:function(r,s,i){var u=dc(r,s,i),d=u.payload,m=u.options,f=u.type;return(!m||!m.root)&&(f=t+f),e.dispatch(f,d)},commit:o?e.commit:function(r,s,i){var u=dc(r,s,i),d=u.payload,m=u.options,f=u.type;(!m||!m.root)&&(f=t+f),e.commit(f,d,m)}};return Object.defineProperties(a,{getters:{get:o?function(){return e.getters}:function(){return K2(e,t)}},state:{get:function(){return zp(e.state,n)}}}),a}function K2(e,t){if(!e._makeLocalGettersCache[t]){var n={},o=t.length;Object.keys(e.getters).forEach(function(a){if(a.slice(0,o)===t){var r=a.slice(o);Object.defineProperty(n,r,{get:function(){return e.getters[a]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function yP(e,t,n,o){var a=e._mutations[t]||(e._mutations[t]=[]);a.push(function(s){n.call(e,o.state,s)})}function _P(e,t,n,o){var a=e._actions[t]||(e._actions[t]=[]);a.push(function(s){var i=n.call(e,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:e.getters,rootState:e.state},s);return hP(i)||(i=Promise.resolve(i)),e._devtoolHook?i.catch(function(u){throw e._devtoolHook.emit("vuex:error",u),u}):i})}function wP(e,t,n,o){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(r){return n(o.state,o.getters,r.state,r.getters)})}function IP(e){Se(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function zp(e,t){return t.reduce(function(n,o){return n[o]},e)}function dc(e,t,n){return vP(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var xP="vuex bindings",zg="vuex:mutations",wm="vuex:actions",ml="vuex",kP=0;function $P(e,t){d6({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[xP]},function(n){n.addTimelineLayer({id:zg,label:"Vuex Mutations",color:Hg}),n.addTimelineLayer({id:wm,label:"Vuex Actions",color:Hg}),n.addInspector({id:ml,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(o){if(o.app===e&&o.inspectorId===ml)if(o.filter){var a=[];Q2(a,t._modules.root,o.filter,""),o.rootNodes=a}else o.rootNodes=[X2(t._modules.root,"")]}),n.on.getInspectorState(function(o){if(o.app===e&&o.inspectorId===ml){var a=o.nodeId;K2(t,a),o.state=TP(FP(t._modules,a),a==="root"?t.getters:t._makeLocalGettersCache,a)}}),n.on.editInspectorState(function(o){if(o.app===e&&o.inspectorId===ml){var a=o.nodeId,r=o.path;a!=="root"&&(r=a.split("/").filter(Boolean).concat(r)),t._withCommit(function(){o.set(t._state.data,r,o.state.value)})}}),t.subscribe(function(o,a){var r={};o.payload&&(r.payload=o.payload),r.state=a,n.notifyComponentUpdate(),n.sendInspectorTree(ml),n.sendInspectorState(ml),n.addTimelineEvent({layerId:zg,event:{time:Date.now(),title:o.type,data:r}})}),t.subscribeAction({before:function(o,a){var r={};o.payload&&(r.payload=o.payload),o._id=kP++,o._time=Date.now(),r.state=a,n.addTimelineEvent({layerId:wm,event:{time:o._time,title:o.type,groupId:o._id,subtitle:"start",data:r}})},after:function(o,a){var r={},s=Date.now()-o._time;r.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},o.payload&&(r.payload=o.payload),r.state=a,n.addTimelineEvent({layerId:wm,event:{time:Date.now(),title:o.type,groupId:o._id,subtitle:"end",data:r}})}})})}var Hg=8702998,CP=6710886,SP=16777215,Z2={label:"namespaced",textColor:SP,backgroundColor:CP};function Y2(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function X2(e,t){return{id:t||"root",label:Y2(t),tags:e.namespaced?[Z2]:[],children:Object.keys(e._children).map(function(n){return X2(e._children[n],t+n+"/")})}}function Q2(e,t,n,o){o.includes(n)&&e.push({id:o||"root",label:o.endsWith("/")?o.slice(0,o.length-1):o||"Root",tags:t.namespaced?[Z2]:[]}),Object.keys(t._children).forEach(function(a){Q2(e,t._children[a],n,o+a+"/")})}function TP(e,t,n){t=n==="root"?t:t[n];var o=Object.keys(t),a={state:Object.keys(e.state).map(function(s){return{key:s,editable:!0,value:e.state[s]}})};if(o.length){var r=EP(t);a.getters=Object.keys(r).map(function(s){return{key:s.endsWith("/")?Y2(s):s,editable:!1,value:Mf(function(){return r[s]})}})}return a}function EP(e){var t={};return Object.keys(e).forEach(function(n){var o=n.split("/");if(o.length>1){var a=t,r=o.pop();o.forEach(function(s){a[s]||(a[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),a=a[s]._custom.value}),a[r]=Mf(function(){return e[n]})}else t[n]=Mf(function(){return e[n]})}),t}function FP(e,t){var n=t.split("/").filter(function(o){return o});return n.reduce(function(o,a,r){var s=o[a];if(!s)throw new Error('Missing module "'+a+'" for path "'+t+'".');return r===n.length-1?s:s._children},t==="root"?e:e.root._children)}function Mf(e){try{return e()}catch(t){return t}}var ia=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var o=t.state;this.state=(typeof o=="function"?o():o)||{}},J2={namespaced:{configurable:!0}};J2.namespaced.get=function(){return!!this._rawModule.namespaced};ia.prototype.addChild=function(t,n){this._children[t]=n};ia.prototype.removeChild=function(t){delete this._children[t]};ia.prototype.getChild=function(t){return this._children[t]};ia.prototype.hasChild=function(t){return t in this._children};ia.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};ia.prototype.forEachChild=function(t){ps(this._children,t)};ia.prototype.forEachGetter=function(t){this._rawModule.getters&&ps(this._rawModule.getters,t)};ia.prototype.forEachAction=function(t){this._rawModule.actions&&ps(this._rawModule.actions,t)};ia.prototype.forEachMutation=function(t){this._rawModule.mutations&&ps(this._rawModule.mutations,t)};Object.defineProperties(ia.prototype,J2);var al=function(t){this.register([],t,!1)};al.prototype.get=function(t){return t.reduce(function(n,o){return n.getChild(o)},this.root)};al.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(o,a){return n=n.getChild(a),o+(n.namespaced?a+"/":"")},"")};al.prototype.update=function(t){ew([],this.root,t)};al.prototype.register=function(t,n,o){var a=this;o===void 0&&(o=!0);var r=new ia(n,o);if(t.length===0)this.root=r;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],r)}n.modules&&ps(n.modules,function(i,u){a.register(t.concat(u),i,o)})};al.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),o=t[t.length-1],a=n.getChild(o);a&&a.runtime&&n.removeChild(o)};al.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),o=t[t.length-1];return n?n.hasChild(o):!1};function ew(e,t,n){if(t.update(n),n.modules)for(var o in n.modules){if(!t.getChild(o))return;ew(e.concat(o),t.getChild(o),n.modules[o])}}function AP(e){return new bo(e)}var bo=function(t){var n=this;t===void 0&&(t={});var o=t.plugins;o===void 0&&(o=[]);var a=t.strict;a===void 0&&(a=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new al(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var s=this,i=this,u=i.dispatch,d=i.commit;this.dispatch=function(h,y){return u.call(s,h,y)},this.commit=function(h,y,b){return d.call(s,h,y,b)},this.strict=a;var m=this._modules.root.state;rd(this,m,[],this._modules.root),jp(this,m),o.forEach(function(f){return f(n)})},Hp={state:{configurable:!0}};bo.prototype.install=function(t,n){t.provide(n||H2,this),t.config.globalProperties.$store=this;var o=this._devtools!==void 0?this._devtools:!1;o&&$P(t,this)};Hp.state.get=function(){return this._state.data};Hp.state.set=function(e){};bo.prototype.commit=function(t,n,o){var a=this,r=dc(t,n,o),s=r.type,i=r.payload,u={type:s,payload:i},d=this._mutations[s];d&&(this._withCommit(function(){d.forEach(function(f){f(i)})}),this._subscribers.slice().forEach(function(m){return m(u,a.state)}))};bo.prototype.dispatch=function(t,n){var o=this,a=dc(t,n),r=a.type,s=a.payload,i={type:r,payload:s},u=this._actions[r];if(u){try{this._actionSubscribers.slice().filter(function(m){return m.before}).forEach(function(m){return m.before(i,o.state)})}catch{}var d=u.length>1?Promise.all(u.map(function(m){return m(s)})):u[0](s);return new Promise(function(m,f){d.then(function(h){try{o._actionSubscribers.filter(function(y){return y.after}).forEach(function(y){return y.after(i,o.state)})}catch{}m(h)},function(h){try{o._actionSubscribers.filter(function(y){return y.error}).forEach(function(y){return y.error(i,o.state,h)})}catch{}f(h)})})}};bo.prototype.subscribe=function(t,n){return W2(t,this._subscribers,n)};bo.prototype.subscribeAction=function(t,n){var o=typeof t=="function"?{before:t}:t;return W2(o,this._actionSubscribers,n)};bo.prototype.watch=function(t,n,o){var a=this;return Se(function(){return t(a.state,a.getters)},n,Object.assign({},o))};bo.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};bo.prototype.registerModule=function(t,n,o){o===void 0&&(o={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),rd(this,this.state,t,this._modules.get(t),o.preserveState),jp(this,this.state)};bo.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var o=zp(n.state,t.slice(0,-1));delete o[t[t.length-1]]}),G2(this)};bo.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};bo.prototype.hotUpdate=function(t){this._modules.update(t),G2(this,!0)};bo.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(bo.prototype,Hp);function RP(e,t,n,o){for(var a=e.length,r=n+(o?1:-1);o?r--:++r<a;)if(t(e[r],r,e))return r;return-1}var tw=RP,DP=Oc;function OP(){this.__data__=new DP,this.size=0}var PP=OP;function MP(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var BP=MP;function NP(e){return this.__data__.get(e)}var VP=NP;function LP(e){return this.__data__.has(e)}var qP=LP,UP=Oc,jP=cp,zP=dp,HP=200;function WP(e,t){var n=this.__data__;if(n instanceof UP){var o=n.__data__;if(!jP||o.length<HP-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new zP(o)}return n.set(e,t),this.size=n.size,this}var GP=WP,KP=Oc,ZP=PP,YP=BP,XP=VP,QP=qP,JP=GP;function vs(e){var t=this.__data__=new KP(e);this.size=t.size}vs.prototype.clear=ZP;vs.prototype.delete=YP;vs.prototype.get=XP;vs.prototype.has=QP;vs.prototype.set=JP;var ld=vs,eM="__lodash_hash_undefined__";function tM(e){return this.__data__.set(e,eM),this}var nM=tM;function oM(e){return this.__data__.has(e)}var aM=oM,rM=dp,lM=nM,sM=aM;function mc(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new rM;++t<n;)this.add(e[t])}mc.prototype.add=mc.prototype.push=lM;mc.prototype.has=sM;var Wp=mc;function iM(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}var uM=iM;function cM(e,t){return e.has(t)}var Gp=cM,dM=Wp,mM=uM,fM=Gp,pM=1,vM=2;function hM(e,t,n,o,a,r){var s=n&pM,i=e.length,u=t.length;if(i!=u&&!(s&&u>i))return!1;var d=r.get(e),m=r.get(t);if(d&&m)return d==t&&m==e;var f=-1,h=!0,y=n&vM?new dM:void 0;for(r.set(e,t),r.set(t,e);++f<i;){var b=e[f],I=t[f];if(o)var w=s?o(I,b,f,t,e,r):o(b,I,f,e,t,r);if(w!==void 0){if(w)continue;h=!1;break}if(y){if(!mM(t,function(k,x){if(!fM(y,x)&&(b===k||a(b,k,n,o,r)))return y.push(x)})){h=!1;break}}else if(!(b===I||a(b,I,n,o,r))){h=!1;break}}return r.delete(e),r.delete(t),h}var nw=hM,gM=ra,bM=gM.Uint8Array,ow=bM;function yM(e){var t=-1,n=Array(e.size);return e.forEach(function(o,a){n[++t]=[a,o]}),n}var _M=yM;function wM(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var Kp=wM,Wg=Ql,Gg=ow,IM=$i,xM=nw,kM=_M,$M=Kp,CM=1,SM=2,TM="[object Boolean]",EM="[object Date]",FM="[object Error]",AM="[object Map]",RM="[object Number]",DM="[object RegExp]",OM="[object Set]",PM="[object String]",MM="[object Symbol]",BM="[object ArrayBuffer]",NM="[object DataView]",Kg=Wg?Wg.prototype:void 0,Im=Kg?Kg.valueOf:void 0;function VM(e,t,n,o,a,r,s){switch(n){case NM:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case BM:return!(e.byteLength!=t.byteLength||!r(new Gg(e),new Gg(t)));case TM:case EM:case RM:return IM(+e,+t);case FM:return e.name==t.name&&e.message==t.message;case DM:case PM:return e==t+"";case AM:var i=kM;case OM:var u=o&CM;if(i||(i=$M),e.size!=t.size&&!u)return!1;var d=s.get(e);if(d)return d==t;o|=SM,s.set(e,t);var m=xM(i(e),i(t),o,a,r,s);return s.delete(e),m;case MM:if(Im)return Im.call(e)==Im.call(t)}return!1}var LM=VM;function qM(e,t){for(var n=-1,o=t.length,a=e.length;++n<o;)e[a+n]=t[n];return e}var Zp=qM,UM=Zp,jM=$n;function zM(e,t,n){var o=t(e);return jM(e)?o:UM(o,n(e))}var aw=zM;function HM(e,t){for(var n=-1,o=e==null?0:e.length,a=0,r=[];++n<o;){var s=e[n];t(s,n,e)&&(r[a++]=s)}return r}var Yp=HM;function WM(){return[]}var rw=WM,GM=Yp,KM=rw,ZM=Object.prototype,YM=ZM.propertyIsEnumerable,Zg=Object.getOwnPropertySymbols,XM=Zg?function(e){return e==null?[]:(e=Object(e),GM(Zg(e),function(t){return YM.call(e,t)}))}:KM,Xp=XM;function QM(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var JM=QM,eB=JM,tB=Ei,nB=$n,oB=Fi,aB=Mc,rB=zc,lB=Object.prototype,sB=lB.hasOwnProperty;function iB(e,t){var n=nB(e),o=!n&&tB(e),a=!n&&!o&&oB(e),r=!n&&!o&&!a&&rB(e),s=n||o||a||r,i=s?eB(e.length,String):[],u=i.length;for(var d in e)(t||sB.call(e,d))&&!(s&&(d=="length"||a&&(d=="offset"||d=="parent")||r&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||aB(d,u)))&&i.push(d);return i}var lw=iB,uB=lw,cB=Gy,dB=wr;function mB(e){return dB(e)?uB(e):cB(e)}var hs=mB,fB=aw,pB=Xp,vB=hs;function hB(e){return fB(e,vB,pB)}var sw=hB,Yg=sw,gB=1,bB=Object.prototype,yB=bB.hasOwnProperty;function _B(e,t,n,o,a,r){var s=n&gB,i=Yg(e),u=i.length,d=Yg(t),m=d.length;if(u!=m&&!s)return!1;for(var f=u;f--;){var h=i[f];if(!(s?h in t:yB.call(t,h)))return!1}var y=r.get(e),b=r.get(t);if(y&&b)return y==t&&b==e;var I=!0;r.set(e,t),r.set(t,e);for(var w=s;++f<u;){h=i[f];var k=e[h],x=t[h];if(o)var $=s?o(x,k,h,t,e,r):o(k,x,h,e,t,r);if(!($===void 0?k===x||a(k,x,n,o,r):$)){I=!1;break}w||(w=h=="constructor")}if(I&&!w){var C=e.constructor,F=t.constructor;C!=F&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof F=="function"&&F instanceof F)&&(I=!1)}return r.delete(e),r.delete(t),I}var wB=_B,xm=ld,IB=nw,xB=LM,kB=wB,Xg=Ti,Qg=$n,Jg=Fi,$B=zc,CB=1,eb="[object Arguments]",tb="[object Array]",ku="[object Object]",SB=Object.prototype,nb=SB.hasOwnProperty;function TB(e,t,n,o,a,r){var s=Qg(e),i=Qg(t),u=s?tb:Xg(e),d=i?tb:Xg(t);u=u==eb?ku:u,d=d==eb?ku:d;var m=u==ku,f=d==ku,h=u==d;if(h&&Jg(e)){if(!Jg(t))return!1;s=!0,m=!1}if(h&&!m)return r||(r=new xm),s||$B(e)?IB(e,t,n,o,a,r):xB(e,t,u,n,o,a,r);if(!(n&CB)){var y=m&&nb.call(e,"__wrapped__"),b=f&&nb.call(t,"__wrapped__");if(y||b){var I=y?e.value():e,w=b?t.value():t;return r||(r=new xm),a(I,w,n,o,r)}}return h?(r||(r=new xm),kB(e,t,n,o,a,r)):!1}var EB=TB,FB=EB,ob=la;function iw(e,t,n,o,a){return e===t?!0:e==null||t==null||!ob(e)&&!ob(t)?e!==e&&t!==t:FB(e,t,n,o,iw,a)}var Qp=iw,AB=ld,RB=Qp,DB=1,OB=2;function PB(e,t,n,o){var a=n.length,r=a,s=!o;if(e==null)return!r;for(e=Object(e);a--;){var i=n[a];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++a<r;){i=n[a];var u=i[0],d=e[u],m=i[1];if(s&&i[2]){if(d===void 0&&!(u in e))return!1}else{var f=new AB;if(o)var h=o(d,m,u,e,t,f);if(!(h===void 0?RB(m,d,DB|OB,o,f):h))return!1}}return!0}var MB=PB,BB=go;function NB(e){return e===e&&!BB(e)}var uw=NB,VB=uw,LB=hs;function qB(e){for(var t=LB(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,VB(a)]}return t}var UB=qB;function jB(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var cw=jB,zB=MB,HB=UB,WB=cw;function GB(e){var t=HB(e);return t.length==1&&t[0][2]?WB(t[0][0],t[0][1]):function(n){return n===e||zB(n,e,t)}}var KB=GB;function ZB(e,t){return e!=null&&t in Object(e)}var YB=ZB,XB=os,QB=Ei,JB=$n,eN=Mc,tN=_p,nN=as;function oN(e,t,n){t=XB(t,e);for(var o=-1,a=t.length,r=!1;++o<a;){var s=nN(t[o]);if(!(r=e!=null&&n(e,s)))break;e=e[s]}return r||++o!=a?r:(a=e==null?0:e.length,!!a&&tN(a)&&eN(s,a)&&(JB(e)||QB(e)))}var aN=oN,rN=YB,lN=aN;function sN(e,t){return e!=null&&lN(e,t,rN)}var dw=sN,iN=Qp,uN=my,cN=dw,dN=up,mN=uw,fN=cw,pN=as,vN=1,hN=2;function gN(e,t){return dN(e)&&mN(t)?fN(pN(e),t):function(n){var o=uN(n,e);return o===void 0&&o===t?cN(n,e):iN(t,o,vN|hN)}}var bN=gN;function yN(e){return e}var Ni=yN;function _N(e){return function(t){return t==null?void 0:t[e]}}var wN=_N,IN=Ci;function xN(e){return function(t){return IN(t,e)}}var kN=xN,$N=wN,CN=kN,SN=up,TN=as;function EN(e){return SN(e)?$N(TN(e)):CN(e)}var FN=EN,AN=KB,RN=bN,DN=Ni,ON=$n,PN=FN;function MN(e){return typeof e=="function"?e:e==null?DN:typeof e=="object"?ON(e)?RN(e[0],e[1]):AN(e):PN(e)}var ua=MN,BN=Q_,ab=1/0,NN=17976931348623157e292;function VN(e){if(!e)return e===0?e:0;if(e=BN(e),e===ab||e===-ab){var t=e<0?-1:1;return t*NN}return e===e?e:0}var LN=VN,qN=LN;function UN(e){var t=qN(e),n=t%1;return t===t?n?t-n:t:0}var jN=UN,zN=tw,HN=ua,WN=jN,GN=Math.max;function KN(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var a=n==null?0:WN(n);return a<0&&(a=GN(o+a,0)),zN(e,HN(t),a)}var mw=KN;const Mt=Rt(mw),$u=AP({state:{sidebarMenuItems:[],sidebarOpen:!1},mutations:{SET_SIDEBAR_OPEN(e,t){e.sidebarOpen=t},SET_SIDEBAR_MENU_ITEMS(e,t){e.sidebarMenuItems=t},UPDATE_SIDEBAR_MENU_ITEM(e,t){const n=Mt(e.sidebarMenuItems,["id",t.id]);e.sidebarMenuItems[n]=Object.assign({},e.sidebarMenuItems[n],t.data)}},getters:{getSidebarMenuItem:e=>t=>e.sidebarMenuItems[Mt(e.sidebarMenuItems,["id",t])]},modules:{},strict:!1});Element.prototype.parents=function(e){for(var t=[],n=this,o=e!==void 0;(n=n.parentElement)!==null;)n.nodeType===Node.ELEMENT_NODE&&(!o||n.matches(e))&&t.push(n);return t};const Bf=xt((document==null?void 0:document.title)??null);Se(Bf,e=>{e&&(document.title=e)});function yo(e=null){const t=xt(e);return Se(t,n=>{n&&(Bf.value=n)},{immediate:!0}),Bf}function ZN(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e}var fw=ZN,YN=fp,XN=Si;function QN(e,t,n,o){var a=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var i=t[r],u=o?o(n[i],e[i],i,n,e):void 0;u===void 0&&(u=e[i]),a?XN(n,i,u):YN(n,i,u)}return n}var gs=QN,JN=gs,eV=hs;function tV(e,t){return e&&JN(t,eV(t),e)}var nV=tV;function oV(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var aV=oV,rV=go,lV=jc,sV=aV,iV=Object.prototype,uV=iV.hasOwnProperty;function cV(e){if(!rV(e))return sV(e);var t=lV(e),n=[];for(var o in e)o=="constructor"&&(t||!uV.call(e,o))||n.push(o);return n}var dV=cV,mV=lw,fV=dV,pV=wr;function vV(e){return pV(e)?mV(e,!0):fV(e)}var Vi=vV,hV=gs,gV=Vi;function bV(e,t){return e&&hV(t,gV(t),e)}var yV=bV,fc={exports:{}};fc.exports;(function(e,t){var n=ra,o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,r=a&&a.exports===o,s=r?n.Buffer:void 0,i=s?s.allocUnsafe:void 0;function u(d,m){if(m)return d.slice();var f=d.length,h=i?i(f):new d.constructor(f);return d.copy(h),h}e.exports=u})(fc,fc.exports);var pw=fc.exports;function _V(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}var vw=_V,wV=gs,IV=Xp;function xV(e,t){return wV(e,IV(e),t)}var kV=xV,$V=Wy,CV=$V(Object.getPrototypeOf,Object),Jp=CV,SV=Zp,TV=Jp,EV=Xp,FV=rw,AV=Object.getOwnPropertySymbols,RV=AV?function(e){for(var t=[];e;)SV(t,EV(e)),e=TV(e);return t}:FV,hw=RV,DV=gs,OV=hw;function PV(e,t){return DV(e,OV(e),t)}var MV=PV,BV=aw,NV=hw,VV=Vi;function LV(e){return BV(e,VV,NV)}var ev=LV,qV=Object.prototype,UV=qV.hasOwnProperty;function jV(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&UV.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var zV=jV,rb=ow;function HV(e){var t=new e.constructor(e.byteLength);return new rb(t).set(new rb(e)),t}var tv=HV,WV=tv;function GV(e,t){var n=t?WV(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var KV=GV,ZV=/\w*$/;function YV(e){var t=new e.constructor(e.source,ZV.exec(e));return t.lastIndex=e.lastIndex,t}var XV=YV,lb=Ql,sb=lb?lb.prototype:void 0,ib=sb?sb.valueOf:void 0;function QV(e){return ib?Object(ib.call(e)):{}}var JV=QV,eL=tv;function tL(e,t){var n=t?eL(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var gw=tL,nL=tv,oL=KV,aL=XV,rL=JV,lL=gw,sL="[object Boolean]",iL="[object Date]",uL="[object Map]",cL="[object Number]",dL="[object RegExp]",mL="[object Set]",fL="[object String]",pL="[object Symbol]",vL="[object ArrayBuffer]",hL="[object DataView]",gL="[object Float32Array]",bL="[object Float64Array]",yL="[object Int8Array]",_L="[object Int16Array]",wL="[object Int32Array]",IL="[object Uint8Array]",xL="[object Uint8ClampedArray]",kL="[object Uint16Array]",$L="[object Uint32Array]";function CL(e,t,n){var o=e.constructor;switch(t){case vL:return nL(e);case sL:case iL:return new o(+e);case hL:return oL(e,n);case gL:case bL:case yL:case _L:case wL:case IL:case xL:case kL:case $L:return lL(e,n);case uL:return new o;case cL:case fL:return new o(e);case dL:return aL(e);case mL:return new o;case pL:return rL(e)}}var SL=CL,TL=go,ub=Object.create,EL=function(){function e(){}return function(t){if(!TL(t))return{};if(ub)return ub(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),FL=EL,AL=FL,RL=Jp,DL=jc;function OL(e){return typeof e.constructor=="function"&&!DL(e)?AL(RL(e)):{}}var bw=OL,PL=Ti,ML=la,BL="[object Map]";function NL(e){return ML(e)&&PL(e)==BL}var VL=NL,LL=VL,qL=Ai,cb=wp,db=cb&&cb.isMap,UL=db?qL(db):LL,jL=UL,zL=Ti,HL=la,WL="[object Set]";function GL(e){return HL(e)&&zL(e)==WL}var KL=GL,ZL=KL,YL=Ai,mb=wp,fb=mb&&mb.isSet,XL=fb?YL(fb):ZL,QL=XL,JL=ld,eq=fw,tq=fp,nq=nV,oq=yV,aq=pw,rq=vw,lq=kV,sq=MV,iq=sw,uq=ev,cq=Ti,dq=zV,mq=SL,fq=bw,pq=$n,vq=Fi,hq=jL,gq=go,bq=QL,yq=hs,_q=Vi,wq=1,Iq=2,xq=4,yw="[object Arguments]",kq="[object Array]",$q="[object Boolean]",Cq="[object Date]",Sq="[object Error]",_w="[object Function]",Tq="[object GeneratorFunction]",Eq="[object Map]",Fq="[object Number]",ww="[object Object]",Aq="[object RegExp]",Rq="[object Set]",Dq="[object String]",Oq="[object Symbol]",Pq="[object WeakMap]",Mq="[object ArrayBuffer]",Bq="[object DataView]",Nq="[object Float32Array]",Vq="[object Float64Array]",Lq="[object Int8Array]",qq="[object Int16Array]",Uq="[object Int32Array]",jq="[object Uint8Array]",zq="[object Uint8ClampedArray]",Hq="[object Uint16Array]",Wq="[object Uint32Array]",pn={};pn[yw]=pn[kq]=pn[Mq]=pn[Bq]=pn[$q]=pn[Cq]=pn[Nq]=pn[Vq]=pn[Lq]=pn[qq]=pn[Uq]=pn[Eq]=pn[Fq]=pn[ww]=pn[Aq]=pn[Rq]=pn[Dq]=pn[Oq]=pn[jq]=pn[zq]=pn[Hq]=pn[Wq]=!0;pn[Sq]=pn[_w]=pn[Pq]=!1;function Hu(e,t,n,o,a,r){var s,i=t&wq,u=t&Iq,d=t&xq;if(n&&(s=a?n(e,o,a,r):n(e)),s!==void 0)return s;if(!gq(e))return e;var m=pq(e);if(m){if(s=dq(e),!i)return rq(e,s)}else{var f=cq(e),h=f==_w||f==Tq;if(vq(e))return aq(e,i);if(f==ww||f==yw||h&&!a){if(s=u||h?{}:fq(e),!i)return u?sq(e,oq(s,e)):lq(e,nq(s,e))}else{if(!pn[f])return a?e:{};s=mq(e,f,i)}}r||(r=new JL);var y=r.get(e);if(y)return y;r.set(e,s),bq(e)?e.forEach(function(w){s.add(Hu(w,t,n,w,e,r))}):hq(e)&&e.forEach(function(w,k){s.set(k,Hu(w,t,n,k,e,r))});var b=d?u?uq:iq:u?_q:yq,I=m?void 0:b(e);return eq(I||e,function(w,k){I&&(k=w,w=e[k]),tq(s,k,Hu(w,t,n,k,e,r))}),s}var Iw=Hu,Gq=Iw,Kq=1,Zq=4;function Yq(e){return Gq(e,Kq|Zq)}var Xq=Yq;const Nn=Rt(Xq);function Qq(e){return e==null}var Jq=Qq;const Zt=Rt(Jq);var pb=Ql,eU=Ei,tU=$n,vb=pb?pb.isConcatSpreadable:void 0;function nU(e){return tU(e)||eU(e)||!!(vb&&e&&e[vb])}var oU=nU,aU=Zp,rU=oU;function xw(e,t,n,o,a){var r=-1,s=e.length;for(n||(n=rU),a||(a=[]);++r<s;){var i=e[r];t>0&&n(i)?t>1?xw(i,t-1,n,o,a):aU(a,i):o||(a[a.length]=i)}return a}var sd=xw;function lU(e){return function(t,n,o){for(var a=-1,r=Object(t),s=o(t),i=s.length;i--;){var u=s[e?i:++a];if(n(r[u],u,r)===!1)break}return t}}var sU=lU,iU=sU,uU=iU(),kw=uU,cU=kw,dU=hs;function mU(e,t){return e&&cU(e,t,dU)}var fU=mU,pU=wr;function vU(e,t){return function(n,o){if(n==null)return n;if(!pU(n))return e(n,o);for(var a=n.length,r=t?a:-1,s=Object(n);(t?r--:++r<a)&&o(s[r],r,s)!==!1;);return n}}var hU=vU,gU=fU,bU=hU,yU=bU(gU),Li=yU,_U=Li,wU=wr;function IU(e,t){var n=-1,o=wU(e)?Array(e.length):[];return _U(e,function(a,r,s){o[++n]=t(a,r,s)}),o}var $w=IU;function xU(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var kU=xU,hb=ki;function $U(e,t){if(e!==t){var n=e!==void 0,o=e===null,a=e===e,r=hb(e),s=t!==void 0,i=t===null,u=t===t,d=hb(t);if(!i&&!d&&!r&&e>t||r&&s&&u&&!i&&!d||o&&s&&u||!n&&u||!a)return 1;if(!o&&!r&&!d&&e<t||d&&n&&a&&!o&&!r||i&&n&&a||!s&&a||!u)return-1}return 0}var CU=$U,SU=CU;function TU(e,t,n){for(var o=-1,a=e.criteria,r=t.criteria,s=a.length,i=n.length;++o<s;){var u=SU(a[o],r[o]);if(u){if(o>=i)return u;var d=n[o];return u*(d=="desc"?-1:1)}}return e.index-t.index}var EU=TU,km=ns,FU=Ci,AU=ua,RU=$w,DU=kU,OU=Ai,PU=EU,MU=Ni,BU=$n;function NU(e,t,n){t.length?t=km(t,function(r){return BU(r)?function(s){return FU(s,r.length===1?r[0]:r)}:r}):t=[MU];var o=-1;t=km(t,OU(AU));var a=RU(e,function(r,s,i){var u=km(t,function(d){return d(r)});return{criteria:u,index:++o,value:r}});return DU(a,function(r,s){return PU(r,s,n)})}var Cw=NU;function VU(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var LU=VU,qU=LU,gb=Math.max;function UU(e,t,n){return t=gb(t===void 0?e.length-1:t,0),function(){for(var o=arguments,a=-1,r=gb(o.length-t,0),s=Array(r);++a<r;)s[a]=o[t+a];a=-1;for(var i=Array(t+1);++a<t;)i[a]=o[a];return i[t]=n(s),qU(e,this,i)}}var Sw=UU;function jU(e){return function(){return e}}var zU=jU,HU=zU,bb=fy,WU=Ni,GU=bb?function(e,t){return bb(e,"toString",{configurable:!0,enumerable:!1,value:HU(t),writable:!0})}:WU,KU=GU,ZU=800,YU=16,XU=Date.now;function QU(e){var t=0,n=0;return function(){var o=XU(),a=YU-(o-n);if(n=o,a>0){if(++t>=ZU)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var JU=QU,ej=KU,tj=JU,nj=tj(ej),Tw=nj,oj=Ni,aj=Sw,rj=Tw;function lj(e,t){return rj(aj(e,t,oj),e+"")}var id=lj,sj=$i,ij=wr,uj=Mc,cj=go;function dj(e,t,n){if(!cj(n))return!1;var o=typeof t;return(o=="number"?ij(n)&&uj(t,n.length):o=="string"&&t in n)?sj(n[t],e):!1}var Ew=dj,mj=sd,fj=Cw,pj=id,yb=Ew,vj=pj(function(e,t){if(e==null)return[];var n=t.length;return n>1&&yb(e,t[0],t[1])?t=[]:n>2&&yb(t[0],t[1],t[2])&&(t=[t[0]]),fj(e,mj(t,1),[])}),hj=vj;const mr=Rt(hj);function ka(e){const t=fn(),n=P({set(f){t.commit("dataViews/SET",{identifier:bt(e),views:f})},get(){return t.getters["dataViews/getAll"](bt(e))}}),o=P({set(f){t.commit("dataViews/SET_ACTIVE",{identifier:bt(e),id:f})},get(){return t.getters["dataViews/getActive"](bt(e))}}),a=P(()=>!!o.value),r=P(()=>n.value.find(f=>f.is_open_for_user)),s=P({set(f){t.commit("dataViews/SET_BUILDER_VISIBLE",{identifier:bt(e),viewId:o.value.id,visible:f})},get(){return t.getters["dataViews/filtersBuilderVisible"](bt(e),o.value.id)}});function i(f){t.commit("dataViews/UPDATE",{identifier:bt(e),view:f})}function u(f){t.commit("dataViews/REMOVE",{identifier:bt(e),id:f})}function d(f){t.commit("dataViews/PUSH",{identifier:bt(e),view:f})}function m(f){return n.value.find(h=>parseInt(h.id)===parseInt(f))}return{views:n,filtersBuilderVisible:s,activeView:o,hasActiveView:a,firstOpenView:r,patchView:i,removeView:u,addView:d,findView:m}}function qo(e,t=null){const n=fn(),{activeView:o}=ka(e);let a=P(()=>bt(t)||bt(e));const r=P({set($){n.commit("table/SET_SETTINGS",{id:a.value,settings:$})},get(){return n.state.table.settings[a.value]||{}}}),s=P(()=>o.value?mr(x(En(r.value,"columns",[]),En(o.value,"config.table.columns",[])),"order"):mr(r.value.columns||[],"order")),i=P(()=>parseInt(En(o.value,"config.table.perPage",En(r.value,"defaults.perPage",25)))),u=P(()=>En(o.value,"config.table.condensed",En(r.value,"defaults.condensed",!1))),d=P(()=>En(o.value,"config.table.bordered",En(r.value,"defaults.bordered",!1))),m=P(()=>En(o.value,"config.table.pollingInterval",En(r.value,"defaults.pollingInterval"))),f=P(()=>En(o.value,"config.table.order",En(r.value,"defaults.order",[]))),h=P(()=>En(o.value,"config.table.maxHeight",En(r.value,"defaults.maxHeight"))),y=P(()=>{let $=h.value;return!Zt($)&&$>0?$+"px":"10000px"}),b=P(()=>!Zt(h.value));function I(){Ot("reload-resource-table",bt(e))}async function w($,C){if(Object.keys(r.value).length>0)return r.value;let{data:T}=await Innoclapps.request(`/${$}/table/settings`,C);return T}async function k($,C){let{data:F}=await Innoclapps.request(`/${$}/table/settings`,C);r.value={...r.value,actions:F.actions}}function x($,C){return Nn($).map(F=>{let T=C.find(S=>S.attribute===F.attribute);return T?{...F,...T}:F})}return{reloadTable:I,settings:r,fetchSettings:w,fetchActions:k,columns:s,perPage:i,isCondensed:u,isBordered:d,pollingInterval:m,defaultOrder:f,maxHeight:h,maxHeightPx:y,isSticky:b}}function nv(){const e=fn();return()=>e.commit("table/FLUSH_SETTINGS")}function qe(){const e=fn(),t=nv(),n=V(document.documentElement.classList.contains("dark"));let o=new MutationObserver(x=>{x.forEach($=>{$.type==="attributes"&&$.attributeName==="class"&&(n.value=document.documentElement.classList.contains("dark"))})});o.observe(document.documentElement,{attributes:!0}),un(()=>{o.disconnect(),o=null});const a=P(()=>e.state.sidebarMenuItems),r=P({get(){return e.state.sidebarOpen},set(x){e.commit("SET_SIDEBAR_OPEN",x)}}),s=P(()=>b("locales")),i=b("url"),u=P(()=>Uc()),d=P(()=>e.getters["users/current"]),m=P(()=>e.state.users.collection);function f(x){return e.getters["users/getById"](x)}function h(){let x=Innoclapps.scriptConfig("url");Innoclapps.request({baseURL:x,method:"POST",url:"/logout"}).then(()=>{window.location.href=x+"/login"})}function y(){t(),e.commit("fields/RESET")}function b(...x){return Innoclapps.scriptConfig(...x)}function I(){return b("mailable_templates.can_send_via_mail_client")||b("mailable_templates.can_send_via_mailer")}function w(){return!!b("integrations.microsoft.client_id")}function k(){return!!b("integrations.google.client_id")}return{appUrl:i,locale:u,locales:s,currentUser:d,users:m,sidebarOpen:r,sidebarItems:a,findUserById:f,logout:h,isDarkMode:xi(n),resetStoreState:y,isGoogleApiConfigured:k,isMicrosoftGraphConfigured:w,isMailerConfiguredToSendEmails:I,scriptConfig:b}}var gj=Qp;function bj(e,t){return gj(e,t)}var yj=bj;const ha=Rt(yj);var _j=Si,wj=$i;function Ij(e,t,n){(n!==void 0&&!wj(e[t],n)||n===void 0&&!(t in e))&&_j(e,t,n)}var Fw=Ij,xj=wr,kj=la;function $j(e){return kj(e)&&xj(e)}var ov=$j,Cj=br,Sj=Jp,Tj=la,Ej="[object Object]",Fj=Function.prototype,Aj=Object.prototype,Aw=Fj.toString,Rj=Aj.hasOwnProperty,Dj=Aw.call(Object);function Oj(e){if(!Tj(e)||Cj(e)!=Ej)return!1;var t=Sj(e);if(t===null)return!0;var n=Rj.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Aw.call(n)==Dj}var Rw=Oj;function Pj(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Dw=Pj,Mj=gs,Bj=Vi;function Nj(e){return Mj(e,Bj(e))}var Vj=Nj,_b=Fw,Lj=pw,qj=gw,Uj=vw,jj=bw,wb=Ei,Ib=$n,zj=ov,Hj=Fi,Wj=Ac,Gj=go,Kj=Rw,Zj=zc,xb=Dw,Yj=Vj;function Xj(e,t,n,o,a,r,s){var i=xb(e,n),u=xb(t,n),d=s.get(u);if(d){_b(e,n,d);return}var m=r?r(i,u,n+"",e,t,s):void 0,f=m===void 0;if(f){var h=Ib(u),y=!h&&Hj(u),b=!h&&!y&&Zj(u);m=u,h||y||b?Ib(i)?m=i:zj(i)?m=Uj(i):y?(f=!1,m=Lj(u,!0)):b?(f=!1,m=qj(u,!0)):m=[]:Kj(u)||wb(u)?(m=i,wb(i)?m=Yj(i):(!Gj(i)||Wj(i))&&(m=jj(u))):f=!1}f&&(s.set(u,m),a(m,u,o,r,s),s.delete(u)),_b(e,n,m)}var Qj=Xj,Jj=ld,ez=Fw,tz=kw,nz=Qj,oz=go,az=Vi,rz=Dw;function Ow(e,t,n,o,a){e!==t&&tz(t,function(r,s){if(a||(a=new Jj),oz(r))nz(e,t,s,n,Ow,o,a);else{var i=o?o(rz(e,s),r,s+"",e,t,a):void 0;i===void 0&&(i=r),ez(e,s,i)}},az)}var lz=Ow,sz=id,iz=Ew;function uz(e){return sz(function(t,n){var o=-1,a=n.length,r=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(r=e.length>3&&typeof r=="function"?(a--,r):void 0,s&&iz(n[0],n[1],s)&&(r=a<3?void 0:r,a=1),t=Object(t);++o<a;){var i=n[o];i&&e(t,i,o,r)}return t})}var cz=uz,dz=lz,mz=cz,fz=mz(function(e,t,n){dz(e,t,n)}),pz=fz;const Wu=Rt(pz);class vz{constructor(){this.errors={}}set(t,n){typeof t=="object"?this.errors=t:this.set({...this.errors,[t]:Vn(n)})}all(){return this.errors}has(t){return Object.hasOwn(this.errors,t)}hasAny(...t){return t.some(n=>this.has(n))}any(){return Object.keys(this.errors).length>0}first(t){if(this.has(t))return this.getAll(t)[0]}getAll(t){return Vn(this.errors[t]||[])}clear(t){const n={};t&&Object.keys(this.errors).forEach(o=>{o!==t&&(n[o]=this.errors[o])}),this.set(n)}groupByField(){const t={},n=this.all();return Object.keys(n).forEach(o=>{const a=o.match(/(.*?)\.\d+\..+/);if(a){const r=a[1];t[r]||(t[r]={messages:[],array:{}}),t[r].array[o]=n[o][0]}else t[o]||(t[o]={messages:[]}),t[o].messages.push(...n[o])}),t}}function hz(e){return e instanceof File||e instanceof FileList}function Pw(e,t=new FormData,n=null){if(e===null||e==="undefined"||e.length===0)return t.append(n,e);for(const o in e)Object.hasOwn(e,o)&&bz(t,gz(n,o),e[o]);return t}function gz(e,t){return e?e+"["+t+"]":t}function bz(e,t,n){if(n instanceof Date)return e.append(t,n.toISOString());if(n instanceof File)return e.append(t,n,n.name);if(typeof n=="boolean")return e.append(t,n?"1":"0");if(n===null)return e.append(t,"");if(typeof n!="object")return e.append(t,n);Pw(n,e,t)}class ud{constructor(t={},n={}){this.busy=!1,this.recentlySuccessful=!1,this.errors=new vz,this.queryString={},this.withData(t).withOptions(n)}isDirty(){return!ha(this.originalData,this.data())}withData(t){this.successful=!1,this.setInitialData(t);for(const n in t)this[n]=t[n];return this}setInitialData(t){this.originalData=Nn(t)}withOptions(t){return this.__options={resetOnSuccess:!1,...t},this}populate(t){return this.keys().forEach(n=>{this[n]=t[n]}),this}set(t,n=null){return typeof t=="object"?Object.entries(t).forEach(([o,a])=>this.set(o,a)):(this.fill(t,n),ha(this.originalData[t],n)||(this.originalData[t]=Nn(n))),this}fill(t,n=null){return typeof t=="object"?Object.entries(t).forEach(([o,a])=>this.fill(o,a)):ha(this[t],n)||(this[t]=n),this}withQueryString(t){return this.queryString={...this.queryString,...t},this}data(){return this.keys().reduce((t,n)=>({...t,[n]:this[n]}),{})}keys(){return Object.keys(this).filter(t=>!this.ignore.includes(t))}startProcessing(){this.errors.clear(),this.busy=!0,this.successful=!1}finishProcessing(t){this.busy=!1,this.successful=!0,this.recentlySuccessful=!0,this.__options.resetOnSuccess&&this.reset(),typeof this.__options.onSuccess=="function"&&this.__options.onSuccess(t),setTimeout(()=>this.recentlySuccessful=!1,3e3)}clear(){return this.keys().forEach(t=>{delete this[t]}),this.successful=!1,this.errors.clear(),this.queryString={},this.setInitialData({}),this}reset(){return this.keys().forEach(t=>{this[t]=Nn(this.originalData[t])}),this}getError(t){return this.errors.first(t)}get(t,n={}){return this.submit("get",t,n)}post(t,n={}){return this.submit("post",t,n)}patch(t,n={}){return this.submit("patch",t,n)}put(t,n={}){return this.submit("put",t,n)}delete(t,n={}){return this.submit("delete",t,n)}submit(t,n,o={}){this.startProcessing();let a=this.createQueryStringParams(n);const r=t==="get"?{params:Wu(a.queryString,this.data())}:this.hasFiles()?Pw(this.data()):this.data();return new Promise((s,i)=>{Innoclapps.request()[t](a.uri,r,Wu({params:a.queryString},o)).then(u=>{s(u.data),this.finishProcessing(u)}).catch(u=>{this.busy=!1,u.response&&this.errors.set(this.extractErrors(u.response)),i(u)})})}extractErrors(t){return!t.data||typeof t.data!="object"?{error:ud.errorMessage}:t.data.errors?{...t.data.errors}:t.data.message?{error:t.data.message}:{...t.data}}createQueryStringParams(t){let n=t.split("?"),o=n[1]?Object.fromEntries(new URLSearchParams(n[1])):{};return{uri:n[0],queryString:Wu(o,this.queryString)}}hasFiles(){for(const t in this.originalData)if(this.hasFilesDeep(this[t]))return!0;return!1}hasFilesDeep(t){if(t===null)return!1;if(typeof t=="object"){for(const n in t)if(Object.hasOwn(t,n)&&this.hasFilesDeep(t[n]))return!0}if(Array.isArray(t)){for(const n in t)if(Object.hasOwn(t,n))return this.hasFilesDeep(t[n])}return hz(t)}get ignore(){return["__options","busy","successful","recentlySuccessful","errors","originalData","queryString"]}}ud.errorMessage="Something went wrong. Please try again.";function Qe(e={},t={}){const n=t.autoClearErrors!==!1;delete t.autoClearErrors;const o=ro(new ud(e,t));if(n){let s=function(){const i=o.data();o.keys().forEach(u=>{const d=r[u],m=i[u];if(!Array.isArray(m)){m!=d&&o.errors.clear(u);return}ha(m,d)||(o.errors.clear(u),Array.isArray(d)&&(m.forEach(h=>{Ml(h)&&Fl(h)}),d.some(h=>h&&h._formUniqueId)?o.errors.set(yz(u,d,m,o.errors.all())):d.forEach((h,y)=>{h!==m[y]&&o.errors.clear(`${u}.${y}`)})))}),r=Mw(i)},r={};_z(()=>o.data(),()=>s(),250,{deep:!0,immediate:!0})}return{form:o}}function Mw(e,t={}){let n=Wu({},Nn(e),t);return"_formUniqueId"in e&&Fl(n,e._formUniqueId),Object.keys(n).forEach(o=>{X8(n[o])&&(n[o]=e[o].map(a=>{if(Ml(a)){let r=Nn(a);return"_formUniqueId"in a&&Fl(r,a._formUniqueId),r}return a}))}),n}function Fl(e,t){return"_formUniqueId"in e||Object.defineProperty(e,"_formUniqueId",{enumerable:!1,configurable:!1,writable:!1,value:t||Symbol()}),e}function yz(e,t,n,o){let a={...o};const r={},s=new Map(n.map(i=>[i._formUniqueId,i]));return t.forEach(i=>{const u=t.findIndex(b=>b._formUniqueId===i._formUniqueId),d=s.get(i._formUniqueId),m=n.findIndex(b=>b&&b._formUniqueId===i._formUniqueId),f=!d,h=!f&&!ha(i,d),y=m!==u;Object.keys(a).forEach(b=>{const I=new RegExp(`^${e}\\.(${u})(\\.|$)`);if(I.test(b)){if(f||h&&!y)delete a[b];else if(y){const w=b.replace(I,`${e}.${m}$2`);r[b]=w}}})}),Object.entries(r).forEach(([i,u])=>{a[u]=a[i],delete a[i]}),a}function _z(e,t,n,o={}){const a=e2(t,n);Se(e,(r,s)=>{a(r,s)},o)}function Ao(){const{t:e}=Pe(),{form:t}=Qe(),{scriptConfig:n}=qe(),o=V(!1),a=Pt({});async function r(){const{data:d}=await Innoclapps.request("/settings");t.set(d),a.value=d,o.value=!0}function s(d){for(let m in d)n(m)!==void 0&&n(m,d[m])}function i(d){t.post("settings").then(m=>{Innoclapps.success(e("core::settings.updated")),typeof d=="function"&&d(t,m),s(t.data())})}async function u(d){await We(),i(d)}return r(),{isReady:o,submit:u,saveSettings:i,originalSettings:xi(a),form:t}}const wz={class:"lg:flex lg:space-x-4"},Iz={class:"mt-4 rounded-lg border border-primary-100 bg-gradient-to-tr from-primary-50/40 from-25% to-primary-100 px-10 py-6 dark:border-neutral-800 dark:bg-gradient-to-tl dark:from-neutral-600 dark:to-neutral-900 md:flex md:items-center"},xz={class:"mt-5 md:ml-8 md:mt-0"},kz={class:"mb-1 text-lg font-semibold text-primary-800 dark:text-neutral-100"},$z={class:"text-base/6 text-primary-700 dark:text-neutral-300 sm:text-sm/6 md:max-w-xl"},Cz={__name:"SettingsRecaptcha",setup(e){const{scriptConfig:t}=qe(),{form:n,submit:o,isReady:a}=Ao();function r(){o(s=>{t("reCaptcha.configured",s.recaptcha_secret_key!=""&&s.recaptcha_site_key!="")})}return(s,i)=>{const u=c("ICardHeading"),d=c("ILink"),m=c("ICardActions"),f=c("ICardHeader"),h=c("IFormInput"),y=c("IFormGroup"),b=c("IFormTextarea"),I=c("ICardBody"),w=c("IButton"),k=c("ICardFooter"),x=c("ICard"),$=ze("t");return g(),D(de,null,[l(f,null,{default:p(()=>[l(u,{text:s.$t("core::settings.recaptcha.recaptcha")},null,8,["text"]),l(m,null,{default:p(()=>[l(d,{href:"https://www.google.com/recaptcha/admin",text:"v2"})]),_:1})]),_:1}),l(x,{as:"form",overlay:!v(a),onSubmit:ot(r,["prevent"])},{default:p(()=>[l(I,null,{default:p(()=>[_("div",wz,[l(y,{class:"w-full","label-for":"recaptcha_site_key",label:s.$t("core::settings.recaptcha.site_key")},{default:p(()=>[l(h,{id:"recaptcha_site_key",modelValue:v(n).recaptcha_site_key,"onUpdate:modelValue":i[0]||(i[0]=C=>v(n).recaptcha_site_key=C)},null,8,["modelValue"])]),_:1},8,["label"]),l(y,{class:"w-full","label-for":"recaptcha_secret_key",label:s.$t("core::settings.recaptcha.secret_key")},{default:p(()=>[l(h,{id:"recaptcha_secret_key",modelValue:v(n).recaptcha_secret_key,"onUpdate:modelValue":i[1]||(i[1]=C=>v(n).recaptcha_secret_key=C)},null,8,["modelValue"])]),_:1},8,["label"])]),l(y,{"label-for":"recaptcha_ignored_ips",description:s.$t("core::settings.recaptcha.ignored_ips_info"),label:s.$t("core::settings.recaptcha.ignored_ips")},{default:p(()=>[l(b,{id:"recaptcha_ignored_ips",modelValue:v(n).recaptcha_ignored_ips,"onUpdate:modelValue":i[2]||(i[2]=C=>v(n).recaptcha_ignored_ips=C)},null,8,["modelValue"])]),_:1},8,["description","label"]),_("div",Iz,[i[3]||(i[3]=_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"size-14 fill-primary-700 dark:fill-neutral-200"},[_("path",{d:"M11.5 10.9c-4 0-7.9.9-11.5 2.8h22.9c-3.6-1.9-7.4-2.8-11.4-2.8zM16.7 14.8c-1.7 0-3.1 1.1-3.6 2.6-1-.3-1.9-.3-2.8-.1-.6-1.4-1.9-2.4-3.6-2.4-2.1 0-3.8 1.7-3.8 3.8 0 2.1 1.7 3.8 3.8 3.8s3.8-1.7 3.8-3.8v-.4c.8-.2 1.6-.1 2.4.2v.3c0 2.1 1.7 3.8 3.8 3.8 2.1 0 3.8-1.7 3.8-3.8 0-2.2-1.7-4-3.8-4zm-7.2 3.9c0 1.6-1.3 2.8-2.8 2.8-1.6 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8c1.2 0 2.2.7 2.6 1.7.1.3.2.6.2 1.1 0-.1 0-.1 0 0zm7.2 2.8c-1.6 0-2.8-1.3-2.8-2.8s1.3-2.8 2.8-2.8 2.8 1.3 2.8 2.8-1.3 2.8-2.8 2.8zM16.7 2 9.9 3.1 6.6 2 4.4 8.7h14.5z"})],-1)),_("div",xz,[te(_("h4",kz,null,512),[[$,"core::settings.recaptcha.dont_get_locked"]]),te(_("p",$z,null,512),[[$,"core::settings.recaptcha.ensure_recaptcha_works"]])])])]),_:1}),l(k,{class:"text-right"},{default:p(()=>[l(w,{type:"submit",variant:"primary",disabled:v(n).busy,text:s.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},Sz={__name:"SettingsSecurity",setup(e){const{form:t,submit:n,isReady:o}=Ao();return(a,r)=>{const s=c("ICardHeading"),i=c("ICardHeader"),u=c("IFormSwitchLabel"),d=c("IFormSwitchDescription"),m=c("IFormSwitch"),f=c("IFormSwitchField"),h=c("IFormSwitchGroup"),y=c("ICardBody"),b=c("ICard");return g(),D(de,null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("core::settings.security.security")},null,8,["text"])]),_:1}),l(b,{overlay:!v(o)},{default:p(()=>[l(y,null,{default:p(()=>[l(h,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("core::settings.security.disable_password_forgot")},null,8,["text"]),l(d,{text:a.$t("core::settings.security.disable_password_forgot_info")},null,8,["text"]),l(m,{modelValue:v(t).disable_password_forgot,"onUpdate:modelValue":r[0]||(r[0]=I=>v(t).disable_password_forgot=I),onChange:v(n)},null,8,["modelValue","onChange"])]),_:1}),l(f,null,{default:p(()=>[l(u,{text:a.$t("core::settings.security.block_bad_visitors")},null,8,["text"]),l(d,{text:a.$t("core::settings.security.block_bad_visitors_info")},null,8,["text"]),l(m,{modelValue:v(t).block_bad_visitors,"onUpdate:modelValue":r[1]||(r[1]=I=>v(t).block_bad_visitors=I),onChange:v(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1},8,["overlay"])],64)}}};function bs(){return{gate:Innoclapps.app.config.globalProperties.$gate}}const Tz={__name:"SettingsMenu",setup(e){const{scriptConfig:t}=qe(),n=t("menu.settings");return(o,a)=>{const r=c("Icon"),s=c("IVerticalNavigationItem"),i=c("IVerticalNavigationCollapsible"),u=c("IVerticalNavigation");return g(),R(u,{class:"mb-4 sm:sticky sm:top-10 lg:mb-0"},{default:p(()=>[l(s,{icon:"Cog",href:"/settings/general",active:o.$route.path==="/settings",to:{name:"settings-general"}},{default:p(()=>[l(r,{icon:"Cog"}),ne(" "+K(o.$t("core::settings.general")),1)]),_:1},8,["active"]),(g(!0),D(de,null,Ie(v(n),d=>(g(),R(i,{key:d.id},{default:p(()=>[l(s,{to:d.children.length?void 0:d.path,href:d.children.length?void 0:d.path?o.$router.resolve(d.path).href:void 0},{default:p(()=>[l(r,{icon:d.icon},null,8,["icon"]),ne(" "+K(d.title),1)]),_:2},1032,["to","href"]),(g(!0),D(de,null,Ie(d.children,m=>(g(),R(s,{key:d.id+"-"+m.id,to:m.path,href:m.path?o.$router.resolve(m.path).href:void 0},{default:p(()=>[l(r,{icon:m.icon},null,8,["icon"]),ne(" "+K(m.title),1)]),_:2},1032,["to","href"]))),128))]),_:2},1024))),128))]),_:1})}}},Ez={class:"mx-auto max-w-7xl"},Fz={class:"lg:grid lg:grid-cols-12 lg:gap-x-5"},Az={class:"lg:col-span-3"},Rz={class:"lg:col-span-9"},Dz={__name:"Settings",setup(e){const t=wt(),{gate:n}=bs(),o=V(null);return Qc((a,r,s)=>{a.matched&&a.matched[0]&&a.matched[0].name==="settings"&&document.getElementById("main").scrollTo({top:o.value.getBoundingClientRect().top,behavior:"smooth"}),s()}),La(()=>{n.isRegularUser()&&t.push({path:"/403"})}),(a,r)=>{const s=c("RouterView"),i=c("MainLayout");return g(),R(i,null,{default:p(()=>[_("div",Ez,[_("div",Fz,[_("aside",Az,[l(Tz)]),_("div",{ref_key:"settingsViewRef",ref:o,class:"sm:hidden"},null,512),_("div",Rz,[l(s)])])])]),_:1})}}};function Oz(e,t){let n,o,a;const r=V(!0),s=()=>{r.value=!0,a()};Se(e,s,{flush:"sync"});const i=typeof t=="function"?t:t.get,u=typeof t=="function"?void 0:t.set,d=ey((m,f)=>(o=m,a=f,{get(){return r.value&&(n=i(n),r.value=!1),o(),n},set(h){u==null||u(h)}}));return Object.isExtensible(d)&&(d.trigger=s),d}function av(e){return rp()?(ip(e),!0):!1}function ys(e){let t=!1,n;const o=Ec(!0);return(...a)=>(t||(n=o.run(()=>e(...a)),t=!0),n)}function _a(e){return typeof e=="function"?e():v(e)}const cd=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Pz=e=>e!=null,Mz=Object.prototype.toString,Bz=e=>Mz.call(e)==="[object Object]",Hr=()=>{},Nz=Vz();function Vz(){var e,t;return cd&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function Lz(e,t){function n(...o){return new Promise((a,r)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(a).catch(r)})}return n}const Bw=e=>e();function qz(e,t={}){let n,o,a=Hr;const r=i=>{clearTimeout(i),a(),a=Hr};return i=>{const u=_a(e),d=_a(t.maxWait);return n&&r(n),u<=0||d!==void 0&&d<=0?(o&&(r(o),o=null),Promise.resolve(i())):new Promise((m,f)=>{a=t.rejectOnCancel?f:m,d&&!o&&(o=setTimeout(()=>{n&&r(n),o=null,m(i())},d)),n=setTimeout(()=>{o&&r(o),o=null,m(i())},u)})}}function Uz(e=Bw){const t=V(!0);function n(){t.value=!1}function o(){t.value=!0}const a=(...r)=>{t.value&&e(...r)};return{isActive:xi(t),pause:n,resume:o,eventFilter:a}}function jz(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const o=t;t=void 0,o&&await o},n}function zz(e){return ya()}function Nw(e,t,n={}){const{eventFilter:o=Bw,...a}=n;return Se(e,Lz(o,t),a)}function Hz(e,t,n={}){const{eventFilter:o,...a}=n,{eventFilter:r,pause:s,resume:i,isActive:u}=Uz(o);return{stop:Nw(e,t,{...a,eventFilter:r}),pause:s,resume:i,isActive:u}}function Vw(e,t=!0,n){zz()?Xe(e,n):t?e():We(e)}function zn(e,t,n={}){const{immediate:o=!0}=n,a=V(!1);let r=null;function s(){r&&(clearTimeout(r),r=null)}function i(){a.value=!1,s()}function u(...d){s(),a.value=!0,r=setTimeout(()=>{a.value=!1,r=null,e(...d)},_a(t))}return o&&(a.value=!0,cd&&u()),av(i),{isPending:xi(a),start:u,stop:i}}function Wz(e,t,n){let o=n!=null&&n.immediate?[]:[...e instanceof Function?e():Array.isArray(e)?e:_a(e)];return Se(e,(a,r,s)=>{const i=Array.from({length:o.length}),u=[];for(const m of a){let f=!1;for(let h=0;h<o.length;h++)if(!i[h]&&m===o[h]){i[h]=!0,f=!0;break}f||u.push(m)}const d=o.filter((m,f)=>!i[f]);t(a,o,u,d,s),o=[...a]},n)}function Ba(e,t,n={}){const{debounce:o=0,maxWait:a=void 0,...r}=n;return Nw(e,t,{...r,eventFilter:qz(o,{maxWait:a})})}function qa(e,t,n){const o=Se(e,(a,r,s)=>{a&&(n!=null&&n.once&&We(()=>o()),t(a,r,s))},{...n,once:!1});return o}function Lw(e,t,n){let o;hn(n)?o={evaluating:n}:o=n||{};const{lazy:a=!1,evaluating:r=void 0,shallow:s=!0,onError:i=Hr}=o,u=V(!a),d=s?Pt(t):V(t);let m=0;return Jt(async f=>{if(!u.value)return;m++;const h=m;let y=!1;r&&Promise.resolve().then(()=>{r.value=!0});try{const b=await e(I=>{f(()=>{r&&(r.value=!1),y||I()})});h===m&&(d.value=b)}catch(b){i(b)}finally{r&&h===m&&(r.value=!1),y=!0}}),a?P(()=>(u.value=!0,d.value)):d}function Ur(e){var t;const n=_a(e);return(t=n==null?void 0:n.$el)!=null?t:n}const jl=cd?window:void 0,qw=cd?window.navigator:void 0;function Qo(...e){let t,n,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,a]=e,t=jl):[t,n,o,a]=e,!t)return Hr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const r=[],s=()=>{r.forEach(m=>m()),r.length=0},i=(m,f,h,y)=>(m.addEventListener(f,h,y),()=>m.removeEventListener(f,h,y)),u=Se(()=>[Ur(t),_a(a)],([m,f])=>{if(s(),!m)return;const h=Bz(f)?{...f}:f;r.push(...n.flatMap(y=>o.map(b=>i(m,y,b,h))))},{immediate:!0,flush:"post"}),d=()=>{u(),s()};return av(d),d}let kb=!1;function Uw(e,t,n={}){const{window:o=jl,ignore:a=[],capture:r=!0,detectIframe:s=!1}=n;if(!o)return Hr;Nz&&!kb&&(kb=!0,Array.from(o.document.body.children).forEach(h=>h.addEventListener("click",Hr)),o.document.documentElement.addEventListener("click",Hr));let i=!0;const u=h=>a.some(y=>{if(typeof y=="string")return Array.from(o.document.querySelectorAll(y)).some(b=>b===h.target||h.composedPath().includes(b));{const b=Ur(y);return b&&(h.target===b||h.composedPath().includes(b))}}),m=[Qo(o,"click",h=>{const y=Ur(e);if(!(!y||y===h.target||h.composedPath().includes(y))){if(h.detail===0&&(i=!u(h)),!i){i=!0;return}t(h)}},{passive:!0,capture:r}),Qo(o,"pointerdown",h=>{const y=Ur(e);i=!u(h)&&!!(y&&!h.composedPath().includes(y))},{passive:!0}),s&&Qo(o,"blur",h=>{setTimeout(()=>{var y;const b=Ur(e);((y=o.document.activeElement)==null?void 0:y.tagName)==="IFRAME"&&!(b!=null&&b.contains(o.document.activeElement))&&t(h)},0)})].filter(Boolean);return()=>m.forEach(h=>h())}function Gz(){const e=V(!1),t=ya();return t&&Xe(()=>{e.value=!0},t),e}function rv(e){const t=Gz();return P(()=>(t.value,!!e()))}function Kz(e,t,n={}){const{window:o=jl,...a}=n;let r;const s=rv(()=>o&&"MutationObserver"in o),i=()=>{r&&(r.disconnect(),r=void 0)},u=P(()=>{const h=_a(e),y=(Array.isArray(h)?h:[h]).map(Ur).filter(Pz);return new Set(y)}),d=Se(()=>u.value,h=>{i(),s.value&&h.size&&(r=new MutationObserver(t),h.forEach(y=>r.observe(y,a)))},{immediate:!0,flush:"post"}),m=()=>r==null?void 0:r.takeRecords(),f=()=>{d(),i()};return av(f),{isSupported:s,stop:f,takeRecords:m}}function jw(e={}){var t;const{window:n=jl,deep:o=!0,triggerOnRemoval:a=!1}=e,r=(t=e.document)!=null?t:n==null?void 0:n.document,s=()=>{var d;let m=r==null?void 0:r.activeElement;if(o)for(;m!=null&&m.shadowRoot;)m=(d=m==null?void 0:m.shadowRoot)==null?void 0:d.activeElement;return m},i=V(),u=()=>{i.value=s()};return n&&(Qo(n,"blur",d=>{d.relatedTarget===null&&u()},!0),Qo(n,"focus",u,!0)),a&&Kz(r,d=>{d.filter(m=>m.removedNodes.length).map(m=>Array.from(m.removedNodes)).flat().forEach(m=>{m===i.value&&u()})},{childList:!0,subtree:!0}),u(),i}function $b(e,t={}){const{controls:n=!1,navigator:o=qw}=t,a=rv(()=>o&&"permissions"in o),r=Pt(),s=typeof e=="string"?{name:e}:e,i=Pt(),u=()=>{var m,f;i.value=(f=(m=r.value)==null?void 0:m.state)!=null?f:"prompt"};Qo(r,"change",u);const d=jz(async()=>{if(a.value){if(!r.value)try{r.value=await o.permissions.query(s)}catch{r.value=void 0}finally{u()}if(n)return Wn(r.value)}});return d(),n?{state:i,isSupported:a,query:d}:i}function zw(e={}){const{navigator:t=qw,read:n=!1,source:o,copiedDuring:a=1500,legacy:r=!1}=e,s=rv(()=>t&&"clipboard"in t),i=$b("clipboard-read"),u=$b("clipboard-write"),d=P(()=>s.value||r),m=V(""),f=V(!1),h=zn(()=>f.value=!1,a);function y(){s.value&&k(i.value)?t.clipboard.readText().then(x=>{m.value=x}):m.value=w()}d.value&&n&&Qo(["copy","cut"],y);async function b(x=_a(o)){d.value&&x!=null&&(s.value&&k(u.value)?await t.clipboard.writeText(x):I(x),m.value=x,f.value=!0,h.start())}function I(x){const $=document.createElement("textarea");$.value=x??"",$.style.position="absolute",$.style.opacity="0",document.body.appendChild($),$.select(),document.execCommand("copy"),$.remove()}function w(){var x,$,C;return(C=($=(x=document==null?void 0:document.getSelection)==null?void 0:x.call(document))==null?void 0:$.toString())!=null?C:""}function k(x){return x==="granted"||x==="prompt"}return{isSupported:d,text:m,copied:f,copy:b}}const Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Su="__vueuse_ssr_handlers__",Zz=Yz();function Yz(){return Su in Cu||(Cu[Su]=Cu[Su]||{}),Cu[Su]}function Xz(e,t){return Zz[e]||t}function Qz(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Jz={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Cb="vueuse-storage";function qi(e,t,n,o={}){var a;const{flush:r="pre",deep:s=!0,listenToStorageChanges:i=!0,writeDefaults:u=!0,mergeDefaults:d=!1,shallow:m,window:f=jl,eventFilter:h,onError:y=B=>{console.error(B)},initOnMounted:b}=o,I=(m?Pt:V)(typeof t=="function"?t():t);if(!n)try{n=Xz("getDefaultStorage",()=>{var B;return(B=jl)==null?void 0:B.localStorage})()}catch(B){y(B)}if(!n)return I;const w=_a(t),k=Qz(w),x=(a=o.serializer)!=null?a:Jz[k],{pause:$,resume:C}=Hz(I,()=>T(I.value),{flush:r,deep:s,eventFilter:h});f&&i&&Vw(()=>{n instanceof Storage?Qo(f,"storage",A):Qo(f,Cb,E),b&&A()}),b||A();function F(B,M){if(f){const N={key:e,oldValue:B,newValue:M,storageArea:n};f.dispatchEvent(n instanceof Storage?new StorageEvent("storage",N):new CustomEvent(Cb,{detail:N}))}}function T(B){try{const M=n.getItem(e);if(B==null)F(M,null),n.removeItem(e);else{const N=x.write(B);M!==N&&(n.setItem(e,N),F(M,N))}}catch(M){y(M)}}function S(B){const M=B?B.newValue:n.getItem(e);if(M==null)return u&&w!=null&&n.setItem(e,x.write(w)),w;if(!B&&d){const N=x.read(M);return typeof d=="function"?d(N,w):k==="object"&&!Array.isArray(N)?{...w,...N}:N}else return typeof M!="string"?M:x.read(M)}function A(B){if(!(B&&B.storageArea!==n)){if(B&&B.key==null){I.value=w;return}if(!(B&&B.key!==e)){$();try{(B==null?void 0:B.newValue)!==x.write(I.value)&&(I.value=S(B))}catch(M){y(M)}finally{B?We(C):C()}}}}function E(B){A(B.detail)}return I}function eH(e){const t=ya(),n=Oz(()=>null,()=>t.proxy.$el);return Jr(n.trigger),Xe(n.trigger),n}function dd(e=eH()){const t=Pt(),n=()=>{const o=Ur(e);o&&(t.value=o.parentElement)};return Vw(n),Se(()=>_a(e),n),t}var tH=ua,nH=wr,oH=hs;function aH(e){return function(t,n,o){var a=Object(t);if(!nH(t)){var r=tH(n);t=oH(t),n=function(i){return r(a[i],i,a)}}var s=e(t,n,o);return s>-1?a[r?t[s]:s]:void 0}}var rH=aH,lH=rH,sH=mw,iH=lH(sH),uH=iH;const ft=Rt(uH);var cH=ns,dH=ua,mH=$w,fH=$n;function pH(e,t){var n=fH(e)?cH:mH;return n(e,dH(t))}var vH=pH;const Fn=Rt(vH),hH={class:"-mb-1.5 flex"},gH={key:0,class:"mt-2"},bH={class:"mt-1 flex items-center justify-end divide-x divide-neutral-200 text-right text-base/6 sm:text-sm/6"},yH={class:"relative mt-3"},_H={class:"group -mx-6 px-6"},wH={"data-sortable-handle":"custom-field-options",class:"absolute -left-5 top-2 z-20 hidden cursor-move focus-within:block group-hover:block hover:block"},IH={class:"relative"},xH={__name:"CustomFieldsFormOptions",props:{form:{required:!0,type:Object},options:{required:!0}},emits:["update:options"],setup(e,{emit:t}){const n=e,o=t,a=V(null),r=V(null),s=V(!1),i=V("");function u(){return Nn(Wn(n.options||[]))}function d(){k(u().map((x,$)=>(x.display_order=$+1,x)))}function m(){s.value=!0,We(r.value.focus)}function f(x,$,C){let F=u();F[x][$]=C,k(F)}function h(){y(),We(()=>{a.value.focus()})}function y(x=null){k([...n.options,{name:x,display_order:n.options.length+1,swatch_color:null}])}function b(){s.value=!1}function I(){if(!i.value)return;let x=u();i.value.split(`
`).filter($=>$).forEach($=>x.push({name:$,display_order:x.length+1,swatch_color:null})),k(x),b()}async function w(x){n.options[x].id&&await Innoclapps.confirm();let $=u();$.splice(x,1),k($)}function k(x){o("update:options",x)}return(x,$)=>{const C=c("IFormLabel"),F=c("IButton"),T=c("Icon"),S=c("I18nT"),A=c("ILink"),E=c("IAlertBody"),B=c("IAlert"),M=c("IFormTextarea"),N=c("ITextBlock"),G=c("IFormInput"),U=c("IPopoverButton"),j=c("IColorSwatch"),O=c("IPopoverBody"),H=c("IPopoverPanel"),W=c("IPopover"),X=c("SortableDraggable"),q=c("IFormError"),L=c("IFormGroup"),ee=ze("i-tooltip");return g(),R(L,null,{default:p(()=>[_("div",hH,[l(C,{class:"mt-1.5 grow text-neutral-900 dark:text-neutral-100",label:x.$t("core::fields.options"),required:""},null,8,["label"]),te(l(F,{icon:"PlusSolid",basic:"",small:"",onClick:h},null,512),[[fe,!s.value],[ee,x.$t("core::app.add_another")]])]),e.options&&e.options.length===0&&!s.value?(g(),D("div",gH,[l(B,null,{default:p(()=>[l(E,null,{default:p(()=>[l(S,{scope:"global",tag:"div",class:"flex items-center",keypath:"core::fields.custom.create_option_icon"},{icon:p(()=>[l(T,{icon:"PlusSolid",class:"mx-1 size-5 cursor-pointer",onClick:h})]),_:1}),l(A,{class:"underline underline-offset-4",variant:"info",text:x.$t("core::fields.custom.or_add_options_via_text"),onClick:m},null,8,["text"])]),_:1})]),_:1})])):Z("",!0),te(_("div",null,[l(M,{ref_key:"optionsTextareaRef",ref:r,modelValue:i.value,"onUpdate:modelValue":$[0]||($[0]=ce=>i.value=ce),class:"mt-3.5",placeholder:x.$t("core::fields.custom.text_options_each_on_new_line")},null,8,["modelValue","placeholder"]),_("div",bH,[l(A,{text:x.$t("core::fields.custom.convert_text_to_options"),onClick:I},null,8,["text"]),l(A,{class:"ml-2 pl-2",text:x.$t("core::app.cancel"),onClick:b},null,8,["text"])])],512),[[fe,s.value]]),l(X,Ue(x.$draggable.common,{handle:"[data-sortable-handle='custom-field-options']","model-value":e.options,"item-key":(ce,ue)=>ue,"onUpdate:modelValue":$[1]||($[1]=ce=>k(ce)),onSort:d}),{item:p(({element:ce,index:ue})=>[_("div",yH,[_("div",_H,[_("div",wH,[l(T,{icon:"Selector",class:"size-5 text-neutral-400"})]),_("div",IH,[ce.id?(g(),R(N,{key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",text:x.$t("core::app.id")+": "+ce.id},null,8,["text"])):Z("",!0),l(G,{ref_key:"optionNameRef",ref:a,"model-value":ce.name,class:be(["!pr-20",{"!pl-14":ce.id}]),"onUpdate:modelValue":oe=>f(ue,"name",oe),onKeydown:mo(ot(h,["prevent","stop"]),["enter"])},null,8,["model-value","class","onUpdate:modelValue","onKeydown"]),l(W,{offset:0},{default:p(()=>[l(U,{icon:"ColorSwatch",class:"absolute right-9 top-1.5 sm:top-1",style:Nt({color:ce.swatch_color}),basic:"",small:""},null,8,["style"]),l(H,{class:"w-56"},{default:p(()=>[l(O,null,{default:p(()=>[l(j,{"model-value":ce.swatch_color,swatches:x.$scriptConfig("favourite_colors"),"onUpdate:modelValue":oe=>f(ue,"swatch_color",oe)},null,8,["model-value","swatches","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),l(F,{icon:"XSolid",class:"absolute right-1.5 top-1.5 sm:top-1",basic:"",small:"",onClick:oe=>w(ue)},null,8,["onClick"])])])])]),_:1},16,["model-value","item-key"]),l(q,{error:e.form.getError("options")},null,8,["error"])]),_:1})}}},kH={class:"flex"},$H={class:"relative"},CH={class:"text-danger-600 dark:text-danger-500"},Hw={__name:"CustomFieldsForm",props:{form:{required:!0,type:Object},fieldType:{required:!0,type:String},label:{required:!0,type:String},fieldId:{required:!0,type:String},resourceName:{required:!0,type:String},isUnique:{required:!0},options:{required:!0},inEditMode:Boolean},emits:["update:fieldType","update:label","update:fieldId","update:isUnique","update:options"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),r=Innoclapps.resources(),s=a("fields.custom_fields"),i=a("fields.custom_field_prefix"),u=V(n.fieldId||null),d=n.isUnique,m=P(()=>Fn(s,"type")),f=P(()=>!!ft(s,{type:n.fieldType,optionable:!0})),h=P(()=>!!ft(s,{type:n.fieldType,uniqueable:!0})&&!!ft(r,{acceptsUniqueCustomFields:!0,name:n.resourceName}));return Se(h,y=>{o("update:isUnique",y?n.isUnique!==null?n.isUnique:!1:null)}),Ba(u,y=>{n.inEditMode||o("update:fieldId",y?`${i}${y}`:null)},{debounce:250}),Se(f,(y,b)=>{!y&&b?o("update:options",null):y&&o("update:options",[])}),(y,b)=>{const I=c("ICustomSelect"),w=c("IFormError"),k=c("IFormGroup"),x=c("IFormInput"),$=c("IFormLabel"),C=c("IButtonCopy"),F=c("ITextBlockDark"),T=c("IFormCheckbox"),S=c("IFormCheckboxLabel"),A=c("IFormCheckboxDescription"),E=c("IFormCheckboxField");return g(),D(de,null,[l(k,{"label-for":"field_type",label:y.$t("core::fields.custom.type"),required:""},{default:p(()=>[l(I,{"model-value":e.fieldType,options:m.value,clearable:!1,disabled:e.inEditMode,"onUpdate:modelValue":b[0]||(b[0]=B=>y.$emit("update:fieldType",B)),onOptionSelected:b[1]||(b[1]=B=>e.label?"":y.$refs.labelRef.focus())},null,8,["model-value","options","disabled"]),l(w,{error:e.form.getError("field_type")},null,8,["error"])]),_:1},8,["label"]),l(k,{"label-for":"label",label:y.$t("core::fields.label"),required:""},{default:p(()=>[l(x,{id:"label",ref:"labelRef","model-value":e.label,"onUpdate:modelValue":b[2]||(b[2]=B=>y.$emit("update:label",B))},null,8,["model-value"]),l(w,{error:e.form.getError("label")},null,8,["error"])]),_:1},8,["label"]),f.value?(g(),R(xH,{key:0,options:e.options,form:e.form,"onUpdate:options":b[3]||(b[3]=B=>y.$emit("update:options",B))},null,8,["options","form"])):Z("",!0),l(k,{class:"mt-4",description:y.$t("core::fields.custom.id_info")},{label:p(()=>[_("div",kH,[l($,{class:"mb-1 grow",for:"field_id",label:y.$t("core::fields.custom.id"),required:""},null,8,["label"]),te(l(C,{class:"-mt-1.5 mb-0.5",text:e.fieldId,"success-message":y.$t("core::app.copied"),small:"",basic:""},{default:p(()=>[ne(K(y.$t("core::app.copy")),1)]),_:1},8,["text","success-message"]),[[fe,e.fieldId]])])]),default:p(()=>[_("div",$H,[e.inEditMode?Z("",!0):(g(),R(F,{key:0,class:"pointer-events-none absolute inset-y-0 flex items-center pl-3 opacity-80"},{default:p(()=>[ne(K(v(i)),1)]),_:1})),l(x,{id:"field_id",modelValue:u.value,"onUpdate:modelValue":b[4]||(b[4]=B=>u.value=B),disabled:e.inEditMode,class:be({"!pl-8":!e.inEditMode})},null,8,["modelValue","disabled","class"])]),l(w,{error:e.form.getError("field_id")},null,8,["error"])]),_:1},8,["description"]),h.value?(g(),R(k,{key:1},{default:p(()=>[l(E,null,{default:p(()=>[l(T,{checked:e.isUnique,disabled:e.inEditMode&&!e.isUnique&&!v(d),"onUpdate:checked":b[5]||(b[5]=B=>y.$emit("update:isUnique",B))},null,8,["checked","disabled"]),l(S,{text:y.$t("core::fields.mark_as_unique")},null,8,["text"]),e.inEditMode&&e.isUnique===!1&&v(d)?(g(),R(A,{key:0},{default:p(()=>[_("span",CH,K(y.$t("core::fields.unmark_as_unique_change_info")),1)]),_:1})):!e.inEditMode||e.inEditMode&&!e.isUnique?(g(),R(A,{key:1,text:y.$t("core::fields.mark_as_unique_change_info")},null,8,["text"])):Z("",!0)]),_:1}),l(w,{error:e.form.getError("is_unique")},null,8,["error"])]),_:1})):Z("",!0)],64)}}},SH={__name:"CustomFieldsCreate",props:{resourceName:{type:String,required:!0}},emits:["created"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{form:r}=Qe({label:"",field_type:"Text",field_id:"",resource_name:"",options:[],is_unique:null},{resetOnSuccess:!0});function s(){r.fill("resource_name",n.resourceName)}async function i(){let d=await r.post("/custom-fields");o("created",d),Innoclapps.dialog().hide("newCustomFieldModal"),Innoclapps.success(a("core::fields.custom.created"))}function u(){r.reset(),r.errors.clear()}return(d,m)=>{const f=c("IModal");return g(),R(f,{id:"newCustomFieldModal",size:"sm","ok-text":d.$t("core::app.save"),"ok-disabled":v(r).busy,title:d.$t("core::fields.custom.create"),static:"",form:"",onHidden:u,onSubmit:i,onShow:s},{default:p(()=>[l(Hw,{"field-type":v(r).field_type,"onUpdate:fieldType":m[0]||(m[0]=h=>v(r).field_type=h),label:v(r).label,"onUpdate:label":m[1]||(m[1]=h=>v(r).label=h),"field-id":v(r).field_id,"onUpdate:fieldId":m[2]||(m[2]=h=>v(r).field_id=h),"is-unique":v(r).is_unique,"onUpdate:isUnique":m[3]||(m[3]=h=>v(r).is_unique=h),options:v(r).options,"onUpdate:options":m[4]||(m[4]=h=>v(r).options=h),"resource-name":v(r).resource_name,form:v(r)},null,8,["field-type","label","field-id","is-unique","options","resource-name","form"])]),_:1},8,["ok-text","ok-disabled","title"])}}},TH={__name:"CustomFieldsEdit",props:{customFieldId:{type:Number,required:!0},label:{type:String,required:!0},fieldType:{type:String,required:!0},fieldId:{type:String,required:!0},resourceName:{type:String,required:!0},options:Array,isUnique:Boolean},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{form:r}=Qe({label:"",field_type:"Text",field_id:"",resource_name:"",options:[],is_unique:null},{resetOnSuccess:!0});function s(){r.fill("id",n.customFieldId),r.fill("label",n.label),r.fill("field_type",n.fieldType),r.fill("field_id",n.fieldId),r.fill("is_unique",n.isUnique),r.fill("resource_name",n.resourceName),r.fill("options",structuredClone(Wn(n.options||[])))}async function i(){let d=await r.put(`/custom-fields/${r.id}`);o("updated",d),Innoclapps.dialog().hide("editCustomFieldModal"),Innoclapps.success(a("core::fields.custom.updated"))}function u(){r.reset(),r.errors.clear()}return(d,m)=>{const f=c("IModal");return g(),R(f,{id:"editCustomFieldModal",size:"sm","ok-text":d.$t("core::app.save"),"ok-disabled":v(r).busy,title:d.$t("core::fields.custom.update"),static:"",form:"",onSubmit:i,onHidden:u,onShow:s},{default:p(()=>[l(Hw,{"field-type":v(r).field_type,"onUpdate:fieldType":m[0]||(m[0]=h=>v(r).field_type=h),label:v(r).label,"onUpdate:label":m[1]||(m[1]=h=>v(r).label=h),"field-id":v(r).field_id,"onUpdate:fieldId":m[2]||(m[2]=h=>v(r).field_id=h),"is-unique":v(r).is_unique,"onUpdate:isUnique":m[3]||(m[3]=h=>v(r).is_unique=h),options:v(r).options,"onUpdate:options":m[4]||(m[4]=h=>v(r).options=h),"resource-name":v(r).resource_name,form:v(r),"in-edit-mode":""},null,8,["field-type","label","field-id","is-unique","options","resource-name","form"])]),_:1},8,["ok-text","ok-disabled","title"])}}};function Ro(){const e=wt(),t=Ct();function n({resourceName:r,resourceId:s,mode:i}){e.push({query:{...t.query,floating_resource:r,floating_resource_id:s,mode:i}})}function o(r){n({...r,mode:"detail"})}function a(r){n({...r,mode:"edit"})}return{floatResource:n,floatResourceInEditMode:a,floatResourceInDetailMode:o}}function Cn(e=!1){const t=V(e);function n(o=!0){t.value=o}return{setLoading:n,isLoading:t}}function Ww(){let e=new WeakMap;const t=function(){e=new WeakMap},n=function(o,a,r=!0){if(o.tagName=="HTML")return!0;let s=a.getBoundingClientRect(),i,u;if(e.has(o)){const d=e.get(o);i=d.rect,u=d.parentNode}else i=arguments[3]||o.getBoundingClientRect(),u=o.parentNode,e.set(o,{rect:i,parentNode:u});return(r?i.left>=s.left:i.right>s.left)&&(r?i.right<=s.right:i.left<s.right)};return mn(t),{isColumnVisible:n,clearCache:t}}const Sb={data:[],current_page:1,per_page:25,per_page_options:[25,50,100],total:0,last_page:1,from:1,to:1};class EH{constructor(t={}){this.state=Object.assign({},Sb,t)}get pagination(){return this.buildLinks(this.currentPage,this.lastPage)}get items(){return this.state.data}get currentPage(){return this.getPaginationAttribute("current_page")}set currentPage(t){this.setPaginationAttribute("current_page",t)}get from(){return this.getPaginationAttribute("from")}get to(){return this.getPaginationAttribute("to")}get lastPage(){return this.getPaginationAttribute("last_page")}get perPage(){return this.getPaginationAttribute("per_page")}set perPage(t){this.setPaginationAttribute("per_page",t),this.currentPage=1}get total(){return this.getPaginationAttribute("total")}get perPageOptions(){let t=this.state.per_page_options,n=parseInt(this.perPage);return t.includes(n)||(t.push(n),t.sort(function(o,a){return o-a})),t}set perPageOptions(t){this.state.per_page_options=t}get hasPagination(){return this.lastPage>1}get shouldRenderLinks(){return this.pagination.includes(this.currentPage)}get hasNextPage(){return this.currentPage+1<=this.lastPage}get hasPreviousPage(){return this.currentPage-1>=1}isNotEmpty(){return this.items.length>0}isEmpty(){return!this.isNotEmpty()}previousPage(){this.page(this.currentPage-1)}nextPage(){this.page(this.currentPage+1)}page(t){this.currentPage=t}isCurrentPage(t){return this.currentPage===t}buildLinks(t,n,o=3){let a=[];for(let r=Math.max(2,t-o);r<=Math.min(n-1,t+o);r++)a.push(r);return t-o>2&&a.unshift("..."),t+o<n-1&&a.push("..."),a.unshift(1),a.push(n),a}getPaginationAttribute(t){return this.state[t]}setPaginationAttribute(t,n){return this.state[t]&&(this.state[t]=n),this}setState(t){this.state=Object.assign({},this.state,t)}flush(){this.state=Sb}}const Tb={data:[],meta:{current_page:1,from:1,last_page:1,per_page:25,total:0,to:1},per_page_options:[25,50,100]};class Gw extends EH{constructor(t={}){super(),this.state=Object.assign({},Tb,t)}getPaginationAttribute(t){return this.state.meta[t]}setPaginationAttribute(t,n){return this.state.meta&&(this.state.meta[t]=n),this}flush(){this.state=Tb}}const FH={__name:"AsyncTableCell",props:{field:{type:Object,required:!0},item:{type:Object,required:!0},formatter:{type:Function,required:!0}},setup(e){const t=e,n=P(()=>({row:t.item,column:t.field,formatted:o.value})),o=P(()=>t.formatter(t.item,t.field));return(a,r)=>{const s=c("ITableCell");return g(),R(s,{class:be([e.item.tdClass,e.field.tdClass])},{default:p(()=>[Ee(a.$slots,"default",zt(Qt(n.value)))]),_:3},8,["class"])}}},AH=["textContent"],RH={__name:"AsyncTableHeader",props:{isSortable:Boolean,heading:String,headingKey:{type:String,required:!0},ctx:{type:Object,required:!0}},emits:["update:ctx"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=V(null),s=P(()=>o.ctx.sortBy===o.headingKey),i=P(()=>o.ctx.direction==="asc"&&s.value);function u(){const d={};s.value?(d.sortBy=o.headingKey,d.direction=o.ctx.direction==="desc"?"asc":"desc"):(d.sortBy=o.headingKey,d.direction="desc"),a("update:ctx",Object.assign({},o.ctx,d))}return t({header:r}),(d,m)=>{const f=c("Icon"),h=c("ILink"),y=c("ITableHeader");return g(),R(y,{ref_key:"headerRef",ref:r,class:"group bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[e.isSortable?(g(),R(h,{key:0,class:"inline-flex w-full items-center hover:text-neutral-700 focus:outline-none dark:hover:text-neutral-400",plain:"",onClick:u},{default:p(()=>[ne(K(e.heading)+" ",1),l(f,{icon:i.value?"ChevronUpSolid":"ChevronDownSolid",class:be(["ml-1.5 size-5 sm:size-4",s.value?"opacity-100":"opacity-0 group-hover:opacity-100"])},null,8,["icon","class"])]),_:1})):(g(),D("span",{key:1,textContent:K(e.heading)},null,8,AH))]),_:1},512)}}},DH={class:"flex items-center justify-between"},OH={class:"flex flex-1 justify-between sm:hidden"},PH={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},MH={class:"flex items-center gap-x-2","aria-label":"Pagination"},BH={class:"flex items-center gap-x-2"},NH={key:0,"aria-hidden":"true",class:"w-[2.25rem] select-none text-center text-sm/6 font-semibold text-neutral-900 dark:text-white",textContent:"…"},Kw={__name:"TablePagination",props:{loading:{type:Boolean,required:!1},isCurrentPageCheck:{type:Function,required:!0},renderLinks:{type:Boolean,required:!0},links:{type:Array},hasNextPage:{type:Boolean,required:!0},hasPreviousPage:{type:Boolean,required:!0},from:{type:Number,required:!0},to:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["goToPrevious","goToNext","goToPage"],setup(e){return(t,n)=>{const o=c("IButton"),a=c("Icon"),r=c("IText");return g(),D("div",DH,[_("div",OH,[l(o,{class:"gap-x-4",icon:"ArrowLeft",disabled:!e.hasPreviousPage||e.loading,text:t.$t("pagination.previous"),basic:"",onClick:n[0]||(n[0]=s=>t.$emit("goToPrevious"))},null,8,["disabled","text"]),l(o,{class:"gap-x-4",disabled:!e.hasNextPage||e.loading,basic:"",onClick:n[1]||(n[1]=s=>t.$emit("goToNext"))},{default:p(()=>[ne(K(t.$t("pagination.next"))+" ",1),l(a,{icon:"ArrowRight"})]),_:1},8,["disabled"])]),_("div",PH,[l(r,{text:t.$t("core::table.info",{from:e.from,to:e.to,total:e.total})},null,8,["text"]),_("nav",MH,[e.renderLinks?(g(),D(de,{key:0},[l(o,{"aria-label":"Previous page",class:"min-w-9",icon:"ChevronLeftSolid",disabled:!e.hasPreviousPage||e.loading,basic:"",onClick:n[2]||(n[2]=s=>t.$emit("goToPrevious"))},null,8,["disabled"]),_("div",BH,[(g(!0),D(de,null,Ie(e.links,(s,i)=>(g(),D(de,{key:i},[s==="..."?(g(),D("div",NH)):(g(),R(o,{key:1,"aria-current":"page",class:"min-w-9","aria-label":"Page "+s,text:s,active:e.isCurrentPageCheck(s),disabled:e.loading,basic:"",onClick:u=>e.isCurrentPageCheck(s)?void 0:t.$emit("goToPage",s)},null,8,["aria-label","text","active","disabled","onClick"]))],64))),128))]),l(o,{"aria-label":"Next page",class:"min-w-9",icon:"ChevronRightSolid",disabled:!e.hasNextPage||e.loading,basic:"",onClick:n[3]||(n[3]=s=>t.$emit("goToNext"))},null,8,["disabled"])],64)):Z("",!0)])])])}}},VH={class:"flex items-center space-x-1 text-base text-neutral-600 dark:text-white sm:text-sm"},LH={__name:"TablePerPageOptions",props:{disabled:Boolean,perPage:Number,perPageOptions:Array},emits:["change","update:perPage"],setup(e,{emit:t}){const n=t;function o(a){n("update:perPage",a),n("change",a)}return(a,r)=>{const s=c("IDropdownButton"),i=c("IDropdownItem"),u=c("IDropdownMenu"),d=c("IDropdown"),m=ze("t");return g(),D("div",VH,[te(_("span",null,null,512),[[m,"core::table.length_menu.show"]]),l(d,null,{default:p(()=>[l(s,{disabled:e.disabled,text:e.perPage||"--",basic:""},null,8,["disabled","text"]),l(u,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.perPageOptions,f=>(g(),R(i,{key:f,active:e.perPage==f,text:f,onClick:h=>o(f)},null,8,["active","text","onClick"]))),128))]),_:1})]),_:1}),te(_("span",null,null,512),[[m,"core::table.length_menu.entries"]])])}}},qH={class:"mt-2 flex items-center font-normal"},UH={class:"mr-1 font-medium text-neutral-800 dark:text-neutral-100"},jH={__name:"TableStackedCell",props:{field:{type:Object,required:!0},item:{type:Object,required:!0},formatter:{type:Function,required:!0}},setup(e){const t=e,n=P(()=>({row:t.item,column:t.field,formatted:o.value})),o=P(()=>t.formatter(t.item,t.field));return(a,r)=>(g(),D("div",qH,[_("span",UH,K(e.field.label)+": ",1),Ee(a.$slots,"default",zt(Qt(n.value)))]))}},zH={class:"flex flex-col items-center justify-between px-6 py-3 md:flex-row","data-slot":"header"},HH={key:0,class:"w-full md:w-auto"},WH=["textContent"],GH={class:"text-neutral-700 dark:text-neutral-300"},lv=Object.assign({inheritAttrs:!1},{__name:"AsyncTable",props:{stackable:Boolean,sticky:Boolean,wrapperClass:[String,Array,Object],requestUri:{required:!0,type:String},requestQueryString:Object,tableId:{required:!0,type:String},floatFirst:Object,actionColumn:Boolean,initialData:Object,fields:Array,searchable:{type:Boolean,default:!0},sortBy:String},emits:["dataLoaded"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{setLoading:s,isLoading:i}=Cn(),{floatResource:u}=Ro(),{isColumnVisible:d}=Ww(),m=V(null),f=V(""),h=V(!1);let y=null;const b=V(new Gw),I=V(null),w=ro({}),k=V({sortBy:null,direction:null}),x=V([]),$=P(()=>b.value.isNotEmpty()?"":i.value?"...":f.value?r("core::app.no_search_results"):r("core::table.empty")),C=P(()=>o.fields.filter(U=>w[U.key])),F=P(()=>o.fields.length),T=P(()=>({page:b.value.currentPage,per_page:b.value.perPage,q:f.value,order:[{field:k.value.sortBy||o.sortBy,direction:k.value.direction||"asc"}],...o.requestQueryString||{}}));Se(()=>b.value.currentPage,M,{immediate:!0});function S(U,j){return j.formatter?j.formatter(U[j.key],j.key,U):U[j.key]}function A(U){I.value=U,E()}function E(){M()}async function B(){N(),s(!0);let{data:U}=await Innoclapps.request(`/${o.requestUri}`,{params:T.value,cancelToken:new ol(j=>y=j)});b.value.setState(U.value?U.value:U),a("dataLoaded",{items:b.value.items,requestQueryString:T.value}),o.stackable&&We(G),s(!1)}function M(){!h.value&&o.initialData?(h.value=!0,b.value.setState(o.initialData),o.stackable&&We(G)):I.value!==null?(b.value.setState(I.value),I.value=null,o.stackable&&We(G)):B()}function N(){y&&y()}function G(){o.fields.forEach((U,j)=>{j>0&&x.value[j]&&(w[U.key]=!d(x.value[j].header.$el,m.value.$wrapperEl))})}return o.stackable&&Qo(window,"resize",G),un(()=>{b.value.flush()}),t({reload:E,replaceCollection:A}),(U,j)=>{const O=c("InputSearch"),H=c("ITableRow"),W=c("ITableHead"),X=c("ILink"),q=c("IText"),L=c("ITableCell"),ee=c("ITableBody"),ce=c("ITable"),ue=c("IOverlay");return g(),D(de,null,[_("div",zH,[l(LH,{"per-page":b.value.perPage,"onUpdate:perPage":j[0]||(j[0]=oe=>b.value.perPage=oe),class:"mb-2 md:mb-0","per-page-options":b.value.perPageOptions,disabled:v(i),onChange:M},null,8,["per-page","per-page-options","disabled"]),e.searchable?(g(),D("div",HH,[l(O,{modelValue:f.value,"onUpdate:modelValue":[j[1]||(j[1]=oe=>f.value=oe),M]},null,8,["modelValue"])])):Z("",!0)]),l(ue,{show:v(i)},{default:p(()=>[_("div",{class:be(e.wrapperClass)},[l(ce,Ue({id:e.tableId},U.$attrs,{ref_key:"tableRef",ref:m}),{default:p(()=>[l(W,null,{default:p(()=>[l(H,{class:be(e.sticky&&"[&>th]:sticky [&>th]:top-0 [&>th]:z-10 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter")},{default:p(()=>[(g(!0),D(de,null,Ie(e.fields,oe=>(g(),R(RH,{key:"th-"+oe.key,ref_for:!0,ref_key:"tableHeadingsRef",ref:x,ctx:k.value,"onUpdate:ctx":[j[2]||(j[2]=re=>k.value=re),M],width:oe.width,class:be({hidden:w[oe.key]}),"is-sortable":oe.sortable,heading:oe.label,"heading-key":oe.key},null,8,["ctx","width","class","is-sortable","heading","heading-key"]))),128))]),_:1},8,["class"])]),_:1}),l(ee,null,{default:p(()=>[(g(!0),D(de,null,Ie(b.value.items,oe=>(g(),D(de,{key:"tr-"+oe.id},[Ee(U.$slots,"before-row",{row:oe}),l(H,{class:be([oe.trClass?oe.trClass:null])},{default:p(()=>[(g(!0),D(de,null,Ie(e.fields,re=>(g(),R(FH,{key:"td-"+re.key,class:be(["first:font-medium",{hidden:w[re.key]}]),field:re,item:oe,formatter:S},{default:p(Y=>[Ee(U.$slots,re.key,Ue({ref_for:!0},Y),()=>[e.floatFirst&&re.key===e.fields[0].key?(g(),R(X,{key:0,text:Y.formatted,onClick:ae=>v(u)({resourceName:e.floatFirst.resourceName,resourceId:oe.id,mode:e.floatFirst.mode})},null,8,["text","onClick"])):re.key===e.fields[0].key&&oe.path?(g(),R(X,{key:1,to:oe.path,text:Y.formatted},null,8,["to","text"])):(g(),D("span",{key:2,textContent:K(Y.formatted)},null,8,WH))]),re.key===e.fields[0].key?(g(!0),D(de,{key:0},Ie(C.value,ae=>(g(),R(jH,{key:"stacked-"+ae.key,field:ae,item:oe,formatter:S},{default:p(se=>[Ee(U.$slots,ae.key,Ue({ref_for:!0},se),()=>[_("span",GH,K(se.formatted),1)])]),_:2},1032,["field","item"]))),128)):Z("",!0)]),_:2},1032,["field","item","class"]))),128))]),_:2},1032,["class"]),Ee(U.$slots,"after-row",{row:oe})],64))),128)),b.value.isEmpty()?(g(),R(H,{key:0},{default:p(()=>[l(L,{colspan:F.value},{default:p(()=>[Ee(U.$slots,"empty",{text:$.value,loading:v(i),search:f.value},()=>[l(q,null,{default:p(()=>[ne(K($.value),1)]),_:1})])]),_:3},8,["colspan"])]),_:3})):Z("",!0)]),_:3})]),_:3},16,["id"])],2)]),_:3},8,["show"]),b.value.hasPagination?(g(),R(Kw,{key:0,class:"mt-1.5 px-6 py-3","is-current-page-check":oe=>b.value.isCurrentPage(oe),"has-next-page":b.value.hasNextPage,"has-previous-page":b.value.hasPreviousPage,links:b.value.pagination,"render-links":b.value.shouldRenderLinks,from:b.value.from,to:b.value.to,total:b.value.total,loading:v(i),onGoToNext:j[3]||(j[3]=oe=>b.value.nextPage()),onGoToPrevious:j[4]||(j[4]=oe=>b.value.previousPage()),onGoToPage:j[5]||(j[5]=oe=>b.value.page(oe))},null,8,["is-current-page-check","has-next-page","has-previous-page","links","render-links","from","to","total","loading"])):Z("",!0)],64)}}});var KH=Ni;function ZH(e){return typeof e=="function"?e:KH}var YH=ZH,XH=fw,QH=Li,JH=YH,eW=$n;function tW(e,t){var n=eW(e)?XH:QH;return n(e,JH(t))}var nW=tW,oW=nW;const ga=Rt(oW);function In(e=[]){const t=fn(),{scriptConfig:n}=qe(),o=V(Nn(bt(e)||[]));let a=null,r=null;const s=P(()=>o.value.length>0),i=P(()=>o.value.filter(C=>C.collapsed).length);function u(C){return o.value.find(F=>F.attribute===C)}function d(C){if(!hn(C))return console.error("The resource must be a ref.");m(C),a=C,y(C.value)}function m(C){r&&r(),r=Se(()=>C.value._sync_timestamp,()=>{y(a.value)})}function f(C,F){let T=u(C);if(!T){console.trace(`Cannot update "${C}" field. [FIELD NOT FOUND].`);return}ga(F,(S,A)=>T[A]=S)}function h(C,F){f(C,{value:F})}function y(C){o.value.forEach(F=>{let T=b(F,C);T!==void 0&&(F.value=T)})}function b(C,F){return C.belongsToRelation?Object.hasOwn(F,C.belongsToRelation)?F[C.belongsToRelation]:void 0:C.attribute&&Object.hasOwn(F,C.attribute)?F[C.attribute]:void 0}async function I(C,F,T={}){let S=Nn(await t.dispatch("fields/getForResource",{resourceName:bt(C),view:F,...T}));return S.forEach((A,E)=>{A.component==="timezone-field"?S[E].timezones=Object.freeze(A.timezones):(A.attribute==="country_id"||A.attribute==="industry_id")&&(S[E].options=Object.freeze(A.options))}),S}async function w(C,F={}){return await I(C,n("fields.views.create"),F)}async function k(C,F,T={}){return await I(C,n("fields.views.detail"),{...T,resourceId:F})}async function x(C,F,T={}){return await I(C,n("fields.views.update"),{...T,resourceId:F})}async function $(C,F={}){return await I(C,n("fields.views.index"),F)}return{fields:o,hasFields:s,hydrateFields:y,setResource:d,findField:u,updateField:f,updateFieldValue:h,totalCollapsable:i,getCreateFields:w,getUpdateFields:x,getDetailFields:k,getIndexFields:$}}function qt(e){let t=null,n=Pt({});hn(e)?Se(e,w=>{t=w,w&&(n.value=Innoclapps.resource(w))},{immediate:!0,flush:"post"}):(t=bt(e),n.value=Innoclapps.resource(t)||{});const o=V(!1),a=V(!1),r=V(!1),s=V(!1),i=V(!1),u=V(!1);async function d(w){s.value=!0;try{let{data:k}=await Innoclapps.request(`/${t}/${w}`);return k}finally{s.value=!1}}async function m(w,k,x={}){let $;typeof w.put!="function"?$=Qe(w).form:$=w,r.value=!0;try{const C=await $.put(`/${t}/${k}`,x);return Ot("resource-updated",{resourceName:t,resourceId:k,resource:C}),Ot(`${t}-updated`,C),C}finally{r.value=!1}}async function f(w){let k;typeof w.post!="function"?k=Qe(w).form:k=w,o.value=!0;try{const x=await k.post(`/${t}`);return Ot("resource-updated",{resourceName:t,resourceId:x.id,resource:x}),Ot(`${t}-updated`,x),x}finally{o.value=!1}}async function h(w){a.value=!0;try{const k=await Innoclapps.request().delete(`/${t}/${w}`);return Ot("resource-deleted",{resourceName:t,resourceId:w}),Ot(`${t}-deleted`,k),k}finally{a.value=!1}}async function y(w){i.value=!0;try{const{data:k}=await Innoclapps.request().post(`/${t}/${w}/clone`);return Ot("resource-cloned",{resourceName:t,resourceId:w,clonedResource:k}),Ot(`${t}-cloned`,k),k}finally{i.value=!1}}async function b(w,k){u.value=!0;try{let{data:x}=await Innoclapps.request().post(`associations/${t}/${w}`,k);return x}finally{u.value=!1}}async function I(w,k){u.value=!0;try{const{data:x}=await Innoclapps.request().delete(`associations/${t}/${w}`,{data:k});return x}finally{u.value=!1}}return{retrieveResource:d,resourceBeingRetrieved:s,createResource:f,resourceBeingCreated:o,cloneResource:y,resourceBeingCloned:i,updateResource:m,resourceBeingUpdated:r,deleteResource:h,resourceBeingDeleted:a,detachAssociations:I,syncAssociations:b,associationsBeingSaved:u,resourceName:e,resourceInformation:n}}const an=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},aW={class:"flex justify-between"},rW={__name:"ResourceSimpleManager",props:{resourceName:{required:!0,type:String},withCancel:{type:Boolean,default:!0}},emits:["cancel","updated","created","deleted"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{scriptConfig:r,resetStoreState:s}=qe(),{fields:i,hydrateFields:u,getCreateFields:d,getUpdateFields:m}=In(),{form:f}=Qe(),{updateResource:h,createResource:y,retrieveResource:b,deleteResource:I}=qt(n.resourceName),w=V([{key:"id",label:a("core::app.id"),sortable:!0},{key:"name",label:a("core::fields.label"),sortable:!0},{key:"actions",label:"",width:"8%",tdClass:"text-right"}]),k=V(null),x=r(`resources.${n.resourceName}.singularLabel`),$=r(`resources.${n.resourceName}.label`);function C(){f.reset(),i.value=[]}function F(){o("cancel")}async function T(){let N=await d(n.resourceName);w.value[1].key=N[0].attribute,i.value=N,Innoclapps.dialog().show("createRecordModal")}async function S(N){let G=await m(n.resourceName,N),U=await b(N);w.value[1].key=G[0].attribute,f.fill("id",N),i.value=G,u(U),Innoclapps.dialog().show("updateRecordModal")}async function A(){await y(f),M("created"),Innoclapps.dialog().hide("createRecordModal")}async function E(){await h(f,f.id),M("updated"),Innoclapps.dialog().hide("updateRecordModal")}async function B(N){await I(N),M("deleted")}function M(N){Innoclapps.success(a("core::resource."+N)),k.value.reload(),s(),o(N)}return(N,G)=>{const U=c("FormFields"),j=c("IModal"),O=c("ICardHeading"),H=c("IButton"),W=c("ICardActions"),X=c("ICardHeader"),q=c("ILink"),L=c("ITableRowAction"),ee=c("ITableRowActions"),ce=c("ICard"),ue=ze("i-tooltip");return g(),D(de,null,[l(j,{id:"createRecordModal",size:"sm","ok-text":N.$t("core::app.create"),"ok-disabled":v(f).busy,title:N.$t("core::resource.create",{resource:v(x)}),static:"",form:"",onSubmit:A,onHidden:C},{default:p(()=>[l(U,{fields:v(i),form:v(f),"resource-name":e.resourceName,"is-floating":"","focus-first":"",onUpdateFieldValue:G[0]||(G[0]=oe=>v(f).fill(oe.attribute,oe.value)),onSetInitialValue:G[1]||(G[1]=oe=>v(f).set(oe.attribute,oe.value))},null,8,["fields","form","resource-name"])]),_:1},8,["ok-text","ok-disabled","title"]),l(j,{id:"updateRecordModal",size:"sm","ok-text":N.$t("core::app.save"),"ok-disabled":v(f).busy,title:N.$t("core::resource.edit",{resource:v(x)}),static:"",form:"",onHidden:C,onSubmit:E},{default:p(()=>[l(U,{fields:v(i),form:v(f),"resource-name":e.resourceName,"resource-id":v(f).id,"is-floating":"",onUpdateFieldValue:G[2]||(G[2]=oe=>v(f).fill(oe.attribute,oe.value)),onSetInitialValue:G[3]||(G[3]=oe=>v(f).set(oe.attribute,oe.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1},8,["ok-text","ok-disabled","title"]),l(X,null,{default:p(()=>[Ee(N.$slots,"header",{},()=>[l(O,{text:v($)},null,8,["text"])],!0),l(W,null,{default:p(()=>[te(l(H,{text:N.$t("core::app.go_back"),basic:"",onClick:F},null,8,["text"]),[[fe,e.withCancel]]),l(H,{variant:"primary",icon:"PlusSolid",text:N.$t("core::resource.create",{resource:v(x)}),onClick:T},null,8,["text"])]),_:1})]),_:3}),l(ce,null,{default:p(()=>[l(lv,{ref_key:"tableRef",ref:k,"wrapper-class":"px-6",class:"[--gutter:theme(spacing.6)]","sort-by":"name","table-id":e.resourceName,"request-uri":e.resourceName,fields:w.value,bleed:""},{name:p(({row:oe})=>[_("div",aW,[l(q,{class:"font-medium",text:oe.name,onClick:re=>S(oe.id)},null,8,["text","onClick"])])]),actions:p(({row:oe})=>[l(ee,null,{default:p(()=>[l(L,{icon:"PencilAlt",text:N.$t("core::app.edit"),onClick:re=>S(oe.id)},null,8,["text","onClick"]),te((g(),D("span",null,[l(L,{icon:"Trash",disabled:oe.is_primary,text:N.$t("core::app.delete"),onClick:re=>N.$confirm(()=>B(oe.id))},null,8,["disabled","text","onClick"])])),[[ue,oe.is_primary?N.$t("core::resource.primary_record_delete_info",{resource:v(x)}):null]])]),_:2},1024)]),_:1},8,["table-id","request-uri","fields"])]),_:1})],64)}}},Ui=an(rW,[["__scopeId","data-v-4a3e1dbb"]]),lW={class:"lg:flex lg:items-center lg:justify-between"},sW={class:"mb-0 mt-3"},iW={class:"max-h-96 overflow-y-auto"},uW={class:"flex items-center"},cW={class:"grow"},dW={class:"space-x-2"},mW={class:"text-base/6 font-medium text-neutral-800 dark:text-white sm:text-sm/6"},fW={class:"text-xs text-neutral-800 dark:text-white"},pW={key:0,class:"text-xs font-medium text-info-600 dark:text-white"},vW={class:"inline-flex items-center space-x-1 self-start"},hW={"data-sortable-handle":"field-order",class:"ml-1.5 cursor-move"},gW={key:0,class:"mt-3"},$m={__name:"SettingsFieldsCustomize",props:{group:{required:!0,type:String},view:{required:!0,type:String},heading:{type:String,required:!0},subHeading:{type:String,required:!0},collapseOption:{default:!0,type:Boolean},lazy:{default:!0,type:Boolean}},emits:["deleteRequested","updateRequested","saved"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),s=Ct(),{scriptConfig:i,resetStoreState:u}=qe(),d=V(null),m=V(!1),f=V(!1),h=V([]),y=V(!1),b=V(!1),I=V(!1),w=P(()=>v(y)||v(b)||v(I)),k=P({set(U){h.value=U.map(j=>(j.isRequired&&(j[v(F)]=!0),!j.isUnique&&j.canUnmarkUnique&&(j.uniqueUnmarked=!0),j))},get(){return d.value?h.value.filter(U=>U.label.toLowerCase().includes(d.value.toLowerCase())):h.value}}),x=P(()=>o.view===i("fields.views.update")),$=P(()=>o.view===i("fields.views.detail")),C=P(()=>o.view===i("fields.views.create")),F=P(()=>C.value?"showOnCreation":x.value?"showOnUpdate":$.value?"showOnDetail":"");function T(){return"/fields/settings/"+o.group+"/"+o.view}function S(){const U={};return h.value.forEach((j,O)=>{U[j.attribute]={order:O+1,[v(F)]:j.isRequired||j[v(F)],isRequired:j.isRequired,...j.canUnmarkUnique&&{uniqueUnmarked:j.uniqueUnmarked||!1},...o.collapseOption&&{collapsed:j.collapsed}}}),U}function A(U){a("updateRequested",U)}function E(U){a("deleteRequested",U)}async function B(U){y.value=!0;try{await Innoclapps.request().post(T(),S(),{params:{intent:o.view}}),u(),U&&(Innoclapps.success(r("core::fields.configured")),a("saved"))}catch(j){console.error("Error submitting request:",j)}finally{y.value=!1}}function M(){o.lazy&&m.value===!1&&G(),f.value=!f.value}async function N(){b.value=!0;try{const{data:U}=await Innoclapps.request().delete(`${T()}/reset`,{params:{intent:o.view}});k.value=U,u(),Innoclapps.success(r("core::fields.reseted"))}catch(U){console.error("Error resetting fields:",U)}finally{b.value=!1}}async function G(){I.value=!0;let{data:U}=await Innoclapps.request(T(),{params:{intent:o.view}});I.value=!1,k.value=U,m.value=!0}return o.lazy||G(),s.query.view&&s.query.view===o.view&&M(),Se(()=>o.group,G),t({fetch:G,submit:B}),(U,j)=>{const O=c("ICardHeading"),H=c("IButton"),W=c("ICardActions"),X=c("ICardHeader"),q=c("IText"),L=c("InputSearch"),ee=c("ICardBody"),ce=c("IBadge"),ue=c("IButtonCopy"),oe=c("Icon"),re=c("IFormCheckbox"),Y=c("IFormCheckboxLabel"),ae=c("IFormCheckboxField"),se=c("IFormCheckboxDescription"),xe=c("SortableDraggable"),le=c("ICard"),ge=ze("i-tooltip");return g(),R(le,{class:"mh-96"},{default:p(()=>[l(X,null,{default:p(()=>[l(O,{text:e.heading},null,8,["text"]),l(W,null,{default:p(()=>[te(l(H,{variant:"primary",loading:y.value,disabled:w.value,text:U.$t("core::app.save"),small:"",onClick:j[0]||(j[0]=ve=>B(!0))},null,8,["loading","disabled","text"]),[[fe,f.value]]),te(l(H,{variant:"secondary",loading:b.value,text:U.$t("core::app.reset"),disabled:w.value,"confirm-text":U.$t("core::app.confirm"),small:"",confirmable:"",onConfirmed:N},null,8,["loading","text","disabled","confirm-text"]),[[fe,f.value]]),te(l(H,{variant:"secondary",icon:"ChevronUpSolid",loading:I.value,disabled:w.value,small:"",onClick:M},null,8,["loading","disabled"]),[[fe,f.value]])]),_:1})]),_:1}),l(ee,{class:"cursor-pointer"},{default:p(()=>[_("div",lW,[l(q,{text:e.subHeading,onClick:M},null,8,["text"]),te(l(H,{variant:"secondary",class:"mt-4 shrink-0 lg:ml-5 lg:mt-0",text:U.$t("core::fields.manage"),small:"",onClick:M},null,8,["text"]),[[fe,!f.value]])]),te(_("div",sW,[l(L,{modelValue:d.value,"onUpdate:modelValue":j[1]||(j[1]=ve=>d.value=ve)},null,8,["modelValue"])],512),[[fe,f.value]])]),_:1}),te(_("ul",iW,[l(xe,Ue(U.$draggable.scrollable,{handle:"[data-sortable-handle='field-order']",list:k.value,"item-key":ve=>e.view+" - "+ve.attribute,group:e.view}),{item:p(({element:ve})=>[_("li",{class:be(["border-b border-neutral-200 px-4 py-4 first:border-t dark:border-neutral-500/30 sm:px-6",{"bg-neutral-50 dark:bg-neutral-700/60":ve.primary,"opacity-60":!ve[F.value]}])},[_("div",uW,[_("div",cW,[_("div",dW,[_("span",mW,K(ve.label),1),te(l(ce,{variant:"info",text:U.$t("core::fields.custom.field")},null,8,["text"]),[[fe,ve.customField]]),te(l(ce,{variant:"success",text:U.$t("core::fields.field_is_unique")},null,8,["text"]),[[fe,ve.isUnique]]),te(l(ce,{variant:"warning",text:U.$t("core::fields.is_readonly")},null,8,["text"]),[[fe,ve.readonly]])]),te(_("span",fW,[j[2]||(j[2]=_("br",null,null,-1)),ne(K(ve.helpText),1)],512),[[fe,ve.helpText]]),ve.primary?(g(),D("span",pW,[j[3]||(j[3]=_("br",null,null,-1)),ne(K(U.$t("core::fields.primary")),1)])):Z("",!0)]),_("div",vW,[te(l(ue,{text:ve.attribute,small:""},null,8,["text"]),[[ge,U.$t("core::app.copy_api_key")]]),ve.customField||ve.optionsViaResource?te((g(),R(H,{key:0,icon:"PencilAlt",basic:"",small:"",onClick:ie=>A(ve)},null,8,["onClick"])),[[ge,U.$t("core::app.edit")]]):Z("",!0),ve.customField?te((g(),R(H,{key:1,icon:"Trash",basic:"",small:"",onClick:ie=>E(ve.customField.id)},null,8,["onClick"])),[[ge,U.$t("core::app.delete")]]):Z("",!0),_("div",hW,[l(oe,{icon:"Selector",class:"size-4 text-neutral-500"})])])]),ve.primary?Z("",!0):(g(),D("div",gW,[l(ae,null,{default:p(()=>[l(re,{checked:ve[F.value],"onUpdate:checked":ie=>ve[F.value]=ie,disabled:ve.isRequired},null,8,["checked","onUpdate:checked","disabled"]),l(Y,{text:U.$t("core::fields.visible")},null,8,["text"])]),_:2},1024),ve.canUnmarkUnique?(g(),R(ae,{key:0,class:"gap-y-0"},{default:p(()=>[l(re,{checked:ve.isUnique&&!ve.uniqueUnmarked,onChange:ie=>ve.uniqueUnmarked=!ie},null,8,["checked","onChange"]),l(Y,{text:U.$t("core::fields.mark_as_unique")},null,8,["text"]),ve.uniqueUnmarked?(g(),R(se,{key:0},{default:p(()=>[ne(K(C.value?"":U.$t("core::fields.option_disabled_will_propagate",{view_name:x.value?U.$t("core::fields.settings.detail"):U.$t("core::fields.settings.update")})),1)]),_:1})):Z("",!0)]),_:2},1024)):Z("",!0),e.collapseOption?(g(),R(ae,{key:1},{default:p(()=>[l(re,{checked:ve.collapsed,"onUpdate:checked":ie=>ve.collapsed=ie},null,8,["checked","onUpdate:checked"]),l(Y,{text:U.$t("core::fields.collapsed_by_default")},null,8,["text"])]),_:2},1024)):Z("",!0),!ve.isPrimary&&!ve.readonly?(g(),R(ae,{key:2,class:"gap-y-0"},{default:p(()=>[l(re,{checked:ve.isRequired,"onUpdate:checked":ie=>ve.isRequired=ie,onChange:ie=>ie?ve[F.value]=!0:""},null,8,["checked","onUpdate:checked","onChange"]),l(Y,{text:U.$t("core::fields.is_required")},null,8,["text"]),ve.isRequired?(g(),R(se,{key:0},{default:p(()=>[ne(K(C.value?"":U.$t("core::fields.option_enabled_will_propagate",{view_name:x.value?U.$t("core::fields.settings.detail"):U.$t("core::fields.settings.update")})),1)]),_:1})):Z("",!0)]),_:2},1024)):Z("",!0)]))],2)]),_:1},16,["list","item-key","group"])],512),[[fe,f.value]])]),_:1})}}},bW={class:"mb-3 flex items-center justify-between"},yW={__name:"SettingsFields",setup(e){const t=Ct(),{t:n}=Pe(),{scriptConfig:o}=qe(),a=nv(),r=V(!1),s=V(null),i=V(null),u=V(null),d=V(null),m=V(null),f=P(()=>t.params.resourceName),h=P(()=>o(`resources.${f.value}`)),y=P(()=>h.value?n("core::resource.settings.fields",{resourceName:h.value.singularLabel}):null);yo(y),Se(f,()=>{m.value=null});function b(k){k.customField?s.value=k.customField:m.value=k.optionsViaResource}async function I(k){await Innoclapps.confirm(),Innoclapps.request().delete(`/custom-fields/${k}`).then(()=>{w(),Innoclapps.success(n("core::fields.custom.deleted"))})}function w(){a();const k=[u,d,i].filter(x=>x.value!==null);Promise.all(k.map(x=>x.value.fetch())).then(()=>{We(()=>k.forEach(x=>x.value.submit()))})}return(k,x)=>{const $=c("ITextDisplay"),C=c("IButton"),F=c("ICardHeading"),T=c("ICardHeader"),S=c("Icon"),A=c("I18nT"),E=c("ITextBlock"),B=c("ICardBody"),M=c("ICard");return g(),D("div",null,[l(SH,{visible:r.value,"onUpdate:visible":x[0]||(x[0]=N=>r.value=N),"resource-name":f.value,onCreated:w},null,8,["visible","resource-name"]),s.value!==null?(g(),R(TH,{key:0,visible:s.value!==null,"custom-field-id":s.value.id,label:s.value.label,"field-type":s.value.field_type,"field-id":s.value.field_id,"resource-name":s.value.resource_name,options:s.value.options,"is-unique":s.value.is_unique,onUpdated:w,onHidden:x[1]||(x[1]=N=>s.value=null)},null,8,["visible","custom-field-id","label","field-type","field-id","resource-name","options","is-unique"])):Z("",!0),te(_("div",bW,[l($,{text:y.value},null,8,["text"]),l(C,{variant:"primary",icon:"PlusSolid",class:"ml-3",text:k.$t("core::fields.add"),onClick:x[2]||(x[2]=N=>r.value=!0)},null,8,["text"])],512),[[fe,!m.value]]),te(_("div",null,[h.value.hasDetailView?(g(),R($m,{key:0,ref_key:"detailRef",ref:i,class:"mb-3",group:f.value,view:k.$scriptConfig("fields.views.detail"),heading:k.$t("core::fields.settings.detail"),"sub-heading":k.$t("core::fields.settings.detail_info"),onDeleteRequested:I,onUpdateRequested:b,onSaved:w},null,8,["group","view","heading","sub-heading"])):Z("",!0),l($m,{ref_key:"createRef",ref:u,class:"mb-3",group:f.value,view:k.$scriptConfig("fields.views.create"),heading:k.$t("core::fields.settings.create"),"sub-heading":k.$t("core::fields.settings.create_info"),"collapse-option":!1,onDeleteRequested:I,onUpdateRequested:b,onSaved:w},null,8,["group","view","heading","sub-heading"]),l($m,{ref_key:"updateRef",ref:d,class:"mb-3",group:f.value,view:k.$scriptConfig("fields.views.update"),heading:k.$t("core::fields.settings.update"),"sub-heading":k.$t("core::fields.settings.update_info"),onDeleteRequested:I,onUpdateRequested:b,onSaved:w},null,8,["group","view","heading","sub-heading"]),l(M,null,{default:p(()=>[l(T,null,{default:p(()=>[l(F,{text:k.$t("core::fields.settings.list")},null,8,["text"])]),_:1}),l(B,null,{default:p(()=>[l(E,null,{default:p(()=>[l(A,{scope:"global",keypath:"core::fields.settings.list_info"},{icon:p(()=>[l(S,{icon:"DotsHorizontal",class:"mx-1 inline size-5"})]),resourceName:p(()=>[ne(K(h.value.label),1)]),_:1})]),_:1})]),_:1})]),_:1})],512),[[fe,!m.value]]),m.value?(g(),R(Ui,{key:1,"resource-name":m.value,onCreated:w,onUpdated:w,onDeleted:w,onCancel:x[3]||(x[3]=N=>m.value=null)},null,8,["resource-name"])):Z("",!0)])}}};function it(){const{scriptConfig:e,currentUser:t}=qe(),{t:n}=Pe(),o=P(()=>{var T;return((T=t.value)==null?void 0:T.timezone)||x()}),a=P(()=>i.value.indexOf("H:i")===-1),r=P(()=>{var T;return((T=t.value)==null?void 0:T.date_format)||e("date_format")}),s=P(()=>[r.value,i.value].join(" ")),i=P(()=>{var T;return((T=t.value)==null?void 0:T.time_format)||e("time_format")}),u=P(()=>Tu(i.value));function d(T,S){if(!T)return T;S=S||s.value;const A=Tu(S);let E;if(h(T))E=ut.fromISO(T);else if(y(T))E=ut.fromFormat(T,"yyyy-MM-dd HH:mm:ss");else if(T instanceof Date)E=ut.fromJSDate(T);else return T;return F(E.setZone(o.value).toFormat(A),S)}function m(T,S){if(!T)return T;const A=Tu(S||r.value);let E;if(h(T))E=ut.fromISO(T);else if(y(T))E=ut.fromFormat(T,"yyyy-MM-dd HH:mm:ss");else if(b(T))E=ut.fromFormat(T,"yyyy-MM-dd");else if(T instanceof Date)E=ut.fromJSDate(T);else return T;return E.setZone(o.value).toFormat(A)}function f(T,S){if(!T)return T;S=S||i.value;const A=Tu(S);let E;if(h(T))E=ut.fromISO(T);else if(y(T))E=ut.fromFormat(T,"yyyy-MM-dd HH:mm:ss");else if(T instanceof Date)E=ut.fromJSDate(T);else return T;return F(E.setZone(o.value).toFormat(A),S)}function h(T){return typeof T!="string"?!1:/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3,6}(Z|[+-]\d{2}:\d{2})/.test(T)}function y(T){return typeof T!="string"||![" ",":","-"].some(S=>T.indexOf(S)>-1)?!1:/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(T)}function b(T){return typeof T!="string"||T.indexOf("-")===1?!1:/\d{4}-\d{2}-\d{2}$/.test(T)}function I(T){return/\d{4}-\d{2}-\d{2}[T\s]?00:00:00(\.\d{3,6}(Z|[+-]\d{2}:\d{2}))?/.test(T)}function w(T,S=null){return h(T)?I(T)?m(T):d(T):b(T)?m(T):y(T)?d(T):S}function k(T){return/(\d{2}:\d{2}:\d{2})|(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})/.test(T)}function x(){return ut.local().zoneName}function $(T){const S=Lt.fromObject({seconds:T});if(T<60)return n("core::dates.duration.seconds");if(T<3600){let A=Math.round(S.as("minutes"));return A+" "+n("core::dates.duration.minutes",A)}else if(T<86400){let A=Math.round(S.as("hours"));return A+" "+n("core::dates.duration.hours",A)}else{let A=Math.round(S.as("days"));return A+" "+n("core::dates.duration.days",A)}}function C(T,S){const A=T.getFullYear(),E=T.getMonth(),B=T.getDate(),M=S.getFullYear(),N=S.getMonth(),G=S.getDate();return A!==M||E!==N||B!==G}function F(T,S){return S.includes("A")?T.replace(/AM|PM/,A=>A.toUpperCase()):S.includes("a")?T.replace(/AM|PM/,A=>A.toLowerCase()):T}try{_n.defaultLocale=Uc().replace("_","-"),_n.defaultZone=o.value,ut.now().toLocaleString()}catch(T){T.message=="Incorrect locale information provided"&&(_n.defaultLocale=e("fallback_locale"))}return{DateTime:ut,UTCDateTimeInstance:ut.now().setZone(e("timezone")),LocalDateTimeInstance:ut.now(),localizedDate:m,localizedDateTime:d,localizedTime:f,userTimezone:o,usesTwelveHourTime:a,timeFormatForLuxon:u,humanizeDuration:$,localizeIfDate:w,guessTimezone:x,hasTime:k,isMidnight:I,isISODate:h,isStandardDateTime:y,isStandardDate:b,onDifferentDay:C}}function Tu(e){const t={d:"dd",D:"ccc",j:"d",l:"cccc",N:"E",S:"o",w:"c",z:"o",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"kkkk",Y:"yyyy",y:"yy",a:"a",A:"a",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"z",I:"",O:"ZZ",P:"ZZZZ",T:"zz",Z:"",c:"yyyy-MM-dd'T'HH:mm:ssZZZZ",r:"EEE, dd MMM yyyy HH:mm:ss ZZ",U:"X",",":","," ":" ",".":".","/":"/","-":"-",":":":"};return e.split("").map(n=>t[n]||n).join("")}const _W=["value"],wW={__name:"InputDateFormat",setup(e){const{localizedDate:t}=it();return(n,o)=>{const a=c("IFormSelect");return g(),R(a,null,{default:p(()=>[(g(!0),D(de,null,Ie(n.$scriptConfig("date_formats"),r=>(g(),D("option",{key:r,value:r},K(r)+" ["+K(v(t)(new Date,r))+"] ",9,_W))),128))]),_:1})}}},IW=["value"],xW={__name:"InputTimeFormat",setup(e){const{localizedTime:t}=it();return(n,o)=>{const a=c("IFormSelect");return g(),R(a,null,{default:p(()=>[(g(!0),D(de,null,Ie(n.$scriptConfig("time_formats"),r=>(g(),D("option",{key:r,value:r},K(r)+" ["+K(v(t)(new Date,r))+"] ",9,IW))),128))]),_:1})}}},Zw={__name:"InputTimezone",props:pt({fieldId:{type:String,default:"timezone"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue"),{DateTime:n}=it(),o=Lw(async()=>await Innoclapps.timezones(),[]);function a(r){const i=n.now().setZone(r.label).offset,u=Math.floor(Math.abs(i)/60),d=Math.abs(i)%60;return"UTC/GMT "+((i>=0?"+":"-")+u.toString().padStart(2,"0")+":"+d.toString().padStart(2,"0"))+" "+r.label}return(r,s)=>{const i=c("ICustomSelect");return g(),R(i,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u),"input-id":e.fieldId,options:v(o)},{option:p(u=>[ne(K(a(u)),1)]),_:1},8,["modelValue","input-id","options"])}}},md={__name:"LocalizationInputs",props:{timeFormat:{},dateFormat:{},locale:{},timezone:{},form:{required:!0,type:Object},exclude:{type:Array,default:()=>[]}},emits:["update:timeFormat","update:dateFormat","update:locale","update:timezone"],setup(e){const t=e,{locales:n}=qe(),o=P(()=>t.exclude.indexOf("timezone")===-1),a=P(()=>t.exclude.indexOf("locale")===-1);return(r,s)=>{const i=c("IFormError"),u=c("IFormGroup"),d=c("ICustomSelect");return g(),D("div",null,[o.value?(g(),R(u,{key:0,"label-for":"timezone",label:r.$t("core::app.timezone")},{default:p(()=>[l(Zw,{"model-value":e.form.timezone,"onUpdate:modelValue":s[0]||(s[0]=m=>r.$emit("update:timezone",m))},null,8,["model-value"]),l(i,{error:e.form.getError("timezone")},null,8,["error"])]),_:1},8,["label"])):Z("",!0),a.value?(g(),R(u,{key:1,"label-for":"locale",label:r.$t("core::app.locale")},{default:p(()=>[l(d,{"input-id":"locale","model-value":e.form.locale,clearable:!1,options:v(n),"onUpdate:modelValue":s[1]||(s[1]=m=>r.$emit("update:locale",m))},null,8,["model-value","options"]),l(i,{error:e.form.getError("locale")},null,8,["error"])]),_:1},8,["label"])):Z("",!0),l(u,{"label-for":"date_format",label:r.$t("core::settings.date_format")},{default:p(()=>[l(wW,{"model-value":e.form.date_format,"onUpdate:modelValue":s[2]||(s[2]=m=>r.$emit("update:dateFormat",m))},null,8,["model-value"]),l(i,{error:e.form.getError("date_format")},null,8,["error"])]),_:1},8,["label"]),l(u,{"label-for":"time_format",label:r.$t("core::settings.time_format")},{default:p(()=>[l(xW,{"model-value":e.form.time_format,"onUpdate:modelValue":s[3]||(s[3]=m=>r.$emit("update:timeFormat",m))},null,8,["model-value"]),l(i,{error:e.form.getError("time_format")},null,8,["error"])]),_:1},8,["label"])])}}};var kW=Li;function $W(e,t){var n=[];return kW(e,function(o,a,r){t(o,a,r)&&n.push(o)}),n}var Yw=$W,CW=Yp,SW=Yw,TW=ua,EW=$n;function FW(e,t){var n=EW(e)?CW:SW;return n(e,TW(t))}var AW=FW;const Vo=Rt(AW);var RW=Cw,Eb=$n;function DW(e,t,n,o){return e==null?[]:(Eb(t)||(t=t==null?[]:[t]),n=o?void 0:n,Eb(n)||(n=n==null?[]:[n]),RW(e,t,n))}var OW=DW;const Vt=Rt(OW);function $a(){const e=fn(),{scriptConfig:t}=qe(),n=V(!1),o=V(!1),a=P(()=>Vt(e.state.emailAccounts.collection,["is_primary","email"],["desc","asc"])),r=P(()=>Vo(e.state.emailAccounts.collection,["type","shared"])),s=P(()=>Vo(e.state.emailAccounts.collection,["type","personal"])),i=P(()=>Vt(a.value,h=>new Date(h.created_at),["desc"])[0]),u=P(()=>Vo(a.value,{is_primary:!0,is_sync_stopped:!1}).length>0);async function d(h){n.value=!0;let{data:y}=await Innoclapps.request(`/mail/accounts/${h}/sync`).finally(()=>n.value=!1);return y}async function m(){o.value=!0;try{return await e.dispatch("emailAccounts/fetch")}finally{o.value=!1}}function f(h,y){if(h=="Gmail")return`${t("url")}/mail/accounts/${y}/google/connect`;if(h=="Outlook")return`${t("url")}/mail/accounts/${y}/microsoft/connect`}return{emailAccountsBeingLoaded:o,emailAccountBeingSynced:n,emailAccounts:a,sharedEmailAccounts:r,personalEmailAccounts:s,latestEmailAccount:i,hasPrimaryEmailAccount:u,fetchEmailAccounts:m,syncEmailAccount:d,createOAuthConnectUrl:f}}const PW={class:"space-y-8"},MW={class:"mb-3 text-base font-medium text-neutral-700 dark:text-neutral-200 sm:text-sm"},BW=["src"],NW={class:"mb-3 text-base font-medium text-neutral-700 dark:text-neutral-200 sm:text-sm"},VW=["src"],LW={class:"w-auto xl:w-1/3"},qW={class:"my-4 block"},UW={__name:"SettingsGeneral",setup(e){const{scriptConfig:t,resetStoreState:n}=qe(),{form:o,submit:a,isReady:r,originalSettings:s}=Ao(),{emailAccounts:i,fetchEmailAccounts:u}=$a(),d=Pt([]),m=Pt([]),f=Pt(null),h=P(()=>t("logo_light")),y=P(()=>t("logo_dark")),b=P(()=>ft(i.value,["id",parseInt(o.system_email_account_id)])),I=P(()=>ft(i.value,["id",parseInt(s.value.system_email_account_id)])),w=P(()=>s.value.system_email_account_id&&I.value),k=P(()=>s.value.system_email_account_id&&!I.value);function x(){a(()=>{o.require_calling_prefix_on_phones!==s.value.require_calling_prefix_on_phones&&n(),t("mailable_templates.can_send_via_mail_client",!!o.system_email_account_id),o.currency!==s.value.currency&&$()})}function $(){window.location.reload()}function C(S){const A="logo_"+S;o[A]&&Innoclapps.request().delete(`/logo/${S}`).then($)}function F(){Innoclapps.request("currencies").then(({data:S})=>{d.value=Fn(S,(A,E)=>E)})}function T(){Innoclapps.request("countries").then(({data:S})=>{m.value=S,o.company_country_id&&(f.value=ft(m.value,["id",parseInt(o.company_country_id)]))})}return u(),F(),T(),(S,A)=>{const E=c("ICardHeading"),B=c("IText"),M=c("ICardHeader"),N=c("CropsAndUploadsImage"),G=c("ICustomSelect"),U=c("IFormError"),j=c("IFormGroup"),O=c("IFormText"),H=c("IFormTextarea"),W=c("IFormSwitchLabel"),X=c("IFormSwitchDescription"),q=c("IFormSwitch"),L=c("IFormSwitchField"),ee=c("IAlertBody"),ce=c("IAlert"),ue=c("ICardBody"),oe=c("IButton"),re=c("ICardFooter"),Y=c("ICard"),ae=c("IFormInput"),se=c("Editor"),xe=ze("t");return g(),D("form",{onSubmit:ot(x,["prevent"])},[_("div",PW,[_("div",null,[l(M,null,{default:p(()=>[_("div",null,[l(E,{text:S.$t("core::settings.general")},null,8,["text"]),l(B,{class:"block",text:S.$t("core::settings.general_settings")},null,8,["text"])])]),_:1}),l(Y,{overlay:!v(r)},{default:p(()=>[l(ue,null,{default:p(()=>[te(_("p",MW,null,512),[[xe,"core::app.logo.dark"]]),l(N,{name:"logo_dark","upload-url":`${S.$scriptConfig("apiURL")}/logo/dark`,image:y.value,"show-delete":!!v(o).logo_dark,"cropper-options":{aspectRatio:null},"choose-text":y.value?S.$t("core::app.change"):S.$t("core::settings.choose_logo"),onCleared:A[0]||(A[0]=le=>C("dark")),onSuccess:$},{image:p(({src:le})=>[_("img",{class:"h-8 w-auto",src:le},null,8,BW)]),_:1},8,["upload-url","image","show-delete","choose-text"]),A[14]||(A[14]=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),te(_("p",NW,null,512),[[xe,"core::app.logo.light"]]),l(N,{name:"logo_light","show-delete":!!v(o).logo_light,"upload-url":`${S.$scriptConfig("apiURL")}/logo/light`,image:h.value,"cropper-options":{aspectRatio:null},"choose-text":h.value?S.$t("core::app.change"):S.$t("core::settings.choose_logo"),onCleared:A[1]||(A[1]=le=>C("light")),onSuccess:$},{image:p(({src:le})=>[_("img",{class:"h-8 w-auto",src:le},null,8,VW)]),_:1},8,["show-delete","upload-url","image","choose-text"]),A[15]||(A[15]=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),l(j,{"label-for":"currency",class:"w-auto xl:w-1/3",label:S.$t("core::app.currency")},{default:p(()=>[l(G,{modelValue:v(o).currency,"onUpdate:modelValue":A[2]||(A[2]=le=>v(o).currency=le),"input-id":"currency",clearable:!1,options:d.value},null,8,["modelValue","options"]),l(U,{error:v(o).getError("currency")},null,8,["error"])]),_:1},8,["label"]),l(j,{"label-for":"system_email_account_id",label:S.$t("core::settings.system_email")},{default:p(()=>[_("div",LW,[l(G,{"input-id":"system_email_account_id",label:"email",placeholder:!w.value&&k.value?S.$t("core::settings.system_email_configured"):"","model-value":b.value,disabled:!w.value&&k.value,options:v(i),onOptionSelected:A[3]||(A[3]=le=>v(o).system_email_account_id=le.id),onCleared:A[4]||(A[4]=le=>v(o).system_email_account_id=null)},null,8,["placeholder","model-value","disabled","options"])]),l(O,{class:"mt-2 max-w-3xl",text:S.$t("core::settings.system_email_info")},null,8,["text"]),l(U,{error:v(o).getError("system_email_account_id")},null,8,["error"])]),_:1},8,["label"]),l(j,{"label-for":"allowed_extensions",label:S.$t("core::app.allowed_extensions"),description:S.$t("core::app.allowed_extensions_info")},{default:p(()=>[l(H,{id:"allowed_extensions",modelValue:v(o).allowed_extensions,"onUpdate:modelValue":A[5]||(A[5]=le=>v(o).allowed_extensions=le),rows:"2"},null,8,["modelValue"]),l(U,{error:v(o).getError("allowed_extensions")},null,8,["error"])]),_:1},8,["label","description"]),A[16]||(A[16]=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),l(L,null,{default:p(()=>[l(W,{text:S.$t("core::settings.phones.require_calling_prefix")},null,8,["text"]),l(X,{text:S.$t("core::settings.phones.require_calling_prefix_info")},null,8,["text"]),l(q,{modelValue:v(o).require_calling_prefix_on_phones,"onUpdate:modelValue":A[6]||(A[6]=le=>v(o).require_calling_prefix_on_phones=le),onChange:v(a)},null,8,["modelValue","onChange"])]),_:1}),A[17]||(A[17]=_("hr",{class:"-mx-7 my-4 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),_("div",qW,[l(ce,{class:"mb-5"},{default:p(()=>[l(ee,null,{default:p(()=>[ne(K(S.$t("core::settings.update_user_account_info")),1)]),_:1})]),_:1}),l(md,{class:"w-auto xl:w-1/3",exclude:["timezone","locale"],form:v(o),"onUpdate:timeFormat":A[7]||(A[7]=le=>v(o).time_format=le),"onUpdate:dateFormat":A[8]||(A[8]=le=>v(o).date_format=le)},null,8,["form"])])]),_:1}),l(re,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:v(o).busy,text:S.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(M,null,{default:p(()=>[l(E,{text:S.$t("core::settings.company_information")},null,8,["text"])]),_:1}),l(Y,{overlay:!v(r)},{default:p(()=>[l(ue,null,{default:p(()=>[l(j,{class:"w-auto xl:w-1/3","label-for":"company_name",label:S.$t("core::app.company.name")},{default:p(()=>[l(ae,{id:"company_name",modelValue:v(o).company_name,"onUpdate:modelValue":A[9]||(A[9]=le=>v(o).company_name=le)},null,8,["modelValue"])]),_:1},8,["label"]),l(j,{class:"w-auto xl:w-1/3","label-for":"company_country_id",label:S.$t("core::app.company.country")},{default:p(()=>[l(G,{modelValue:f.value,"onUpdate:modelValue":A[10]||(A[10]=le=>f.value=le),label:"name","input-id":"company_country_id",options:m.value,onOptionSelected:A[11]||(A[11]=le=>v(o).company_country_id=le.id),onCleared:A[12]||(A[12]=le=>v(o).company_country_id=null)},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1}),l(re,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:v(o).busy,text:S.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(M,null,{default:p(()=>[l(E,{text:S.$t("core::app.privacy_policy")},null,8,["text"])]),_:1}),l(Y,{overlay:!v(r)},{default:p(()=>[l(ue,null,{default:p(()=>[l(se,{modelValue:v(o).privacy_policy,"onUpdate:modelValue":A[13]||(A[13]=le=>v(o).privacy_policy=le),"with-image":!1},null,8,["modelValue"]),l(O,{class:"mt-2",text:S.$t("core::settings.privacy_policy_info",{url:S.$scriptConfig("privacyPolicyUrl")})},null,8,["text"])]),_:1}),l(re,{class:"text-right"},{default:p(()=>[l(oe,{type:"submit",variant:"primary",disabled:v(o).busy,text:S.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])])])],32)}}},jW={class:"rounded-md border border-neutral-200 bg-neutral-50 p-4 dark:border-neutral-500 dark:bg-neutral-700"},zW={class:"max-h-96 overflow-y-auto"},HW=["onDragstart"],Xw={__name:"TextPlaceholders",props:{placeholders:Array},setup(e){function t(n,o){const a=`${o.interpolation_start}
           ${o.tag}
           ${o.interpolation_end}`;n.dataTransfer.setData("text/plain",a)}return(n,o)=>{const a=c("ITextDark");return g(),D("div",jW,[_("div",zW,[(g(!0),D(de,null,Ie(e.placeholders,r=>(g(),R(a,{key:r.tag,class:"mb-1"},{default:p(()=>[_("span",{class:"select-all font-semibold",onDragstart:s=>t(s,r)},K(r.interpolation_start)+" "+K(r.tag)+" "+K(r.interpolation_end),41,HW),te(_("span",null," - "+K(r.description),513),[[fe,r.description]])]),_:2},1024))),128))])])}}},WW={class:"flex items-center space-x-4"},GW={class:"flex items-center space-x-2"},KW=["textContent"],ZW={class:"px-3 py-2 font-medium"},YW={class:"mb-2 flex items-center"},Qa="template-placeholders",XW="bold | emoticons removeformat | undo redo",QW={__name:"SettingsMailableTemplates",setup(e){const{t}=Pe(),{setLoading:n,isLoading:o}=Cn(),{currentUser:a,locales:r,isMailerConfiguredToSendEmails:s}=qe(),i=V(!1),{form:u}=Qe(),d=V("HTML"),m=V([]),f=V({}),h=V(a.value.locale),y=`
.${Qa} {
    background-color: #f1f5f9;
    padding: 2px 4px;
    border-radius: 3px;
}
.dark .${Qa} {
    background-color: #1e293b;
    color: #f1f5f9;
}
`;Se(h,k);const b=P(()=>d.value==="HTML"),I=P(()=>({id:"placeholders",trigger:"{",list:f.value.placeholders.filter(M=>M.tag!=="action_button").map(M=>({value:`${M.interpolation_start} ${M.tag} ${M.interpolation_end}`,text:`${M.interpolation_start} ${M.tag} ${M.interpolation_end} - ${M.description}`}))}));function w(){u.html_template=B(u.html_template),u.put(`/mailable-templates/${f.value.id}`).then(M=>{let N=Mt(m.value,["id",parseInt(M.id)]);m.value[N]=M,$(M),Innoclapps.success(t("core::mail_template.updated"))})}function k(){n(!0),Innoclapps.request(`/mailable-templates/${h.value}/locale`).then(({data:M})=>{m.value=M,$(Object.keys(f.value).length===0?M[0]:ft(m.value,["name",f.value.name])),i.value=!0}).finally(()=>n(!1))}async function x(M){M!==h.value&&u.isDirty()&&await Innoclapps.confirm({message:t("core::mail_template.changes_not_saved_warning"),confirmText:t("core::app.discard_changes")}),h.value=M}async function $(M,N=!1){N&&M.id!==f.value.id&&u.isDirty()&&await Innoclapps.confirm({message:t("core::mail_template.changes_not_saved_warning"),confirmText:t("core::app.discard_changes")}),f.value=M,u.set({subject:M.subject,html_template:C(M.html_template),text_template:C(M.text_template)})}function C(M){const N=/((%7B){2,3}(%20)?)(.*?)((%20)?(%7D){2,3})/gm;return M.replace(N,function(G,U,j,O,H,W){return F(U)+H+F(W)})}function F(M){return(M.includes("%7B%7B")||M.includes("%7D%7D")||M.includes("{{")||M.includes("}}"))&&(M=M.replaceAll("%20"," ")),M=M.replaceAll("%7B","{"),M=M.replaceAll("%7D","}"),M}function T(){k()}function S(M){M.on("init",function(){M.formatter.register("placeholders",{inline:"span",classes:Qa})});let N=M.getParam("noneditable_noneditable_class","mceNonEditable");M.on("input",function(){A(M,N)}),M.on("BeforeSetContent",function(G){G.content=E(G.content,N)}),M.on("PastePostProcess",function(G){G.node.innerHTML=E(G.node.innerHTML,N)})}function A(M,N){const G=M.getContent({format:"raw"}),U=E(G,N);G!==U&&M.setContent(U,{format:"raw"})}function E(M,N){const G=new RegExp(`(<span class="${Qa}[^>]*>.*?</span>)|(\\{\\{\\{?[\\s\\S]*?\\}\\}\\}?)`,"g");return M.replace(G,function(U,j,O){if(j)return j;{const H=!(O.includes("/")||O.includes("#")),W=[Qa,N];return H&&W.push(Qa+"-simple"),`<span class="${W.join(" ")}">${O}</span>`}})}function B(M){const N=new RegExp(`<span\\b[^>]*\\bclass=["'][^"']*\\b${Qa}\\b[^"']*["'][^>]*>(.*?)</span>`,"gi");return M.replace(N,"$1")}return T(),(M,N)=>{const G=c("IAlertHeading"),U=c("IAlertBody"),j=c("IButton"),O=c("IAlertActions"),H=c("IAlert"),W=c("ICardHeading"),X=c("ITextDark"),q=c("IDropdownButton"),L=c("IDropdownItem"),ee=c("IDropdownMenu"),ce=c("IDropdown"),ue=c("IDropdownSeparator"),oe=c("ICardActions"),re=c("ICardHeader"),Y=c("IFormInput"),ae=c("IFormError"),se=c("IFormGroup"),xe=c("IFormLabel"),le=c("Editor"),ge=c("IFormTextarea"),ve=c("ICardBody"),ie=c("ICardFooter"),me=c("ICard");return g(),D(de,null,[v(s)()?Z("",!0):(g(),R(H,{key:0,variant:"warning",class:"mb-6"},{default:p(()=>[l(G,null,{default:p(()=>[ne(K(M.$t("core::app.action_required")),1)]),_:1}),l(U,null,{default:p(()=>[ne(K(M.$t("core::mail_template.email_account_not_configured")),1)]),_:1}),l(O,null,{default:p(()=>[l(j,{variant:"warning",to:{name:"settings-general"},text:M.$t("core::settings.go_to_settings"),soft:""},null,8,["text"])]),_:1})]),_:1})),l(re,null,{default:p(()=>[_("div",WW,[l(W,{text:M.$t("core::mail_template.mail_templates")},null,8,["text"]),_("div",GW,[l(X,{class:"font-medium",text:M.$t("core::app.locale")},null,8,["text"]),l(ce,null,{default:p(()=>[l(q,{text:h.value,basic:""},null,8,["text"]),l(ee,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(r),Ce=>(g(),R(L,{key:Ce,text:Ce,active:h.value===Ce,condensed:"",onClick:ke=>x(Ce)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),l(oe,{class:"-mt-4 sm:-mt-0"},{default:p(()=>[l(ce,{placement:"bottom-end"},{default:p(()=>[l(q,{class:"-ml-3.5 sm:ml-0",basic:""},{default:p(()=>[_("span",{class:"max-w-[13rem] truncate",textContent:K(f.value.name)},null,8,KW)]),_:1}),l(ee,null,{default:p(()=>[_("div",ZW,[l(X,{text:M.$t("core::mail_template.choose_to_edit")},null,8,["text"])]),l(ue),(g(!0),D(de,null,Ie(m.value,Ce=>(g(),R(L,{key:Ce.id,text:Ce.name,active:f.value.id===Ce.id,condensed:"",onClick:ke=>$(Ce,!0)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),l(me,{as:"form",overlay:v(o),onSubmit:ot(w,["prevent"])},{default:p(()=>[l(ve,null,{default:p(()=>[l(se,{"label-for":"subject",label:M.$t("core::mail_template.subject"),required:""},{default:p(()=>[l(Y,{id:"subject",modelValue:v(u).subject,"onUpdate:modelValue":N[0]||(N[0]=Ce=>v(u).subject=Ce),name:"subject"},null,8,["modelValue"]),l(ae,{error:v(u).getError("subject")},null,8,["error"])]),_:1},8,["label"]),l(se,null,{default:p(()=>[_("div",YW,[l(xe,{label:M.$t("core::mail_template.message"),required:""},null,8,["label"])]),te(_("div",null,[i.value?(g(),R(le,{key:0,modelValue:v(u).html_template,"onUpdate:modelValue":N[1]||(N[1]=Ce=>v(u).html_template=Ce),config:{urlconverter_callback:F,content_style:y,toolbar:XW,format_noneditable_selector:`span.${Qa}-simple`},"auto-completer":I.value,"absolute-urls":"",minimal:"",onSetup:S},null,8,["modelValue","config","auto-completer"])):Z("",!0)],512),[[fe,b.value]]),te(_("div",null,[l(ge,{modelValue:v(u).text_template,"onUpdate:modelValue":N[2]||(N[2]=Ce=>v(u).text_template=Ce),name:"text_template",rows:8},null,8,["modelValue"])],512),[[fe,!b.value]]),l(ae,{error:v(u).getError("html_template")},null,8,["error"]),l(ae,{error:v(u).getError("text_template")},null,8,["error"])]),_:1}),f.value.placeholders&&f.value.placeholders.length>0?(g(),R(se,{key:0},{default:p(()=>[l(X,{class:"mb-1 font-medium",text:M.$t("core::mail_template.placeholders.placeholders")},null,8,["text"]),l(Xw,{placeholders:f.value.placeholders},null,8,["placeholders"])]),_:1})):Z("",!0)]),_:1}),l(ie,{class:"text-right"},{default:p(()=>[l(j,{type:"submit",variant:"primary",disabled:v(u).busy,text:M.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},sv="-",JW=e=>{const t=tG(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:s=>{const i=s.split(sv);return i[0]===""&&i.length!==1&&i.shift(),Qw(i,t)||eG(s)},getConflictingClassGroupIds:(s,i)=>{const u=n[s]||[];return i&&o[s]?[...u,...o[s]]:u}}},Qw=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],o=t.nextPart.get(n),a=o?Qw(e.slice(1),o):void 0;if(a)return a;if(t.validators.length===0)return;const r=e.join(sv);return(s=t.validators.find(({validator:i})=>i(r)))==null?void 0:s.classGroupId},Fb=/^\[(.+)\]$/,eG=e=>{if(Fb.test(e)){const t=Fb.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},tG=e=>{const{theme:t,prefix:n}=e,o={nextPart:new Map,validators:[]};return oG(Object.entries(e.classGroups),n).forEach(([r,s])=>{Nf(s,o,r,t)}),o},Nf=(e,t,n,o)=>{e.forEach(a=>{if(typeof a=="string"){const r=a===""?t:Ab(t,a);r.classGroupId=n;return}if(typeof a=="function"){if(nG(a)){Nf(a(o),t,n,o);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([r,s])=>{Nf(s,Ab(t,r),n,o)})})},Ab=(e,t)=>{let n=e;return t.split(sv).forEach(o=>{n.nextPart.has(o)||n.nextPart.set(o,{nextPart:new Map,validators:[]}),n=n.nextPart.get(o)}),n},nG=e=>e.isThemeGetter,oG=(e,t)=>t?e.map(([n,o])=>{const a=o.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([s,i])=>[t+s,i])):r);return[n,a]}):e,aG=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,o=new Map;const a=(r,s)=>{n.set(r,s),t++,t>e&&(t=0,o=n,n=new Map)};return{get(r){let s=n.get(r);if(s!==void 0)return s;if((s=o.get(r))!==void 0)return a(r,s),s},set(r,s){n.has(r)?n.set(r,s):a(r,s)}}},Jw="!",rG=e=>{const{separator:t,experimentalParseClassName:n}=e,o=t.length===1,a=t[0],r=t.length,s=i=>{const u=[];let d=0,m=0,f;for(let w=0;w<i.length;w++){let k=i[w];if(d===0){if(k===a&&(o||i.slice(w,w+r)===t)){u.push(i.slice(m,w)),m=w+r;continue}if(k==="/"){f=w;continue}}k==="["?d++:k==="]"&&d--}const h=u.length===0?i:i.substring(m),y=h.startsWith(Jw),b=y?h.substring(1):h,I=f&&f>m?f-m:void 0;return{modifiers:u,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:I}};return n?i=>n({className:i,parseClassName:s}):s},lG=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(o=>{o[0]==="["?(t.push(...n.sort(),o),n=[]):n.push(o)}),t.push(...n.sort()),t},sG=e=>({cache:aG(e.cacheSize),parseClassName:rG(e),...JW(e)}),iG=/\s+/,uG=(e,t)=>{const{parseClassName:n,getClassGroupId:o,getConflictingClassGroupIds:a}=t,r=[],s=e.trim().split(iG);let i="";for(let u=s.length-1;u>=0;u-=1){const d=s[u],{modifiers:m,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:y}=n(d);let b=!!y,I=o(b?h.substring(0,y):h);if(!I){if(!b){i=d+(i.length>0?" "+i:i);continue}if(I=o(h),!I){i=d+(i.length>0?" "+i:i);continue}b=!1}const w=lG(m).join(":"),k=f?w+Jw:w,x=k+I;if(r.includes(x))continue;r.push(x);const $=a(I,b);for(let C=0;C<$.length;++C){const F=$[C];r.push(k+F)}i=d+(i.length>0?" "+i:i)}return i};function cG(){let e=0,t,n,o="";for(;e<arguments.length;)(t=arguments[e++])&&(n=eI(t))&&(o&&(o+=" "),o+=n);return o}const eI=e=>{if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=eI(e[o]))&&(n&&(n+=" "),n+=t);return n};function dG(e,...t){let n,o,a,r=s;function s(u){const d=t.reduce((m,f)=>f(m),e());return n=sG(d),o=n.cache.get,a=n.cache.set,r=i,i(u)}function i(u){const d=o(u);if(d)return d;const m=uG(u,n);return a(u,m),m}return function(){return r(cG.apply(null,arguments))}}const bn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},tI=/^\[(?:([a-z-]+):)?(.+)\]$/i,mG=/^\d+\/\d+$/,fG=new Set(["px","full","screen"]),pG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ra=e=>Al(e)||fG.has(e)||mG.test(e),Ja=e=>_s(e,"length",CG),Al=e=>!!e&&!Number.isNaN(Number(e)),Cm=e=>_s(e,"number",Al),Us=e=>!!e&&Number.isInteger(Number(e)),yG=e=>e.endsWith("%")&&Al(e.slice(0,-1)),Dt=e=>tI.test(e),er=e=>pG.test(e),_G=new Set(["length","size","percentage"]),wG=e=>_s(e,_G,nI),IG=e=>_s(e,"position",nI),xG=new Set(["image","url"]),kG=e=>_s(e,xG,TG),$G=e=>_s(e,"",SG),js=()=>!0,_s=(e,t,n)=>{const o=tI.exec(e);return o?o[1]?typeof t=="string"?o[1]===t:t.has(o[1]):n(o[2]):!1},CG=e=>vG.test(e)&&!hG.test(e),nI=()=>!1,SG=e=>gG.test(e),TG=e=>bG.test(e),EG=()=>{const e=bn("colors"),t=bn("spacing"),n=bn("blur"),o=bn("brightness"),a=bn("borderColor"),r=bn("borderRadius"),s=bn("borderSpacing"),i=bn("borderWidth"),u=bn("contrast"),d=bn("grayscale"),m=bn("hueRotate"),f=bn("invert"),h=bn("gap"),y=bn("gradientColorStops"),b=bn("gradientColorStopPositions"),I=bn("inset"),w=bn("margin"),k=bn("opacity"),x=bn("padding"),$=bn("saturate"),C=bn("scale"),F=bn("sepia"),T=bn("skew"),S=bn("space"),A=bn("translate"),E=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Dt,t],N=()=>[Dt,t],G=()=>["",Ra,Ja],U=()=>["auto",Al,Dt],j=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],O=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",Dt],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Al,Dt];return{cacheSize:500,separator:":",theme:{colors:[js],spacing:[Ra,Ja],blur:["none","",er,Dt],brightness:L(),borderColor:[e],borderRadius:["none","","full",er,Dt],borderSpacing:N(),borderWidth:G(),contrast:L(),grayscale:X(),hueRotate:L(),invert:X(),gap:N(),gradientColorStops:[e],gradientColorStopPositions:[yG,Ja],inset:M(),margin:M(),opacity:L(),padding:N(),saturate:L(),scale:L(),sepia:X(),skew:L(),space:N(),translate:N()},classGroups:{aspect:[{aspect:["auto","square","video",Dt]}],container:["container"],columns:[{columns:[er]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...j(),Dt]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[I]}],"inset-x":[{"inset-x":[I]}],"inset-y":[{"inset-y":[I]}],start:[{start:[I]}],end:[{end:[I]}],top:[{top:[I]}],right:[{right:[I]}],bottom:[{bottom:[I]}],left:[{left:[I]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Us,Dt]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Dt]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",Us,Dt]}],"grid-cols":[{"grid-cols":[js]}],"col-start-end":[{col:["auto",{span:["full",Us,Dt]},Dt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[js]}],"row-start-end":[{row:["auto",{span:[Us,Dt]},Dt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Dt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Dt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Dt,t]}],"min-w":[{"min-w":[Dt,t,"min","max","fit"]}],"max-w":[{"max-w":[Dt,t,"none","full","min","max","fit","prose",{screen:[er]},er]}],h:[{h:[Dt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Dt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Dt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Dt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",er,Ja]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Cm]}],"font-family":[{font:[js]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Dt]}],"line-clamp":[{"line-clamp":["none",Al,Cm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ra,Dt]}],"list-image":[{"list-image":["none",Dt]}],"list-style-type":[{list:["none","disc","decimal",Dt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...O(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ra,Ja]}],"underline-offset":[{"underline-offset":["auto",Ra,Dt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...j(),IG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...O(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:O()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...O()]}],"outline-offset":[{"outline-offset":[Ra,Dt]}],"outline-w":[{outline:[Ra,Ja]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Ra,Ja]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",er,$G]}],"shadow-color":[{shadow:[js]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[o]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",er,Dt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[f]}],saturate:[{saturate:[$]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[o]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[$]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Dt]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",Dt]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",Dt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Us,Dt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Dt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Dt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Dt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ra,Ja,Cm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$t=dG(EG),Eu={base:"text-base/6 no-underline sm:text-sm/6 focus:outline-none",basic:"text-neutral-800 hover:text-neutral-600 dark:text-neutral-100 dark:hover:text-neutral-200",variants:{primary:"text-primary-600 hover:text-primary-900 dark:text-primary-300 dark:hover:text-primary-400",info:"text-info-900 hover:text-info-700 dark:text-info-400 dark:hover:text-info-500",success:"text-success-900 hover:text-success-700 dark:text-success-400 dark:hover:text-success-500",danger:"text-danger-500 hover:text-danger-700 dark:text-danger-400 dark:hover:text-danger-500",warning:"text-warning-700 hover:text-warning-600 dark:text-warning-400 dark:hover:text-warning-500"}},Rl=Object.assign({inheritAttrs:!1},{__name:"ILinkBase",props:{as:{type:[String,Object],default:"a"},basic:Boolean,plain:Boolean,variant:{type:String,default:"primary",validator:e=>Object.keys(Eu.variants).includes(e)}},setup(e){return(t,n)=>(g(),R(_t(e.as),Ue({class:v($t)(e.plain?"":[Eu.base,e.basic?Eu.basic:Eu.variants[e.variant??"primary"]],t.$attrs.class)},{...t.$attrs,class:""}),{default:p(()=>[Ee(t.$slots,"default")]),_:3},16,["class"]))}}),FG=["data-active","disabled","tabindex"],AG=["primary","secondary","success","info","warning","danger"],jn=Object.assign({inheritAttrs:!1},{__name:"IButton",props:{text:[String,Number],icon:String,to:[Object,String],active:Boolean,soft:Boolean,ghost:Boolean,pill:Boolean,basic:Boolean,disabled:Boolean,loading:Boolean,small:Boolean,block:Boolean,href:String,confirmable:Boolean,confirmText:{type:[String,Number],default:"Confirm"},confirmVariant:{type:String,default:"danger"},variant:{type:String,default:"secondary",validator:e=>AG.includes(e)}},emits:["click","confirmed"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=wt(),s=V(null),i=V(!1),u=P(()=>i.value?o.confirmVariant||o.variant:o.basic?null:o.variant),d=P(()=>["btn",{"btn-primary":u.value==="primary","btn-secondary":u.value==="secondary","btn-success":u.value==="success","btn-info":u.value==="info","btn-warning":u.value==="warning","btn-danger":u.value==="danger","btn-soft":o.soft,"btn-ghost":o.ghost,"btn-pill":o.pill,"btn-basic":o.basic&&!i.value,"btn-sm":o.small,"w-full":o.block}]);function m(y){if(o.confirmable){if(i.value===!1)return s.value.style.minWidth=s.value.offsetWidth+"px",i.value=!0,s.value.focus(),y.preventDefault(),y.stopPropagation(),!0;a("confirmed",y),i.value=!1,s.value.style.minWidth=null}}function f(y){o.disabled||m(y)||(o.to?r.push(o.to):a("click",y))}function h(){s.value.focus()}return t({focus:h}),(y,b)=>{const I=c("Icon"),w=c("ISpinner");return e.href?(g(),R(Rl,Ue({key:0},y.$attrs,{href:e.href,class:d.value,"data-active":e.active||void 0,plain:""}),{default:p(()=>[e.icon?(g(),R(I,{key:0,icon:e.icon},null,8,["icon"])):Z("",!0),Ee(y.$slots,"default",{text:e.text},()=>[ne(K(e.text),1)])]),_:3},16,["href","class","data-active"])):(g(),D("button",Ue({key:1,ref_key:"elementRef",ref:s,type:"button","data-active":e.active||void 0,disabled:e.disabled||void 0,tabindex:e.disabled?"-1":void 0,class:d.value},y.$attrs,{onClick:f}),[e.icon?te((g(),R(I,{key:0,icon:e.icon},null,8,["icon"])),[[fe,!e.loading&&!i.value]]):Z("",!0),e.loading?(g(),R(w,{key:1})):Z("",!0),Ee(y.$slots,"default",{text:e.text,isBeingConfirmed:i.value},()=>[ne(K(i.value?e.confirmText:e.text),1)])],16,FG))}}}),RG={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},DG={class:"shrink-0"},OG={class:"min-w-0 flex-1 truncate"},PG={class:"block shrink-0 md:hidden md:group-hover:block"},MG={__name:"MediaUploadOutputList",props:{files:{type:Array,required:!0}},emits:["removeRequested"],setup(e){const{localizedDateTime:t}=it();return(n,o)=>{const a=c("Icon"),r=c("ITextDark"),s=c("IText"),i=c("IButton");return g(),D("ul",RG,[(g(!0),D(de,null,Ie(e.files,(u,d)=>(g(),D("li",{key:d+u.name,class:"group flex items-center space-x-3 py-3 last:pb-0"},[_("div",DG,[_("span",{class:be([u.xhr&&u.xhr.status>=400?"bg-danger-500 text-white":"",u.xhr&&u.xhr.status<400?"bg-success-500 text-white":"",u.xhr?"":"bg-neutral-600 text-neutral-100","inline-flex size-8 items-center justify-center rounded-full"])},[u.xhr&&u.xhr.status>=400?(g(),R(a,{key:0,icon:"XSolid",class:"size-5"})):u.xhr?(g(),R(a,{key:1,icon:"Check",class:"size-5"})):(g(),R(a,{key:2,icon:"CloudArrowUp",class:"size-5"}))],2)]),_("div",OG,[l(r,{class:"font-medium",text:u.name},null,8,["text"]),l(s,{text:v(t)(new Date)},null,8,["text"])]),_("div",PG,[te(l(i,{icon:"XSolid",basic:"",small:"",onClick:m=>n.$emit("removeRequested",d)},null,8,["onClick"]),[[fe,!u.xhr||u.xhr.status>=400]])])]))),128))])}}},BG={class:"absolute inset-0 z-10 flex items-center justify-center rounded-lg bg-neutral-200"},NG={class:"ml-2 flex items-center space-x-2"},Rb={base:"inline-flex items-center rounded-full border border-neutral-300 bg-white px-4 py-1 text-base/6 font-semibold text-neutral-700 dark:border-neutral-500/30 dark:bg-neutral-500/10 dark:text-white sm:text-sm/6",wrapper:"flex items-center"},ur={__name:"MediaUpload",props:{modelValue:{},baseClasses:{type:[Object,Array,String],default:Rb.base},wrapperClasses:{type:[Object,Array,String],default:Rb.wrapper},inputId:{default:"media",type:String},actionUrl:String,name:{default:"file",type:String},extensions:[Array,String],accept:{type:String,default:void 0},uploadText:String,selectFileText:String,disabled:Boolean,allowCancel:{type:Boolean,default:!0},showUploadButton:{type:Boolean,default:!0},showOutput:{default:!0,type:Boolean},automaticUpload:{default:!0,type:Boolean},multiple:{default:!0,type:Boolean},requestData:{type:Object,default:()=>({})},drop:Boolean},emits:["update:modelValue","fileAccepted","fileUploaded","clear"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{scriptConfig:r}=qe(),s=V(null),i=V([]),u=V([]),d=P(()=>n.uploadText||a("core::app.upload")),m=P(()=>n.selectFileText||a("core::app.select_file"));function f($){if($.status===413){Innoclapps.error(a("core::app.file_too_large"));return}let C=JSON.parse($.response),F=$.status<400;return C.message&&(F?Innoclapps.success(C.message):Innoclapps.error(C.message)),$.status===422&&(u.value=C.errors),C}function h($){i.value.splice($,1),o("update:modelValue",i.value)}function y(){s.value.clear(),u.value=[],o("clear")}function b($){if(!n.extensions)return!0;let C=n.extensions;Array.isArray(C)?C=C.join("|"):typeof C=="string"&&(C=C.replace(",","|"));var F=RegExp(".("+C+")","i");return F.test($.name)?!0:(Innoclapps.error(a("validation.mimes",{attribute:a("core::app.file").toLowerCase(),values:[C]})),!1)}function I($,C){return $&&C}function w($,C){return $.active!==C.active}function k($,C){I($,C)&&(w($,C),$.progress,C.progress,$.error!==C.error&&$.xhr.response&&f($.xhr),$.success!==C.success&&(o("fileUploaded",f($.xhr)),h(Mt(i.value,["name",$.name])))),n.automaticUpload&&(!!$!=!!C||C.error!==$.error)&&!s.value.active&&$&&!$.xhr&&(s.value.active=!0)}const x=function($,C,F){if($&&!C){if(!b($))return F();if($.size>=0&&$.size>r("max_upload_size"))return Innoclapps.error("File too big"),F();$.blob="";let T=window.URL||window.webkitURL;T&&T.createObjectURL&&($.blob=T.createObjectURL($.file)),We(()=>o("fileAccepted",$))}};return($,C)=>{const F=c("IAlertBody"),T=c("IAlert"),S=c("FileUpload"),A=ze("t");return g(),D("div",null,[(g(!0),D(de,null,Ie(u.value,(E,B)=>(g(),R(T,{key:B,class:"mb-4",variant:"danger"},{default:p(()=>[l(F,null,{default:p(()=>[ne(K(E),1)]),_:2},1024)]),_:2},1024))),128)),Ee($.$slots,"default"),e.showOutput?(g(),R(MG,{key:0,files:i.value,onRemoveRequested:h},null,8,["files"])):Z("",!0),_("div",{class:be([e.wrapperClasses,"relative"])},[Ee($.$slots,"drop-placeholder",{upload:$.$refs.uploadRef},()=>[te(_("div",BG,null,512),[[fe,$.$refs.uploadRef&&$.$refs.uploadRef.dropActive],[A,"core::app.drop_files"]])]),l(S,{ref_key:"uploadRef",ref:s,modelValue:i.value,"onUpdate:modelValue":[C[0]||(C[0]=E=>i.value=E),C[1]||(C[1]=E=>$.$emit("update:modelValue",E))],class:be([e.baseClasses,s.value&&s.value.active?"pointer-events-none opacity-50":""]),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":$.$csrfToken},disabled:e.disabled||$.$refs.uploadRef&&$.$refs.uploadRef.active,name:e.name,multiple:e.multiple,extensions:e.extensions,accept:e.accept,data:e.requestData,drop:e.drop,"post-action":e.actionUrl,"input-id":e.inputId,onInputFile:k,onInputFilter:x},{default:p(()=>[Ee($.$slots,"upload-content",{},()=>[ne(K(m.value),1)])]),_:3},8,["modelValue","class","headers","disabled","name","multiple","extensions","accept","data","drop","post-action","input-id"]),_("div",NG,[Ee($.$slots,"upload-button",{upload:$.$refs.uploadRef},()=>[e.showUploadButton&&!e.automaticUpload?(g(),R(jn,{key:0,variant:"primary",icon:"CloudArrowUp",text:d.value,soft:"",pill:"",onClick:C[2]||(C[2]=E=>$.$refs.uploadRef.active=!0)},null,8,["text"])):Z("",!0)]),te(l(jn,{variant:"danger",text:$.$t("core::app.cancel"),soft:"",pill:"",onClick:C[3]||(C[3]=E=>$.$refs.uploadRef.active=!1)},null,8,["text"]),[[fe,e.allowCancel&&$.$refs.uploadRef&&$.$refs.uploadRef.active]]),te(l(jn,{text:$.$t("core::app.clear"),basic:"",pill:"",onClick:y},null,8,["text"]),[[fe,i.value.length>0&&(!$.$refs.uploadRef||!$.$refs.uploadRef.active)]])])],2)])}}},VG={key:1,class:"mb-2 text-right"},LG={key:2,class:"mb-6 space-y-3"},qG={class:"px-6"},UG=["innerHTML"],jG={__name:"SettingsModules",setup(e){const{scriptConfig:t}=qe(),n=V([]),o=V(null),a=t("requirements.zip"),r=P(()=>Object.values(o.value||{}).some(h=>h.success));async function s(){const{data:h}=await Innoclapps.request("/modules");n.value=h}async function i(h){await Innoclapps.request().post(`/modules/${h}/enable`),window.location.reload()}async function u(h){await Innoclapps.confirm(),await Innoclapps.request().post(`/modules/${h}/disable`),window.location.reload()}async function d(h){await Innoclapps.confirm(),await Innoclapps.request().delete(`/modules/${h}`),window.location.reload()}function m(h){o.value=h}function f(){window.location.reload()}return s(),(h,y)=>{const b=c("IAlertBody"),I=c("IAlert"),w=c("IButton"),k=c("ICardHeading"),x=c("ICardHeader"),$=c("ITableHeader"),C=c("ITableRow"),F=c("ITableHead"),T=c("ITableCell"),S=c("ITextSmall"),A=c("IBadge"),E=c("ITableRowAction"),B=c("ITableRowActions"),M=c("ITableBody"),N=c("ITable"),G=c("ICard");return g(),D(de,null,[v(a)?Z("",!0):(g(),R(I,{key:0,variant:"danger",class:"mb-6"},{default:p(()=>[l(b,null,{default:p(()=>[ne(K(h.$t("core::modules.zip_is_required")),1)]),_:1})]),_:1})),r.value?(g(),D("div",VG,[l(w,{variant:"success",ghost:"",onClick:f},{default:p(()=>[ne(K(h.$t("core::app.reload")),1)]),_:1})])):Z("",!0),o.value?(g(),D("div",LG,[(g(!0),D(de,null,Ie(o.value,(U,j)=>(g(),R(I,{key:j,variant:U.success?"success":"warning"},{default:p(()=>[l(b,null,{default:p(()=>[U.success?(g(),D(de,{key:0},[ne(" ["+K(j)+"] "+K(h.$t("core::modules.uploaded")),1)],64)):(g(),D(de,{key:1},[ne("["+K(j)+"] "+K(U.errorReason),1)],64))]),_:2},1024)]),_:2},1032,["variant"]))),128))])):Z("",!0),l(x,null,{default:p(()=>[l(k,{text:h.$t("core::modules.modules")},null,8,["text"]),l(ur,{extensions:"zip","select-file-text":`${h.$t("core::modules.upload_module")} (.zip)`,"show-output":!1,"allow-cancel":!1,disabled:!v(a),multiple:!1,"action-url":`${h.$scriptConfig("apiURL")}/modules`,onFileUploaded:m},null,8,["select-file-text","disabled","action-url"])]),_:1}),l(G,{overlay:n.value.length===0},{default:p(()=>[_("div",qG,[l(N,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(F,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(C,null,{default:p(()=>[l($,null,{default:p(()=>y[0]||(y[0]=[ne("#")])),_:1}),l($,null,{default:p(()=>[ne(K(h.$t("core::modules.name")),1)]),_:1}),l($,null,{default:p(()=>[ne(K(h.$t("core::modules.description")),1)]),_:1}),l($,null,{default:p(()=>[ne(K(h.$t("core::modules.version")),1)]),_:1}),l($,{width:"8%"})]),_:1})]),_:1}),l(M,null,{default:p(()=>[(g(!0),D(de,null,Ie(n.value,(U,j)=>(g(),R(C,{key:U.id,class:be(U.disabled?"opacity-60":"")},{default:p(()=>[l(T,null,{default:p(()=>[ne(K(j+1),1)]),_:2},1024),l(T,null,{default:p(()=>[ne(K(U.name)+" ",1),!U.is_core&&U.version?(g(),R(S,{key:0},{default:p(()=>[ne(" ("+K(U.version)+") ",1)]),_:2},1024)):Z("",!0),U.is_core?(g(),R(A,{key:1,variant:"info"},{default:p(()=>[ne(K(h.$t("core::modules.core_module")),1)]),_:1})):Z("",!0)]),_:2},1024),l(T,null,{default:p(()=>[_("div",{innerHTML:U.description||"N/A"},null,8,UG)]),_:2},1024),l(T,null,{default:p(()=>[ne(K(U.is_core?h.$scriptConfig("version"):U.version||"N/A"),1)]),_:2},1024),l(T,null,{default:p(()=>[U.is_core?Z("",!0):(g(),R(B,{key:0},{default:p(()=>[U.disabled?(g(),R(E,{key:0,text:h.$t("core::modules.enable"),onClick:O=>i(U.lower_name)},null,8,["text","onClick"])):(g(),R(E,{key:1,text:h.$t("core::modules.disable"),onClick:O=>u(U.lower_name)},null,8,["text","onClick"])),U.disabled?(g(),R(E,{key:2,text:h.$t("core::modules.delete"),onClick:O=>d(U.lower_name)},null,8,["text","onClick"])):Z("",!0)]),_:2},1024))]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})])]),_:1},8,["overlay"])],64)}}};var zG=function(e,t,n,o){var a=typeof o<"u"?[o,e]:[e],r=new Blob(a,{type:n||"application/octet-stream"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(r,t);else{var s=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),i=document.createElement("a");i.style.display="none",i.href=s,i.setAttribute("download",t),typeof i.download>"u"&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)},200)}};const zl=Rt(zG),HG={class:"px-6"},WG={__name:"SettingsSystemInfo",setup(e){const t=V({});function n(){Innoclapps.request("/system/info").then(({data:a})=>t.value=a)}function o(){Innoclapps.request().post("/system/info",{},{responseType:"blob"}).then(a=>{zl(a.data,"system-info.xlsx")})}return n(),(a,r)=>{const s=c("ICardHeading"),i=c("IButton"),u=c("ICardActions"),d=c("ICardHeader"),m=c("ITableCell"),f=c("ITableRow"),h=c("ITableBody"),y=c("ITable"),b=c("ICard");return g(),D(de,null,[l(d,null,{default:p(()=>[l(s,{text:a.$t("core::app.system_info")},null,8,["text"]),l(u,null,{default:p(()=>[l(i,{icon:"DocumentDownload",variant:"secondary",small:"",onClick:o})]),_:1})]),_:1}),l(b,null,{default:p(()=>[_("div",HG,[l(y,{class:"[--gutter:theme(spacing.6)]",bleed:"",grid:"",condensed:""},{default:p(()=>[l(h,null,{default:p(()=>[(g(!0),D(de,null,Ie(t.value,(I,w)=>(g(),R(f,{key:w},{default:p(()=>[l(m,{class:"font-medium"},{default:p(()=>[ne(K(w),1)]),_:2},1024),l(m,{class:"whitespace-break-spaces"},{default:p(()=>[_("code",null,K(I),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1})],64)}}},GG=["value"],KG=["value"],ZG={class:"px-6"},YG={class:"mb-3 flex justify-between py-1"},XG={class:"inline-flex items-center gap-x-2"},QG=["textContent"],JG={__name:"SettingsSystemLogs",setup(e){const t=Ct(),n=Pt({}),{UTCDateTimeInstance:o}=it(),a=V(t.query.date||o.toISODate()),r=V(t.query.type||"ALL"),s=["ALL","INFO","EMERGENCY","CRITICAL","ALERT","ERROR","WARNING","NOTICE","DEBUG"],i={INFO:"info",DEBUG:"neutral",EMERGENCY:"danger",CRITICAL:"danger",NOTICE:"neutral",WARNING:"warning",ERROR:"danger",ALERT:"warning"};Se(a,f);const u=P(()=>n.value.logs?!r.value||r.value==="ALL"?m(n.value.logs):m(n.value.logs.filter(h=>h.type===r.value)):[]),d=P(()=>u.value&&u.value.length>0);function m(h){return h.sort(function(b,I){var w=new Date(b.timestamp),k=new Date(I.timestamp);return k-w})}function f(){Innoclapps.request("/system/logs",{params:{date:a.value}}).then(({data:h})=>{n.value=h,h.log_dates.indexOf(a.value)===-1&&n.value.log_dates.push(a.value)})}return f(),(h,y)=>{const b=c("ICardHeading"),I=c("IFormSelect"),w=c("ICardActions"),k=c("ICardHeader"),x=c("ITableHeader"),$=c("ITableRow"),C=c("ITableHead"),F=c("IBadge"),T=c("IButtonCopy"),S=c("TextCollapse"),A=c("ITableCell"),E=c("ITableBody"),B=c("ITable"),M=c("ICard");return g(),D(de,null,[l(k,null,{default:p(()=>[l(b,{text:"Logs"}),l(w,null,{default:p(()=>[l(I,{modelValue:r.value,"onUpdate:modelValue":y[0]||(y[0]=N=>r.value=N),option:s,onInput:y[1]||(y[1]=N=>h.$router.replace({query:{type:N,date:a.value}}))},{default:p(()=>[(g(),D(de,null,Ie(s,N=>_("option",{key:N,value:N},K(N),9,GG)),64))]),_:1},8,["modelValue"]),l(I,{modelValue:a.value,"onUpdate:modelValue":y[2]||(y[2]=N=>a.value=N),onInput:y[3]||(y[3]=N=>h.$router.replace({query:{date:N,type:r.value}}))},{default:p(()=>[(g(!0),D(de,null,Ie(n.value.log_dates,N=>(g(),D("option",{key:N,value:N},K(N),9,KG))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(M,{header:"Logs"},{default:p(()=>[_("div",ZG,[l(B,{class:"[--gutter:theme(spacing.6)]",bleed:"",condensed:""},{default:p(()=>[l(C,null,{default:p(()=>[l($,null,{default:p(()=>[l(x,null,{default:p(()=>y[4]||(y[4]=[ne("Log")])),_:1})]),_:1})]),_:1}),l(E,null,{default:p(()=>[(g(!0),D(de,null,Ie(u.value,(N,G)=>(g(),R($,{key:G},{default:p(()=>[l(A,{width:"60%",class:"whitespace-pre-line break-all"},{default:p(()=>[_("div",YG,[_("div",XG,[l(F,{text:N.type,variant:i[N.type]},null,8,["text","variant"]),l(T,{text:N.message,small:""},null,8,["text"])]),_("p",{textContent:K(N.timestamp)},null,8,QG)]),_("code",null,[l(S,{text:N.message,length:500},null,8,["text"])])]),_:2},1024)]),_:2},1024))),128)),te(l(A,{colspan:"4",class:"text-center"},{default:p(()=>[ne(K(n.value.message||"No logs to show."),1)]),_:1},512),[[fe,!d.value]])]),_:1})]),_:1})])]),_:1})],64)}}},eK={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},tK={class:"flex flex-col space-y-2 sm:flex-row sm:items-center sm:space-y-0"},nK={class:"grow"},oK={class:"shrink-0"},aK={__name:"SettingsTools",setup(e){const{t}=Pe(),{scriptConfig:n}=qe(),o=n("tools"),a=V(null);async function r(s){a.value=s;try{await Innoclapps.request().post(`/tools/${s}`),Innoclapps.success(t("core::settings.tools.executed")),setTimeout(()=>window.location.reload(!0),1e3)}finally{a.value=null}}return(s,i)=>{const u=c("ICardHeading"),d=c("ICardHeader"),m=c("ITextDark"),f=c("IText"),h=c("IButton"),y=c("ICard");return g(),D(de,null,[l(d,null,{default:p(()=>[l(u,{text:s.$t("core::settings.tools.tools")},null,8,["text"])]),_:1}),l(y,null,{default:p(()=>[_("ul",eK,[(g(!0),D(de,null,Ie(v(o),b=>(g(),D("li",{key:b.name,class:"px-4 py-4 sm:px-6"},[_("div",tK,[_("div",nK,[l(m,{class:"font-medium",text:b.name},null,8,["text"]),l(f,{text:b.description},null,8,["text"])]),_("div",oK,[l(h,{variant:"secondary",loading:a.value===b.name,disabled:a.value!==null,text:s.$t("core::settings.tools.run"),small:"",onClick:I=>r(b.name)},null,8,["loading","disabled","text","onClick"])])])]))),128))])]),_:1})],64)}}},rK={class:"mx-auto max-w-2xl p-4"},lK=["textContent"],sK={key:1,class:"mt-3"},iK={class:"border-t border-neutral-200 bg-neutral-50 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-800"},uK={class:"flex items-center justify-end"},cK={__name:"WorkflowsForm",props:{show:Boolean,workflow:{required:!0,type:Object},triggers:{required:!0,type:Array}},emits:["update:workflow","deleteRequested","hide"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{fields:r,findField:s,hydrateFields:i}=In(),{form:u}=Qe(),d=V(null),m=V(null);Se(m,(T,S)=>{if(S&&S.fields){const A=f.value;S.fields.forEach(E=>{(!A||A&&E.attribute!==d.value.change_field.attribute)&&Mt(r.value,["attribute",E.attribute])!==-1&&r.value.splice(Mt(r.value,["attribute",E.attribute]),1)})}T&&T.fields&&T.fields.forEach(A=>{s(A.attribute)||r.value.push(Nn(A))})});const f=P(()=>d.value?!!d.value.change_field:!1),h=P(()=>m.value?m.value.fields.length>0:!1);function y(){u.put(`/workflows/${n.workflow.id}`).then(T=>{o("update:workflow",{...T,key:n.workflow.key}),o("hide"),Innoclapps.success(a("core::workflow.updated"))})}function b(){u.post("/workflows").then(T=>{o("update:workflow",{...T,key:n.workflow.key}),o("hide"),Innoclapps.success(a("core::workflow.created"))})}async function I(){await We(),n.workflow.id?y():b()}function w(T){m.value=null,C({title:u.title,description:u.description,is_active:u.is_active}),r.value=f.value?[T.change_field]:[],u.fill("trigger_type",T.identifier)}function k(T){u.fill("action_type",T.identifier||null)}function x(){if(n.workflow.id){o("hide");return}$()}function $(){o("deleteRequested",n.workflow)}function C(T={}){u.clear().set({trigger_type:T.trigger||null,action_type:T.action||null,title:T.title||null,description:T.description||null,is_active:T.is_active||!0})}function F(){d.value=ft(n.triggers,["identifier",n.workflow.trigger_type]),m.value=ft(d.value.actions,["identifier",n.workflow.action_type]);let T=h.value?Nn(m.value.fields):[];f.value&&T.push(d.value.change_field),T=T.map(S=>(S.id=S.attribute+"-"+n.index,S)),r.value.length||(r.value=T),i(n.workflow.data)}return Xe(()=>{C({title:n.workflow.title,description:n.workflow.description,is_active:n.workflow.is_active,trigger:n.workflow.trigger_type,action:n.workflow.action_type}),n.workflow.id&&F()}),(T,S)=>{const A=c("IFormInput"),E=c("IFormError"),B=c("IFormGroup"),M=c("IFormTextarea"),N=c("ICustomSelect"),G=c("FormFields"),U=c("ITextDark"),j=c("IFormSwitchLabel"),O=c("IFormSwitch"),H=c("IFormSwitchField"),W=c("IButton");return g(),D("form",{onSubmit:ot(I,["prevent"])},[_("div",rK,[_("h2",{class:"mb-4 text-lg font-medium text-neutral-700 dark:text-neutral-200",textContent:K(e.workflow.title)},null,8,lK),l(B,{"label-for":"title",label:T.$t("core::workflow.title"),required:""},{default:p(()=>[l(A,{id:"title",modelValue:v(u).title,"onUpdate:modelValue":S[0]||(S[0]=X=>v(u).title=X)},null,8,["modelValue"]),l(E,{error:v(u).getError("title")},null,8,["error"])]),_:1},8,["label"]),l(B,{class:"mb-4","label-for":"description",label:T.$t("core::workflow.description"),optional:""},{default:p(()=>[l(M,{id:"description",modelValue:v(u).description,"onUpdate:modelValue":S[1]||(S[1]=X=>v(u).description=X),rows:"2"},null,8,["modelValue"]),l(E,{error:v(u).getError("description")},null,8,["error"])]),_:1},8,["label"]),l(B,{label:T.$t("core::workflow.when"),required:""},{default:p(()=>[l(N,{modelValue:d.value,"onUpdate:modelValue":S[2]||(S[2]=X=>d.value=X),"input-id":"trigger",label:"name",clearable:!1,options:e.triggers,onOptionSelected:w},null,8,["modelValue","options"]),l(E,{error:v(u).getError("trigger_type")},null,8,["error"])]),_:1},8,["label"]),f.value?(g(),R(B,{key:0,label:T.$t("core::workflow.field_change_to"),required:""},{default:p(()=>[l(G,{fields:v(r),form:v(u),only:d.value.change_field.attribute,onUpdateFieldValue:S[3]||(S[3]=X=>v(u).fill(X.attribute,X.value)),onSetInitialValue:S[4]||(S[4]=X=>v(u).set(X.attribute,X.value))},null,8,["fields","form","only"])]),_:1},8,["label"])):Z("",!0),d.value?(g(),R(B,{key:1,class:be({"mt-3":f.value}),label:T.$t("core::workflow.then"),required:""},{default:p(()=>{var X;return[d.value?(g(),R(N,{key:0,modelValue:m.value,"onUpdate:modelValue":S[5]||(S[5]=q=>m.value=q),"input-id":"action",label:"name",clearable:!1,options:d.value.actions,onOptionSelected:k},null,8,["modelValue","options"])):Z("",!0),l(E,{error:v(u).getError("action_type")},null,8,["error"]),(X=m.value)!=null&&X.placeholders&&m.value.placeholders.length>0?(g(),D("div",sK,[l(U,{class:"mb-1 font-medium",text:T.$t("core::mail_template.placeholders.placeholders")},null,8,["text"]),l(Xw,{placeholders:m.value.placeholders},null,8,["placeholders"])])):Z("",!0)]}),_:1},8,["class","label"])):Z("",!0),h.value?(g(),R(B,{key:2},{default:p(()=>[l(G,{fields:v(r),form:v(u),except:f.value?d.value.change_field.attribute:[],onUpdateFieldValue:S[6]||(S[6]=X=>v(u).fill(X.attribute,X.value)),onSetInitialValue:S[7]||(S[7]=X=>v(u).set(X.attribute,X.value))},null,8,["fields","form","except"])]),_:1})):Z("",!0)]),_("div",iK,[_("div",uK,[l(H,{class:"mr-4 border-r border-neutral-200 pr-4 dark:border-neutral-500/30"},{default:p(()=>[l(j,{text:T.$t("core::app.active")},null,8,["text"]),l(O,{modelValue:v(u).is_active,"onUpdate:modelValue":S[8]||(S[8]=X=>v(u).is_active=X)},null,8,["modelValue"])]),_:1}),l(W,{variant:"secondary",text:T.$t("core::app.cancel"),onClick:x},null,8,["text"]),l(W,{class:"ml-2",variant:"primary",disabled:v(u).busy,text:T.$t("core::app.save"),onClick:I},null,8,["disabled","text"])])])],32)}}},dK={class:"flex items-center px-4 py-5 sm:px-6"},mK={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},fK={class:"truncate"},pK={class:"flex"},vK={class:"sm:flex sm:items-center sm:space-x-4"},hK={class:"mt-2 shrink-0 sm:ml-5 sm:mt-0"},gK={__name:"WorkflowsListItem",props:{triggers:{required:!0,type:Array},workflow:{required:!0,type:Object}},emits:["update:workflow","deleteRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{localizedDateTime:r}=it(),s=V(!1);function i(d){Innoclapps.request().put(`/workflows/${n.workflow.id}`,{...n.workflow,data:{},...n.workflow.data,is_active:d}).then(({data:m})=>{o("update:workflow",{...m,key:n.workflow.key}),Innoclapps.success(a("core::workflow.updated"))})}function u(){o("deleteRequested",n.workflow)}return n.workflow.id||(s.value=!0),(d,m)=>{const f=c("Icon"),h=c("ILink"),y=c("ITextDark"),b=c("IText"),I=c("IFormSwitchLabel"),w=c("IFormSwitch"),k=c("IFormSwitchField"),x=c("IDropdownItem"),$=c("IDropdownMinimal");return g(),D(de,null,[s.value?(g(),R(cK,{key:0,workflow:e.workflow,triggers:e.triggers,onHide:m[0]||(m[0]=C=>s.value=!1),"onUpdate:workflow":m[1]||(m[1]=C=>d.$emit("update:workflow",C)),onDeleteRequested:m[2]||(m[2]=C=>d.$emit("deleteRequested",C))},null,8,["workflow","triggers"])):Z("",!0),_("div",{class:be({"opacity-70":!e.workflow.is_active,hidden:s.value})},[_("div",dK,[_("div",mK,[_("div",fK,[_("div",pK,[l(h,{class:"flex items-center truncate font-medium",onClick:m[3]||(m[3]=C=>s.value=!0)},{default:p(()=>[ne(K(e.workflow.title)+" ",1),l(f,{icon:"ArrowRight",class:"ml-1 size-4"})]),_:1})]),_("div",vK,[l(y,null,{default:p(()=>[ne(K(d.$t("core::workflow.total_executions",{total:e.workflow.total_executions||0})),1)]),_:1}),e.workflow.created_at?(g(),R(b,{key:0,class:"truncate"},{default:p(()=>[ne(K(d.$t("core::app.created_at"))+": "+K(v(r)(e.workflow.created_at)),1)]),_:1})):Z("",!0)])]),_("div",hK,[l(k,null,{default:p(()=>[l(I,{text:d.$t("core::app.active")},null,8,["text"]),l(w,{"model-value":e.workflow.is_active,onChange:i},null,8,["model-value"])]),_:1})])]),l($,{class:"ml-2 shrink-0 self-start sm:self-auto"},{default:p(()=>[l(x,{icon:"PencilAlt",text:d.$t("core::app.edit"),onClick:m[4]||(m[4]=C=>s.value=!0)},null,8,["text"]),l(x,{icon:"Trash",text:d.$t("core::app.delete"),onClick:u},null,8,["text"])]),_:1})])],2)],64)}}},bK={__name:"WorkflowsList",setup(e){const{t}=Pe(),n=V([]),o=V([]),a=V(!1),r=P(()=>Vt(o.value,[y=>y.id==null?0:1,y=>y.is_active?1:0,"title"],["asc","desc","asc"])),s=P(()=>o.value.filter(y=>!y.id).length>0),i=P(()=>o.value.length>0);function u(){o.value.unshift({key:So(),title:"",description:null,is_active:!1,trigger_type:null,action_type:null})}function d(y){o.value.splice(Mt(o.value,["key",y]),1)}function m(y){let b=Mt(o.value,["key",y.key]);o.value[b]=y}function f(y){y.id?Innoclapps.confirm().then(()=>h(y)):d(y.key)}function h(y){Innoclapps.request().delete(`/workflows/${y.id}`).then(()=>{d(y.key),Innoclapps.success(t("core::workflow.deleted"))})}return Promise.all([Innoclapps.request("/workflows"),Innoclapps.request("/workflows/triggers")]).then(y=>{o.value.push(...y[0].data.map(b=>({...b,key:So()}))),n.value=y[1].data,a.value=!0}),(y,b)=>{const I=c("ICardHeading"),w=c("IButton"),k=c("ICardActions"),x=c("ICardHeader"),$=c("IEmptyState"),C=c("ICardBody"),F=c("ICard");return g(),D(de,null,[l(x,null,{default:p(()=>[l(I,{text:y.$t("core::workflow.workflows")},null,8,["text"]),l(k,null,{default:p(()=>[te(l(w,{variant:"primary",icon:"PlusSolid",disabled:s.value,text:y.$t("core::workflow.create"),onClick:u},null,8,["disabled","text"]),[[fe,i.value]])]),_:1})]),_:1}),l(F,{overlay:!a.value},{default:p(()=>[a.value?(g(),D(de,{key:0},[i.value?(g(),R(wi,{key:0,name:"flip-list",tag:"ul",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[(g(!0),D(de,null,Ie(r.value,T=>(g(),D("li",{key:T.key},[l(gK,{workflow:T,triggers:n.value,"onUpdate:workflow":m,onDeleteRequested:f},null,8,["workflow","triggers"])]))),128))]),_:1})):(g(),R(C,{key:1},{default:p(()=>[l($,{"button-text":y.$t("core::workflow.create"),description:y.$t("core::workflow.info"),onClick:u},null,8,["button-text","description"])]),_:1}))],64)):Z("",!0)]),_:1},8,["overlay"])],64)}}};function oI(){const e=V([]);let t=null;async function n(){const{data:a}=await Innoclapps.request("/cards",{cancelToken:new ol(r=>t=r)});e.value=a}function o(a,r){return Fn(a,(s,i)=>{let u=ft(r.cards,["key",s.uriKey]);return s.order=u&&Object.hasOwn(u,"order")?u.order:i+1,s.enabled=!!(!u||u.enabled||typeof u.enabled>"u"),s})}return mn(()=>{t&&t()}),{cards:e,fetchCards:n,applyUserConfig:o}}const yK={class:"mx-auto max-w-7xl lg:max-w-6xl"},_K={class:"pointer-events-none block h-full w-full opacity-70"},wK={__name:"DashboardsEdit",setup(e){const{t}=Pe(),n=wt(),o=Ct(),a=fn(),{currentUser:r}=qe(),{cards:s,fetchCards:i,applyUserConfig:u}=oI(),d=yo(),m=V({}),f=V(!1),{form:h}=Qe({cards:[],name:null,is_default:!1}),y=P(()=>r.value.dashboards),b=P(()=>y.value.length),I=P(()=>ft(y.value,["id",parseInt(o.params.id)])),w=P(()=>u(s.value,I.value)),k=P(()=>b.value===1?!0:b.value>1&&I.value.is_default===!1);function x(){h.set("cards",w.value.map(C=>({key:C.uriKey,order:C.order,enabled:m.value[C.uriKey]}))),h.put(`/dashboards/${I.value.id}`).then(C=>{Innoclapps.success(t("core::dashboard.updated")),a.commit("users/UPDATE_DASHBOARD",C),n.push({name:"dashboard"})})}async function $(){if(!I.value){n.push({name:"not-found"});return}await i(),await We(),w.value.forEach(C=>{m.value[C.uriKey]=C.enabled}),d.value=I.value.name,h.set("name",I.value.name),h.set("is_default",I.value.is_default),f.value=!0}return $(),(C,F)=>{const T=c("NavbarSeparator"),S=c("IButton"),A=c("IFormInput"),E=c("IFormError"),B=c("IFormGroup"),M=c("IFormCheckbox"),N=c("IFormCheckboxLabel"),G=c("IFormCheckboxField"),U=c("IOverlay"),j=c("IText"),O=c("MainLayout");return g(),R(O,{class:"dashboard-edit"},{actions:p(()=>[te(l(T,{class:"hidden lg:block"},null,512),[[fe,f.value]]),te(l(S,{variant:"primary",disabled:v(h).busy,text:C.$t("core::app.save"),onClick:x},null,8,["disabled","text"]),[[fe,f.value]])]),default:p(()=>[_("div",yK,[_("form",{onSubmit:ot(x,["prevent"])},[l(U,{show:!f.value},{default:p(()=>[l(B,{"label-for":"dashboard-name",label:C.$t("core::dashboard.name"),required:""},{default:p(()=>[l(A,{id:"dashboard-name",modelValue:v(h).name,"onUpdate:modelValue":F[0]||(F[0]=H=>v(h).name=H)},null,8,["modelValue"]),l(E,{error:v(h).getError("name")},null,8,["error"])]),_:1},8,["label"]),k.value?(g(),R(B,{key:0},{default:p(()=>[l(G,null,{default:p(()=>[l(M,{checked:v(h).is_default,"onUpdate:checked":F[1]||(F[1]=H=>v(h).is_default=H)},null,8,["checked"]),l(N,{text:C.$t("core::dashboard.default")},null,8,["text"])]),_:1}),l(E,{error:v(h).getError("is_default")},null,8,["error"])]),_:1})):Z("",!0)]),_:1},8,["show"]),(g(!0),D(de,null,Ie(w.value,H=>(g(),D("div",{key:H.uriKey,class:"mb-6 mt-8"},[l(G,{class:"mb-2"},{default:p(()=>[l(M,{checked:m.value[H.uriKey],"onUpdate:checked":W=>m.value[H.uriKey]=W},null,8,["checked","onUpdate:checked"]),l(N,{text:C.$t("core::dashboard.cards.enabled")},null,8,["text"])]),_:2},1024),H.description?(g(),R(j,{key:0,class:"my-2",text:H.description},null,8,["text"])):Z("",!0),_("div",_K,[(g(),R(_t(H.component),{card:H},null,8,["card"]))])]))),128))],32)])]),_:1})}}},Oa={__name:"CardPlaceholder",props:{pulse:Boolean,size:{type:String,default:"md"}},setup(e){return(t,n)=>{const o=c("ICardBody"),a=c("ICard");return g(),R(a,{class:be({"h-56 md:h-52":e.size==="md","h-64":e.size==="lg","animate-pulse":e.pulse})},{default:p(()=>[l(o,null,{default:p(()=>[n[0]||(n[0]=_("div",{class:"mt-2 flex"},[_("div",{class:"mr-10 h-5 grow rounded bg-neutral-200 dark:bg-neutral-800"}),_("div",{class:"h-5 w-36 rounded bg-neutral-200 dark:bg-neutral-800"})],-1)),_("div",{class:be(["mt-7 w-full bg-neutral-200 dark:bg-neutral-800",{"h-28":e.size==="md","h-40":e.size==="lg"}])},null,2)]),_:1})]),_:1},8,["class"])}}},IK={class:"flex items-center space-x-3 lg:space-x-5"},xK=["textContent"],kK={key:0,class:"before:box-inherit after:box-inherit columns-1 gap-x-6 lg:columns-2"},$K={class:"mb-8 break-inside-avoid sm:mb-5"},CK={class:"relative"},SK={class:"absolute left-3 top-5 ml-px mt-0.5 inline-flex cursor-move items-center justify-center text-neutral-500 dark:text-neutral-300 sm:left-1","data-sortable-handle":"insights"},Db={__name:"DashboardsIndex",setup(e){const{t}=Pe(),n=wt(),o=fn(),{currentUser:a}=qe(),{cards:r,fetchCards:s,applyUserConfig:i}=oI(),{form:u}=Qe({name:""}),d=V([]),m=V({}),f=P(()=>r.value.length>0),h=P(()=>mr(Vo(i(r.value,m.value),"enabled"),["order","asc"])),y=P(()=>Vt(a.value.dashboards,["is_default","name"],["desc","asc"])||[]),b=P(()=>ft(y.value,["is_default",!0])||y.value[0]);function I(C){n.push({name:"edit-dashboard",params:{id:C.id}})}function w(){u.post("/dashboards").then(C=>{Innoclapps.success(t("core::dashboard.created")),o.commit("users/ADD_DASHBOARD",C),I(C)})}function k(C){m.value=C,We(()=>d.value=h.value)}function x(){let F=i(r.value,m.value).map(T=>{let S=Mt(d.value,["uriKey",T.uriKey]);return{key:T.uriKey,enabled:T.enabled,order:S===-1?T.order:S+1}});Innoclapps.request().put(`/dashboards/${m.value.id}`,{cards:F}).then(({data:T})=>{k(T),o.commit("users/UPDATE_DASHBOARD",T)})}async function $(C){await Innoclapps.request().delete(`/dashboards/${C.id}`),Innoclapps.success(t("core::dashboard.deleted")),o.commit("users/REMOVE_DASHBOARD",C.id),k(b.value)}return Xe(()=>{s().then(()=>{We(()=>{k(b.value)})})}),(C,F)=>{const T=c("NavbarSeparator"),S=c("IDropdownItem"),A=c("IDropdownMinimal"),E=c("IDropdownButton"),B=c("IDropdownMenu"),M=c("IDropdown"),N=c("Icon"),G=c("SortableDraggable"),U=c("IFormInput"),j=c("IFormError"),O=c("IFormGroup"),H=c("IModal"),W=c("MainLayout");return g(),R(W,null,{actions:p(()=>[l(T,{class:"hidden lg:block"}),_("div",IK,[l(A,{placement:"bottom-end",horizontal:""},{default:p(()=>[l(S,{icon:"PencilAlt",text:C.$t("core::dashboard.edit_current"),onClick:F[0]||(F[0]=X=>I(m.value))},null,8,["text"]),l(S,{icon:"Plus",text:C.$t("core::dashboard.new_dashboard"),onClick:F[1]||(F[1]=X=>C.$dialog.show("newDashboard"))},null,8,["text"]),l(S,{icon:"Trash",text:C.$t("core::dashboard.delete_current"),onClick:F[2]||(F[2]=X=>C.$confirm(()=>$(m.value)))},null,8,["text"])]),_:1}),l(M,{placement:"bottom-end"},{default:p(()=>[l(E,{icon:m.value.is_default?"Star":void 0,class:be(["max-w-72 sm:max-w-[13rem]",f.value?"":"pointer-events-none blur"]),active:m.value.is_default||y.value.length===0,basic:""},{default:p(()=>[_("span",{class:"truncate",textContent:K(f.value?m.value.name:"Dashboard")},null,8,xK)]),_:1},8,["icon","class","active"]),l(B,null,{default:p(()=>[(g(!0),D(de,null,Ie(y.value,X=>(g(),R(S,{key:X.id,text:X.name,active:X.id===m.value.id,onClick:q=>k(X)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),default:p(()=>[f.value?Z("",!0):(g(),D("div",kK,[F[3]||(He(-1),(F[3]=l(Oa,{class:"mb-5",pulse:""})).cacheIndex=3,He(1),F[3]),F[4]||(He(-1),(F[4]=l(Oa,{class:"mb-5",size:"lg",pulse:""})).cacheIndex=4,He(1),F[4]),F[5]||(He(-1),(F[5]=l(Oa,{class:"mb-5",pulse:""})).cacheIndex=5,He(1),F[5]),F[6]||(He(-1),(F[6]=l(Oa,{class:"mb-5",pulse:""})).cacheIndex=6,He(1),F[6]),F[7]||(He(-1),(F[7]=l(Oa,{class:"mb-5",size:"lg",pulse:""})).cacheIndex=7,He(1),F[7]),F[8]||(He(-1),(F[8]=l(Oa,{class:"mb-5",size:"lg",pulse:""})).cacheIndex=8,He(1),F[8]),F[9]||(He(-1),(F[9]=l(Oa,{class:"mb-5",pulse:""})).cacheIndex=9,He(1),F[9]),F[10]||(He(-1),(F[10]=l(Oa,{class:"mb-5",pulse:""})).cacheIndex=10,He(1),F[10])])),l(G,Ue({modelValue:d.value,"onUpdate:modelValue":F[11]||(F[11]=X=>d.value=X),handle:"[data-sortable-handle='insights']",class:"before:box-inherit after:box-inherit columns-1 gap-x-6 lg:columns-2","item-key":"uriKey"},C.$draggable.common,{onChange:x}),{item:p(({element:X})=>[_("div",$K,[_("div",CK,[_("div",SK,[l(N,{icon:"Selector",class:"size-4"})]),(g(),R(_t(X.component),{card:X},null,8,["card"]))])])]),_:1},16,["modelValue"]),l(H,{id:"newDashboard",size:"sm","ok-text":C.$t("core::app.create"),"ok-disabled":v(u).busy,title:C.$t("core::dashboard.create"),form:"",onSubmit:w,onShown:F[13]||(F[13]=()=>C.$refs.inputNameRef.focus())},{default:p(()=>[l(O,{"label-for":"dashboard-name",label:C.$t("core::dashboard.name"),required:""},{default:p(()=>[l(U,{id:"dashboard-name",ref:"inputNameRef",modelValue:v(u).name,"onUpdate:modelValue":F[12]||(F[12]=X=>v(u).name=X)},null,8,["modelValue"]),l(j,{error:v(u).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","ok-disabled","title"])]),_:1})}}},TK={},EK={class:"mt-20 flex flex-col flex-wrap content-center"},FK={class:"flex flex-col items-center"},AK={class:"flex flex-col justify-center"},RK={class:"mt-5 text-center text-neutral-700 dark:text-neutral-200"},DK={class:"mt-5 text-center"};function OK(e,t){const n=c("Icon"),o=c("IButton"),a=c("MainLayout");return g(),R(a,{"no-padding":""},{default:p(()=>[_("div",EK,[_("div",FK,[l(n,{icon:"ShieldExclamation",class:"h-20 w-20 text-primary-300"}),t[0]||(t[0]=_("h1",{class:"mb-2 mt-6 text-3xl font-bold text-neutral-900 dark:text-white"}," 403! ",-1)),t[1]||(t[1]=_("h2",{class:"text-2xl text-neutral-700 dark:text-neutral-100"}," Hang on... ",-1))]),_("div",AK,[_("p",RK,K(e.$route.query.message||"You are not authorized to perform this action or view this page."),1),_("div",DK,[l(o,{to:"/dashboard",variant:"primary"},{default:p(()=>t[2]||(t[2]=[ne(" Go to dashboard ")])),_:1})])])])]),_:1})}const PK=an(TK,[["render",OK]]),MK={},BK={class:"mt-20 flex flex-col flex-wrap content-center"},NK={class:"flex flex-col items-center"},VK={class:"flex flex-col justify-center"},LK={class:"mt-5 text-center"};function qK(e,t){const n=c("Icon"),o=c("IButton"),a=c("MainLayout");return g(),R(a,{"no-padding":""},{default:p(()=>[_("div",BK,[_("div",NK,[l(n,{icon:"QuestionMarkCircle",class:"h-20 w-20 text-primary-300"}),t[0]||(t[0]=_("h1",{class:"mb-2 mt-6 text-3xl font-bold text-neutral-900 dark:text-white"}," Oops! ",-1)),t[1]||(t[1]=_("h2",{class:"text-2xl text-neutral-700 dark:text-neutral-100"}," Page not found ",-1))]),_("div",VK,[t[3]||(t[3]=_("p",{class:"mt-5 text-neutral-700 dark:text-neutral-300"}," The page you are trying to view does not exists or you don't have permissions to access it. ",-1)),_("div",LK,[l(o,{variant:"primary",to:{name:"dashboard"}},{default:p(()=>t[2]||(t[2]=[ne(" Go to dashboard ")])),_:1})])])])]),_:1})}const Ob=an(MK,[["render",qK]]),UK={class:"mt-3 flex justify-center"},Ir={__name:"InfinityLoader",props:{scrollElement:String,debounce:{type:[Number,Boolean,String],default:200},offset:{type:Number,default:0},loadWhenMounted:Boolean},emits:["handle","loaded","complete","reset","pause","resume"],setup(e,{expose:t,emit:n}){const o=e,a=n,r={COMPLETE:"complete",LOADING:"loading",READY:"ready",PAUSED:"paused"},s=V(null),i=V(r.READY);let u=null,d=null;const m={loaded:()=>{a("loaded"),i.value=r.READY},complete:()=>{a("complete"),i.value=r.COMPLETE,b()},reset:()=>{a("reset"),i.value=r.READY,I()},pause:()=>{a("pause"),i.value=r.PAUSED,b()},resume:()=>{i.value===r.PAUSED&&(a("resume"),i.value=r.READY,I())}},f=P(()=>i.value===r.LOADING);function h(k){if(i.value===r.READY&&qA(s.value)){let x=k.target;k.target===document&&(x=x.scrollingElement||x.documentElement),x.scrollHeight-o.offset-x.scrollTop-x.clientHeight<1&&y()}}o.debounce?d=xa(h,o.debounce,{trailing:!0}):d=h;function y(k=!1){(i.value===r.READY||k===!0)&&(i.value=r.LOADING,a("handle",m))}function b(){u&&u.removeEventListener("scroll",d,F0())}function I(){u&&u.addEventListener("scroll",d,F0())}function w(){u=o.scrollElement?document.querySelector(o.scrollElement):window,o.loadWhenMounted&&y(),I()}return Xe(()=>{We(w)}),un(b),t({attemptLoad:y,state:m}),(k,x)=>{const $=c("ISpinner");return g(),D("div",{ref_key:"rootElRef",ref:s},[Ee(k.$slots,"default"),_("div",UK,[te(l($,{class:"size-4 text-primary-500"},null,512),[[fe,f.value]])])],512)}}};function aI(){const{currentUser:e}=qe(),{t}=Pe(),n=fn(),o=V(!1),a=P(()=>e.value.notifications.unread_count),r=P(()=>a.value>0);function s(){n.commit("users/INCREMENT_TOTAL_UNREAD_NOTIFICATIONS")}function i(){n.commit("users/DECREMENT_TOTAL_UNREAD_NOTIFICATIONS")}async function u(h){o.value=!0;try{return await Innoclapps.request("/notifications",h)}finally{o.value=!1}}function d(h){return h.data.lang?t(h.data.lang.key,h.data.lang.attrs):h.data.message}async function m(){e.value.notifications.unread_count>0&&(await Innoclapps.request().put("/notifications"),n.commit("users/SET_TOTAL_UNREAD_NOTIFICATIONS",0))}async function f(h){await Innoclapps.request().put(`/notifications/${h}`),i()}return{totalUnreadNotifications:a,hasUnreadNotifications:r,notificationsBeingLoaded:o,fetchNotifications:u,incrementTotalUnreadNotifications:s,decrementTotalUnreadNotifications:i,localizeNotification:d,markAllNotificationsRead:m,markNotificationAsRead:f}}const jK={class:"mx-auto max-w-5xl"},zK={class:"flex items-center px-4 py-4 sm:px-6"},HK={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},WK={class:"truncate"},GK={__name:"NotificationsIndex",setup(e){const{localizeNotification:t,decrementTotalUnreadNotifications:n,markAllNotificationsRead:o,hasUnreadNotifications:a,fetchNotifications:r}=aI(),{localizedDateTime:s}=it(),i=V([]),u=V(!1),d=V(1),m=V(!1),f=P(()=>i.value.length),h=P(()=>d.value>1);function y(){m.value=!0,o().finally(()=>{m.value=!1,i.value.forEach(k=>{k.read_at=new Date().toISOString()})})}async function b(k){await Innoclapps.confirm();const x=i.value[k];await Innoclapps.request().delete(`/notifications/${x.id}`),!x.read_at&&a.value&&n(),i.value.splice(k,1)}function I(k){const x=k.filter($=>!i.value.some(C=>C.id===$.id));i.value.push(...x)}async function w(k){const{data:x}=await r({params:{page:d.value}});I(x.data),await We(),x.total===f.value&&(u.value=!0,k.complete()),d.value+=1,k.loaded()}return jt("new-notification",k=>i.value.unshift(k)),(k,x)=>{const $=c("ICardHeading"),C=c("IButton"),F=c("ICardActions"),T=c("ICardHeader"),S=c("ITextDark"),A=c("IText"),E=c("ILink"),B=c("Icon"),M=c("ICardBody"),N=c("ICard"),G=c("MainLayout");return g(),R(G,null,{default:p(()=>[_("div",jK,[l(T,null,{default:p(()=>[l($,{text:k.$t("core::notifications.notifications")},null,8,["text"]),l(F,null,{default:p(()=>[te(l(C,{variant:"secondary",loading:m.value,disabled:!v(a),text:k.$t("core::notifications.mark_all_as_read"),small:"",onClick:y},null,8,["loading","disabled","text"]),[[fe,f.value>0]])]),_:1})]),_:1}),l(N,null,{default:p(()=>[_("ul",null,[(g(!0),D(de,null,Ie(i.value,(U,j)=>(g(),D("li",{key:U.id,class:"border-b border-neutral-200 dark:border-neutral-500/30"},[l(E,{class:"block hover:bg-neutral-50 dark:hover:bg-neutral-700/60",to:U.data.path,plain:""},{default:p(()=>[_("div",zK,[_("div",HK,[_("div",WK,[l(S,{class:"truncate font-medium",text:v(t)(U)},null,8,["text"]),l(A,{text:v(s)(U.created_at)},null,8,["text"])])]),l(C,{class:"ml-5 shrink-0 self-start",icon:"Trash",basic:"",onClick:ot(O=>b(j),["prevent","stop"])},null,8,["onClick"])])]),_:2},1032,["to"])]))),128))]),l(Ir,{"load-when-mounted":"",onHandle:w}),te(l(M,{class:"text-center"},{default:p(()=>[l(B,{icon:"EmojiSad",class:"mx-auto size-12 text-neutral-400"}),l(A,{class:"mt-2",text:k.$t("core::notifications.no_notifications")},null,8,["text"])]),_:1},512),[[fe,f.value===0&&h.value]]),te(l(A,{class:"pb-3 text-center",text:k.$t("core::notifications.no_more_notifications")},null,8,["text"]),[[fe,u.value&&f.value>0]])]),_:1})])]),_:1})}}},KK={class:"rounded-lg border border-neutral-200 px-5 py-4 shadow-sm dark:border-neutral-500/30"},ZK={class:"flex flex-col sm:flex-row sm:items-center"},YK={class:"flex items-center"},XK={class:"mt-1.5 self-start"},QK={class:"ml-1 sm:ml-2"},JK=["textContent"],eZ={class:"ml-0 mt-2 shrink-0 grow sm:ml-auto sm:mt-0 sm:grow-0"},tZ={class:"flex items-center sm:justify-center"},pc={__name:"OAuthAccount",props:{account:{type:Object},withReconnectLink:{type:Boolean,default:!0}},setup(e){const t=e,n=Ct(),o=P(()=>n.name!=="oauth-accounts"&&t.withReconnectLink);return(a,r)=>{const s=c("Icon"),i=c("ITextBlock"),u=c("IButton");return g(),D("div",KK,[_("div",ZK,[_("div",YK,[_("div",XK,[_("span",{class:be(["inline-flex size-6 items-center justify-center rounded-full p-1",[e.account.requires_auth?"bg-danger-500":"bg-success-500"]])},[l(s,{class:"size-5 text-white",icon:e.account.requires_auth?"XSolid":"Check"},null,8,["icon"])],2)]),_("div",QK,[_("span",{class:"text-sm font-medium text-neutral-700 dark:text-neutral-200",textContent:K(e.account.email)},null,8,JK),r[0]||(r[0]=_("br",null,null,-1)),e.account.requires_auth?(g(),R(i,{key:0,class:"text-warning-700 dark:text-warning-600"},{default:p(()=>[ne(K(a.$t("core::oauth.requires_authentication")),1)]),_:1})):Z("",!0),Ee(a.$slots,"after-name")])]),_("div",eZ,[_("div",tZ,[te(l(u,{to:{name:"oauth-accounts",query:{reconnect:e.account.id}},text:a.$t("core::oauth.re_authenticate"),basic:""},null,8,["to","text"]),[[fe,o.value]]),Ee(a.$slots,"default")])])])])}}},nZ={class:"mx-auto max-w-5xl"},oZ={key:0,class:"space-y-3"},aZ={key:1,class:"py-10 text-center"},rZ={__name:"OAuthAccounts",setup(e){const t=fn(),n=Ct(),{t:o}=Pe(),{appUrl:a}=qe(),{setLoading:r,isLoading:s}=Cn(),i=V([]),u=P(()=>i.value.length>0);function d(h){window.location.href=`${a}/${h.type}/connect`}async function m(h){await Innoclapps.confirm(o("core::oauth.delete_warning")),await Innoclapps.request().delete(`oauth/accounts/${h}`);const y=Mt(i.value,["id",parseInt(h)]);i.value.splice(y,1),t.commit("emailAccounts/RESET"),Innoclapps.success(o("core::oauth.deleted"))}async function f(){r(!0);try{const{data:h}=await Innoclapps.request("oauth/accounts");i.value=h,n.query.reconnect&&d(h.find(y=>y.id==n.query.reconnect))}finally{r(!1)}}return f(),(h,y)=>{const b=c("ICardHeading"),I=c("ICardHeader"),w=c("IButton"),k=c("Icon"),x=c("IText"),$=c("ICardBody"),C=c("ICard"),F=c("RouterView"),T=c("MainLayout");return g(),R(T,null,{default:p(()=>[_("div",nZ,[l(I,null,{default:p(()=>[l(b,{text:h.$t("core::oauth.connected_accounts")},null,8,["text"])]),_:1}),l(C,{overlay:v(s)},{default:p(()=>[l($,null,{default:p(()=>[u.value?(g(),D("div",oZ,[(g(!0),D(de,null,Ie(i.value,S=>(g(),R(pc,{key:S.id,account:S},{default:p(()=>[l(w,{text:h.$t("core::oauth.re_authenticate"),basic:"",onClick:A=>d(S)},null,8,["text","onClick"]),S.authorizations.delete?(g(),R(w,{key:0,class:"ml-1",icon:"Trash",basic:"",onClick:A=>m(S.id)},null,8,["onClick"])):Z("",!0)]),_:2},1032,["account"]))),128))])):te((g(),D("div",aZ,[l(k,{icon:"EmojiSad",class:"mx-auto mb-2 size-12 text-neutral-400"}),l(x,{text:h.$t("core::oauth.no_accounts")},null,8,["text"])],512)),[[fe,!v(s)]])]),_:1})]),_:1},8,["overlay"])]),l(F)]),_:1})}}},Sm={__name:"ResourceImportStepItem",props:{index:{type:Number,required:!0}},setup(e){return(t,n)=>(g(),D("span",{class:be([e.index!==0?"lg:pl-9":"","flex items-start px-6 py-5 text-sm font-medium"])},[Ee(t.$slots,"default")],2))}},lZ={class:"shrink-0"},Tm=Object.assign({inheritAttrs:!1},{__name:"ResourceImportStepItemCircle",setup(e){return(t,n)=>(g(),D("span",lZ,[_("span",Ue({class:"flex size-10 items-center justify-center rounded-full"},t.$attrs),[Ee(t.$slots,"default")],16)]))}}),sZ={class:"ml-4 mt-0.5 flex min-w-0 flex-col"},iZ=["textContent"],uZ=["textContent"],Em={__name:"ResourceImportStepItemInfo",props:{step:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),D("span",sZ,[_("span",{class:be(["text-sm font-semibold uppercase tracking-wide sm:text-xs",e.step.status==="complete"?"dark:text-primary-300":e.step.status==="current"?"text-primary-600 dark:text-primary-300":"text-neutral-500 dark:text-neutral-100",,]),textContent:K(e.step.name)},null,10,iZ),_("span",{class:"truncate text-base font-medium text-neutral-500 dark:text-neutral-200 sm:text-sm",textContent:K(e.step.description)},null,8,uZ)]))}},Fm={__name:"ResourceImportStepTail",props:{isCurrent:{type:Boolean,default:!1}},setup(e){return(t,n)=>(g(),D("span",{"aria-hidden":"true",class:be(["absolute left-0 top-0 h-full w-1 lg:bottom-0 lg:top-auto lg:h-1 lg:w-full",e.isCurrent?"bg-primary-600 dark:bg-primary-300":"bg-transparent"])},null,2))}},cZ={class:"relative overflow-hidden lg:flex-1"},dZ={key:0},mZ={key:1,"aria-current":"step"},fZ={class:"text-primary-600 dark:text-primary-300"},pZ={key:2},vZ={class:"text-neutral-500 dark:text-neutral-300"},hZ={key:3,class:"absolute inset-0 left-0 top-0 hidden w-3 lg:block","aria-hidden":"true"},gZ={__name:"ResourceImportStep",props:{step:{type:Object,required:!0},total:{type:Number,required:!0},index:{type:Number,required:!0}},setup(e){return(t,n)=>{const o=c("Icon");return g(),D("li",cZ,[_("div",{class:be([e.index===0?"border-b-0":"",e.index===e.total-1?"border-t-0":"","overflow-hidden border-y border-neutral-200 dark:border-neutral-500/30 lg:border-0"])},[e.step.status==="complete"?(g(),D("div",dZ,[l(Fm),l(Sm,{index:e.index},{default:p(()=>[l(Tm,{class:be(e.index!==e.total-1?"bg-primary-600":"bg-success-500")},{default:p(()=>[l(o,{icon:"Check",class:"size-6 text-white"})]),_:1},8,["class"]),l(Em,{step:e.step},null,8,["step"])]),_:1},8,["index"])])):e.step.status==="current"?(g(),D("div",mZ,[l(Fm,{"is-current":""}),l(Sm,{index:e.index},{default:p(()=>[l(Tm,{class:"border-2 border-primary-600 dark:border-primary-300"},{default:p(()=>[_("span",fZ,K(e.step.id),1)]),_:1}),l(Em,{step:e.step},null,8,["step"])]),_:1},8,["index"])])):(g(),D("div",pZ,[l(Fm),l(Sm,{index:e.index},{default:p(()=>[l(Tm,{class:"border-2 border-neutral-300 dark:border-neutral-400"},{default:p(()=>[_("span",vZ,K(e.step.id),1)]),_:1}),l(Em,{step:e.step},null,8,["step"])]),_:1},8,["index"])])),e.index!==0?(g(),D("div",hZ,n[0]||(n[0]=[_("svg",{class:"h-full w-full text-neutral-300 dark:text-neutral-600",viewBox:"0 0 12 82",fill:"none",preserveAspectRatio:"none"},[_("path",{d:"M0.5 0V31L10.5 41L0.5 51V82",stroke:"currentcolor","vector-effect":"non-scaling-stroke"})],-1)]))):Z("",!0)],2)])}}},bZ={class:"-mt-px lg:border-b lg:border-t lg:border-neutral-200 lg:dark:border-neutral-500/30"},yZ={class:"mx-auto max-w-7xl lg:px-8","aria-label":"Progress"},_Z={role:"list",class:"overflow-hidden lg:flex lg:border-l lg:border-r lg:border-neutral-200 lg:dark:border-neutral-500/30"},wZ={__name:"ResourceImportSteps",props:{steps:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),D("div",bZ,[_("nav",yZ,[_("ol",_Z,[(g(!0),D(de,null,Ie(e.steps,(o,a)=>(g(),R(gZ,{key:o.id,step:o,total:e.steps.length,index:a},null,8,["step","total","index"]))),128))])])]))}},IZ={class:"flex items-center space-x-2"},xZ={class:"text-base font-medium text-info-700 sm:text-sm"},kZ={key:3,class:"mt-5"},$Z={class:"flex"},CZ={class:"w-1/2"},SZ={class:"w-1/2"},TZ={key:0,value:""},EZ=["disabled","value","textContent"],FZ={class:"px-6"},AZ={class:"flex items-center justify-center space-x-1"},RZ={key:0},DZ={class:"relative h-4 rounded-full bg-neutral-200"},OZ={class:"absolute inset-0 flex items-center justify-center text-xs font-medium text-neutral-900"},PZ={class:"inline-block"},MZ={class:"flex items-center justify-end space-x-2"},BZ={class:"mb-4 mt-8 flex items-center"},NZ={key:0,class:"sm:py-8"},VZ={class:"mx-auto w-full max-w-2xl p-6 sm:mt-12"},LZ={class:"mx-auto sm:grid sm:grid-cols-4"},qZ={class:"flex gap-x-3"},UZ={class:"mt-8 flex items-center justify-center gap-x-3 sm:mr-16"},rI={__name:"ResourceImport",props:{header:String,resourceName:{required:!0,type:String},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,{t:n}=Pe(),{resetStoreState:o}=qe(),{localizedDateTime:a}=it(),r=Ct(),s=wt(),i=V([]),u=V(!1),d=V(null),m=V(null),f=V(null),h=V(!1),y=V(!1),b=V({}),I=V(!1),w=V([{id:"01",name:n("core::import.steps.step_1.name"),description:n("core::import.steps.step_1.description"),status:"current",icon:"DocumentDownload"},{id:"02",name:n("core::import.steps.step_2.name"),description:n("core::import.steps.step_2.description"),status:"upcoming",icon:"CloudArrowUp"},{id:"03",name:n("core::import.steps.step_3.name"),description:n("core::import.steps.step_3.description"),status:"upcoming",icon:"ArrowsRightLeft"},{id:"04",name:n("core::import.steps.step_4.name"),description:n("core::import.steps.step_4.description"),status:"upcoming",icon:"CpuChip"}]),k=P(()=>Vt(i.value,"created_at","desc")),x=P(()=>k.value.length>0);function $(L,ee){(ee==="complete"||ee==="current")&&w.value.filter(ue=>parseInt(ue.id)<parseInt(L)).forEach(ue=>ue.status="complete"),ee==="current"&&w.value.filter(ue=>parseInt(ue.id)>parseInt(L)).forEach(ue=>ue.status="upcoming"),w.value[Mt(w.value,["id",L])].status=ee}function C(L,ee=""){return`/${t.resourceName}/import/${L}${ee}`}function F(L,ee={}){if(Object.keys(t.requestQueryString).length>0||Object.keys(ee).length>0){let ue=[],oe={...t.requestQueryString,...ee};for(var ce in oe)ue.push(encodeURIComponent(ce)+"="+encodeURIComponent(oe[ce]));L+="?"+ue.join("&")}return L}function T(L){Innoclapps.request(C(L,"/skip-file"),{responseType:"blob"}).then(ee=>{zl(ee.data,ee.headers["content-disposition"].split("filename=")[1])})}function S(L){Innoclapps.request(L).then(({data:ee})=>{zl(ee,"sample.csv"),(w.value[0].status==="current"||w.value[3].status==="complete")&&$("02","current")})}function A(L){return!!ft(m.value.mappings,["attribute",L])}async function E(L){await Innoclapps.confirm({message:n("core::import.revert_info"),confirmText:n("core::import.revert")});const ee=L.id,ce=500,ue=L.imported,oe=Math.ceil(ue/ce);b.value[ee]=!0,(async()=>{try{for(let Y=1;Y<=oe;Y++)try{const{data:ae}=await Innoclapps.request().delete(C(ee,"/revert?limit="+ce));i.value[Mt(i.value,["id",parseInt(ee)])]=ae}catch{break}}finally{b.value[ee]=!1}})()}async function B(L,ee){if(u.value&&ee!==!0){m.value=null;return}await Innoclapps.confirm(),await Innoclapps.request().delete(C(L)),M(L)}function M(L){i.value.splice(Mt(i.value,["id",L]),1),m.value&&L==m.value.id&&(m.value=null,u.value=!1,$("01","current"))}function N(L){G(ft(i.value,["id",parseInt(L)])),$("03","current")}function G(L){m.value=L}async function U(){h.value=!0;const{data:L}=await Innoclapps.request(`${t.resourceName}/import`);i.value=L,h.value=!1}function j(L){let ee=ft(m.value.fields,["attribute",L.detected_attribute]);return!L.detected_attribute||!ee?!1:ee.isRequired}function O(L){G(L),i.value.push(L),$("03","current"),f.value=null}function H(L){G(L);let ee=Mt(i.value,["id",parseInt(L.id)]);i.value[ee]=L,$("03","current"),u.value=!0}function W(L){I.value=!0,Innoclapps.request().post(F(C(L))).then(({data:ee})=>{i.value[Mt(i.value,["id",parseInt(ee.id)])]=ee,ee.next_batch?setTimeout(()=>window.location.href=`?import_id=${ee.id}`,2e3):(s.replace({query:{}}),I.value=!1,Innoclapps.success(n("core::import.imported"))),o()}).catch(()=>{s.replace({query:{}}),I.value=!1})}function X(){y.value=!0,Innoclapps.request().post(F(C(m.value.id)),{mappings:m.value.mappings}).then(({data:L})=>{let ee=Mt(i.value,["id",parseInt(L.id)]);if(ee!==-1?i.value[ee]=L:i.value.push(L),L.next_batch){setTimeout(()=>window.location.href=`?import_id=${L.id}`,1e3);return}Innoclapps.success(n("core::import.imported")),m.value=null,$("04","complete"),o()}).catch(L=>{let ee=L.response.data;ee.deleted||ee.rows_exceeded?(ee.deleted&&M(m.value.id),ee.rows_exceeded&&(f.value=L.response.data.message)):$("04","current")}).finally(()=>{y.value=!1,u.value=!1})}async function q(){await U(),r.query.import_id&&(I.value=!0,W(r.query.import_id))}return q(),(L,ee)=>{const ce=c("ICardHeading"),ue=c("IButton"),oe=c("ICardActions"),re=c("ICardHeader"),Y=c("ISpinner"),ae=c("IAlertBody"),se=c("IAlert"),xe=c("ITextDisplay"),le=c("ITextSmall"),ge=c("IFormLabel"),ve=c("IText"),ie=c("Icon"),me=c("IFormSelect"),Ce=c("ICardBody"),ke=c("ICardFooter"),Be=c("ICard"),Fe=c("ITableHeader"),he=c("ITableRow"),_e=c("ITableHead"),Te=c("ITableCell"),Ne=c("ILink"),lt=c("ITextDark"),Ke=c("ITableBody"),$e=c("ITable"),De=c("IOverlay"),at=ze("t"),dt=ze("i-tooltip");return g(),R(De,{show:h.value},{default:p(()=>[te(_("div",null,[l(Be,null,{default:p(()=>[l(re,null,{default:p(()=>[Ee(L.$slots,"header",{},()=>[l(ce,null,{default:p(()=>[ne(K(e.header||L.$t("core::import.import_records")),1)]),_:1})]),l(oe,null,{default:p(()=>[I.value?Z("",!0):(g(),R(ue,{key:0,variant:"secondary",icon:"DocumentDownload",text:L.$t("core::import.download_sample"),onClick:ee[0]||(ee[0]=we=>S(`/${e.resourceName}/import/sample`))},null,8,["text"]))]),_:1})]),_:3}),I.value?Z("",!0):(g(),R(wZ,{key:0,steps:w.value},null,8,["steps"])),l(Ce,null,{default:p(()=>[I.value?(g(),R(se,{key:0},{default:p(()=>[l(ae,null,{default:p(()=>[_("div",IZ,[te(_("h4",xZ,null,512),[[at,"core::import.import_in_progress"]]),l(Y,{class:"size-4"})]),ne(" "+K(L.$t("core::import.records_being_imported_in_batches")),1)]),_:1})]),_:1})):Z("",!0),f.value?(g(),R(se,{key:1,variant:"danger",class:"mb-5",dismissible:""},{default:p(()=>[l(ae,null,{default:p(()=>[ne(K(f.value),1)]),_:1})]),_:1})):Z("",!0),I.value?Z("",!0):(g(),R(ur,{key:2,class:"ml-12 lg:ml-5",extensions:"csv","action-url":F(`${L.$scriptConfig("apiURL")}/${e.resourceName}/import/upload`),multiple:!1,"show-output":!1,"upload-text":L.$t("core::import.start"),onFileUploaded:O},null,8,["action-url","upload-text"])),m.value?(g(),D("div",kZ,[l(xe,{class:"mb-3",text:L.$t("core::import.spreadsheet_columns")},null,8,["text"]),_("div",$Z,[_("div",CZ,[(g(!0),D(de,null,Ie(m.value.mappings,(we,Ge)=>(g(),D("div",{key:"mapping-"+Ge,class:be(["mb-2 mr-3 flex h-16 flex-col justify-center rounded-lg px-4 ring-1 ring-inset ring-neutral-300 dark:ring-neutral-500/30","bg-white dark:bg-neutral-500/10",we.attribute?"":"opacity-50"])},[l(ge,{required:j(we)},{default:p(()=>[ne(K(we.original)+" ",1),we.skip&&!j(we)?(g(),R(le,{key:0,as:"span"},{default:p(()=>[ne(" ("+K(L.$t("core::import.column_will_not_import"))+") ",1)]),_:1})):Z("",!0)]),_:2},1032,["required"]),l(ve,{class:"truncate",text:we.preview},null,8,["text"])],2))),128))]),_("div",SZ,[(g(!0),D(de,null,Ie(m.value.mappings,(we,Ge)=>(g(),D("div",{key:"field-"+Ge,class:"mb-2 flex h-16 items-center"},[l(ie,{icon:"ChevronRightSolid",class:"mr-3 size-5 text-neutral-800 dark:text-neutral-200"}),l(me,{modelValue:m.value.mappings[Ge].attribute,"onUpdate:modelValue":yt=>m.value.mappings[Ge].attribute=yt,class:"h-16 hover:bg-neutral-100 dark:hover:bg-neutral-800",onInput:yt=>m.value.mappings[Ge].skip=!yt},{default:p(()=>[j(we)?Z("",!0):(g(),D("option",TZ," N/A ")),(g(!0),D(de,null,Ie(m.value.fields,yt=>(g(),D("option",{key:"field-"+Ge+"-"+yt.attribute,disabled:A(yt.attribute),value:yt.attribute,textContent:K(yt.label)},null,8,EZ))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onInput"])]))),128))])])])):Z("",!0)]),_:1}),m.value?(g(),R(ke,{key:1,class:"flex items-center justify-end space-x-2"},{default:p(()=>[l(ue,{variant:"secondary",disabled:y.value,text:L.$t("core::app.cancel"),onClick:ee[1]||(ee[1]=we=>B(m.value.id))},null,8,["disabled","text"]),l(ue,{variant:"primary",loading:y.value,disabled:y.value,text:y.value?L.$t("core::app.please_wait"):L.$t("core::import.import"),onClick:X},null,8,["loading","disabled","text"])]),_:1})):Z("",!0)]),_:3}),l(re,{class:"mt-8"},{default:p(()=>[l(ce,{text:L.$t("core::import.history")},null,8,["text"])]),_:1}),l(Be,null,{default:p(()=>[_("div",FZ,[l($e,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(_e,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(he,null,{default:p(()=>[l(Fe,null,{default:p(()=>[ne(K(L.$t("core::import.date")),1)]),_:1}),l(Fe,null,{default:p(()=>[ne(K(L.$t("core::import.file_name")),1)]),_:1}),l(Fe,null,{default:p(()=>[ne(K(L.$t("core::import.user")),1)]),_:1}),l(Fe,{class:"text-center"},{default:p(()=>[ne(K(L.$t("core::import.total_imported")),1)]),_:1}),l(Fe,{class:"text-center"},{default:p(()=>[ne(K(L.$t("core::import.total_duplicates")),1)]),_:1}),l(Fe,{class:"text-center"},{default:p(()=>[ne(K(L.$t("core::import.total_skipped")),1)]),_:1}),l(Fe,{class:"text-center"},{default:p(()=>[ne(K(L.$t("core::import.progress")),1)]),_:1}),l(Fe,{class:"text-center"},{default:p(()=>[ne(K(L.$t("core::import.status")),1)]),_:1}),l(Fe)]),_:1})]),_:1}),l(Ke,null,{default:p(()=>[(g(!0),D(de,null,Ie(k.value,we=>(g(),D(de,{key:we.id},[l(he,null,{default:p(()=>[l(Te,{class:"font-medium"},{default:p(()=>[ne(K(v(a)(we.created_at)),1)]),_:2},1024),l(Te,null,{default:p(()=>[ne(K(we.file_name),1)]),_:2},1024),l(Te,null,{default:p(()=>[ne(K(we.user.name),1)]),_:2},1024),l(Te,null,{default:p(()=>[_("div",AZ,[_("span",null,K(we.imported),1),we.revertable&&we.authorizations.revert&&!b.value[we.id]?(g(),R(Ne,{key:0,class:"text-sm font-medium sm:text-xs",variant:"danger",text:L.$t("core::import.revert"),onClick:Ge=>E(we)},null,8,["text","onClick"])):Z("",!0),b.value[we.id]?(g(),R(Y,{key:1,class:"size-4"})):Z("",!0)])]),_:2},1024),l(Te,{class:"text-center"},{default:p(()=>[ne(K(we.duplicates),1)]),_:2},1024),l(Te,{class:"text-center"},{default:p(()=>[ne(K(we.skipped)+" ",1),we.skip_file_filename&&we.skipped>0&&(we.authorizations.downloadSkipFile||we.authorizations.uploadFixedSkipFile)?(g(),D("span",RZ,[l(Ne,{class:"text-sm font-medium sm:text-xs",text:L.$t("core::import.why_skipped"),onClick:Ge=>d.value===we.id?d.value=null:d.value=we.id},null,8,["text","onClick"])])):Z("",!0)]),_:2},1024),l(Te,{class:"text-center align-middle"},{default:p(()=>[_("div",DZ,[_("div",{class:"h-4 rounded-full bg-success-500",style:Nt({width:we.progress+"%"})},null,4),_("span",OZ,K(we.progress)+"% ",1)])]),_:2},1024),l(Te,{class:"text-center"},{default:p(()=>[te((g(),D("span",PZ,[we.status==="mapping"?(g(),R(ie,{key:0,icon:"Bars3CenterLeft",class:"size-5 animate-pulse text-neutral-500 dark:text-neutral-400"})):we.status==="finished"?(g(),R(ie,{key:1,icon:"CheckCircle",class:"size-5 text-success-500 dark:text-success-400"})):we.status==="in-progress"?(g(),R(ie,{key:2,icon:"DotsHorizontal",class:"size-5 animate-bounce text-neutral-500 dark:text-neutral-400"})):Z("",!0)])),[[dt,we.status]])]),_:2},1024),l(Te,null,{default:p(()=>[_("div",MZ,[we.status==="mapping"&&(!m.value||m.value&&m.value.id!=we.id)?(g(),R(Ne,{key:0,text:L.$t("core::app.continue"),onClick:Ge=>N(we.id)},null,8,["text","onClick"])):Z("",!0),!I.value&&!b.value[we.id]&&we.authorizations.delete?(g(),R(ue,{key:1,icon:"Trash",basic:"",small:"",onClick:Ge=>B(we.id,!0)},null,8,["onClick"])):Z("",!0)])]),_:2},1024)]),_:2},1024),we.skip_file_filename&&d.value===we.id&&(we.authorizations.downloadSkipFile||we.authorizations.uploadFixedSkipFile)?(g(),R(he,{key:0},{default:p(()=>[l(Te,{colspan:"4"},{default:p(()=>[l(lt,{class:"font-semibold"},{default:p(()=>[ne(K(L.$t("core::import.skip_file")),1)]),_:1}),l(ve,null,{default:p(()=>[ne(K(L.$t("core::import.total_rows_skipped",{count:we.skipped})),1)]),_:2},1024),l(ve,{class:"mt-3 max-w-4xl whitespace-normal font-normal",text:L.$t("core::import.skip_file_generation_info")},null,8,["text"]),l(ve,{class:"my-2 max-w-3xl whitespace-normal font-normal",text:L.$t("core::import.skip_file_fix_and_continue")},null,8,["text"]),_("div",BZ,[we.authorizations.downloadSkipFile?(g(),R(Ne,{key:0,class:"mr-4",text:L.$t("core::import.download_skip_file"),onClick:Ge=>T(we.id)},null,8,["text","onClick"])):Z("",!0),we.authorizations.uploadFixedSkipFile?(g(),R(ur,{key:1,extensions:"csv",name:"skip_file","input-id":"skip_file","action-url":F(`${L.$scriptConfig("apiURL").replace(/\/+$/,"")}${C(we.id,"/skip-file")}`),multiple:!1,"show-output":!1,"select-file-text":L.$t("core::import.upload_fixed_skip_file"),"upload-text":L.$t("core::import.start"),onFileUploaded:ee[2]||(ee[2]=Ge=>H(Ge))},null,8,["action-url","select-file-text","upload-text"])):Z("",!0)])]),_:2},1024),l(Te,{colspan:"4"})]),_:2},1024)):Z("",!0)],64))),128))]),_:1})]),_:1})])]),_:1})],512),[[fe,x.value]]),!x.value&&!h.value?(g(),D("div",NZ,[_("div",VZ,[l(xe,{text:L.$t("core::import.no_history")},null,8,["text"]),l(ve,{class:"mb-10",text:L.$t("core::import.import_info")},null,8,["text"]),_("div",LZ,[(g(!0),D(de,null,Ie(w.value,we=>(g(),D("div",{key:we.id,class:"mb-8 sm:col-span-2 sm:even:mb-8"},[_("div",qZ,[l(ie,{class:"order-0 h-10 w-10 text-primary-600",icon:we.icon},null,8,["icon"]),_("div",null,[l(lt,{class:"font-medium",text:we.name},null,8,["text"]),l(ve,{text:we.description},null,8,["text"])])])]))),128))]),_("div",UZ,[l(ue,{icon:"DocumentDownload",text:L.$t("core::import.download_sample"),basic:"",onClick:ee[3]||(ee[3]=we=>S(`/${e.resourceName}/import/sample`))},null,8,["text"]),l(ur,{extensions:"csv","action-url":F(`${L.$scriptConfig("apiURL")}/${e.resourceName}/import/upload`),multiple:!1,"show-output":!1,"upload-text":L.$t("core::import.start"),onFileUploaded:O},null,8,["action-url","upload-text"])])])])):Z("",!0)]),_:3},8,["show"])}}},jZ={__name:"ImportResource",props:{resourceName:{type:String,required:!0}},setup(e){return(t,n)=>{const o=c("MainLayout");return g(),R(o,null,{default:p(()=>[l(rI,{"resource-name":e.resourceName},null,8,["resource-name"])]),_:1})}}},zZ={__name:"ResourceTrashedTable",props:{resourceName:{required:!0,type:String}},setup(e){const t=e,{t:n}=Pe(),o=V(!1),a=P(()=>`${t.resourceName}-trashed`),{reloadTable:r}=qo(a);async function s(){await Innoclapps.confirm(),o.value=!0;const{data:i}=await Innoclapps.request(`/trashed/${t.resourceName}`);let u=0;const d=i.meta.total,m=500,f=Math.ceil(d/m);(async()=>{let y=!1;try{for(let b=1;b<=f;b++)try{const{data:I}=await Innoclapps.request().delete(`/trashed/${t.resourceName}?limit=${m}`);u=u+I.deleted}catch{y=!0;break}u===0&&!y?Innoclapps.error(n("core::app.action_not_authorized")):r()}finally{o.value=!1}})()}return(i,u)=>{const d=c("IAlertBody"),m=c("IAlert"),f=c("IButton"),h=c("ResourceTable");return g(),D(de,null,[l(m,{class:"mb-6"},{default:p(()=>[l(d,null,{default:p(()=>[ne(K(i.$t("core::app.soft_deletes.trashed_pruning_info",{total:i.$scriptConfig("soft_deletes.prune_after")})),1)]),_:1})]),_:1}),l(h,{"resource-name":e.resourceName,identifier:a.value,trashed:""},{header:p(({isPreEmpty:y})=>[te(_("form",{class:"order-10 flex-1 text-right",onSubmit:ot(s,["prevent"])},[l(f,{type:"submit",variant:"danger",icon:"Trash",disabled:o.value,loading:o.value,text:i.$t("core::app.soft_deletes.empty_trash"),soft:""},null,8,["disabled","loading","text"])],544),[[fe,!y]])]),_:1},8,["resource-name","identifier"])],64)}}},HZ={__name:"TrashedResourceRecords",props:{resourceName:{type:String,required:!0}},setup(e){return(t,n)=>{const o=c("MainLayout");return g(),R(o,null,{default:p(()=>[l(zZ,{"resource-name":e.resourceName},null,8,["resource-name"])]),_:1})}}},WZ={class:"mb-6 flex items-center justify-between rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-1 dark:border-neutral-500/30 dark:bg-neutral-800"},GZ={class:"sm:flex sm:space-x-4"},KZ={__name:"SettingsGoogle",setup(e){const{appUrl:t}=qe(),{form:n,submit:o,isReady:a,originalSettings:r}=Ao(),s=t+"/google/callback",i=P(()=>r.value.google_client_secret&&r.value.google_client_id);function u(){o(()=>window.location.reload())}return(d,m)=>{const f=c("Icon"),h=c("ICardHeading"),y=c("ILink"),b=c("ICardActions"),I=c("ICardHeader"),w=c("ITextDark"),k=c("ITextBlock"),x=c("IButtonCopy"),$=c("IFormInput"),C=c("IFormGroup"),F=c("ICardBody"),T=c("IButton"),S=c("ICardFooter"),A=c("ICard"),E=ze("i-tooltip");return g(),D(de,null,[l(I,null,{default:p(()=>[l(h,{class:"flex items-center gap-x-2"},{default:p(()=>[i.value&&v(a)?(g(),R(f,{key:0,icon:"CheckCircleSolid",class:"size-5 text-success-600"})):Z("",!0),m[2]||(m[2]=ne(" Google "))]),_:1}),l(b,null,{default:p(()=>[l(y,{href:"https://console.developers.google.com/",text:"Console"})]),_:1})]),_:1}),l(A,{as:"form",overlay:!v(a),onSubmit:ot(u,["prevent"])},{default:p(()=>[l(F,null,{default:p(()=>[_("div",WZ,[l(k,null,{default:p(()=>[l(w,{class:"mr-2 inline font-medium"},{default:p(()=>m[3]||(m[3]=[ne("Redirect Url:")])),_:1}),_("span",{class:"select-all",textContent:s})]),_:1}),te(l(x,{class:"ml-3",text:s,"success-message":d.$t("core::app.copied")},null,8,["success-message"]),[[E,d.$t("core::app.copy")]])]),_("div",GZ,[l(C,{label:"Client ID","label-for":"google_client_id",class:"w-full"},{default:p(()=>[l($,{id:"google_client_id",modelValue:v(n).google_client_id,"onUpdate:modelValue":m[0]||(m[0]=B=>v(n).google_client_id=B),autocomplete:"off",name:"google_client_id"},null,8,["modelValue"])]),_:1}),l(C,{label:"Client Secret","label-for":"google_client_secret",class:"w-full"},{default:p(()=>[l($,{id:"google_client_secret",modelValue:v(n).google_client_secret,"onUpdate:modelValue":m[1]||(m[1]=B=>v(n).google_client_secret=B),type:"password",autocomplete:"off",name:"google_client_secret"},null,8,["modelValue"])]),_:1})])]),_:1}),l(S,{class:"text-right"},{default:p(()=>[l(T,{type:"submit",variant:"primary",disabled:v(n).busy,text:d.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},ZZ={class:"mb-6 flex items-center justify-between rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-1 dark:border-neutral-500/30 dark:bg-neutral-800"},YZ={class:"sm:flex sm:space-x-4"},XZ={class:"font-bold"},QZ={__name:"SettingsMicrosoft",setup(e){const{DateTime:t,UTCDateTimeInstance:n,localizedDate:o,isISODate:a}=it(),{appUrl:r}=qe(),{form:s,submit:i,isReady:u,originalSettings:d}=Ao(),m=r+"/microsoft/callback",f=P(()=>d.value.msgraph_client_secret&&d.value.msgraph_client_id),h=P(()=>!d.value.msgraph_client_secret||!d.value.msgraph_client_secret_configured_at?!1:y()<n);function y(){let I=d.value.msgraph_client_secret_configured_at;return I=a(I)?t.fromISO(I):t.fromFormat(I,"yyyy-MM-dd HH:mm:ss"),I.toUTC().plus({months:24}).minus({days:1})}function b(){s.msgraph_client_secret&&d.value.msgraph_client_secret!=s.msgraph_client_secret?s.fill("msgraph_client_secret_configured_at",n.toISODate()):s.msgraph_client_secret||s.fill("msgraph_client_secret_configured_at",null),We(()=>i(()=>window.location.reload()))}return(I,w)=>{const k=c("Icon"),x=c("ICardHeading"),$=c("ILink"),C=c("ICardActions"),F=c("ICardHeader"),T=c("ITextDark"),S=c("ITextBlock"),A=c("IButtonCopy"),E=c("IFormInput"),B=c("IFormGroup"),M=c("IAlertBody"),N=c("IButton"),G=c("IAlertActions"),U=c("IAlert"),j=c("ICardBody"),O=c("ICardFooter"),H=c("ICard"),W=ze("i-tooltip");return g(),D(de,null,[l(F,null,{default:p(()=>[l(x,{class:"flex items-center gap-x-2"},{default:p(()=>[f.value&&v(u)?(g(),R(k,{key:0,icon:h.value?"XCircleSolid":"CheckCircleSolid",class:be(["size-5",{"text-success-600":!h.value&&f.value&&v(u),"text-danger-500":h.value&&f.value&&v(u)}])},null,8,["icon","class"])):Z("",!0),w[2]||(w[2]=ne(" Microsoft "))]),_:1}),l(C,null,{default:p(()=>[l($,{href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",text:"App Registrations"})]),_:1})]),_:1}),l(H,{as:"form",overlay:!v(u),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(j,null,{default:p(()=>[_("div",ZZ,[l(S,null,{default:p(()=>[l(T,{class:"mr-2 inline font-medium"},{default:p(()=>w[3]||(w[3]=[ne("Redirect Url:")])),_:1}),_("span",{class:"select-all",textContent:m})]),_:1}),te(l(A,{class:"ml-3",text:m,"success-message":I.$t("core::app.copied")},null,8,["success-message"]),[[W,I.$t("core::app.copy")]])]),_("div",YZ,[l(B,{class:"w-full",label:"App (client) ID","label-for":"msgraph_client_id"},{default:p(()=>[l(E,{id:"msgraph_client_id",modelValue:v(s).msgraph_client_id,"onUpdate:modelValue":w[0]||(w[0]=X=>v(s).msgraph_client_id=X),autocomplete:"off",name:"msgraph_client_id"},null,8,["modelValue"])]),_:1}),l(B,{class:"w-full",label:"Client Secret","label-for":"msgraph_client_secret"},{default:p(()=>[l(E,{id:"msgraph_client_secret",modelValue:v(s).msgraph_client_secret,"onUpdate:modelValue":w[1]||(w[1]=X=>v(s).msgraph_client_secret=X),autocomplete:"off",type:"password",name:"msgraph_client_secret"},null,8,["modelValue"])]),_:1})]),v(d).msgraph_client_secret&&v(d).msgraph_client_secret_configured_at&&!h.value?(g(),R(U,{key:0,class:"mt-4"},{default:p(({variant:X})=>[l(M,null,{default:p(()=>[ne(" The client secret was configured at "+K(v(o)(v(d).msgraph_client_secret_configured_at))+". If you followed the documentation and configured the client secret to expire in 24 months, ",1),_("span",XZ," you must re-generate a new client secret at: "+K(v(o)(y().toISO())),1),w[4]||(w[4]=ne(" in order the integration to continue working. "))]),_:1}),l(G,null,{default:p(()=>[l(N,{variant:X,href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/Credentials/appId/"+v(s).msgraph_client_id+"/isMSAApp/true",ghost:""},{default:p(()=>w[5]||(w[5]=[ne(" Re-Generate ")])),_:2},1032,["variant","href"])]),_:2},1024)]),_:1})):Z("",!0),l(U,{class:"mt-4",variant:"danger",show:h.value},{default:p(({variant:X})=>[l(M,null,{default:p(()=>w[6]||(w[6]=[ne(" The client secret is probably expired, click the button below to re-generate new secret if it's needed, don't forget to update the secret here in the integration as well. ")])),_:1}),l(G,null,{default:p(()=>[l(N,{variant:X,href:"https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/Credentials/appId/"+v(s).msgraph_client_id+"/isMSAApp/true",ghost:""},{default:p(()=>w[7]||(w[7]=[ne(" Re-Generate ")])),_:2},1032,["variant","href"])]),_:2},1024)]),_:1},8,["show"])]),_:1}),l(O,{class:"text-right"},{default:p(()=>[l(N,{type:"submit",variant:"primary",disabled:v(s).busy,text:I.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},JZ={class:"sm:flex sm:space-x-4"},eY={class:"sm:flex sm:space-x-4"},tY={class:"flex"},nY={class:"mb-1 grow"},oY={__name:"SettingsPusher",setup(e){const{form:t,submit:n,isReady:o,originalSettings:a}=Ao(),r=P(()=>a.value.pusher_app_id&&a.value.pusher_app_key&&a.value.pusher_app_secret);function s(){n(()=>window.location.reload())}return(i,u)=>{const d=c("Icon"),m=c("ICardHeading"),f=c("ILink"),h=c("ICardActions"),y=c("ICardHeader"),b=c("IAlertBody"),I=c("IAlert"),w=c("IFormInput"),k=c("IFormGroup"),x=c("IFormLabel"),$=c("ICardBody"),C=c("IButton"),F=c("ICardFooter"),T=c("ICard");return g(),D(de,null,[l(y,null,{default:p(()=>[l(m,{class:"flex items-center gap-x-2"},{default:p(()=>[r.value&&v(o)?(g(),R(d,{key:0,icon:"CheckCircleSolid",class:"size-5 text-success-600"})):Z("",!0),u[4]||(u[4]=ne(" Pusher "))]),_:1}),l(h,null,{default:p(()=>[l(f,{href:"https://dashboard.pusher.com",text:"Pusher.com",tabindex:"-1"})]),_:1})]),_:1}),l(T,{as:"form",overlay:!v(o),onSubmit:ot(s,["prevent"])},{default:p(()=>[l($,null,{default:p(()=>[l(I,{class:"mb-6",show:!r.value&&v(o)},{default:p(()=>[l(b,null,{default:p(()=>u[5]||(u[5]=[ne(" Receive notifications in real time without the need to manually refresh the page, after synchronization, automatically updates the calendar, total unread emails and new emails. ")])),_:1})]),_:1},8,["show"]),_("div",JZ,[l(k,{class:"w-full",label:"App ID","label-for":"pusher_app_id"},{default:p(()=>[l(w,{id:"pusher_app_id",modelValue:v(t).pusher_app_id,"onUpdate:modelValue":u[0]||(u[0]=S=>v(t).pusher_app_id=S)},null,8,["modelValue"])]),_:1}),l(k,{class:"w-full",label:"App Key","label-for":"pusher_app_key"},{default:p(()=>[l(w,{id:"pusher_app_key",modelValue:v(t).pusher_app_key,"onUpdate:modelValue":u[1]||(u[1]=S=>v(t).pusher_app_key=S)},null,8,["modelValue"])]),_:1})]),_("div",eY,[l(k,{class:"w-full",label:"App Secret","label-for":"pusher_app_secret"},{default:p(()=>[l(w,{id:"pusher_app_secret",modelValue:v(t).pusher_app_secret,"onUpdate:modelValue":u[2]||(u[2]=S=>v(t).pusher_app_secret=S),type:"password"},null,8,["modelValue"])]),_:1}),l(k,{class:"w-full"},{label:p(()=>[_("div",tY,[_("div",nY,[l(x,{for:"pusher_app_cluster"},{default:p(()=>u[6]||(u[6]=[ne("App Cluster")])),_:1})]),l(f,{href:"https://pusher.com/docs/clusters",text:"https://pusher.com/docs/clusters"})])]),default:p(()=>[l(w,{id:"pusher_app_cluster",modelValue:v(t).pusher_app_cluster,"onUpdate:modelValue":u[3]||(u[3]=S=>v(t).pusher_app_cluster=S)},null,8,["modelValue"])]),_:1})])]),_:1}),l(F,{class:"text-right"},{default:p(()=>[l(C,{type:"submit",variant:"primary",disabled:v(t).busy,text:i.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},aY={class:"sm:p-4"},rY={class:"text-center"},lY={class:"m-auto max-w-2xl"},sY={class:"flex space-x-2"},iY=["textContent"],uY={__name:"SettingsZapier",setup(e){const{scriptConfig:t}=qe(),n=V(t("purchase_key")),o=V(null),{isLoading:a,setLoading:r}=Cn();function s(){r(!0),xn.get(`https://www.concordcrm.com/zapier-link/${n.value}`,{withCredentials:!0}).then(({data:i})=>{o.value=i.link}).catch(i=>{Innoclapps.error(i.response.data.error)}).finally(()=>r(!1))}return(i,u)=>{const d=c("IBadge"),m=c("ICardHeading"),f=c("ICardHeader"),h=c("IText"),y=c("IFormInput"),b=c("IButton"),I=c("IButtonCopy"),w=c("ICardBody"),k=c("ICard"),x=ze("i-tooltip");return g(),D(de,null,[l(f,null,{default:p(()=>[l(m,null,{default:p(()=>[u[2]||(u[2]=ne(" Zapier ")),l(d,{variant:"info",class:"ml-2"},{default:p(()=>u[1]||(u[1]=[ne("Beta")])),_:1})]),_:1})]),_:1}),l(k,null,{default:p(()=>[l(w,null,{default:p(()=>[_("div",aY,[_("div",rY,[u[4]||(u[4]=_("img",{src:"https://cdn.zapier.com/zapier/images/logos/zapier-logo.png",class:"mx-auto h-16 w-auto"},null,-1)),l(h,{class:"mx-auto mt-5 max-w-lg"},{default:p(()=>u[3]||(u[3]=[ne(" Zapier integration is at "),_("b",null,'"Invite Only"',-1),ne(" and "),_("b",null,'"Testing"',-1),ne(" stage, we are inviting you to test the integration before it's available for everyone. ")])),_:1})]),l(h,{class:"mx-auto mb-2 mt-5 text-center"},{default:p(()=>u[5]||(u[5]=[ne(" Before this, "),_("b",null,"we need to verify your purchase key",-1),ne(" and after that we will share the Zapier invite link with you can try it! ")])),_:1}),_("div",lY,[_("div",sY,[l(y,{id:"purchase-key",modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=$=>n.value=$),class:"grow",placeholder:"Enter your purchase key here"},null,8,["modelValue"]),l(b,{class:"shrink-0",variant:"secondary",loading:v(a),disabled:v(a),onClick:s},{default:p(()=>u[6]||(u[6]=[ne(" Get Integration Link ")])),_:1},8,["loading","disabled"])])]),o.value?(g(),R(h,{key:0,class:"mt-6 flex items-center justify-center"},{default:p(()=>[_("span",{class:"select-all font-medium",textContent:K(o.value)},null,8,iY),te(l(I,{class:"ml-3",text:o.value,"success-message":i.$t("core::app.copied")},null,8,["text","success-message"]),[[x,i.$t("core::app.copy")]])]),_:1})):Z("",!0)])]),_:1})]),_:1})],64)}}},cY=[{alias:"/",path:"/dashboard",component:Db,meta:{title:rt("core::dashboard.insights"),scrollToTop:!1}},{path:"/",name:"dashboard",component:Db,meta:{title:rt("core::dashboard.insights"),scrollToTop:!1}},{path:"/dashboard/:id/edit",name:"edit-dashboard",component:wK},{path:"/notifications",name:"notifications",component:GK,meta:{title:rt("core::notifications.your")}},{path:"/import/:resourceName",name:"import-resource",meta:{title:rt("core::import.import_records")},component:jZ,props:e=>({resourceName:e.params.resourceName})},{path:"/oauth/accounts",name:"oauth-accounts",component:rZ,meta:{title:rt("core::oauth.connected_accounts")}},{path:"/trashed/:resourceName",name:"trashed-resource-records",component:HZ,meta:{title:rt("core::app.soft_deletes.trashed_records")},props:e=>({resourceName:e.params.resourceName})},{name:"404",path:"/404",meta:{title:"404"},component:Ob},{name:"403",path:"/403",meta:{title:"403"},component:PK},{name:"not-found",path:"/:pathMatch(.*)*",component:Ob},{path:"/settings",name:"settings",component:Dz,meta:{title:rt("core::settings.settings")},children:[{path:"general",component:UW,name:"settings-general",meta:{title:rt("core::settings.general_settings")},alias:"/settings"},{path:"fields/:resourceName",name:"resource-fields",component:yW},{path:"integrations/microsoft",component:QZ,name:"settings-integrations-microsoft",meta:{title:"Microsoft"}},{path:"integrations/google",component:KZ,name:"settings-integrations-google",meta:{title:"Google"}},{path:"integrations/pusher",component:oY,name:"settings-integrations-pusher",meta:{title:"Pusher"}},{path:"integrations/zapier",component:uY,name:"settings-integrations-zapier",meta:{title:"Zapier"}},{path:"/settings/workflows",component:bK,meta:{title:rt("core::workflow.workflows")}},{path:"/settings/mailable-templates",component:QW,meta:{title:rt("core::mail_template.mail_templates")}},{path:"/settings/modules",component:jG,meta:{title:rt("core::modules.modules")}},{path:"/settings/tools",component:aK,meta:{title:rt("core::settings.tools.tools")}},{path:"/settings/info",component:WG,meta:{title:rt("core::app.system_info")}},{path:"/settings/logs",component:JG,meta:{title:"Logs"}},{path:"/settings/security",component:Sz,meta:{title:rt("core::settings.security.security")}},{path:"/settings/recaptcha",component:Cz,meta:{title:rt("core::settings.recaptcha.recaptcha")}}]}],dY={views:el({}),visibleBuilders:{},activeViews:{}},mY={SET(e,{identifier:t,views:n}){e.views[t]=n},UPDATE(e,{identifier:t,view:n}){let o=Mt(e.views[t],["id",parseInt(n.id)]);if(o!==-1){let a=[...e.views[t]];a[o]=n,e.views[t]=a}},PUSH(e,{identifier:t,view:n}){let o=[...e.views[t]];o.push(n),e.views[t]=o},REMOVE(e,{identifier:t,id:n}){let o=Mt(e.views[t],["id",parseInt(n)]);if(o!==-1){let a=[...e.views[t]];a.splice(o,1),e.views[t]=a}},SET_ACTIVE(e,{identifier:t,id:n}){e.activeViews[t]=n},SET_BUILDER_VISIBLE(e,{identifier:t,viewId:n,visible:o}){e.visibleBuilders[t]={...e.visibleBuilders[t]||{},[n]:o}}},fY={getAll:e=>t=>Vt(e.views[t],["user_order","created_at"],["asc","asc"]),getById:e=>(t,n)=>ft(e.views[t],["id",parseInt(n)]),getActive:e=>t=>{const n=e.activeViews[t];return n===void 0?null:ft(e.views[t],["id",parseInt(n)])},filtersBuilderVisible:e=>(t,n)=>{var o;return!!((o=e.visibleBuilders[t])!=null&&o[n])}},pY={namespaced:!0,state:dY,getters:fY,mutations:mY},vY={fields:el({})},hY={SET(e,t){e.fields[t.group]=t.fields},RESET(e){e.fields={}}},gY={async getForResource({commit:e,state:t},{resourceName:n,view:o,resourceId:a,viaResource:r,viaResourceId:s,intent:i,params:u={}}){let d=n+"-"+o+(r?"-"+r:"");if(t.fields[d]!==void 0&&!a&&!u.resourceId)return t.fields[d];let{data:m}=await Innoclapps.request(`/${n}${a?"/"+a:""}/${o}-fields`,{params:{intent:i||o,via_resource:r,via_resource_id:s,...u}});return e("SET",{group:d,fields:m}),m}},bY={namespaced:!0,state:vY,mutations:hY,actions:gY};function lI(e,t,n,o,a=null,r={}){return{type:"rule",...r,query:{type:e,rule:t,operator:n,operand:a,value:o}}}function iv(e=[],t={},n="and"){return{condition:n,...t,children:Vn(e)}}function yY(){return[iv()]}function sI(e){return["is_empty","is_not_empty","is_null","is_not_null"].indexOf(e)>=0}function iI(e){return["between","not_between"].indexOf(e)>=0}function Am(e){return["in","not_in","between","not_between"].includes(e)}function uI(e,t){let n=[];return ga(e,o=>{ga(o.children,a=>{if(a.query.children)n=n.concat(uI([a.query],t));else{let r=ft(t,["id",a.query.rule]);r&&r.isStatic||sI(a.query.operator)?n.push(!0):iI(a.query.operator)?a.query.value&&!Ut(a.query.value[0])&&!Ut(a.query.value[1])?n.push(Nn(a.query.value)):n.push(null):n.push(Nn(a.query.value))}})}),n}const _Y={availableRules:el({}),queryBuilderRules:{}},wY={SET_AVAILABLE_RULES(e,{identifier:t,rules:n}){e.availableRules[t]=n},SET_BUILDER_RULES(e,{identifier:t,rules:n}){e.queryBuilderRules[t]=n},RESET_BUILDER_RULES(e,{identifier:t}){e.queryBuilderRules[t]=yY()},ADD_GROUP(e,{identifier:t,group:n}){e.queryBuilderRules[t]=e.queryBuilderRules[t]||[],e.queryBuilderRules[t].push(n)},REMOVE_GROUP(e,{identifier:t,index:n,childIndex:o}){Zt(o)?e.queryBuilderRules[t].splice(n,1):e.queryBuilderRules[t][n].children.splice(o,1)},REMOVE_GROUP_RULE(e,{ruleId:t,identifier:n,groupIndex:o,childGroupIndex:a}){let r=e.queryBuilderRules[n][o].children;Zt(a)||(r=r[a].query.children);let s=r.findIndex(i=>i.query.rule==t);s!==-1&&r.splice(s,1)},ADD_GROUP_RULE(e,{rule:t,identifier:n,groupIndex:o,childGroupIndex:a}){let r=e.queryBuilderRules[n][o].children;Zt(a)||(r=r[a].query.children),r.push(t)},UPDATE_GROUP_RULE(e,{ruleId:t,identifier:n,rule:o,groupIndex:a,childGroupIndex:r}){let s=e.queryBuilderRules[n][a].children;Zt(r)||(s=s[r].query.children);let i=s.findIndex(u=>u.query.rule==t);i!==-1&&(s[i].query=Object.assign(s[i].query,o))},ADD_QUERY_GROUP(e,t){t.children.push({type:"group",query:iv()})},SET_QUERY_CHILDREN(e,{query:t,children:n}){t.children=n},ADD_QUERY_RULE(e,t){t.children.push(lI(null,null,null,null))},REMOVE_QUERY_CHILD(e,{query:t,index:n}){t.children.splice(n,1)},UPDATE_QUERY_RULE(e,{query:t,value:n}){t.rule=n},UPDATE_QUERY_VALUE(e,{query:t,value:n}){t.value=n},UPDATE_QUERY_TYPE(e,{query:t,value:n}){t.type=n},UPDATE_QUERY_CONDITION(e,{query:t,value:n}){t.condition=n},UPDATE_QUERY_OPERAND(e,{query:t,value:n}){t.operand=n},UPDATE_QUERY_OPERATOR(e,{query:t,value:n}){t.operator=n}},IY={namespaced:!0,state:_Y,mutations:wY},xY={settings:el({})},kY={SET_SETTINGS(e,t){e.settings[t.id]=t.settings},FLUSH_SETTINGS(e){for(let t in e.settings)e.settings[t]={}}},$Y={namespaced:!0,state:xY,mutations:kY},CY="modulepreload",SY=function(e){return"/build/"+e},Pb={},ws=function(t,n,o){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));a=Promise.allSettled(n.map(i=>{if(i=SY(i),i in Pb)return;Pb[i]=!0;const u=i.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":CY,u||(m.as="script"),m.crossOrigin="",m.href=i,s&&m.setAttribute("nonce",s),document.head.appendChild(m),u)return new Promise((f,h)=>{m.addEventListener("load",f),m.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})}))}return a.then(r=>{for(const s of r||[]){if(s.status!=="rejected")continue;const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s.reason,window.dispatchEvent(i),!i.defaultPrevented)throw s.reason}return t()})};var cI={exports:{}};const TY=ly(Z8);/*!
 Name: vue-upload-component 
Component URI: https://github.com/lian-yue/vue-upload-component#readme 
Version: 3.1.16 
Author: LianYue 
License: Apache-2.0 
Description: Vue.js file upload component, Multi-file upload, Upload directory, Drag upload, Drag the directory, Upload multiple files at the same time, html4 (IE 9), `PUT` method, Customize the filter 
 */(function(e,t){(function(n,o){e.exports=o(TY)})(Vr,function(n){function o(j){return i(j)||s(j)||r(j)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(j,O){if(j){if(typeof j=="string")return u(j,O);var H=Object.prototype.toString.call(j).slice(8,-1);if(H==="Object"&&j.constructor&&(H=j.constructor.name),H==="Map"||H==="Set")return Array.from(j);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return u(j,O)}}function s(j){if(typeof Symbol<"u"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}function i(j){if(Array.isArray(j))return u(j)}function u(j,O){(O==null||O>j.length)&&(O=j.length);for(var H=0,W=new Array(O);H<O;H++)W[H]=j[H];return W}function d(j,O){var H=Object.keys(j);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(j);O&&(W=W.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),H.push.apply(H,W)}return H}function m(j){for(var O=1;O<arguments.length;O++){var H=arguments[O]!=null?arguments[O]:{};O%2?d(Object(H),!0).forEach(function(W){f(j,W,H[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(H)):d(Object(H)).forEach(function(W){Object.defineProperty(j,W,Object.getOwnPropertyDescriptor(H,W))})}return j}function f(j,O,H){return O in j?Object.defineProperty(j,O,{value:H,enumerable:!0,configurable:!0,writable:!0}):j[O]=H,j}function h(j){"@babel/helpers - typeof";return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(O){return typeof O}:function(O){return O&&typeof Symbol=="function"&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O},h(j)}function y(j,O){var H=Object.keys(j);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(j);O&&(W=W.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),H.push.apply(H,W)}return H}function b(j){for(var O=1;O<arguments.length;O++){var H=arguments[O]!=null?arguments[O]:{};O%2?y(Object(H),!0).forEach(function(W){x(j,W,H[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(H)):y(Object(H)).forEach(function(W){Object.defineProperty(j,W,Object.getOwnPropertyDescriptor(H,W))})}return j}function I(j,O){if(!(j instanceof O))throw new TypeError("Cannot call a class as a function")}function w(j,O){for(var H=0;H<O.length;H++){var W=O[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(j,W.key,W)}}function k(j,O,H){return O&&w(j.prototype,O),Object.defineProperty(j,"prototype",{writable:!1}),j}function x(j,O,H){return O in j?Object.defineProperty(j,O,{value:H,enumerable:!0,configurable:!0,writable:!0}):j[O]=H,j}var $=function(O){var H=new XMLHttpRequest;return H.open(O.method||"GET",O.url),H.responseType="json",O.headers&&Object.keys(O.headers).forEach(function(W){H.setRequestHeader(W,O.headers[W])}),H},C=function(O,H){return new Promise(function(W,X){O.onload=function(){if(O.status>=200&&O.status<300){var q;try{q=JSON.parse(O.response)}catch{q=O.response}W(q)}else X(O.response)},O.onerror=function(){return X(O.response)},O.send(JSON.stringify(H))})},F=function(O,H){var W=new FormData;for(var X in H)W.append(X,H[X]);return new Promise(function(q,L){O.onload=function(){if(O.status>=200&&O.status<300){var ee;try{ee=JSON.parse(O.response)}catch{ee=O.response}q(ee)}else L(O.response)},O.onerror=function(){return L(O.response)},O.send(W)})};function T(j){var O=$(j);return C(O,j.body)}var S=function(){function j(O,H){I(this,j),this.file=O,this.options=H,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return k(j,[{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var H=this,W=this.chunksUploaded.length/this.chunks.length*100,X=this.chunksUploading.reduce(function(q,L){return q+(L.progress|0)/H.chunks.length},0);return Math.min(W+X,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter(function(H){return!H.active&&!H.uploaded})}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter(function(H){return!!H.xhr&&!!H.active})}},{key:"chunksUploaded",get:function(){return this.chunks.filter(function(H){return!!H.uploaded})}},{key:"createChunks",value:function(){this.chunks=[];for(var H=0,W=this.chunkSize;H<this.fileSize;)this.chunks.push({blob:this.file.file.slice(H,W),startOffset:H,active:!1,retries:this.maxRetries}),H=W,W=H+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach(function(H){H.xhr.abort(),H.active=!1}),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var H=this;return this.promise=new Promise(function(W,X){H.resolve=W,H.reject=X}),this.start(),this.promise}},{key:"start",value:function(){var H=this;T({method:"POST",headers:b(b({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then(function(W){if(W.status!=="success")return H.file.response=W,H.reject("server");H.sessionId=W.data.session_id,H.chunkSize=W.data.end_offset,H.createChunks(),H.startChunking()}).catch(function(W){H.file.response=W,H.reject("server")})}},{key:"startChunking",value:function(){for(var H=0;H<this.maxActiveChunks;H++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(this.chunksUploading.length===0)return this.finish()}}},{key:"uploadChunk",value:function(H){var W=this;H.progress=0,H.active=!0,this.updateFileProgress(),H.xhr=$({method:"POST",headers:this.headers,url:this.action}),H.xhr.upload.addEventListener("progress",function(X){X.lengthComputable&&(H.progress=Math.round(X.loaded/X.total*100))},!1),F(H.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:H.startOffset,chunk:H.blob})).then(function(X){if(H.active=!1,X.status==="success")H.uploaded=!0;else if(H.retries--<=0)return W.stopChunks(),W.reject("upload");W.uploadNextChunk()}).catch(function(){if(H.active=!1,H.retries--<=0)return W.stopChunks(),W.reject("upload");W.uploadNextChunk()})}},{key:"finish",value:function(){var H=this;this.updateFileProgress(),this.stopSpeedCalc(),T({method:"POST",headers:b(b({},this.headers),{},{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then(function(W){if(H.file.response=W,W.status!=="success")return H.reject("server");H.resolve(W)}).catch(function(W){H.file.response=W,H.reject("server")})}},{key:"startSpeedCalc",value:function(){var H=this;this.file.speed=0;var W=0;this.speedInterval||(this.speedInterval=window.setInterval(function(){var X=H.progress/100*H.fileSize;H.file.speed=X-W,W=X},1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}}]),j}(),A={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:S},E=n.defineComponent({compatConfig:{MODE:3},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{default:!1},multiple:{type:Boolean,default:!1},maximum:{type:Number},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},createDirectory:{type:Boolean,default:!1},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:function(){return{}}},data:{type:Object,default:function(){return{}}},timeout:{type:Number,default:0},drop:{type:[Boolean,String,HTMLElement],default:function(){return!1}},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{type:[RegExp,String,Array],default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return A}}},emits:["update:modelValue","input-filter","input-file"],data:function(){return{files:this.modelValue,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,dropElementActive:!1,uploading:0,destroy:!1,maps:{},dropElement:null,dropTimeout:null,reload:!1}},mounted:function(){var O=this,H=document.createElement("input");if(H.type="file",H.multiple=!0,window.FormData&&H.files?((typeof H.webkitdirectory=="boolean"||typeof H.directory=="boolean")&&(this.features.directory=!0),this.features.html5&&typeof H.ondrop<"u"&&this.isRelatedTargetSupported()&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var W=0;W<this.files.length;W++){var X=this.files[W];this.maps[X.id]=X}this.$nextTick(function(){O.$parent?(O.$parent.$forceUpdate(),O.$parent.$nextTick(function(){O.watchDrop(O.drop)})):O.watchDrop(O.drop)})},beforeUnmount:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1),this.watchActive(!1)},computed:{uploaded:function(){for(var O,H=0;H<this.files.length;H++)if(O=this.files[H],O.fileObject&&!O.error&&!O.success)return!1;return!0},chunkOptions:function(){return Object.assign(A,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]},forId:function(){return this.inputId||this.name},iMaximum:function(){return this.maximum===void 0?this.multiple?0:1:this.maximum},iExtensions:function(){if(this.extensions){if(this.extensions instanceof RegExp)return this.extensions;if(this.extensions.length){var O=[];return typeof this.extensions=="string"?O=this.extensions.split(","):O=this.extensions,O=O.map(function(H){return H.trim()}).filter(function(H){return H}),new RegExp("\\.("+O.join("|").replace(/\./g,"\\.")+")$","i")}}},iDirectory:function(){if(this.directory&&this.features.directory)return!0}},watch:{active:function(O){this.watchActive(O)},dropActive:function(O){this.watchDropActive(O),this.$parent&&this.$parent.$forceUpdate()},drop:function(O){this.watchDrop(O)},modelValue:function(O){if(this.files!==O){this.files=O;var H=this.maps;this.maps={};for(var W=0;W<this.files.length;W++){var X=this.files[W];this.maps[X.id]=X}for(var q in this.maps){var L=this.maps[q],ee=H[q];L!==ee&&this.emitFile(L,ee)}for(var ce in H)this.maps[ce]||this.emitFile(void 0,H[ce])}}},methods:{newId:function(){return Math.random().toString(36).substr(2)},clear:function(){if(this.files.length){var O=this.files;this.files=[],this.maps={},this.emitInput();for(var H=0;H<O.length;H++)this.emitFile(void 0,O[H])}return!0},get:function(O){return O?h(O)==="object"?this.maps[O.id||""]||!1:this.maps[O]||!1:!1},add:function(O,H){var W;O instanceof Array?W=O:W=[O],H===void 0&&(H=this.addIndex);for(var X=[],q=0;q<W.length;q++){var L=W[q];this.features.html5&&L instanceof Blob&&(L={id:"",file:L,size:L.size,name:L.webkitRelativePath||L.relativePath||L.name||"unknown",type:L.type}),L=L;var ee=!1;if(L.fileObject===!1||(L.fileObject||typeof Element<"u"&&L.el instanceof HTMLInputElement||typeof Blob<"u"&&L.file instanceof Blob)&&(ee=!0),ee&&(L=m(m({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},L),{},{response:{},progress:"0.00",speed:0}),L.data=m(m({},this.data),L.data?L.data:{}),L.headers=m(m({},this.headers),L.headers?L.headers:{})),L.id||(L.id=this.newId()),!this.emitFilter(L,void 0)&&(this.iMaximum>1&&X.length+this.files.length>=this.iMaximum||(X.push(L),this.iMaximum===1)))break}if(X.length){this.iMaximum===1&&this.clear();var ce;if(H===!0||H===0)ce=X.concat(this.files);else if(H){var ue;ce=this.files.concat([]),(ue=ce).splice.apply(ue,[H,0].concat(o(X)))}else ce=this.files.concat(X);this.files=ce;var oe=0;H===!0||H===0?oe=0:H?H>=0?H+X.length>this.files.length?oe=this.files.length-X.length:oe=H:(oe=this.files.length-X.length+H,oe<0&&(oe=0)):oe=this.files.length-X.length,X=this.files.slice(oe,oe+X.length);for(var re=0;re<X.length;re++){var Y=X[re];this.maps[Y.id]=Y}this.emitInput();for(var ae=0;ae<X.length;ae++)this.emitFile(X[ae],void 0);return O instanceof Array?X:X[0]}},addInputFile:function(O){var H=this,W=[];this.iMaximum;var X=O.webkitEntries||O.entries||void 0;if(X!=null&&X.length)return this.getFileSystemEntry(X).then(function(ce){return H.add(ce)});if(O.files)for(var q=0;q<O.files.length;q++){var L=O.files[q];W.push({id:"",size:L.size,name:L.webkitRelativePath||L.relativePath||L.name,type:L.type,file:L})}else{var ee=O.value.replace(/\\/g,"/").split("/");(!ee||!ee.length)&&(ee=[O.value]),delete O.__vuex__,W.push({id:"",name:ee[ee.length-1],el:O})}return Promise.resolve(this.add(W))},addDataTransfer:function(O){var H,W=this;if(O!=null&&(H=O.items)!==null&&H!==void 0&&H.length){for(var X=[],q=0;q<O.items.length;q++){var L=O.items[q],ee=void 0;L.getAsEntry?ee=L.getAsEntry()||L.getAsFile():L.webkitGetAsEntry?ee=L.webkitGetAsEntry()||L.getAsFile():ee=L.getAsFile(),ee&&X.push(ee)}return this.getFileSystemEntry(X).then(function(re){return W.add(re)})}var ce=this.iMaximum,ue=[];if(O.files.length){for(var oe=0;oe<O.files.length&&(ue.push(O.files[oe]),!(ce>0&&ue.length>=ce));oe++);return Promise.resolve(this.add(ue))}return Promise.resolve([])},getFileSystemEntry:function(O){var H=this,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(X){var q=H.iMaximum;if(!O){X([]);return}if(O instanceof Array){var L=[],ee=function ae(se){var xe=O[se];if(!xe||q>0&&L.length>=q)return X(L);H.getFileSystemEntry(xe,W).then(function(le){L.push.apply(L,o(le)),ae(se+1)})};ee(0);return}if(O instanceof Blob){X([{id:"",size:O.size,name:W+O.name,type:O.type,file:O}]);return}if(O.isFile){var ce=O;ce.file(function(ae){X([{id:"",size:ae.size,name:W+ae.name,type:ae.type,file:ae}])});return}if(O.isDirectory&&H.dropDirectory){var ue=O,oe=[];H.createDirectory&&oe.push({id:"",name:W+ue.name,size:0,type:"text/directory",file:new File([],W+ue.name,{type:"text/directory"})});var re=ue.createReader(),Y=function ae(){re.readEntries(function(se){var xe=function le(ge){if(!se[ge]&&ge===0||q>0&&oe.length>=q)return X(oe);if(!se[ge])return ae();H.getFileSystemEntry(se[ge],W+ue.name+"/").then(function(ve){oe.push.apply(oe,o(ve)),le(ge+1)})};xe(0)})};Y();return}X([])})},replace:function(O,H){var W=this.get(O),X=this.get(H);if(!W||!X||W===X)return!1;var q=this.files.concat([]),L=q.indexOf(W),ee=q.indexOf(X);return L===-1||ee===-1?!1:(q[L]=X,q[ee]=W,this.files=q,this.emitInput(),!0)},remove:function(O){var H=this.get(O);if(H){if(this.emitFilter(void 0,H))return!1;var W=this.files.concat([]),X=W.indexOf(H);if(X===-1)return console.error("remove",H),!1;W.splice(X,1),this.files=W,delete this.maps[H.id],this.emitInput(),this.emitFile(void 0,H)}return H},update:function(O,H){var W=this.get(O);if(W){var X=m(m({},W),H);if(W.fileObject&&W.active&&!X.active&&!X.error&&!X.success&&(X.error="abort"),this.emitFilter(X,W))return!1;var q=this.files.concat([]),L=q.indexOf(W);return L===-1?(console.error("update",W),!1):(q.splice(L,1,X),this.files=q,X=this.files[L],delete this.maps[W.id],this.maps[X.id]=X,this.emitInput(),this.emitFile(X,W),X)}return!1},emitFilter:function(O,H){var W=!1;return this.$emit("input-filter",O,H,function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return W=X,W}),W},emitFile:function(O,H){var W,X=this;this.$emit("input-file",O,H),(W=O)!==null&&W!==void 0&&W.fileObject&&O.active&&(!H||!H.active)?(this.uploading++,this.$nextTick(function(){setTimeout(function(){O&&X.upload(O).then(function(){var q;O&&(O=X.get(O)||void 0),(q=O)!==null&&q!==void 0&&q.fileObject&&X.update(O,{active:!1,success:!O.error})}).catch(function(q){O&&X.update(O,{active:!1,success:!1,error:q.code||q.error||q.message||q})})},Math.ceil(Math.random()*50+50))})):(!O||!O.fileObject||!O.active)&&H&&H.fileObject&&H.active&&this.uploading--,this.active&&(!!O!=!!H||O.active!==H.active)&&this.watchActive(!0)},emitInput:function(){this.$emit("update:modelValue",this.files)},upload:function(O){var H=this.get(O);if(!H)return Promise.reject(new Error("not_exists"));if(!H.fileObject)return Promise.reject(new Error("file_object"));if(H.error)return H.error instanceof Error?Promise.reject(H.error):Promise.reject(new Error(H.error));if(H.success)return Promise.resolve(H);if(H.name&&this.iExtensions&&H.type!=="text/directory"&&H.name.search(this.iExtensions)===-1)return Promise.reject(new Error("extension"));if(this.size>0&&H.size!==void 0&&H.size>=0&&H.size>this.size&&H.type!=="text/directory")return Promise.reject(new Error("size"));if(this.customAction)return this.customAction(H,this);if(this.features.html5){if(this.shouldUseChunkUpload(H))return this.uploadChunk(H);if(H.putAction)return this.uploadPut(H);if(H.postAction)return this.uploadHtml5(H)}return H.postAction?this.uploadHtml4(H):Promise.reject(new Error("No action configured"))},shouldUseChunkUpload:function(O){return this.chunkEnabled&&!!this.chunkOptions.handler&&O.size&&O.size>this.chunkOptions.minSize},uploadChunk:function(O){var H=this.chunkOptions.handler;return O.chunk=new H(O,this.chunkOptions),O.chunk.upload().then(function(W){return O})},uploadPut:function(O){var H=[],W;for(var X in O.data)W=O.data[X],W!=null&&H.push(encodeURIComponent(X)+"="+encodeURIComponent(W));var q=O.putAction||"",L=H.length?(q.indexOf("?")===-1?"?":"&")+H.join("&"):"",ee=new XMLHttpRequest;return ee.open("PUT",q+L),this.uploadXhr(ee,O,O.file)},uploadHtml5:function(O){var H=new window.FormData,W;for(var X in O.data)W=O.data[X],W&&h(W)==="object"&&typeof W.toString!="function"?W instanceof File?H.append(X,W,W.name):H.append(X,JSON.stringify(W)):W!=null&&H.append(X,W);H.append(this.name,O.file,O.name||O.file.name||O.file.filename);var q=new XMLHttpRequest;return q.open("POST",O.postAction||""),this.uploadXhr(q,O,H)},uploadXhr:function(O,H,W){var X=this,q=H,L=0,ee=0;O.upload.onprogress=function(ue){if(q&&(q=X.get(q),!(!ue.lengthComputable||!q||!q.fileObject||!q.active))){var oe=Math.round(Date.now()/1e3);oe!==L&&(L=oe,q=X.update(q,{progress:(ue.loaded/ue.total*100).toFixed(2),speed:ue.loaded-ee}),ee=ue.loaded)}};var ce=window.setInterval(function(){if(q&&(q=X.get(q))){var ue;if((ue=q)!==null&&ue!==void 0&&ue.fileObject&&!q.success&&!q.error&&q.active)return}ce&&(clearInterval(ce),ce=void 0);try{O.abort(),O.timeout=1}catch{}},100);return new Promise(function(ue,oe){if(!q){oe(new Error("not_exists"));return}var re,Y=function(xe){if(!re){if(re=!0,ce&&(clearInterval(ce),ce=void 0),!q)return oe(new Error("not_exists"));if(q=X.get(q),!q)return oe(new Error("not_exists"));if(!q.fileObject)return oe(new Error("file_object"));if(q.error)return q.error instanceof Error?oe(q.error):oe(new Error(q.error));if(!q.active)return oe(new Error("abort"));if(q.success)return ue(q);var le={};switch(xe.type){case"timeout":case"abort":le.error=xe.type;break;case"error":O.status?O.status>=500?le.error="server":O.status>=400&&(le.error="denied"):le.error="network";break;default:O.status>=500?le.error="server":O.status>=400?le.error="denied":le.progress="100.00"}if(O.responseText){var ge=O.getResponseHeader("Content-Type");ge&&ge.indexOf("/json")!==-1?le.response=JSON.parse(O.responseText):le.response=O.responseText}return q=X.update(q,le),q?q.error?q.error instanceof Error?oe(q.error):oe(new Error(q.error)):ue(q):oe(new Error("abort"))}};O.onload=Y,O.onerror=Y,O.onabort=Y,O.ontimeout=Y,q.timeout&&(O.timeout=q.timeout);for(var ae in q.headers)O.setRequestHeader(ae,q.headers[ae]);q=X.update(q,{xhr:O}),q&&O.send(W)})},uploadHtml4:function(O){var H=this,W=O;if(!W)return Promise.reject(new Error("not_exists"));var X=function(Y){Y.keyCode===27&&Y.preventDefault()},q=document.createElement("iframe");q.id="upload-iframe-"+W.id,q.name="upload-iframe-"+W.id,q.src="about:blank",q.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var L=document.createElement("form");L.setAttribute("action",W.postAction||""),L.name="upload-form-"+W.id,L.setAttribute("method","POST"),L.setAttribute("target","upload-iframe-"+W.id),L.setAttribute("enctype","multipart/form-data");for(var ee in W.data){var ce=W.data[ee];if(ce&&h(ce)==="object"&&typeof ce.toString!="function"&&(ce=JSON.stringify(ce)),ce!=null){var ue=document.createElement("input");ue.type="hidden",ue.name=ee,ue.value=ce,L.appendChild(ue)}}L.appendChild(W.el),document.body.appendChild(q).appendChild(L);var oe=function(){var Y,ae;try{q.contentWindow&&(ae=q.contentWindow.document)}catch{}if(!ae)try{ae=q.contentDocument?q.contentDocument:q.document}catch{ae=q.document}return(Y=ae)!==null&&Y!==void 0&&Y.body?ae.body.innerHTML:null};return new Promise(function(re,Y){setTimeout(function(){if(!W){Y(new Error("not_exists"));return}if(W=H.update(W,{iframe:q}),!W)return Y(new Error("not_exists"));var ae=window.setInterval(function(){W&&(W=H.get(W))&&W.fileObject&&!W.success&&!W.error&&W.active||(ae&&(clearInterval(ae),ae=void 0),q.onabort({type:W?"abort":"not_exists"}))},100),se,xe=function(ge){var ve;if(!se){if(se=!0,ae&&(clearInterval(ae),ae=void 0),document.body.removeEventListener("keydown",X),!W)return Y(new Error("not_exists"));if(W=H.get(W),!W)return Y(new Error("not_exists"));if(!W.fileObject)return Y(new Error("file_object"));if(W.error)return W.error instanceof Error?Y(W.error):Y(new Error(W.error));if(!W.active)return Y(new Error("abort"));if(W.success)return re(W);var ie=oe(),me={};if(typeof ge=="string")return Y(new Error(ge));switch(ge.type){case"abort":me.error="abort";break;case"error":W.error?me.error=W.error:ie===null?me.error="network":me.error="denied";break;default:W.error?me.error=W.error:ie===null?me.error="network":me.progress="100.00"}if(ie!==null){if(ie&&ie.substr(0,1)==="{"&&ie.substr(ie.length-1,1)==="}")try{ie=JSON.parse(ie)}catch{}me.response=ie}return W=H.update(W,me),W?(ve=W)!==null&&ve!==void 0&&ve.error?W.error instanceof Error?Y(W.error):Y(new Error(W.error)):re(W):Y(new Error("not_exists"))}};q.onload=xe,q.onerror=xe,q.onabort=xe,document.body.addEventListener("keydown",X),L.submit()},50)}).then(function(re){var Y;return q==null||(Y=q.parentNode)===null||Y===void 0||Y.removeChild(q),re}).catch(function(re){var Y;return q==null||(Y=q.parentNode)===null||Y===void 0||Y.removeChild(q),re})},watchActive:function(O){for(var H,W=0;H=this.files[W];)if(W++,H.fileObject)if(O&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;!H.active&&!H.error&&!H.success&&this.update(H,{active:!0})}else H.active&&this.update(H,{active:!1});this.uploading===0&&(this.active=!1)},watchDrop:function(O){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.features.drop&&O!==H){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDocumentDragenter,!1),document.removeEventListener("dragleave",this.onDocumentDragleave,!1),document.removeEventListener("dragover",this.onDocumentDragover,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragenter",this.onDragenter,!1),this.dropElement.removeEventListener("dragleave",this.onDragleave,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch{}var W=null;if(O)if(typeof O=="string")W=document.querySelector(O)||this.$root.$el.querySelector(O);else if(O===!0){var X;if(W=this.$parent.$el,!W||((X=W)===null||X===void 0?void 0:X.nodeType)===8){var q;W=this.$root.$el,(!W||((q=W)===null||q===void 0?void 0:q.nodeType)===8)&&(W=document.body)}}else W=O;this.dropElement=W,this.dropElement&&(document.addEventListener("dragenter",this.onDocumentDragenter,!1),document.addEventListener("dragleave",this.onDocumentDragleave,!1),document.addEventListener("dragover",this.onDocumentDragover,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragenter",this.onDragenter,!1),this.dropElement.addEventListener("dragleave",this.onDragleave,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},watchDropActive:function(O,H){O!==H&&(!O&&this.dropElementActive&&(this.dropElementActive=!1),this.dropTimeout&&(clearTimeout(this.dropTimeout),this.dropTimeout=null),O&&(this.dropTimeout=setTimeout(this.onDocumentDrop,1e3)))},onDocumentDragenter:function(O){var H,W;if(!this.dropActive&&O.dataTransfer){var X=O.dataTransfer;X!=null&&(H=X.files)!==null&&H!==void 0&&H.length?this.dropActive=!0:X.types?X.types.indexOf&&X.types.indexOf("Files")!==-1?this.dropActive=!0:(W=X.types)!==null&&W!==void 0&&W.contains&&X.types.contains("Files")&&(this.dropActive=!0):this.dropActive=!0,this.dropActive&&this.watchDropActive(!0)}},onDocumentDragleave:function(O){this.dropActive&&(O.target===O.explicitOriginalTarget||!O.fromElement&&(O.clientX<=0||O.clientY<=0||O.clientX>=window.innerWidth||O.clientY>=window.innerHeight))&&(this.dropActive=!1,this.watchDropActive(!1))},onDocumentDragover:function(){this.watchDropActive(!0)},onDocumentDrop:function(){this.dropActive=!1,this.watchDropActive(!1)},onDragenter:function(O){!this.dropActive||this.dropElementActive||(this.dropElementActive=!0)},onDragleave:function(O){var H;if(this.dropElementActive){var W=O.relatedTarget;if(!W)this.dropElementActive=!1;else if((H=this.dropElement)!==null&&H!==void 0&&H.contains)this.dropElement.contains(W)||(this.dropElementActive=!1);else{for(var X=W;X&&X!==this.dropElement;)X=X.parentNode;X!==this.dropElement&&(this.dropElementActive=!1)}}},onDragover:function(O){O.preventDefault()},onDrop:function(O){O.preventDefault(),O.dataTransfer&&this.addDataTransfer(O.dataTransfer)},inputOnChange:async function(O){var H=this;if(!(O.target instanceof HTMLInputElement))return Promise.reject(new Error("not HTMLInputElement"));O.target;var W=function(q){return H.reload=!0,H.$nextTick(function(){H.reload=!1}),q};return this.addInputFile(O.target).then(W).catch(W)},isRelatedTargetSupported:function(){try{var O=new MouseEvent("mouseout",{relatedTarget:document.body});return"relatedTarget"in O}catch{return!1}}}}),B=["for"],M=["name","id","accept","capture","disabled","webkitdirectory","allowdirs","directory","multiple"];function N(j,O,H,W,X,q){return n.openBlock(),n.createElementBlock("span",{class:n.normalizeClass(j.className)},[n.renderSlot(j.$slots,"default"),n.createElementVNode("label",{for:j.forId},null,8,B),j.reload?n.createCommentVNode("",!0):(n.openBlock(),n.createElementBlock("input",{key:0,ref:"input",type:"file",name:j.name,id:j.forId,accept:j.accept,capture:j.capture,disabled:j.disabled,webkitdirectory:j.iDirectory,allowdirs:j.iDirectory,directory:j.iDirectory,multiple:j.multiple&&j.features.html5,onChange:O[0]||(O[0]=function(){return j.inputOnChange&&j.inputOnChange.apply(j,arguments)})},null,40,M))],2)}function G(j,O){O===void 0&&(O={});var H=O.insertAt;if(!(typeof document>"u")){var W=document.head||document.getElementsByTagName("head")[0],X=document.createElement("style");X.type="text/css",H==="top"&&W.firstChild?W.insertBefore(X,W.firstChild):W.appendChild(X),X.styleSheet?X.styleSheet.cssText=j:X.appendChild(document.createTextNode(j))}}var U=`
.file-uploads {
  overflow: hidden;
  position: relative;
  text-align: center;
  display: inline-block;
}
.file-uploads.file-uploads-html4 input,
.file-uploads.file-uploads-html5 label {
  /* background fix ie  click */
  background: #fff;
  opacity: 0;
  font-size: 20em;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  position: absolute;
  width: 100%;
  height: 100%;
}
.file-uploads.file-uploads-html5 input,
.file-uploads.file-uploads-html4 label {
  /* background fix ie  click */
  position: absolute;
  background: rgba(255, 255, 255, 0);
  overflow: hidden;
  position: fixed;
  width: 1px;
  height: 1px;
  z-index: -1;
  opacity: 0;
}
`;return G(U),E.render=N,E})})(cI);var EY=cI.exports;const FY=Rt(EY),vc=Bc();let Mb=0;const AY=()=>{const e=Mb;return Mb+=1,e},RY=()=>(e,t)=>{const n={...e,id:AY(),group:e.group||""};return vc.emit("notify",{notification:n,timeout:t}),()=>vc.emit("close",n.id)},dI="context",Bb=Ve({__name:"Notification",props:{maxNotifications:{default:10},enter:{default:""},enterFrom:{default:""},enterTo:{default:""},leave:{default:""},leaveFrom:{default:""},leaveTo:{default:""},move:{default:""},moveDelay:{default:""}},emits:["close"],setup(e,{emit:t}){const n=e,o=Le(dI),a=ro({notifications:[],timeouts:{}}),r=P(()=>a.notifications.filter(h=>h.group===o.group)),s=P(()=>o.position==="bottom"?[...r.value]:[...r.value].reverse()),i=(h,y)=>{a.timeouts[h]=window.setTimeout(()=>{y!==-1&&u(h)},Math.max(y||3e3,0))},u=h=>{a.notifications.splice(a.notifications.findIndex(y=>y.id===h),1),clearTimeout(a.timeouts[h])},d=({notification:h,timeout:y})=>{a.notifications.length!==n.maxNotifications&&(a.notifications.push(h),i(h.id,y))},m=h=>{t("close"),u(h)},f=(h,y,b)=>{y?clearTimeout(a.timeouts[h]):i(h,b)};return Xe(()=>{vc.on("notify",d),vc.on("close",u)}),(h,y)=>(g(),R(wi,{"enter-active-class":v(r).length>1?[n.enter,n.moveDelay].join(" "):n.enter,"enter-from-class":n.enterFrom,"enter-to-class":n.enterTo,"leave-active-class":n.leave,"leave-from-class":n.leaveFrom,"leave-to-class":n.leaveTo,"move-class":n.move},{default:p(()=>[Ee(h.$slots,"default",{notifications:v(s),close:m,hovering:f})]),_:3},8,["enter-active-class","enter-from-class","enter-to-class","leave-active-class","leave-from-class","leave-to-class","move-class"]))}}),Nb=Ve({__name:"NotificationGroup",props:{group:{default:""},position:{default:"top"}},setup(e){const t=e;return st(dI,{group:t.group,position:t.position}),(n,o)=>Ee(n.$slots,"default",{group:e.group})}});function DY(e){e.config.globalProperties.$notify=RY(),e.component("Notification",Bb),e.component("NotificationGroup",Nb),e.component("notification",Bb),e.component("notificationGroup",Nb)}const OY={install:DY},ji=Object.assign({inheritAttrs:!1},{__name:"AsyncComponentLoader",setup(e){return(t,n)=>{const o=c("ISpinner");return g(),R(o,{class:"size-4 text-primary-500"})}}}),PY={class:"flex flex-col"},MY={class:"mb-3"},zs="keep",Fu="replace",BY={__name:"ActionBulkEditModal",props:{action:{type:Object,required:!0},form:{type:Object,required:!0},ids:{type:Array,required:!0},busy:{type:Boolean,required:!0},resourceName:{type:String,required:!0}},emits:["confirm","updateFieldValue","setFieldInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=V(!0),r=ro({}),{fields:s,updateField:i,totalCollapsable:u}=In(n.action.fields);d(),Se(r,h=>{Object.entries(h).forEach(([y,b])=>{i(y,{hidden:b===zs})})},{deep:!0});function d(){s.value.forEach(h=>{h.hidden=!0,h.hideLabel=!0,h.toggleable=!1,h.value=null,h.beforeFieldSlotName="before-"+h.attribute+"-field",h.attribute&&(r[h.attribute]=zs)})}function m(){s.value.forEach(h=>{n.form.errors.has(h.attribute)&&r[h.attribute]===zs&&(r[h.attribute]=Fu)})}function f(){o("confirm",{onSubmit:h=>{Object.entries(r).forEach(([y,b])=>{b===zs&&delete h[y]})},onError:()=>{m()}})}return(h,y)=>{const b=c("FieldsButtonCollapse"),I=c("IFormLabel"),w=c("ICustomSelect"),k=c("FormFields"),x=c("IModal");return g(),R(x,{title:e.action.name,"ok-text":e.action.confirmButtonText,"ok-disabled":e.busy,"cancel-text":e.action.cancelButtonText,size:e.action.size,"hide-header-close":"",static:"",form:"",onSubmit:f},{default:p(()=>[_("div",PY,[v(u)>0?(g(),R(b,{key:0,collapsed:a.value,"onUpdate:collapsed":y[0]||(y[0]=$=>a.value=$),class:"mb-3 ml-auto",total:v(u)},null,8,["collapsed","total"])):Z("",!0),l(k,{fields:v(s),collapsed:a.value,form:e.form,"is-floating":"",onUpdateFieldValue:y[1]||(y[1]=$=>h.$emit("updateFieldValue",$)),onSetInitialValue:y[2]||(y[2]=$=>h.$emit("setFieldInitialValue",$))},gn({_:2},[Ie(v(s),$=>({name:$.beforeFieldSlotName,fn:p(()=>[$.attribute?(g(),D("div",{key:0,class:be([$.displayNone||$.collapsed&&a.value?"hidden":"",r[$.attribute]===Fu?"-mb-2":""])},[_("div",MY,[l(I,{class:"mb-1",for:$.attribute,required:r[$.attribute]===Fu&&$.isRequired,label:$.label},null,8,["for","required","label"]),l(w,{modelValue:r[$.attribute],"onUpdate:modelValue":C=>r[$.attribute]=C,reduce:C=>C.value,"input-id":$.attribute,clearable:!1,options:[{value:zs,label:h.$t("core::fields.keep_existing_value")},{value:Fu,label:h.$t("core::fields.replace_existing_value")}]},null,8,["modelValue","onUpdate:modelValue","reduce","input-id","options"])])],2)):Z("",!0)])}))]),1032,["fields","collapsed","form"])])]),_:1},8,["title","ok-text","ok-disabled","cancel-text","size"])}}},NY={__name:"ActionModal",props:{action:{type:Object,required:!0},form:{type:Object,required:!0},ids:{type:Array,required:!0},busy:{type:Boolean,required:!0},resourceName:{type:String,required:!0}},emits:["confirm","updateFieldValue","setFieldInitialValue"],setup(e){const t=e,n=V(!1),{retrieveResource:o}=qt(t.resourceName),{fields:a,updateFieldValue:r}=In(t.action.fields);async function s(){const u=await o(t.ids[0]);r(t.resourceName,[u])}async function i(){t.ids.length===1&&t.action.fields.length>0&&t.action.fields.filter(d=>d.attribute===t.resourceName).length>0&&await s(),n.value=!0}return Xe(i),(u,d)=>{const m=c("FormFields"),f=c("IOverlay"),h=c("IModal");return g(),R(h,{title:e.action.name,"ok-text":e.action.confirmButtonText,"ok-variant":e.action.destroyable?"danger":"primary","ok-disabled":e.busy,"cancel-text":e.action.cancelButtonText,"sub-title":e.action.confirmMessage,size:e.action.size,static:v(a)>0,"hide-header-close":"",form:"",onSubmit:d[2]||(d[2]=y=>u.$emit("confirm"))},{default:p(()=>[l(f,{show:!n.value},{default:p(()=>[n.value?(g(),R(m,{key:0,fields:v(a),form:e.form,"is-floating":"",onUpdateFieldValue:d[0]||(d[0]=y=>u.$emit("updateFieldValue",y)),onSetInitialValue:d[1]||(d[1]=y=>u.$emit("setFieldInitialValue",y))},null,8,["fields","form"])):Z("",!0)]),_:1},8,["show"])]),_:1},8,["title","ok-text","ok-variant","ok-disabled","cancel-text","sub-title","size","static"])}}},VY=Object.assign({inheritAttrs:!1},{__name:"Anchor",props:{as:{type:String,default:"div"},name:{type:String,required:!0},params:Object},setup(e){const t=e,n=Pt([]),o=P(()=>n.value.slice().sort((a,r)=>a.priority-r.priority));return Xe(()=>{n.value=Innoclapps.teleport[t.name]||[]}),(a,r)=>(g(),D(de,null,[(g(),R(_t(e.as),Ue({id:"hook-"+e.name},a.$attrs),null,16,["id"])),(g(!0),D(de,null,Ie(o.value,(s,i)=>(g(),R(To,{key:i,to:"#hook-"+e.name},[(g(),R(_t(s.component),Ue({ref_for:!0},e.params),null,16))],8,["to"]))),128))],64))}}),LY={class:"group flex flex-col items-center text-lg md:flex-row"},qY={class:"truncate md:grow"},UY={class:"flex items-center px-6 pt-4 md:pb-4"},jY={class:"ml-2 flex items-center space-x-1.5"},zY={key:0,class:"flex"},HY={class:"flex shrink-0 space-x-1 px-3 sm:-mt-0 sm:px-6 sm:py-3"},fd=Object.assign({inheritAttrs:!1},{__name:"BaseCard",props:{card:Object,loading:Boolean,reloadOnQueryStringChange:{type:Boolean,default:!0},requestQueryString:Object},emits:["retrieved"],setup(e,{emit:t}){const n=e,o=t,{setLoading:a,isLoading:r}=Cn(),{users:s}=qe(),i=V(null),u=V(ft(n.card.ranges,["value",n.card.range])||n.card.ranges[0]),d=P(()=>[...n.card.users||s.value].map(y=>({id:y.id,name:y.name}))),m=P(()=>n.loading||r.value),f=P(()=>n.card.ranges.length>0);n.card.withUserSelection!==!1&&typeof n.card.withUserSelection=="number"&&(i.value=ft(d.value,["id",n.card.withUserSelection])),Se(i,()=>h()),Se(u,()=>h()),Se(()=>n.requestQueryString,()=>{n.reloadOnQueryStringChange&&h()},{deep:!0});async function h(y=!1){var I;a(!0);let b={range:(I=v(u))==null?void 0:I.value,...n.requestQueryString||{},reload_cache:y===!0};n.card.withUserSelection&&(b.user_id=i.value?i.value.id:null);try{const{data:w}=await Innoclapps.request(`/cards/${n.card.uriKey}`,{params:b});o("retrieved",{card:w,requestQueryString:b})}finally{a(!1)}}return Xe(()=>{n.card.refreshOnActionExecuted&&jt("action-executed",h),jt("refresh-cards",h),n.card.floatingResource&&jt(["floating-resource-updated","floating-resource-action-executed"],y=>{y.resourceName===n.card.floatingResource.resourceName&&h(!0)})}),(y,b)=>{const I=c("ITextDisplay"),w=c("IButton"),k=c("IDropdownButton"),x=c("IDropdownItem"),$=c("IDropdownSeparator"),C=c("IDropdownMenu"),F=c("IDropdown"),T=c("IOverlay"),S=ze("i-tooltip");return g(),R(T,{show:m.value},{default:p(()=>[_("div",Ue({class:"rounded-lg bg-white shadow ring-1 ring-neutral-200 dark:bg-neutral-900 dark:ring-neutral-500/30"},y.$attrs),[_("div",LY,[_("div",qY,[_("div",UY,[l(I,{class:"-mt-0.5 ml-10 truncate whitespace-nowrap font-semibold sm:ml-0",text:e.card.name},null,8,["text"]),_("div",jY,[e.card.helpText?te((g(),D("span",zY,[l(w,{class:"pointer-events-none",icon:"QuestionMarkCircle",basic:"",small:""})])),[[S,e.card.helpText,void 0,{bottom:!0,light:!0}]]):Z("",!0),l(w,{icon:"Refresh",class:be(["group-hover:opacity-100",m.value?"opacity-100":"opacity-0"]),loading:m.value,basic:"",small:"",onClick:b[0]||(b[0]=A=>h(!0))},null,8,["class","loading"])])])]),_("div",HY,[Ee(y.$slots,"actions"),e.card.withUserSelection?(g(),R(F,{key:0,placement:"bottom-end"},{default:p(()=>{var A;return[l(k,{text:((A=i.value)==null?void 0:A.name)||y.$t("core::app.all"),basic:""},null,8,["text"]),l(C,{class:"max-h-64"},{default:p(()=>[(g(!0),D(de,null,Ie(d.value,E=>(g(),R(x,{key:E.id,text:E.name,active:i.value&&i.value.id===E.id,onClick:B=>i.value=E},null,8,["text","active","onClick"]))),128)),l($),l(x,{text:y.$t("core::app.all"),active:!i.value,onClick:b[1]||(b[1]=E=>i.value=null)},null,8,["text","active"])]),_:1})]}),_:1})):Z("",!0),f.value?(g(),R(F,{key:1,placement:"bottom-end"},{default:p(()=>[l(k,{class:"shrink-0",text:u.value.label,basic:""},null,8,["text"]),l(C,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.card.ranges,A=>(g(),R(x,{key:A.value,text:A.label,active:A.value===u.value.value,onClick:E=>u.value=A},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):Z("",!0)])]),Ee(y.$slots,"default")],16)]),_:3},8,["show"])}}}),WY={__name:"CardAsyncTable",props:{card:Object},setup(e,{expose:t}){const n=e,{localizeIfDate:o}=it(),a=V({}),r=V({}),s=V(null),i=P(()=>n.card.fields.map(m=>(m.formatter=(f,h,y)=>o(f,En(y,h)),m)));function u(m){r.value=m.requestQueryString,s.value.replaceCollection(m.card.value)}function d(){s.value.reload()}return t({reload:d}),(m,f)=>(g(),R(fd,{card:e.card,"request-query-string":a.value,"reload-on-query-string-change":!1,onRetrieved:u},{actions:p(()=>[Ee(m.$slots,"actions")]),default:p(()=>[l(lv,{ref_key:"tableRef",ref:s,class:"[--gutter:theme(spacing.6)]","wrapper-class":"px-6 overflow-hidden border-y border-neutral-900/5 bg-white dark:border-white/10 dark:bg-neutral-900","max-height":"450px",searchable:e.card.searchable,"table-id":e.card.uriKey,"float-first":e.card.floatingResource,fields:i.value,"initial-data":e.card.value,"request-query-string":r.value,"request-uri":`cards/${e.card.uriKey}`,stackable:"",bleed:"",sticky:"",onDataLoaded:f[0]||(f[0]=h=>a.value=h.requestQueryString)},gn({_:2},[Ie(m.$slots,(h,y)=>({name:y,fn:p(b=>[Ee(m.$slots,y,zt(Qt(b)))])}))]),1032,["searchable","table-id","float-first","fields","initial-data","request-query-string","request-uri"])]),_:3},8,["card","request-query-string"]))}},GY={key:0,class:"overflow-hidden border-y border-neutral-900/5 bg-white px-6 dark:border-white/10 dark:bg-neutral-900"},KY={key:2},ZY={class:"mr-1 font-medium text-neutral-800 dark:text-neutral-100"},YY={class:"text-neutral-700 dark:text-neutral-300"},XY={__name:"CardTable",props:{card:Object,stackable:{type:Boolean,default:!0}},setup(e){const t=e,n=So(),{isColumnVisible:o}=Ww(),{localizeIfDate:a}=it(),{floatResource:r}=Ro(),{t:s}=Pe(),i=V(null),u=V([]),d=V({}),m=P(()=>d.value.fields.filter(w=>w.isStacked)),f=P(()=>d.value.fields.map(w=>(w.formatter=(k,x,$)=>a(k,En($,x)),w))),h=P(()=>d.value.emptyText||s("core::app.not_enough_data")),y=P(()=>d.value.value.length>0);function b(w){d.value=w}function I(){f.value.forEach((w,k)=>{k>0&&u.value[k]&&(d.value.fields[k].isStacked=!o(u.value[k].$el,i.value.$wrapperEl))})}return b(t.card),t.stackable&&Qo(window,"resize",I),Xe(()=>{t.stackable&&We(I)}),(w,k)=>{const x=c("ITableHeader"),$=c("ITableRow"),C=c("ITableHead"),F=c("ILink"),T=c("ITableCell"),S=c("ITableBody"),A=c("ITable"),E=c("IText");return g(),R(fd,{card:e.card,onRetrieved:k[0]||(k[0]=B=>b(B.card))},{default:p(()=>[y.value?(g(),D("div",GY,[l(A,{id:v(n),ref_key:"tableRef",ref:i,"max-height":"450px",class:"[--gutter:theme(spacing.6)]",sticky:"",bleed:""},{default:p(()=>[l(C,null,{default:p(()=>[l($,{class:"[&>th]:sticky [&>th]:top-0 [&>th]:z-10 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter"},{default:p(()=>[(g(!0),D(de,null,Ie(f.value,B=>(g(),R(x,{key:"th-"+B.key,ref_for:!0,ref_key:"thRefs",ref:u,class:be(["bg-neutral-50 dark:bg-neutral-500/10",B.isStacked?"hidden":""])},{default:p(()=>[ne(K(B.label),1)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),l(S,null,{default:p(()=>[(g(!0),D(de,null,Ie(d.value.value,B=>(g(),R($,{key:B[d.value.primaryKey]},{default:p(()=>[(g(!0),D(de,null,Ie(f.value,M=>(g(),R(T,{key:"td-"+M.key,class:be({"font-medium":M.key===f.value[0].key,hidden:M.isStacked})},{default:p(()=>[e.card.floatingResource&&M.key===f.value[0].key?(g(),R(F,{key:0,text:B[M.key],onClick:N=>v(r)({resourceName:e.card.floatingResource.resourceName,resourceId:B.id,mode:e.card.floatingResource.mode})},null,8,["text","onClick"])):M.key===f.value[0].key&&B.path?(g(),R(F,{key:1,to:B.path,text:B[M.key]},null,8,["to","text"])):(g(),D("span",KY,K(M.formatter?M.formatter(B[M.key],M.key,B):B[M.key]),1)),M.key===f.value[0].key?(g(!0),D(de,{key:3},Ie(m.value,N=>(g(),D("p",{key:"stacked-"+N.key,class:"flex items-center font-normal"},[_("span",ZY,K(N.label)+": ",1),_("span",YY,K(N.formatter?N.formatter(B[N.key],N.key,B):B[N.key]),1)]))),128)):Z("",!0)]),_:2},1032,["class"]))),128))]),_:2},1024))),128))]),_:1})]),_:1},8,["id"])])):(g(),R(E,{key:1,class:"pb-16 pt-12 text-center",text:h.value},null,8,["text"]))]),_:1},8,["card"])}}},Cl={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},mI=8,mi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function Vf(e,t){return typeof e=="number"?e+t:e}function fi(e){if(typeof e=="string"){const t=/^(\d+)\s*(.*)$/g.exec(e);return{value:t?+t[1]:0,unit:(t==null?void 0:t[2])||void 0}}return{value:Number(e)}}function pd(e){return String.fromCharCode(97+e%26)}const Gu=2221e-19;function fI(e){return Math.floor(Math.log(Math.abs(e))/Math.LN10)}function _l(e,t,n){return t/n.range*e}function pI(e,t){const n=Math.pow(10,t||mI);return Math.round(e*n)/n}function vI(e){if(e===1)return e;function t(s,i){return s%i===0?i:t(i,s%i)}function n(s){return s*s+1}let o=2,a=2,r;if(e%2===0)return 2;do o=n(o)%e,a=n(n(a))%e,r=t(Math.abs(o-a),e);while(r===1);return r}function Ku(e,t,n,o){const a=(o-90)*Math.PI/180;return{x:e+n*Math.cos(a),y:t+n*Math.sin(a)}}function hI(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a={high:t.high,low:t.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};a.valueRange=a.high-a.low,a.oom=fI(a.valueRange),a.step=Math.pow(10,a.oom),a.min=Math.floor(a.low/a.step)*a.step,a.max=Math.ceil(a.high/a.step)*a.step,a.range=a.max-a.min,a.numberOfSteps=Math.round(a.range/a.step);const s=_l(e,a.step,a)<n,i=o?vI(a.range):0;if(o&&_l(e,1,a)>=n)a.step=1;else if(o&&i<a.step&&_l(e,i,a)>=n)a.step=i;else{let h=0;for(;;){if(s&&_l(e,a.step,a)<=n)a.step*=2;else if(!s&&_l(e,a.step/2,a)>=n){if(a.step/=2,o&&a.step%1!==0){a.step*=2;break}}else break;if(h++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}a.step=Math.max(a.step,Gu);function u(h,y){return h===(h+=y)&&(h*=1+(y>0?Gu:-Gu)),h}let d=a.min,m=a.max;for(;d+a.step<=a.low;)d=u(d,a.step);for(;m-a.step>=a.high;)m=u(m,-a.step);a.min=d,a.max=m,a.range=a.max-a.min;const f=[];for(let h=a.min;h<=a.max;h=u(h,a.step)){const y=pI(h);y!==f[f.length-1]&&f.push(y)}return a.values=f,a}function fr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];for(let a=0;a<n.length;a++){const r=n[a];for(const s in r){const i=r[s];typeof i=="object"&&i!==null&&!(i instanceof Array)?e[s]=fr(e[s],i):e[s]=i}}return e}const Hl=e=>e;function pi(e,t){return Array.from({length:e},t?(n,o)=>t(o):()=>{})}const gI=(e,t)=>e+(t||0),bI=(e,t)=>pi(Math.max(...e.map(n=>n.length)),n=>t(...e.map(o=>o[n])));function dn(e,t){return e!==null&&typeof e=="object"&&Reflect.has(e,t)}function Dl(e){return e!==null&&isFinite(e)}function uv(e){return!e&&e!==0}function Wr(e){return Dl(e)?Number(e):void 0}function yI(e){return Array.isArray(e)?e.every(Array.isArray):!1}function cv(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=0;e[n?"reduceRight":"reduce"]((a,r,s)=>t(r,o++,s),void 0)}function dv(e,t){const n=Array.isArray(e)?e[t]:dn(e,"data")?e.data[t]:null;return dn(n,"meta")?n.meta:void 0}function mv(e){return e==null||typeof e=="number"&&isNaN(e)}function _I(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)||dn(t,"data"))}function wI(e){return typeof e=="object"&&e!==null&&(Reflect.has(e,"x")||Reflect.has(e,"y"))}function zi(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";return wI(e)&&dn(e,t)?Wr(e[t]):Wr(e)}function vi(e,t,n){t={...t,...n?n==="x"?t.axisX:t.axisY:{}};const o={high:t.high===void 0?-Number.MAX_VALUE:+t.high,low:t.low===void 0?Number.MAX_VALUE:+t.low},a=t.high===void 0,r=t.low===void 0;function s(i){if(!mv(i))if(Array.isArray(i))for(let u=0;u<i.length;u++)s(i[u]);else{const u=Number(n&&dn(i,n)?i[n]:i);a&&u>o.high&&(o.high=u),r&&u<o.low&&(o.low=u)}}return(a||r)&&s(e),(t.referenceValue||t.referenceValue===0)&&(o.high=Math.max(t.referenceValue,o.high),o.low=Math.min(t.referenceValue,o.low)),o.high<=o.low&&(o.low===0?o.high=1:o.low<0?o.high=0:(o.high>0||(o.high=1),o.low=0)),o}function vd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a;const r={labels:(e.labels||[]).slice(),series:eX(e.series,n,o)},s=r.labels.length;return yI(r.series)?(a=Math.max(s,...r.series.map(i=>i.length)),r.series.forEach(i=>{i.push(...pi(Math.max(0,a-i.length)))})):a=r.series.length,r.labels.push(...pi(Math.max(0,a-s),()=>"")),t&&QY(r),r}function QY(e){var t;(t=e.labels)===null||t===void 0||t.reverse(),e.series.reverse();for(const n of e.series)dn(n,"data")?n.data.reverse():Array.isArray(n)&&n.reverse()}function JY(e,t){let n,o;if(typeof e!="object"){const a=Wr(e);t==="x"?n=a:o=a}else dn(e,"x")&&(n=Wr(e.x)),dn(e,"y")&&(o=Wr(e.y));if(!(n===void 0&&o===void 0))return{x:n,y:o}}function Vb(e,t){if(!mv(e))return t?JY(e,t):Wr(e)}function Lf(e,t){return Array.isArray(e)?e.map(n=>dn(n,"value")?Vb(n.value,t):Vb(n,t)):Lf(e.data,t)}function eX(e,t,n){if(_I(e))return e.map(a=>Lf(a,t));const o=Lf(e,t);return n?o.map(a=>[a]):o}function fv(e,t,n){const o={increasingX:!1,fillHoles:!1,...n},a=[];let r=!0;for(let s=0;s<e.length;s+=2)zi(t[s/2].value)===void 0?o.fillHoles||(r=!0):(o.increasingX&&s>=2&&e[s]<=e[s-2]&&(r=!0),r&&(a.push({pathCoordinates:[],valueData:[]}),r=!1),a[a.length-1].pathCoordinates.push(e[s],e[s+1]),a[a.length-1].valueData.push(t[s/2]));return a}function Wl(e){let t="";return e==null?e:(typeof e=="number"?t=""+e:typeof e=="object"?t=JSON.stringify({data:e}):t=String(e),Object.keys(mi).reduce((n,o)=>n.replaceAll(o,mi[o]),t))}function tX(e){if(typeof e!="string")return e;if(e==="NaN")return NaN;e=Object.keys(mi).reduce((n,o)=>n.replaceAll(mi[o],o),e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),t=t.data!==void 0?t.data:t}catch{}return t}class II{call(t,n){return this.svgElements.forEach(o=>Reflect.apply(o[t],o,n)),this}attr(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("attr",n)}elem(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("elem",n)}root(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("root",n)}getNode(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("getNode",n)}foreignObject(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("foreignObject",n)}text(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("text",n)}empty(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("empty",n)}remove(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("remove",n)}addClass(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("addClass",n)}removeClass(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("removeClass",n)}removeAllClasses(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("removeAllClasses",n)}animate(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return this.call("animate",n)}constructor(t){this.svgElements=[];for(let n=0;n<t.length;n++)this.svgElements.push(new Ma(t[n]))}}const pv={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function Lb(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;const{easing:r,...s}=n,i={};let u,d;r&&(u=Array.isArray(r)?r:pv[r]),s.begin=Vf(s.begin,"ms"),s.dur=Vf(s.dur,"ms"),u&&(s.calcMode="spline",s.keySplines=u.join(" "),s.keyTimes="0;1"),o&&(s.fill="freeze",i[t]=s.from,e.attr(i),d=fi(s.begin||0).value,s.begin="indefinite");const m=e.elem("animate",{attributeName:t,...s});o&&setTimeout(()=>{try{m._node.beginElement()}catch{i[t]=s.to,e.attr(i),m.remove()}},d);const f=m.getNode();a&&f.addEventListener("beginEvent",()=>a.emit("animationBegin",{element:e,animate:f,params:n})),f.addEventListener("endEvent",()=>{a&&a.emit("animationEnd",{element:e,animate:f,params:n}),o&&(i[t]=s.to,e.attr(i),m.remove())})}class Ma{attr(t,n){return typeof t=="string"?n?this._node.getAttributeNS(n,t):this._node.getAttribute(t):(Object.keys(t).forEach(o=>{if(t[o]!==void 0)if(o.indexOf(":")!==-1){const a=o.split(":");this._node.setAttributeNS(Cl[a[0]],o,String(t[o]))}else this._node.setAttribute(o,String(t[o]))}),this)}elem(t,n,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return new Ma(t,n,o,this,a)}parent(){return this._node.parentNode instanceof SVGElement?new Ma(this._node.parentNode):null}root(){let t=this._node;for(;t.nodeName!=="svg"&&t.parentElement;)t=t.parentElement;return new Ma(t)}querySelector(t){const n=this._node.querySelector(t);return n?new Ma(n):null}querySelectorAll(t){const n=this._node.querySelectorAll(t);return new II(n)}getNode(){return this._node}foreignObject(t,n,o){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r;if(typeof t=="string"){const i=document.createElement("div");i.innerHTML=t,r=i.firstChild}else r=t;r instanceof Element&&r.setAttribute("xmlns",Cl.xmlns);const s=this.elem("foreignObject",n,o,a);return s._node.appendChild(r),s}text(t){return this._node.appendChild(document.createTextNode(t)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var t;return(t=this._node.parentNode)===null||t===void 0||t.removeChild(this._node),this.parent()}replace(t){var n;return(n=this._node.parentNode)===null||n===void 0||n.replaceChild(t._node,this._node),t}append(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this}classes(){const t=this._node.getAttribute("class");return t?t.trim().split(/\s+/):[]}addClass(t){return this._node.setAttribute("class",this.classes().concat(t.trim().split(/\s+/)).filter(function(n,o,a){return a.indexOf(n)===o}).join(" ")),this}removeClass(t){const n=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(o=>n.indexOf(o)===-1).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2?arguments[2]:void 0;return Object.keys(t).forEach(a=>{const r=t[a];Array.isArray(r)?r.forEach(s=>Lb(this,a,s,!1,o)):Lb(this,a,r,n,o)}),this}constructor(t,n,o,a,r=!1){t instanceof Element?this._node=t:(this._node=document.createElementNS(Cl.svg,t),t==="svg"&&this.attr({"xmlns:ct":Cl.ct})),n&&this.attr(n),o&&this.addClass(o),a&&(r&&a._node.firstChild?a._node.insertBefore(this._node,a._node.firstChild):a._node.appendChild(this._node))}}Ma.Easing=pv;function hd(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"100%",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"100%",o=arguments.length>3?arguments[3]:void 0;Array.from(e.querySelectorAll("svg")).filter(r=>r.getAttributeNS(Cl.xmlns,"ct")).forEach(r=>e.removeChild(r));const a=new Ma("svg").attr({width:t,height:n}).attr({style:"width: ".concat(t,"; height: ").concat(n,";")});return o&&a.addClass(o),e.appendChild(a.getNode()),a}function xI(e){return typeof e=="number"?{top:e,right:e,bottom:e,left:e}:e===void 0?{top:0,right:0,bottom:0,left:0}:{top:typeof e.top=="number"?e.top:0,right:typeof e.right=="number"?e.right:0,bottom:typeof e.bottom=="number"?e.bottom:0,left:typeof e.left=="number"?e.left:0}}function gd(e,t){var n,o,a,r;const s=!!(t.axisX||t.axisY),i=((n=t.axisY)===null||n===void 0?void 0:n.offset)||0,u=((o=t.axisX)===null||o===void 0?void 0:o.offset)||0,d=(a=t.axisY)===null||a===void 0?void 0:a.position,m=(r=t.axisX)===null||r===void 0?void 0:r.position;let f=e.width()||fi(t.width).value||0,h=e.height()||fi(t.height).value||0;const y=xI(t.chartPadding);f=Math.max(f,i+y.left+y.right),h=Math.max(h,u+y.top+y.bottom);const b={x1:0,x2:0,y1:0,y2:0,padding:y,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return s?(m==="start"?(b.y2=y.top+u,b.y1=Math.max(h-y.bottom,b.y2+1)):(b.y2=y.top,b.y1=Math.max(h-y.bottom-u,b.y2+1)),d==="start"?(b.x1=y.left+i,b.x2=Math.max(f-y.right,b.x1+1)):(b.x1=y.left,b.x2=Math.max(f-y.right-i,b.x1+1))):(b.x1=y.left,b.x2=Math.max(f-y.right,b.x1+1),b.y2=y.top,b.y1=Math.max(h-y.bottom,b.y2+1)),b}function kI(e,t,n,o,a,r,s,i){const u={["".concat(n.units.pos,"1")]:e,["".concat(n.units.pos,"2")]:e,["".concat(n.counterUnits.pos,"1")]:o,["".concat(n.counterUnits.pos,"2")]:o+a},d=r.elem("line",u,s.join(" "));i.emit("draw",{type:"grid",axis:n,index:t,group:r,element:d,...u})}function vv(e,t,n,o){const a=e.elem("rect",{x:t.x1,y:t.y2,width:t.width(),height:t.height()},n,!0);o.emit("draw",{type:"gridBackground",group:e,element:a})}function $I(e,t,n,o,a,r,s,i,u,d){const m={[a.units.pos]:e+s[a.units.pos],[a.counterUnits.pos]:s[a.counterUnits.pos],[a.units.len]:t,[a.counterUnits.len]:Math.max(0,r-10)},f=Math.round(m[a.units.len]),h=Math.round(m[a.counterUnits.len]),y=document.createElement("span");y.className=u.join(" "),y.style[a.units.len]=f+"px",y.style[a.counterUnits.len]=h+"px",y.textContent=String(o);const b=i.foreignObject(y,{style:"overflow: visible;",...m});d.emit("draw",{type:"label",axis:a,index:n,group:i,element:b,text:o,...m})}function qf(e,t,n){let o;const a=[];function r(i){const u=o;o=fr({},e),t&&t.forEach(d=>{window.matchMedia(d[0]).matches&&(o=fr(o,d[1]))}),n&&i&&n.emit("optionsChanged",{previousOptions:u,currentOptions:o})}function s(){a.forEach(i=>i.removeEventListener("change",r))}if(window.matchMedia)t&&t.forEach(i=>{const u=window.matchMedia(i[0]);u.addEventListener("change",r),a.push(u)});else throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return r(),{removeMediaQueryListeners:s,getCurrentOptions(){return o}}}const Uf={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},nX={accuracy:3};function Au(e,t,n,o,a,r){const s={command:a?e.toLowerCase():e.toUpperCase(),...t,...r?{data:r}:{}};n.splice(o,0,s)}function Rm(e,t){e.forEach((n,o)=>{Uf[n.command.toLowerCase()].forEach((a,r)=>{t(n,a,o,r,e)})})}class fo{static join(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2?arguments[2]:void 0;const a=new fo(n,o);for(let r=0;r<t.length;r++){const s=t[r];for(let i=0;i<s.pathElements.length;i++)a.pathElements.push(s.pathElements[i])}return a}position(t){return t!==void 0?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos}remove(t){return this.pathElements.splice(this.pos,t),this}move(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;return Au("M",{x:+t,y:+n},this.pathElements,this.pos++,o,a),this}line(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;return Au("L",{x:+t,y:+n},this.pathElements,this.pos++,o,a),this}curve(t,n,o,a,r,s){let i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,u=arguments.length>7?arguments[7]:void 0;return Au("C",{x1:+t,y1:+n,x2:+o,y2:+a,x:+r,y:+s},this.pathElements,this.pos++,i,u),this}arc(t,n,o,a,r,s,i){let u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,d=arguments.length>8?arguments[8]:void 0;return Au("A",{rx:t,ry:n,xAr:o,lAf:a,sf:r,x:s,y:i},this.pathElements,this.pos++,u,d),this}parse(t){const n=t.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((a,r)=>(r.match(/[A-Za-z]/)&&a.push([]),a[a.length-1].push(r),a),[]);n[n.length-1][0].toUpperCase()==="Z"&&n.pop();const o=n.map(a=>{const r=a.shift(),s=Uf[r.toLowerCase()];return{command:r,...s.reduce((i,u,d)=>(i[u]=+a[d],i),{})}});return this.pathElements.splice(this.pos,0,...o),this.pos+=o.length,this}stringify(){const t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((n,o)=>{const a=Uf[o.command.toLowerCase()].map(r=>{const s=o[r];return this.options.accuracy?Math.round(s*t)/t:s});return n+o.command+a.join(",")},"")+(this.close?"Z":"")}scale(t,n){return Rm(this.pathElements,(o,a)=>{o[a]*=a[0]==="x"?t:n}),this}translate(t,n){return Rm(this.pathElements,(o,a)=>{o[a]+=a[0]==="x"?t:n}),this}transform(t){return Rm(this.pathElements,(n,o,a,r,s)=>{const i=t(n,o,a,r,s);(i||i===0)&&(n[o]=i)}),this}clone(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const n=new fo(t||this.close);return n.pos=this.pos,n.pathElements=this.pathElements.slice().map(o=>({...o})),n.options={...this.options},n}splitByCommand(t){const n=[new fo];return this.pathElements.forEach(o=>{o.command===t.toUpperCase()&&n[n.length-1].pathElements.length!==0&&n.push(new fo),n[n.length-1].pathElements.push(o)}),n}constructor(t=!1,n){this.close=t,this.pathElements=[],this.pos=0,this.options={...nX,...n}}}function Gl(e){const t={fillHoles:!1,...e};return function(o,a){const r=new fo;let s=!0;for(let i=0;i<o.length;i+=2){const u=o[i],d=o[i+1],m=a[i/2];zi(m.value)!==void 0?(s?r.move(u,d,!1,m):r.line(u,d,!1,m),s=!1):t.fillHoles||(s=!0)}return r}}function oX(e){const t={divisor:2,fillHoles:!1,...e},n=1/Math.max(1,t.divisor);return function(a,r){const s=new fo;let i=0,u=0,d;for(let m=0;m<a.length;m+=2){const f=a[m],h=a[m+1],y=(f-i)*n,b=r[m/2];b.value!==void 0?(d===void 0?s.move(f,h,!1,b):s.curve(i+y,u,f-y,h,f,h,!1,b),i=f,u=h,d=b):t.fillHoles||(i=u=0,d=void 0)}return s}}function aX(e){const t={postpone:!0,fillHoles:!1,...e};return function(o,a){const r=new fo;let s=0,i=0,u;for(let d=0;d<o.length;d+=2){const m=o[d],f=o[d+1],h=a[d/2];h.value!==void 0?(u===void 0?r.move(m,f,!1,h):(t.postpone?r.line(m,i,!1,u):r.line(s,f,!1,h),r.line(m,f,!1,h)),s=m,i=f,u=h):t.fillHoles||(s=i=0,u=void 0)}return r}}function rX(e){const t={tension:1,fillHoles:!1,...e},n=Math.min(1,Math.max(0,t.tension)),o=1-n;return function a(r,s){const i=fv(r,s,{fillHoles:t.fillHoles});if(i.length){if(i.length>1)return fo.join(i.map(u=>a(u.pathCoordinates,u.valueData)));{if(r=i[0].pathCoordinates,s=i[0].valueData,r.length<=4)return Gl()(r,s);const u=new fo().move(r[0],r[1],!1,s[0]),d=!1;for(let m=0,f=r.length;f-2*+!d>m;m+=2){const h=[{x:+r[m-2],y:+r[m-1]},{x:+r[m],y:+r[m+1]},{x:+r[m+2],y:+r[m+3]},{x:+r[m+4],y:+r[m+5]}];f-4===m?h[3]=h[2]:m||(h[0]={x:+r[m],y:+r[m+1]}),u.curve(n*(-h[0].x+6*h[1].x+h[2].x)/6+o*h[2].x,n*(-h[0].y+6*h[1].y+h[2].y)/6+o*h[2].y,n*(h[1].x+6*h[2].x-h[3].x)/6+o*h[2].x,n*(h[1].y+6*h[2].y-h[3].y)/6+o*h[2].y,h[2].x,h[2].y,!1,s[(m+2)/2])}return u}}else return Gl()([],[])}}function CI(e){const t={fillHoles:!1,...e};return function n(o,a){const r=fv(o,a,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return fo.join(r.map(s=>n(s.pathCoordinates,s.valueData)));{if(o=r[0].pathCoordinates,a=r[0].valueData,o.length<=4)return Gl()(o,a);const s=[],i=[],u=o.length/2,d=[],m=[],f=[],h=[];for(let b=0;b<u;b++)s[b]=o[b*2],i[b]=o[b*2+1];for(let b=0;b<u-1;b++)f[b]=i[b+1]-i[b],h[b]=s[b+1]-s[b],m[b]=f[b]/h[b];d[0]=m[0],d[u-1]=m[u-2];for(let b=1;b<u-1;b++)m[b]===0||m[b-1]===0||m[b-1]>0!=m[b]>0?d[b]=0:(d[b]=3*(h[b-1]+h[b])/((2*h[b]+h[b-1])/m[b-1]+(h[b]+2*h[b-1])/m[b]),isFinite(d[b])||(d[b]=0));const y=new fo().move(s[0],i[0],!1,a[0]);for(let b=0;b<u-1;b++)y.curve(s[b]+h[b]/3,i[b]+d[b]*h[b]/3,s[b+1]-h[b]/3,i[b+1]-d[b+1]*h[b]/3,s[b+1],i[b+1],!1,a[b+1]);return y}}else return Gl()([],[])}}var SI=Object.freeze({__proto__:null,none:Gl,simple:oX,step:aX,cardinal:rX,monotoneCubic:CI});class TI{on(t,n){const{allListeners:o,listeners:a}=this;t==="*"?o.add(n):(a.has(t)||a.set(t,new Set),a.get(t).add(n))}off(t,n){const{allListeners:o,listeners:a}=this;if(t==="*")n?o.delete(n):o.clear();else if(a.has(t)){const r=a.get(t);n?r.delete(n):r.clear(),r.size||a.delete(t)}}emit(t,n){const{allListeners:o,listeners:a}=this;a.has(t)&&a.get(t).forEach(r=>r(n)),o.forEach(r=>r(t,n))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const Dm=new WeakMap;class bd{update(t,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),n&&(this.options=fr({},o?this.options:this.defaultOptions,n),!this.initializeTimeoutId)){var a;(a=this.optionsProvider)===null||a===void 0||a.removeMediaQueryListeners(),this.optionsProvider=qf(this.options,this.responsiveOptions,this.eventEmitter)}return!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){if(this.initializeTimeoutId)window.clearTimeout(this.initializeTimeoutId);else{var t;window.removeEventListener("resize",this.resizeListener),(t=this.optionsProvider)===null||t===void 0||t.removeMediaQueryListeners()}return Dm.delete(this.container),this}on(t,n){return this.eventEmitter.on(t,n),this}off(t,n){return this.eventEmitter.off(t,n),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=qf(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(t=>{Array.isArray(t)?t[0](this,t[1]):t(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(t,n,o,a,r){this.data=n,this.defaultOptions=o,this.options=a,this.responsiveOptions=r,this.eventEmitter=new TI,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const s=typeof t=="string"?document.querySelector(t):t;if(!s)throw new Error("Target element is not found");this.container=s;const i=Dm.get(s);i&&i.detach(),Dm.set(s,this)}}const eo={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class yd{createGridAndLabels(t,n,o,a){const r=this.units.pos==="x"?o.axisX:o.axisY,s=this.ticks.map((u,d)=>this.projectValue(u,d)),i=this.ticks.map(r.labelInterpolationFnc);s.forEach((u,d)=>{const m=i[d],f={x:0,y:0};let h;s[d+1]?h=s[d+1]-u:h=Math.max(this.axisLength-u,this.axisLength/this.ticks.length),!(m!==""&&uv(m))&&(this.units.pos==="x"?(u=this.chartRect.x1+u,f.x=o.axisX.labelOffset.x,o.axisX.position==="start"?f.y=this.chartRect.padding.top+o.axisX.labelOffset.y+5:f.y=this.chartRect.y1+o.axisX.labelOffset.y+5):(u=this.chartRect.y1-u,f.y=o.axisY.labelOffset.y-h,o.axisY.position==="start"?f.x=this.chartRect.padding.left+o.axisY.labelOffset.x:f.x=this.chartRect.x2+o.axisY.labelOffset.x+10),r.showGrid&&kI(u,d,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[o.classNames.grid,o.classNames[this.units.dir]],a),r.showLabel&&$I(u,h,d,m,this,r.offset,f,n,[o.classNames.label,o.classNames[this.units.dir],r.position==="start"?o.classNames[r.position]:o.classNames.end],a))})}constructor(t,n,o){this.units=t,this.chartRect=n,this.ticks=o,this.counterUnits=t===eo.x?eo.y:eo.x,this.axisLength=n[this.units.rectEnd]-n[this.units.rectStart],this.gridOffset=n[this.units.rectOffset]}}class hc extends yd{projectValue(t){const n=Number(zi(t,this.units.pos));return this.axisLength*(n-this.bounds.min)/this.bounds.range}constructor(t,n,o,a){const r=a.highLow||vi(n,a,t.pos),s=hI(o[t.rectEnd]-o[t.rectStart],r,a.scaleMinSpace||20,a.onlyInteger),i={min:s.min,max:s.max};super(t,o,s.values),this.bounds=s,this.range=i}}class lX extends yd{projectValue(t){const n=Number(zi(t,this.units.pos));return this.axisLength*(n-this.range.min)/(this.range.max-this.range.min)}constructor(t,n,o,a){const r=a.highLow||vi(n,a,t.pos),s=a.divisor||1,i=(a.ticks||pi(s,d=>r.low+(r.high-r.low)/s*d)).sort((d,m)=>Number(d)-Number(m)),u={min:r.low,max:r.high};super(t,o,i),this.range=u}}class ni extends yd{projectValue(t,n){return this.stepLength*n}constructor(t,n,o,a){const r=a.ticks||[];super(t,o,r);const s=Math.max(1,r.length-(a.stretch?1:0));this.stepLength=this.axisLength/s,this.stretch=!!a.stretch}}function wl(e,t,n){var o;if(dn(e,"name")&&e.name&&(!((o=t.series)===null||o===void 0)&&o[e.name])){const r=(t==null?void 0:t.series[e.name])[n];return r===void 0?t[n]:r}else return t[n]}const qb={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Hl,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Hl,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class EI extends bd{createChart(t){const{data:n}=this,o=vd(n,t.reverseData,!0),a=hd(this.container,t.width,t.height,t.classNames.chart);this.svg=a;const r=a.elem("g").addClass(t.classNames.gridGroup),s=a.elem("g"),i=a.elem("g").addClass(t.classNames.labelGroup),u=gd(a,t);let d,m;t.axisX.type===void 0?d=new ni(eo.x,o.series,u,{...t.axisX,ticks:o.labels,stretch:t.fullWidth}):d=new t.axisX.type(eo.x,o.series,u,t.axisX),t.axisY.type===void 0?m=new hc(eo.y,o.series,u,{...t.axisY,high:Dl(t.high)?t.high:t.axisY.high,low:Dl(t.low)?t.low:t.axisY.low}):m=new t.axisY.type(eo.y,o.series,u,t.axisY),d.createGridAndLabels(r,i,t,this.eventEmitter),m.createGridAndLabels(r,i,t,this.eventEmitter),t.showGridBackground&&vv(r,u,t.classNames.gridBackground,this.eventEmitter),cv(n.series,(f,h)=>{const y=s.elem("g"),b=dn(f,"name")&&f.name,I=dn(f,"className")&&f.className,w=dn(f,"meta")?f.meta:void 0;b&&y.attr({"ct:series-name":b}),w&&y.attr({"ct:meta":Wl(w)}),y.addClass([t.classNames.series,I||"".concat(t.classNames.series,"-").concat(pd(h))].join(" "));const k=[],x=[];o.series[h].forEach((T,S)=>{const A={x:u.x1+d.projectValue(T,S,o.series[h]),y:u.y1-m.projectValue(T,S,o.series[h])};k.push(A.x,A.y),x.push({value:T,valueIndex:S,meta:dv(f,S)})});const $={lineSmooth:wl(f,t,"lineSmooth"),showPoint:wl(f,t,"showPoint"),showLine:wl(f,t,"showLine"),showArea:wl(f,t,"showArea"),areaBase:wl(f,t,"areaBase")};let C;typeof $.lineSmooth=="function"?C=$.lineSmooth:C=$.lineSmooth?CI():Gl();const F=C(k,x);if($.showPoint&&F.pathElements.forEach(T=>{const{data:S}=T,A=y.elem("line",{x1:T.x,y1:T.y,x2:T.x+.01,y2:T.y},t.classNames.point);if(S){let E,B;dn(S.value,"x")&&(E=S.value.x),dn(S.value,"y")&&(B=S.value.y),A.attr({"ct:value":[E,B].filter(Dl).join(","),"ct:meta":Wl(S.meta)})}this.eventEmitter.emit("draw",{type:"point",value:S==null?void 0:S.value,index:(S==null?void 0:S.valueIndex)||0,meta:S==null?void 0:S.meta,series:f,seriesIndex:h,axisX:d,axisY:m,group:y,element:A,x:T.x,y:T.y,chartRect:u})}),$.showLine){const T=y.elem("path",{d:F.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:o.series[h],path:F.clone(),chartRect:u,index:h,series:f,seriesIndex:h,meta:w,axisX:d,axisY:m,group:y,element:T})}if($.showArea&&m.range){const T=Math.max(Math.min($.areaBase,m.range.max),m.range.min),S=u.y1-m.projectValue(T);F.splitByCommand("M").filter(A=>A.pathElements.length>1).map(A=>{const E=A.pathElements[0],B=A.pathElements[A.pathElements.length-1];return A.clone(!0).position(0).remove(1).move(E.x,S).line(E.x,E.y).position(A.pathElements.length+1).line(B.x,S)}).forEach(A=>{const E=y.elem("path",{d:A.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:o.series[h],path:A.clone(),series:f,seriesIndex:h,axisX:d,axisY:m,chartRect:u,index:h,group:y,element:E,meta:w})})}},t.reverseData),this.eventEmitter.emit("created",{chartRect:u,axisX:d,axisY:m,svg:a,options:t})}constructor(t,n,o,a){super(t,n,qb,fr({},qb,o),a),this.data=n}}function sX(e){return bI(e,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Array.from(n).reduce((a,r)=>({x:a.x+(dn(r,"x")?r.x:0),y:a.y+(dn(r,"y")?r.y:0)}),{x:0,y:0})})}const Ub={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Hl,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Hl,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class FI extends bd{createChart(t){const{data:n}=this,o=vd(n,t.reverseData,t.horizontalBars?"x":"y",!0),a=hd(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:"")),r=t.stackBars&&t.stackMode!==!0&&o.series.length?vi([sX(o.series)],t,t.horizontalBars?"x":"y"):vi(o.series,t,t.horizontalBars?"x":"y");this.svg=a;const s=a.elem("g").addClass(t.classNames.gridGroup),i=a.elem("g"),u=a.elem("g").addClass(t.classNames.labelGroup);typeof t.high=="number"&&(r.high=t.high),typeof t.low=="number"&&(r.low=t.low);const d=gd(a,t);let m;const f=t.distributeSeries&&t.stackBars?o.labels.slice(0,1):o.labels;let h,y,b;t.horizontalBars?(t.axisX.type===void 0?m=y=new hc(eo.x,o.series,d,{...t.axisX,highLow:r,referenceValue:0}):m=y=new t.axisX.type(eo.x,o.series,d,{...t.axisX,highLow:r,referenceValue:0}),t.axisY.type===void 0?h=b=new ni(eo.y,o.series,d,{ticks:f}):h=b=new t.axisY.type(eo.y,o.series,d,t.axisY)):(t.axisX.type===void 0?h=y=new ni(eo.x,o.series,d,{ticks:f}):h=y=new t.axisX.type(eo.x,o.series,d,t.axisX),t.axisY.type===void 0?m=b=new hc(eo.y,o.series,d,{...t.axisY,highLow:r,referenceValue:0}):m=b=new t.axisY.type(eo.y,o.series,d,{...t.axisY,highLow:r,referenceValue:0}));const I=t.horizontalBars?d.x1+m.projectValue(0):d.y1-m.projectValue(0),w=t.stackMode==="accumulate",k=t.stackMode==="accumulate-relative",x=[],$=[];let C=x;h.createGridAndLabels(s,u,t,this.eventEmitter),m.createGridAndLabels(s,u,t,this.eventEmitter),t.showGridBackground&&vv(s,d,t.classNames.gridBackground,this.eventEmitter),cv(n.series,(F,T)=>{const S=T-(n.series.length-1)/2;let A;t.distributeSeries&&!t.stackBars?A=h.axisLength/o.series.length/2:t.distributeSeries&&t.stackBars?A=h.axisLength/2:A=h.axisLength/o.series[T].length/2;const E=i.elem("g"),B=dn(F,"name")&&F.name,M=dn(F,"className")&&F.className,N=dn(F,"meta")?F.meta:void 0;B&&E.attr({"ct:series-name":B}),N&&E.attr({"ct:meta":Wl(N)}),E.addClass([t.classNames.series,M||"".concat(t.classNames.series,"-").concat(pd(T))].join(" ")),o.series[T].forEach((G,U)=>{const j=dn(G,"x")&&G.x,O=dn(G,"y")&&G.y;let H;t.distributeSeries&&!t.stackBars?H=T:t.distributeSeries&&t.stackBars?H=0:H=U;let W;t.horizontalBars?W={x:d.x1+m.projectValue(j||0,U,o.series[T]),y:d.y1-h.projectValue(O||0,H,o.series[T])}:W={x:d.x1+h.projectValue(j||0,H,o.series[T]),y:d.y1-m.projectValue(O||0,U,o.series[T])},h instanceof ni&&(h.stretch||(W[h.units.pos]+=A*(t.horizontalBars?-1:1)),W[h.units.pos]+=t.stackBars||t.distributeSeries?0:S*t.seriesBarDistance*(t.horizontalBars?-1:1)),k&&(C=O>=0||j>=0?x:$);const X=C[U]||I;if(C[U]=X-(I-W[h.counterUnits.pos]),G===void 0)return;const q={["".concat(h.units.pos,"1")]:W[h.units.pos],["".concat(h.units.pos,"2")]:W[h.units.pos]};t.stackBars&&(w||k||!t.stackMode)?(q["".concat(h.counterUnits.pos,"1")]=X,q["".concat(h.counterUnits.pos,"2")]=C[U]):(q["".concat(h.counterUnits.pos,"1")]=I,q["".concat(h.counterUnits.pos,"2")]=W[h.counterUnits.pos]),q.x1=Math.min(Math.max(q.x1,d.x1),d.x2),q.x2=Math.min(Math.max(q.x2,d.x1),d.x2),q.y1=Math.min(Math.max(q.y1,d.y2),d.y1),q.y2=Math.min(Math.max(q.y2,d.y2),d.y1);const L=dv(F,U),ee=E.elem("line",q,t.classNames.bar).attr({"ct:value":[j,O].filter(Dl).join(","),"ct:meta":Wl(L)});this.eventEmitter.emit("draw",{type:"bar",value:G,index:U,meta:L,series:F,seriesIndex:T,axisX:y,axisY:b,chartRect:d,group:E,element:ee,...q})})},t.reverseData),this.eventEmitter.emit("created",{chartRect:d,axisX:y,axisY:b,svg:a,options:t})}constructor(t,n,o,a){super(t,n,Ub,fr({},Ub,o),a),this.data=n}}const jb={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:Hl,labelDirection:"neutral",ignoreEmptyValues:!1};function AI(e,t,n){const o=t.x>e.x;return o&&n==="explode"||!o&&n==="implode"?"start":o&&n==="implode"||!o&&n==="explode"?"end":"middle"}class iX extends bd{createChart(t){const{data:n}=this,o=vd(n),a=[];let r,s,i=t.startAngle;const u=hd(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie);this.svg=u;const d=gd(u,t);let m=Math.min(d.width()/2,d.height()/2);const f=t.total||o.series.reduce(gI,0),h=fi(t.donutWidth);h.unit==="%"&&(h.value*=m/100),m-=t.donut?h.value/2:0,t.labelPosition==="outside"||t.donut?s=m:t.labelPosition==="center"?s=0:s=m/2,t.labelOffset&&(s+=t.labelOffset);const y={x:d.x1+d.width()/2,y:d.y2+d.height()/2},b=n.series.filter(I=>dn(I,"value")?I.value!==0:I!==0).length===1;n.series.forEach((I,w)=>a[w]=u.elem("g")),t.showLabel&&(r=u.elem("g")),n.series.forEach((I,w)=>{var k,x;if(o.series[w]===0&&t.ignoreEmptyValues)return;const $=dn(I,"name")&&I.name,C=dn(I,"className")&&I.className,F=dn(I,"meta")?I.meta:void 0;$&&a[w].attr({"ct:series-name":$}),a[w].addClass([(k=t.classNames)===null||k===void 0?void 0:k.series,C||"".concat((x=t.classNames)===null||x===void 0?void 0:x.series,"-").concat(pd(w))].join(" "));let T=f>0?i+o.series[w]/f*360:0;const S=Math.max(0,i-(w===0||b?0:.2));T-S>=359.99&&(T=S+359.99);const A=Ku(y.x,y.y,m,S),E=Ku(y.x,y.y,m,T),B=new fo(!t.donut).move(E.x,E.y).arc(m,m,0,+(T-i>180),0,A.x,A.y);t.donut||B.line(y.x,y.y);const M=a[w].elem("path",{d:B.stringify()},t.donut?t.classNames.sliceDonut:t.classNames.slicePie);if(M.attr({"ct:value":o.series[w],"ct:meta":Wl(F)}),t.donut&&M.attr({style:"stroke-width: "+h.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:o.series[w],totalDataSum:f,index:w,meta:F,series:I,group:a[w],element:M,path:B.clone(),center:y,radius:m,startAngle:i,endAngle:T,chartRect:d}),t.showLabel){let N;n.series.length===1?N={x:y.x,y:y.y}:N=Ku(y.x,y.y,s,i+(T-i)/2);let G;o.labels&&!uv(o.labels[w])?G=o.labels[w]:G=o.series[w];const U=t.labelInterpolationFnc(G,w);if(U||U===0){const j=r.elem("text",{dx:N.x,dy:N.y,"text-anchor":AI(y,N,t.labelDirection)},t.classNames.label).text(String(U));this.eventEmitter.emit("draw",{type:"label",index:w,group:r,element:j,text:""+U,chartRect:d,series:I,meta:F,...N})}}i=T}),this.eventEmitter.emit("created",{chartRect:d,svg:u,options:t})}constructor(t,n,o,a){super(t,n,jb,fr({},jb,o),a),this.data=n}}const uX=Object.freeze(Object.defineProperty({__proto__:null,AutoScaleAxis:hc,Axis:yd,BarChart:FI,BaseChart:bd,EPSILON:Gu,EventEmitter:TI,FixedScaleAxis:lX,Interpolation:SI,LineChart:EI,PieChart:iX,StepAxis:ni,Svg:Ma,SvgList:II,SvgPath:fo,alphaNumerate:pd,axisUnits:eo,createChartRect:gd,createGrid:kI,createGridBackground:vv,createLabel:$I,createSvg:hd,deserialize:tX,determineAnchorPosition:AI,each:cv,easings:pv,ensureUnit:Vf,escapingMap:mi,extend:fr,getBounds:hI,getHighLow:vi,getMetaData:dv,getMultiValue:zi,getNumberOrUndefined:Wr,getSeriesOption:wl,isArrayOfArrays:yI,isArrayOfSeries:_I,isDataHoleValue:mv,isFalseyButZero:uv,isMultiValue:wI,isNumeric:Dl,namespaces:Cl,noop:Hl,normalizeData:vd,normalizePadding:xI,optionsProvider:qf,orderOfMagnitude:fI,polarToCartesian:Ku,precision:mI,projectLength:_l,quantity:fi,rho:vI,roundWithPrecision:pI,safeHasProperty:dn,serialMap:bI,serialize:Wl,splitIntoSegments:fv,sum:gI,times:pi},Symbol.toStringTag,{value:"Module"}));var RI={exports:{}};const cX=ly(uX);(function(e){(function(t,n){t===void 0&&window!==void 0&&(t=window),e.exports?e.exports=n(cX):t["Chartist.plugins.tooltip"]=n(t.Chartist)})(Vr,function(t){return function(n,o,a){var r={currency:void 0,currencyFormatCallback:void 0,tooltipOffset:{x:0,y:-20},anchorToPoint:!1,appendToBody:!0,class:void 0,pointClass:"ct-point"};a.plugins=a.plugins||{},a.plugins.tooltip=function(m){return m=a.extend({},r,m),function(h){var y=m.pointClass;h instanceof a.BarChart?y="ct-bar":h instanceof a.PieChart&&(h.options.donut?y=h.options.donutSolid?"ct-slice-donut-solid":"ct-slice-donut":y="ct-slice-pie");var b=h.container,I=!1,w=d(b),k;m.appendToBody?k=o.querySelector(".chartist-tooltip"):k=b.querySelector(".chartist-tooltip"),k||(k=o.createElement("div"),k.className=m.class?"chartist-tooltip "+m.class:"chartist-tooltip",m.appendToBody?o.body.appendChild(k):b.appendChild(k));var x=k.offsetHeight,$=k.offsetWidth;S(k);function C(A,E,B){b.addEventListener(A,function(M){(!E||s(M.target,E))&&B(M)})}C("mouseover",y,function(A){var E=A.target,B="",M=h instanceof a.PieChart?E:E.parentNode,N=M?E.parentNode.getAttribute("ct:meta")||E.parentNode.getAttribute("ct:series-name"):"",G=E.getAttribute("ct:meta")||N||"",U=!!G,j=E.getAttribute("ct:value");if(m.transformTooltipTextFnc&&typeof m.transformTooltipTextFnc=="function"&&(j=m.transformTooltipTextFnc(j)),m.tooltipFnc&&typeof m.tooltipFnc=="function")B=m.tooltipFnc(G,j);else{if(m.metaIsHTML){var O=o.createElement("textarea");O.innerHTML=G,G=O.value}if(G='<span class="chartist-tooltip-meta">'+G+"</span>",U)B+=G+"<br>";else if(h instanceof a.PieChart){var H=i(E,"ct-label");H&&(B+=u(H)+"<br>")}j&&(m.currency&&(m.currencyFormatCallback!=null?j=m.currencyFormatCallback(j,m):j=m.currency+j.replace(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g,"$1,")),j='<span class="chartist-tooltip-value">'+j+"</span>",B+=j)}B&&(k.innerHTML=B,x=k.offsetHeight,$=k.offsetWidth,m.appendToBody!==!0&&(w=d(b)),k.style.display!=="absolute"&&(k.style.display="absolute"),F(A),T(k),x=k.offsetHeight,$=k.offsetWidth)}),C("mouseout",y,function(){S(k)}),C("mousemove",null,function(A){m.anchorToPoint===!1&&I&&F(A)});function F(A){x=x||k.offsetHeight,$=$||k.offsetWidth;var E=-$/2+m.tooltipOffset.x,B=-x+m.tooltipOffset.y,M=m.anchorToPoint===!0&&A.target.x2&&A.target.y2;if(m.appendToBody===!0)if(M){var N=b.getBoundingClientRect(),G=A.target.x2.baseVal.value+N.left+n.pageXOffset,U=A.target.y2.baseVal.value+N.top+n.pageYOffset;k.style.left=G+E+"px",k.style.top=U+B+"px"}else k.style.left=A.pageX+E+"px",k.style.top=A.pageY+B+"px";else{var j=w.getBoundingClientRect(),O=-j.left-n.pageXOffset+E,H=-j.top-n.pageYOffset+B;if(M){var N=b.getBoundingClientRect(),G=A.target.x2.baseVal.value+N.left+n.pageXOffset,U=A.target.y2.baseVal.value+N.top+n.pageYOffset;k.style.left=G+O+"px",k.style.top=U+H+"px"}else k.style.left=A.pageX+O+"px",k.style.top=A.pageY+H+"px"}}function T(A){I=!0,s(A,"tooltip-show")||(A.className=A.className+" tooltip-show")}function S(A){I=!1;var E=new RegExp("tooltip-show\\s*","gi");A.className=A.className.replace(E,"").trim()}}};function s(m,f){return(" "+m.getAttribute("class")+" ").indexOf(" "+f+" ")>-1}function i(m,f){do m=m.nextSibling;while(m&&!s(m,f));return m}function u(m){return m.innerText||m.textContent}function d(m){if(d in m){var f=m.offsetParent;return f||(f=o.body.parentElement),f}var f=m.parentNode;return f?n.getComputedStyle(f).position!=="static"?f:f.tagName==="BODY"?f.parentElement:d(f):o.body.parentElement}}(window,document,t),t.plugins.tooltip})})(RI);var dX=RI.exports;const DI=Rt(dX);function OI(e,t){return t={exports:{}},e(t,t.exports),t.exports}var hi={symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3,stripZeros:!1,fallback:0};function PI(e){var t=arguments.length<=1||arguments[1]===void 0?hi.decimal:arguments[1],n=arguments.length<=2||arguments[2]===void 0?hi.fallback:arguments[2];if(Array.isArray(e))return e.map(function(u){return PI(u,t,n)});if(typeof e=="number")return e;var o=new RegExp("[^0-9-(-)-"+t+"]",["g"]),a=(""+e).replace(o,"").replace(t,".").replace(/\(([-]*\d*[^)]?\d+)\)/g,"-$1").replace(/\((.*)\)/,""),r=(a.match(/-/g)||2).length%2,s=parseFloat(a.replace(/-/g,"")),i=s*(r?-1:1);return isNaN(i)?n:i}function mX(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function gc(e,t){t=mX(t,hi.precision);var n=Math.pow(10,t);return(Math.round((e+1e-8)*n)/n).toFixed(t)}var Hs=OI(function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}e.exports=Object.assign||function(a,r){for(var s,i=o(a),u,d=1;d<arguments.length;d++){s=Object(arguments[d]);for(var m in s)t.call(s,m)&&(i[m]=s[m]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(s);for(var f=0;f<u.length;f++)n.call(s,u[f])&&(i[u[f]]=s[u[f]])}}return i}}),MI=Hs&&typeof Hs=="object"&&"default"in Hs?Hs.default:Hs;function fX(e,t){var n=e.split(t),o=n[0],a=n[1].replace(/0+$/,"");return a.length>0?o+t+a:o}function hv(e){var t=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];if(Array.isArray(e))return e.map(function(s){return hv(s,t)});t=MI({},hi,t);var n=e<0?"-":"",o=parseInt(gc(Math.abs(e),t.precision),10)+"",a=o.length>3?o.length%3:0,r=n+(a?o.substr(0,a)+t.thousand:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+t.thousand)+(t.precision>0?t.decimal+gc(Math.abs(e),t.precision).split(".")[1]:"");return t.stripZeros?fX(r,t.decimal):r}var Ws=OI(function(e){var t=String.prototype.valueOf,n=function(i){try{return t.call(i),!0}catch{return!1}},o=Object.prototype.toString,a="[object String]",r=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol";e.exports=function(i){return typeof i=="string"?!0:typeof i!="object"?!1:r?n(i):o.call(i)===a}}),pX=Ws&&typeof Ws=="object"&&"default"in Ws?Ws.default:Ws;function vX(e){return pX(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e}function bc(e){var t=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];if(Array.isArray(e))return e.map(function(a){return bc(a,t)});t=MI({},hi,t);var n=vX(t.format),o=void 0;return e>0?o=n.pos:e<0?o=n.neg:o=n.zero,o.replace("%s",t.symbol).replace("%v",hv(Math.abs(e),t))}function lo(){const{scriptConfig:e}=qe();function t(o,a={}){return hv(o,Object.assign({precision:e("currency.precision"),thousand:e("currency.thousands_separator"),decimal:e("currency.decimal_mark")},a))}function n(o,a=null){return a=a||e("currency"),bc(o,{symbol:a.symbol,precision:a.precision,thousand:a.thousands_separator,decimal:a.decimal_mark,format:a.symbol_first==!0?"%s%v":"%v%s"})}return{toFixed:gc,formatNumber:t,formatMoney:n}}const hX={__name:"BasePresentationChart",props:{chartData:null,amountValue:null,horizontal:null,axisYOffset:{type:Number,default:30},axisXOffset:{type:Number,default:30},onlyInteger:{type:Boolean,default:!0}},setup(e){const t=e;let n=null;const o=V(null),{formatMoney:a}=lo();function r(){n.update(t.chartData)}function s(){n&&n.detach()}return Se(()=>t.chartData,r),Xe(()=>{n=new FI(o.value,t.chartData,{horizontalBars:t.horizontal,fullWidth:!0,axisY:{offset:t.axisYOffset,onlyInteger:t.onlyInteger},axisX:{onlyInteger:t.onlyInteger,offset:t.axisXOffset},plugins:[DI({pointClass:"ct-bar",anchorToPoint:!1,appendToBody:!1,transformTooltipTextFnc:i=>t.amountValue?a(i):i})]},[["screen and (max-width: 1025px)",{axisX:{labelInterpolationFnc:function(i){return typeof i=="number"?i:i[0]}},axisY:{offset:20,labelInterpolationFnc:function(i){return typeof i=="number"?i:i[0]}}}]]),n.on("draw",i=>{if(i.type==="bar"){let u=i.series[i.index].color;u&&i.element.attr({style:`stroke: ${u} !important`})}})}),mn(s),(i,u)=>(g(),D("div",{ref_key:"chartRef",ref:o,class:"ct-chart"},null,512))}};function BI(e){return{labels:Fn(e,"label"),series:[Fn(e,t=>({meta:t.label,value:t.value,color:t.color}))]}}function NI(e){const t=e.series.length;if(t===0)return!1;let n=!1;for(let o=0;o<t&&!(e.series[o].length>0&&(n=e.series[o].some(a=>a.value>0),n));o++);return n}const gX={__name:"PresentationChart",props:{card:{required:!0,type:Object},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,n=Pt(t.card.value),o=P(()=>t.card.color||"chart-primary"),a=P(()=>BI(n.value)),r=P(()=>NI(a.value));return(s,i)=>{const u=c("IText");return g(),R(fd,{class:"has-[[data-slot=empty]]:h-52 md:h-52",card:e.card,"request-query-string":e.requestQueryString,onRetrieved:i[0]||(i[0]=d=>n.value=d.card.value)},gn({default:p(()=>[_("div",{class:be(["relative",o.value])},[r.value?(g(),R(hX,{key:0,class:"px-1","chart-data":a.value,"amount-value":e.card.amount_value,horizontal:e.card.horizontal,"only-integer":e.card.onlyInteger,"axis-y-offset":e.card.axisYOffset,"axis-x-offset":e.card.axisXOffset},null,8,["chart-data","amount-value","horizontal","only-integer","axis-y-offset","axis-x-offset"])):(g(),R(u,{key:1,"data-slot":"empty",class:"mt-10 text-center sm:mt-12",text:s.$t("core::app.not_enough_data")},null,8,["text"]))],2)]),_:2},[Ie(s.$slots,(d,m)=>({name:m,fn:p(f=>[Ee(s.$slots,m,zt(Qt(f)))])}))]),1032,["card","request-query-string"])}}},bX={__name:"BaseProgressionChart",props:["chartData","amountValue"],setup(e){const t=e;let n=null;const o=V(null),{formatMoney:a}=lo();function r(){n.update(t.chartData)}function s(){n&&n.detach()}return Se(()=>t.chartData,r),Xe(()=>{n=new EI(o.value,t.chartData,{lineSmooth:SI.none(),fullWidth:!0,showPoint:!0,showLine:!0,showArea:!0,chartPadding:{top:10,right:.5,bottom:.5,left:.5},low:0,axisX:{showGrid:!1,showLabel:!0,offset:0},axisY:{showGrid:!1,showLabel:!0,offset:0},plugins:[DI({pointClass:"ct-point",anchorToPoint:!1,appendToBody:!1,transformTooltipTextFnc:i=>t.amountValue?a(i):i})]})}),mn(s),(i,u)=>(g(),D("div",{ref_key:"chartRef",ref:o,class:"ct-chart"},null,512))}},yX={__name:"ProgressionChart",props:{card:{required:!0,type:Object},requestQueryString:{type:Object,default:()=>({})}},setup(e){const t=e,n=Pt(t.card.value),o=P(()=>t.card.color||"chart-primary"),a=P(()=>BI(n.value)),r=P(()=>NI(a.value));return(s,i)=>{const u=c("IText");return g(),R(fd,{class:"has-[[data-slot=empty]]:h-52 md:h-52",card:e.card,"request-query-string":e.requestQueryString,onRetrieved:i[0]||(i[0]=d=>n.value=d.card.value)},gn({default:p(()=>[_("div",{class:be(["relative",o.value])},[r.value?(g(),R(bX,{key:0,"chart-data":a.value,"amount-value":e.card.amount_value},null,8,["chart-data","amount-value"])):(g(),R(u,{key:1,"data-slot":"empty",class:"mt-10 text-center sm:mt-12",text:s.$t("core::app.not_enough_data")},null,8,["text"]))],2)]),_:2},[Ie(s.$slots,(d,m)=>({name:m,fn:p(f=>[Ee(s.$slots,m,zt(Qt(f)))])}))]),1032,["card","request-query-string"])}}},VI={__name:"BaseDatePicker",props:{isDate:{type:Boolean,required:!0},isDateTime:{type:Boolean,required:!0}},setup(e){const t=e,n=Xl({loader:()=>ws(()=>import("./index-C0jfeSND.js"),[]).then(u=>u.DatePicker),loadingComponent:ji}),{usesTwelveHourTime:o,userTimezone:a}=it(),{isDarkMode:r}=qe(),s=P(()=>{let u={};return t.isDate?u.modelValue="YYYY-MM-DD":t.isDateTime&&(u.modelValue="YYYY-MM-DD HH:mm:ss"),u}),i=P(()=>({masks:s.value,id:Uc().replace("_","-")}));return(u,d)=>(g(),R(v(n),{"title-position":"left",color:"primary",locale:i.value,is24hr:!v(o),"is-dark":v(r),timezone:v(a),"hide-time-header":!0,popover:{visibility:"focus",positionFixed:!0}},gn({_:2},[Ie(u.$slots,(m,f)=>({name:f,fn:p(h=>[Ee(u.$slots,f,zt(Qt(h)))])}))]),1032,["locale","is24hr","is-dark","timezone"]))}},_X={class:"relative rounded-lg shadow-sm"},wX={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},IX={__name:"DatePicker",props:{modelValue:String,withIcon:{default:!0,type:Boolean},id:String,name:String,placeholder:String,disabled:Boolean,required:Boolean,clearable:Boolean,minDate:[Date,String],minutesInterval:{type:Number,default:5},mode:{type:String,default:"date",validator:e=>["date","dateTime"].includes(e)}},emits:["update:modelValue","input"],setup(e,{emit:t}){const n=e,o=t,a=new Date,{DateTime:r,localizedDate:s,localizedDateTime:i,onDifferentDay:u}=it(),d=V(null),m=P(()=>n.mode.toLowerCase()==="datetime"),f=P(()=>n.mode.toLowerCase()==="date"),h=P(()=>{if(m.value)return n.minDate==="now"?{hours:function(C,{isValid:F,date:T}){return F?u(T,a)?!0:C>=a.getHours():!1},minutes:function(C,{isValid:F,date:T}){return!F||C%n.minutesInterval!==0?!1:u(T,a)?!0:C>a.getMinutes()||T.getHours()>a.getHours()}}:{minutes:{interval:n.minutesInterval}}}),y=P(()=>d.value?b(d.value):"");Se(d,C=>{if(Ut(C))return $();f.value?x(C):m.value?x(r.fromFormat(C,"yyyy-MM-dd HH:mm:ss").toUTC().toISO()):x(C)}),Se(()=>n.modelValue,C=>{w(C)||I(C)},{immediate:!0,deep:!0});function b(C){return f.value?s(r.fromFormat(C,"yyyy-MM-dd").toISODate()):m.value?i(r.fromFormat(C,"yyyy-MM-dd HH:mm:ss").toISO()):C}function I(C){m.value?d.value=r.fromISO(C).toFormat("yyyy-MM-dd HH:mm:ss"):(f.value,d.value=C)}function w(C){if(Ut(C)&&Ut(d.value)||C==d.value)return!0;if(!d.value&&C||!C&&d.value)return!1;if(m.value)return r.fromFormat(C,"yyyy-MM-dd HH:mm:ss",{zone:"utc"}).toLocal().toFormat("yyyy-MM-dd HH:mm:ss")===d.value;if(f.value)return C===d.value}function k(){d.value=null}function x(C){o("update:modelValue",C),o("input",C)}function $(){x(null)}return(C,F)=>{const T=c("Icon"),S=c("IFormInput"),A=c("IButton");return g(),R(VI,{modelValue:d.value,"onUpdate:modelValue":F[0]||(F[0]=E=>d.value=E),modelModifiers:{string:!0},mode:e.mode,"is-required":e.required,rules:h.value,"min-date":e.minDate==="now"?v(a):e.minDate,"is-date":f.value,"is-date-time":m.value},{default:p(E=>[Ee(C.$slots,"default",zt(Qt({...E,inputValue:y.value})),()=>[_("div",_X,[e.withIcon?(g(),D("div",wX,[l(T,{icon:"Calendar",class:"size-5 text-neutral-500 dark:text-neutral-300"})])):Z("",!0),l(S,Ue({id:e.id,autocomplete:"off",class:e.withIcon?"pl-10 sm:pl-11":"","model-value":y.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name,readonly:""},Kr(E.inputEvents)),null,16,["id","class","model-value","placeholder","disabled","name"]),e.clearable?te((g(),R(A,{key:1,class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:k},null,512)),[[fe,!!d.value]]):Z("",!0)])])]),_:3},8,["modelValue","mode","is-required","rules","min-date","is-date","is-date-time"])}}},xX={class:"flex flex-col items-center justify-start sm:flex-row"},kX={class:"relative w-full grow rounded-lg shadow-sm"},$X={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},CX={class:"m-2 shrink-0"},SX={class:"relative w-full grow rounded-lg shadow-sm"},TX={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},EX={__name:"DateRangePicker",props:{modelValue:Object,withIcon:{default:!0,type:Boolean},id:String,name:String,placeholder:String,disabled:Boolean,required:Boolean,clearable:Boolean,minutesInterval:{type:Number,default:5},rangeKeys:{type:Object,default:()=>({start:"start",end:"end"})},mode:{type:String,default:"date",validator:e=>["date","dateTime"].includes(e)}},emits:["update:modelValue","input"],setup(e,{emit:t}){const n=e,o=t,{DateTime:a,localizedDate:r,localizedDateTime:s}=it(),i=V(null),u=V([{minutes:{interval:n.minutesInterval}},{minutes:{interval:n.minutesInterval}}]),d=P(()=>n.mode.toLowerCase()==="datetime"),m=P(()=>n.mode.toLowerCase()==="date"),f=P(()=>({[n.rangeKeys.start]:b.value,[n.rangeKeys.end]:I.value})),h=P(()=>i.value[n.rangeKeys.start]),y=P(()=>i.value[n.rangeKeys.end]),b=P(()=>h.value?w(h.value):""),I=P(()=>y.value?w(y.value):"");Se(i,A=>{if(Ut(A))return S();if(m.value)T(A);else if(d.value){let E=A[n.rangeKeys.start],B=A[n.rangeKeys.end];T({[n.rangeKeys.start]:C(E).toUTC().toISO(),[n.rangeKeys.end]:C(B).toUTC().toISO()})}else T(A)}),Se(()=>n.modelValue,A=>{x(A)||k(A)},{immediate:!0,deep:!0});function w(A){return m.value?r(a.fromFormat(A,"yyyy-MM-dd").toISODate()):d.value?s(C(A).toISO()):A}function k(A){let E=A[n.rangeKeys.start],B=A[n.rangeKeys.end];m.value?i.value={[n.rangeKeys.start]:E,[n.rangeKeys.end]:B}:d.value?i.value={[n.rangeKeys.start]:a.fromISO(E).toFormat("yyyy-MM-dd HH:mm:ss"),[n.rangeKeys.end]:a.fromISO(B).toFormat("yyyy-MM-dd HH:mm:ss")}:i.value=A}function x(A){if(Ut(A)&&Ut(i.value)||A==i.value)return!0;if(!i.value&&A||!A&&i.value)return!1;if(d.value)return $(A[n.rangeKeys.start])===h.value&&$(A[n.rangeKeys.end])===y.value;if(m.value)return A[n.rangeKeys.start]===h.value&&A[n.rangeKeys.end]===y.value}function $(A){return a.fromFormat(A,"yyyy-MM-dd HH:mm:ss",{zone:"utc"}).toLocal().toFormat("yyyy-MM-dd HH:mm:ss")}function C(A){return a.fromFormat(A,"yyyy-MM-dd HH:mm:ss")}function F(){i.value[n.rangeKeys.start]=null,i.value[n.rangeKeys.end]=null}function T(A){o("update:modelValue",A),o("input",A)}function S(){T({[n.rangeKeys.start]:null,[n.rangeKeys.end]:null})}return(A,E)=>{const B=c("Icon"),M=c("IFormInput"),N=c("IButton");return g(),R(VI,{modelValue:i.value,"onUpdate:modelValue":E[0]||(E[0]=G=>i.value=G),modelModifiers:{string:!0,range:!0},mode:e.mode,"is-required":e.required,rules:u.value,"is-date":m.value,"is-date-time":d.value},{default:p(G=>[Ee(A.$slots,"default",zt(Qt({...G,inputValue:f.value})),()=>[_("div",xX,[_("div",kX,[e.withIcon?(g(),D("div",$X,[l(B,{icon:"Calendar",class:"size-5 text-neutral-500 dark:text-neutral-300"})])):Z("",!0),l(M,Ue({id:e.id+"-"+e.rangeKeys.start,autocomplete:"off",class:"pl-10 sm:pl-11","model-value":b.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name+"-"+e.rangeKeys.start,readonly:""},Kr(G.inputEvents[e.rangeKeys.start])),null,16,["id","model-value","placeholder","disabled","name"])]),_("span",CX,[l(B,{icon:"ArrowRight",class:"size-4 text-neutral-600"})]),_("div",SX,[e.withIcon?(g(),D("div",TX,[l(B,{icon:"Calendar",class:"size-5 text-neutral-400 dark:text-neutral-300"})])):Z("",!0),l(M,Ue({id:e.id+"-"+e.rangeKeys.end,autocomplete:"off",class:"pl-10 sm:pl-11","model-value":I.value,placeholder:e.placeholder,disabled:e.disabled,name:e.name+"-"+e.rangeKeys.end,readonly:""},Kr(G.inputEvents[e.rangeKeys.end])),null,16,["id","model-value","placeholder","disabled","name"]),e.clearable?te((g(),R(N,{key:1,class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:F},null,512)),[[fe,!!h.value&&!!y.value]]):Z("",!0)])])])]),_:3},8,["modelValue","mode","is-required","rules","is-date","is-date-time"])}}};var FX=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],AX=function(e){return FX.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},RX=function(e,t,n){Object.keys(t).filter(AX).forEach(function(o){var a=t[o];typeof a=="function"&&(o==="onInit"?a(e,n):n.on(o.substring(2),function(r){return a(r,n)}))})},DX=function(e,t,n,o){var a=e.modelEvents?e.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;Se(o,function(s,i){n&&typeof s=="string"&&s!==i&&s!==n.getContent({format:e.outputFormat})&&n.setContent(s)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},OX=function(e,t,n,o,a,r){o.setContent(r()),n.attrs["onUpdate:modelValue"]&&DX(t,n,o,a),RX(e,n.attrs,o)},zb=0,LI=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return zb++,e+"_"+n+zb+String(t)},PX=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Hb=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},MX=function(e,t){return Hb(e).concat(Hb(t))},BX=function(e){return e==null},Wb=function(){return{listeners:[],scriptId:LI("tiny-script"),scriptLoaded:!1}},NX=function(){var e=Wb(),t=function(a,r,s,i){var u=r.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=a,u.src=s;var d=function(){u.removeEventListener("load",d),i()};u.addEventListener("load",d),r.head&&r.head.appendChild(u)},n=function(a,r,s){e.scriptLoaded?s():(e.listeners.push(s),a.getElementById(e.scriptId)||t(e.scriptId,a,r,function(){e.listeners.forEach(function(i){return i()}),e.scriptLoaded=!0}))},o=function(){e=Wb()};return{load:n,reinitialize:o}},VX=NX(),LX=function(){return typeof window<"u"?window:global},Rr=function(){var e=LX();return e&&e.tinymce?e.tinymce:null},qX={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},ma=function(){return ma=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ma.apply(this,arguments)},UX=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},jX=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},Om={selector:void 0,target:void 0},qI=Ve({props:qX,setup:function(e,t){var n=e.init?ma(ma({},e.init),Om):ma({},Om),o=ny(e),a=o.disabled,r=o.modelValue,s=o.tagName,i=V(null),u=null,d=e.id||LI("tiny-vue"),m=e.init&&e.init.inline||e.inline,f=!!t.attrs["onUpdate:modelValue"],h=!0,y=e.initialValue?e.initialValue:"",b="",I=function(x){return f?function(){return r!=null&&r.value?r.value:""}:function(){return x?y:b}},w=function(){var x=I(h),$=ma(ma({},n),{readonly:e.disabled,target:i.value,plugins:MX(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:m,setup:function(C){u=C,C.on("init",function(F){return OX(F,e,t,C,r,x)}),typeof n.setup=="function"&&n.setup(C)}});PX(i.value)&&(i.value.style.visibility=""),Rr().init($),h=!1};Se(a,function(x){var $;u!==null&&(typeof(($=u.mode)===null||$===void 0?void 0:$.set)=="function"?u.mode.set(x?"readonly":"design"):u.setMode(x?"readonly":"design"))}),Se(s,function(x){var $;f||(b=u.getContent()),($=Rr())===null||$===void 0||$.remove(u),We(function(){return w()})}),Xe(function(){if(Rr()!==null)w();else if(i.value&&i.value.ownerDocument){var x=e.cloudChannel?e.cloudChannel:"7",$=e.apiKey?e.apiKey:"no-api-key",C=BX(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat($,"/tinymce/").concat(x,"/tinymce.min.js"):e.tinymceScriptSrc;VX.load(i.value.ownerDocument,C,w)}}),mn(function(){Rr()!==null&&Rr().remove(u)}),m||(lp(function(){h||w()}),sp(function(){var x;f||(b=u.getContent()),(x=Rr())===null||x===void 0||x.remove(u)}));var k=function(x){var $;b=u.getContent(),($=Rr())===null||$===void 0||$.remove(u),n=ma(ma(ma({},n),x),Om),We(function(){return w()})};return t.expose({rerender:k,getEditor:function(){return u}}),function(){return m?UX(Ae,d,i,e.tagName):jX(Ae,d,i)}}});function zX(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var UI=zX;function HX(e,t,n){var o=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(a);++o<a;)r[o]=e[o+t];return r}var WX=HX,GX=Ci,KX=WX;function ZX(e,t){return t.length<2?e:GX(e,KX(t,0,-1))}var YX=ZX,XX=os,QX=UI,JX=YX,eQ=as;function tQ(e,t){return t=XX(t,e),e=JX(e,t),e==null||delete e[eQ(QX(t))]}var nQ=tQ,oQ=Rw;function aQ(e){return oQ(e)?void 0:e}var rQ=aQ,lQ=sd;function sQ(e){var t=e==null?0:e.length;return t?lQ(e,1):[]}var jI=sQ;const iQ=Rt(jI);var uQ=jI,cQ=Sw,dQ=Tw;function mQ(e){return dQ(cQ(e,void 0,uQ),e+"")}var zI=mQ,fQ=ns,pQ=Iw,vQ=nQ,hQ=os,gQ=gs,bQ=rQ,yQ=zI,_Q=ev,wQ=1,IQ=2,xQ=4,kQ=yQ(function(e,t){var n={};if(e==null)return n;var o=!1;t=fQ(t,function(r){return r=hQ(r,e),o||(o=r.length>1),r}),gQ(e,_Q(e),n),o&&(n=pQ(n,wQ|IQ|xQ,bQ));for(var a=t.length;a--;)vQ(n,t[a]);return n}),$Q=kQ;const pr=Rt($Q);var CQ="Expected a function";function SQ(e){if(typeof e!="function")throw new TypeError(CQ);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var TQ=SQ,EQ=Yp,FQ=Yw,AQ=ua,RQ=$n,DQ=TQ;function OQ(e,t){var n=RQ(e)?EQ:FQ;return n(e,DQ(AQ(t)))}var PQ=OQ;const HI=Rt(PQ),Gb=["ar","ar_SA","az","be","bg_BG","bn_BD","ca","cs","cy","da","de","el","eo","es","es_MX","et","eu","fa","fi","fr_FR","ga","gl","he_IL","hr","hu_HU","hy","id","is_IS","it","ja","ka_GE","kab","kk","ko_KR","ku","lt","lv","nb_NO","ne","nl","nl_BE","oc","pl","pt_BR","pt_PT","ro","ru","sk","sl_SI","sq","sr","sv_SE","ta","tg","th_TH","tr","ug","uk","uz","vi","zh_CN","zh_HK","zh_MO","zh_SG","zh_TW"];function WI(e){if(Gb.includes(e))return e;const t=e.split("_")[0];return Gb.includes(t)?t:"en"}const MQ=Object.assign({inheritAttrs:!1},{__name:"Editor",props:pt({id:String,minimal:Boolean,absoluteUrls:{type:Boolean,default:!1},placeholder:{type:String,default:""},defaultTag:{type:String,default:"p"},withImage:{type:Boolean,default:!0},withMention:Boolean,autoCompleter:[Array,Object],config:Object},{modelValue:{default:""},modelModifiers:{}}),emits:pt(["init","setup"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const o=e,a=n,r=Ht(e,"modelValue"),{t:s}=Pe(),{scriptConfig:i,users:u,currentUser:d,isDarkMode:m,locale:f}=qe(),h=V(null),y=So(),b=V(!1);let I=null;Se(()=>[m.value],()=>{h.value.rerender(x.value)}),Se(()=>o.autoCompleter,A=>{A&&h.value.rerender(x.value)}),Se(r,A=>{A===null&&(r.value="")});const w={default:{toolbar:`
      blocks |
      bold italic underline strikethrough |
      forecolor backcolor |
      link image |
      alignment | bullist numlist | removeformat`,quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},minimal:{toolbar:"emoticons removeformat | undo redo",toolbar_location:"bottom",quickbars_insert_toolbar:"blocks | bullist numlist | image",quickbars_selection_toolbar:"bold italic underline strikethrough | forecolor backcolor | alignleft aligncenter alignright | quicklink | blocks"}},k=P(()=>({cache_suffix:"?v="+i("version"),license_key:"gpl",branding:!1,promotion:!1,highlight_on_focus:!1,width:"100%",height:150,min_height:150,menubar:!1,contextmenu:!1,statusbar:!1,forced_root_block:o.defaultTag,images_upload_handler:T,language:WI(f.value),automatic_uploads:!0,images_reuse_filename:!0,paste_data_images:o.withImage,relative_urls:!o.absoluteUrls,convert_urls:!1,remove_script_host:!1,placeholder:o.placeholder,format_noneditable_selector:".not-used",link_context_toolbar:!0,toolbar_groups:{alignment:{icon:"align-left",tooltip:tinymce.util.I18n.translate("Alignment"),items:"alignleft aligncenter alignright | alignjustify"}},body_class:m.value?"dark":"",plugins:["quickbars","lists","autolink","link","autoresize","emoticons"],quickbars_image_toolbar:"image | alignleft aligncenter alignright | remove",content_style:`
    .mce-content-body.dark {background: #0f172a;}
    .mce-content-body.dark[data-mce-placeholder]:not(.mce-visualblocks)::before {
      color: #64748b;
    }

    .mention {
      color: #212529;
      background-color: #f4f5f7;
      height: 24px;
      width: 65px;
      border-radius: 6px;
      padding: 3px 3px;
      margin-right: 2px;
      -webkit-user-select: all;
      -moz-user-select: all;
      -ms-user-select: all;
      user-select: all;
    }
    `,block_formats:`${tinymce.util.I18n.translate("Paragraph")}=p; ${tinymce.util.I18n.translate("Heading 1")}=h1; ${tinymce.util.I18n.translate("Heading 2")}=h2; ${tinymce.util.I18n.translate("Heading 3")}=h3;  ${tinymce.util.I18n.translate("Heading 4")}=h4`,setup:A=>{a("setup",A),A.concordCommands={},o.withMention&&F(A),o.autoCompleter&&C(o.autoCompleter,A),A.on("init",E=>{I=E.target,a("init")})}})),x=P(()=>{const A=o.config||{};let E={...k.value,...w[o.minimal?"minimal":"default"]};o.withImage&&E.plugins.push("image");const B=A.content_style||"";return B&&(E.content_style+=B),{...Object.assign({},E,pr(A,["setup","content_style"])||{}),...m.value?{skin:"oxide-dark",content_css:"dark"}:{}}}),$=P(()=>HI(Fn(u.value,A=>({id:A.id,name:A.name})),A=>A.id==d.value.id));function C(A,E){let B=Vn(A);B.length&&B.forEach(M=>{Object.keys(M).length>0&&E.ui.registry.addAutocompleter(M.id,{trigger:M.trigger,minChars:M.minChars||0,columns:1,fetch:function(N){return new Promise(G=>G(M.list))},onAction:function(N,G,U){E.selection.setRng(G||0),E.insertContent(`${U} `),N.hide()}})})}function F(A){A.concordCommands.insertMentionUser=function(E,B,M){A.selection.setRng(M||0),A.insertContent(`<span class="mention"
                        data-mention-id="${E}"
                        contenteditable="false"
                        data-notified="false"><span data-mention-char>@</span><span data-mention-value>${B}</span>
                        </span> `)},A.ui.registry.addAutocompleter("mentions",{trigger:"@",minChars:0,columns:1,fetch:function(E){return new Promise(B=>B(Fn($.value,M=>({value:M.id.toString(),text:M.name}))))},onAction:function(E,B,M){let N=ft($.value,["id",parseInt(M)]);A.concordCommands.insertMentionUser(M,N.name,B),E.hide()}})}function T(A,E){const B=A.blob();return new Promise((M,N)=>{if(!/^image\//.test(B.type)){N({message:s("validation.image",{attribute:B.name}),remove:!0});return}const G=new FormData;G.append("file",B,A.filename()),Innoclapps.request().post(`/media/pending/${y}`,G).then(({data:U})=>M(o.absoluteUrls?U.preview_url:U.preview_path)).catch(U=>{let j=U.message&&U.message.includes("413")?s("core::app.file_too_large"):U.response.data.message;N({message:j,remove:!0})})})}function S(){I.focus()}return Xe(()=>{setTimeout(()=>{b.value=!0},250)}),t({focus:S}),(A,E)=>{const B=c("ISpinner");return g(),D("div",{class:be(e.minimal?"tox-minimal":"")},[b.value?(g(),R(v(qI),Ue({key:0,id:e.id,ref_key:"tinymceRef",ref:h,modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=M=>r.value=M)},A.$attrs,{init:x.value}),null,16,["id","modelValue","init"])):(g(),R(B,{key:1,class:"size-5 text-primary-500"}))],2)}}}),BQ={},NQ={class:"prose prose-base prose-neutral max-w-none leading-6 dark:prose-invert sm:prose-sm prose-headings:my-3 prose-headings:font-semibold first:prose-p:mt-0 last:prose-p:mb-0 prose-a:text-primary-600 hover:prose-a:text-primary-900"};function VQ(e,t){return g(),D("div",NQ,[Ee(e.$slots,"default")])}const LQ=an(BQ,[["render",VQ]]),qQ={class:"relative rounded-lg text-neutral-400 focus-within:text-neutral-700 dark:focus-within:text-neutral-200"},UQ={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},jQ=Object.assign({inheritAttrs:!1},{__name:"InputSearch",props:pt({placeholder:String},{modelValue:{},modelModifiers:{}}),emits:pt(["click"],["update:modelValue"]),setup(e){const t=Ht(e,"modelValue");return(n,o)=>{const a=c("Icon"),r=c("IFormInput");return g(),D("div",qQ,[_("div",UQ,[l(a,{icon:"MagnifyingGlassSolid",class:"size-5"})]),l(r,Ue(n.$attrs,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),class:"!pl-11",type:"search",placeholder:e.placeholder||n.$t("core::app.search"),debounce:"",onClick:o[1]||(o[1]=s=>n.$emit("click",s))}),null,16,["modelValue","placeholder"])])}}}),zQ=Object.assign({inheritAttrs:!1},{__name:"MainLayout",props:{overlay:Boolean,noPadding:Boolean,scrollable:{type:Boolean,default:!0}},setup(e){return(t,n)=>{const o=c("IOverlay");return g(),D(de,null,[(g(),R(To,{to:"#navbar-actions"},[Ee(t.$slots,"actions")])),_("main",Ue({id:"main",class:["relative flex-1 focus:outline-none",e.scrollable?"overflow-y-auto":""]},t.$attrs),[_("div",{class:be({"py-8 sm:py-6":!e.noPadding})},[_("div",{class:be(["mx-auto",{"px-4 sm:px-6 lg:px-8":!e.noPadding}])},[_("div",{class:be({"sm:py-4":!e.noPadding})},[l(o,{show:e.overlay},{default:p(()=>[t.$slots.actions?(g(),D("div",{key:0,class:be(["mb-4 flex justify-end lg:hidden",{"px-4 pt-10 sm:px-6 lg:px-8":e.noPadding}])},[Ee(t.$slots,"actions")],2)):Z("",!0),Ee(t.$slots,"default")]),_:3},8,["show"])],2)],2)],2)],16)],64)}}}),HQ={},WQ={class:"inline-flex items-center space-x-2 lg:space-x-3.5"};function GQ(e,t){return g(),D("div",WQ,[Ee(e.$slots,"default")])}const KQ=an(HQ,[["render",GQ]]),ZQ={},YQ={class:"mx-3 h-[--navbar-height] border-l border-neutral-200 dark:border-neutral-500/30 lg:mx-5"};function XQ(e,t){return g(),D("span",YQ)}const QQ=an(ZQ,[["render",XQ]]);var gv={exports:{}};function yc(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame(function(){var n=t.__resizeTrigger__,o=n&&n.__resizeListeners__;o&&o.forEach(function(a){a.call(n,e)})})}var Kb=function(t,n){var o=this,a=o.document,r,s=a.attachEvent;typeof navigator<"u"&&(r=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function i(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",yc)}if(!t.__resizeListeners__)if(t.__resizeListeners__=[],s)t.__resizeTrigger__=t,t.attachEvent("onresize",yc);else{getComputedStyle(t).position==="static"&&(t.style.position="relative");var u=t.__resizeTrigger__=a.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=t,u.onload=i,u.type="text/html",r&&t.appendChild(u),u.data="about:blank",r||t.appendChild(u)}t.__resizeListeners__.push(n)};gv.exports=typeof window>"u"?Kb:Kb.bind(window);var JQ=gv.exports.unbind=function(e,t){var n=document.attachEvent,o=e.__resizeListeners__||[];if(t){var a=o.indexOf(t);a!==-1&&o.splice(a,1)}else o=e.__resizeListeners__=[];if(!o.length){if(n)e.detachEvent("onresize",yc);else if(e.__resizeTrigger__){var r=e.__resizeTrigger__.contentDocument,s=r&&r.defaultView;s&&(s.removeEventListener("resize",yc),delete s.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}},eJ=gv.exports;const tJ=Rt(eJ),nJ={class:"px-5 py-4"},oJ={__name:"Panel",props:{panel:{type:Object,required:!0},disableResize:Boolean},setup(e){const t=e,{gate:n}=bs(),{scriptConfig:o}=qe(),a=V(null),r=P(()=>`${t.panel.id}_panel_height`),s=P(()=>"_runtime_"+r.value),i=V(o(s.value)||t.panel.height),u=P(()=>t.panel.resizeable&&!t.disableResize&&n.isSuperAdmin()),d=xa(async function(){if(t.disableResize||!u.value)return;let y=`${a.value.offsetHeight}px`;await Innoclapps.request().post("/settings",{[r.value]:y}),o(s.value,y),i.value=y},500);function m(){tJ(a.value,d)}function f(){t.panel.resizeable&&JQ(a.value)}function h(){t.panel.resizeable&&We(m)}return Xe(h),mn(f),(y,b)=>{const I=c("ICard");return g(),R(I,null,{default:p(()=>[_("div",{ref_key:"wrapperRef",ref:a,class:be([u.value?"resize-y overflow-y-auto scrollbar-thin":""]),style:Nt({height:e.disableResize?void 0:i.value})},[_("div",nJ,[Ee(y.$slots,"default")])],6)]),_:3})}}},aJ={class:"relative"},rJ={class:"mb-4"},lJ={class:"flex items-center rounded-lg border border-neutral-200 bg-white px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-900"},sJ={class:"grow"},iJ={"data-sortable-handle":"panels",class:"cursor-move"},uJ={class:"mt-3 flex items-center justify-end space-x-1.5"},cJ=Object.assign({inheritAttrs:!1},{__name:"Panels",props:{panels:{type:Array,required:!0},identifier:{type:String,required:!0}},emits:["update:panels"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>n.panels.filter(d=>d.enabled===!0)),r=V({});n.panels.forEach(d=>{r.value[d.id]=d.enabled});const s=V(!1),i=V(!1);async function u(){s.value=!0,await Innoclapps.request().post("/settings",{[n.identifier+"_panels"]:n.panels.map((m,f)=>({id:m.id,order:f+1,enabled:r.value[m.id]}))}),i.value=!1,s.value=!1;const d=n.panels.map((m,f)=>Object.assign({},m,{order:f+1,enabled:r.value[m.id]}));o("update:panels",d)}return(d,m)=>{const f=c("ITextDisplay"),h=c("IText"),y=c("IFormCheckbox"),b=c("IFormCheckboxLabel"),I=c("IFormCheckboxField"),w=c("Icon"),k=c("SortableDraggable"),x=c("IButton"),$=c("IDropdownButton"),C=c("IDropdownItem"),F=c("IDropdownMenu"),T=c("IDropdown");return g(),D("div",aJ,[i.value?(g(),D(de,{key:0},[_("div",rJ,[l(f,{text:d.$t("core::app.record_view.sections.edit_heading")},null,8,["text"]),l(h,{text:d.$t("core::app.record_view.sections.edit_subheading")},null,8,["text"])]),l(k,Ue({"item-key":"id",class:"space-y-2",handle:"[data-sortable-handle='panels']","model-value":e.panels},d.$draggable.common,{"onUpdate:modelValue":m[0]||(m[0]=S=>d.$emit("update:panels",S))}),{item:p(({element:S})=>[_("div",lJ,[_("div",sJ,[l(I,null,{default:p(()=>[l(y,{checked:r.value[S.id],"onUpdate:checked":A=>r.value[S.id]=A},null,8,["checked","onUpdate:checked"]),l(b,{text:S.heading||S.id},null,8,["text"])]),_:2},1024)]),_("div",iJ,[l(w,{icon:"Selector",class:"size-5 text-neutral-500"})])])]),_:1},16,["model-value"]),_("div",uJ,[l(x,{text:d.$t("core::app.cancel"),basic:"",onClick:m[1]||(m[1]=S=>i.value=!1)},null,8,["text"]),l(x,{variant:"primary",disabled:s.value,loading:s.value,text:d.$t("core::app.save"),soft:"",onClick:u},null,8,["disabled","loading","text"])])],64)):Z("",!0),te(_("div",null,[(g(!0),D(de,null,Ie(a.value,S=>Ee(d.$slots,"default",{key:S.id,panel:S},()=>[(g(),R(_t(S.component),Ue({ref_for:!0},d.$attrs,{panel:S}),null,16,["panel"]))])),128))],512),[[fe,!i.value]]),m[2]||(He(-1),(m[2]=d.$gate.isSuperAdmin()?(g(),R(T,{key:1,placement:"bottom-start"},{default:p(()=>[te(l($,{as:"button",class:"absolute -top-7 left-2 rotate-90 p-1 text-neutral-500 dark:text-neutral-300 lg:-left-7 lg:top-1.5 lg:rotate-0","no-caret":""},{default:p(()=>[l(w,{icon:"EllipsisVerticalSolid",class:"size-4"})]),_:1},512),[[fe,!i.value]]),l(F,null,{default:p(()=>[l(C,{text:d.$t("core::app.record_view.manage_sidebar"),onClick:S=>i.value=!0},null,8,["text","onClick"])]),_:1})]),_:1})):Z("",!0)).cacheIndex=2,He(1),m[2])])}}}),dJ={class:"mb-6 flex items-center justify-between"},mJ={class:"-my-1.5 flex items-center space-x-1"},fJ=Object.assign({inheritAttrs:!1},{__name:"ResourceDetailsPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},panel:{required:!0,type:Object}},setup(e){const t=e,n=V(!0),{fields:o,hasFields:a,setResource:r,totalCollapsable:s,getDetailFields:i}=In(),{floatResourceInEditMode:u}=Ro();return i(t.resourceName,t.resource.id).then(d=>{o.value=d,r(xt(t,"resource"))}),(d,m)=>{const f=c("ITextDisplay"),h=c("IButton"),y=c("FieldsButtonCollapse"),b=c("DetailFields"),I=c("Panel"),w=ze("i-tooltip");return g(),R(I,{panel:e.panel,"disable-resize":!n.value,overlay:!v(a)},{default:p(()=>[_("div",dJ,[te(l(f,{text:d.$t("core::app.record_view.sections.details")},null,8,["text"]),[[fe,v(a)]]),te(_("div",mJ,[e.resource.authorizations.update?te((g(),R(h,{key:0,icon:"PencilSquareSolid",basic:"",small:"",onClick:m[0]||(m[0]=k=>v(u)({resourceName:e.resourceName,resourceId:e.resourceId}))},null,512)),[[w,d.$t("core::app.edit")]]):Z("",!0),d.$gate.isSuperAdmin()?te((g(),R(h,{key:1,icon:"AdjustmentsVerticalSolid",to:{name:"resource-fields",params:{resourceName:e.resourceName},query:{view:d.$scriptConfig("fields.views.detail")}},basic:"",small:""},null,8,["to"])),[[w,d.$t("core::fields.manage")]]):Z("",!0),v(s)>0?(g(),R(y,{key:2,collapsed:n.value,"onUpdate:collapsed":m[1]||(m[1]=k=>n.value=k),total:v(s)},null,8,["collapsed","total"])):Z("",!0)],512),[[fe,v(a)]])]),v(a)?(g(),R(b,Ue({key:0},d.$attrs,{collapsed:n.value,fields:v(o),"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource}),null,16,["collapsed","fields","resource-name","resource-id","resource"])):Z("",!0)]),_:1},8,["panel","disable-resize","overlay"])}}});function Ua(e){const t=fn();function n(E,B){t.commit(`queryBuilder/${E}`,{identifier:bt(e),...B})}const o=P(()=>r.value.some(E=>E.quick)),a=P({set(E){n("SET_AVAILABLE_RULES",{rules:E})},get(){return t.state.queryBuilder.availableRules[bt(e)]||[]}}),r=P({set(E){n("SET_BUILDER_RULES",{rules:E})},get(){return t.state.queryBuilder.queryBuilderRules[bt(e)]||[]}}),s=P(()=>(r.value||[]).some(E=>E.children&&E.children.length>0)),i=P(()=>uI(r.value,a.value)),u=P(()=>i.value.length),d=P(()=>u.value>0),m=P(()=>{if(!d.value)return!0;const E=i.value.filter(B=>!Ut(B)).length;return u.value===E}),f=P(()=>a.value?a.value.length>0:!1),h=P(()=>!!C(E=>E.disabled===!0)),y=P(()=>a.value.filter(E=>E.hasAuthorization)),b=P(()=>y.value.some(E=>C(E.id))),I=P(()=>y.value.filter(E=>!!C(E.id)).map(E=>E.label));function w(E){let B=r.value.length;return n("ADD_GROUP",{group:E}),B}function k(E,B,M,N=null){n("UPDATE_GROUP_RULE",{ruleId:E,groupIndex:M,childGroupIndex:N,rule:{value:B}})}function x(E,B){n("REMOVE_GROUP",{index:E,childIndex:B})}function $(E,B=0,M=null){n("REMOVE_GROUP_RULE",{ruleId:E,groupIndex:B,childGroupIndex:M})}function C(E){let B;return r.value.every(M=>(B=GI(M.children||[],E),!B)),B}function F(E,B,M=null){n("ADD_GROUP_RULE",{rule:E,groupIndex:B,childGroupIndex:M})}function T(E,B=0,M=null){var G;if(!r.value[B])return null;let N=r.value[B].children;return Zt(M)||(N=((G=N[M])==null?void 0:G.query.children)||[]),N.find(U=>U.query.rule==E)}function S(){n("RESET_BUILDER_RULES")}const A=P(()=>r.value.length);return Se(A,E=>{if(E===0)S();else if(E===1&&o.value){const B=r.value[0];S(),w(B)}},{immediate:!0}),{availableRules:a,queryBuilderRules:r,hasAnyBuilderRules:s,rulesWithAuthorization:y,hasRules:f,hasRulesAppliedWithAuthorization:b,rulesLabelsWithAuthorization:I,hasRulesApplied:d,hasDisabledRules:h,rulesAreValid:m,totalValidRules:u,addGroupRule:F,findRule:C,updateRuleValue:k,removeGroupRule:$,removeGroup:x,findGroupRule:T,resetQueryBuilderRules:S,addGroup:w,createRule:lI,createGroup:iv}}function pJ(e){return P(()=>({"bg-white dark:bg-neutral-900":bt(e)===1,"bg-neutral-50/60 dark:bg-neutral-500/10":bt(e)===2}))}function vJ(){const{t:e}=Pe();return{labels:{operatorLabels:{is:e("core::filters.operators.is"),equal:e("core::filters.operators.equal"),not_equal:e("core::filters.operators.not_equal"),in:e("core::filters.operators.in"),not_in:e("core::filters.operators.not_in"),less:e("core::filters.operators.less"),less_or_equal:e("core::filters.operators.less_or_equal"),greater:e("core::filters.operators.greater"),greater_or_equal:e("core::filters.operators.greater_or_equal"),between:e("core::filters.operators.between"),not_between:e("core::filters.operators.not_between"),begins_with:e("core::filters.operators.begins_with"),not_begins_with:e("core::filters.operators.not_begins_with"),contains:e("core::filters.operators.contains"),not_contains:e("core::filters.operators.not_contains"),ends_with:e("core::filters.operators.ends_with"),not_ends_with:e("core::filters.operators.not_ends_with"),is_null:e("core::filters.operators.is_null"),is_not_null:e("core::filters.operators.is_not_null"),is_empty:e("core::filters.operators.is_empty"),is_not_empty:e("core::filters.operators.is_not_empty")},matchType:e("core::filters.match_type"),matchTypeAll:e("core::filters.match_type_all"),matchTypeAny:e("core::filters.match_type_any"),addCondition:e("core::filters.add_condition"),addAnotherCondition:e("core::filters.add_another_condition"),addGroup:e("core::filters.add_group"),selectRule:e("core::filters.select_rule")}}}const GI=(e,t)=>{let n;return e.every(o=>(Object.hasOwn(o.query,"children")&&o.query.children?n=GI(o.query.children,t):(typeof t=="function"&&t(o)===!0||t==o.query.rule)&&(n=o),!n)),n},hJ={class:"inline-flex items-center space-x-2"},gJ={key:1},bJ={class:"grid grid-cols-3 gap-x-4 gap-y-2"},yJ={class:"mt-5 rounded-lg border border-neutral-200 bg-neutral-50 p-3 dark:border-neutral-500 dark:bg-neutral-700"},_J={__name:"ResourceExport",props:{resourceName:String,urlPath:String,modalId:{default:"export-modal",type:String}},setup(e){const t=e,{t:n}=Pe(),{UTCDateTimeInstance:o}=it(),a=Innoclapps.resource(t.resourceName),r=P(()=>t.urlPath?t.urlPath:`/${t.resourceName}/export`),{form:s}=Qe({period:"last_7_days",type:"csv",fields:[],customPeriod:{start:o.startOf("month").toISODate(),end:o.toISODate()}}),i=V([]),u=V(null),d=V(!1),m=P(()=>i.value.length>0),f=P(()=>i.value.filter(A=>A.dateable===!0)),h=[{text:n("core::dates.today"),value:"today"},{text:n("core::dates.periods.7_days"),value:"last_7_days"},{text:n("core::dates.this_month"),value:"this_month"},{text:n("core::dates.last_month"),value:"last_month"},{text:n("core::app.all"),value:"all",id:"all"},{text:n("core::dates.custom"),value:"custom",id:"custom"}],{queryBuilderRules:y,hasRulesApplied:b,rulesAreValid:I}=Ua(t.resourceName),w=V(!0),k=V(!1),x=P(()=>s.period==="custom"),$=P(()=>b.value&&I.value);function C(A){return A.headers["content-disposition"].split("filename=")[1]}async function F(){m.value||(i.value=await T())}async function T(){const{data:A}=await Innoclapps.request(`${t.resourceName}/export-fields`);return A}function S(){var A;k.value=!0,Innoclapps.request().post(r.value,{fields:d.value?s.fields:null,date_range_field:s.period!=="all"?(A=u.value)==null?void 0:A.attribute:null,period:x.value?s.customPeriod:s.period==="all"?null:s.period,type:s.type,filters:w.value&&$.value?y.value:null},{responseType:"blob"}).then(E=>{zl(E.data,C(E))}).finally(()=>k.value=!1)}return qa(d,async()=>{await F(),s.fields.length===0&&i.value.forEach(A=>{s.fields.push(A.attribute)})}),(A,E)=>{const B=c("IFormSelect"),M=c("IFormGroup"),N=c("IFormLabel"),G=c("IDropdownButton"),U=c("ISpinner"),j=c("IDropdownItem"),O=c("IDropdownMenu"),H=c("IDropdown"),W=c("IFormRadio"),X=c("IFormRadioLabel"),q=c("IFormRadioField"),L=c("DateRangePicker"),ee=c("IFormCheckbox"),ce=c("IFormCheckboxLabel"),ue=c("IFormCheckboxField"),oe=c("IModal");return g(),R(oe,{id:e.modalId,title:A.$t("core::resource.export",{resource:v(a).label}),"ok-loading":k.value,"ok-disabled":k.value,"ok-text":A.$t("core::app.export.export"),onOk:S},{default:p(()=>[l(M,{label:A.$t("core::app.export.type")},{default:p(()=>[l(B,{modelValue:v(s).type,"onUpdate:modelValue":E[0]||(E[0]=re=>v(s).type=re)},{default:p(()=>E[6]||(E[6]=[_("option",{value:"csv"},"CSV",-1),_("option",{value:"xls"},"XLS",-1),_("option",{value:"xlsx"},"XLSX",-1)])),_:1},8,["modelValue"])]),_:1},8,["label"]),l(M,{class:"space-y-1"},{label:p(()=>[_("div",hJ,[l(N,{as:"p",label:A.$t("core::dates.range")},null,8,["label"]),v(s).period!=="all"?(g(),R(H,{key:0,onShow:F},{default:p(()=>[l(G,{class:"mt-0.5",text:u.value?u.value.label:A.$t("core::app.created_at"),basic:""},null,8,["text"]),l(O,null,{default:p(()=>[f.value.length?Z("",!0):(g(),R(U,{key:0,class:"h-5 w-5 text-neutral-400"})),(g(!0),D(de,null,Ie(f.value,re=>(g(),R(j,{key:re.attribute,text:re.label,active:u.value&&u.value.attribute===re.attribute||!u.value&&re.attribute==="created_at",onClick:Y=>u.value=re},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):Z("",!0)])]),default:p(()=>[(g(),D(de,null,Ie(h,re=>l(q,{key:re.text},{default:p(()=>[l(W,{modelValue:v(s).period,"onUpdate:modelValue":Y=>v(s).period=Y,name:"period",value:re.value},null,8,["modelValue","onUpdate:modelValue","value"]),l(X,{text:re.text},null,8,["text"])]),_:2},1024)),64))]),_:1}),x.value?(g(),R(M,{key:0,class:"sm:ml-6"},{default:p(()=>[l(N,{for:"custom-period-start",class:"mb-1",label:A.$t("core::app.export.select_range")},null,8,["label"]),l(L,{id:"custom-period",modelValue:v(s).customPeriod,"onUpdate:modelValue":E[1]||(E[1]=re=>v(s).customPeriod=re),name:"custom-period"},null,8,["modelValue"])]),_:1})):Z("",!0),l(M,{class:"mt-6"},{default:p(()=>[l(q,null,{default:p(()=>[l(W,{modelValue:d.value,"onUpdate:modelValue":E[2]||(E[2]=re=>d.value=re),name:"select_fields",value:!1},null,8,["modelValue"]),l(X,{text:A.$t("core::fields.all")},null,8,["text"])]),_:1}),l(q,null,{default:p(()=>[l(W,{modelValue:d.value,"onUpdate:modelValue":E[3]||(E[3]=re=>d.value=re),name:"select_fields",value:!0},null,8,["modelValue"]),l(X,{text:A.$t("core::fields.select")},null,8,["text"])]),_:1})]),_:1}),d.value?(g(),D("div",gJ,[_("div",bJ,[(g(!0),D(de,null,Ie(i.value,re=>(g(),D("div",{key:re.attribute,class:"flex items-center rounded-md border border-neutral-200 px-3 py-1 dark:border-neutral-500/30"},[l(ue,null,{default:p(()=>[l(ee,{checked:v(s).fields,"onUpdate:checked":E[4]||(E[4]=Y=>v(s).fields=Y),value:re.attribute,disabled:re.primary},null,8,["checked","value","disabled"]),l(ce,{class:"max-w-full truncate",text:re.label},null,8,["text"])]),_:2},1024)]))),128))])])):Z("",!0),te(_("div",yJ,[l(ue,null,{default:p(()=>[l(ee,{checked:w.value,"onUpdate:checked":E[5]||(E[5]=re=>w.value=re)},null,8,["checked"]),l(ce,{text:A.$t("core::app.export.apply_filters")},null,8,["text"])]),_:1})],512),[[fe,$.value]])]),_:1},8,["id","title","ok-loading","ok-disabled","ok-text"])}}},Oo="vel",Go=Ve({name:"SvgIcon",props:{type:{type:String,default:""}},setup:e=>()=>l("svg",{class:`${Oo}-icon icon`,"aria-hidden":"true"},[l("use",{"xlink:href":`#icon-${e.type}`},null)])}),_d=typeof window<"u",Il=()=>{};let KI=!1;if(_d)try{const e={};Object.defineProperty(e,"passive",{get(){KI=!0}}),window.addEventListener("test-passive",Il,e)}catch{}const Zb=function(e,t,n){let o=arguments.length>3&&arguments[3]!==void 0&&arguments[3];_d&&e.addEventListener(t,n,!!KI&&{capture:!1,passive:o})},Yb=(e,t,n)=>{_d&&e.removeEventListener(t,n)},wJ=e=>{e.preventDefault()},IJ=Object.prototype.toString,bv=e=>t=>IJ.call(t).slice(8,-1)===e,xJ=e=>!!e&&bv("Object")(e),Xb=e=>!!e&&bv("String")(e);function kJ(e){return e!=null}const $J=Ve({name:"Toolbar",props:{zoomIn:{type:Function,default:Il},zoomOut:{type:Function,default:Il},rotateLeft:{type:Function,default:Il},rotateRight:{type:Function,default:Il},resize:{type:Function,default:Il},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1}},setup:e=>()=>l("div",{class:`${Oo}-toolbar`},[!e.zoomDisabled&&l(de,null,[l("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:e.zoomIn},[l(Go,{type:"zoomin"},null)]),l("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:e.zoomOut},[l(Go,{type:"zoomout"},null)])]),l("div",{role:"button","aria-label":"resize image button",class:"toolbar-btn toolbar-btn__resize",onClick:e.resize},[l(Go,{type:"resize"},null)]),!e.rotateDisabled&&l(de,null,[l("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateLeft},[l(Go,{type:"rotate-left"},null)]),l("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:e.rotateRight},[l(Go,{type:"rotate-right"},null)])])])}),CJ=()=>l("div",{class:`${Oo}-loading`},[l("div",{class:"ring"},null)]),SJ=()=>l("div",{class:`${Oo}-on-error`},[l("div",{class:"ring"},null),l(Go,{type:"img-broken"},null)]),TJ=(e,t)=>{let{slots:n}=t;return l("div",{class:`${Oo}-img-title`},[n.default?n.default():""])},EJ=Ve({name:"DefaultIcons",setup:()=>()=>l("svg",{"aria-hidden":!0,style:"position: absolute; width: 0; height: 0; overflow: hidden; visibility: hidden;"},[l("symbol",{id:"icon-rotate-right",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973z m282.559912-479.07185A509.887841 509.887841 0 0 0 511.99984 0.00032C229.215928 0.00032 0 229.216248 0 512.00016s229.215928 511.99984 511.99984 511.99984 511.99984-229.215928 511.99984-511.99984c0-3.743999-0.032-7.455998-0.128-11.167997-1.631999-11.295996-8.159997-27.103992-31.87199-27.103991-27.487991 0-31.67999 21.247993-32.03199 32.06399l0.032 4.127999a30.62399 30.62399 0 0 0 0.16 2.079999H959.9997c0 247.423923-200.575937 447.99986-447.99986 447.99986S63.99998 759.424083 63.99998 512.00016 264.575917 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 1 277.439913 96.22397l-94.91197 91.679971c-25.439992 24.607992-17.439995 44.991986 17.887994 45.599986l188.031942 3.295999a64.31998 64.31998 0 0 0 65.055979-62.84798l3.295999-188.127942C969.407697 15.040315 949.311703 5.792318 923.871711 30.368311l-87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-rotate-left",viewBox:"0 0 1024 1024"},[l("path",{d:"M275.199914 450.496179v20.031994c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399a120.255962 120.255962 0 0 1-72.991978-24.895992c-21.503993-15.839995-35.359989-38.751988-41.567987-68.735979h60.831981c9.247997 23.007993 27.167992 34.495989 53.759983 34.49599 37.535988-0.384 56.863982-21.407993 57.983982-63.071981v-38.751988c-28.095991 8.863997-54.303983 13.119996-78.623975 12.735996a91.263971 91.263971 0 0 1-68.447979-27.711991c-18.847994-18.303994-28.095991-47.231985-27.711991-86.847973z m62.55998 24.863992c7.103998 24.799992 25.215992 37.343988 54.271983 37.663989 27.103992-0.288 44.703986-11.327996 52.831984-33.11999 3.135999-8.383997 2.655999-29.599991-1.28-38.559988-8.607997-19.615994-25.791992-29.695991-51.551984-30.20799-28.383991 0.576-46.303986 12.639996-53.759983 36.159988a58.719982 58.719982 0 0 0-0.512 28.063991z m390.335878 115.711964v-116.895963c-1.12-41.311987-20.447994-62.335981-57.983981-63.07198-37.727988 0.768-56.959982 21.791993-57.695982 63.07198v116.895963c0.768 41.663987 19.999994 62.68798 57.695982 63.071981 37.535988-0.384 56.863982-21.407993 57.983981-63.071981z m-174.815945 3.391999v-123.935961c0.384-38.079988 12.543996-67.423979 36.479989-87.967973 22.431993-20.351994 49.215985-30.55999 80.319975-30.55999 32.06399 0 59.295981 10.175997 81.759974 30.55999 22.815993 20.543994 34.591989 49.887984 35.359989 87.967973v123.935961c-0.768 37.887988-12.543996 67.135979-35.359989 87.679973-22.431993 20.351994-49.695984 30.75199-81.759974 31.10399-31.10399-0.384-57.887982-10.751997-80.319975-31.10399-23.935993-20.543994-36.127989-49.791984-36.479989-87.679973zM188.159941 115.392284A509.887841 509.887841 0 0 1 511.99984 0.00032c282.783912 0 511.99984 229.215928 511.99984 511.99984s-229.215928 511.99984-511.99984 511.99984S0 794.784072 0 512.00016c0-3.743999 0.032-7.455998 0.128-11.167997 1.631999-11.295996 8.159997-27.103992 31.87199-27.103991 27.487991 0 31.67999 21.247993 32.03199 32.06399L63.99998 509.920161a30.62399 30.62399 0 0 1-0.16 2.079999H63.99998c0 247.423923 200.575937 447.99986 447.99986 447.99986s447.99986-200.575937 447.99986-447.99986S759.423763 64.0003 511.99984 64.0003a446.079861 446.079861 0 0 0-277.439913 96.22397l94.91197 91.679971c25.439992 24.607992 17.439995 44.991986-17.887994 45.599986L123.551961 300.800226a64.31998 64.31998 0 0 1-65.055979-62.84798l-3.295999-188.127942C54.591983 15.040315 74.687977 5.792318 100.127969 30.368311l87.999972 85.023973z",fill:""},null)]),l("symbol",{id:"icon-resize",viewBox:"0 0 1024 1024"},[l("path",{d:"M456.036919 791.8108 270.553461 791.8108 460.818829 601.572038l-39.593763-39.567157L231.314785 751.915162l0.873903-183.953615c0-15.465227-12.515035-27.981285-27.981285-27.981285s-27.981285 12.515035-27.981285 27.981285l0 251.829516c0 8.3072 3.415796 14.975063 8.826016 19.564591 5.082762 5.192256 12.132318 8.416693 19.947308 8.416693l251.036453 0c15.46625 0 27.981285-12.514012 27.981285-27.981285C484.018204 804.325835 471.504192 791.8108 456.036919 791.8108zM838.945819 184.644347c-5.082762-5.191232-12.132318-8.416693-19.947308-8.416693L567.961034 176.227654c-15.46625 0-27.981285 12.515035-27.981285 27.981285 0 15.46625 12.514012 27.981285 27.981285 27.981285l185.483458 0L563.206754 422.427962l39.567157 39.567157 189.910281-189.910281-0.873903 183.953615c0 15.46625 12.514012 27.981285 27.981285 27.981285s27.981285-12.514012 27.981285-27.981285L847.772858 204.208938C847.771835 195.902762 844.356039 189.234899 838.945819 184.644347zM847.771835 64.303538 176.227142 64.303538c-61.809741 0-111.924115 50.115398-111.924115 111.924115l0 671.544693c0 61.809741 50.114374 111.924115 111.924115 111.924115l671.544693 0c61.809741 0 111.924115-50.114374 111.924115-111.924115l0-671.544693C959.69595 114.418936 909.581576 64.303538 847.771835 64.303538zM903.733381 847.772346c0 30.878265-25.056676 55.962569-55.962569 55.962569L176.227142 903.734916c-30.90487 0-55.962569-25.084305-55.962569-55.962569l0-671.544693c0-30.9325 25.056676-55.962569 55.962569-55.962569l671.544693 0c30.90487 0 55.962569 25.03007 55.962569 55.962569L903.734404 847.772346z"},null)]),l("symbol",{id:"icon-img-broken",viewBox:"0 0 1024 1024"},[l("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 682.666667H213.333333v-195.413334l42.24 42.24 170.666667-170.666666 170.666667 170.666666 170.666666-170.24L810.666667 530.346667V810.666667z m0-401.493334l-43.093334-43.093333-170.666666 171.093333-170.666667-170.666666-170.666667 170.666666-42.24-42.666666V213.333333h597.333334v195.84z"},null)]),l("symbol",{id:"icon-prev",viewBox:"0 0 1024 1024"},[l("path",{d:"M784.652701 955.6957 346.601985 517.644983c-2.822492-2.822492-2.822492-7.902977 0-11.289967l439.179713-439.179713c6.77398-6.77398 10.725469-16.370452 10.725469-25.966924L796.507166 36.692393c0-20.32194-16.370452-36.692393-36.692393-36.692393l-4.515987 0c-9.596472 0-19.192944 3.951488-25.966924 10.725469L250.072767 489.420066c-12.418964 12.418964-12.418964 32.740904 0 45.159868l477.565601 477.565601c7.338479 7.338479 17.499449 11.854465 28.224917 11.854465l0 0c22.015436 0 40.079383-18.063947 40.079383-40.079383l0 0C796.507166 973.759647 791.99118 963.598677 784.652701 955.6957z"},null)]),l("symbol",{id:"icon-next",viewBox:"0 0 1024 1024"},[l("path",{d:"M246.121279 955.6957l438.050717-438.050717c2.822492-2.822492 2.822492-7.902977 0-11.289967L244.992282 67.175303c-6.77398-6.77398-10.725469-16.370452-10.725469-25.966924L234.266814 36.692393C234.266814 16.370452 250.637266 0 270.959206 0l4.515987 0c9.596472 0 19.192944 3.951488 25.966924 10.725469l478.694598 478.694598c12.418964 12.418964 12.418964 32.740904 0 45.159868l-477.565601 477.565601c-7.338479 7.338479-17.499449 11.854465-28.224917 11.854465l0 0c-22.015436 0-40.079383-18.063947-40.079383-40.079383l0 0C234.266814 973.759647 238.7828 963.598677 246.121279 955.6957z"},null)]),l("symbol",{id:"icon-zoomin",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null),l("path",{d:"M367.488 238.144h127.104v390.72H367.488z"},null)]),l("symbol",{id:"icon-close",viewBox:"0 0 1024 1024"},[l("path",{d:"M570.24 512l259.2 259.2-58.88 58.24L512 570.24l-261.12 261.12-58.24-58.24L453.76 512 194.56 252.8l58.24-58.24L512 453.76l261.12-261.12 58.24 58.24z"},null)]),l("symbol",{id:"icon-zoomout",viewBox:"0 0 1024 1024"},[l("path",{d:"M725.504 652.864c46.4-61.44 71.744-136.448 71.744-218.752C797.248 230.464 632.768 64 430.656 64S64 230.464 64 434.112C64 639.36 228.48 805.76 430.656 805.76c86.656 0 164.48-30.144 227.52-81.088L889.984 960 960 891.264l-234.496-238.4z m-294.848 67.456c-155.776 0-282.624-128.896-282.624-286.208s126.848-286.208 282.624-286.208 282.624 128.896 282.624 286.208-126.912 286.208-282.624 286.208z"},null),l("path",{d:"M235.712 369.92h390.72v127.104H235.712z"},null)])])}),oi=_d?window:global;let Qb=Date.now();function FJ(e){const t=Date.now(),n=Math.max(0,16-(t-Qb)),o=setTimeout(e,n);return Qb=t+n,o}function Pm(e){return(oi.requestAnimationFrame||FJ).call(oi,e)}function Jb(e){(oi.cancelAnimationFrame||oi.clearTimeout).call(oi,e)}function e1(e,t){const n=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(n*n+o*o)}function Mm(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ty(e)}var Bm=Ve({name:"VueEasyLightbox",props:{imgs:{type:[Array,String],default:()=>""},visible:{type:Boolean,default:!1},index:{type:Number,default:0},scrollDisabled:{type:Boolean,default:!0},escDisabled:{type:Boolean,default:!1},moveDisabled:{type:Boolean,default:!1},titleDisabled:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},teleport:{type:[String,Object],default:null},swipeTolerance:{type:Number,default:50},loop:{type:Boolean,default:!1},rtl:{type:Boolean,default:!1},zoomScale:{type:Number,default:.12},maxZoom:{type:Number,default:3},minZoom:{type:Number,default:.1},rotateDisabled:{type:Boolean,default:!1},zoomDisabled:{type:Boolean,default:!1},pinchDisabled:{type:Boolean,default:!1},dblclickDisabled:{type:Boolean,default:!1}},emits:{hide:()=>!0,"on-error":e=>!0,"on-prev":(e,t)=>!0,"on-next":(e,t)=>!0,"on-prev-click":(e,t)=>!0,"on-next-click":(e,t)=>!0,"on-index-change":(e,t)=>!0,"on-rotate":e=>!0},setup(e,t){let{emit:n,slots:o}=t;const{imgRef:a,imgState:r,setImgSize:s}=(()=>{const me=V(),Ce=ro({width:0,height:0,maxScale:1});return{imgRef:me,imgState:Ce,setImgSize:()=>{if(me.value){const{width:ke,height:Be,naturalWidth:Fe}=me.value;Ce.maxScale=Fe/ke,Ce.width=ke,Ce.height=Be}}}})(),i=V(e.index),u=V(""),d=ro({scale:1,lastScale:1,rotateDeg:0,top:0,left:0,initX:0,initY:0,lastX:0,lastY:0,touches:[]}),m=ro({loadError:!1,loading:!1,dragging:!1,gesturing:!1,wheeling:!1}),f=P(()=>{return me=e.imgs,bv("Array")(me)?e.imgs.map(Ce=>typeof Ce=="string"?{src:Ce}:function(ke){return xJ(ke)&&Xb(ke.src)}(Ce)?Ce:void 0).filter(kJ):Xb(e.imgs)?[{src:e.imgs}]:[];var me}),h=P(()=>f.value[i.value]),y=P(()=>{var me;return(me=f.value[i.value])==null?void 0:me.src}),b=P(()=>{var me;return(me=f.value[i.value])==null?void 0:me.title}),I=P(()=>{var me;return(me=f.value[i.value])==null?void 0:me.alt}),w=P(()=>({cursor:m.loadError?"default":e.moveDisabled?m.dragging?"grabbing":"grab":"move",top:`calc(50% + ${d.top}px)`,left:`calc(50% + ${d.left}px)`,transition:m.dragging||m.gesturing?"none":"",transform:`translate(-50%, -50%) scale(${d.scale}) rotate(${d.rotateDeg}deg)`})),k=()=>{n("hide")},x=()=>{d.scale=1,d.lastScale=1,d.rotateDeg=0,d.top=0,d.left=0,m.loadError=!1,m.dragging=!1,m.loading=!0},$=(me,Ce)=>{const ke=i.value;x(),i.value=me,f.value[i.value]===f.value[me]&&We(()=>{m.loading=!1}),e.visible&&ke!==me&&(Ce&&Ce(ke,me),n("on-index-change",ke,me))},C=()=>{const me=i.value,Ce=e.loop?(me+1)%f.value.length:me+1;!e.loop&&Ce>f.value.length-1||$(Ce,(ke,Be)=>{n("on-next",ke,Be),n("on-next-click",ke,Be)})},F=()=>{const me=i.value;let Ce=me-1;if(me===0){if(!e.loop)return;Ce=f.value.length-1}$(Ce,(ke,Be)=>{n("on-prev",ke,Be),n("on-prev-click",ke,Be)})},T=me=>{Math.abs(1-me)<.05?me=1:Math.abs(r.maxScale-me)<.05&&(me=r.maxScale),d.lastScale=d.scale,d.scale=me},S=()=>{const me=d.scale+e.zoomScale;me<r.maxScale*e.maxZoom&&T(me)},A=()=>{const me=d.scale-e.zoomScale;me>e.minZoom&&T(me)},E=()=>{const me=d.rotateDeg%360;n("on-rotate",Math.abs(me<0?me+360:me))},B=()=>{d.rotateDeg-=90,E()},M=()=>{d.rotateDeg+=90,E()},N=()=>{d.scale=1,d.top=0,d.left=0},G=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return!e.moveDisabled&&me===0},{onMouseDown:U,onMouseMove:j,onMouseUp:O}=((me,Ce,ke)=>{let Be,Fe=!1;return{onMouseDown:he=>{me.initX=me.lastX=he.clientX,me.initY=me.lastY=he.clientY,Ce.dragging=!0,Fe=!1,he.stopPropagation()},onMouseUp:he=>{ke(he.button)&&Jb(Be),Ce.dragging=!1,Fe=!1},onMouseMove:he=>{if(Ce.dragging)if(ke(he.button)){if(Fe)return;Fe=!0,Be=Pm(()=>{const{top:_e,left:Te,lastY:Ne,lastX:lt}=me;me.top=_e-Ne+he.clientY,me.left=Te-lt+he.clientX,me.lastX=he.clientX,me.lastY=he.clientY,Fe=!1})}else me.lastX=he.clientX,me.lastY=he.clientY;he.stopPropagation()}}})(d,m,G),{onTouchStart:H,onTouchMove:W,onTouchEnd:X}=((me,Ce,ke,Be,Fe)=>{let he,_e=!1;return{onTouchStart:Te=>{const{touches:Ne}=Te;Ne.length>1&&Fe()?(ke.gesturing=!0,Ce.touches=Ne):(Ce.initX=Ce.lastX=Ne[0].clientX,Ce.initY=Ce.lastY=Ne[0].clientY,ke.dragging=!0),Te.stopPropagation()},onTouchMove:Te=>{if(_e)return;const{touches:Ne}=Te,{lastX:lt,lastY:Ke,left:$e,top:De,scale:at}=Ce;if(!ke.gesturing&&ke.dragging){if(!Ne[0])return;const{clientX:dt,clientY:we}=Ne[0];Be()?he=Pm(()=>{Ce.lastX=dt,Ce.lastY=we,Ce.top=De-Ke+we,Ce.left=$e-lt+dt,_e=!1}):(Ce.lastX=dt,Ce.lastY=we)}else ke.gesturing&&Ce.touches.length>1&&Ne.length>1&&Fe()&&(he=Pm(()=>{const dt=(e1(Ce.touches[0],Ce.touches[1])-e1(Ne[0],Ne[1]))/me.width;Ce.touches=Ne;const we=at-1.3*dt;we>.5&&we<1.5*me.maxScale&&(Ce.scale=we),_e=!1}))},onTouchEnd:()=>{Jb(he),ke.dragging=!1,ke.gesturing=!1,_e=!1}}})(r,d,m,G,()=>!e.pinchDisabled),q=()=>{e.dblclickDisabled||(d.scale!==r.maxScale?(d.lastScale=d.scale,d.scale=r.maxScale):d.scale=d.lastScale)},L=me=>{m.loadError||m.gesturing||m.loading||m.dragging||m.wheeling||!e.scrollDisabled||e.zoomDisabled||(m.wheeling=!0,setTimeout(()=>{m.wheeling=!1},80),me.deltaY<0?S():A())},ee=me=>{const Ce=me;e.visible&&(!e.escDisabled&&Ce.key==="Escape"&&e.visible&&k(),Ce.key==="ArrowLeft"&&(e.rtl?C():F()),Ce.key==="ArrowRight"&&(e.rtl?F():C()))},ce=()=>{e.maskClosable&&k()},ue=()=>{s()},oe=()=>{m.loading=!1},re=me=>{m.loading=!1,m.loadError=!0,n("on-error",me)},Y=()=>{e.visible&&s()};Se(()=>e.index,me=>{me<0||me>=f.value.length||$(me)}),Se(()=>m.dragging,(me,Ce)=>{const ke=!me&&Ce;if(!G()&&ke){const Be=d.lastX-d.initX,Fe=d.lastY-d.initY,he=e.swipeTolerance;Math.abs(Be)>Math.abs(Fe)&&(Be<-1*he?C():Be>he&&F())}}),Se(()=>e.visible,me=>{if(me){x();const Ce=f.value.length;if(Ce===0)return i.value=0,m.loading=!1,void We(()=>m.loadError=!0);i.value=e.index>=Ce?Ce-1:e.index<0?0:e.index,e.scrollDisabled&&ae()}else e.scrollDisabled&&se()});const ae=()=>{document&&(u.value=document.body.style.overflowY,document.body.style.overflowY="hidden")},se=()=>{document&&(document.body.style.overflowY=u.value)};Xe(()=>{Zb(document,"keydown",ee),Zb(window,"resize",Y)}),mn(()=>{Yb(document,"keydown",ee),Yb(window,"resize",Y),e.scrollDisabled&&se()});const xe=()=>m.loading?o.loading?o.loading({key:"loading"}):l(CJ,{key:"img-loading"},null):m.loadError?o.onerror?o.onerror({key:"onerror"}):l(SJ,{key:"img-on-error"},null):l("div",{class:`${Oo}-img-wrapper`,style:w.value,key:"img-wrapper"},[l("img",{alt:I.value,ref:a,draggable:"false",class:`${Oo}-img`,src:y.value,onMousedown:U,onMouseup:O,onMousemove:j,onTouchstart:H,onTouchmove:W,onTouchend:X,onLoad:ue,onDblclick:q,onDragstart:me=>{me.preventDefault()}},null)]),le=()=>{if(o["prev-btn"])return o["prev-btn"]({prev:F});if(f.value.length<=1)return;const me=!e.loop&&i.value<=0;return l("div",{role:"button","aria-label":"previous image button",class:"btn__prev "+(me?"disable":""),onClick:F},[e.rtl?l(Go,{type:"next"},null):l(Go,{type:"prev"},null)])},ge=()=>{if(o["next-btn"])return o["next-btn"]({next:C});if(f.value.length<=1)return;const me=!e.loop&&i.value>=f.value.length-1;return l("div",{role:"button","aria-label":"next image button",class:"btn__next "+(me?"disable":""),onClick:C},[e.rtl?l(Go,{type:"prev"},null):l(Go,{type:"next"},null)])},ve=()=>{if(!(e.titleDisabled||m.loading||m.loadError))return o.title?o.title({currentImg:h.value}):b.value?l(TJ,null,{default:()=>[b.value]}):void 0},ie=()=>{let me;if(e.visible)return l("div",{onTouchmove:wJ,class:[`${Oo}-modal`,e.rtl?"is-rtl":""],onClick:ot(ce,["self"]),onWheel:L},[l(EJ,null,null),l(sr,{name:`${Oo}-fade`,mode:"out-in"},Mm(me=xe())?me:{default:()=>[me]}),l("img",{style:"display:none;",src:y.value,onError:re,onLoad:oe},null),l("div",{class:`${Oo}-btns-wrapper`},[le(),ge(),ve(),o["close-btn"]?o["close-btn"]({close:k}):l("div",{role:"button","aria-label":"close image preview button",class:"btn__close",onClick:k},[l(Go,{type:"close"},null)]),o.toolbar?o.toolbar({toolbarMethods:{zoomIn:S,zoomOut:A,rotate:B,rotateLeft:B,rotateRight:M,resize:N},zoomIn:S,zoomOut:A,rotate:B,rotateLeft:B,rotateRight:M,resize:N}):l($J,{zoomIn:S,zoomOut:A,resize:N,rotateLeft:B,rotateRight:M,rotateDisabled:e.rotateDisabled,zoomDisabled:e.zoomDisabled},null)])])};return()=>{let me;if(e.teleport){let Ce;return l(To,{to:e.teleport},{default:()=>[l(sr,{name:`${Oo}-fade`},Mm(Ce=ie())?Ce:{default:()=>[Ce]})]})}return l(sr,{name:`${Oo}-fade`},Mm(me=ie())?me:{default:()=>[me]})}}});const AJ=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{imgs:""};const{imgs:t="",initIndex:n=0}=e,o=V(t),a=V(n),r=V(!1),s=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.value;a.value=i};return{imgsRef:o,indexRef:a,visibleRef:r,show:function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.value;typeof i=="number"?s(i):hn(i)&&typeof i.value=="number"?s(i.value):i instanceof Event&&s(a.value),r.value=!0},onHide:()=>{r.value=!1},changeIndex:s}},RJ=Object.assign(Bm,{install:e=>{e.component(Bm.name,Bm)}}),DJ={class:"vel-toolbar"},OJ=["onClick"],PJ=["onClick"],MJ=["onClick"],BJ=["onClick"],yv={__name:"UrlableLightbox",props:{modelValue:{validator:e=>typeof e=="number"||typeof e=="string"||e===null},urls:Array},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,{show:a,visibleRef:r,indexRef:s,imgsRef:i}=AJ({imgs:n.urls,initIndex:0}),u=P(()=>n.urls.length),d=()=>{r.value=!1,n.modelValue!==null&&o("update:modelValue",null)};return Se(()=>n.modelValue,m=>{m>=0&&m!==null?a(m):r.value=!1},{immediate:!0}),Se(u,()=>i.value=n.urls),(m,f)=>(g(),R(To,{to:"body"},[l(v(RJ),{visible:v(r),imgs:v(i),index:v(s),onHide:d,onOnIndexChange:f[0]||(f[0]=(h,y)=>m.$emit("update:modelValue",y))},{toolbar:p(({toolbarMethods:h})=>[_("div",DJ,[_("div",{role:"button","aria-label":"zoom in button",class:"toolbar-btn toolbar-btn__zoomin",onClick:h.zoomIn},f[1]||(f[1]=[_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-zoomin"})],-1)]),8,OJ),_("div",{role:"button","aria-label":"zoom out button",class:"toolbar-btn toolbar-btn__zoomout",onClick:h.zoomOut},f[2]||(f[2]=[_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-zoomout"})],-1)]),8,PJ),_("div",{role:"button","aria-label":"image rotate left button",class:"toolbar-btn toolbar-btn__rotate",onClick:h.rotateLeft},f[3]||(f[3]=[_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-rotate-left"})],-1)]),8,MJ),_("div",{role:"button","aria-label":"image rotate right button",class:"toolbar-btn toolbar-btn__rotate",onClick:h.rotateRight},f[4]||(f[4]=[_("svg",{class:"vel-icon icon","aria-hidden":"true"},[_("use",{"xlink:href":"#icon-rotate-right"})],-1)]),8,BJ),Ee(m.$slots,"toolbar")])]),_:3},8,["visible","imgs","index"])]))}},NJ=["href","target"],VJ={class:"shrink-0"},LJ=["textContent"],qJ={class:"min-w-0 flex-1 truncate"},UJ={class:"block shrink-0 md:hidden md:group-hover:block"},jJ={class:"flex items-center sm:space-x-2"},_c=Object.assign({inheritAttrs:!1},{__name:"MediaItemsList",props:{items:Array,authorizeDelete:Boolean},emits:["deleteRequested"],setup(e){const t=e,n=V(null),{localizedDateTime:o}=it(),a=P(()=>t.items.filter(u=>u.aggregate_type==="image")),r=P(()=>a.value.map(u=>u.preview_url)),s=P(()=>a.value[n.value]);function i(u){return a.value.findIndex(d=>d.preview_url===u)}return(u,d)=>{const m=c("Icon"),f=c("ILink"),h=c("IText"),y=c("IButton");return g(),D(de,null,[l(yv,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=b=>n.value=b),urls:r.value},{toolbar:p(()=>[(g(),D(de,null,Ie(["preview_url","download_url"],b=>_("a",{key:b,tabindex:"-1",rel:"noopener noreferrer",class:"toolbar-btn",href:s.value[b],target:b==="preview_url"?"_blank":void 0},[l(m,{class:"size-5",icon:b=="preview_url"?"Eye":"DownloadSolid"},null,8,["icon"])],8,NJ)),64))]),_:1},8,["modelValue","urls"]),_("ul",Ue({class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},u.$attrs),[(g(!0),D(de,null,Ie(e.items,b=>(g(),D("li",{key:b.id,class:"group flex items-center space-x-3 py-3 last:pb-0"},[_("div",VJ,[_("span",{class:be(["inline-flex size-8 items-center justify-center rounded-full text-base/6 sm:text-sm/6",[b.was_recently_created?"bg-success-500 text-white":"bg-neutral-200 text-neutral-400 dark:bg-neutral-700 dark:text-neutral-300"]])},[b.was_recently_created?(g(),R(m,{key:0,icon:"Check",class:"size-5"})):(g(),D("span",{key:1,textContent:K(b.extension)},null,8,LJ))],2)]),_("div",qJ,[b.aggregate_type!=="image"?(g(),R(f,{key:0,class:"font-medium",tabindex:"0",href:b.view_url,text:b.file_name,basic:""},null,8,["href","text"])):(g(),R(f,{key:1,class:"font-medium",tabindex:"0",href:b.view_path,text:b.file_name,basic:"",onClick:ot(I=>n.value=i(b.preview_url),["prevent"])},null,8,["href","text","onClick"])),l(h,{class:"ml-2 inline",text:v(Hy)(b.size)},null,8,["text"]),l(h,{text:v(o)(b.created_at)},null,8,["text"])]),_("div",UJ,[_("div",jJ,[l(y,{href:b.download_path,basic:"",small:"",download:""},{default:p(()=>[l(m,{icon:"DownloadSolid"})]),_:2},1032,["href"]),e.authorizeDelete&&b.via_text_attribute!==!0?(g(),R(y,{key:0,icon:"XSolid",basic:"",small:"",onClick:I=>u.$emit("deleteRequested",b)},null,8,["onClick"])):Z("",!0)])])]))),128))],16)],64)}}}),zJ={class:"mt-3"},Is={__name:"ResourceRecordMediaList",props:{resourceName:{type:String,required:!0},resourceId:{type:Number,required:!0},media:{type:Array,required:!0},authorizeDelete:{required:!0,type:Boolean},isFloating:{type:Boolean,required:!1}},emits:["deleted","uploaded"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>Vt(n.media,d=>new Date(d.created_at),["desc"])),r=P(()=>n.media.length),s=P(()=>r.value>0);function i(d){o("uploaded",d)}async function u(d){await Innoclapps.request().delete(`/${n.resourceName}/${n.resourceId}/media/${d.id}`),o("deleted",d)}return(d,m)=>{const f=c("IText");return g(),D("div",null,[l(_c,{items:a.value,"authorize-delete":e.authorizeDelete,onDeleteRequested:m[0]||(m[0]=h=>d.$confirm(()=>u(h)))},null,8,["items","authorize-delete"]),te(l(f,{class:"mt-2",text:d.$t("core::app.no_attachments")},null,8,["text"]),[[fe,!s.value]]),_("div",zJ,[l(ur,{"input-id":"media-"+e.resourceName+"-"+e.resourceId+(e.isFloating?"-floating":""),"action-url":`${d.$scriptConfig("apiURL")}/${e.resourceName}/${e.resourceId}/media`,onFileUploaded:i},null,8,["input-id","action-url"])])])}}},HJ={__name:"ResourceMediaPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},panel:{required:!0,type:Object}},setup(e){const t=Le("synchronizeResource");return(n,o)=>{const a=c("IText"),r=c("ITextDisplay"),s=c("Panel");return g(),R(s,{panel:e.panel},{default:p(()=>[l(r,null,{default:p(()=>[ne(K(n.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),R(a,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):Z("",!0)]),_:1}),l(Is,{"resource-name":e.resourceName,"resource-id":e.resourceId,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:o[0]||(o[0]=i=>v(t)({media:{id:i.id,_delete:!0}})),onUploaded:o[1]||(o[1]=i=>v(t)({media:[i]}))},null,8,["resource-name","resource-id","media","authorize-delete"])]),_:1},8,["panel"])}}},WJ={value:"and"},GJ={value:"or"},ZI={__name:"QueryBuilderCondition",props:pt({labels:{type:Object,required:!0},keypath:{type:String,required:!0},disabled:Boolean,displayableCondition:String},{modelValue:{type:String,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue");return(n,o)=>{const a=c("I18nT"),r=c("IText");return g(),R(r,null,{default:p(()=>[l(a,{scope:"global",class:"flex w-full flex-wrap items-start font-medium sm:items-center",tag:"p",keypath:e.keypath},{condition:p(()=>[ne(K(n.$t("core::filters.conditions."+(e.displayableCondition||t.value))),1)]),match_type:p(()=>[te(_("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>t.value=s),class:be(["border-1 mx-1 rounded-md border-neutral-300 bg-none px-2 py-0 text-base/6 focus:shadow-none focus:ring-primary-500 dark:border-neutral-500 dark:bg-neutral-500 dark:text-white sm:text-sm/6",e.disabled?"pointer-events-none":""])},[_("option",WJ,K(e.labels.matchTypeAll),1),_("option",GJ,K(e.labels.matchTypeAny),1)],2),[[ay,t.value]])]),_:1},8,["keypath"])]),_:1})}}},ja={operand:{required:!0},isNullable:{required:!0,type:Boolean},index:{required:!0,type:Number},query:{type:Object,required:!1},rule:{type:Object,required:!0},labels:{required:!0},operator:{required:!0},isBetween:Boolean,readonly:Boolean};function xr(e,t,n){const o=fn();Se(()=>v(e).operand,(r,s)=>{s&&a(Am(v(t))?[]:"")}),Se(t,(r,s)=>{const i=Am(r);i&&!Array.isArray(v(e).value)&&a([]),(Am(s)||s=="is"||s=="was"||n)&&!i&&a("")});function a(r){o.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:v(e),value:r})}return{updateValue:a}}const KJ=Object.assign({inheritAttrs:!1},{__name:"CheckboxRule",props:ja,setup(e){const t=e,n=P({get(){return t.query.value},set(r){a(r)}}),o=P(()=>t.rule.options.length),{updateValue:a}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable);return t.query.value===null&&a([]),(r,s)=>{const i=c("IFormCheckbox"),u=c("IFormCheckboxLabel"),d=c("IFormCheckboxField");return g(),D("div",{class:be(o.value<=3?"inline-flex space-x-3":"space-y-1")},[(g(!0),D(de,null,Ie(r.rule.options,m=>(g(),R(d,{key:m[r.rule.valueKey]},{default:p(()=>[l(i,{checked:n.value,"onUpdate:checked":s[0]||(s[0]=f=>n.value=f),value:m[r.rule.valueKey],disabled:r.readonly},null,8,["checked","value","disabled"]),l(u,{text:m[r.rule.labelKey]},null,8,["text"])]),_:2},1024))),128))],2)}}}),ZJ={key:0,class:"flex items-center space-x-1 sm:space-x-2"},YJ={key:0,class:"w-full sm:w-auto"},XJ=["value","textContent"],QJ=Object.assign({inheritAttrs:!1},{__name:"DateRule",props:ja,setup(e){const t=e,{updateValue:n}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),o=P(()=>({visibility:"focus",positionFixed:!0,placement:"left"})),a=P(()=>t.query.operator==="is"),r=P(()=>Fn(t.rule.operatorsOptions.is,(d,m)=>({value:m,text:d}))),s=P(()=>Fn(t.rule.operatorsOptions.was,(d,m)=>({value:m,text:d}))),i=P(()=>a.value?r.value:s.value),u=P(()=>t.query.operator==="was");return(d,m)=>{const f=c("DatePicker"),h=c("Icon"),y=c("IFormSelect");return!a.value&&!u.value?(g(),D("div",ZJ,[d.isBetween?Z("",!0):(g(),D("div",YJ,[l(f,{placeholder:d.$t("core::filters.placeholders.select_date"),"model-value":d.query.value,disabled:d.readonly,popover:o.value,onInput:m[0]||(m[0]=b=>v(n)(b))},null,8,["placeholder","model-value","disabled","popover"])])),d.isBetween?(g(),R(f,{key:1,placeholder:d.$t("core::filters.placeholders.select_date"),"model-value":d.query.value[0],disabled:d.readonly,popover:o.value,onInput:m[1]||(m[1]=b=>v(n)([b,d.query.value[1]]))},null,8,["placeholder","model-value","disabled","popover"])):Z("",!0),d.isBetween?(g(),R(h,{key:2,icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"})):Z("",!0),d.isBetween?(g(),R(f,{key:3,placeholder:d.$t("core::filters.placeholders.select_date"),"min-date":d.query.value[0]||null,disabled:d.readonly||!d.query.value[0],popover:o.value,"model-value":d.query.value[1],onInput:m[2]||(m[2]=b=>v(n)([d.query.value[0],b]))},null,8,["placeholder","min-date","disabled","popover","model-value"])):Z("",!0)])):(g(),R(y,{key:1,class:"w-full sm:w-auto","model-value":d.query.value,disabled:d.readonly,onInput:m[3]||(m[3]=b=>v(n)(b))},{default:p(()=>[m[4]||(m[4]=_("option",{value:""},null,-1)),(g(!0),D(de,null,Ie(i.value,b=>(g(),D("option",{key:b.value,value:b.value,textContent:K(b.text)},null,8,XJ))),128))]),_:1},8,["model-value","disabled"]))}}}),JJ=Object.assign({inheritAttrs:!1},{__name:"MultiSelectRule",props:ja,setup(e){const t=e,{t:n}=Pe(),{updateValue:o}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),a=P(()=>t.rule.options),r=P(()=>n("core::filters.placeholders.choose_with_multiple",{label:t.operand?t.operand.label:t.rule.label})),s=P({get(){return(t.query.value||[]).map(i=>a.value.find(u=>u[t.rule.valueKey]==i))},set(i){o(i.map(u=>u[t.rule.valueKey]))}});return(i,u)=>{const d=c("ICustomSelect");return g(),R(d,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),multiple:!0,disabled:i.readonly,"input-id":"rule-"+i.rule.id+"-"+i.index,placeholder:r.value,label:i.rule.labelKey,"option-key":i.rule.valueKey,options:a.value},null,8,["modelValue","disabled","input-id","placeholder","label","option-key","options"])}}}),eee={};function tee(e,t){return null}const nee=an(eee,[["render",tee]]),oee={key:1,class:"flex items-center space-x-2"},aee=Object.assign({inheritAttrs:!1},{__name:"NumberRule",props:ja,setup(e){const t=e,{t:n}=Pe(),{updateValue:o}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),a=P(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return(r,s)=>{const i=c("IFormInput"),u=c("Icon");return r.isBetween?(g(),D("div",oee,[l(i,{type:"number",placeholder:a.value,disabled:r.readonly,"model-value":r.query.value[0],onInput:s[1]||(s[1]=d=>v(o)([d,r.query.value[1]]))},null,8,["placeholder","disabled","model-value"]),l(u,{icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"}),l(i,{type:"number",placeholder:a.value,disabled:r.readonly,"model-value":r.query.value[1],onInput:s[2]||(s[2]=d=>v(o)([r.query.value[0],d]))},null,8,["placeholder","disabled","model-value"])])):(g(),R(i,{key:0,type:"number",class:"w-full sm:w-auto",placeholder:a.value,disabled:r.readonly,"model-value":r.query.value,onInput:s[0]||(s[0]=d=>v(o)(d))},null,8,["placeholder","disabled","model-value"]))}}}),ree={key:1,class:"flex items-center space-x-2"},lee=Object.assign({inheritAttrs:!1},{__name:"NumericRule",props:ja,setup(e){const t=e,{t:n}=Pe(),{updateValue:o}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),a=P(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return t.query.value===null&&o(0),(r,s)=>{const i=c("IFormNumericInput"),u=c("Icon");return r.isBetween?(g(),D("div",ree,[l(i,{placeholder:a.value,"model-value":r.query.value[0],readonly:r.readonly,onInput:s[1]||(s[1]=d=>v(o)([d,r.query.value[1]]))},null,8,["placeholder","model-value","readonly"]),l(u,{icon:"ArrowRight",class:"size-4 shrink-0 text-neutral-600"}),l(i,{placeholder:a.value,"model-value":r.query.value[1],readonly:r.readonly,onInput:s[2]||(s[2]=d=>v(o)([r.query.value[0],d]))},null,8,["placeholder","model-value","readonly"])])):(g(),R(i,{key:0,class:"w-full sm:w-auto",placeholder:a.value,"model-value":r.query.value,readonly:r.readonly,onInput:s[0]||(s[0]=d=>v(o)(d))},null,8,["placeholder","model-value","readonly"]))}}}),see=Object.assign({inheritAttrs:!1},{__name:"RadioRule",props:ja,setup(e){const t=e,n=P({get(){return t.query.value},set(r){a(r)}}),o=P(()=>t.rule.options.length),{updateValue:a}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable);return(r,s)=>{const i=c("IFormRadio"),u=c("IFormRadioLabel"),d=c("IFormRadioField");return g(),D("div",{class:be(o.value<=3?"inline-flex space-x-3":"space-y-1")},[(g(!0),D(de,null,Ie(r.rule.options,m=>(g(),R(d,{key:m[r.rule.valueKey]},{default:p(()=>[l(i,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=f=>n.value=f),value:m[r.rule.valueKey],disabled:r.readonly,name:r.rule.id},null,8,["modelValue","value","disabled","name"]),l(u,{text:m[r.rule.labelKey]},null,8,["text"])]),_:2},1024))),128))],2)}}}),iee=Object.assign({inheritAttrs:!1},{__name:"SelectRule",props:ja,setup(e){const t=e,{t:n}=Pe(),{updateValue:o}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),a=P(()=>t.rule.options),r=P(()=>n("core::filters.placeholders.choose",{label:t.operand?t.operand.label:t.rule.label})),s=P({get(){return ft(a.value,[t.rule.valueKey,t.query.value])||null},set(i){o(i?i[t.rule.valueKey]:null)}});return Ut(t.query.value)&&(s.value=a.value[0]?a.value[0]:null),(i,u)=>{const d=c("ICustomSelect");return g(),R(d,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=m=>s.value=m),disabled:i.readonly,"input-id":"rule-"+i.rule.id+"-"+i.index,placeholder:r.value,label:i.rule.labelKey,"option-key":i.rule.valueKey,options:a.value},null,8,["modelValue","disabled","input-id","placeholder","label","option-key","options"])}}}),uee=Object.assign({inheritAttrs:!1},{__name:"StaticRule",props:ja,setup(e){return(t,n)=>{const o=c("IBadge");return g(),R(o,{variant:"info",text:t.$t("core::filters.static_rule_indicator")},null,8,["text"])}}}),cee=Object.assign({inheritAttrs:!1},{__name:"TextRule",props:ja,setup(e){const t=e,{t:n}=Pe(),{updateValue:o}=xr(xt(t,"query"),xt(t,"operator"),t.isNullable),a=P(()=>n("core::filters.placeholders.enter",{label:t.operand?t.operand.label:t.rule.label}));return(r,s)=>{const i=c("IFormInput");return g(),R(i,{type:"text",class:"w-full sm:w-auto",placeholder:a.value,disabled:r.readonly,"model-value":r.query.value,onInput:s[0]||(s[0]=u=>v(o)(u))},null,8,["placeholder","disabled","model-value"])}}}),dee={class:"relative sm:flex sm:items-center","data-slot":"rule"},mee={class:"mb-1 flex w-full flex-col justify-start sm:mb-0 sm:mr-3 sm:w-auto sm:flex-row sm:items-center sm:space-x-3"},fee={class:"relative flex items-center"},pee={key:0,class:"absolute -left-[31.5px] z-20 rounded-full border border-white bg-white dark:border-neutral-800 dark:bg-neutral-700"},vee={key:0,class:"mr-3 flex-1"},hee=Object.assign({name:"QueryBuilderRule",inheritAttrs:!1},{__name:"QueryBuilderRule",props:["query","index","depth","labels","readonly","availableRules"],emits:["childDeletionRequested"],setup(e,{emit:t}){const n=e,o=t,a={"numeric-rule":lee,"checkbox-rule":KJ,"date-rule":QJ,"number-rule":aee,"radio-rule":see,"select-rule":iee,"multi-select-rule":JJ,"text-rule":cee,"static-rule":uee,"nullable-rule":nee},r=fn(),s=P(()=>n.depth-1),i=P({get(){return n.query.operand},set(S){r.commit("queryBuilder/UPDATE_QUERY_OPERAND",{query:n.query,value:S})}}),u=P({get(){return n.query.operator},set(S){r.commit("queryBuilder/UPDATE_QUERY_OPERATOR",{query:n.query,value:S})}}),d=P(()=>b.value?n.availableRules:n.availableRules.filter(S=>S.onlyOncePerGroup?S.id!=n.query.rule:!0)),m=P(()=>f.value.operands.filter(S=>S.rule.onlyOncePerGroup?S.rule.id!=n.query.operand:!0)),f=P(()=>ft(n.availableRules,["id",n.query.rule])),h=P(()=>n.query.operand?ft(f.value.operands,["value",n.query.operand]):null),y=P(()=>{let S=b.value?h.value.rule.component:f.value.component;return Object.hasOwn(a,S)?a[S]:S}),b=P(()=>!!(h.value&&h.value.rule)),I=P(()=>b.value?h.value.rule.operators:f.value.operators),w=P(()=>I.value&&I.value.length===1),k=P(()=>!f.value||f.value.isStatic||f.value.hideOperands?!1:f.value.operands&&f.value.operands.length>0),x=P(()=>iI(u.value)),$=P(()=>sI(u.value));function C(S){r.commit("queryBuilder/UPDATE_QUERY_RULE",{query:n.query,value:S.id}),r.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:n.query,value:null}),r.commit("queryBuilder/UPDATE_QUERY_TYPE",{query:n.query,value:S.type}),u.value=S.operators[0],S.operands&&S.operands.length>0?(i.value=S.operands[0][S.operands[0].valueKey],S.operands[0].rule&&(u.value=S.operands[0].rule.operators[0])):i.value=null}function F(S){r.commit("queryBuilder/UPDATE_QUERY_VALUE",{query:n.query,value:null}),i.value=S[S.valueKey],S.rule.operators&&S.rule.operators.length>0&&(u.value=S.rule.operators[0])}function T(){o("childDeletionRequested",n.index)}return(S,A)=>{const E=c("Icon"),B=c("ICustomSelect"),M=ze("i-tooltip");return g(),D("div",dee,[_("div",mee,[_("div",fee,[f.value&&f.value.helpText?te((g(),D("div",pee,[l(E,{icon:"QuestionMarkCircle",class:"size-5 text-neutral-500 hover:text-neutral-700 dark:text-white dark:hover:text-neutral-300"})])),[[M,f.value.helpText,void 0,{bottom:!0,light:!0}]]):Z("",!0),_("div",{class:be(["w-full",s.value===1?"sm:w-48":s.value===2?"sm:w-44":"sm:w-40"])},[l(B,{disabled:e.readonly,class:be({"ring-warning-400":!e.query.rule}),"model-value":f.value,placeholder:e.labels.selectRule,clearable:!1,options:d.value,truncate:"","onUpdate:modelValue":C},null,8,["disabled","class","model-value","placeholder","options"])],2)]),k.value?(g(),D("div",{key:0,class:be(["mt-1 w-full sm:!ml-1 sm:mt-0",s.value===1?"sm:w-48":"sm:w-44"])},[l(B,{"model-value":h.value,disabled:e.readonly,clearable:!1,"option-label":N=>N[N.labelKey],options:m.value,truncate:"","onUpdate:modelValue":F},null,8,["model-value","disabled","option-label","options"])],2)):Z("",!0),f.value&&!w.value&&!f.value.isStatic?(g(),D("div",{key:1,class:be(["my-1 w-full sm:my-0 sm:!ml-1",s.value===1?"sm:w-40":"sm:w-36"])},[l(B,{modelValue:u.value,"onUpdate:modelValue":A[0]||(A[0]=N=>u.value=N),disabled:e.readonly,"option-label":N=>e.labels.operatorLabels[N]||N,clearable:!1,options:I.value,truncate:""},null,8,["modelValue","disabled","option-label","options"])],2)):Z("",!0)]),f.value||h.value?te((g(),D("div",vee,[(g(),R(_t(y.value),{query:e.query,index:e.index,operand:h.value,rule:h.value?h.value.rule:f.value,operator:e.query.operator,labels:e.labels,readonly:e.readonly,"is-nullable":$.value,"is-between":x.value},null,8,["query","index","operand","rule","operator","labels","readonly","is-nullable","is-between"]))],512)),[[fe,!$.value]]):Z("",!0),e.readonly?Z("",!0):(g(),D("button",{key:1,type:"button",class:"absolute -right-7 top-1 mr-px rounded-full border border-neutral-200 bg-neutral-50 p-1 text-neutral-500 hover:bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-700 dark:text-neutral-200 dark:hover:bg-neutral-800",onClick:T},[l(E,{icon:"Trash",class:"size-4"})]))])}}}),gee={key:1,class:"ml-auto sm:opacity-0 sm:group-hover/child:opacity-100"},bee=Object.assign({name:"QueryBuilderChildGroup"},{__name:"QueryBuilderChildGroup",props:["index","query","availableRules","maxDepth","depth","labels","readonly","previousMatchType"],emits:["childDeletionRequested"],setup(e,{emit:t}){const n=e,o=t,a={rule:hee,group:"QueryBuilderChildGroup"},r=fn(),s=pJ(n.depth),i=P({get(){return n.query.condition},set(w){r.commit("queryBuilder/UPDATE_QUERY_CONDITION",{query:n.query,value:w})}}),u=P(()=>n.depth>1),d=P({get(){return n.query.children},set(w){r.commit("queryBuilder/SET_QUERY_CHILDREN",{query:n.query,children:w})}}),m=P(()=>d.value.length);Se(m,w=>{w===0&&n.depth>1&&b()});const f=P(()=>n.depth+1);function h(){r.commit("queryBuilder/ADD_QUERY_RULE",n.query)}function y(){n.depth<n.maxDepth&&r.commit("queryBuilder/ADD_QUERY_GROUP",n.query)}function b(){o("childDeletionRequested",n.index)}function I(w){r.commit("queryBuilder/REMOVE_QUERY_CHILD",{query:n.query,index:w})}return(w,k)=>{const x=c("IButton"),$=c("ILink"),C=c("IDropdownButton"),F=c("IDropdownItem"),T=c("IDropdownItemLabel"),S=c("IDropdownItemDescription"),A=c("IDropdownMenu"),E=c("IDropdown");return g(),D(de,null,[_("div",{class:be(["group/child flex items-center",e.depth>1?"ml-1":""])},[u.value?(g(),R(ZI,{key:0,modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=B=>i.value=B),keypath:"core::filters.or_match_any_conditions","displayable-condition":e.previousMatchType,disabled:e.readonly,labels:e.labels},null,8,["modelValue","displayable-condition","disabled","labels"])):Z("",!0),u.value?(g(),D("div",gee,[l(x,{icon:"Trash",basic:"",small:"",onClick:ot(b,["prevent","stop"])})])):Z("",!0)],2),_("div",{class:be(["space-y-3.5 rounded border border-neutral-200 p-3.5 dark:border-neutral-500/30",e.depth>0&&"mb-4",v(s)])},[(g(!0),D(de,null,Ie(d.value,(B,M)=>(g(),R(_t(a[B.type]),{key:B.query.rule+"-"+M,query:B.query,index:M,"previous-match-type":e.query.condition,readonly:e.readonly,"max-depth":e.maxDepth,depth:f.value,"available-rules":e.availableRules,labels:e.labels,onChildDeletionRequested:I},null,40,["query","index","previous-match-type","readonly","max-depth","depth","available-rules","labels"]))),128)),_("div",{class:be(e.readonly?"hidden":"")},[m.value===0||!(e.depth<e.maxDepth)?(g(),R($,{key:0,basic:"",onClick:h},{default:p(()=>[ne(" + "+K(m.value===0?e.labels.addCondition:e.labels.addAnotherCondition),1)]),_:1})):(g(),R(E,{key:1},{default:p(()=>[l(C,{link:"",basic:"","no-caret":""},{default:p(()=>[ne(" + "+K(m.value===0?e.labels.addCondition:e.labels.addAnotherCondition),1)]),_:1}),l(A,null,{default:p(()=>[l(F,{onClick:h},{default:p(()=>[ne(" + "+K(e.labels.addCondition),1)]),_:1}),e.depth<e.maxDepth&&m.value>0?(g(),R(F,{key:0,onClick:y},{default:p(()=>[l(T,null,{default:p(()=>[ne(" + "+K(e.labels.addGroup),1)]),_:1}),l(S,{text:w.$t("core::filters.add_group_info")},null,8,["text"])]),_:1})):Z("",!0)]),_:1})]),_:1}))],2)],2)],64)}}}),yee={class:"group/main mb-2 flex items-center"},_ee={key:0,class:"ml-auto sm:opacity-0 sm:group-hover/main:opacity-100"},wee=Object.assign({inheritAttrs:!1},{__name:"QueryBuilderGroup",props:{group:{type:Object,required:!0},identifier:{type:String,required:!0},index:{type:Number,required:!0},labels:{type:Object,required:!0},readonly:{type:Boolean,required:!0}},setup(e){const t=e,n=fn(),{removeGroup:o}=Ua(t.identifier),a=P(()=>t.index===0),r=P({get(){return t.group.condition},set(i){n.commit("queryBuilder/UPDATE_QUERY_CONDITION",{query:t.group,value:i})}}),s=P(()=>t.group.children.length);return Se(s,i=>{i===0&&!a.value&&o(t.index)}),(i,u)=>{const d=c("ITextDisplay"),m=c("IButton");return g(),D(de,null,[e.group.quick?(g(),R(d,{key:0,class:"mb-2 mt-8 font-medium"},{default:p(()=>[ne(K(i.$t("core::filters.quick_filters")),1)]),_:1})):(g(),R(d,{key:1,class:"mb-2 mt-4 font-medium"},{default:p(()=>[ne(K(i.$t("core::filters.advanced_filters")),1)]),_:1})),_("div",yee,[l(ZI,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=f=>r.value=f),keypath:a.value?"core::filters.show_matching_records_conditions":"core::filters.or_match_any_conditions",labels:e.labels,disabled:e.readonly||e.group.quick||!1},null,8,["modelValue","keypath","labels","disabled"]),a.value?Z("",!0):(g(),D("div",_ee,[l(m,{icon:"Trash",basic:"",small:"",onClick:u[1]||(u[1]=ot(f=>v(o)(e.index),["prevent","stop"]))})]))]),l(bee,Ue({query:e.group,depth:1,index:e.index,labels:e.labels,readonly:e.readonly||e.group.quick},i.$attrs),null,16,["query","index","labels","readonly"])],64)}}}),Iee={__name:"QueryBuilder",props:{identifier:{type:String,required:!0},readonly:Boolean,maxDepth:{type:Number,default:2,validator:e=>e>=1&&e<=2}},setup(e){const t=e,{queryBuilderRules:n,availableRules:o}=Ua(t.identifier),{labels:a}=vJ();return(r,s)=>(g(!0),D(de,null,Ie(v(n),(i,u)=>(g(),R(wee,{key:u,index:u,identifier:e.identifier,group:i,"available-rules":v(o),"max-depth":e.maxDepth,readonly:e.readonly,labels:v(a)},null,8,["index","identifier","group","available-rules","max-depth","readonly","labels"]))),128))}},xee={class:"inline-flex items-center focus-within:z-10"},kee={key:0,class:"mb-1 rounded-md bg-neutral-100 p-3 dark:bg-neutral-900/50"},$ee={class:"max-h-72 overflow-y-auto py-1"},Cee=5,See={__name:"DataViewQuickFiltersItem",props:{identifier:{type:String,required:!0},rule:{type:Object,required:!0},modelValue:{}},emits:["changed","update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=V(null),r=P(()=>n.rule.quickFilter.multiple),s=P(()=>{var y;return u.value?r.value!==!0?(y=n.rule.quickFilter.options.find(b=>b.value==n.modelValue))==null?void 0:y.label:n.rule.quickFilter.options.filter(b=>n.modelValue.includes(b.value)).map(b=>b.label).join(", "):null}),i=P(()=>{const{options:y}=n.rule.quickFilter;return a.value?y.filter(b=>b.separator===!0?!0:b.label.toLowerCase().includes(a.value.toLowerCase())):y}),u=P(()=>!Ut(n.modelValue));function d(y){return r.value===!1?n.modelValue==y.value:n.modelValue.includes(y.value)}function m(y,b){const{value:I}=y;if(r.value===!1){h(n.modelValue==I?null:I,{option:y});return}b.preventDefault();let w=null;setTimeout(()=>{n.modelValue.includes(I)?w=n.modelValue.filter(k=>k!=I):(w=[...n.modelValue],w.push(I)),h(w,{option:y})})}function f(){h(r.value?[]:null)}function h(y,b={}){o("update:modelValue",y),o("changed",{rule:n.rule,value:y,...b})}return(y,b)=>{const I=c("IDropdownButton"),w=c("InputSearch"),k=c("IDropdownSeparator"),x=c("IBadge"),$=c("IFormCheckbox"),C=c("IFormCheckboxLabel"),F=c("IFormCheckboxField"),T=c("IDropdownItem"),S=c("IDropdownMenu"),A=c("IDropdown"),E=c("IButton"),B=ze("i-tooltip");return g(),D("div",xee,[l(A,{placement:"bottom-start"},{default:p(()=>[te(l(I,{variant:"primary",active:u.value,title:s.value,class:be(u.value&&"relative rounded-r-none focus:z-10"),text:e.rule.quickFilter.label||e.rule.label,ghost:""},null,8,["active","title","class","text"]),[[B,e.rule.quickFilter.label?e.rule.label:null]]),l(S,null,{default:p(()=>[e.rule.quickFilter.options.length>Cee?(g(),D("div",kee,[l(w,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=M=>a.value=M)},null,8,["modelValue"])])):Z("",!0),_("div",$ee,[(g(!0),D(de,null,Ie(i.value,M=>(g(),D(de,{key:M.value},[M.separator===!0?(g(),R(k,{key:0})):(g(),R(T,{key:1,class:be(["min-w-36 cursor-pointer",M.bold?"font-semibold":""]),active:d(M),onClick:N=>m(M,N)},{default:p(()=>[r.value?(g(),R(F,{key:1},{default:p(()=>[l($,{checked:d(M)},null,8,["checked"]),l(C,null,{default:p(()=>[M.swatch_color?(g(),R(x,{key:1,color:M.swatch_color},{default:p(()=>[ne(K(M.label),1)]),_:2},1032,["color"])):(g(),D(de,{key:0},[ne(K(M.label),1)],64))]),_:2},1024)]),_:2},1024)):(g(),D(de,{key:0},[M.swatch_color?(g(),R(x,{key:1,color:M.swatch_color},{default:p(()=>[ne(K(M.label),1)]),_:2},1032,["color"])):(g(),D(de,{key:0},[ne(K(M.label),1)],64))],64))]),_:2},1032,["class","active","onClick"]))],64))),128))])]),_:1})]),_:1}),te(l(E,{variant:"primary",icon:"XSolid",class:"rounded-l-none",active:u.value,ghost:"",onClick:f},null,8,["active"]),[[fe,u.value]])])}}},Tee={class:"flex flex-wrap items-center gap-x-1 sm:flex-nowrap"},Eee={__name:"DataViewQuickFilters",props:{identifier:{type:String,required:!0}},emits:["changed"],setup(e,{emit:t}){const n=e,o=t,a=V({}),{availableRules:r,queryBuilderRules:s,createGroup:i,addGroupRule:u,findGroupRule:d,updateRuleValue:m,addGroup:f,createRule:h,removeGroup:y,removeGroupRule:b}=Ua(n.identifier),{activeView:I}=ka(n.identifier),w=P(()=>r.value.filter(C=>C.quickFilter!==null&&C.quickFilter.options.length>0)),k=P(()=>s.value.findIndex(C=>C.quick===!0));function x(){var C;w.value.forEach(F=>{a.value[F.id]=F.quickFilter.multiple===!0?[]:null}),!Zt(k.value)&&k.value!==-1&&((C=s.value[k.value])==null||C.children.forEach(F=>{a.value[F.query.rule]=F.query.value}))}Se(()=>{var C;return(C=I.value)==null?void 0:C.id},x),Se(k,()=>{x()},{immediate:!0,flush:"post"});function $(C){const{rule:F,value:T,option:S}=C;k.value===-1&&f(i([],{quick:!0}));const A=()=>u(h(F.type,F.id,S.operator||F.quickFilter.operator,Nn(T)),k.value);d(F.id,k.value)?Ut(T)?b(F.id,k.value):F.quickFilter.operator?(b(F.id,k.value),A()):m(F.id,Nn(T),k.value):A(),s.value[k.value].children.length===0&&y(k.value),o("changed")}return(C,F)=>(g(),D("div",Tee,[(g(!0),D(de,null,Ie(w.value,T=>(g(),R(See,{key:T.id,modelValue:a.value[T.id],"onUpdate:modelValue":S=>a.value[T.id]=S,identifier:e.identifier,rule:T,onChanged:$},null,8,["modelValue","onUpdate:modelValue","identifier","rule"]))),128))]))}},Fee={class:"-mx-2.5 snap-x items-center overflow-x-auto scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-300 dark:scrollbar-thumb-neutral-600 sm:-mx-0 sm:flex"},Aee={class:"-mx-2.5 shrink-0 sm:-mx-0"},Ree={class:"flex items-center justify-between"},Dee={class:"flex items-center gap-x-2"},YI=Object.assign({inheritAttrs:!1},{__name:"DataViewFilters",props:{identifier:{required:!0,type:String}},emits:["apply"],setup(e,{emit:t}){const n=e,o=t,a=V(!1),{queryBuilderRules:r,rulesAreValid:s,hasRulesApplied:i,resetQueryBuilderRules:u,hasRulesAppliedWithAuthorization:d,rulesLabelsWithAuthorization:m}=Ua(n.identifier),{filtersBuilderVisible:f,activeView:h,patchView:y,findView:b,hasActiveView:I}=ka(n.identifier),w=P(()=>I.value&&h.value.authorizations.update),k=P(()=>I.value&&h.value.is_system_default),x=P(()=>d.value&&I.value&&h.value.is_shared),$=P(()=>k.value||x.value?!1:w.value);function C(){r.value=Nn(h.value.rules),y({...h.value,_in_query_builder:!0})}Se(()=>{var E;return(E=h.value)==null?void 0:E.id},(E,B)=>{B&&y({...b(B),_in_query_builder:!1}),E&&((B||!B&&!i.value||!B&&i.value&&!b(E)._in_query_builder)&&C(),S())},{immediate:!0});async function F(){const{data:E}=await Innoclapps.request().put(`/views/${h.value.id}`,{rules:r.value});y({...h.value,rules:E.rules})}async function T(){a.value=!0;try{$.value&&await F(),f.value=!1,S()}finally{a.value=!1}}function S(){o("apply",r.value)}async function A(){u(),$.value&&await F(),S()}return mn(()=>{f.value=!1,s.value||u()}),(E,B)=>{const M=c("IButton"),N=c("IText"),G=c("IModalSeparator"),U=c("IAlertBody"),j=c("IAlert"),O=c("IModal"),H=ze("i-tooltip");return g(),D(de,null,[_("div",Fee,[l(Eee,{class:"shrink-0",identifier:e.identifier,onChanged:T},null,8,["identifier"])]),_("div",Aee,[l(M,{icon:"AdjustmentsVerticalSolid",variant:"primary",class:be(v(i)&&"relative rounded-r-none focus:z-10"),active:v(i),text:E.$t("core::filters.advanced_filters"),ghost:"",onClick:B[0]||(B[0]=W=>f.value=!0)},null,8,["class","active","text"]),te(l(M,{variant:"primary",icon:"XSolid",class:"rounded-l-none",active:!0,ghost:"",onClick:A},null,512),[[fe,v(i)],[H,E.$t("core::filters.clear_all")]])]),l(O,{visible:v(f),"onUpdate:visible":B[1]||(B[1]=W=>hn(f)?f.value=W:null),size:"xl"},{title:p(()=>[ne(K(E.$t("core::filters.all"))+" ",1),k.value||!w.value?(g(),R(N,{key:0,class:"max-w-[95%] font-medium text-info-800 dark:text-info-400"},{default:p(()=>[ne(K(k.value?E.$t("core::data_views.filter_is_readonly"):E.$t("core::data_views.filter_cannot_be_saved")),1)]),_:1})):Z("",!0)]),"modal-footer":p(({cancel:W})=>[_("div",Ree,[_("div",null,[v(i)?(g(),R(M,{key:0,class:"font-medium",text:E.$t("core::filters.clear_all"),basic:"",onClick:A},null,8,["text"])):Z("",!0)]),_("div",Dee,[l(M,{basic:"",onClick:W},{default:p(()=>[ne(K(E.$t("core::app.hide")),1)]),_:2},1032,["onClick"]),l(M,{variant:"primary",disabled:a.value||!v(s),onClick:T},{default:p(()=>[ne(K($.value?E.$t("core::filters.save_and_apply"):E.$t("core::filters.apply")),1)]),_:1},8,["disabled"])])])]),default:p(()=>[l(G),l(v(Iee),Ue(E.$attrs,{identifier:e.identifier}),null,16,["identifier"]),x.value&&!k.value?(g(),R(j,{key:0,class:"mb-3"},{default:p(()=>[l(U,null,{default:p(()=>[ne(K(E.$t("core::data_views.save_shared_with_authorizeable_filters_disabled",{rules:v(m).join(", ")})),1)]),_:1})]),_:1})):Z("",!0)]),_:1},8,["visible"])],64)}}});var Oee=Ci,Pee=py,Mee=os;function Bee(e,t,n){for(var o=-1,a=t.length,r={};++o<a;){var s=t[o],i=Oee(e,s);n(i,s)&&Pee(r,Mee(s,e),i)}return r}var XI=Bee,Nee=XI,Vee=dw;function Lee(e,t){return Nee(e,t,function(n,o){return Vee(e,o)})}var qee=Lee,Uee=qee,jee=zI,zee=jee(function(e,t){return e==null?{}:Uee(e,t)}),Hee=zee;const _v=Rt(Hee),Wee={__name:"DataViewsCreate",props:pt({identifier:{type:String,required:!0}},{visible:{type:Boolean},visibleModifiers:{}}),emits:pt(["created"],["update:visible"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"visible");Se(a,m=>{m&&u()});const{activeView:r,addView:s}=ka(n.identifier),{form:i}=Qe({name:null,is_shared:!1});function u(){i.reset(),i.set(_v(r.value,["identifier","config"]))}async function d(){const m=await i.post("/views");s(m),i.reset(),o("created",m)}return(m,f)=>{const h=c("IFormInput"),y=c("IFormError"),b=c("IFormGroup"),I=c("IDropdownButton"),w=c("IDropdownItemLabel"),k=c("IDropdownItemDescription"),x=c("IDropdownItem"),$=c("IDropdownMenu"),C=c("IDropdown"),F=c("IModal");return g(),R(F,{id:"createNewTableView",visible:a.value,"onUpdate:visible":f[3]||(f[3]=T=>a.value=T),size:"sm","ok-text":m.$t("core::app.create"),"ok-disabled":v(i).busy,title:m.$t("core::data_views.create_new"),form:"",onSubmit:d,onShown:f[4]||(f[4]=()=>m.$refs.inputNameRef.focus())},{default:p(()=>[l(b,{"label-for":"name",label:m.$t("core::data_views.name"),required:""},{default:p(()=>[l(h,{id:"name",ref:"inputNameRef",modelValue:v(i).name,"onUpdate:modelValue":f[0]||(f[0]=T=>v(i).name=T)},null,8,["modelValue"]),l(y,{error:v(i).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{label:m.$t("core::data_views.share.with"),required:""},{default:p(()=>[l(C,{"adaptive-width":""},{default:p(()=>[l(I,{variant:"secondary",class:"w-full"},{default:p(()=>[ne(K(v(i).is_shared?m.$t("core::data_views.share.everyone"):m.$t("core::data_views.share.private")),1)]),_:1}),l($,null,{default:p(()=>[l(x,{active:v(i).is_shared===!1,onClick:f[1]||(f[1]=T=>v(i).is_shared=!1)},{default:p(()=>[l(w,{text:m.$t("core::data_views.share.private")},null,8,["text"]),l(k,{text:m.$t("core::data_views.share.private_info")},null,8,["text"])]),_:1},8,["active"]),l(x,{active:v(i).is_shared===!0,onClick:f[2]||(f[2]=T=>v(i).is_shared=!0)},{default:p(()=>[l(w,{text:m.$t("core::data_views.share.everyone")},null,8,["text"]),l(k,{text:m.$t("core::data_views.share.everyone_info")},null,8,["text"])]),_:1},8,["active"])]),_:1})]),_:1}),l(y,{error:v(i).getError("is_shared")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["visible","ok-text","ok-disabled","title"])}}},Gee={__name:"DataViewsEdit",props:pt({identifier:{type:String,required:!0},view:{type:Object,required:!0}},{visible:{type:Boolean},visibleModifiers:{}}),emits:pt(["updated"],["update:visible"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"visible"),{hasRulesAppliedWithAuthorization:r,rulesLabelsWithAuthorization:s}=Ua(n.identifier),{patchView:i}=ka(n.identifier),{form:u}=Qe({name:n.view.name,is_shared:n.view.is_shared});Se(r,(m,f)=>{!f&&m&&(u.is_shared=!1)});async function d(){const m=await u.put(`/views/${n.view.id}`);i(m),o("updated",m)}return(m,f)=>{const h=c("IFormInput"),y=c("IFormError"),b=c("IFormGroup"),I=c("IDropdownButton"),w=c("IDropdownItemLabel"),k=c("IDropdownItemDescription"),x=c("IDropdownItem"),$=c("IDropdownMenu"),C=c("IDropdown"),F=c("IAlertBody"),T=c("IAlert"),S=c("IModal");return g(),R(S,{id:"viewEditModal",visible:a.value,"onUpdate:visible":f[3]||(f[3]=A=>a.value=A),size:"sm","ok-text":m.$t("core::app.save"),"ok-disabled":v(u).busy,title:m.$t("core::data_views.edit_view"),form:"",onSubmit:d,onShown:f[4]||(f[4]=()=>m.$refs.inputNameRef.focus())},{default:p(()=>[l(b,{"label-for":"name",label:m.$t("core::data_views.name"),required:""},{default:p(()=>[l(h,{id:"name",ref:"inputNameRef",modelValue:v(u).name,"onUpdate:modelValue":f[0]||(f[0]=A=>v(u).name=A)},null,8,["modelValue"]),l(y,{error:v(u).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{label:m.$t("core::data_views.share.with"),required:""},{default:p(()=>[l(C,{"adaptive-width":""},{default:p(()=>[l(I,{variant:"secondary",class:"w-full"},{default:p(()=>[ne(K(v(u).is_shared?m.$t("core::data_views.share.everyone"):m.$t("core::data_views.share.private")),1)]),_:1}),l($,null,{default:p(()=>[l(x,{active:v(u).is_shared===!1,onClick:f[1]||(f[1]=A=>v(u).is_shared=!1)},{default:p(()=>[l(w,{text:m.$t("core::data_views.share.private")},null,8,["text"]),l(k,{text:m.$t("core::data_views.share.private_info")},null,8,["text"])]),_:1},8,["active"]),v(r)?Z("",!0):(g(),R(x,{key:0,active:v(u).is_shared===!0,onClick:f[2]||(f[2]=A=>v(u).is_shared=!0)},{default:p(()=>[l(w,{text:m.$t("core::data_views.share.everyone")},null,8,["text"]),l(k,{text:m.$t("core::data_views.share.everyone_info")},null,8,["text"])]),_:1},8,["active"]))]),_:1})]),_:1}),l(y,{error:v(u).getError("is_shared")},null,8,["error"])]),_:1},8,["label"]),v(r)?(g(),R(T,{key:0,class:"mb-3"},{default:p(()=>[l(F,null,{default:p(()=>[ne(K(m.$t("core::data_views.cannot_be_shared",{rules:v(s).join(", ")})),1)]),_:1})]),_:1})):Z("",!0)]),_:1},8,["visible","ok-text","ok-disabled","title"])}}},Kee=["title"],Zee={class:"truncate"},Yee=Object.assign({inheritAttrs:!1},{__name:"DataViewsItem",props:{view:{type:Object,required:!0},identifier:{type:String,required:!0},isViewExceedingMaxOpenViews:{type:Boolean,required:!0},isExceedingMaxOpenViews:{type:Boolean,required:!0},active:Boolean,totalOpen:{type:Number,required:!0}},emits:["selected","closed","clone","updated","deleted"],setup(e,{emit:t}){const n=e,o=t,{activeView:a}=ka(n.identifier),r=V(!1),s=P(()=>n.view.authorizations.update&&!n.view.is_system_default),i=P(()=>n.totalOpen!==1&&n.view.authorizations.delete&&!n.view.is_system_default);async function u(){await Innoclapps.request().delete(`/views/${n.view.id}`),o("deleted",n.view.id)}function d(){o("selected",n.view.id),a.value=n.view.id}function m(f){o("updated",f),r.value=!1}return(f,h)=>{const y=c("Icon"),b=c("IDropdownItem"),I=c("IDropdownItemLabel"),w=c("IDropdownItemDescription"),k=c("IDropdownMinimal"),x=ze("i-tooltip");return g(),D(de,null,[_("div",Ue(f.$attrs,{class:["group relative flex cursor-move items-center","bg-neutral-100 dark:bg-neutral-900 dark:before:absolute dark:before:inset-0",e.active?"bg-white dark:before:bg-neutral-700/60":"hover:bg-white dark:before:bg-neutral-500/10 dark:hover:bg-neutral-700/60"]}),[_("button",{type:"button",title:e.view.name,class:be(["z-10 inline-flex grow items-center gap-x-1.5 truncate border-0 px-6 py-2 text-center text-base text-neutral-800 hover:text-neutral-900 focus:outline-none dark:text-neutral-200 sm:text-sm",e.active&&"font-semibold"]),onDblclick:h[0]||(h[0]=$=>s.value?r.value=!0:void 0),onClick:d},[te(l(y,{icon:"Selector",class:"absolute left-1.5 h-4 w-4 opacity-0 group-hover:opacity-100"},null,512),[[fe,!e.isExceedingMaxOpenViews]]),e.isViewExceedingMaxOpenViews?te((g(),R(y,{key:0,icon:"ExclamationTriangle",class:"h-5 w-5 shrink-0 text-warning-500"},null,512)),[[x,f.$t("core::data_views.open_views_limit_hit"),void 0,{bottom:!0,light:!0}]]):Z("",!0),_("span",Zee,K(e.view.name),1)],42,Kee),l(k,{class:"pointer-events-none mr-2 opacity-0 group-hover:pointer-events-auto group-hover:opacity-100",small:""},{default:p(()=>[s.value?(g(),R(b,{key:0,onClick:h[1]||(h[1]=$=>r.value=!0)},{default:p(()=>[l(y,{icon:"PencilAlt"}),ne(" "+K(f.$t("core::app.edit")),1)]),_:1})):Z("",!0),e.totalOpen!==1?(g(),R(b,{key:1,onClick:h[2]||(h[2]=$=>f.$emit("closed",e.view.id))},{default:p(()=>[l(y,{icon:"XSolid"}),l(I,null,{default:p(()=>[ne(K(f.$t("core::app.close")),1)]),_:1}),l(w,null,{default:p(()=>[ne(K(f.$t("core::data_views.mark_as_default_for_current_account_only")),1)]),_:1})]),_:1})):Z("",!0),l(b,{onClick:h[3]||(h[3]=$=>f.$emit("clone",e.view.id))},{default:p(()=>[l(y,{icon:"Duplicate"}),ne(" "+K(f.$t("core::data_views.clone")),1)]),_:1}),i.value?(g(),R(b,{key:2,confirmable:"",onClick:u},{default:p(()=>[l(y,{icon:"Trash"}),ne(" "+K(f.$t("core::app.delete")),1)]),_:1})):Z("",!0)]),_:1})],16),l(Gee,{visible:r.value,"onUpdate:visible":h[4]||(h[4]=$=>r.value=$),view:e.view,identifier:e.identifier,onUpdated:m},null,8,["visible","view","identifier"])],64)}}}),Xee={class:"px-1"},Qee={class:"mb-4 px-3"},Jee={class:"max-h-80 overflow-y-auto"},ete={class:"block truncate"},Nm={__name:"DataViewsList",props:{views:Array},emits:["selected"],setup(e){const t=e,n=V(null),o=P(()=>n.value?t.views.filter(a=>a.name.toLowerCase().includes(n.value.toLowerCase())):t.views);return(a,r)=>{const s=c("InputSearch"),i=c("IText"),u=c("ILink");return g(),D("div",Xee,[_("div",Qee,[l(s,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),placeholder:a.$t("core::data_views.search")},null,8,["modelValue","placeholder"])]),te(l(i,{class:"text-center"},{default:p(()=>[ne(K(a.$t("core::data_views.no_views_found")),1)]),_:1},512),[[fe,!o.value.length]]),_("ul",Jee,[(g(!0),D(de,null,Ie(o.value,d=>(g(),D("li",{key:d.id,class:"mx-2 rounded-lg py-0.5 text-base/6 text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6"},[l(u,{class:"flex px-2 py-0.5",basic:"",plain:"",onClick:m=>a.$emit("selected",d)},{default:p(()=>[_("span",ete,K(d.name),1)]),_:2},1032,["onClick"])]))),128))])])}}},tte={class:"block sm:hidden"},nte={class:"flex items-center gap-x-2"},ote={class:"ml-3 flex shrink-0 items-center space-x-2"},ate=["textContent"],rte=["textContent"],lte=["textContent"],ste={class:"border-t border-neutral-200 dark:border-neutral-500/30"},ite={class:"px-4 py-2"},QI=Object.assign({inheritAttrs:!1},{__name:"DataViews",props:{identifier:{type:String,required:!0},singleViewOnly:Boolean,activeViewId:Number},emits:["created","selected","deleted","changed"],setup(e,{emit:t}){const n=e,o=t,a=wt(),r=Ct(),{currentUser:s,scriptConfig:i}=qe(),{views:u,activeView:d,patchView:m,addView:f,findView:h,removeView:y,firstOpenView:b}=ka(n.identifier),I=i("views.max_open"),w=V(!1),k=V(null),x=P(()=>u.value.every(q=>q.is_open_for_user===null)),$=P(()=>x.value?u.value.slice(0,I):u.value.filter(q=>q.is_open_for_user)),C=P({get(){return k.value?$.value.concat(h(k.value)):$.value},set(q){G(q)}}),F=P(()=>C.value.length),T=P(()=>C.value.length>I),S=P(()=>u.value.filter(q=>q.is_system_default)),A=P(()=>u.value.filter(q=>q.is_shared_from_another_user)),E=P(()=>u.value.filter(q=>q.user_id===s.value.id));Se(()=>r.query.view_id,q=>{const L=h(q)||d.value||b.value||u.value[0];H(L,!1),B(L==null?void 0:L.id)},{immediate:!0}),Se(()=>{var q;return(q=d.value)==null?void 0:q.id},q=>{B(q),o("changed",q)});function B(q){n.singleViewOnly||a.replace({query:{...r.query,view_id:q}})}function M(q){return q.reduce((L,ee,ce)=>(L[ee.id]=ce+1,L),{})}function N(q,L){return q.reduce((ee,ce)=>(ee[ce.id]=L,ee),{})}async function G(q){const L=M(q);Object.keys(L).forEach(ee=>{m({...h(ee),user_order:L[ee]})}),Innoclapps.request().post(`views/${n.identifier}/config/order`,L)}async function U(q={}){let L={...N(u.value,!1),...N(C.value,!0),...q};Object.keys(L).forEach(ee=>{m({...h(ee),is_open_for_user:L[ee]})}),Innoclapps.request().post(`views/${n.identifier}/config/open`,L)}function j(q){parseInt(q)===parseInt(k.value)&&(k.value=null),parseInt(d.value.id)===parseInt(q)&&(d.value=C.value[0].id),y(q),o("deleted",q)}async function O(q){parseInt(q)===parseInt(k.value)?k.value=null:T.value?(await U({[k.value]:!0,[q]:!1}),k.value=null):await U({[q]:!1}),parseInt(d.value.id)===parseInt(q)&&(d.value=C.value[0].id)}function H(q,L=!0){const ee=typeof q=="object"?q.id:q;!!C.value.find(ue=>ue.id==ee)||(F.value>=I?k.value=ee:L===!0?U({[ee]:!0}):k.value=ee),d.value=ee}async function W(q){H(q),w.value=!1,o("created",q)}async function X(q){const L=h(q),{data:ee}=await Innoclapps.request().post("/views",{name:L.name+" Copy",identifier:L.identifier,config:L.config,rules:L.rules,is_shared:!1});f(ee),W(ee)}return(q,L)=>{const ee=c("ICustomSelect"),ce=c("SortableDraggable"),ue=c("IPopoverButton"),oe=c("ITab"),re=c("ITabList"),Y=c("ITabPanel"),ae=c("ITabPanels"),se=c("ITabGroup"),xe=c("ILink"),le=c("IPopoverPanel"),ge=c("IPopover");return g(),D(de,null,[_("div",tte,[l(ee,{label:"name",options:C.value,"model-value":v(d),"onUpdate:modelValue":H},null,8,["options","model-value"])]),_("div",Ue({class:"-mx-[--gutter] hidden border-b border-neutral-300 px-[--gutter] dark:border-white/10 sm:block"},q.$attrs),[_("div",nte,[l(ce,Ue({modelValue:C.value,"onUpdate:modelValue":L[1]||(L[1]=ve=>C.value=ve),tag:"div",class:"grid auto-cols-[minmax(100px,400px)] grid-flow-col grid-cols-[repeat(auto-fill,minmax(100px,400px))] grid-rows-[minmax(38px,1fr)]","item-key":"id"},{...q.$draggable.common,filter:".draggable-exclude",preventOnFilter:!1,ghostClass:"drag-ghost"}),{item:p(({element:ve,index:ie})=>[_("div",{class:be(["relative overflow-hidden border-t border-neutral-300 first:rounded-tl-lg first:border-l odd:border-r even:border-r dark:border-white/10",ie===F.value-1?"rounded-tr-lg":"",F.value>v(I)&&"draggable-exclude"])},[l(Yee,{view:ve,active:v(d)&&ve.id===v(d).id,"is-view-exceeding-max-open-views":ie>=v(I),"is-exceeding-max-open-views":T.value,identifier:e.identifier,"total-open":F.value,onDeleted:j,onSelected:L[0]||(L[0]=me=>q.$emit("selected",me)),onClone:X,onClosed:O},null,8,["view","active","is-view-exceeding-max-open-views","is-exceeding-max-open-views","identifier","total-open"])],2)]),_:1},16,["modelValue"]),_("div",ote,[l(ge,{placement:"bottom-end",offset:15},{default:p(()=>[l(ue,{class:"font-medium",link:""},{default:p(()=>[ne(" + "+K(q.$t("core::data_views.add_view"))+" ("+K(F.value)+"/"+K(v(I))+") ",1)]),_:1}),l(le,{class:"w-[28rem]"},{default:p(()=>[l(se,null,{default:p(()=>[l(re,{centered:""},{default:p(()=>[S.value.length?(g(),R(oe,{key:0},{default:p(()=>[_("span",{class:"max-w-32 truncate",textContent:K(q.$t("core::data_views.default_views"))},null,8,ate)]),_:1})):Z("",!0),l(oe,null,{default:p(()=>[_("span",{class:"max-w-32 truncate",textContent:K(q.$t("core::data_views.created_by_me"))},null,8,rte)]),_:1}),l(oe,null,{default:p(()=>[_("span",{class:"max-w-32 truncate",textContent:K(q.$t("core::data_views.created_by_others"))},null,8,lte)]),_:1})]),_:1}),l(ae,null,{default:p(()=>[S.value.length?(g(),R(Y,{key:0},{default:p(()=>[l(Nm,{views:S.value,onSelected:H},null,8,["views"])]),_:1})):Z("",!0),l(Y,null,{default:p(()=>[l(Nm,{views:E.value,onSelected:H},null,8,["views"])]),_:1}),l(Y,null,{default:p(()=>[l(Nm,{views:A.value,onSelected:H},null,8,["views"])]),_:1})]),_:1})]),_:1}),_("div",ste,[_("div",ite,[l(xe,{onClick:L[2]||(L[2]=ve=>w.value=!0)},{default:p(()=>[ne(" + "+K(q.$t("core::data_views.create_new")),1)]),_:1})])])]),_:1})]),_:1})])]),l(Wee,{visible:w.value,"onUpdate:visible":L[3]||(L[3]=ve=>w.value=ve),identifier:e.identifier,onCreated:W},null,8,["visible","identifier"])],16)],64)}}}),ute={order:[{attribute:"id",direction:"desc"}]};class cte extends Gw{constructor(t={}){super(Object.assign({},ute,t))}append(t,n=!1){return(!this.first(t)||n)&&this.state.data.push(t),this.state.total++,this}prepend(t,n=!1){return(!this.first(t)||n)&&this.state.data.unshift(t),this.state.total++,this}has(t){return this.state.data.indexOf(t)>=0}find(t,n="id"){return this.state.data.filter(o=>t[n]===o[n])}first(t,n="id"){return t?this.find(t,n)[0]:this.items[0]?this.items[0]:null}update(t,n="id"){const o=this.find(t,n);return o&&o.forEach(a=>this.replace(a,Object.assign({},a,t))),this}remove(t,n="id"){const o=this.find(t,n);return o&&o.forEach(a=>{this.state.data.splice(this.state.data.indexOf(a),1),this.state.total--}),this}replace(t,n){return this.state.data.splice(this.state.data.indexOf(t),1,n),this}sortAsc(t){this.set("order",[{attribute:t,direction:"asc"}])}sortDesc(t){this.set("order",[{attribute:t,direction:"desc"}])}toggleSortable(t){if(!this.isOrderedBy(t)){this.sortDesc(t);return}this.isSorted("desc",t)?this.sortAsc(t):this.sortDesc(t)}isOrderedBy(t){return!!(this.get("order")||[]).filter(n=>n.attribute==t).length}isSorted(t,n){return!!(this.get("order")||[]).filter(o=>o.attribute===n&&o.direction==t).length}get(t){return this.state[t]}set(t,n){return this.state[t]=n,this}}function JI(e,t,n={}){const o=V(null),a=V(!1),r=V(!1),{floatResource:s}=Ro(),i=wt(),{form:u}=Qe({ids:[]},{onSuccess:w=>h(w,n.callback)});function d(w){o.value=w,w.floatResource?s({resourceName:e,resourceId:bt(t)[0],mode:w.floatResource}):w.withoutConfirmation?m():b()}async function m(w={}){a.value=!0;try{w.onSubmit&&w.onSubmit(u),await u.fill("ids",bt(t)).post(`${e}/actions/${o.value.uriKey}/run`,{params:n.additionalRequestParams||{},responseType:o.value.responseType}),w.onSubmit&&w.onSubmitted(u)}catch(k){w.onError&&w.onError(k)}finally{a.value=!1}}function f(w){let k=w.data,x=w.headers;k instanceof Blob?zl(k,x["content-disposition"].split("filename=")[1]||"unknown"):k.error?Innoclapps.error(k.error):k.success?Innoclapps.success(k.success):k.info?Innoclapps.info(k.info):k.confetti?xp():k.navigateTo&&i.push(k.navigateTo)}function h(w,k){let x=w.data;if(x.openInNewTab)window.open(x.openInNewTab,"_blank");else{f(w);let $=Object.assign({},o.value,{ids:t.value,response:x,resourceName:e});Ot("action-executed",$),k&&k($)}o.value=null,I()}function y(){o.value=null}function b(){r.value=!0}function I(){r.value=!1}return{form:u,handleSelectionChange:d,selectedAction:o,executeAction:m,actionBeingExecuted:a,confirmationModalVisible:r,handleConfirmationModalHidden:y,showConfirmationModal:b,hideConfirmationModal:I}}const dte={__name:"ActionSelectorDropdown",props:{actions:{type:Array,default:()=>[]}},emits:["change"],setup(e){return(t,n)=>{const o=c("IDropdownButton"),a=c("IDropdownItem"),r=c("IDropdownMenu"),s=c("IDropdown");return g(),R(s,{placement:"bottom-end"},{default:p(()=>[l(o,{text:t.$t("core::actions.actions"),basic:""},null,8,["text"]),l(r,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.actions,i=>(g(),R(a,{key:i.uriKey,text:i.name,onClick:u=>t.$emit("change",i)},null,8,["text","onClick"]))),128))]),_:1})]),_:1})}}},mte={__name:"ActionSelectorSelect",props:{actions:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:t}){const n=t,o=V(null);function a(r){n("change",r),o.value=null}return(r,s)=>{const i=c("ICustomSelect");return g(),R(i,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=u=>o.value=u),label:"name",clearable:!1,filterable:!1,options:e.actions,placeholder:r.$t("core::actions.select"),onOptionSelected:a},null,8,["modelValue","options","placeholder"])}}},xs=Object.assign({inheritAttrs:!1},{__name:"ActionSelector",props:{ids:{type:[Number,String,Array],required:!0},resourceName:{type:String,required:!0},actions:{type:Array,default:()=>[]},additionalRequestParams:{type:Object,default:()=>({})},type:{required:!0,type:String,validator:e=>["select","dropdown"].includes(e)},view:{default:"detail",validator:e=>["index","detail"].indexOf(e)!==-1}},emits:["actionExecuted"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>Vn(n.ids)),{form:r,executeAction:s,selectedAction:i,confirmationModalVisible:u,actionBeingExecuted:d,handleConfirmationModalHidden:m,handleSelectionChange:f}=JI(n.resourceName,a,{additionalRequestParams:n.additionalRequestParams,callback:b=>o("actionExecuted",b)}),h=P(()=>n.actions.filter(b=>!b.sole||b.sole&&a.value.length===1)),y=P(()=>h.value.filter(b=>n.view==="detail"&&b.showOnDetail===!0||n.view==="index"&&b.showOnIndex===!0));return(b,I)=>(g(),D(de,null,[y.value.length>0?(g(),R(_t(e.type==="select"?mte:dte),Ue({key:0,actions:y.value},b.$attrs,{onChange:v(f)}),null,16,["actions","onChange"])):Z("",!0),v(u)?(g(),R(_t(v(i).component),{key:1,visible:v(u),"onUpdate:visible":I[0]||(I[0]=w=>hn(u)?u.value=w:null),action:v(i),ids:a.value,"resource-name":e.resourceName,busy:v(d),form:v(r),onHidden:v(m),onConfirm:v(s),onUpdateFieldValue:I[1]||(I[1]=w=>v(r).fill(w.attribute,w.value)),onSetFieldInitialValue:I[2]||(I[2]=w=>v(r).set(w.attribute,w.value))},null,40,["visible","action","ids","resource-name","busy","form","onHidden","onConfirm"])):Z("",!0)],64))}}),fte={__name:"ResourceTableActions",props:["ids","actions","runActionRequestAdditionalParams","resourceName"],emits:["actionExecuted"],setup(e){const t=e,n=dd(),o=V(null),a=V(null);function r(){if(t.ids.length===0)return;let s=n.value.querySelector("thead>tr>th:first-child"),i=s.querySelector('[data-slot="checkbox-separator"]');o.value.style.left=i.offsetLeft+"px",a.value.style.maxWidth=s.offsetWidth-i.offsetLeft+"px"}return Jr(r),(s,i)=>te((g(),D("div",{ref_key:"wrapperRef",ref:o,class:"absolute top-0 z-50 h-11 w-full bg-neutral-50/60 dark:bg-neutral-500/20"},[_("div",{ref_key:"innerRef",ref:a,class:"h-full border-x border-neutral-900/10 bg-neutral-50 px-1 dark:border-white/10 dark:bg-neutral-900 dark:before:absolute dark:before:inset-0 dark:before:bg-neutral-500/10 sm:pt-1 [&_.toggle-icon]:size-5"},[l(xs,{class:"z-50 !bg-transparent !shadow-none !ring-0",type:"select",view:"index","toggle-icon":"PlayCircle","placeholder-type":"display",ids:e.ids,placeholder:`${s.$t("core::actions.select")} (${s.$t("core::actions.records_count",{count:e.ids.length})})`,"additional-request-params":e.runActionRequestAdditionalParams,actions:e.actions||[],"resource-name":e.resourceName,onActionExecuted:i[0]||(i[0]=u=>s.$emit("actionExecuted",u))},null,8,["ids","placeholder","additional-request-params","actions","resource-name"])],512)],512)),[[fe,e.ids.length>0]])}};function pte(e,t,n,o){for(var a=-1,r=e==null?0:e.length;++a<r;){var s=e[a];t(o,s,n(s),e)}return o}var vte=pte,hte=Li;function gte(e,t,n,o){return hte(e,function(a,r,s){t(o,a,n(a),s)}),o}var bte=gte,yte=vte,_te=bte,wte=ua,Ite=$n;function xte(e,t){return function(n,o){var a=Ite(n)?yte:_te,r=t?t():{};return a(n,e,wte(o),r)}}var ex=xte,kte=Si,$te=ex,Cte=$te(function(e,t,n){kte(e,n,t)}),Ste=Cte;const Tte=Rt(Ste),Ete={key:0,class:"mb-4 mt-10"},Fte={class:"flex items-center space-x-1.5"},Ate={class:"grow"},Rte={key:0,value:""},Dte=["value","textContent"],Ote={class:"flex-auto"},Pte={value:"asc"},Mte={value:"desc"},Bte={"data-sortable-handle":"table-customize-sorting",class:"cursor-move"},Nte={class:"mb-4 max-h-[400px] overflow-auto"},Vte={class:"grow"},Lte=["value"],qte={class:"relative mt-1 rounded-md shadow-sm"},Ute={class:"mt-5"},jte={class:"flex items-center justify-between text-right"},zte={class:"ml-auto space-x-2"},Hte=25,Wte=5,Gte={__name:"ResourceTableCustomize",props:{identifier:{required:!0,type:String},cacheKey:{required:!0,validator:e=>typeof e=="string"||Zt(e)}},setup(e,{expose:t}){const n=e,{activeView:o,patchView:a}=ka(n.identifier),{settings:r,reloadTable:s}=qo(n.identifier,()=>n.cacheKey),i=V(!1),u=V({}),d=V([]),m=V(null),f=V(null),h=V(!1),y=V(!1),b=V(null),I=V(!1),w=r.value.minimumPollingInterval,k=V(null),{form:x}=Qe(),$=P(()=>Vo(r.value.columns,X=>X.attribute!=="actions")),C=P(()=>Vo($.value,"sortable")),F=P(()=>d.value.length===C.value.length?!0:d.value.some(X=>X.attribute===""));function T(X){const{index:q,futureIndex:L}=X.draggedContext,ee=ce=>u.value[ce].primary;if(!r.value.reorderable||ee(q)||L===0&&ee(L))return!1}function S(X){return!!ft(d.value,["attribute",X])}function A(){d.value.push({attribute:"",direction:"asc"})}function E(X){d.value.splice(X,1)}function B(){i.value&&(i.value=!1),m.value=null}function M(){const X=Tte($.value,"attribute"),q=ee=>{const ce=X[ee.attribute];return{label:ce.label,primary:ce.primary,canToggleVisibility:ce.canToggleVisibility,attribute:ee.attribute,order:ee.order,width:ee.width,wrap:ee.wrap,visible:!ee.hidden,_searchMatch:m.value?ce.label.toLowerCase().includes(m.value.toLowerCase()):!0}};let L=o.value.config.table.columns.filter(ee=>Object.hasOwn(X,ee.attribute)).map(q);L=L.concat(Vo($.value,ee=>!ft(L,["attribute",ee.attribute])).map(q)),u.value=mr(L,"order")}function N(){U(x.clear().set({config:{...o.value.config,table:{...r.value.defaults,columns:j($.value.map(X=>({...X,order:X.order,visible:!X.hidden})))}}})).then(H)}function G(X,q=!0){return U(x.clear().set({config:{...o.value.config,table:{order:d.value.filter(L=>L.attribute!==""),columns:j(X||u.value),pollingInterval:k.value,maxHeight:f.value,condensed:h.value,bordered:y.value,perPage:b.value}}}),q)}async function U(X,q=!0){const L=await X.put(`views/${o.value.id}`);a(L),m.value="",await We(),O(),q&&(await We(),s()),i.value=!1}function j(X){const q=new Map(X.map((ee,ce)=>[ee.attribute,ce+1]));let L=[...Nn(u.value)];return L=L.map(ee=>{const ce=q.get(ee.attribute);return{...ee,order:ce!==void 0?ce:ee.order}}),L.sort((ee,ce)=>ee.order-ce.order),L.map((ee,ce)=>{const ue=X.find(oe=>oe.attribute===ee.attribute)||{};return{attribute:ee.attribute,order:ce+1,width:ue.width!==void 0?ue.width:ee.width,wrap:ue.wrap!==void 0?ue.wrap:ee.wrap,hidden:Object.hasOwn(ue,"visible")?!ue.visible:Object.hasOwn(ue,"hidden")?ue.hidden:!0}})}function O(){k.value=o.value.config.table.pollingInterval,I.value=parseInt(o.value.config.table.pollingInterval)>=w,f.value=o.value.config.table.maxHeight,h.value=o.value.config.table.condensed,y.value=o.value.config.table.bordered,b.value=o.value.config.table.perPage,M()}function H(){O(),o.value.config.table.order.length?d.value=Nn(o.value.config.table.order):A()}function W(X){i.value=X}return Se(()=>{var X;return(X=o.value)==null?void 0:X.id},X=>{X&&H()},{immediate:!0}),t({save:G,onColumnMove:T,setVisibility:W}),(X,q)=>{const L=c("ITextDark"),ee=c("IFormSelect"),ce=c("IButton"),ue=c("Icon"),oe=c("SortableDraggable"),re=c("IFormLabel"),Y=c("InputSearch"),ae=c("IFormCheckbox"),se=c("IFormCheckboxLabel"),xe=c("IFormCheckboxField"),le=c("IFormGroup"),ge=c("IFormInput"),ve=c("IModal"),ie=ze("i-tooltip");return g(),R(ve,{id:e.identifier+"listSettings",size:"sm",visible:i.value,title:v(r).singleViewOnly?X.$t("core::table.table_settings"):X.$t("core::data_views.view_settings"),onHidden:B},{"modal-footer":p(()=>[_("div",jte,[te(l(ce,{disabled:v(x).busy,text:X.$t("core::app.reset"),"confirm-text":X.$t("core::app.confirm"),basic:"",confirmable:"",onConfirmed:N},null,8,["disabled","text","confirm-text"]),[[fe,v(o).is_system_default||v(r).singleViewOnly]]),_("div",zte,[l(ce,{disabled:v(x).busy,text:X.$t("core::app.cancel"),basic:"",onClick:q[11]||(q[11]=me=>i.value=!1)},null,8,["disabled","text"]),l(ce,{variant:"primary",disabled:v(x).busy,text:X.$t("core::app.save"),onClick:q[12]||(q[12]=me=>G())},null,8,["disabled","text"])])])]),default:p(()=>[v(r).allowDefaultSortChange?(g(),D("div",Ete,[l(L,{class:"mb-1 font-medium",text:X.$t("core::table.default_sort")},null,8,["text"]),l(oe,Ue({modelValue:d.value,"onUpdate:modelValue":q[0]||(q[0]=me=>d.value=me),class:"space-y-2",handle:"[data-sortable-handle='table-customize-sorting']","item-key":me=>me.attribute+"-"+me.direction},X.$draggable.common),{item:p(({index:me})=>[_("div",Fte,[_("div",Ate,[l(ee,{id:"column_"+me,modelValue:d.value[me].attribute,"onUpdate:modelValue":Ce=>d.value[me].attribute=Ce},{default:p(()=>[d.value[me].attribute?Z("",!0):(g(),D("option",Rte)),(g(!0),D(de,null,Ie(C.value,Ce=>te((g(),D("option",{key:Ce.attribute,value:Ce.attribute,textContent:K(Ce.label)},null,8,Dte)),[[fe,!S(Ce.attribute)]])),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue"])]),_("div",Ote,[l(ee,{id:"column_type_"+me,modelValue:d.value[me].direction,"onUpdate:modelValue":Ce=>d.value[me].direction=Ce},{default:p(()=>[_("option",Pte," Asc ("+K(X.$t("core::app.ascending"))+") ",1),_("option",Mte," Desc ("+K(X.$t("core::app.descending"))+") ",1)]),_:2},1032,["id","modelValue","onUpdate:modelValue"])]),l(ce,{variant:me===0?"secondary":"danger",disabled:me===0&&F.value,soft:me>0,icon:me===0?"PlusSolid":"MinusSolid",onClick:Ce=>me===0?A():E(me)},null,8,["variant","disabled","soft","icon","onClick"]),_("div",Bte,[l(ue,{class:"size-5 text-neutral-500",icon:"Selector"})])])]),_:1},16,["modelValue","item-key"])])):Z("",!0),l(re,{class:"mb-1 font-medium",for:"search-table-columns",label:X.$t("core::table.columns")},null,8,["label"]),u.value.length>Wte?(g(),R(Y,{key:1,id:"search-table-columns",modelValue:m.value,"onUpdate:modelValue":[q[1]||(q[1]=me=>m.value=me),M],class:"mb-4"},null,8,["modelValue"])):Z("",!0),_("div",Nte,[l(oe,Ue({modelValue:u.value,"onUpdate:modelValue":q[2]||(q[2]=me=>u.value=me),"item-key":"attribute",move:T},{...X.$draggable.scrollable,filter:".visibility-checkbox, .visibility-checkbox-label"}),{item:p(({element:me,index:Ce})=>[te((g(),D("div",{class:be(["mb-1.5 mr-2 flex items-center rounded-md border border-neutral-200 px-3 py-2 dark:border-neutral-500/30",me.primary?"bg-neutral-50 dark:bg-neutral-800":"hover:bg-neutral-50 dark:hover:bg-neutral-800"])},[_("div",Vte,[l(xe,null,{default:p(()=>[l(ae,{checked:u.value[Ce].visible,"onUpdate:checked":ke=>u.value[Ce].visible=ke,class:"visibility-checkbox",disabled:!me.canToggleVisibility||me.primary===!0},null,8,["checked","onUpdate:checked","disabled"]),l(se,{class:"visibility-checkbox-label inline-flex items-center space-x-1"},{default:p(()=>[me.helpText?te((g(),R(ue,{key:0,icon:"QuestionMarkCircle",class:"size-4 text-neutral-600"},null,512)),[[ie,me.helpText]]):Z("",!0),_("span",null,K(me.label),1)]),_:2},1024)]),_:2},1024)]),!me.primary&&v(r).reorderable?te((g(),R(ue,{key:0,class:"size-5 cursor-move text-neutral-500",icon:"Selector"},null,512)),[[fe,!m.value]]):Z("",!0)],2)),[[fe,me._searchMatch],[ie,me.primary?X.$t("core::table.primary_column"):""]])]),_:1},16,["modelValue"])]),l(le,{"label-for":"tableSettingsPerPage",label:X.$t("core::table.per_page")},{default:p(()=>[l(ee,{id:"tableSettingsPerPage",modelValue:b.value,"onUpdate:modelValue":q[3]||(q[3]=me=>b.value=me)},{default:p(()=>[(g(),D(de,null,Ie([25,50,100],me=>_("option",{key:me,value:me},K(me),9,Lte)),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),l(le,{"label-for":"tableSettingsMaxHeight",label:X.$t("core::table.max_height"),description:X.$t("core::table.max_height_info")},{default:p(()=>[_("div",qte,[l(ge,{id:"tableSettingsMaxHeight",modelValue:f.value,"onUpdate:modelValue":q[4]||(q[4]=me=>f.value=me),type:"number",min:"200",step:"50",class:"pr-8 sm:pr-10 [&::-webkit-calendar-picker-indicator]:opacity-0",list:"maxHeight"},null,8,["modelValue"]),q[13]||(q[13]=_("datalist",{id:"maxHeight"},[_("option",{value:"200"}),_("option",{value:"250"}),_("option",{value:"300"}),_("option",{value:"350"}),_("option",{value:"400"}),_("option",{value:"500"})],-1)),q[14]||(q[14]=_("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[_("span",{class:"-mt-1 text-neutral-400"},"px")],-1))])]),_:1},8,["label","description"]),_("div",Ute,[l(xe,null,{default:p(()=>[l(ae,{checked:y.value,"onUpdate:checked":q[5]||(q[5]=me=>y.value=me)},null,8,["checked"]),l(se,{text:X.$t("core::table.bordered")},null,8,["text"])]),_:1}),l(xe,null,{default:p(()=>[l(ae,{checked:h.value,"onUpdate:checked":q[6]||(q[6]=me=>h.value=me)},null,8,["checked"]),l(se,{text:X.$t("core::table.condensed")},null,8,["text"])]),_:1}),l(le,{description:I.value?X.$t("core::table.polling_info"):null},{default:p(()=>[l(xe,null,{default:p(()=>[l(ae,{checked:I.value,"onUpdate:checked":q[7]||(q[7]=me=>I.value=me),onChange:q[8]||(q[8]=me=>k.value=me?Hte:null)},null,8,["checked"]),l(se,{text:X.$t("core::table.enable_polling")},null,8,["text"])]),_:1}),te(l(ge,{modelValue:k.value,"onUpdate:modelValue":q[9]||(q[9]=me=>k.value=me),type:"number",min:"10",class:"mt-2",onBlur:q[10]||(q[10]=me=>k.value<v(w)?k.value=v(w):void 0)},null,8,["modelValue"]),[[fe,I.value]])]),_:1},8,["description"])])]),_:1},8,["id","visible","title"])}}},Kte={__name:"ResourceTableHead",props:{columns:{type:Array,required:!0},isLoaded:{type:Boolean,required:!0},resizeDisabled:{type:Boolean,default:!0}},emits:["resized"],setup(e,{emit:t}){const n=e,o=t,a=dd(),r=P(()=>n.columns.length),s=P(()=>n.columns.map(O=>O.width).join("|"));let i,u=0,d,m,f,h,y;function b(){return Array.prototype.slice.call(a.value.querySelectorAll("thead>tr>th"))}function I(){return a.value.querySelectorAll(".resizer")}function w(){if(!a.value)return;let O=0,H=b();a.value.style.width=null,a.value.style.minWidth=null;for(let W=0;W<H.length;W++)H[W].style.width=n.columns[W].width;if(!n.resizeDisabled){for(let W=0;W<H.length;W++){let X=B(W),q=U(M(H[W],"width"));q===0&&(q=G(H[W])),X&&q<X&&(q=X),k(H[W])||(H[W].style.width=q+"px"),O+=q}a.value.style.width=O+"px",a.value.style.minWidth="100%"}}function k(O){return O.classList.contains("table-actions-column")}function x(){let O=document.createElement("div");return O.classList.add("resizer","absolute","w-[0.2rem]","h-full","top-0","right-0","cursor-col-resize","select-none","group-hover/th:bg-neutral-400","dark:group-hover/th:bg-neutral-600"),O}function $(){if(n.resizeDisabled)return;let O=b();if(!O.length)return;w();let H=O.length;for(let W=0;W<H;W++){if(!n.columns[W].resizeable)continue;let X=x();O[W].appendChild(X),X.addEventListener("mousedown",F)}document.addEventListener("mousemove",S,{passive:!0}),document.addEventListener("mouseup",A,{passive:!0})}function C(){document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",A),a.value&&I().forEach(O=>{O.removeEventListener("mousedown",F),O.remove()})}function F(O){d=O.target.parentElement,m=b().indexOf(d),f=d.nextElementSibling,d.querySelector(".resizer").classList.add("resizing"),f&&k(f)&&(f=null),i=O.pageX,h=d.offsetWidth,f&&(y=f.offsetWidth)}function T(O){const H=O.getBoundingClientRect().width,W=O.parentElement.getBoundingClientRect().width;return H>W}function S(O){if(!d)return;let H=O.pageX-i,W="";O.pageX<u?W="left":O.pageX>u&&(W="right"),u=O.pageX;let X,q=B(m),L=!1,ee=h+H;if(!q||ee>=q?X=ee:(X=q,L=!0),!L&&f){let ce=y-H,ue=B(m+1);(!ue||ce>=ue)&&(f.style.width=ce+"px")}else W==="left"&&!f&&T(a.value)&&(a.value.style.width=U(a.value.style.width)+H+"px");d.style.width=X+"px"}function A(O){d&&(d.querySelector(".resizer").classList.remove("resizing"),E()),d=void 0,f=void 0,i=void 0,u=void 0,y=void 0,h=void 0,m=void 0}function E(){o("resized",n.columns.map((O,H)=>({...O,width:N(H)})))}function B(O){return n.columns[O].minWidth?U(n.columns[O].minWidth):null}function M(O,H){return window.getComputedStyle(O,null).getPropertyValue(H)}function N(O){return M(b()[O],"width")}function G(O){const H={display:O.style.display,position:O.style.position,visibility:O.style.visibility,left:O.style.left};O.style.display="block",O.style.position="absolute",O.style.visibility="hidden",O.style.left="-9999px";const W=O.offsetWidth;return O.style.display=H.display,O.style.position=H.position,O.style.visibility=H.visibility,O.style.left=H.left,W}function U(O){return Number(O.replace("px","")).valueOf()}async function j(){await We(),C(),$()}return Se(s,()=>{w()},{flush:"post"}),Se(()=>n.isLoaded,O=>{O&&j()},{flush:"post",immediate:!0}),Se(r,O=>{O>0&&j()},{flush:"post"}),mn(C),Xe(()=>n.resizeDisabled&&w()),(O,H)=>{const W=c("ITableHead");return g(),R(W,null,{default:p(()=>[Ee(O.$slots,"default")]),_:3})}}},Zte={},Yte={class:"absolute top-0 h-full w-px bg-neutral-200 dark:bg-neutral-800"};function Xte(e,t){return g(),D("div",Yte)}const wv=an(Zte,[["render",Xte]]),tx={__name:"ActionColumnSeparator",setup(e){return(t,n)=>(g(),R(wv,{class:"-left-px"}))}},nx={__name:"CheckboxSeparator",props:{condensed:{type:Boolean,required:!0}},setup(e){return(t,n)=>(g(),R(wv,{class:be(e.condensed?"left-8":"left-12")},null,8,["class"]))}},ox={__name:"PrimaryColumnSeparator",setup(e){return(t,n)=>(g(),R(wv,{class:"right-0 shadow-[1px_0px_10px] shadow-neutral-600/30 dark:shadow-neutral-600/30"}))}};function ax(e,t,n){let o=V(n==null?void 0:n.value),a=P(()=>e.value!==void 0);return[P(()=>a.value?e.value:o.value),function(r){return a.value||(o.value=r),t==null?void 0:t(r)}]}function wd(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Hi(){let e=[],t={addEventListener(n,o,a,r){return n.addEventListener(o,a,r),t.add(()=>n.removeEventListener(o,a,r))},requestAnimationFrame(...n){let o=requestAnimationFrame(...n);t.add(()=>cancelAnimationFrame(o))},nextFrame(...n){t.requestAnimationFrame(()=>{t.requestAnimationFrame(...n)})},setTimeout(...n){let o=setTimeout(...n);t.add(()=>clearTimeout(o))},microTask(...n){let o={current:!0};return wd(()=>{o.current&&n[0]()}),t.add(()=>{o.current=!1})},style(n,o,a){let r=n.style.getPropertyValue(o);return Object.assign(n.style,{[o]:a}),this.add(()=>{Object.assign(n.style,{[o]:r})})},group(n){let o=Hi();return n(o),this.add(()=>o.dispose())},add(n){return e.push(n),()=>{let o=e.indexOf(n);if(o>=0)for(let a of e.splice(o,1))a()}},dispose(){for(let n of e.splice(0))n()}};return t}var t1;let Qte=Symbol("headlessui.useid"),Jte=0;const An=(t1=oy)!=null?t1:function(){return Le(Qte,()=>`${++Jte}`)()};function je(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function Dn(e,t,...n){if(e in t){let a=t[e];return typeof a=="function"?a(...n):a}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Dn),o}var ene=Object.defineProperty,tne=(e,t,n)=>t in e?ene(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n1=(e,t,n)=>(tne(e,typeof t!="symbol"?t+"":t,n),n);let nne=class{constructor(){n1(this,"current",this.detect()),n1(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Wi=new nne;function no(e){if(Wi.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=je(e);if(t)return t.ownerDocument}return document}let jf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var Kt=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Kt||{}),Xo=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Xo||{}),one=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(one||{});function Gi(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(jf)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Id=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Id||{});function xd(e,t=0){var n;return e===((n=no(e))==null?void 0:n.body)?!1:Dn(t,{0(){return e.matches(jf)},1(){let o=e;for(;o!==null;){if(o.matches(jf))return!0;o=o.parentElement}return!1}})}function rx(e){let t=no(e);We(()=>{t&&!xd(t.activeElement,0)&&cr(e)})}var ane=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ane||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function cr(e){e==null||e.focus({preventScroll:!0})}let rne=["textarea","input"].join(",");function lne(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,rne))!=null?n:!1}function rr(e,t=n=>n){return e.slice().sort((n,o)=>{let a=t(n),r=t(o);if(a===null||r===null)return 0;let s=a.compareDocumentPosition(r);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function sne(e,t){return Bn(Gi(),t,{relativeTo:e})}function Bn(e,t,{sorted:n=!0,relativeTo:o=null,skipElements:a=[]}={}){var r;let s=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,i=Array.isArray(e)?n?rr(e):e:Gi(e);a.length>0&&i.length>1&&(i=i.filter(b=>!a.includes(b))),o=o??s.activeElement;let u=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(o))-1;if(t&4)return Math.max(0,i.indexOf(o))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=t&32?{preventScroll:!0}:{},f=0,h=i.length,y;do{if(f>=h||f+h<=0)return 0;let b=d+f;if(t&16)b=(b+h)%h;else{if(b<0)return 3;if(b>=h)return 1}y=i[b],y==null||y.focus(m),f+=u}while(y!==s.activeElement);return t&6&&lne(y)&&y.select(),2}function lx(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ine(){return/Android/gi.test(window.navigator.userAgent)}function une(){return lx()||ine()}function Ru(e,t,n){Wi.isServer||Jt(o=>{document.addEventListener(e,t,n),o(()=>document.removeEventListener(e,t,n))})}function sx(e,t,n){Wi.isServer||Jt(o=>{window.addEventListener(e,t,n),o(()=>window.removeEventListener(e,t,n))})}function Iv(e,t,n=P(()=>!0)){function o(r,s){if(!n.value||r.defaultPrevented)return;let i=s(r);if(i===null||!i.getRootNode().contains(i))return;let u=function d(m){return typeof m=="function"?d(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(let d of u){if(d===null)continue;let m=d instanceof HTMLElement?d:je(d);if(m!=null&&m.contains(i)||r.composed&&r.composedPath().includes(m))return}return!xd(i,Id.Loose)&&i.tabIndex!==-1&&r.preventDefault(),t(r,i)}let a=V(null);Ru("pointerdown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),Ru("mousedown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),Ru("click",r=>{une()||a.value&&(o(r,()=>a.value),a.value=null)},!0),Ru("touchend",r=>o(r,()=>r.target instanceof HTMLElement?r.target:null),!0),sx("blur",r=>o(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function o1(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function kd(e,t){let n=V(o1(e.value.type,e.value.as));return Xe(()=>{n.value=o1(e.value.type,e.value.as)}),Jt(()=>{var o;n.value||je(t)&&je(t)instanceof HTMLButtonElement&&!((o=je(t))!=null&&o.hasAttribute("type"))&&(n.value="button")}),n}function a1(e){return[e.screenX,e.screenY]}function cne(){let e=V([-1,-1]);return{wasMoved(t){let n=a1(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=a1(t)}}}function ix({container:e,accept:t,walk:n,enabled:o}){Jt(()=>{let a=e.value;if(!a||o!==void 0&&!o.value)return;let r=no(e);if(!r)return;let s=Object.assign(u=>t(u),{acceptNode:t}),i=r.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,s,!1);for(;i.nextNode();)n(i.currentNode)})}var Lo=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Lo||{}),lr=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(lr||{});function Yt({visible:e=!0,features:t=0,ourProps:n,theirProps:o,...a}){var r;let s=cx(o,n),i=Object.assign(a,{props:s});if(e||t&2&&s.static)return Vm(i);if(t&1){let u=(r=s.unmount)==null||r?0:1;return Dn(u,{0(){return null},1(){return Vm({...a,props:{...s,hidden:!0,style:{display:"none"}}})}})}return Vm(i)}function Vm({props:e,attrs:t,slots:n,slot:o,name:a}){var r,s;let{as:i,...u}=Ki(e,["unmount","static"]),d=(r=n.default)==null?void 0:r.call(n,o),m={};if(o){let f=!1,h=[];for(let[y,b]of Object.entries(o))typeof b=="boolean"&&(f=!0),b===!0&&h.push(y);f&&(m["data-headlessui-state"]=h.join(" "))}if(i==="template"){if(d=ux(d??[]),Object.keys(u).length>0||Object.keys(t).length>0){let[f,...h]=d??[];if(!dne(f)||h.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${a} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(t)).map(I=>I.trim()).filter((I,w,k)=>k.indexOf(I)===w).sort((I,w)=>I.localeCompare(w)).map(I=>`  - ${I}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(I=>`  - ${I}`).join(`
`)].join(`
`));let y=cx((s=f.props)!=null?s:{},u,m),b=Ii(f,y,!0);for(let I in y)I.startsWith("on")&&(b.props||(b.props={}),b.props[I]=y[I]);return b}return Array.isArray(d)&&d.length===1?d[0]:d}return Ae(i,Object.assign({},u,m),{default:()=>d})}function ux(e){return e.flatMap(t=>t.type===de?ux(t.children):[t])}function cx(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let o of e)for(let a in o)a.startsWith("on")&&typeof o[a]=="function"?(n[a]!=null||(n[a]=[]),n[a].push(o[a])):t[a]=o[a];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(o=>[o,void 0])));for(let o in n)Object.assign(t,{[o](a,...r){let s=n[o];for(let i of s){if(a instanceof Event&&a.defaultPrevented)return;i(a,...r)}}});return t}function dx(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ki(e,t=[]){let n=Object.assign({},e);for(let o of t)o in n&&delete n[o];return n}function dne(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var ta=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ta||{});let na=Ve({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:n}){return()=>{var o;let{features:a,...r}=e,s={"aria-hidden":(a&2)===2?!0:(o=r["aria-hidden"])!=null?o:void 0,hidden:(a&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(a&4)===4&&(a&2)!==2&&{display:"none"}}};return Yt({ourProps:s,theirProps:r,slot:{},attrs:n,slots:t,name:"Hidden"})}}}),mx=Symbol("Context");var kn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(kn||{});function mne(){return ks()!==null}function ks(){return Le(mx,null)}function xv(e){st(mx,e)}var Tt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Tt||{});function fne(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Br=[];fne(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&Br[0]!==t.target&&(Br.unshift(t.target),Br=Br.filter(n=>n!=null&&n.isConnected),Br.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function pne(e){throw new Error("Unexpected object: "+e)}var Io=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Io||{});function vne(e,t){let n=t.resolveItems();if(n.length<=0)return null;let o=t.resolveActiveIndex(),a=o??-1;switch(e.focus){case 0:{for(let r=0;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 1:{a===-1&&(a=n.length);for(let r=a-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 2:{for(let r=a+1;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 3:{for(let r=n.length-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return o}case 4:{for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return o}case 5:return null;default:pne(e)}}function fx(e={},t=null,n=[]){for(let[o,a]of Object.entries(e))vx(n,px(t,o),a);return n}function px(e,t){return e?e+"["+t+"]":t}function vx(e,t,n){if(Array.isArray(n))for(let[o,a]of n.entries())vx(e,px(t,o.toString()),a);else n instanceof Date?e.push([t,n.toISOString()]):typeof n=="boolean"?e.push([t,n?"1":"0"]):typeof n=="string"?e.push([t,n]):typeof n=="number"?e.push([t,`${n}`]):n==null?e.push([t,""]):fx(n,t,e)}function hx(e){var t,n;let o=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(o){for(let a of o.elements)if(a!==e&&(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image")){a.click();return}(n=o.requestSubmit)==null||n.call(o)}}function kv(e,t,n,o){Wi.isServer||Jt(a=>{e=e??window,e.addEventListener(t,n,o),a(()=>e.removeEventListener(t,n,o))})}var xo=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(xo||{});function $v(){let e=V(0);return sx("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function gx(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.value){let o=je(n);o instanceof HTMLElement&&t.add(o)}return t}var bx=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(bx||{});let Gs=Object.assign(Ve({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:V(new Set)}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){let a=V(null);o({el:a,$el:a});let r=P(()=>no(a)),s=V(!1);Xe(()=>s.value=!0),un(()=>s.value=!1),gne({ownerDocument:r},P(()=>s.value&&!!(e.features&16)));let i=bne({ownerDocument:r,container:a,initialFocus:P(()=>e.initialFocus)},P(()=>s.value&&!!(e.features&2)));yne({ownerDocument:r,container:a,containers:e.containers,previousActiveElement:i},P(()=>s.value&&!!(e.features&8)));let u=$v();function d(y){let b=je(a);b&&(I=>I())(()=>{Dn(u.value,{[xo.Forwards]:()=>{Bn(b,Kt.First,{skipElements:[y.relatedTarget]})},[xo.Backwards]:()=>{Bn(b,Kt.Last,{skipElements:[y.relatedTarget]})}})})}let m=V(!1);function f(y){y.key==="Tab"&&(m.value=!0,requestAnimationFrame(()=>{m.value=!1}))}function h(y){if(!s.value)return;let b=gx(e.containers);je(a)instanceof HTMLElement&&b.add(je(a));let I=y.relatedTarget;I instanceof HTMLElement&&I.dataset.headlessuiFocusGuard!=="true"&&(yx(b,I)||(m.value?Bn(je(a),Dn(u.value,{[xo.Forwards]:()=>Kt.Next,[xo.Backwards]:()=>Kt.Previous})|Kt.WrapAround,{relativeTo:y.target}):y.target instanceof HTMLElement&&cr(y.target)))}return()=>{let y={},b={ref:a,onKeydown:f,onFocusout:h},{features:I,initialFocus:w,containers:k,...x}=e;return Ae(de,[!!(I&4)&&Ae(na,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:ta.Focusable}),Yt({ourProps:b,theirProps:{...t,...x},slot:y,attrs:t,slots:n,name:"FocusTrap"}),!!(I&4)&&Ae(na,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:d,features:ta.Focusable})])}}}),{features:bx});function hne(e){let t=V(Br.slice());return Se([e],([n],[o])=>{o===!0&&n===!1?wd(()=>{t.value.splice(0)}):o===!1&&n===!0&&(t.value=Br.slice())},{flush:"post"}),()=>{var n;return(n=t.value.find(o=>o!=null&&o.isConnected))!=null?n:null}}function gne({ownerDocument:e},t){let n=hne(t);Xe(()=>{Jt(()=>{var o,a;t.value||((o=e.value)==null?void 0:o.activeElement)===((a=e.value)==null?void 0:a.body)&&cr(n())},{flush:"post"})}),un(()=>{t.value&&cr(n())})}function bne({ownerDocument:e,container:t,initialFocus:n},o){let a=V(null),r=V(!1);return Xe(()=>r.value=!0),un(()=>r.value=!1),Xe(()=>{Se([t,n,o],(s,i)=>{if(s.every((d,m)=>(i==null?void 0:i[m])===d)||!o.value)return;let u=je(t);u&&wd(()=>{var d,m;if(!r.value)return;let f=je(n),h=(d=e.value)==null?void 0:d.activeElement;if(f){if(f===h){a.value=h;return}}else if(u.contains(h)){a.value=h;return}f?cr(f):Bn(u,Kt.First|Kt.NoScroll)===Xo.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),a.value=(m=e.value)==null?void 0:m.activeElement})},{immediate:!0,flush:"post"})}),a}function yne({ownerDocument:e,container:t,containers:n,previousActiveElement:o},a){var r;kv((r=e.value)==null?void 0:r.defaultView,"focus",s=>{if(!a.value)return;let i=gx(n);je(t)instanceof HTMLElement&&i.add(je(t));let u=o.value;if(!u)return;let d=s.target;d&&d instanceof HTMLElement?yx(i,d)?(o.value=d,cr(d)):(s.preventDefault(),s.stopPropagation(),cr(u)):cr(o.value)},!0)}function yx(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function _ne(e){let t=Pt(e.getSnapshot());return un(e.subscribe(()=>{t.value=e.getSnapshot()})),t}function wne(e,t){let n=e(),o=new Set;return{getSnapshot(){return n},subscribe(a){return o.add(a),()=>o.delete(a)},dispatch(a,...r){let s=t[a].call(n,...r);s&&(n=s,o.forEach(i=>i()))}}}function Ine(){let e;return{before({doc:t}){var n;let o=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-o.clientWidth},after({doc:t,d:n}){let o=t.documentElement,a=o.clientWidth-o.offsetWidth,r=e-a;n.style(o,"paddingRight",`${r}px`)}}}function xne(){return lx()?{before({doc:e,d:t,meta:n}){function o(a){return n.containers.flatMap(r=>r()).some(r=>r.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let i=Hi();i.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>i.dispose()))}let r=(a=window.scrollY)!=null?a:window.pageYOffset,s=null;t.addEventListener(e,"click",i=>{if(i.target instanceof HTMLElement)try{let u=i.target.closest("a");if(!u)return;let{hash:d}=new URL(u.href),m=e.querySelector(d);m&&!o(m)&&(s=m)}catch{}},!0),t.addEventListener(e,"touchstart",i=>{if(i.target instanceof HTMLElement)if(o(i.target)){let u=i.target;for(;u.parentElement&&o(u.parentElement);)u=u.parentElement;t.style(u,"overscrollBehavior","contain")}else t.style(i.target,"touchAction","none")}),t.addEventListener(e,"touchmove",i=>{if(i.target instanceof HTMLElement){if(i.target.tagName==="INPUT")return;if(o(i.target)){let u=i.target;for(;u.parentElement&&u.dataset.headlessuiPortal!==""&&!(u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth);)u=u.parentElement;u.dataset.headlessuiPortal===""&&i.preventDefault()}else i.preventDefault()}},{passive:!1}),t.add(()=>{var i;let u=(i=window.scrollY)!=null?i:window.pageYOffset;r!==u&&window.scrollTo(0,r),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)})})}}:{}}function kne(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function $ne(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let jr=wne(()=>new Map,{PUSH(e,t){var n;let o=(n=this.get(e))!=null?n:{doc:e,count:0,d:Hi(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let o={doc:e,d:t,meta:$ne(n)},a=[xne(),Ine(),kne()];a.forEach(({before:r})=>r==null?void 0:r(o)),a.forEach(({after:r})=>r==null?void 0:r(o))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});jr.subscribe(()=>{let e=jr.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let o=t.get(n.doc)==="hidden",a=n.count!==0;(a&&!o||!a&&o)&&jr.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&jr.dispatch("TEARDOWN",n)}});function Cne(e,t,n){let o=_ne(jr),a=P(()=>{let r=e.value?o.value.get(e.value):void 0;return r?r.count>0:!1});return Se([e,t],([r,s],[i],u)=>{if(!r||!s)return;jr.dispatch("PUSH",r,n);let d=!1;u(()=>{d||(jr.dispatch("POP",i??r,n),d=!0)})},{immediate:!0}),a}let Lm=new Map,Ks=new Map;function r1(e,t=V(!0)){Jt(n=>{var o;if(!t.value)return;let a=je(e);if(!a)return;n(function(){var s;if(!a)return;let i=(s=Ks.get(a))!=null?s:1;if(i===1?Ks.delete(a):Ks.set(a,i-1),i!==1)return;let u=Lm.get(a);u&&(u["aria-hidden"]===null?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",u["aria-hidden"]),a.inert=u.inert,Lm.delete(a))});let r=(o=Ks.get(a))!=null?o:0;Ks.set(a,r+1),r===0&&(Lm.set(a,{"aria-hidden":a.getAttribute("aria-hidden"),inert:a.inert}),a.setAttribute("aria-hidden","true"),a.inert=!0)})}function _x({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let o=V(null),a=no(o);function r(){var s,i,u;let d=[];for(let m of e)m!==null&&(m instanceof HTMLElement?d.push(m):"value"in m&&m.value instanceof HTMLElement&&d.push(m.value));if(t!=null&&t.value)for(let m of t.value)d.push(m);for(let m of(s=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?s:[])m!==document.body&&m!==document.head&&m instanceof HTMLElement&&m.id!=="headlessui-portal-root"&&(m.contains(je(o))||m.contains((u=(i=je(o))==null?void 0:i.getRootNode())==null?void 0:u.host)||d.some(f=>m.contains(f))||d.push(m));return d}return{resolveContainers:r,contains(s){return r().some(i=>i.contains(s))},mainTreeNodeRef:o,MainTreeNode(){return n!=null?null:Ae(na,{features:ta.Hidden,ref:o})}}}function Sne(){let e=V(null);return{mainTreeNodeRef:e,MainTreeNode(){return Ae(na,{features:ta.Hidden,ref:e})}}}let wx=Symbol("ForcePortalRootContext");function Tne(){return Le(wx,!1)}let zf=Ve({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return st(wx,e.force),()=>{let{force:o,...a}=e;return Yt({theirProps:a,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}}),Ix=Symbol("StackContext");var Hf=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(Hf||{});function Ene(){return Le(Ix,()=>{})}function Fne({type:e,enabled:t,element:n,onUpdate:o}){let a=Ene();function r(...s){o==null||o(...s),a(...s)}Xe(()=>{Se(t,(s,i)=>{s?r(0,e,n):i===!0&&r(1,e,n)},{immediate:!0,flush:"sync"})}),un(()=>{t.value&&r(1,e,n)}),st(Ix,r)}let xx=Symbol("DescriptionContext");function Ane(){let e=Le(xx,null);if(e===null)throw new Error("Missing parent");return e}function $d({slot:e=V({}),name:t="Description",props:n={}}={}){let o=V([]);function a(r){return o.value.push(r),()=>{let s=o.value.indexOf(r);s!==-1&&o.value.splice(s,1)}}return st(xx,{register:a,slot:e,name:t,props:n}),P(()=>o.value.length>0?o.value.join(" "):void 0)}let kx=Ve({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-description-${An()}`,r=Ane();return Xe(()=>un(r.register(a))),()=>{let{name:s="Description",slot:i=V({}),props:u={}}=r,{...d}=e,m={...Object.entries(u).reduce((f,[h,y])=>Object.assign(f,{[h]:v(y)}),{}),id:a};return Yt({ourProps:m,theirProps:d,slot:i.value,attrs:t,slots:n,name:s})}}});function Rne(e){let t=no(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let o=t.createElement("div");return o.setAttribute("id","headlessui-portal-root"),t.body.appendChild(o)}const Wf=new WeakMap;function Dne(e){var t;return(t=Wf.get(e))!=null?t:0}function l1(e,t){let n=t(Dne(e));return n<=0?Wf.delete(e):Wf.set(e,n),n}let Cv=Ve({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let o=V(null),a=P(()=>no(o)),r=Tne(),s=Le(Cx,null),i=V(r===!0||s==null?Rne(o.value):s.resolveTarget());i.value&&l1(i.value,h=>h+1);let u=V(!1);Xe(()=>{u.value=!0}),Jt(()=>{r||s!=null&&(i.value=s.resolveTarget())});let d=Le(Gf,null),m=!1,f=ya();return Se(o,()=>{if(m||!d)return;let h=je(o);h&&(un(d.register(h),f),m=!0)}),un(()=>{var h,y;let b=(h=a.value)==null?void 0:h.getElementById("headlessui-portal-root");!b||i.value!==b||l1(i.value,I=>I-1)||i.value.children.length>0||(y=i.value.parentElement)==null||y.removeChild(i.value)}),()=>{if(!u.value||i.value===null)return null;let h={ref:o,"data-headlessui-portal":""};return Ae(To,{to:i.value},Yt({ourProps:h,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),Gf=Symbol("PortalParentContext");function $x(){let e=Le(Gf,null),t=V([]);function n(r){return t.value.push(r),e&&e.register(r),()=>o(r)}function o(r){let s=t.value.indexOf(r);s!==-1&&t.value.splice(s,1),e&&e.unregister(r)}let a={register:n,unregister:o,portals:t};return[t,Ve({name:"PortalWrapper",setup(r,{slots:s}){return st(Gf,a),()=>{var i;return(i=s.default)==null?void 0:i.call(s)}}})]}let Cx=Symbol("PortalGroupContext"),One=Ve({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let o=ro({resolveTarget(){return e.target}});return st(Cx,o),()=>{let{target:a,...r}=e;return Yt({theirProps:r,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}});var Pne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Pne||{});let Kf=Symbol("DialogContext");function Zi(e){let t=Le(Kf,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zi),n}return t}let Du="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Yi=Ve({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:Du},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:e=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r,s;let i=(r=e.id)!=null?r:`headlessui-dialog-${An()}`,u=V(!1);Xe(()=>{u.value=!0});let d=!1,m=P(()=>e.role==="dialog"||e.role==="alertdialog"?e.role:(d||(d=!0,console.warn(`Invalid role [${m}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),f=V(0),h=ks(),y=P(()=>e.open===Du&&h!==null?(h.value&kn.Open)===kn.Open:e.open),b=V(null),I=P(()=>no(b));if(a({el:b,$el:b}),!(e.open!==Du||h!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof y.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${y.value===Du?void 0:e.open}`);let w=P(()=>u.value&&y.value?0:1),k=P(()=>w.value===0),x=P(()=>f.value>1),$=Le(Kf,null)!==null,[C,F]=$x(),{resolveContainers:T,mainTreeNodeRef:S,MainTreeNode:A}=_x({portals:C,defaultContainers:[P(()=>{var L;return(L=H.panelRef.value)!=null?L:b.value})]}),E=P(()=>x.value?"parent":"leaf"),B=P(()=>h!==null?(h.value&kn.Closing)===kn.Closing:!1),M=P(()=>$||B.value?!1:k.value),N=P(()=>{var L,ee,ce;return(ce=Array.from((ee=(L=I.value)==null?void 0:L.querySelectorAll("body > *"))!=null?ee:[]).find(ue=>ue.id==="headlessui-portal-root"?!1:ue.contains(je(S))&&ue instanceof HTMLElement))!=null?ce:null});r1(N,M);let G=P(()=>x.value?!0:k.value),U=P(()=>{var L,ee,ce;return(ce=Array.from((ee=(L=I.value)==null?void 0:L.querySelectorAll("[data-headlessui-portal]"))!=null?ee:[]).find(ue=>ue.contains(je(S))&&ue instanceof HTMLElement))!=null?ce:null});r1(U,G),Fne({type:"Dialog",enabled:P(()=>w.value===0),element:b,onUpdate:(L,ee)=>{if(ee==="Dialog")return Dn(L,{[Hf.Add]:()=>f.value+=1,[Hf.Remove]:()=>f.value-=1})}});let j=$d({name:"DialogDescription",slot:P(()=>({open:y.value}))}),O=V(null),H={titleId:O,panelRef:V(null),dialogState:w,setTitleId(L){O.value!==L&&(O.value=L)},close(){t("close",!1)}};st(Kf,H);let W=P(()=>!(!k.value||x.value));Iv(T,(L,ee)=>{L.preventDefault(),H.close(),We(()=>ee==null?void 0:ee.focus())},W);let X=P(()=>!(x.value||w.value!==0));kv((s=I.value)==null?void 0:s.defaultView,"keydown",L=>{X.value&&(L.defaultPrevented||L.key===Tt.Escape&&(L.preventDefault(),L.stopPropagation(),H.close()))});let q=P(()=>!(B.value||w.value!==0||$));return Cne(I,q,L=>{var ee;return{containers:[...(ee=L.containers)!=null?ee:[],T]}}),Jt(L=>{if(w.value!==0)return;let ee=je(b);if(!ee)return;let ce=new ResizeObserver(ue=>{for(let oe of ue){let re=oe.target.getBoundingClientRect();re.x===0&&re.y===0&&re.width===0&&re.height===0&&H.close()}});ce.observe(ee),L(()=>ce.disconnect())}),()=>{let{open:L,initialFocus:ee,...ce}=e,ue={...n,ref:b,id:i,role:m.value,"aria-modal":w.value===0?!0:void 0,"aria-labelledby":O.value,"aria-describedby":j.value},oe={open:w.value===0};return Ae(zf,{force:!0},()=>[Ae(Cv,()=>Ae(One,{target:b.value},()=>Ae(zf,{force:!1},()=>Ae(Gs,{initialFocus:ee,containers:T,features:k.value?Dn(E.value,{parent:Gs.features.RestoreFocus,leaf:Gs.features.All&~Gs.features.FocusLock}):Gs.features.None},()=>Ae(F,{},()=>Yt({ourProps:ue,theirProps:{...ce,...n},slot:oe,attrs:n,slots:o,visible:w.value===0,features:Lo.RenderStrategy|Lo.Static,name:"Dialog"})))))),Ae(A)])}}});Ve({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-dialog-overlay-${An()}`,r=Zi("DialogOverlay");function s(i){i.target===i.currentTarget&&(i.preventDefault(),i.stopPropagation(),r.close())}return()=>{let{...i}=e;return Yt({ourProps:{id:a,"aria-hidden":!0,onClick:s},theirProps:i,slot:{open:r.dialogState.value===0},attrs:t,slots:n,name:"DialogOverlay"})}}});Ve({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-dialog-backdrop-${An()}`,s=Zi("DialogBackdrop"),i=V(null);return o({el:i,$el:i}),Xe(()=>{if(s.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let{...u}=e,d={id:r,ref:i,"aria-hidden":!0};return Ae(zf,{force:!0},()=>Ae(Cv,()=>Yt({ourProps:d,theirProps:{...t,...u},slot:{open:s.dialogState.value===0},attrs:t,slots:n,name:"DialogBackdrop"})))}}});let Xi=Ve({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-dialog-panel-${An()}`,s=Zi("DialogPanel");o({el:s.panelRef,$el:s.panelRef});function i(u){u.stopPropagation()}return()=>{let{...u}=e,d={id:r,ref:s.panelRef,onClick:i};return Yt({ourProps:d,theirProps:u,slot:{open:s.dialogState.value===0},attrs:t,slots:n,name:"DialogPanel"})}}}),Sx=Ve({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n}){var o;let a=(o=e.id)!=null?o:`headlessui-dialog-title-${An()}`,r=Zi("DialogTitle");return Xe(()=>{r.setTitleId(a),un(()=>r.setTitleId(null))}),()=>{let{...s}=e;return Yt({ourProps:{id:a},theirProps:s,slot:{open:r.dialogState.value===0},attrs:t,slots:n,name:"DialogTitle"})}}}),s1=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function i1(e){var t,n;let o=(t=e.innerText)!=null?t:"",a=e.cloneNode(!0);if(!(a instanceof HTMLElement))return o;let r=!1;for(let i of a.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),r=!0;let s=r?(n=a.innerText)!=null?n:"":o;return s1.test(s)&&(s=s.replace(s1,"")),s}function Mne(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let o=n.split(" ").map(a=>{let r=document.getElementById(a);if(r){let s=r.getAttribute("aria-label");return typeof s=="string"?s.trim():i1(r).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return i1(e).trim()}function Bne(e){let t=V(""),n=V("");return()=>{let o=je(e);if(!o)return"";let a=o.innerText;if(t.value===a)return n.value;let r=Mne(o).trim().toLowerCase();return t.value=a,n.value=r,r}}var Nne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Nne||{}),Vne=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Vne||{});function Lne(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Tx=Symbol("MenuContext");function Cd(e){let t=Le(Tx,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Cd),n}return t}let qne=Ve({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=V(1),a=V(null),r=V(null),s=V([]),i=V(""),u=V(null),d=V(1);function m(h=y=>y){let y=u.value!==null?s.value[u.value]:null,b=rr(h(s.value.slice()),w=>je(w.dataRef.domRef)),I=y?b.indexOf(y):null;return I===-1&&(I=null),{items:b,activeItemIndex:I}}let f={menuState:o,buttonRef:a,itemsRef:r,items:s,searchQuery:i,activeItemIndex:u,activationTrigger:d,closeMenu:()=>{o.value=1,u.value=null},openMenu:()=>o.value=0,goToItem(h,y,b){let I=m(),w=vne(h===Io.Specific?{focus:Io.Specific,id:y}:{focus:h},{resolveItems:()=>I.items,resolveActiveIndex:()=>I.activeItemIndex,resolveId:k=>k.id,resolveDisabled:k=>k.dataRef.disabled});i.value="",u.value=w,d.value=b??1,s.value=I.items},search(h){let y=i.value!==""?0:1;i.value+=h.toLowerCase();let b=(u.value!==null?s.value.slice(u.value+y).concat(s.value.slice(0,u.value+y)):s.value).find(w=>w.dataRef.textValue.startsWith(i.value)&&!w.dataRef.disabled),I=b?s.value.indexOf(b):-1;I===-1||I===u.value||(u.value=I,d.value=1)},clearSearch(){i.value=""},registerItem(h,y){let b=m(I=>[...I,{id:h,dataRef:y}]);s.value=b.items,u.value=b.activeItemIndex,d.value=1},unregisterItem(h){let y=m(b=>{let I=b.findIndex(w=>w.id===h);return I!==-1&&b.splice(I,1),b});s.value=y.items,u.value=y.activeItemIndex,d.value=1}};return Iv([a,r],(h,y)=>{var b;f.closeMenu(),xd(y,Id.Loose)||(h.preventDefault(),(b=je(a))==null||b.focus())},P(()=>o.value===0)),st(Tx,f),xv(P(()=>Dn(o.value,{0:kn.Open,1:kn.Closed}))),()=>{let h={open:o.value===0,close:f.closeMenu};return Yt({ourProps:{},theirProps:e,slot:h,slots:t,attrs:n,name:"Menu"})}}}),Une=Ve({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-button-${An()}`,s=Cd("MenuButton");o({el:s.buttonRef,$el:s.buttonRef});function i(f){switch(f.key){case Tt.Space:case Tt.Enter:case Tt.ArrowDown:f.preventDefault(),f.stopPropagation(),s.openMenu(),We(()=>{var h;(h=je(s.itemsRef))==null||h.focus({preventScroll:!0}),s.goToItem(Io.First)});break;case Tt.ArrowUp:f.preventDefault(),f.stopPropagation(),s.openMenu(),We(()=>{var h;(h=je(s.itemsRef))==null||h.focus({preventScroll:!0}),s.goToItem(Io.Last)});break}}function u(f){switch(f.key){case Tt.Space:f.preventDefault();break}}function d(f){e.disabled||(s.menuState.value===0?(s.closeMenu(),We(()=>{var h;return(h=je(s.buttonRef))==null?void 0:h.focus({preventScroll:!0})})):(f.preventDefault(),s.openMenu(),Lne(()=>{var h;return(h=je(s.itemsRef))==null?void 0:h.focus({preventScroll:!0})})))}let m=kd(P(()=>({as:e.as,type:t.type})),s.buttonRef);return()=>{var f;let h={open:s.menuState.value===0},{...y}=e,b={ref:s.buttonRef,id:r,type:m.value,"aria-haspopup":"menu","aria-controls":(f=je(s.itemsRef))==null?void 0:f.id,"aria-expanded":s.menuState.value===0,onKeydown:i,onKeyup:u,onClick:d};return Yt({ourProps:b,theirProps:y,slot:h,attrs:t,slots:n,name:"MenuButton"})}}}),jne=Ve({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-items-${An()}`,s=Cd("MenuItems"),i=V(null);o({el:s.itemsRef,$el:s.itemsRef}),ix({container:P(()=>je(s.itemsRef)),enabled:P(()=>s.menuState.value===0),accept(h){return h.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});function u(h){var y;switch(i.value&&clearTimeout(i.value),h.key){case Tt.Space:if(s.searchQuery.value!=="")return h.preventDefault(),h.stopPropagation(),s.search(h.key);case Tt.Enter:if(h.preventDefault(),h.stopPropagation(),s.activeItemIndex.value!==null){let b=s.items.value[s.activeItemIndex.value];(y=je(b.dataRef.domRef))==null||y.click()}s.closeMenu(),rx(je(s.buttonRef));break;case Tt.ArrowDown:return h.preventDefault(),h.stopPropagation(),s.goToItem(Io.Next);case Tt.ArrowUp:return h.preventDefault(),h.stopPropagation(),s.goToItem(Io.Previous);case Tt.Home:case Tt.PageUp:return h.preventDefault(),h.stopPropagation(),s.goToItem(Io.First);case Tt.End:case Tt.PageDown:return h.preventDefault(),h.stopPropagation(),s.goToItem(Io.Last);case Tt.Escape:h.preventDefault(),h.stopPropagation(),s.closeMenu(),We(()=>{var b;return(b=je(s.buttonRef))==null?void 0:b.focus({preventScroll:!0})});break;case Tt.Tab:h.preventDefault(),h.stopPropagation(),s.closeMenu(),We(()=>sne(je(s.buttonRef),h.shiftKey?Kt.Previous:Kt.Next));break;default:h.key.length===1&&(s.search(h.key),i.value=setTimeout(()=>s.clearSearch(),350));break}}function d(h){switch(h.key){case Tt.Space:h.preventDefault();break}}let m=ks(),f=P(()=>m!==null?(m.value&kn.Open)===kn.Open:s.menuState.value===0);return()=>{var h,y;let b={open:s.menuState.value===0},{...I}=e,w={"aria-activedescendant":s.activeItemIndex.value===null||(h=s.items.value[s.activeItemIndex.value])==null?void 0:h.id,"aria-labelledby":(y=je(s.buttonRef))==null?void 0:y.id,id:r,onKeydown:u,onKeyup:d,role:"menu",tabIndex:0,ref:s.itemsRef};return Yt({ourProps:w,theirProps:I,slot:b,attrs:t,slots:n,features:Lo.RenderStrategy|Lo.Static,visible:f.value,name:"MenuItems"})}}}),zne=Ve({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-menu-item-${An()}`,s=Cd("MenuItem"),i=V(null);o({el:i,$el:i});let u=P(()=>s.activeItemIndex.value!==null?s.items.value[s.activeItemIndex.value].id===r:!1),d=Bne(i),m=P(()=>({disabled:e.disabled,get textValue(){return d()},domRef:i}));Xe(()=>s.registerItem(r,m)),un(()=>s.unregisterItem(r)),Jt(()=>{s.menuState.value===0&&u.value&&s.activationTrigger.value!==0&&We(()=>{var k,x;return(x=(k=je(i))==null?void 0:k.scrollIntoView)==null?void 0:x.call(k,{block:"nearest"})})});function f(k){if(e.disabled)return k.preventDefault();s.closeMenu(),rx(je(s.buttonRef))}function h(){if(e.disabled)return s.goToItem(Io.Nothing);s.goToItem(Io.Specific,r)}let y=cne();function b(k){y.update(k)}function I(k){y.wasMoved(k)&&(e.disabled||u.value||s.goToItem(Io.Specific,r,0))}function w(k){y.wasMoved(k)&&(e.disabled||u.value&&s.goToItem(Io.Nothing))}return()=>{let{disabled:k,...x}=e,$={active:u.value,disabled:k,close:s.closeMenu};return Yt({ourProps:{id:r,ref:i,role:"menuitem",tabIndex:k===!0?void 0:-1,"aria-disabled":k===!0?!0:void 0,onClick:f,onFocus:h,onPointerenter:b,onMouseenter:b,onPointermove:I,onMousemove:I,onPointerleave:w,onMouseleave:w},theirProps:{...n,...x},slot:$,attrs:n,slots:t,name:"MenuItem"})}}});var Hne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Hne||{});let Ex=Symbol("PopoverContext");function Sd(e){let t=Le(Ex,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <${Dx.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Sd),n}return t}let Fx=Symbol("PopoverGroupContext");function Ax(){return Le(Fx,null)}let Rx=Symbol("PopoverPanelContext");function Wne(){return Le(Rx,null)}let Dx=Ve({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n,expose:o}){var a;let r=V(null);o({el:r,$el:r});let s=V(1),i=V(null),u=V(null),d=V(null),m=V(null),f=P(()=>no(r)),h=P(()=>{var F,T;if(!je(i)||!je(m))return!1;for(let G of document.querySelectorAll("body > *"))if(Number(G==null?void 0:G.contains(je(i)))^Number(G==null?void 0:G.contains(je(m))))return!0;let S=Gi(),A=S.indexOf(je(i)),E=(A+S.length-1)%S.length,B=(A+1)%S.length,M=S[E],N=S[B];return!((F=je(m))!=null&&F.contains(M))&&!((T=je(m))!=null&&T.contains(N))}),y={popoverState:s,buttonId:V(null),panelId:V(null),panel:m,button:i,isPortalled:h,beforePanelSentinel:u,afterPanelSentinel:d,togglePopover(){s.value=Dn(s.value,{0:1,1:0})},closePopover(){s.value!==1&&(s.value=1)},close(F){y.closePopover();let T=F?F instanceof HTMLElement?F:F.value instanceof HTMLElement?je(F):je(y.button):je(y.button);T==null||T.focus()}};st(Ex,y),xv(P(()=>Dn(s.value,{0:kn.Open,1:kn.Closed})));let b={buttonId:y.buttonId,panelId:y.panelId,close(){y.closePopover()}},I=Ax(),w=I==null?void 0:I.registerPopover,[k,x]=$x(),$=_x({mainTreeNodeRef:I==null?void 0:I.mainTreeNodeRef,portals:k,defaultContainers:[i,m]});function C(){var F,T,S,A;return(A=I==null?void 0:I.isFocusWithinPopoverGroup())!=null?A:((F=f.value)==null?void 0:F.activeElement)&&(((T=je(i))==null?void 0:T.contains(f.value.activeElement))||((S=je(m))==null?void 0:S.contains(f.value.activeElement)))}return Jt(()=>w==null?void 0:w(b)),kv((a=f.value)==null?void 0:a.defaultView,"focus",F=>{var T,S;F.target!==window&&F.target instanceof HTMLElement&&s.value===0&&(C()||i&&m&&($.contains(F.target)||(T=je(y.beforePanelSentinel))!=null&&T.contains(F.target)||(S=je(y.afterPanelSentinel))!=null&&S.contains(F.target)||y.closePopover()))},!0),Iv($.resolveContainers,(F,T)=>{var S;y.closePopover(),xd(T,Id.Loose)||(F.preventDefault(),(S=je(i))==null||S.focus())},P(()=>s.value===0)),()=>{let F={open:s.value===0,close:y.close};return Ae(de,[Ae(x,{},()=>Yt({theirProps:{...e,...n},ourProps:{ref:r},slot:F,slots:t,attrs:n,name:"Popover"})),Ae($.MainTreeNode)])}}}),Gne=Ve({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-popover-button-${An()}`,s=Sd("PopoverButton"),i=P(()=>no(s.button));o({el:s.button,$el:s.button}),Xe(()=>{s.buttonId.value=r}),un(()=>{s.buttonId.value=null});let u=Ax(),d=u==null?void 0:u.closeOthers,m=Wne(),f=P(()=>m===null?!1:m.value===s.panelId.value),h=V(null),y=`headlessui-focus-sentinel-${An()}`;f.value||Jt(()=>{s.button.value=je(h)});let b=kd(P(()=>({as:e.as,type:t.type})),h);function I(F){var T,S,A,E,B;if(f.value){if(s.popoverState.value===1)return;switch(F.key){case Tt.Space:case Tt.Enter:F.preventDefault(),(S=(T=F.target).click)==null||S.call(T),s.closePopover(),(A=je(s.button))==null||A.focus();break}}else switch(F.key){case Tt.Space:case Tt.Enter:F.preventDefault(),F.stopPropagation(),s.popoverState.value===1&&(d==null||d(s.buttonId.value)),s.togglePopover();break;case Tt.Escape:if(s.popoverState.value!==0)return d==null?void 0:d(s.buttonId.value);if(!je(s.button)||(E=i.value)!=null&&E.activeElement&&!((B=je(s.button))!=null&&B.contains(i.value.activeElement)))return;F.preventDefault(),F.stopPropagation(),s.closePopover();break}}function w(F){f.value||F.key===Tt.Space&&F.preventDefault()}function k(F){var T,S;e.disabled||(f.value?(s.closePopover(),(T=je(s.button))==null||T.focus()):(F.preventDefault(),F.stopPropagation(),s.popoverState.value===1&&(d==null||d(s.buttonId.value)),s.togglePopover(),(S=je(s.button))==null||S.focus()))}function x(F){F.preventDefault(),F.stopPropagation()}let $=$v();function C(){let F=je(s.panel);if(!F)return;function T(){Dn($.value,{[xo.Forwards]:()=>Bn(F,Kt.First),[xo.Backwards]:()=>Bn(F,Kt.Last)})===Xo.Error&&Bn(Gi().filter(S=>S.dataset.headlessuiFocusGuard!=="true"),Dn($.value,{[xo.Forwards]:Kt.Next,[xo.Backwards]:Kt.Previous}),{relativeTo:je(s.button)})}T()}return()=>{let F=s.popoverState.value===0,T={open:F},{...S}=e,A=f.value?{ref:h,type:b.value,onKeydown:I,onClick:k}:{ref:h,id:r,type:b.value,"aria-expanded":s.popoverState.value===0,"aria-controls":je(s.panel)?s.panelId.value:void 0,disabled:e.disabled?!0:void 0,onKeydown:I,onKeyup:w,onClick:k,onMousedown:x};return Ae(de,[Yt({ourProps:A,theirProps:{...t,...S},slot:T,attrs:t,slots:n,name:"PopoverButton"}),F&&!f.value&&s.isPortalled.value&&Ae(na,{id:y,features:ta.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:C})])}}});Ve({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:n}){let o=Sd("PopoverOverlay"),a=`headlessui-popover-overlay-${An()}`,r=ks(),s=P(()=>r!==null?(r.value&kn.Open)===kn.Open:o.popoverState.value===0);function i(){o.closePopover()}return()=>{let u={open:o.popoverState.value===0};return Yt({ourProps:{id:a,"aria-hidden":!0,onClick:i},theirProps:e,slot:u,attrs:t,slots:n,features:Lo.RenderStrategy|Lo.Static,visible:s.value,name:"PopoverOverlay"})}}});let Kne=Ve({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-popover-panel-${An()}`,{focus:s}=e,i=Sd("PopoverPanel"),u=P(()=>no(i.panel)),d=`headlessui-focus-sentinel-before-${An()}`,m=`headlessui-focus-sentinel-after-${An()}`;o({el:i.panel,$el:i.panel}),Xe(()=>{i.panelId.value=r}),un(()=>{i.panelId.value=null}),st(Rx,i.panelId),Jt(()=>{var x,$;if(!s||i.popoverState.value!==0||!i.panel)return;let C=(x=u.value)==null?void 0:x.activeElement;($=je(i.panel))!=null&&$.contains(C)||Bn(je(i.panel),Kt.First)});let f=ks(),h=P(()=>f!==null?(f.value&kn.Open)===kn.Open:i.popoverState.value===0);function y(x){var $,C;switch(x.key){case Tt.Escape:if(i.popoverState.value!==0||!je(i.panel)||u.value&&!(($=je(i.panel))!=null&&$.contains(u.value.activeElement)))return;x.preventDefault(),x.stopPropagation(),i.closePopover(),(C=je(i.button))==null||C.focus();break}}function b(x){var $,C,F,T,S;let A=x.relatedTarget;A&&je(i.panel)&&(($=je(i.panel))!=null&&$.contains(A)||(i.closePopover(),((F=(C=je(i.beforePanelSentinel))==null?void 0:C.contains)!=null&&F.call(C,A)||(S=(T=je(i.afterPanelSentinel))==null?void 0:T.contains)!=null&&S.call(T,A))&&A.focus({preventScroll:!0})))}let I=$v();function w(){let x=je(i.panel);if(!x)return;function $(){Dn(I.value,{[xo.Forwards]:()=>{var C;Bn(x,Kt.First)===Xo.Error&&((C=je(i.afterPanelSentinel))==null||C.focus())},[xo.Backwards]:()=>{var C;(C=je(i.button))==null||C.focus({preventScroll:!0})}})}$()}function k(){let x=je(i.panel);if(!x)return;function $(){Dn(I.value,{[xo.Forwards]:()=>{let C=je(i.button),F=je(i.panel);if(!C)return;let T=Gi(),S=T.indexOf(C),A=T.slice(0,S+1),E=[...T.slice(S+1),...A];for(let B of E.slice())if(B.dataset.headlessuiFocusGuard==="true"||F!=null&&F.contains(B)){let M=E.indexOf(B);M!==-1&&E.splice(M,1)}Bn(E,Kt.First,{sorted:!1})},[xo.Backwards]:()=>{var C;Bn(x,Kt.Previous)===Xo.Error&&((C=je(i.button))==null||C.focus())}})}$()}return()=>{let x={open:i.popoverState.value===0,close:i.close},{focus:$,...C}=e,F={ref:i.panel,id:r,onKeydown:y,onFocusout:s&&i.popoverState.value===0?b:void 0,tabIndex:-1};return Yt({ourProps:F,theirProps:{...t,...C},attrs:t,slot:x,slots:{...n,default:(...T)=>{var S;return[Ae(de,[h.value&&i.isPortalled.value&&Ae(na,{id:d,ref:i.beforePanelSentinel,features:ta.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:w}),(S=n.default)==null?void 0:S.call(n,...T),h.value&&i.isPortalled.value&&Ae(na,{id:m,ref:i.afterPanelSentinel,features:ta.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k})])]}},features:Lo.RenderStrategy|Lo.Static,visible:h.value,name:"PopoverPanel"})}}});Ve({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n,expose:o}){let a=V(null),r=Pt([]),s=P(()=>no(a)),i=Sne();o({el:a,$el:a});function u(h){let y=r.value.indexOf(h);y!==-1&&r.value.splice(y,1)}function d(h){return r.value.push(h),()=>{u(h)}}function m(){var h;let y=s.value;if(!y)return!1;let b=y.activeElement;return(h=je(a))!=null&&h.contains(b)?!0:r.value.some(I=>{var w,k;return((w=y.getElementById(I.buttonId.value))==null?void 0:w.contains(b))||((k=y.getElementById(I.panelId.value))==null?void 0:k.contains(b))})}function f(h){for(let y of r.value)y.buttonId.value!==h&&y.close()}return st(Fx,{registerPopover:d,unregisterPopover:u,isFocusWithinPopoverGroup:m,closeOthers:f,mainTreeNodeRef:i.mainTreeNodeRef}),()=>Ae(de,[Yt({ourProps:{ref:a},theirProps:{...e,...t},slot:{},attrs:t,slots:n,name:"PopoverGroup"}),Ae(i.MainTreeNode)])}});let Ox=Symbol("LabelContext");function Px(){let e=Le(Ox,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Px),t}return e}function Sv({slot:e={},name:t="Label",props:n={}}={}){let o=V([]);function a(r){return o.value.push(r),()=>{let s=o.value.indexOf(r);s!==-1&&o.value.splice(s,1)}}return st(Ox,{register:a,slot:e,name:t,props:n}),P(()=>o.value.length>0?o.value.join(" "):void 0)}let Mx=Ve({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n}){var o;let a=(o=e.id)!=null?o:`headlessui-label-${An()}`,r=Px();return Xe(()=>un(r.register(a))),()=>{let{name:s="Label",slot:i={},props:u={}}=r,{passive:d,...m}=e,f={...Object.entries(u).reduce((h,[y,b])=>Object.assign(h,{[y]:v(b)}),{}),id:a};return d&&(delete f.onClick,delete f.htmlFor,delete m.onClick),Yt({ourProps:f,theirProps:m,slot:i,attrs:n,slots:t,name:s})}}});function Zne(e,t){return e===t}let Bx=Symbol("RadioGroupContext");function Nx(e){let t=Le(Bx,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Nx),n}return t}let $s=Ve({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Zne},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r;let s=(r=e.id)!=null?r:`headlessui-radiogroup-${An()}`,i=V(null),u=V([]),d=Sv({name:"RadioGroupLabel"}),m=$d({name:"RadioGroupDescription"});a({el:i,$el:i});let[f,h]=ax(P(()=>e.modelValue),w=>t("update:modelValue",w),P(()=>e.defaultValue)),y={options:u,value:f,disabled:P(()=>e.disabled),firstOption:P(()=>u.value.find(w=>!w.propsRef.disabled)),containsCheckedOption:P(()=>u.value.some(w=>y.compare(Wn(w.propsRef.value),Wn(e.modelValue)))),compare(w,k){if(typeof e.by=="string"){let x=e.by;return(w==null?void 0:w[x])===(k==null?void 0:k[x])}return e.by(w,k)},change(w){var k;if(e.disabled||y.compare(Wn(f.value),Wn(w)))return!1;let x=(k=u.value.find($=>y.compare(Wn($.propsRef.value),Wn(w))))==null?void 0:k.propsRef;return x!=null&&x.disabled?!1:(h(w),!0)},registerOption(w){u.value.push(w),u.value=rr(u.value,k=>k.element)},unregisterOption(w){let k=u.value.findIndex(x=>x.id===w);k!==-1&&u.value.splice(k,1)}};st(Bx,y),ix({container:P(()=>je(i)),accept(w){return w.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:w.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(w){w.setAttribute("role","none")}});function b(w){if(!i.value||!i.value.contains(w.target))return;let k=u.value.filter(x=>x.propsRef.disabled===!1).map(x=>x.element);switch(w.key){case Tt.Enter:hx(w.currentTarget);break;case Tt.ArrowLeft:case Tt.ArrowUp:if(w.preventDefault(),w.stopPropagation(),Bn(k,Kt.Previous|Kt.WrapAround)===Xo.Success){let x=u.value.find($=>{var C;return $.element===((C=no(i))==null?void 0:C.activeElement)});x&&y.change(x.propsRef.value)}break;case Tt.ArrowRight:case Tt.ArrowDown:if(w.preventDefault(),w.stopPropagation(),Bn(k,Kt.Next|Kt.WrapAround)===Xo.Success){let x=u.value.find($=>{var C;return $.element===((C=no($.element))==null?void 0:C.activeElement)});x&&y.change(x.propsRef.value)}break;case Tt.Space:{w.preventDefault(),w.stopPropagation();let x=u.value.find($=>{var C;return $.element===((C=no($.element))==null?void 0:C.activeElement)});x&&y.change(x.propsRef.value)}break}}let I=P(()=>{var w;return(w=je(i))==null?void 0:w.closest("form")});return Xe(()=>{Se([I],()=>{if(!I.value||e.defaultValue===void 0)return;function w(){y.change(e.defaultValue)}return I.value.addEventListener("reset",w),()=>{var k;(k=I.value)==null||k.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{disabled:w,name:k,form:x,...$}=e,C={ref:i,id:s,role:"radiogroup","aria-labelledby":d.value,"aria-describedby":m.value,onKeydown:b};return Ae(de,[...k!=null&&f.value!=null?fx({[k]:f.value}).map(([F,T])=>Ae(na,dx({features:ta.Hidden,key:F,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:x,disabled:w,name:F,value:T}))):[],Yt({ourProps:C,theirProps:{...n,...Ki($,["modelValue","defaultValue","by"])},slot:{},attrs:n,slots:o,name:"RadioGroup"})])}}});var Yne=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(Yne||{});let Td=Ve({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-radiogroup-option-${An()}`,s=Nx("RadioGroupOption"),i=Sv({name:"RadioGroupLabel"}),u=$d({name:"RadioGroupDescription"}),d=V(null),m=P(()=>({value:e.value,disabled:e.disabled})),f=V(1);o({el:d,$el:d});let h=P(()=>je(d));Xe(()=>s.registerOption({id:r,element:h,propsRef:m})),un(()=>s.unregisterOption(r));let y=P(()=>{var C;return((C=s.firstOption.value)==null?void 0:C.id)===r}),b=P(()=>s.disabled.value||e.disabled),I=P(()=>s.compare(Wn(s.value.value),Wn(e.value))),w=P(()=>b.value?-1:I.value||!s.containsCheckedOption.value&&y.value?0:-1);function k(){var C;s.change(e.value)&&(f.value|=2,(C=je(d))==null||C.focus())}function x(){f.value|=2}function $(){f.value&=-3}return()=>{let{value:C,disabled:F,...T}=e,S={checked:I.value,disabled:b.value,active:!!(f.value&2)},A={id:r,ref:d,role:"radio","aria-checked":I.value?"true":"false","aria-labelledby":i.value,"aria-describedby":u.value,"aria-disabled":b.value?!0:void 0,tabIndex:w.value,onClick:b.value?void 0:k,onFocus:b.value?void 0:x,onBlur:b.value?void 0:$};return Yt({ourProps:A,theirProps:T,slot:S,attrs:t,slots:n,name:"RadioGroupOption"})}}}),vr=Mx,gi=kx,Vx=Symbol("GroupContext"),Ed=Ve({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let o=V(null),a=Sv({name:"SwitchLabel",props:{htmlFor:P(()=>{var s;return(s=o.value)==null?void 0:s.id}),onClick(s){o.value&&(s.currentTarget.tagName==="LABEL"&&s.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),r=$d({name:"SwitchDescription"});return st(Vx,{switchRef:o,labelledby:a,describedby:r}),()=>Yt({theirProps:e,ourProps:{},slot:{},slots:t,attrs:n,name:"SwitchGroup"})}}),Xne=Ve({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:o,expose:a}){var r;let s=(r=e.id)!=null?r:`headlessui-switch-${An()}`,i=Le(Vx,null),[u,d]=ax(P(()=>e.modelValue),x=>t("update:modelValue",x),P(()=>e.defaultChecked));function m(){d(!u.value)}let f=V(null),h=i===null?f:i.switchRef,y=kd(P(()=>({as:e.as,type:n.type})),h);a({el:h,$el:h});function b(x){x.preventDefault(),m()}function I(x){x.key===Tt.Space?(x.preventDefault(),m()):x.key===Tt.Enter&&hx(x.currentTarget)}function w(x){x.preventDefault()}let k=P(()=>{var x,$;return($=(x=je(h))==null?void 0:x.closest)==null?void 0:$.call(x,"form")});return Xe(()=>{Se([k],()=>{if(!k.value||e.defaultChecked===void 0)return;function x(){d(e.defaultChecked)}return k.value.addEventListener("reset",x),()=>{var $;($=k.value)==null||$.removeEventListener("reset",x)}},{immediate:!0})}),()=>{let{name:x,value:$,form:C,tabIndex:F,...T}=e,S={checked:u.value},A={id:s,ref:h,role:"switch",type:y.value,tabIndex:F===-1?0:F,"aria-checked":u.value,"aria-labelledby":i==null?void 0:i.labelledby.value,"aria-describedby":i==null?void 0:i.describedby.value,onClick:b,onKeyup:I,onKeypress:w};return Ae(de,[x!=null&&u.value!=null?Ae(na,dx({features:ta.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:u.value,form:C,disabled:T.disabled,name:x,value:$})):null,Yt({ourProps:A,theirProps:{...n,...Ki(T,["modelValue","defaultChecked"])},slot:S,attrs:n,slots:o,name:"Switch"})])}}}),Lx=Mx,qx=kx,Qne=Ve({props:{onFocus:{type:Function,required:!0}},setup(e){let t=V(!0);return()=>t.value?Ae(na,{as:"button",type:"button",features:ta.Focusable,onFocus(n){n.preventDefault();let o,a=50;function r(){var s;if(a--<=0){o&&cancelAnimationFrame(o);return}if((s=e.onFocus)!=null&&s.call(e)){t.value=!1,cancelAnimationFrame(o);return}o=requestAnimationFrame(r)}o=requestAnimationFrame(r)}}):null}});var Jne=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Jne||{}),eoe=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(eoe||{});let Ux=Symbol("TabsContext");function Qi(e){let t=Le(Ux,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Qi),n}return t}let Tv=Symbol("TabsSSRContext"),toe=Ve({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:t,attrs:n,emit:o}){var a;let r=V((a=e.selectedIndex)!=null?a:e.defaultIndex),s=V([]),i=V([]),u=P(()=>e.selectedIndex!==null),d=P(()=>u.value?e.selectedIndex:r.value);function m(I){var w;let k=rr(f.tabs.value,je),x=rr(f.panels.value,je),$=k.filter(C=>{var F;return!((F=je(C))!=null&&F.hasAttribute("disabled"))});if(I<0||I>k.length-1){let C=Dn(r.value===null?0:Math.sign(I-r.value),{[-1]:()=>1,0:()=>Dn(Math.sign(I),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),F=Dn(C,{0:()=>k.indexOf($[0]),1:()=>k.indexOf($[$.length-1])});F!==-1&&(r.value=F),f.tabs.value=k,f.panels.value=x}else{let C=k.slice(0,I),F=[...k.slice(I),...C].find(S=>$.includes(S));if(!F)return;let T=(w=k.indexOf(F))!=null?w:f.selectedIndex.value;T===-1&&(T=f.selectedIndex.value),r.value=T,f.tabs.value=k,f.panels.value=x}}let f={selectedIndex:P(()=>{var I,w;return(w=(I=r.value)!=null?I:e.defaultIndex)!=null?w:null}),orientation:P(()=>e.vertical?"vertical":"horizontal"),activation:P(()=>e.manual?"manual":"auto"),tabs:s,panels:i,setSelectedIndex(I){d.value!==I&&o("change",I),u.value||m(I)},registerTab(I){var w;if(s.value.includes(I))return;let k=s.value[r.value];if(s.value.push(I),s.value=rr(s.value,je),!u.value){let x=(w=s.value.indexOf(k))!=null?w:r.value;x!==-1&&(r.value=x)}},unregisterTab(I){let w=s.value.indexOf(I);w!==-1&&s.value.splice(w,1)},registerPanel(I){i.value.includes(I)||(i.value.push(I),i.value=rr(i.value,je))},unregisterPanel(I){let w=i.value.indexOf(I);w!==-1&&i.value.splice(w,1)}};st(Ux,f);let h=V({tabs:[],panels:[]}),y=V(!1);Xe(()=>{y.value=!0}),st(Tv,P(()=>y.value?null:h.value));let b=P(()=>e.selectedIndex);return Xe(()=>{Se([b],()=>{var I;return m((I=e.selectedIndex)!=null?I:e.defaultIndex)},{immediate:!0})}),Jt(()=>{if(!u.value||d.value==null||f.tabs.value.length<=0)return;let I=rr(f.tabs.value,je);I.some((w,k)=>je(f.tabs.value[k])!==je(w))&&f.setSelectedIndex(I.findIndex(w=>je(w)===je(f.tabs.value[d.value])))}),()=>{let I={selectedIndex:r.value};return Ae(de,[s.value.length<=0&&Ae(Qne,{onFocus:()=>{for(let w of s.value){let k=je(w);if((k==null?void 0:k.tabIndex)===0)return k.focus(),!0}return!1}}),Yt({theirProps:{...n,...Ki(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:I,slots:t,attrs:n,name:"TabGroup"})])}}}),noe=Ve({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:n}){let o=Qi("TabList");return()=>{let a={selectedIndex:o.selectedIndex.value},r={role:"tablist","aria-orientation":o.orientation.value};return Yt({ourProps:r,theirProps:e,slot:a,attrs:t,slots:n,name:"TabList"})}}}),ooe=Ve({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-tabs-tab-${An()}`,s=Qi("Tab"),i=V(null);o({el:i,$el:i}),Xe(()=>s.registerTab(i)),un(()=>s.unregisterTab(i));let u=Le(Tv),d=P(()=>{if(u.value){let x=u.value.tabs.indexOf(r);return x===-1?u.value.tabs.push(r)-1:x}return-1}),m=P(()=>{let x=s.tabs.value.indexOf(i);return x===-1?d.value:x}),f=P(()=>m.value===s.selectedIndex.value);function h(x){var $;let C=x();if(C===Xo.Success&&s.activation.value==="auto"){let F=($=no(i))==null?void 0:$.activeElement,T=s.tabs.value.findIndex(S=>je(S)===F);T!==-1&&s.setSelectedIndex(T)}return C}function y(x){let $=s.tabs.value.map(C=>je(C)).filter(Boolean);if(x.key===Tt.Space||x.key===Tt.Enter){x.preventDefault(),x.stopPropagation(),s.setSelectedIndex(m.value);return}switch(x.key){case Tt.Home:case Tt.PageUp:return x.preventDefault(),x.stopPropagation(),h(()=>Bn($,Kt.First));case Tt.End:case Tt.PageDown:return x.preventDefault(),x.stopPropagation(),h(()=>Bn($,Kt.Last))}if(h(()=>Dn(s.orientation.value,{vertical(){return x.key===Tt.ArrowUp?Bn($,Kt.Previous|Kt.WrapAround):x.key===Tt.ArrowDown?Bn($,Kt.Next|Kt.WrapAround):Xo.Error},horizontal(){return x.key===Tt.ArrowLeft?Bn($,Kt.Previous|Kt.WrapAround):x.key===Tt.ArrowRight?Bn($,Kt.Next|Kt.WrapAround):Xo.Error}}))===Xo.Success)return x.preventDefault()}let b=V(!1);function I(){var x;b.value||(b.value=!0,!e.disabled&&((x=je(i))==null||x.focus({preventScroll:!0}),s.setSelectedIndex(m.value),wd(()=>{b.value=!1})))}function w(x){x.preventDefault()}let k=kd(P(()=>({as:e.as,type:t.type})),i);return()=>{var x,$;let C={selected:f.value,disabled:(x=e.disabled)!=null?x:!1},{...F}=e,T={ref:i,onKeydown:y,onMousedown:w,onClick:I,id:r,role:"tab",type:k.value,"aria-controls":($=je(s.panels.value[m.value]))==null?void 0:$.id,"aria-selected":f.value,tabIndex:f.value?0:-1,disabled:e.disabled?!0:void 0};return Yt({ourProps:T,theirProps:F,slot:C,attrs:t,slots:n,name:"Tab"})}}}),aoe=Ve({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let o=Qi("TabPanels");return()=>{let a={selectedIndex:o.selectedIndex.value};return Yt({theirProps:e,ourProps:{},slot:a,attrs:n,slots:t,name:"TabPanels"})}}}),roe=Ve({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:t,slots:n,expose:o}){var a;let r=(a=e.id)!=null?a:`headlessui-tabs-panel-${An()}`,s=Qi("TabPanel"),i=V(null);o({el:i,$el:i}),Xe(()=>s.registerPanel(i)),un(()=>s.unregisterPanel(i));let u=Le(Tv),d=P(()=>{if(u.value){let h=u.value.panels.indexOf(r);return h===-1?u.value.panels.push(r)-1:h}return-1}),m=P(()=>{let h=s.panels.value.indexOf(i);return h===-1?d.value:h}),f=P(()=>m.value===s.selectedIndex.value);return()=>{var h;let y={selected:f.value},{tabIndex:b,...I}=e,w={ref:i,id:r,role:"tabpanel","aria-labelledby":(h=je(s.tabs.value[m.value]))==null?void 0:h.id,tabIndex:f.value?b:-1};return!f.value&&e.unmount&&!e.static?Ae(na,{as:"span","aria-hidden":!0,...w}):Yt({ourProps:w,theirProps:I,slot:y,attrs:t,slots:n,features:Lo.Static|Lo.RenderStrategy,visible:f.value,name:"TabPanel"})}}});function loe(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function qm(e,...t){e&&t.length>0&&e.classList.add(...t)}function Ou(e,...t){e&&t.length>0&&e.classList.remove(...t)}var Zf=(e=>(e.Finished="finished",e.Cancelled="cancelled",e))(Zf||{});function soe(e,t){let n=Hi();if(!e)return n.dispose;let{transitionDuration:o,transitionDelay:a}=getComputedStyle(e),[r,s]=[o,a].map(i=>{let[u=0]=i.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,m)=>m-d);return u});return r!==0?n.setTimeout(()=>t("finished"),r+s):t("finished"),n.add(()=>t("cancelled")),n.dispose}function u1(e,t,n,o,a,r){let s=Hi(),i=r!==void 0?loe(r):()=>{};return Ou(e,...a),qm(e,...t,...n),s.nextFrame(()=>{Ou(e,...n),qm(e,...o),s.add(soe(e,u=>(Ou(e,...o,...t),qm(e,...a),i(u))))}),s.add(()=>Ou(e,...t,...n,...o,...a)),s.add(()=>i("cancelled")),s.dispose}function Dr(e=""){return e.split(/\s+/).filter(t=>t.length>1)}let Ev=Symbol("TransitionContext");var ioe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ioe||{});function uoe(){return Le(Ev,null)!==null}function coe(){let e=Le(Ev,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}function doe(){let e=Le(Fv,null);if(e===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return e}let Fv=Symbol("NestingContext");function Fd(e){return"children"in e?Fd(e.children):e.value.filter(({state:t})=>t==="visible").length>0}function jx(e){let t=V([]),n=V(!1);Xe(()=>n.value=!0),un(()=>n.value=!1);function o(r,s=lr.Hidden){let i=t.value.findIndex(({id:u})=>u===r);i!==-1&&(Dn(s,{[lr.Unmount](){t.value.splice(i,1)},[lr.Hidden](){t.value[i].state="hidden"}}),!Fd(t)&&n.value&&(e==null||e()))}function a(r){let s=t.value.find(({id:i})=>i===r);return s?s.state!=="visible"&&(s.state="visible"):t.value.push({id:r,state:"visible"}),()=>o(r,lr.Unmount)}return{children:t,register:a,unregister:o}}let zx=Lo.RenderStrategy,ho=Ve({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o,expose:a}){let r=V(0);function s(){r.value|=kn.Opening,t("beforeEnter")}function i(){r.value&=~kn.Opening,t("afterEnter")}function u(){r.value|=kn.Closing,t("beforeLeave")}function d(){r.value&=~kn.Closing,t("afterLeave")}if(!uoe()&&mne())return()=>Ae(rl,{...e,onBeforeEnter:s,onAfterEnter:i,onBeforeLeave:u,onAfterLeave:d},o);let m=V(null),f=P(()=>e.unmount?lr.Unmount:lr.Hidden);a({el:m,$el:m});let{show:h,appear:y}=coe(),{register:b,unregister:I}=doe(),w=V(h.value?"visible":"hidden"),k={value:!0},x=An(),$={value:!1},C=jx(()=>{!$.value&&w.value!=="hidden"&&(w.value="hidden",I(x),d())});Xe(()=>{let G=b(x);un(G)}),Jt(()=>{if(f.value===lr.Hidden&&x){if(h.value&&w.value!=="visible"){w.value="visible";return}Dn(w.value,{hidden:()=>I(x),visible:()=>b(x)})}});let F=Dr(e.enter),T=Dr(e.enterFrom),S=Dr(e.enterTo),A=Dr(e.entered),E=Dr(e.leave),B=Dr(e.leaveFrom),M=Dr(e.leaveTo);Xe(()=>{Jt(()=>{if(w.value==="visible"){let G=je(m);if(G instanceof Comment&&G.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function N(G){let U=k.value&&!y.value,j=je(m);!j||!(j instanceof HTMLElement)||U||($.value=!0,h.value&&s(),h.value||u(),G(h.value?u1(j,F,T,S,A,O=>{$.value=!1,O===Zf.Finished&&i()}):u1(j,E,B,M,A,O=>{$.value=!1,O===Zf.Finished&&(Fd(C)||(w.value="hidden",I(x),d()))})))}return Xe(()=>{Se([h],(G,U,j)=>{N(j),k.value=!1},{immediate:!0})}),st(Fv,C),xv(P(()=>Dn(w.value,{visible:kn.Open,hidden:kn.Closed})|r.value)),()=>{let{appear:G,show:U,enter:j,enterFrom:O,enterTo:H,entered:W,leave:X,leaveFrom:q,leaveTo:L,...ee}=e,ce={ref:m},ue={...ee,...y.value&&h.value&&Wi.isServer?{class:be([n.class,ee.class,...F,...T])}:{}};return Yt({theirProps:ue,ourProps:ce,slot:{},slots:o,attrs:n,features:zx,visible:w.value==="visible",name:"TransitionChild"})}}}),moe=ho,rl=Ve({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(e,{emit:t,attrs:n,slots:o}){let a=ks(),r=P(()=>e.show===null&&a!==null?(a.value&kn.Open)===kn.Open:e.show);Jt(()=>{if(![!0,!1].includes(r.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let s=V(r.value?"visible":"hidden"),i=jx(()=>{s.value="hidden"}),u=V(!0),d={show:r,appear:P(()=>e.appear||!u.value)};return Xe(()=>{Jt(()=>{u.value=!1,r.value?s.value="visible":Fd(i)||(s.value="hidden")})}),st(Fv,i),st(Ev,d),()=>{let m=Ki(e,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),f={unmount:e.unmount};return Yt({ourProps:{...f,as:"template"},theirProps:{},slot:{},slots:{...o,default:()=>[Ae(moe,{onBeforeEnter:()=>t("beforeEnter"),onAfterEnter:()=>t("afterEnter"),onBeforeLeave:()=>t("beforeLeave"),onAfterLeave:()=>t("afterLeave"),...n,...f,...m},o.default)]},attrs:{},features:zx,visible:s.value==="visible",name:"Transition"})}}});const Hx=["top","right","bottom","left"],c1=["start","end"],d1=Hx.reduce((e,t)=>e.concat(t,t+"-"+c1[0],t+"-"+c1[1]),[]),Kl=Math.min,Gr=Math.max,wc=Math.round,Pu=Math.floor,hr=e=>({x:e,y:e}),foe={left:"right",right:"left",bottom:"top",top:"bottom"},poe={start:"end",end:"start"};function Yf(e,t,n){return Gr(e,Kl(t,n))}function ll(e,t){return typeof e=="function"?e(t):e}function Va(e){return e.split("-")[0]}function ba(e){return e.split("-")[1]}function Wx(e){return e==="x"?"y":"x"}function Av(e){return e==="y"?"height":"width"}function Zl(e){return["top","bottom"].includes(Va(e))?"y":"x"}function Rv(e){return Wx(Zl(e))}function Gx(e,t,n){n===void 0&&(n=!1);const o=ba(e),a=Rv(e),r=Av(a);let s=a==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(s=xc(s)),[s,xc(s)]}function voe(e){const t=xc(e);return[Ic(e),t,Ic(t)]}function Ic(e){return e.replace(/start|end/g,t=>poe[t])}function hoe(e,t,n){const o=["left","right"],a=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:o:t?o:a;case"left":case"right":return t?r:s;default:return[]}}function goe(e,t,n,o){const a=ba(e);let r=hoe(Va(e),n==="start",o);return a&&(r=r.map(s=>s+"-"+a),t&&(r=r.concat(r.map(Ic)))),r}function xc(e){return e.replace(/left|right|bottom|top/g,t=>foe[t])}function boe(e){return{top:0,right:0,bottom:0,left:0,...e}}function Kx(e){return typeof e!="number"?boe(e):{top:e,right:e,bottom:e,left:e}}function kc(e){const{x:t,y:n,width:o,height:a}=e;return{width:o,height:a,top:n,left:t,right:t+o,bottom:n+a,x:t,y:n}}function m1(e,t,n){let{reference:o,floating:a}=e;const r=Zl(t),s=Rv(t),i=Av(s),u=Va(t),d=r==="y",m=o.x+o.width/2-a.width/2,f=o.y+o.height/2-a.height/2,h=o[i]/2-a[i]/2;let y;switch(u){case"top":y={x:m,y:o.y-a.height};break;case"bottom":y={x:m,y:o.y+o.height};break;case"right":y={x:o.x+o.width,y:f};break;case"left":y={x:o.x-a.width,y:f};break;default:y={x:o.x,y:o.y}}switch(ba(t)){case"start":y[s]-=h*(n&&d?-1:1);break;case"end":y[s]+=h*(n&&d?-1:1);break}return y}const yoe=async(e,t,n)=>{const{placement:o="bottom",strategy:a="absolute",middleware:r=[],platform:s}=n,i=r.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(t));let d=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:f}=m1(d,o,u),h=o,y={},b=0;for(let I=0;I<i.length;I++){const{name:w,fn:k}=i[I],{x,y:$,data:C,reset:F}=await k({x:m,y:f,initialPlacement:o,placement:h,strategy:a,middlewareData:y,rects:d,platform:s,elements:{reference:e,floating:t}});m=x??m,f=$??f,y={...y,[w]:{...y[w],...C}},F&&b<=50&&(b++,typeof F=="object"&&(F.placement&&(h=F.placement),F.rects&&(d=F.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):F.rects),{x:m,y:f}=m1(d,h,u)),I=-1)}return{x:m,y:f,placement:h,strategy:a,middlewareData:y}};async function bi(e,t){var n;t===void 0&&(t={});const{x:o,y:a,platform:r,rects:s,elements:i,strategy:u}=e,{boundary:d="clippingAncestors",rootBoundary:m="viewport",elementContext:f="floating",altBoundary:h=!1,padding:y=0}=ll(t,e),b=Kx(y),w=i[h?f==="floating"?"reference":"floating":f],k=kc(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(w)))==null||n?w:w.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(i.floating)),boundary:d,rootBoundary:m,strategy:u})),x=f==="floating"?{x:o,y:a,width:s.floating.width,height:s.floating.height}:s.reference,$=await(r.getOffsetParent==null?void 0:r.getOffsetParent(i.floating)),C=await(r.isElement==null?void 0:r.isElement($))?await(r.getScale==null?void 0:r.getScale($))||{x:1,y:1}:{x:1,y:1},F=kc(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:x,offsetParent:$,strategy:u}):x);return{top:(k.top-F.top+b.top)/C.y,bottom:(F.bottom-k.bottom+b.bottom)/C.y,left:(k.left-F.left+b.left)/C.x,right:(F.right-k.right+b.right)/C.x}}const _oe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:a,rects:r,platform:s,elements:i,middlewareData:u}=t,{element:d,padding:m=0}=ll(e,t)||{};if(d==null)return{};const f=Kx(m),h={x:n,y:o},y=Rv(a),b=Av(y),I=await s.getDimensions(d),w=y==="y",k=w?"top":"left",x=w?"bottom":"right",$=w?"clientHeight":"clientWidth",C=r.reference[b]+r.reference[y]-h[y]-r.floating[b],F=h[y]-r.reference[y],T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d));let S=T?T[$]:0;(!S||!await(s.isElement==null?void 0:s.isElement(T)))&&(S=i.floating[$]||r.floating[b]);const A=C/2-F/2,E=S/2-I[b]/2-1,B=Kl(f[k],E),M=Kl(f[x],E),N=B,G=S-I[b]-M,U=S/2-I[b]/2+A,j=Yf(N,U,G),O=!u.arrow&&ba(a)!=null&&U!==j&&r.reference[b]/2-(U<N?B:M)-I[b]/2<0,H=O?U<N?U-N:U-G:0;return{[y]:h[y]+H,data:{[y]:j,centerOffset:U-j-H,...O&&{alignmentOffset:H}},reset:O}}});function woe(e,t,n){return(e?[...n.filter(a=>ba(a)===e),...n.filter(a=>ba(a)!==e)]:n.filter(a=>Va(a)===a)).filter(a=>e?ba(a)===e||(t?Ic(a)!==a:!1):!0)}const Ioe=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,a;const{rects:r,middlewareData:s,placement:i,platform:u,elements:d}=t,{crossAxis:m=!1,alignment:f,allowedPlacements:h=d1,autoAlignment:y=!0,...b}=ll(e,t),I=f!==void 0||h===d1?woe(f||null,y,h):h,w=await bi(t,b),k=((n=s.autoPlacement)==null?void 0:n.index)||0,x=I[k];if(x==null)return{};const $=Gx(x,r,await(u.isRTL==null?void 0:u.isRTL(d.floating)));if(i!==x)return{reset:{placement:I[0]}};const C=[w[Va(x)],w[$[0]],w[$[1]]],F=[...((o=s.autoPlacement)==null?void 0:o.overflows)||[],{placement:x,overflows:C}],T=I[k+1];if(T)return{data:{index:k+1,overflows:F},reset:{placement:T}};const S=F.map(B=>{const M=ba(B.placement);return[B.placement,M&&m?B.overflows.slice(0,2).reduce((N,G)=>N+G,0):B.overflows[0],B.overflows]}).sort((B,M)=>B[1]-M[1]),E=((a=S.filter(B=>B[2].slice(0,ba(B[0])?2:3).every(M=>M<=0))[0])==null?void 0:a[0])||S[0][0];return E!==i?{data:{index:k+1,overflows:F},reset:{placement:E}}:{}}}},xoe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:a,middlewareData:r,rects:s,initialPlacement:i,platform:u,elements:d}=t,{mainAxis:m=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:I=!0,...w}=ll(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const k=Va(a),x=Zl(i),$=Va(i)===i,C=await(u.isRTL==null?void 0:u.isRTL(d.floating)),F=h||($||!I?[xc(i)]:voe(i)),T=b!=="none";!h&&T&&F.push(...goe(i,I,b,C));const S=[i,...F],A=await bi(t,w),E=[];let B=((o=r.flip)==null?void 0:o.overflows)||[];if(m&&E.push(A[k]),f){const U=Gx(a,s,C);E.push(A[U[0]],A[U[1]])}if(B=[...B,{placement:a,overflows:E}],!E.every(U=>U<=0)){var M,N;const U=(((M=r.flip)==null?void 0:M.index)||0)+1,j=S[U];if(j)return{data:{index:U,overflows:B},reset:{placement:j}};let O=(N=B.filter(H=>H.overflows[0]<=0).sort((H,W)=>H.overflows[1]-W.overflows[1])[0])==null?void 0:N.placement;if(!O)switch(y){case"bestFit":{var G;const H=(G=B.filter(W=>{if(T){const X=Zl(W.placement);return X===x||X==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(X=>X>0).reduce((X,q)=>X+q,0)]).sort((W,X)=>W[1]-X[1])[0])==null?void 0:G[0];H&&(O=H);break}case"initialPlacement":O=i;break}if(a!==O)return{reset:{placement:O}}}return{}}}};function f1(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p1(e){return Hx.some(t=>e[t]>=0)}const koe=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:o="referenceHidden",...a}=ll(e,t);switch(o){case"referenceHidden":{const r=await bi(t,{...a,elementContext:"reference"}),s=f1(r,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:p1(s)}}}case"escaped":{const r=await bi(t,{...a,altBoundary:!0}),s=f1(r,n.floating);return{data:{escapedOffsets:s,escaped:p1(s)}}}default:return{}}}}};async function $oe(e,t){const{placement:n,platform:o,elements:a}=e,r=await(o.isRTL==null?void 0:o.isRTL(a.floating)),s=Va(n),i=ba(n),u=Zl(n)==="y",d=["left","top"].includes(s)?-1:1,m=r&&u?-1:1,f=ll(t,e);let{mainAxis:h,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return i&&typeof b=="number"&&(y=i==="end"?b*-1:b),u?{x:y*m,y:h*d}:{x:h*d,y:y*m}}const Coe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:a,y:r,placement:s,middlewareData:i}=t,u=await $oe(t,e);return s===((n=i.offset)==null?void 0:n.placement)&&(o=i.arrow)!=null&&o.alignmentOffset?{}:{x:a+u.x,y:r+u.y,data:{...u,placement:s}}}}},Soe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:a}=t,{mainAxis:r=!0,crossAxis:s=!1,limiter:i={fn:w=>{let{x:k,y:x}=w;return{x:k,y:x}}},...u}=ll(e,t),d={x:n,y:o},m=await bi(t,u),f=Zl(Va(a)),h=Wx(f);let y=d[h],b=d[f];if(r){const w=h==="y"?"top":"left",k=h==="y"?"bottom":"right",x=y+m[w],$=y-m[k];y=Yf(x,y,$)}if(s){const w=f==="y"?"top":"left",k=f==="y"?"bottom":"right",x=b+m[w],$=b-m[k];b=Yf(x,b,$)}const I=i.fn({...t,[h]:y,[f]:b});return{...I,data:{x:I.x-n,y:I.y-o}}}}};function sl(e){return Dv(e)?(e.nodeName||"").toLowerCase():"#document"}function Co(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function za(e){var t;return(t=(Dv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Dv(e){return e instanceof Node||e instanceof Co(e).Node}function oa(e){return e instanceof Element||e instanceof Co(e).Element}function wa(e){return e instanceof HTMLElement||e instanceof Co(e).HTMLElement}function v1(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Co(e).ShadowRoot}function Ji(e){const{overflow:t,overflowX:n,overflowY:o,display:a}=aa(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(a)}function Toe(e){return["table","td","th"].includes(sl(e))}function Ad(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ov(e){const t=Pv(),n=oa(e)?aa(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function Eoe(e){let t=gr(e);for(;wa(t)&&!Yl(t);){if(Ov(t))return t;if(Ad(t))return null;t=gr(t)}return null}function Pv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Yl(e){return["html","body","#document"].includes(sl(e))}function aa(e){return Co(e).getComputedStyle(e)}function Rd(e){return oa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function gr(e){if(sl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||v1(e)&&e.host||za(e);return v1(t)?t.host:t}function Zx(e){const t=gr(e);return Yl(t)?e.ownerDocument?e.ownerDocument.body:e.body:wa(t)&&Ji(t)?t:Zx(t)}function yi(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Zx(e),r=a===((o=e.ownerDocument)==null?void 0:o.body),s=Co(a);if(r){const i=Xf(s);return t.concat(s,s.visualViewport||[],Ji(a)?a:[],i&&n?yi(i):[])}return t.concat(a,yi(a,[],n))}function Xf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Yx(e){const t=aa(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const a=wa(e),r=a?e.offsetWidth:n,s=a?e.offsetHeight:o,i=wc(n)!==r||wc(o)!==s;return i&&(n=r,o=s),{width:n,height:o,$:i}}function Mv(e){return oa(e)?e:e.contextElement}function Ol(e){const t=Mv(e);if(!wa(t))return hr(1);const n=t.getBoundingClientRect(),{width:o,height:a,$:r}=Yx(t);let s=(r?wc(n.width):n.width)/o,i=(r?wc(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!i||!Number.isFinite(i))&&(i=1),{x:s,y:i}}const Foe=hr(0);function Xx(e){const t=Co(e);return!Pv()||!t.visualViewport?Foe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Aoe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Co(e)?!1:t}function Xr(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),r=Mv(e);let s=hr(1);t&&(o?oa(o)&&(s=Ol(o)):s=Ol(e));const i=Aoe(r,n,o)?Xx(r):hr(0);let u=(a.left+i.x)/s.x,d=(a.top+i.y)/s.y,m=a.width/s.x,f=a.height/s.y;if(r){const h=Co(r),y=o&&oa(o)?Co(o):o;let b=h,I=Xf(b);for(;I&&o&&y!==b;){const w=Ol(I),k=I.getBoundingClientRect(),x=aa(I),$=k.left+(I.clientLeft+parseFloat(x.paddingLeft))*w.x,C=k.top+(I.clientTop+parseFloat(x.paddingTop))*w.y;u*=w.x,d*=w.y,m*=w.x,f*=w.y,u+=$,d+=C,b=Co(I),I=Xf(b)}}return kc({width:m,height:f,x:u,y:d})}function Roe(e){let{elements:t,rect:n,offsetParent:o,strategy:a}=e;const r=a==="fixed",s=za(o),i=t?Ad(t.floating):!1;if(o===s||i&&r)return n;let u={scrollLeft:0,scrollTop:0},d=hr(1);const m=hr(0),f=wa(o);if((f||!f&&!r)&&((sl(o)!=="body"||Ji(s))&&(u=Rd(o)),wa(o))){const h=Xr(o);d=Ol(o),m.x=h.x+o.clientLeft,m.y=h.y+o.clientTop}return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+m.x,y:n.y*d.y-u.scrollTop*d.y+m.y}}function Doe(e){return Array.from(e.getClientRects())}function Qx(e){return Xr(za(e)).left+Rd(e).scrollLeft}function Ooe(e){const t=za(e),n=Rd(e),o=e.ownerDocument.body,a=Gr(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),r=Gr(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+Qx(e);const i=-n.scrollTop;return aa(o).direction==="rtl"&&(s+=Gr(t.clientWidth,o.clientWidth)-a),{width:a,height:r,x:s,y:i}}function Poe(e,t){const n=Co(e),o=za(e),a=n.visualViewport;let r=o.clientWidth,s=o.clientHeight,i=0,u=0;if(a){r=a.width,s=a.height;const d=Pv();(!d||d&&t==="fixed")&&(i=a.offsetLeft,u=a.offsetTop)}return{width:r,height:s,x:i,y:u}}function Moe(e,t){const n=Xr(e,!0,t==="fixed"),o=n.top+e.clientTop,a=n.left+e.clientLeft,r=wa(e)?Ol(e):hr(1),s=e.clientWidth*r.x,i=e.clientHeight*r.y,u=a*r.x,d=o*r.y;return{width:s,height:i,x:u,y:d}}function h1(e,t,n){let o;if(t==="viewport")o=Poe(e,n);else if(t==="document")o=Ooe(za(e));else if(oa(t))o=Moe(t,n);else{const a=Xx(e);o={...t,x:t.x-a.x,y:t.y-a.y}}return kc(o)}function Jx(e,t){const n=gr(e);return n===t||!oa(n)||Yl(n)?!1:aa(n).position==="fixed"||Jx(n,t)}function Boe(e,t){const n=t.get(e);if(n)return n;let o=yi(e,[],!1).filter(i=>oa(i)&&sl(i)!=="body"),a=null;const r=aa(e).position==="fixed";let s=r?gr(e):e;for(;oa(s)&&!Yl(s);){const i=aa(s),u=Ov(s);!u&&i.position==="fixed"&&(a=null),(r?!u&&!a:!u&&i.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Ji(s)&&!u&&Jx(e,s))?o=o.filter(m=>m!==s):a=i,s=gr(s)}return t.set(e,o),o}function Noe(e){let{element:t,boundary:n,rootBoundary:o,strategy:a}=e;const s=[...n==="clippingAncestors"?Ad(t)?[]:Boe(t,this._c):[].concat(n),o],i=s[0],u=s.reduce((d,m)=>{const f=h1(t,m,a);return d.top=Gr(f.top,d.top),d.right=Kl(f.right,d.right),d.bottom=Kl(f.bottom,d.bottom),d.left=Gr(f.left,d.left),d},h1(t,i,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Voe(e){const{width:t,height:n}=Yx(e);return{width:t,height:n}}function Loe(e,t,n){const o=wa(t),a=za(t),r=n==="fixed",s=Xr(e,!0,r,t);let i={scrollLeft:0,scrollTop:0};const u=hr(0);if(o||!o&&!r)if((sl(t)!=="body"||Ji(a))&&(i=Rd(t)),o){const f=Xr(t,!0,r,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else a&&(u.x=Qx(a));const d=s.left+i.scrollLeft-u.x,m=s.top+i.scrollTop-u.y;return{x:d,y:m,width:s.width,height:s.height}}function Um(e){return aa(e).position==="static"}function g1(e,t){return!wa(e)||aa(e).position==="fixed"?null:t?t(e):e.offsetParent}function ek(e,t){const n=Co(e);if(Ad(e))return n;if(!wa(e)){let a=gr(e);for(;a&&!Yl(a);){if(oa(a)&&!Um(a))return a;a=gr(a)}return n}let o=g1(e,t);for(;o&&Toe(o)&&Um(o);)o=g1(o,t);return o&&Yl(o)&&Um(o)&&!Ov(o)?n:o||Eoe(e)||n}const qoe=async function(e){const t=this.getOffsetParent||ek,n=this.getDimensions,o=await n(e.floating);return{reference:Loe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Uoe(e){return aa(e).direction==="rtl"}const joe={convertOffsetParentRelativeRectToViewportRelativeRect:Roe,getDocumentElement:za,getClippingRect:Noe,getOffsetParent:ek,getElementRects:qoe,getClientRects:Doe,getDimensions:Voe,getScale:Ol,isElement:oa,isRTL:Uoe};function zoe(e,t){let n=null,o;const a=za(e);function r(){var i;clearTimeout(o),(i=n)==null||i.disconnect(),n=null}function s(i,u){i===void 0&&(i=!1),u===void 0&&(u=1),r();const{left:d,top:m,width:f,height:h}=e.getBoundingClientRect();if(i||t(),!f||!h)return;const y=Pu(m),b=Pu(a.clientWidth-(d+f)),I=Pu(a.clientHeight-(m+h)),w=Pu(d),x={rootMargin:-y+"px "+-b+"px "+-I+"px "+-w+"px",threshold:Gr(0,Kl(1,u))||1};let $=!0;function C(F){const T=F[0].intersectionRatio;if(T!==u){if(!$)return s();T?s(!1,T):o=setTimeout(()=>{s(!1,1e-7)},1e3)}$=!1}try{n=new IntersectionObserver(C,{...x,root:a.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(e)}return s(!0),r}function Bv(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:u=!1}=o,d=Mv(e),m=a||r?[...d?yi(d):[],...yi(t)]:[];m.forEach(k=>{a&&k.addEventListener("scroll",n,{passive:!0}),r&&k.addEventListener("resize",n)});const f=d&&i?zoe(d,n):null;let h=-1,y=null;s&&(y=new ResizeObserver(k=>{let[x]=k;x&&x.target===d&&y&&(y.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var $;($=y)==null||$.observe(t)})),n()}),d&&!u&&y.observe(d),y.observe(t));let b,I=u?Xr(e):null;u&&w();function w(){const k=Xr(e);I&&(k.x!==I.x||k.y!==I.y||k.width!==I.width||k.height!==I.height)&&n(),I=k,b=requestAnimationFrame(w)}return n(),()=>{var k;m.forEach(x=>{a&&x.removeEventListener("scroll",n),r&&x.removeEventListener("resize",n)}),f==null||f(),(k=y)==null||k.disconnect(),y=null,u&&cancelAnimationFrame(b)}}const Nv=Coe,Hoe=Ioe,tk=Soe,nk=xoe,Woe=koe,Goe=_oe,ok=(e,t,n)=>{const o=new Map,a={platform:joe,...n},r={...a.platform,_c:o};return yoe(e,t,{...a,platform:r})};function Koe(e){return e!=null&&typeof e=="object"&&"$el"in e}function Qf(e){if(Koe(e)){const t=e.$el;return Dv(t)&&sl(t)==="#comment"?null:t}return e}function xl(e){return typeof e=="function"?e():v(e)}function ak(e){return{name:"arrow",options:e,fn(t){const n=Qf(xl(e.element));return n==null?{}:Goe({element:n,padding:e.padding}).fn(t)}}}function rk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function b1(e,t){const n=rk(e);return Math.round(t*n)/n}function Vv(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,a=P(()=>{var S;return(S=xl(n.open))!=null?S:!0}),r=P(()=>xl(n.middleware)),s=P(()=>{var S;return(S=xl(n.placement))!=null?S:"bottom"}),i=P(()=>{var S;return(S=xl(n.strategy))!=null?S:"absolute"}),u=P(()=>{var S;return(S=xl(n.transform))!=null?S:!0}),d=P(()=>Qf(e.value)),m=P(()=>Qf(t.value)),f=V(0),h=V(0),y=V(i.value),b=V(s.value),I=Pt({}),w=V(!1),k=P(()=>{const S={position:y.value,left:"0",top:"0"};if(!m.value)return S;const A=b1(m.value,f.value),E=b1(m.value,h.value);return u.value?{...S,transform:"translate("+A+"px, "+E+"px)",...rk(m.value)>=1.5&&{willChange:"transform"}}:{position:y.value,left:A+"px",top:E+"px"}});let x;function $(){d.value==null||m.value==null||ok(d.value,m.value,{middleware:r.value,placement:s.value,strategy:i.value}).then(S=>{f.value=S.x,h.value=S.y,y.value=S.strategy,b.value=S.placement,I.value=S.middlewareData,w.value=!0})}function C(){typeof x=="function"&&(x(),x=void 0)}function F(){if(C(),o===void 0){$();return}if(d.value!=null&&m.value!=null){x=o(d.value,m.value,$);return}}function T(){a.value||(w.value=!1)}return Se([r,s,i],$,{flush:"sync"}),Se([d,m],F,{flush:"sync"}),Se(a,T,{flush:"sync"}),rp()&&ip(C),{x:Or(f),y:Or(h),strategy:Or(y),placement:Or(b),middlewareData:Or(I),isPositioned:Or(w),floatingStyles:k,update:$}}var Zoe=Object.defineProperty,Yoe=(e,t,n)=>t in e?Zoe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xoe=(e,t,n)=>Yoe(e,t+"",n);function _i(e){return e==null||e.value==null?null:e.value instanceof Node?e.value:"$el"in e.value&&e.value.$el?_i(V(e.value.$el)):"getBoundingClientRect"in e.value?e.value:null}function Qoe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function y1(e,t){const n=Qoe(e);return Math.round(t*n)/n}function Lv(e){return e.reduce((t,n)=>n.type===de?t.concat(Lv(n.children)):t.concat(n),[])}function $c(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}function _1(e){return e=v(e),e&&(e==null?void 0:e.nodeType)!==Node.COMMENT_NODE}class Joe{constructor(){Xoe(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const qv=new Joe;function lk(e){if(qv.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e&&Object.prototype.hasOwnProperty.call(e,"value")){const t=_i(e);if(t)return t.ownerDocument}return document}function Uv(e,t){!t.vueTransition&&(t.transitionName||t.transitionType)&&console.warn(`[headlessui-float]: <${e} /> pass "transition-name" or "transition-type" prop, must be set "vue-transition" prop.`)}function eae(e,t,n,o,a){Se([()=>a.offset,()=>a.flip,()=>a.shift,()=>a.autoPlacement,()=>a.arrow,()=>a.hide,()=>a.middleware],()=>{const r=[];(typeof a.offset=="number"||typeof a.offset=="object"||typeof a.offset=="function")&&r.push(Nv(a.offset)),(a.flip===!0||typeof a.flip=="number"||typeof a.flip=="object")&&r.push(nk({padding:typeof a.flip=="number"?a.flip:void 0,...typeof a.flip=="object"?a.flip:{}})),(a.shift===!0||typeof a.shift=="number"||typeof a.shift=="object")&&r.push(tk({padding:typeof a.shift=="number"?a.shift:void 0,...typeof a.shift=="object"?a.shift:{}})),(a.autoPlacement===!0||typeof a.autoPlacement=="object")&&r.push(Hoe(typeof a.autoPlacement=="object"?a.autoPlacement:void 0)),r.push(...typeof a.middleware=="function"?a.middleware({referenceEl:t,floatingEl:n}):a.middleware||[]),(a.arrow===!0||typeof a.arrow=="number")&&r.push(ak({element:o,padding:a.arrow===!0?0:a.arrow})),(a.hide===!0||typeof a.hide=="object"||Array.isArray(a.hide))&&(Array.isArray(a.hide)?a.hide:[a.hide]).forEach(s=>{r.push(Woe(typeof s=="object"?s:void 0))}),e.value=r},{immediate:!0})}function tae(e,t,n){let o=()=>{};Xe(()=>{if(e&&qv.isClient&&typeof ResizeObserver<"u"&&t.value&&t.value instanceof Element){const a=new ResizeObserver(([r])=>{n.value=r.borderBoxSize.reduce((s,{inlineSize:i})=>s+i,0)});a.observe(t.value),o=()=>{a.disconnect(),n.value=null}}}),mn(()=>{o()})}const nae=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return"origin-center"}};function oae(e,t){const n=P(()=>{if(typeof e.originClass=="function")return e.originClass(t.value);if(typeof e.originClass=="string")return e.originClass;if(e.tailwindcssOriginClass)return nae(t.value)}),o=P(()=>e.enter||n.value?`${e.enter||""} ${n.value||""}`:void 0),a=P(()=>e.leave||n.value?`${e.leave||""} ${n.value||""}`:void 0);return{originClassRef:n,enterActiveClassRef:o,leaveActiveClassRef:a}}function sk(e,t,...n){if(e in t){const a=t[e];return typeof a=="function"?a(...n):a}const o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,sk),o}const w1=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ik=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(ik||{});function aae(e,t=0){var n;return e===((n=lk(e))==null?void 0:n.body)?!1:sk(t,{0(){return e.matches(w1)},1(){let o=e;for(;o!==null;){if(o.matches(w1))return!0;o=o.parentElement}return!1}})}function fa(e,t,n){qv.isServer||Jt(o=>{document.addEventListener(e,t,n),o(()=>document.removeEventListener(e,t,n))})}function uk(e,t,n=P(()=>!0)){function o(r,s){if(!n.value||r.defaultPrevented)return;const i=s(r);if(i===null||!i.getRootNode().contains(i))return;const u=function d(m){return typeof m=="function"?d(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e);for(const d of u){if(d===null)continue;const m=d instanceof HTMLElement?d:_i(d);if(m!=null&&m.contains(i)||r.composed&&r.composedPath().includes(m))return}return!aae(i,ik.Loose)&&i.tabIndex!==-1&&r.preventDefault(),t(r,i)}const a=V(null);fa("mousedown",r=>{var s,i;n.value&&(a.value=((i=(s=r.composedPath)==null?void 0:s.call(r))==null?void 0:i[0])||r.target)},!0),fa("click",r=>{a.value&&(o(r,()=>a.value),a.value=null)},!0),fa("blur",r=>o(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const ck=Symbol("ReferenceContext"),dk=Symbol("FloatingContext"),mk=Symbol("ArrowContext");function fk(e){const t=Le(ck,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,fk),n}return t}function pk(e){const t=Le(dk,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,pk),n}return t}function vk(e){const t=Le(mk,null);if(t===null){const n=new Error(`<${e} /> must be in the <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,vk),n}return t}const Ye={as:{type:[String,Function],default:"template"},floatingAs:{type:[String,Function],default:"div"},show:{type:Boolean,default:null},placement:{type:String,default:"bottom-start"},strategy:{type:String,default:"absolute"},offset:[Number,Function,Object],shift:{type:[Boolean,Number,Object],default:!1},flip:{type:[Boolean,Number,Object],default:!1},arrow:{type:[Boolean,Number],default:!1},autoPlacement:{type:[Boolean,Object],default:!1},hide:{type:[Boolean,Object,Array],default:!1},referenceHiddenClass:String,escapedClass:String,autoUpdate:{type:[Boolean,Object],default:!0},zIndex:{type:[Number,String],default:9999},vueTransition:{type:Boolean,default:!1},transitionName:String,transitionType:String,enter:String,enterFrom:String,enterTo:String,leave:String,leaveFrom:String,leaveTo:String,originClass:[String,Function],tailwindcssOriginClass:{type:Boolean,default:!1},portal:{type:Boolean,default:!1},transform:{type:Boolean,default:!1},adaptiveWidth:{type:[Boolean,Object],default:!1},composable:{type:Boolean,default:!1},dialog:{type:Boolean,default:!1},middleware:{type:[Array,Function],default:()=>[]}};function hk(e,t,n,o){const{referenceRef:a}=o,r=t,s=Ue(n,{ref:a}),i=Ii(e,r.as==="template"?s:{});return r.as==="template"?i:typeof r.as=="string"?Ae(r.as,s,[i]):Ae(r.as,s,()=>[i])}function jv(e,t,n,o){const{floatingRef:a,props:r,mounted:s,show:i,referenceHidden:u,escaped:d,placement:m,floatingStyles:f,referenceElWidth:h,updateFloating:y}=o,b=Ue({...r,as:r.floatingAs},t),{enterActiveClassRef:I,leaveActiveClassRef:w}=oae(b,m),k={show:s.value?b.show:!1,enter:I.value,enterFrom:b.enterFrom,enterTo:b.enterTo,leave:w.value,leaveFrom:b.leaveFrom,leaveTo:b.leaveTo,onBeforeEnter(){i.value=!0},onAfterLeave(){i.value=!1}},x={name:b.transitionName,type:b.transitionType,appear:!0,...b.transitionName?{}:{enterActiveClass:I.value,enterFromClass:b.enterFrom,enterToClass:b.enterTo,leaveActiveClass:w.value,leaveFromClass:b.leaveFrom,leaveToClass:b.leaveTo},onBeforeEnter(){i.value=!0},onAfterLeave(){i.value=!1}},$={class:[u.value?b.referenceHiddenClass:void 0,d.value?b.escapedClass:void 0].filter(S=>!!S).join(" "),style:{...f.value,zIndex:b.zIndex}};if(b.adaptiveWidth&&typeof h.value=="number"){const S={attribute:"width",...typeof b.adaptiveWidth=="object"?b.adaptiveWidth:{}};$.style[S.attribute]=`${h.value}px`}function C(S){return b.portal?s.value?Ae(Cv,()=>S):Z():S}function F(S){const A=Ue($,n,b.dialog?{}:{ref:a});return b.as==="template"?S:typeof b.as=="string"?Ae(b.as,A,S):Ae(b.as,A,()=>S)}function T(){function S(){var A;const E=b.as==="template"?Ue($,n,b.dialog?{}:{ref:a}):null,B=Ii(e,E);return((A=e.props)==null?void 0:A.unmount)===!1?(y(),B):b.vueTransition&&b.show===!1?Z():B}return s.value?b.vueTransition?Ae(sr,{...b.dialog?{ref:a}:{},...x},S):Ae(b.transitionChild?ho:rl,{key:`placement-${m.value}`,...b.dialog?{ref:a}:{},as:"template",...k},S):Z()}return C(F(T()))}function gk(e,t,n,o,a){const r=V(!1),s=xt(o,"placement"),i=xt(o,"strategy"),u=Pt({}),d=V(void 0),m=V(void 0),f=V(null),h=V(void 0),y=V(void 0),b=P(()=>_i(t)),I=P(()=>_i(n)),w=P(()=>_1(b)&&_1(I)),{placement:k,middlewareData:x,isPositioned:$,floatingStyles:C,update:F}=Vv(b,I,{placement:s,strategy:i,middleware:u,transform:o.dialog?!1:o.transform,whileElementsMounted:o.dialog?()=>()=>{}:void 0}),T=V(null);Xe(()=>{r.value=!0}),Se(e,(N,G)=>{N&&!G?a("show"):!N&&G&&a("hide")},{immediate:!0});function S(){w.value&&(F(),a("update"))}Se([s,i,u],S,{flush:"sync"}),eae(u,b,I,f,o),Se([x,()=>o.hide,$],()=>{var N,G;(o.hide===!0||typeof o.hide=="object"||Array.isArray(o.hide))&&(d.value=((N=x.value.hide)==null?void 0:N.referenceHidden)||!$.value,m.value=(G=x.value.hide)==null?void 0:G.escaped)}),Se(x,()=>{const N=x.value.arrow;h.value=N==null?void 0:N.x,y.value=N==null?void 0:N.y}),tae(!!o.adaptiveWidth,b,T),Se([e,w],async(N,G,U)=>{if(await We(),e.value&&w.value&&o.autoUpdate){const j=Bv(b.value,I.value,S,typeof o.autoUpdate=="object"?o.autoUpdate:void 0);U(j)}},{flush:"post",immediate:!0});const A=V(!0);Se(b,()=>{!(b.value instanceof Element)&&w.value&&A.value&&(A.value=!1,window.requestAnimationFrame(()=>{A.value=!0,S()}))},{flush:"sync"});const E={referenceRef:t,placement:k},B={floatingRef:n,props:o,mounted:r,show:e,referenceHidden:d,escaped:m,placement:k,floatingStyles:C,referenceElWidth:T,updateFloating:S},M={ref:f,placement:k,x:h,y};return st(mk,M),{referenceApi:E,floatingApi:B,arrowApi:M,placement:k,referenceEl:b,floatingEl:I,middlewareData:x,update:S}}const rae=Ve({name:"Float",inheritAttrs:!1,props:Ye,emits:["show","hide","update"],setup(e,{emit:t,slots:n,attrs:o}){Uv("Float",e);const a=V(e.show??!1),r=V(null),s=V(null),{referenceApi:i,floatingApi:u,placement:d}=gk(a,r,s,e,t);function m(h){return e.as==="template"?h:typeof e.as=="string"?Ae(e.as,o,h):Ae(e.as,o,()=>h)}const f={placement:d.value};return e.composable||e.dialog?(st(ck,i),st(dk,u),()=>{if(n.default)return m(n.default(f))}):()=>{if(!n.default)return;const[h,y]=Lv(n.default(f)).filter($c);if(!$c(h))return;const b=hk(h,{as:"template"},{},i),I=jv(y,{as:e.floatingAs},{},u);return m([b,I])}}}),bk=rae,lae={as:Ye.as},sae=Ve({name:"FloatReference",inheritAttrs:!1,props:lae,setup(e,{slots:t,attrs:n}){const o=fk("FloatReference"),{placement:a}=o;return()=>{if(!t.default)return;const r={placement:a.value};return hk(t.default(r)[0],e,n,o)}}}),iae=sae,I1={as:Ye.floatingAs,vueTransition:Ye.vueTransition,transitionName:Ye.transitionName,transitionType:Ye.transitionType,enter:Ye.enter,enterFrom:Ye.enterFrom,enterTo:Ye.enterTo,leave:Ye.leave,leaveFrom:Ye.leaveFrom,leaveTo:Ye.leaveTo,originClass:Ye.originClass,tailwindcssOriginClass:Ye.tailwindcssOriginClass,transitionChild:{type:Boolean,default:!1}},uae=Ve({name:"FloatContent",inheritAttrs:!1,props:I1,setup(e,{slots:t,attrs:n}){Uv("FloatContent",e);const o=pk("FloatContent"),{placement:a}=o;return()=>{if(!t.default)return;const r={placement:a.value},s=Object.entries(e).reduce((i,[u,d])=>{const m=I1;return(typeof m[u]=="object"&&d===m[u].default||d===void 0)&&delete i[u],i},{...e});return jv(t.default(r)[0],s,n,o)}}}),cae=uae,dae={as:{...Ye.as,default:"div"},offset:{type:Number,default:4}},mae=Ve({name:"FloatArrow",props:dae,setup(e,{slots:t,attrs:n}){const{ref:o,placement:a,x:r,y:s}=vk("FloatArrow");return()=>{var i;const u={top:"bottom",right:"left",bottom:"top",left:"right"}[a.value.split("-")[0]],d={left:o.value&&typeof r.value=="number"?`${y1(o.value,r.value)}px`:void 0,top:o.value&&typeof s.value=="number"?`${y1(o.value,s.value)}px`:void 0,right:void 0,bottom:void 0,[u]:`${e.offset*-1}px`};if(e.as==="template"){const m={placement:a.value},f=(i=t.default)==null?void 0:i.call(t,m)[0];return!f||!$c(f)?void 0:Ii(f,{ref:o,style:d})}return Ae(e.as,Ue(n,{ref:o,style:d}))}}}),fae=mae,pae={as:Ye.as,show:Ye.show,placement:Ye.placement,strategy:Ye.strategy,offset:Ye.offset,shift:Ye.shift,flip:Ye.flip,arrow:Ye.arrow,autoPlacement:Ye.autoPlacement,autoUpdate:Ye.autoUpdate,zIndex:Ye.zIndex,vueTransition:Ye.vueTransition,transitionName:Ye.transitionName,transitionType:Ye.transitionType,enter:Ye.enter,enterFrom:Ye.enterFrom,enterTo:Ye.enterTo,leave:Ye.leave,leaveFrom:Ye.leaveFrom,leaveTo:Ye.leaveTo,originClass:Ye.originClass,tailwindcssOriginClass:Ye.tailwindcssOriginClass,portal:Ye.portal,transform:Ye.transform,middleware:Ye.middleware},vae=Ve({name:"FloatVirtual",inheritAttrs:!1,props:pae,emits:["initial","show","hide","update"],setup(e,{emit:t,slots:n,attrs:o}){Uv("FloatVirtual",e);const a=V(e.show??!1),r=V({getBoundingClientRect(){return{x:0,y:0,top:0,left:0,bottom:0,right:0,width:0,height:0}}}),s=V(null),{floatingApi:i,placement:u}=gk(a,r,s,e,t);Se(()=>e.show,()=>{a.value=e.show??!1});function d(){a.value=!1}return t("initial",{show:a,placement:u,reference:r,floating:s}),()=>{if(!n.default)return;const m={placement:u.value,close:d},[f]=Lv(n.default(m)).filter($c);return jv(f,{as:e.as,show:a.value},o,i)}}}),zv=vae,hae={as:Ye.as,placement:Ye.placement,strategy:Ye.strategy,offset:Ye.offset,shift:Ye.shift,flip:{...Ye.flip,default:!0},arrow:Ye.arrow,autoPlacement:Ye.autoPlacement,autoUpdate:Ye.autoUpdate,zIndex:Ye.zIndex,vueTransition:Ye.vueTransition,transitionName:Ye.transitionName,transitionType:Ye.transitionType,enter:Ye.enter,enterFrom:Ye.enterFrom,enterTo:Ye.enterTo,leave:Ye.leave,leaveFrom:Ye.leaveFrom,leaveTo:Ye.leaveTo,originClass:Ye.originClass,tailwindcssOriginClass:Ye.tailwindcssOriginClass,transform:Ye.transform,middleware:Ye.middleware};Ve({name:"FloatContextMenu",inheritAttrs:!1,props:hae,emits:["show","hide","update"],setup(e,{emit:t,slots:n,attrs:o}){const a=V(!1);function r({show:s,reference:i,floating:u}){fa("contextmenu",d=>{d.preventDefault(),i.value={getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}},s.value=!0}),uk(u,()=>{s.value=!1},P(()=>s.value))}return Xe(()=>{a.value=!0}),()=>{if(n.default&&a.value)return Ae(zv,{...e,...o,portal:!0,onInitial:r,onShow:()=>t("show"),onHide:()=>t("hide"),onUpdate:()=>t("update")},n.default)}}});const gae={as:Ye.as,placement:Ye.placement,strategy:Ye.strategy,offset:Ye.offset,shift:Ye.shift,flip:Ye.flip,arrow:Ye.arrow,autoPlacement:Ye.autoPlacement,autoUpdate:Ye.autoUpdate,zIndex:Ye.zIndex,vueTransition:Ye.vueTransition,transitionName:Ye.transitionName,transitionType:Ye.transitionType,enter:Ye.enter,enterFrom:Ye.enterFrom,enterTo:Ye.enterTo,leave:Ye.leave,leaveFrom:Ye.leaveFrom,leaveTo:Ye.leaveTo,originClass:Ye.originClass,tailwindcssOriginClass:Ye.tailwindcssOriginClass,transform:Ye.transform,middleware:Ye.middleware,globalHideCursor:{type:Boolean,default:!0}};Ve({name:"FloatCursor",inheritAttrs:!1,props:gae,emits:["show","hide","update"],setup({globalHideCursor:e,...t},{emit:n,slots:o,attrs:a}){const r=V(!1);function s({show:i,reference:u,floating:d}){function m(){i.value=!0}function f(){i.value=!1}function h(w){u.value={getBoundingClientRect(){return{width:0,height:0,x:w.clientX,y:w.clientY,top:w.clientY,left:w.clientX,right:w.clientX,bottom:w.clientY}}}}function y(w){m(),h(w)}function b(w){m(),h(w.touches[0])}const I=lk(d);I&&(Jt(w=>{if(e&&!I.getElementById("headlesui-float-cursor-style")){const k=I.createElement("style");(I.head||I.getElementsByTagName("head")[0]).appendChild(k),k.id="headlesui-float-cursor-style",k.appendChild(I.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),w(()=>{var x;return(x=I.getElementById("headlesui-float-cursor-style"))==null?void 0:x.remove()})}},{flush:"post"}),"ontouchstart"in window||navigator.maxTouchPoints>0?(fa("touchstart",b),fa("touchend",f),fa("touchmove",b)):(fa("mouseenter",y),fa("mouseleave",f),fa("mousemove",y)))}return Xe(()=>{r.value=!0}),()=>{if(o.default&&r.value)return Ae(zv,{...t,...a,portal:!0,class:"headlesui-float-cursor-root",onInitial:s,onShow:()=>n("show"),onHide:()=>n("hide"),onUpdate:()=>n("update")},o.default)}}});const bae={class:"w-56 divide-y divide-neutral-200 overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-neutral-200 dark:divide-neutral-500/30 dark:bg-neutral-800 dark:ring-neutral-700"},yae={class:"px-4 py-2"},_ae={key:0,class:"px-1.5 py-2"},wae={class:"flex flex-col space-y-1"},Iae={key:1,class:"px-1.5 py-2"},xae={class:"flex flex-col space-y-1"},kae={key:2},$ae={class:"-ml-px px-4 py-2"},Cae={__name:"ResourceTableHeaderMenu",props:["attribute","label","wrap","isSortable","isPrimary","withViews","canToggleVisibility"],emits:["sortAsc","sortDesc","updated"],setup(e,{emit:t}){const n=t,o=dd(),a=V(!1);function r(i,u){n(i,u),a.value=!1}function s({reference:i,floating:u}){function d(m){m.target.tagName!=="INPUT"&&(m.preventDefault(),i.value={getBoundingClientRect(){return{width:0,height:0,x:m.clientX,y:m.clientY,top:m.clientY,left:m.clientX,right:m.clientX,bottom:m.clientY}}},a.value=!0)}Jt(m=>{o.value&&(o.value.addEventListener("click",d),m(()=>o.value.removeEventListener("click",d)))}),uk(u,()=>{a.value=!1},P(()=>a.value))}return(i,u)=>{const d=c("ITextBlockDark"),m=c("Icon"),f=c("ILink"),h=c("IFormCheckbox"),y=c("IFormCheckboxLabel"),b=c("IFormCheckboxField");return g(),R(v(zv),{enter:"transition-opacity duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",show:a.value,portal:"",flip:"",onInitial:s},{default:p(()=>[_("div",bae,[_("div",yae,[l(d,{class:"font-medium",text:e.label},null,8,["text"])]),e.isSortable?(g(),D("div",_ae,[_("div",wae,[l(f,{class:"flex items-center rounded-lg px-2 py-1 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[0]||(u[0]=I=>r("sortAsc",e.attribute))},{default:p(()=>[l(m,{icon:"ArrowUpSolid",class:"mr-2 size-4"}),ne(" "+K(i.$t("core::app.sort_ascending")),1)]),_:1}),l(f,{class:"flex items-center rounded-lg p-1 px-2 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[1]||(u[1]=I=>r("sortDesc",e.attribute))},{default:p(()=>[l(m,{icon:"ArrowDownSolid",class:"mr-2 size-4"}),ne(" "+K(i.$t("core::app.sort_descending")),1)]),_:1})])])):Z("",!0),!e.isPrimary&&e.canToggleVisibility?(g(),D("div",Iae,[_("div",xae,[l(f,{class:"flex items-center rounded-lg p-1 px-2 text-base/6 text-neutral-700 hover:bg-neutral-100 hover:text-neutral-900 dark:text-white dark:hover:bg-neutral-700 sm:text-sm/6",basic:"",plain:"",onClick:u[2]||(u[2]=I=>r("updated",{visible:!1}))},{default:p(()=>[l(m,{icon:"Eye",class:"mr-2 size-4"}),ne(" "+K(i.$t("core::app.hide")),1)]),_:1})])])):Z("",!0),e.withViews?(g(),D("div",kae,[_("div",$ae,[l(b,null,{default:p(()=>[l(h,{checked:e.wrap,"onUpdate:checked":u[3]||(u[3]=I=>i.$emit("updated",{wrap:I}))},null,8,["checked"]),l(y,{text:i.$t("core::table.wrap_column")},null,8,["text"])]),_:1})])])):Z("",!0)])]),_:1},8,["show"])}}},Sae={key:4,class:"inline-flex items-center"},Tae={key:5,class:"flex items-center justify-center"},Eae=25,Fae={__name:"ResourceTableHeader",props:{isOrdered:Boolean,wrap:Boolean,attribute:{type:String,required:!0},canToggleVisibility:{type:Boolean,required:!0},withViews:{type:Boolean,required:!0},authorizedToUpdateView:{type:Boolean,required:!0},width:{required:!0},label:{required:!0},align:{type:String,default:"left"},condensed:Boolean,isSortedAscending:Boolean,isPrimary:Boolean,isSelectable:Boolean,isSortable:Boolean,allRowsSelected:Boolean,totalSelected:Number},emits:["checkboxChanged","sortAsc","sortDesc","updated","customize"],setup(e){const t=e,n=P(()=>t.totalSelected>0&&!t.allRowsSelected),o=P(()=>t.isSortedAscending?"ArrowUpSolid":"ArrowDownSolid"),a=P(()=>t.attribute==="actions"),r=P(()=>!a.value&&(t.isSortable||t.withViews));return(s,i)=>{const u=c("IFormCheckbox"),d=c("Icon"),m=c("ILink"),f=c("ITableHeader");return g(),R(f,{class:be(["group/th relative bg-neutral-50 dark:bg-neutral-900 dark:before:absolute dark:before:inset-0 dark:before:-z-10 dark:before:bg-neutral-500/10",e.isPrimary||a.value?"z-30":"z-20",{"draggable-exclude lg:sticky lg:left-0":e.isPrimary,"table-actions-column !px-2 lg:sticky lg:right-0":a.value,"text-left":e.align==="left","text-center":e.align==="center","text-right":e.align==="right","cursor-pointer hover:bg-neutral-100 hover:text-neutral-700 dark:hover:bg-neutral-700/60 dark:hover:text-neutral-200":r.value}]),style:Nt({maxWidth:a.value?e.width:void 0})},{default:p(()=>[r.value?(g(),R(Cae,{key:0,attribute:e.attribute,"is-sortable":e.isSortable,"is-primary":e.isPrimary,"can-toggle-visibility":e.canToggleVisibility,"with-views":e.withViews,label:e.label,wrap:e.wrap,onUpdated:i[0]||(i[0]=h=>s.$emit("updated",h)),onSortAsc:i[1]||(i[1]=h=>s.$emit("sortAsc",h)),onSortDesc:i[2]||(i[2]=h=>s.$emit("sortDesc",h))},null,8,["attribute","is-sortable","is-primary","can-toggle-visibility","with-views","label","wrap"])):Z("",!0),i[3]||(He(-1),(i[3]=a.value?(g(),R(tx,{key:1})):e.isPrimary?(g(),R(ox,{key:2})):Z("",!0)).cacheIndex=3,He(1),i[3]),e.isSelectable?(g(),R(nx,{key:3,class:"z-20","data-slot":"checkbox-separator",condensed:e.condensed},null,8,["condensed"])):Z("",!0),a.value?(g(),D("div",Tae,[e.withViews&&e.authorizedToUpdateView?(g(),R(m,{key:0,basic:""},{default:p(()=>[l(d,{icon:"Cog",class:"size-5 sm:size-4",onClick:h=>s.$emit("customize")},null,8,["onClick"])]),_:1})):Z("",!0)])):(g(),D("div",Sae,[e.isSelectable?(g(),R(u,{key:0,class:be([e.condensed?"-ml-2":"","mr-2"]),indeterminate:n.value,checked:n.value||e.allRowsSelected,onChange:h=>s.$emit("checkboxChanged",n.value)},null,8,["class","indeterminate","checked","onChange"])):Z("",!0),_("div",{class:be(["inline-flex items-center",e.isSelectable?"mt-px":"",e.isSelectable?e.condensed?"ml-4":"ml-6":""])},[_("span",{class:be(["truncate",e.isOrdered?"mr-2":""]),style:Nt({maxWidth:`${parseInt(e.width,10)-Eae}px`})},[Ee(s.$slots,"default",{},()=>[ne(K(e.label),1)])],6),l(d,{icon:o.value,class:be(["size-4 text-neutral-700 dark:text-neutral-200",e.isOrdered?"":"hidden"])},null,8,["icon","class"])],2)]))]),_:3},8,["class","style"])}}},Aae={__name:"ResourceTableHeadRow",props:{columns:{type:Object,required:!0},isSticky:{type:Boolean,required:!0},isSelectable:{type:Boolean,required:!0},isCondensed:{type:Boolean,required:!0},selectedRowsCount:{type:Number,required:!0},allRowsSelected:{type:Boolean,required:!0},withViews:{type:Boolean,required:!0},authorizedToUpdateActiveView:{type:Boolean,required:!0},reorderable:{type:Boolean,required:!0},isOrderedByCallback:{type:Function,required:!0},isSortedAscendingCallback:{type:Function,required:!0}},emits:["update:columns","selectAll","unselectAll","sortAsc","sortDesc","customizeViewRequested"],setup(e,{emit:t}){const n=e,o=t;function a(s,i){const u=[...n.columns];u[s]={...u[s],...i},o("update:columns",u)}function r(s){s||n.allRowsSelected?o("unselectAll"):o("selectAll")}return(s,i)=>{const u=c("SortableDraggable");return g(),R(u,Ue({tag:"tr","model-value":e.columns,class:e.isSticky?"[&>th]:sticky [&>th]:top-0 [&>th]:bg-opacity-75 [&>th]:backdrop-blur-sm [&>th]:backdrop-filter":"","item-key":d=>"th"+d.attribute},{...s.$draggable.scrollable,delay:100,ghostClass:"sortable-column-ghost",filter:".resizer, .draggable-exclude",preventOnFilter:!1},{"onUpdate:modelValue":i[3]||(i[3]=d=>s.$emit("update:columns",d))}),{item:p(({element:d,index:m})=>[l(Fae,{attribute:d.attribute,class:be([d.thClass,!e.withViews||!e.reorderable||d.attribute==="actions"||!e.authorizedToUpdateActiveView?"draggable-exclude":""]),wrap:d.wrap,"with-views":e.withViews,"authorized-to-update-view":e.authorizedToUpdateActiveView,"can-toggle-visibility":e.withViews&&e.authorizedToUpdateActiveView&&d.canToggleVisibility,label:d.label,align:d.align,condensed:e.isCondensed,"is-selectable":e.isSelectable&&m===0,"is-sortable":d.sortable,"is-primary":d.primary,"is-ordered":e.isOrderedByCallback(d),"is-sorted-ascending":e.isSortedAscendingCallback(d),width:d.width||"auto","total-selected":e.selectedRowsCount,"all-rows-selected":e.allRowsSelected,onCustomize:i[0]||(i[0]=f=>s.$emit("customizeViewRequested")),onSortAsc:i[1]||(i[1]=f=>s.$emit("sortAsc",f)),onSortDesc:i[2]||(i[2]=f=>s.$emit("sortDesc",f)),onCheckboxChanged:r,onUpdated:f=>a(m,f)},null,8,["attribute","class","wrap","with-views","authorized-to-update-view","can-toggle-visibility","label","align","condensed","is-selectable","is-sortable","is-primary","is-ordered","is-sorted-ascending","width","total-selected","all-rows-selected","onUpdated"])]),_:1},16,["model-value","class","item-key"])}}};var Rae=br,Dae=$n,Oae=la,Pae="[object String]";function Mae(e){return typeof e=="string"||!Dae(e)&&Oae(e)&&Rae(e)==Pae}var Bae=Mae;const yk=Rt(Bae),Dd=Object.assign({inheritAttrs:!1},{__name:"ILink",props:{text:[String,Number],href:String,to:[String,Object],activeClass:String,exactActiveClass:String,inactiveClass:String},emits:["click"],setup(e){const t=e,n=P(()=>t.href&&typeof t.href=="string"&&t.href.startsWith("http")),o=P(()=>!!t.to);function a(r){return t.href&&t.href!==r?t.href:r}return(r,s)=>{const i=c("Icon"),u=c("RouterLink");return n.value?(g(),R(Rl,Ue({key:0,target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center",href:e.href},r.$attrs,{onClick:s[0]||(s[0]=d=>r.$emit("click",d))}),{default:p(()=>[Ee(r.$slots,"default",{},()=>[ne(K(e.text),1)]),Object.hasOwn(r.$attrs,"download")?Z("",!0):(g(),R(i,{key:0,icon:"ExternalLink",class:"ml-2 size-5 shrink-0 sm:size-4"}))]),_:3},16,["href"])):o.value?(g(),R(u,Ue({key:1},r.$props,{custom:""}),{default:p(({isActive:d,href:m,navigate:f})=>[l(Rl,Ue(r.$attrs,{href:a(m),class:d?e.activeClass:e.inactiveClass,onClick:h=>(f(h),r.$emit("click",h))}),{default:p(()=>[Ee(r.$slots,"default",{},()=>[ne(K(e.text),1)])]),_:2},1040,["href","class","onClick"])]),_:3},16)):(g(),R(Rl,Ue({key:2},r.$attrs,{href:e.href||"#",onClick:s[1]||(s[1]=ot(d=>r.$emit("click",d),["prevent"]))}),{default:p(()=>[Ee(r.$slots,"default",{},()=>[ne(K(e.text),1)])]),_:3},16,["href"]))}}}),Nae={__name:"ResourceTableCell",props:{row:{type:Object,required:!0},attribute:{type:String,required:!0},hasRequiredField:{type:Boolean,required:!0},isPrimary:{type:Boolean,required:!0},wrap:{type:Boolean,required:!0},newlineable:{required:!0,type:Boolean},link:{required:!0},route:{required:!0},align:{type:String,default:"left"},condensed:Boolean,isSortable:Boolean,isSelected:Boolean,isSelectable:Boolean},emits:["selected"],setup(e){const t=e,n=P(()=>t.attribute==="actions"),o=P(()=>!Ut(t.row[t.attribute])),a=P(()=>t.hasRequiredField&&!o.value),r=P(()=>{const{route:u,link:d}=t;if(!u&&!d)return{};if(u){let m=structuredClone(Wn(u));return Ml(m)?(s(m.params||{}),s(m.query||{})):m=i(m),{to:m}}return{href:i(d)}});function s(u){ga(u,(d,m)=>{u[m]=yk(d)?i(d):d})}function i(u){return Object.keys(t.row).forEach(d=>{u=u.replace("{"+d+"}",En(t.row,d))}),u}return(u,d)=>{const m=c("IFormCheckbox"),f=c("ITableCell");return g(),R(f,{class:be(["group/td relative first:font-medium",e.isPrimary||n.value?"z-20":"z-10",a.value?"bg-danger-100 text-danger-800 ring-1 ring-inset ring-danger-200 ring-offset-4 group-hover/tr:ring-offset-neutral-50 group-aria-selected/tr:ring-offset-neutral-50 hover:bg-danger-200 dark:bg-danger-600/40 dark:ring-danger-600/70 dark:ring-offset-neutral-900 group-hover/tr:dark:ring-offset-neutral-800 group-aria-selected/tr:dark:ring-offset-neutral-800":"bg-white group-hover/tr:bg-neutral-50 group-aria-selected/tr:bg-neutral-50 dark:bg-neutral-900 group-hover/tr:dark:bg-neutral-900 group-hover/tr:dark:before:absolute group-hover/tr:dark:before:inset-0 group-hover/tr:dark:before:-z-10 group-hover/tr:dark:before:bg-neutral-500/10 group-aria-selected/tr:dark:bg-neutral-900 group-aria-selected/tr:dark:before:absolute group-aria-selected/tr:dark:before:inset-0 group-aria-selected/tr:dark:before:-z-10 group-aria-selected/tr:dark:before:bg-neutral-500/10",{"lg:sticky lg:left-0":e.isPrimary,"lg:sticky lg:right-0":n.value,"whitespace-normal break-all":e.wrap,"whitespace-nowrap":!e.wrap,"text-left":e.align==="left","text-center":e.align==="center","text-right":e.align==="right"}])},{default:p(()=>[_("div",{class:be([e.isSelectable&&"flex items-center",e.newlineable&&"whitespace-pre-line"])},[d[0]||(He(-1),(d[0]=n.value?(g(),R(tx,{key:0})):e.isPrimary?(g(),R(ox,{key:1})):Z("",!0)).cacheIndex=0,He(1),d[0]),e.isSelectable?(g(),R(nx,{key:2,condensed:e.condensed},null,8,["condensed"])):Z("",!0),e.isSelectable?(g(),R(m,{key:3,class:be([e.condensed?"-ml-2":"","mr-2"]),checked:e.isSelected,onClick:h=>u.$emit("selected",e.row)},null,8,["class","checked","onClick"])):Z("",!0),_("div",{class:be(["overflow-hidden",e.isSelectable?e.condensed?"ml-4":"ml-6":""])},[(g(),R(_t(e.link||e.route?Dd:"div"),zt(Qt(r.value)),{default:p(()=>[Ee(u.$slots,"default")]),_:3},16))],2)],2)]),_:3},8,["class"])}}},Vae={__name:"ResourceTableRowActions",props:{actions:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:Number,required:!0},additionalRequestParams:{type:Object,required:!0}},emits:["actionExecuted"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>[n.resourceId]),{form:r,executeAction:s,selectedAction:i,confirmationModalVisible:u,actionBeingExecuted:d,handleConfirmationModalHidden:m,handleSelectionChange:f}=JI(n.resourceName,a,{additionalRequestParams:n.additionalRequestParams,callback:h=>o("actionExecuted",h)});return(h,y)=>{const b=c("ITableRowAction"),I=c("ITableRowActions");return g(),D(de,null,[e.actions.length?(g(),R(I,{key:0},{default:p(()=>[(g(!0),D(de,null,Ie(e.actions,w=>(g(),R(b,{key:w.uriKey,text:w.name,onClick:k=>v(f)(w)},null,8,["text","onClick"]))),128))]),_:1})):Z("",!0),v(u)?(g(),R(_t(v(i).component),{key:1,visible:v(u),"onUpdate:visible":y[0]||(y[0]=w=>hn(u)?u.value=w:null),action:v(i),ids:a.value,"resource-name":e.resourceName,busy:v(d),form:v(r),onHidden:v(m),onConfirm:v(s),onUpdateFieldValue:y[1]||(y[1]=w=>v(r).fill(w.attribute,w.value)),onSetFieldInitialValue:y[2]||(y[2]=w=>v(r).set(w.attribute,w.value))},null,40,["visible","action","ids","resource-name","busy","form","onHidden","onConfirm"])):Z("",!0)],64)}}},Lae={__name:"ResourceTableRow",props:{row:{type:Object,required:!0},resourceName:{type:String,required:!0},columns:{type:Object,required:!0},isSelectable:{type:Boolean,required:!0},isCondensed:{type:Boolean,required:!0},selectedRowsCount:{type:Number,required:!0},actions:{type:Object,required:!0},runActionRequestAdditionalParams:{type:Object,required:!0}},emits:["reload","selected","actionExecuted"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>n.actions.filter(i=>i.showInline===!0));function r(){o("selected")}function s(i){!n.isSelectable||n.selectedRowsCount===0||["INPUT","SELECT","TEXTAREA","A","BUTTON"].includes(i.target.tagName)||i.target.isContentEditable||r()}return(i,u)=>{const d=c("ITableRow");return g(),R(d,{"aria-selected":e.row.tSelected,class:be(["group/tr",e.row._row_class,e.row._row_border?"[&>td:first-child]:before:absolute [&>td:first-child]:before:left-0 [&>td:first-child]:before:top-0 [&>td:first-child]:before:h-full [&>td:first-child]:before:w-auto [&>td:first-child]:before:border-l-2 [&>td:first-child]:before:border-transparent":"",e.row._row_border?{"[&>td:first-child]:before:!border-warning-500":e.row._row_border==="warning","[&>td:first-child]:before:!border-danger-500":e.row._row_border==="danger","[&>td:first-child]:before:!border-success-500":e.row._row_border==="success","[&>td:first-child]:before:!border-info-500":e.row._row_border==="info","[&>td:first-child]:before:!border-primary-500":e.row._row_border==="primary"}:""]),onClick:s},{default:p(()=>[(g(!0),D(de,null,Ie(e.columns,(m,f)=>(g(),R(Nae,{key:"td-"+m.attribute,attribute:m.attribute,wrap:m.wrap,condensed:e.isCondensed,"has-required-field":m.field?m.field.isRequired:!1,align:m.align,newlineable:m.newlineable,link:m.link,route:m.route,class:be(m.tdClass),"is-primary":m.primary,"is-selected":e.row.tSelected||!1,"is-selectable":e.isSelectable&&f===0,row:e.row,onSelected:r},{default:p(()=>[Ee(i.$slots,m.attribute,Ue({ref_for:!0},{column:m,row:e.row,resourceName:e.resourceName,resourceId:e.row.id}),()=>{var h;return[m.attribute==="actions"?(g(),R(Vae,{key:0,actions:a.value,"resource-name":e.resourceName,"resource-id":e.row.id,"additional-request-params":e.runActionRequestAdditionalParams,onActionExecuted:u[0]||(u[0]=y=>i.$emit("actionExecuted",y))},null,8,["actions","resource-name","resource-id","additional-request-params"])):!m.component&&!((h=m.field)!=null&&h.indexComponent)?(g(),D(de,{key:1},[ne(K(e.row[m.attribute]),1)],64)):(g(),R(_t(m.component||m.field.indexComponent),Ue({key:2,field:m.field?{...m.field,value:e.row[m.attribute]}:void 0,ref_for:!0},{column:m,row:e.row,resourceName:e.resourceName,resourceId:e.row.id},{onReload:u[1]||(u[1]=y=>i.$emit("reload"))}),null,16,["field"]))]})]),_:2},1032,["attribute","wrap","condensed","has-required-field","align","newlineable","link","route","class","is-primary","is-selected","is-selectable","row"]))),128))]),_:3},8,["aria-selected","class"])}}},qae={class:"mb-4 space-y-2 sm:mt-0 md:flex md:items-center md:space-x-3.5 md:space-y-0"},Uae=["textContent"],jae={key:1,class:"flex-1 text-right"},zae={__name:"ResourceTable",props:{resourceName:{type:String,required:!0},identifier:String,runActionRequestAdditionalParams:{type:Object,default:()=>({})},dataRequestQueryString:{type:Object,default:()=>({})},trashed:Boolean,urlPath:String,cacheKey:String},emits:["loaded","actionExecuted"],setup(e,{expose:t,emit:n}){const o=e,a=n;let r=null,s=!1,i=!1,u=!1,d=[];const m=P(()=>o.identifier||o.resourceName),f=Innoclapps.resource(o.resourceName),{t:h}=Pe(),{setLoading:y,isLoading:b}=Cn(),{scriptConfig:I}=qe(),{settings:w,fetchActions:k,fetchSettings:x,columns:$,perPage:C,isCondensed:F,isBordered:T,pollingInterval:S,defaultOrder:A,maxHeightPx:E,isSticky:B}=qo(m.value,()=>o.cacheKey),{availableRules:M,queryBuilderRules:N,rulesAreValid:G,hasRules:U}=Ua(m),{views:j,activeView:O,patchView:H}=ka(m),W=ro(new cte),X=V(""),q=V(!1),L=V(!1),ee=V(null);let ce=null;const ue=P(()=>{var et;return!o.trashed&&(((et=w.value)==null?void 0:et.withViews)||!1)}),oe=P(()=>O.value?O.value.authorizations.update:!1),re=P(()=>W.isNotEmpty()?"":b.value?"...":X.value?h("core::app.no_search_results"):h("core::table.empty")),Y=P(()=>W.state.meta.pre_total===0),ae=P(()=>W.isEmpty()),se=P(()=>({...o.runActionRequestAdditionalParams,trashed:o.trashed||void 0})),xe=P(()=>({trashed:o.trashed||void 0,...o.dataRequestQueryString})),le=P(()=>({page:W.currentPage,per_page:W.perPage,order:W.get("order"),...xe.value,...w.value.requestQueryString})),ge=P({get(){return $.value.filter(et=>et.hidden==!1)},set(et){H({...O.value,config:{...O.value.config,table:{...O.value.config.table,columns:O.value.config.table.columns.map(vt=>{const Sn=et.find(mt=>mt.attribute===vt.attribute);return Sn?{...vt,...Sn,order:et.indexOf(Sn)+1,hidden:Sn.visible===!1}:vt})}}})}}),ve=P(()=>ge.value.map(et=>({attribute:et.attribute,width:et.width,minWidth:et.minWidth,resizeable:et.resizeable}))),ie=P(()=>ge.value.length),me=P(()=>L.value),Ce=P(()=>o.urlPath||"/"+o.resourceName+"/table"),ke=P(()=>W.items.filter(et=>et.tSelected)),Be=P(()=>ke.value.length),Fe=P(()=>ke.value.map(et=>et.id)),he=P(()=>Be.value===W.items.length),_e=P(()=>W.items.length>0&&w.value&&w.value.actions&&w.value.actions.length>0);async function Te(et=!1){if(b.value)return;Ze(),y(!0),et&&W.currentPage!==1&&rn(1);const vt={...le.value};G.value&&(vt.filters=N.value),X.value&&(vt.q=X.value),O.value&&(vt.view=O.value.id);try{const Sn=await Innoclapps.request(Ce.value,{params:vt,cancelToken:new ol(mt=>ce=mt)});W.setState(Sn.data),a("loaded",{isPreEmpty:Y.value})}catch(Sn){console.error(Sn)}finally{Ne()}}function Ne(){y(!1),L.value||zn(()=>{L.value=!0},150)}function lt(et,vt=!0){I("demo")?i||(Innoclapps.info("The state of the columns is not saved in the demo and will reset upon refreshing the page.",7e3),i=!0):ee.value.save(et,vt!==!1)}function Ke(et){if(I("demo")){$e();return}De(et)}function $e(){s||(Innoclapps.info("Column resizing is not saved in the demo and will reset upon navigating away from this page.",7e3),s=!0)}function De(et){const vt=ge.value.map((Sn,mt)=>Sn.resizeable?{...Sn,width:et[mt].width}:Sn);ge.value=vt,lt(vt,!1)}function at(){r=setInterval(Te,S.value*1e3)}function dt(){r&&clearInterval(r)}function we(){W.perPage=C.value,W.set("order",A.value),ht(),q.value=!0,Te()}async function Ge(){const et=await x(o.resourceName,{params:xe.value});et.views&&(j.value=et.views),et.rules&&(M.value=et.rules),w.value=pr(et,["views","rules"])}async function yt(){await k(o.resourceName,{params:xe.value})}function rn(et){W.currentPage=et}function Oe(){jt("floating-resource-updated",()=>Te()),jt("action-executed",({resourceName:et})=>{et===o.resourceName&&Te()}),jt("reload-resource-table",et=>{et===m.value&&Te()}),jt("resource-updated",({resourceName:et})=>{et===o.resourceName&&Te()})}function Ze(){ce&&(ce(),ce=null)}async function Et(){await We(),Te()}function Wt(et){et.tSelected=!et.tSelected}function Qn(){W.items.forEach(et=>et.tSelected=!1)}function wo(){W.items.forEach(et=>et.tSelected=!0)}function ht(){u!==!0&&(u=!0,d.push(Se(S,et=>{dt(),et&&at()},{immediate:!0})),d.push(Se(le,(et,vt)=>{ha(et,vt)||Te()},{deep:!0})),d.push(Se(C,function(et){W.perPage=et})),d.push(Se(A,(et,vt)=>{et&&!ha(et,vt)&&W.set("order",et)},{deep:!0})))}function Rn(){W.flush(),rn(1)}function On(){Oe(),Ge().then(we)}function ca(et){return!ue.value||!O.value||!oe.value?!1:ee.value.onColumnMove(et)}function da(){Ze(),d.forEach(et=>et()),d=[],W.flush(),dt(),y(!1)}return Xe(On),mn(da),t({refetchActions:yt,setPage:rn}),(et,vt)=>{const Sn=c("IOverlay"),mt=c("InputSearch"),Ln=c("ITextDark"),so=c("IButton"),en=c("IText"),uo=c("ITableCell"),Wa=c("ITableRow"),As=c("ITableBody"),Rs=c("ITable"),Ds=c("ITableOuter");return g(),D(de,null,[L.value?Z("",!0):(g(),R(Sn,{key:0,show:""})),_("div",{class:be(me.value?"opacity-100":"pointer-events-none opacity-0")},[ue.value?(g(),D("div",{key:0,class:be(["mb-0 sm:mb-4",v(w).singleViewOnly?"hidden":""])},[l(QI,{class:"[--gutter:theme('spacing.8')]",identifier:m.value,"single-view-only":v(w).singleViewOnly,onChanged:Rn},null,8,["identifier","single-view-only"])],2)):Z("",!0),_("div",qae,[l(mt,{modelValue:X.value,"onUpdate:modelValue":[vt[0]||(vt[0]=tn=>X.value=tn),vt[1]||(vt[1]=tn=>Te(!0))],class:"sm:max-w-60"},null,8,["modelValue"]),v(U)?(g(),R(YI,{key:0,identifier:m.value,onApply:Et},null,8,["identifier"])):Z("",!0),Ee(et.$slots,"header",{total:W.state.meta.total,meta:W.state.meta,isPreEmpty:Y.value}),l(Ln,{class:"shrink-0 font-semibold"},{default:p(()=>[ne(K(W.state.meta.total)+" ",1),_("span",{class:"lowercase",textContent:K(v(f).label)},null,8,Uae)]),_:1}),ue.value?(g(),D("div",jae,[v(w).singleViewOnly?(g(),R(so,{key:0,icon:"Cog",basic:"",onClick:vt[2]||(vt[2]=tn=>et.$refs.customizationRef.setVisibility(!0))})):Z("",!0),l(Gte,{ref_key:"customizationRef",ref:ee,identifier:m.value,"cache-key":e.cacheKey},null,8,["identifier","cache-key"])])):Z("",!0)]),l(Sn,{show:v(b)},{default:p(()=>[l(Ds,{class:"relative mt-3"},{default:p(()=>[_e.value?(g(),R(fte,{key:0,actions:v(w).actions,ids:Fe.value,"run-action-request-additional-params":se.value,"resource-name":e.resourceName,onActionExecuted:vt[3]||(vt[3]=tn=>et.$emit("actionExecuted",tn))},null,8,["actions","ids","run-action-request-additional-params","resource-name"])):Z("",!0),l(Rs,{id:"table-"+m.value,class:be(["[&_tbody>tr>td:first-child]:px-4 [&_thead>tr>th:first-child]:px-4",ae.value?"[&_.resizer]:pointer-events-none [&_.resizer]:!opacity-0":""]),condensed:v(F),"max-height":v(E),grid:v(T),"fixed-layout":""},{default:p(()=>[l(Kte,{"is-loaded":L.value,columns:ve.value,"resize-disabled":!ue.value||!oe.value,onResized:Ke},{default:p(()=>[l(Aae,{columns:ge.value,"onUpdate:columns":[vt[4]||(vt[4]=tn=>ge.value=tn),vt[5]||(vt[5]=tn=>lt(tn,!1))],reorderable:v(w).reorderable||!1,"is-sticky":v(B),"is-selectable":_e.value,"is-condensed":v(F),"selected-rows-count":Be.value,"all-rows-selected":he.value,"with-views":ue.value,"authorized-to-update-active-view":ue.value&&oe.value,move:ca,"is-ordered-by-callback":tn=>W.isOrderedBy(tn.attribute),"is-sorted-ascending-callback":tn=>W.isSorted("asc",tn.attribute),onSelectAll:wo,onUnselectAll:Qn,onSortAsc:vt[6]||(vt[6]=tn=>W.sortAsc(tn)),onSortDesc:vt[7]||(vt[7]=tn=>W.sortDesc(tn)),onCustomizeViewRequested:vt[8]||(vt[8]=tn=>et.$refs.customizationRef.setVisibility(!0))},null,8,["columns","reorderable","is-sticky","is-selectable","is-condensed","selected-rows-count","all-rows-selected","with-views","authorized-to-update-active-view","is-ordered-by-callback","is-sorted-ascending-callback"])]),_:1},8,["is-loaded","columns","resize-disabled"]),l(As,null,{default:p(()=>[(g(!0),D(de,null,Ie(W.items,tn=>(g(),R(Lae,{key:tn.id,"resource-name":e.resourceName,row:tn,columns:ge.value,"is-selectable":_e.value,"is-condensed":v(F),actions:v(w).actions,"selected-rows-count":Be.value,"run-action-request-additional-params":se.value,onSelected:Os=>Wt(tn),onReload:Te,onActionExecuted:vt[9]||(vt[9]=Os=>et.$emit("actionExecuted",Os))},gn({_:2},[Ie(et.$slots,(Os,mu)=>({name:mu,fn:p(fu=>[Ee(et.$slots,mu,Ue({ref_for:!0},fu))])}))]),1032,["resource-name","row","columns","is-selectable","is-condensed","actions","selected-rows-count","run-action-request-additional-params","onSelected"]))),128)),ae.value?(g(),R(Wa,{key:0,"data-slot":"empty"},{default:p(()=>[te(l(uo,{colspan:ie.value},{default:p(()=>[l(en,null,{default:p(()=>[ne(K(re.value),1)]),_:1})]),_:1},8,["colspan"]),[[fe,L.value]])]),_:1})):Z("",!0)]),_:3})]),_:3},8,["id","class","condensed","max-height","grid"]),W.hasPagination?(g(),R(Kw,{key:1,class:"px-4 py-3","is-current-page-check":tn=>W.isCurrentPage(tn),"has-next-page":W.hasNextPage,"has-previous-page":W.hasPreviousPage,links:W.pagination,"render-links":W.shouldRenderLinks,from:W.from,to:W.to,total:W.total,loading:v(b),onGoToNext:vt[10]||(vt[10]=tn=>W.nextPage()),onGoToPrevious:vt[11]||(vt[11]=tn=>W.previousPage()),onGoToPage:vt[12]||(vt[12]=tn=>W.page(tn))},null,8,["is-current-page-check","has-next-page","has-previous-page","links","render-links","from","to","total","loading"])):Z("",!0)]),_:3})]),_:3},8,["show"])],2)],64)}}};function Hae(e){return e!==e}var Wae=Hae;function Gae(e,t,n){for(var o=n-1,a=e.length;++o<a;)if(e[o]===t)return o;return-1}var Kae=Gae,Zae=tw,Yae=Wae,Xae=Kae;function Qae(e,t,n){return t===t?Xae(e,t,n):Zae(e,Yae,n)}var Jae=Qae,ere=Jae;function tre(e,t){var n=e==null?0:e.length;return!!n&&ere(e,t,0)>-1}var _k=tre;function nre(e,t,n){for(var o=-1,a=e==null?0:e.length;++o<a;)if(n(t,e[o]))return!0;return!1}var wk=nre,ore=Wp,are=_k,rre=wk,lre=ns,sre=Ai,ire=Gp,ure=200;function cre(e,t,n,o){var a=-1,r=are,s=!0,i=e.length,u=[],d=t.length;if(!i)return u;n&&(t=lre(t,sre(n))),o?(r=rre,s=!1):t.length>=ure&&(r=ire,s=!1,t=new ore(t));e:for(;++a<i;){var m=e[a],f=n==null?m:n(m);if(m=o||m!==0?m:0,s&&f===f){for(var h=d;h--;)if(t[h]===f)continue e;u.push(m)}else r(t,f,o)||u.push(m)}return u}var dre=cre,mre=dre,fre=sd,pre=id,x1=ov,vre=pre(function(e,t){return x1(e)?mre(e,fre(t,1,x1,!0)):[]}),hre=vre;const Ik=Rt(hre);function gre(e){return Array.isArray(e)&&e.every(t=>typeof t!="object")}function Hv(e,t){let n=JSON.parse(JSON.stringify(e));for(let o in t)if(Object.hasOwn(t,o))if(t[o]&&Object.hasOwn(t[o],"_reset"))n[o]=t[o]._reset;else if(Array.isArray(n[o]))if(gre(t[o]))n[o]=t[o];else{const a=Array.isArray(t[o])?t[o]:[t[o]];n[o]=bre(n[o],a)}else t[o]&&t[o]._delete?delete n[o]:typeof t[o]=="object"&&t[o]!==null&&n[o]?n[o]=Hv(n[o],t[o]):n[o]=t[o];return n}function bre(e,t){let n=[...e],o=[];t.forEach(a=>{if(a&&a._delete){o.push(a.id);return}const r=e.findIndex(s=>s.id===a.id);r!==-1?n[r]=Hv(e[r],a):n.push(a)});for(let a of o){const r=n.findIndex(s=>s.id===a);r!==-1&&n.splice(r,1)}return n}function eu(e,t,n={}){const{resourceInformation:o,associationsBeingSaved:a,resourceBeingRetrieved:r,retrieveResource:s,syncAssociations:i,detachAssociations:u,resourceBeingUpdated:d,updateResource:m}=qt(e),f=wt();let h=[],y=null;const b=V({}),I=P(()=>d.value||a.value),w=P(()=>Object.keys(b.value).length>0);hn(t)?Se(t,(E,B)=>{y=bt(E),bt(B)&&bt(E)&&(b.value={},n.watchId!==!1&&We(k))},{immediate:!0,flush:"post"}):y=bt(t);async function k(){let E={};return f[o.value.singularName]?(E=f[o.value.singularName],delete f[o.value.singularName]):E=await s(y),E._sync_timestamp=E.updated_at.split(".")[0],A(E,!0),b}async function x(E){const B=await m(E,y);return B._sync_timestamp=B.updated_at.split(".")[0],A(B,!0),b}function $(E){const B=Object.keys(b.value);if(B.length){let M=Ik(B,h),N=_v(b.value,M);for(const G in N)E[G]=N[G];return E}else return h=Object.keys(E),E}async function C(E){let B=await i(y,E);return A(B,!0),b}async function F(E){const B=await u(y,E);return A(B,!0),b}function T(E){Vn(E).forEach(B=>{parseInt(b.value[B])>0&&(b.value[B]=b.value[B]-1)})}function S(E){Vn(E).forEach(B=>{b.value[B]=b.value[B]+1})}function A(E,B=!1){B&&(E._sync_timestamp=new Date().toISOString()),Object.hasOwn(E,"_sync_timestamp")&&(E._sync_timestamp instanceof Date&&(E._sync_timestamp=E._sync_timestamp.toISOString()),E._sync_timestamp.indexOf(".")>-1&&(E._sync_timestamp=E._sync_timestamp.split(".")[0])),B?b.value=$(E):b.value=Hv(bt(b),bt(E))}return{resource:b,resourceBeingFetched:r,resourceBeingUpdated:I,resourceReady:w,associationsBeingSaved:a,fetchResource:k,updateResource:x,performUpdate:m,synchronizeResource:A,incrementResourceCount:S,decrementResourceCount:T,syncResourceAssociations:C,detachResourceAssociations:F,resourceInformation:o}}const yre={__name:"TheFloatingResourceModal",setup(e){const{t}=Pe(),n=wt(),o=Ct(),a=V(null),r=V(null),s=P(()=>o.query.mode||""),i=V(!1),{fields:u,setResource:d,hydrateFields:m,totalCollapsable:f,getUpdateFields:h}=In(),y=V(!1),b=V(!1),I=P(()=>String(String(o.query.floating_resource)+String(o.query.floating_resource_id))),{resourceInformation:w,resource:k,updateResource:x,fetchResource:$,synchronizeResource:C,detachResourceAssociations:F,incrementResourceCount:T,decrementResourceCount:S}=eu(r,a,{watchId:!1});function A(){Ot("floating-resource-updated",{resourceName:r.value,resourceId:a.value,resource:k.value})}async function E(W){try{await x(W),A(),Innoclapps.success(t("core::resource.updated"))}catch(X){return X.isValidationError()&&Innoclapps.error(t("core::app.form_validation_failed"),3e3),Promise.reject(X)}}async function B(){u.value=await h(r.value,a.value)}async function M(){await $(),await B(),d(k)}async function N(){await M()}function G(){y.value=!1}async function U(){u.value=[],k.value={},y.value=!0,await M(),b.value=!0}function j(){n[w.value.singularName]=k.value,n.push(k.value.path)}function O(W){W.destroyable?G():N(),Ot("floating-resource-action-executed",{resourceName:r.value,resourceId:a.value,resource:k.value,action:W})}function H(){b.value=!1,Ot("floating-resource-hidden",{resourceName:r.value,resourceId:a.value}),n.replace({query:pr(o.query,["floating_resource","floating_resource_id","mode"])})}return Se(I,()=>{a.value=o.query.floating_resource_id,r.value=o.query.floating_resource,r.value&&a.value?(b.value=!1,i.value=!0,We(U)):(y.value=!1,i.value=!1)},{immediate:!0}),st("refreshFloatingResource",N),st("hideFloatingResource",G),st("synchronizeResource",C),st("detachResourceAssociations",F),st("incrementResourceCount",T),st("decrementResourceCount",S),st("emitUpdatedGlobalEvent",A),st("hydrateFields",m),st("totalCollapsableFields",f),st("synchronizeAndEmitUpdatedEvent",(W,X=!1)=>{C(W,X),A()}),(W,X)=>i.value?(g(),R(_t(`${v(w).singularName}FloatingModal`),{key:0,visible:y.value,"onUpdate:visible":X[0]||(X[0]=q=>y.value=q),"floating-ready":b.value,resource:v(k),fields:v(u),mode:s.value,"update-handler":E,onHidden:H,onActionExecuted:O,onViewRequested:j},null,40,["visible","floating-ready","resource","fields","mode"])):Z("",!0)}},_re={class:"notifications pointer-events-none fixed inset-0 flex items-start justify-end px-8 py-6"},wre={class:"w-full max-w-sm"},Ire={class:"p-4"},xre={class:"flex items-center"},kre={class:"shrink-0"},$re={class:"ml-3 flex w-0 flex-1 justify-between"},Cre=["textContent"],Sre={class:"shrink-0"},Tre={class:"notifications pointer-events-none fixed inset-0 flex items-end justify-end px-8 py-6"},Ere={class:"w-full max-w-sm"},Fre={class:"p-5"},Are={class:"mb-3 text-sm text-neutral-100"},Rre={class:"flex items-center space-x-2"},Dre={class:"shrink-0 self-start"},Ore=["textContent"],Pre={class:"mt-4 flex items-center space-x-1.5"},Mre={__name:"TheFloatNotifications",setup(e){const{localizedDateTime:t}=it();function n(a,r){r(a.id),typeof a.closed=="function"&&a.closed()}function o(a,r){a.action.onClick()===!0&&n(a,r)}return(a,r)=>{const s=c("Icon"),i=c("ILink"),u=c("IButton"),d=c("Notification"),m=c("NotificationGroup"),f=c("icon");return g(),D(de,null,[l(m,{group:"app"},{default:p(()=>[_("div",_re,[_("div",wre,[l(d,{enter:"ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:p(({notifications:h,close:y})=>[(g(!0),D(de,null,Ie(h,(b,I)=>(g(),D("div",{key:I,class:"notification pointer-events-auto relative mb-2 w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-black ring-opacity-5 dark:bg-neutral-800 dark:ring-neutral-500/40"},[_("div",Ire,[_("div",xre,[_("div",kre,[b.type==="success"?(g(),R(s,{key:0,icon:"CheckCircle",class:"size-6 text-success-400"})):Z("",!0),b.type==="info"?(g(),R(s,{key:1,icon:"InformationCircle",class:"size-6 text-info-400"})):Z("",!0),b.type==="error"?(g(),R(s,{key:2,icon:"XCircleSolid",class:"size-6 text-danger-400"})):Z("",!0)]),_("div",$re,[_("p",{class:"w-0 flex-1 text-base/6 font-medium text-neutral-800 dark:text-white sm:text-sm/6",textContent:K(b.text)},null,8,Cre),b.action?(g(),R(i,{key:0,class:"ml-3 shrink-0",text:b.action.text,onClick:w=>o(b,y)},null,8,["text","onClick"])):Z("",!0)]),_("div",Sre,[l(u,{class:"ml-4",icon:"XSolid",basic:"",small:"",onClick:w=>n(b,y)},null,8,["onClick"])])])])]))),128))]),_:1})])])]),_:1}),l(m,{group:"static",position:"bottom"},{default:p(()=>[_("div",Tre,[_("div",Ere,[l(d,{enter:"ease-out duration-300 transition","enter-from":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to":"translate-y-0 opacity-100 sm:translate-x-0",leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",move:"transition duration-500","move-delay":"delay-300"},{default:p(({notifications:h,close:y})=>[(g(!0),D(de,null,Ie(h,(b,I)=>(g(),D("div",{key:I,class:"notification pointer-events-auto relative mb-2 w-full max-w-sm overflow-hidden rounded-lg bg-neutral-900/90 ring-1 ring-neutral-700/70"},[_("div",Fre,[_("div",Are,K(v(t)(new Date)),1),_("div",Rre,[_("div",Dre,[l(f,{icon:"InformationCircle",class:"size-6 text-info-400"})]),_("p",{class:"w-0 flex-1 text-sm font-medium text-neutral-100",textContent:K(b.text)},null,8,Ore)]),_("div",Pre,[b.action?(g(),R(u,{key:0,variant:"primary",text:b.action.text,soft:"",block:"",onClick:w=>o(b,y)},null,8,["text","onClick"])):Z("",!0),l(u,{variant:"secondary",text:a.$t("core::notifications.dismiss"),block:"",onClick:w=>n(b,y)},null,8,["text","onClick"])])])]))),128))]),_:1})])])]),_:1})],64)}}},Bre={class:"relative"},Nre={key:0,class:"absolute -right-1 -top-3 z-10"},Vre={class:"-m-1"},Lre={class:"grow"},qre={class:"ml-2 inline-block"},Ure={class:"max-h-96 overflow-y-auto"},jre={class:"flex items-center justify-end border-t border-neutral-200 px-4 py-2 dark:border-neutral-500/30"},zre={__name:"TheNavbarNotifications",setup(e){const{localizeNotification:t,incrementTotalUnreadNotifications:n,markNotificationAsRead:o,markAllNotificationsRead:a,totalUnreadNotifications:r,hasUnreadNotifications:s,notificationsBeingLoaded:i,fetchNotifications:u}=aI(),d=wt(),{localizedDateTime:m}=it(),{t:f}=Pe(),h=Pt([]),y=P(()=>h.value.length);async function b(){a();const{data:w}=await u();h.value=w.data}function I(w){Innoclapps.notify(t(w),null,-1,{closed:()=>o(w.id),action:{text:f("core::app.view_record"),onClick:()=>(o(w.id),d.push(w.data.path),!0)}},"static")}return jt("new-notification",w=>{n(),I(w),h.value=[w,...h.value]}),(w,k)=>{const x=c("Icon"),$=c("IDropdownButton"),C=c("ITextDisplay"),F=c("IText"),T=c("ILink"),S=c("IDropdownItemLabel"),A=c("IDropdownItemDescription"),E=c("IDropdownItem"),B=c("IDropdownSeparator"),M=c("IOverlay"),N=c("IDropdownMenu"),G=c("IDropdown"),U=ze("i-tooltip");return g(),D("span",Bre,[v(s)?te((g(),D("span",Nre,k[0]||(k[0]=[_("span",{class:"relative flex size-3"},[_("span",{class:"absolute inline-flex h-full w-full animate-ping rounded-full bg-primary-400 opacity-75"}),_("span",{class:"relative inline-flex size-3 rounded-full bg-primary-500"})],-1)]))),[[U,v(r),void 0,{bottom:!0}]]):Z("",!0),l(G,{placement:"bottom-end",onShow:b},{default:p(({hide:j})=>[l($,{variant:"secondary",pill:"","no-caret":""},{default:p(()=>[l(x,{icon:"Bell"})]),_:1}),l(N,{class:"max-w-xs sm:max-w-sm"},{default:p(()=>[_("div",Vre,[l(M,{show:v(i)},{default:p(()=>[_("div",{class:be(["flex items-center px-4 py-3 sm:p-4",{"border-b border-neutral-200 dark:border-neutral-500/30":y.value>0}])},[_("div",Lre,[y.value>0?(g(),R(C,{key:0,text:w.$t("core::notifications.notifications")},null,8,["text"])):(g(),R(F,{key:1,class:"font-medium",text:w.$t("core::notifications.no_notifications")},null,8,["text"]))]),te((g(),D("span",qre,[l(T,{to:{name:"profile",hash:"#notifications"},onClick:j},{default:p(()=>[l(x,{icon:"Cog",class:"size-5"})]),_:2},1032,["onClick"])])),[[U,w.$t("core::settings.settings")]])],2),_("div",Ure,[(g(!0),D(de,null,Ie(h.value,(O,H)=>(g(),D(de,{key:O.id},[l(E,{class:"rounded-none",title:v(t)(O),to:O.data.path,onClick:j},{default:p(()=>[l(S,{class:"truncate"},{default:p(()=>[ne(K(v(t)(O)),1)]),_:2},1024),l(A,{text:v(m)(O.created_at)},null,8,["text"])]),_:2},1032,["title","to","onClick"]),H!==h.value.length-1?(g(),R(B,{key:0})):Z("",!0)],64))),128))]),te(_("div",jre,[l(T,{to:{name:"notifications"},text:w.$t("core::app.see_all"),onClick:j},null,8,["text","onClick"])],512),[[fe,y.value>0]])]),_:2},1032,["show"])])]),_:2},1024)]),_:1})])}}},Hre={class:"flex items-center justify-between px-3 py-2"},Wre=["textContent"],Gre={__name:"TheNavbarQuickCreate",setup(e){const t=wt(),{sidebarItems:n}=qe(),o=P(()=>n.value.filter(s=>s.inQuickCreate)),a=P(()=>o.value.filter(s=>s.keyboardShortcutChar!==null));r();function r(){a.value.forEach(s=>{Innoclapps.addShortcut("+ "+s.keyboardShortcutChar.toLowerCase(),()=>{t.push(s.quickCreateRoute)})})}return(s,i)=>{const u=c("IDropdownButton"),d=c("ITextDark"),m=c("IDropdownSeparator"),f=c("IDropdownItem"),h=c("IDropdownMenu"),y=c("IDropdown");return g(),R(y,{placement:"bottom-end"},{default:p(({hide:b})=>[l(u,{variant:"primary",icon:"PlusSolid",soft:"",pill:"","no-caret":""}),l(h,{class:"w-56"},{default:p(()=>[_("div",Hre,[l(d,{class:"font-medium",text:s.$t("core::app.quick_create")},null,8,["text"]),i[0]||(i[0]=_("span",{class:"rounded-md bg-neutral-700 px-1.5 text-base text-neutral-100 dark:bg-neutral-600 dark:text-neutral-200"},[_("span",{class:"-mt-0.5 block"},"+")],-1))]),l(m),(g(!0),D(de,null,Ie(o.value,(I,w)=>te((g(),R(f,{key:w,icon:I.icon,to:I.quickCreateRoute,onClick:b},{default:p(()=>[ne(K(I.quickCreateName)+" ",1),_("span",{class:"col-start-5 row-start-1 flex justify-self-end rounded-md bg-neutral-100 px-1.5 uppercase text-neutral-500 dark:bg-neutral-700 dark:text-neutral-300",textContent:K(I.keyboardShortcutChar)},null,8,Wre)]),_:2},1032,["icon","to","onClick"])),[[fe,s.$route.path!==I.quickCreateRoute]])),128))]),_:2},1024)]),_:1})}}},Kre={class:"overflow-hidden rounded-b-lg border-b border-neutral-200 bg-white shadow-lg dark:border-neutral-500/30 dark:bg-neutral-800 sm:border-x"},Zre={class:"sm:grid sm:auto-cols-max sm:grid-flow-col sm:grid-cols-3 sm:gap-x-4"},Yre={class:"border-b border-neutral-200 bg-neutral-50/40 px-0 dark:border-neutral-500/30 dark:bg-neutral-900/50 sm:border-b-0 sm:border-r sm:px-3 sm:py-6"},Xre={class:"sm:max-h-[400px] sm:overflow-y-auto"},Qre={class:"flex space-x-2 overflow-x-auto p-3 sm:block sm:space-x-0 sm:overflow-x-visible sm:p-0"},Jre={class:"shrink-0 sm:mb-4"},ele=["textContent"],tle={class:"hidden pl-3 pr-0.5 sm:block"},nle={class:"col-span-2"},ole={class:"max-h-screen min-h-36 overflow-y-auto px-4 py-3 sm:h-full sm:pl-1 sm:pr-5 lg:h-[34rem] lg:max-h-[40rem] lg:min-h-full"},ale={class:"py-1"},rle=["textContent"],lle={__name:"TheNavbarSearchResult",props:{result:{type:Array,required:!0},history:{type:Array,required:!0},visible:{type:Boolean,required:!0}},emits:["update:visible","historyChoosen","historyRemoved"],setup(e,{emit:t}){const n=e,o=t,a=wt(),r=Ct(),{localizedDateTime:s}=it(),{floatResourceInDetailMode:i}=Ro(),u=dd(),d=V(null),{floatingStyles:m}=Vv(u,d,{strategy:"fixed",placement:"bottom-start",whileElementsMounted:Bv}),f=V("all"),h=P(()=>n.result.some(I=>I.data.length>0));function y(){n.visible===!0&&o("update:visible",!1)}function b(I,w){w.action==="float"?i({resourceName:I.resourceName,resourceId:I.id}):a.push(I.path)}return Uw(d,y,{ignore:["#navInputSearch",".dialog",".__popper"]}),Se(()=>r.path,y),(I,w)=>{const k=c("Icon"),x=c("IButton"),$=c("ITextDark"),C=c("ILink"),F=c("ITextBlockDark"),T=c("ITextSmall"),S=ze("t");return g(),R(To,{to:"body"},[l(sr,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100"},{default:p(()=>[te(_("div",{ref_key:"searchResultsRef",ref:d,class:"z-50 -ml-12 mt-px w-full max-w-full sm:max-w-xl md:-ml-0 md:max-w-2xl lg:-ml-px lg:max-w-3xl",style:Nt({...v(m)})},[_("div",Kre,[_("div",Zre,[_("div",Yre,[_("div",Xre,[_("ul",Qre,[_("li",Jre,[l(x,{class:"justify-start gap-x-3",variant:"info",active:f.value==="all",block:"",ghost:"",onClick:w[0]||(w[0]=A=>f.value="all")},{default:p(()=>[l(k,{icon:"Bars3",class:"!size-5"}),ne(" "+K(I.$t("core::resource.all_resources")),1)]),_:1},8,["active"])]),(g(!0),D(de,null,Ie(e.result,A=>(g(),D("li",{key:A.title,class:"shrink-0 sm:mb-0.5 sm:last:mb-0"},[l(x,{class:"justify-start gap-x-3 truncate",active:f.value===A.title,basic:"",block:"",onClick:E=>f.value=A.title},{default:p(()=>[l(k,{class:"!size-5 text-neutral-500 dark:text-neutral-400",icon:A.icon},null,8,["icon"]),ne(" "+K(A.title)+" ",1),te(_("span",{class:"ml-auto opacity-70",textContent:K(A.data.length)},null,8,ele),[[fe,A.data.length]])]),_:2},1032,["active","onClick"])]))),128))])]),te(_("div",tle,[te(l($,{class:"mt-5 font-medium"},null,512),[[S,"core::app.recent_search_history"]]),_("ul",null,[(g(!0),D(de,null,Ie(e.history,(A,E)=>(g(),D("li",{key:A,class:"flex items-center justify-between"},[l(C,{class:"block max-w-40 truncate",title:A,text:A,basic:"",onClick:B=>I.$emit("historyChoosen",A)},null,8,["title","text","onClick"]),l(x,{icon:"XSolid",basic:"",small:"",onClick:B=>I.$emit("historyRemoved",E)},null,8,["onClick"])]))),128))])],512),[[fe,e.history.length>0]])]),_("div",nle,[_("div",ole,[_("div",ale,[te(l(F,{class:"-mb-8 flex min-h-full flex-col items-center text-balance text-center sm:mt-16 sm:pt-2.5"},{default:p(()=>[l(k,{class:"my-4 size-10 text-neutral-400",icon:"MagnifyingGlassSolid"}),ne(" "+K(I.$t("core::app.no_search_results")),1)]),_:1},512),[[fe,!h.value&&f.value==="all"]]),(g(!0),D(de,null,Ie(e.result,A=>te((g(),D("div",{key:A.title,class:"pt-2 sm:pt-[1.1rem]"},[l($,{class:"font-medium"},{default:p(()=>[ne(K(A.title)+" ",1),l(T,{class:"ml-1 inline"},{default:p(()=>[ne(" ("+K(A.data.length)+") ",1)]),_:2},1024)]),_:2},1024),!A.data.length&&f.value!=="all"?(g(),R(F,{key:0,class:"flex flex-col items-center text-balance pb-6 text-center sm:mt-16"},{default:p(()=>[l(k,{class:"my-4 size-8 text-neutral-400",icon:A.icon},null,8,["icon"]),ne(" "+K(I.$t("core::app.no_search_results")),1)]),_:2},1024)):Z("",!0),(g(!0),D(de,null,Ie(A.data,E=>(g(),D("div",{key:E.path,class:"mt-1"},[l(C,{class:"group relative mb-2 block whitespace-normal rounded-lg border border-neutral-200 bg-neutral-50/60 py-2 pl-5 pr-12 text-base/6 text-neutral-600 ease-in-out hover:border-info-200 hover:bg-info-50 hover:text-info-600 dark:border-neutral-600 dark:bg-neutral-400/10 dark:text-white dark:hover:border-info-400/30 dark:hover:bg-info-800/20 dark:hover:text-info-400 sm:text-sm/6",href:E.path,plain:"",onClick:B=>b(E,A)},{default:p(()=>[_("span",{class:"block truncate font-medium",textContent:K(E.display_name)},null,8,rle),E.created_at?(g(),R(T,{key:0},{default:p(()=>[ne(K(I.$t("core::app.created_at"))+" "+K(v(s)(E.created_at)),1)]),_:2},1024)):Z("",!0),l(k,{class:"absolute right-4 top-6 size-5 text-neutral-800 dark:text-primary-200 group-hover:dark:text-info-400 sm:size-4",icon:A.action==="float"?"Window":"ChevronRight"},null,8,["icon"])]),_:2},1032,["href","onClick"])]))),128))])),[[fe,(A.title===f.value||f.value==="all")&&A.data.length]])),128))])])])])])],4),[[fe,e.visible]])]),_:1})])}}},sle={class:"flex w-full"},ile={class:"relative flex w-full"},ule={class:"relative w-full text-neutral-400 focus-within:text-neutral-600 dark:focus-within:text-neutral-200"},cle={class:"pointer-events-none absolute inset-y-0 left-3 flex items-center sm:left-6"},dle=["placeholder"],mle=700,fle=768,jm=240,k1="K",ple=5,vle={__name:"TheNavbarSearch",setup(e){const t=Vo(Innoclapps.resources(),"globallySearchable"),n=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent),a=/mac/.test(window.userAgent)?"⌘":"Ctrl",r=qi("globalSearchHistory",[]),s=Pt(t.map($=>({icon:$.icon,title:$.label,data:[]}))),i=V(null),u=V(null),d=V(""),m=V(!1),f=V(!1),h=P(()=>d.value!==""),y=xa(async function($){if(!$){m.value=!1;return}f.value=!0;try{const{data:C}=await Innoclapps.request("/search",{params:{q:$}});b($),s.value=C,m.value=!0}finally{f.value=!1}},mle);function b($){let C=r.value.indexOf($);C===-1?r.value.unshift($):C>0&&(I(C),r.value.unshift($)),r.value.length>ple&&r.value.pop()}function I($){r.value.splice($,1)}function w(){const $=kf(i.value.value,getComputedStyle(i.value).font),C=80;if(window.innerWidth<fle)u.value.style.left=i.value.clientWidth-u.value.offsetWidth+"px";else{let F=jm;$+C>jm&&(F=$+C),F=Math.min(F,i.value.clientWidth-40),u.value.style.left=F+"px"}}function k($){$.key==="Escape"&&m.value&&(m.value=!1)}function x($){if(($.ctrlKey||$.metaKey)&&$.key===k1.toLowerCase()&&($.preventDefault(),document.activeElement!==i.value)){if(d.value){const C=d.value.length;i.value.setSelectionRange(C,C)}i.value.focus(),m.value=!0}}return Se(d,w,{flush:"post"}),Se(d,y),Xe(()=>{window.addEventListener("resize",w),window.addEventListener("keydown",k),n&&document.addEventListener("keydown",x)}),mn(()=>{window.removeEventListener("resize",w),window.removeEventListener("keydown",k),n&&window.removeEventListener("keydown",x)}),($,C)=>{const F=c("Icon"),T=c("IButton"),S=c("ISpinner");return g(),D("div",sle,[_("div",ile,[C[7]||(C[7]=_("label",{for:"navInputSearch",class:"sr-only"},"Search",-1)),_("div",ule,[_("div",cle,[l(F,{icon:"MagnifyingGlassSolid",class:be(["size-5",f.value?"animate-pulse":""])},null,8,["class"])]),te(_("input",{id:"navInputSearch",ref_key:"inputRef",ref:i,"onUpdate:modelValue":C[0]||(C[0]=A=>d.value=A),type:"search",name:"search",autocomplete:"off",class:"peer block h-full w-full appearance-none border-transparent bg-transparent py-2 pl-12 pr-10 text-base text-neutral-900 placeholder-neutral-500 focus:border-transparent focus:placeholder-neutral-400 focus:outline-none focus:ring-0 dark:text-neutral-200 dark:placeholder-neutral-400 dark:focus:placeholder-neutral-500 sm:pl-16 sm:pr-16 sm:text-sm [&::-webkit-search-cancel-button]:hidden",placeholder:$.$t("core::app.search"),onClick:C[1]||(C[1]=A=>m.value=!0),onKeydown:C[2]||(C[2]=mo(A=>v(y)(d.value),["enter"]))},null,40,dle),[[pa,d.value]]),_("div",{ref_key:"clearButtonWrapper",ref:u,class:"absolute left-0 top-[1.2rem]",style:Nt({left:jm})},[l(T,{icon:"XSolid",style:Nt({display:!h.value||f.value?"none":null}),basic:"",small:"",onClick:C[3]||(C[3]=A=>d.value="")},null,8,["style"]),f.value?(g(),R(S,{key:0,class:"ml-1 mt-1 size-5 text-primary-500"})):Z("",!0)],4),n?Ia([n,h.value],()=>(g(),D("div",{key:0,class:"absolute left-56 top-[1.1rem] hidden peer-focus:hidden lg:block"},[te(_("kbd",{class:"inline-flex items-center rounded border border-neutral-300 px-2 font-sans text-sm font-bold text-neutral-500 dark:border-neutral-500 dark:text-neutral-400"},K(v(a))+" "+K(k1),513),[[fe,!h.value]])])),C,4):Z("",!0)])]),l(lle,{visible:m.value,"onUpdate:visible":C[5]||(C[5]=A=>m.value=A),history:v(r),result:s.value,onHistoryChoosen:C[6]||(C[6]=A=>d.value=A),onHistoryRemoved:I},null,8,["visible","history","result"])])}}},hle={class:"relative z-40 flex h-[--navbar-height] shrink-0 bg-[--navbar-bg-color] shadow dark:bg-[--navbar-dark-bg-color] dark:shadow-neutral-700/50"},gle={class:"flex flex-1 justify-between pr-4 sm:pr-6 lg:pr-8"},ble={class:"flex flex-1"},yle={class:"mx-8 hidden max-w-xs py-5 lg:block"},_le=["textContent"],wle={class:"hidden h-[--navbar-height] border-l border-neutral-200 dark:border-neutral-500/30 lg:block"},Ile={class:"ml-1 hidden md:block lg:ml-2"},xle={__name:"TheNavbar",setup(e){const t=yo(),{sidebarOpen:n}=qe(),o=P(()=>!!t.value);function a(){localStorage.theme="light",window.updateTheme()}function r(){localStorage.theme="dark",window.updateTheme()}function s(){localStorage.theme="system",window.updateTheme()}return(i,u)=>{const d=c("Icon"),m=c("IButton"),f=c("NavbarSeparator"),h=ze("i-tooltip");return g(),D("div",hle,[u[0]||(He(-1),(u[0]=_("button",{type:"button",class:"border-r border-neutral-200 px-3 text-neutral-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 dark:border-neutral-500/30 dark:text-neutral-200 md:hidden",onClick:y=>n.value=!0},[u[2]||(u[2]=_("span",{class:"sr-only"},"Open sidebar",-1)),l(d,{icon:"Bars3BottomLeft",class:"size-6"})],8,["onClick"])).cacheIndex=0,He(1),u[0]),_("div",gle,[_("div",ble,[te(_("div",yle,[_("h1",{class:"truncate font-semibold uppercase text-neutral-800 dark:text-neutral-100",textContent:K(v(t))},null,8,_le)],512),[[fe,o.value]]),te(_("span",wle,null,512),[[fe,o.value]]),l(vle)]),u[1]||(He(-1),(u[1]=_("div",{class:"ml-3 flex items-center lg:ml-6"},[te(l(m,{id:"header__moon",icon:"Moon",basic:"",onClick:a},null,512),[[h,i.$t("core::app.theme.switch_light"),void 0,{bottom:!0}]]),te(l(m,{id:"header__sun",icon:"Sun",basic:"",onClick:s},null,512),[[h,i.$t("core::app.theme.switch_system"),void 0,{bottom:!0}]]),te((g(),R(m,{id:"header__indeterminate",basic:"",onClick:r},{default:p(()=>u[3]||(u[3]=[_("svg",{viewBox:"0 0 24 24","data-slot":"icon"},[_("path",{fill:"currentColor",d:"M12 2A10 10 0 0 0 2 12A10 10 0 0 0 12 22A10 10 0 0 0 22 12A10 10 0 0 0 12 2M12 4A8 8 0 0 1 20 12A8 8 0 0 1 12 20V4Z"})],-1)])),_:1})),[[h,i.$t("core::app.theme.switch_dark"),void 0,{bottom:!0}]]),l(f),_("div",null,[l(zre)]),_("div",Ile,[l(Gre)]),u[4]||(u[4]=_("div",{id:"navbar-actions",class:"hidden lg:flex lg:items-center"},null,-1))])).cacheIndex=1,He(1),u[1])])])}}},kle={class:"group mt-8 px-2"},$le={class:"mt-1 space-y-1",role:"group","aria-labelledby":"metrics-headline"},Cle=["textContent"],$1={__name:"TheSidebarMetrics",setup(e){const{scriptConfig:t}=qe(),n=Pt(t("menu.metrics"));let o=null;function a(){Innoclapps.request("/menu/metrics").then(({data:s})=>{n.value=s})}function r(s){if(s.backgroundColorVariant==="warning")return"bg-warning-500";if(s.backgroundColorVariant==="danger")return"bg-danger-500";if(s.backgroundColorVariant==="info")return"bg-info-500";if(s.backgroundColorVariant==="primary")return"bg-primary-500";if(s.backgroundColorVariant==="neutral")return"bg-neutral-500"}return Xe(()=>{o=setInterval(a,1e3*60*10)}),mn(()=>{clearInterval(o)}),(s,i)=>{const u=c("Icon"),d=c("ILink"),m=ze("i-tooltip");return g(),D("div",kle,[i[0]||(He(-1),(i[0]=te((g(),D("h3",{id:"metrics-headline",class:"hidden px-3 text-xs font-medium uppercase tracking-wider text-neutral-50 group-hover:inline-flex group-hover:items-center"},[l(u,{icon:"QuestionMarkCircle",class:"mr-2 size-5"}),ne(" "+K(s.$t("core::app.menu.metrics.metrics")),1)])),[[m,s.$t("core::app.menu.metrics.refresh_interval",{interval:10}),void 0,{right:!0}]])).cacheIndex=0,He(1),i[0]),_("div",$le,[(g(!0),D(de,null,Ie(n.value,(f,h,y,b)=>{const I=[f.count];if(b&&b.key===f.name&&Fc(b,I))return b;const w=(g(),R(d,{key:f.name,class:"group flex items-center rounded-md px-3 py-2 text-base font-medium text-neutral-50 hover:bg-neutral-600 sm:text-sm",to:f.route,plain:""},{default:p(()=>[_("span",{"aria-hidden":"true",class:be([f.count>0?r(f):"bg-success-500","mr-4 size-2.5 rounded-full"])},null,2),_("span",{class:"mr-1 truncate",textContent:K(f.name)},null,8,Cle),ne(" ("+K(f.count)+") ",1)]),_:2},1032,["to"]));return w.memo=I,w},i,1),128))])])}}},Sle={class:"relative mt-4 inline-block px-3 text-left"},Tle={class:"flex w-full items-center justify-between"},Ele={class:"flex min-w-0 items-center justify-between space-x-3"},Fle={class:"flex min-w-0 flex-1 flex-col"},Ale={class:"truncate text-base font-medium text-neutral-800 dark:text-white sm:text-sm"},Rle={class:"truncate text-base text-neutral-600 dark:text-neutral-300 sm:text-sm"},Dle={class:"px-3 py-2"},Ole=["textContent"],C1={__name:"UserProfileDropdown",setup(e){const{currentUser:t,logout:n}=qe();return(o,a)=>{const r=c("IAvatar"),s=c("Icon"),i=c("IDropdownButton"),u=c("ITextBlockDark"),d=c("ITextDark"),m=c("IDropdownSeparator"),f=c("IDropdownItem"),h=c("IDropdownMenu"),y=c("IDropdown");return g(),D("div",Sle,[l(y,{placement:"bottom-start"},{default:p(({hide:b})=>[l(i,{as:"button",class:"group mt-3 w-full rounded-md bg-neutral-200 px-3.5 py-2 text-left text-base font-medium text-neutral-700 ring-1 ring-neutral-200 hover:bg-neutral-300 focus:bg-neutral-300 focus:outline-none dark:bg-neutral-800 dark:ring-neutral-500/30 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 sm:text-sm","no-caret":""},{default:p(()=>[_("span",Tle,[_("span",Ele,[l(r,{size:"md",src:v(t).avatar_url,title:v(t).name},null,8,["src","title"]),_("span",Fle,[_("span",Ale,K(v(t).name),1),_("span",Rle,K(v(t).email),1)])]),l(s,{icon:"Selector",class:"size-5 shrink-0 text-neutral-500 group-hover:text-neutral-600 dark:text-neutral-400 dark:group-hover:text-neutral-300"})])]),_:1}),l(h,{class:"sm:max-w-[200px]"},{default:p(()=>[v(t).teams.length>0?(g(),D(de,{key:0},[_("div",Dle,[l(u,{class:"inline-flex items-center"},{default:p(()=>[l(s,{icon:"Users",class:"mr-1 size-5"}),ne(" "+K(o.$t("users::team.your_teams",v(t).teams.length)),1)]),_:1}),(g(!0),D(de,null,Ie(v(t).teams,I=>(g(),R(d,{key:I.id,class:"flex font-medium"},{default:p(()=>[_("span",{class:be(["truncate",I.user_id===v(t).id?"text-primary-600 dark:text-primary-400":""]),textContent:K(I.name)},null,10,Ole)]),_:2},1024))),128))]),l(m)],64)):Z("",!0),l(f,{icon:"User",to:{name:"profile"},text:o.$t("users::profile.profile"),onClick:b},null,8,["text","onClick"]),l(f,{icon:"Calendar",to:{name:"calendar-sync"},text:o.$t("activities::calendar.calendar_sync"),onClick:b},null,8,["text","onClick"]),l(f,{icon:"RocketLaunch",class:"truncate",to:{name:"oauth-accounts"},text:o.$t("core::oauth.connected_accounts"),onClick:b},null,8,["text","onClick"]),v(t).access_api?(g(),R(f,{key:1,icon:"Globe",to:{name:"personal-access-tokens"},text:o.$t("core::api.access_tokens"),onClick:b},null,8,["text","onClick"])):Z("",!0),l(m),l(f,{icon:"ArrowLeftStartOnRectangle",href:"#",text:o.$t("auth::auth.logout"),onClick:I=>(v(n)(),b())},null,8,["text","onClick"])]),_:2},1024)]),_:1})])}}},Ple={class:"absolute right-0 top-0 -mr-12 pt-2"},Mle={class:"flex shrink-0 items-center px-4"},Ble={key:0,class:"font-bold text-white"},Nle=["src"],Vle={class:"mt-5 h-0 flex-1 overflow-y-auto"},Lle={id:"sidebar-sm",class:"space-y-0.5 px-2 text-base sm:text-sm"},qle={class:"hidden bg-[rgb(var(--sidebar-bg-color))] dark:bg-[rgb(var(--sidebar-dark-bg-color))] md:flex md:shrink-0"},Ule={class:"flex w-56 flex-col"},jle={class:"flex grow flex-col overflow-y-auto pb-4 pt-5"},zle={class:"flex shrink-0 items-center px-4"},Hle={key:0,class:"font-bold text-white"},Wle=["src"],Gle={class:"mt-6 flex h-0 flex-1 flex-col overflow-y-auto"},Kle={id:"sidebar-lg",class:"flex-1 space-y-1 px-2"},Zle={__name:"TheSidebar",setup(e){const{sidebarItems:t,sidebarOpen:n,scriptConfig:o}=qe(),a=P(()=>o("company_name")),r=o("logo_light");return(s,i)=>{const u=c("Icon"),d=c("ILink"),m=c("IBadge");return g(),D(de,null,[l(v(rl),{as:"template",show:v(n)},{default:p(()=>[l(v(Yi),{as:"div",class:"fixed inset-0 z-50 flex md:hidden",open:v(n),static:"",onClose:i[1]||(i[1]=f=>n.value=!1)},{default:p(()=>[l(v(ho),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>i[2]||(i[2]=[_("div",{class:"fixed inset-0 bg-neutral-900/75 transition-opacity dark:bg-neutral-700/90"},null,-1)])),_:1}),l(v(ho),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:p(()=>[l(v(Xi),{class:"relative flex w-56 max-w-xs flex-col bg-[rgb(var(--sidebar-bg-color))] pb-4 pt-5 dark:bg-[rgb(var(--sidebar-dark-bg-color))]"},{default:p(()=>[l(v(ho),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[_("div",Ple,[_("button",{type:"button",class:"ml-1 flex size-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:i[0]||(i[0]=f=>n.value=!1)},[i[3]||(i[3]=_("span",{class:"sr-only"},"Close sidebar",-1)),l(u,{icon:"XSolid",class:"size-6 text-white"})])])]),_:1}),_("div",Mle,[l(d,{class:"whitespace-normal",to:{name:"dashboard"},plain:""},{default:p(()=>[v(r)?(g(),D("img",{key:1,class:"h-10 max-h-14 w-auto",src:v(r)},null,8,Nle)):(g(),D("span",Ble,K(a.value),1))]),_:1})]),l(C1),_("div",Vle,[_("nav",Lle,[(g(!0),D(de,null,Ie(v(t),f=>(g(),R(d,{key:f.id,"active-class":"bg-white/10 text-white","inactive-class":"text-neutral-50 hover:bg-white/10",class:be(["group relative flex items-center rounded-md px-2 py-2 focus:outline-none","sidebar-sm-item-"+f.id]),to:f.route,plain:""},{default:p(()=>[f.icon?(g(),R(u,{key:0,class:"mr-4 size-6 shrink-0 text-neutral-300",icon:f.icon},null,8,["icon"])):Z("",!0),ne(" "+K(f.name)+" ",1),f.badge?(g(),R(m,{key:1,class:"absolute -left-px -top-px dark:bg-neutral-900",variant:f.badgeVariant,text:f.badge,pill:""},null,8,["variant","text"])):Z("",!0),f.inQuickCreate?(g(),R(d,{key:2,to:f.quickCreateRoute,class:be(["ml-auto rounded-md hover:bg-neutral-800 dark:hover:bg-neutral-900",s.$route.path===f.quickCreateRoute?"hidden":""]),plain:""},{default:p(()=>[l(u,{icon:"PlusSolid",class:"size-5"})]),_:2},1032,["to","class"])):Z("",!0)]),_:2},1032,["class","to"]))),128))])]),l($1)]),_:1})]),_:1})]),_:1},8,["open"])]),_:1},8,["show"]),te(_("div",qle,[_("div",Ule,[_("div",jle,[_("div",zle,[l(d,{class:"whitespace-normal",to:{name:"dashboard"},plain:""},{default:p(()=>[v(r)?(g(),D("img",{key:1,class:"h-10 max-h-14 w-auto",src:v(r)},null,8,Wle)):(g(),D("span",Hle,K(a.value),1))]),_:1})]),l(C1),_("div",Gle,[_("nav",Kle,[(g(!0),D(de,null,Ie(v(t),f=>(g(),R(d,{key:f.id,"active-class":"bg-white/10 text-white","inactive-class":"text-neutral-50 hover:bg-white/10",class:be(["group relative flex items-center rounded-md px-2 py-2 text-sm focus:outline-none","sidebar-lg-item-"+f.id]),to:f.route,plain:""},{default:p(()=>[f.icon?(g(),R(u,{key:0,class:"mr-3 size-6 shrink-0 text-neutral-300",icon:f.icon},null,8,["icon"])):Z("",!0),ne(" "+K(f.name)+" ",1),f.badge?(g(),R(m,{key:1,class:"absolute -left-px -top-px dark:bg-neutral-900",variant:f.badgeVariant,text:f.badge,pill:""},null,8,["variant","text"])):Z("",!0),f.inQuickCreate?(g(),R(d,{key:2,to:f.quickCreateRoute,class:be(["ml-auto hidden rounded-md hover:bg-neutral-800 dark:hover:bg-neutral-900",s.$route.path!==f.quickCreateRoute?"group-hover:block":""]),plain:""},{default:p(()=>[l(u,{icon:"PlusSolid",class:"size-5"})]),_:2},1032,["to","class"])):Z("",!0)]),_:2},1032,["class","to"]))),128))])]),l($1)])])],512),[[fe,["404","403","not-found"].indexOf(s.$route.name)===-1]])],64)}}};function Hn(e,t){if(!t)return e;let n=t();return Yle(n)?e:n}function Yle(e){return!e||Xle(e).every(t=>{var n,o;return t.type===Q1||t.type===ap&&!((n=t.children)!=null&&n.length)||t.type===de&&!((o=t.children)!=null&&o.length)})}function Xle(e){return Array.isArray(e)?e:e!=null?[e]:[]}const Qle={__name:"IButtonCopy",props:{text:[String,Number],as:{type:[String,Object],default:jn},successMessage:{type:String,default:"Text copied to clipboard."}},setup(e){const t=e,{copy:n}=zw({source:xt(t,"text"),legacy:!0});function o(){n(),Innoclapps.info(t.successMessage)}return(a,r)=>(g(),R(_t(e.as),{basic:e.as===jn?!0:void 0,icon:e.as===jn?a.$attrs.icon||"Clipboard":void 0,onClick:o},{default:p(()=>[Ee(a.$slots,"default")]),_:3},8,["basic","icon"]))}},xk={__name:"IButtonLink",setup(e){return(t,n)=>(g(),R(Rl,{as:"button"},{default:p(()=>[Ee(t.$slots,"default")]),_:3}))}},Wv=jn,kk=xk,Jle={install(e){e.component("IButton",jn),e.component("IButtonLink",xk),e.component("IButtonCopy",Qle)}};function ese(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M7.25 13.25V7.5h1.5v5.75a.75.75 0 0 1-1.5 0ZM8.75 2.75V5h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V2.75a.75.75 0 0 1 1.5 0ZM2.25 9.5a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5H4.5V2.75a.75.75 0 0 0-1.5 0V9.5h-.75ZM10 10.25a.75.75 0 0 1 .75-.75h.75V2.75a.75.75 0 0 1 1.5 0V9.5h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM3 12v1.25a.75.75 0 0 0 1.5 0V12H3ZM11.5 13.25V12H13v1.25a.75.75 0 0 1-1.5 0Z"})])}function tse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"}),_("path",{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"})])}function nse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 2a.75.75 0 0 1 .75.75v8.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.22 3.22V2.75A.75.75 0 0 1 8 2Z","clip-rule":"evenodd"})])}function ose(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z","clip-rule":"evenodd"})])}function ase(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm3.844-8.791a.75.75 0 0 0-1.188-.918l-3.7 4.79-1.649-1.833a.75.75 0 1 0-1.114 1.004l2.25 2.5a.75.75 0 0 0 1.15-.043l4.25-5.5Z","clip-rule":"evenodd"})])}function rse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function lse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M9.78 4.22a.75.75 0 0 1 0 1.06L7.06 8l2.72 2.72a.75.75 0 1 1-1.06 1.06L5.47 8.53a.75.75 0 0 1 0-1.06l3.25-3.25a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function sse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M6.22 4.22a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06l-3.25 3.25a.75.75 0 0 1-1.06-1.06L8.94 8 6.22 5.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function ise(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M11.78 9.78a.75.75 0 0 1-1.06 0L8 7.06 5.28 9.78a.75.75 0 0 1-1.06-1.06l3.25-3.25a.75.75 0 0 1 1.06 0l3.25 3.25a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"})])}function use(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M2 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM6.5 8a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12.5 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"})])}function cse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8 2a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM8 6.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM9.5 12.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"})])}function dse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z","clip-rule":"evenodd"})])}function mse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M3.75 7.25a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5Z"})])}function fse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M13.488 2.513a1.75 1.75 0 0 0-2.475 0L6.75 6.774a2.75 2.75 0 0 0-.596.892l-.848 2.047a.75.75 0 0 0 .98.98l2.047-.848a2.75 2.75 0 0 0 .892-.596l4.261-4.262a1.75 1.75 0 0 0 0-2.474Z"}),_("path",{d:"M4.75 3.5c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V9A.75.75 0 0 1 14 9v2.25A2.75 2.75 0 0 1 11.25 14h-6.5A2.75 2.75 0 0 1 2 11.25v-6.5A2.75 2.75 0 0 1 4.75 2H7a.75.75 0 0 1 0 1.5H4.75Z"})])}function pse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"})])}function vse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M5 4a.75.75 0 0 1 .738.616l.252 1.388A1.25 1.25 0 0 0 6.996 7.01l1.388.252a.75.75 0 0 1 0 1.476l-1.388.252A1.25 1.25 0 0 0 5.99 9.996l-.252 1.388a.75.75 0 0 1-1.476 0L4.01 9.996A1.25 1.25 0 0 0 3.004 8.99l-1.388-.252a.75.75 0 0 1 0-1.476l1.388-.252A1.25 1.25 0 0 0 4.01 6.004l.252-1.388A.75.75 0 0 1 5 4ZM12 1a.75.75 0 0 1 .721.544l.195.682c.118.415.443.74.858.858l.682.195a.75.75 0 0 1 0 1.442l-.682.195a1.25 1.25 0 0 0-.858.858l-.195.682a.75.75 0 0 1-1.442 0l-.195-.682a1.25 1.25 0 0 0-.858-.858l-.682-.195a.75.75 0 0 1 0-1.442l.682-.195a1.25 1.25 0 0 0 .858-.858l.195-.682A.75.75 0 0 1 12 1ZM10 11a.75.75 0 0 1 .728.568.968.968 0 0 0 .704.704.75.75 0 0 1 0 1.456.968.968 0 0 0-.704.704.75.75 0 0 1-1.456 0 .968.968 0 0 0-.704-.704.75.75 0 0 1 0-1.456.968.968 0 0 0 .704-.704A.75.75 0 0 1 10 11Z","clip-rule":"evenodd"})])}function hse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"fill-rule":"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm2.78-4.22a.75.75 0 0 1-1.06 0L8 9.06l-1.72 1.72a.75.75 0 1 1-1.06-1.06L6.94 8 5.22 6.28a.75.75 0 0 1 1.06-1.06L8 6.94l1.72-1.72a.75.75 0 1 1 1.06 1.06L9.06 8l1.72 1.72a.75.75 0 0 1 0 1.06Z","clip-rule":"evenodd"})])}function gse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{d:"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z"})])}function bse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function yse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function _se(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15"})])}function wse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})])}function Ise(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"})])}function xse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})])}function kse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"})])}function $se(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function Cse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"})])}function Sse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})])}function Tse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 21 3 16.5m0 0L7.5 12M3 16.5h13.5m0-13.5L21 7.5m0 0L16.5 12M21 7.5H7.5"})])}function Ese(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25"})])}function Fse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}function Ase(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"})])}function Rse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5M12 17.25h8.25"})])}function Dse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"})])}function Ose(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function Pse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"})])}function Mse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"})])}function Bse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})])}function Nse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"})])}function Vse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 0 0 .75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.114 48.114 0 0 0-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0 1 12 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 0 1-.673-.38m0 0A2.18 2.18 0 0 1 3 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 0 1 3.413-.387m7.5 0V5.25A2.25 2.25 0 0 0 13.5 3h-3a2.25 2.25 0 0 0-2.25 2.25v.894m7.5 0a48.667 48.667 0 0 0-7.5 0M12 12.75h.008v.008H12v-.008Z"})])}function Lse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0 1 12 12.75Zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 0 1-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 0 0 2.248-2.354M12 12.75a2.25 2.25 0 0 1-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 0 0-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 0 1 .4-2.253M12 8.25a2.25 2.25 0 0 0-2.248 2.146M12 8.25a2.25 2.25 0 0 1 2.248 2.146M8.683 5a6.032 6.032 0 0 1-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0 1 15.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 0 0-.575-1.752M4.921 6a24.048 24.048 0 0 0-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 0 1-5.223 1.082"})])}function qse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})])}function Use(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"})])}function jse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})])}function zse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 14.25v2.25m3-4.5v4.5m3-6.75v6.75m3-9v9M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"})])}function Hse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 0 1 .865-.501 48.172 48.172 0 0 0 3.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Wse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function Gse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"})])}function Kse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"})])}function Zse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Yse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})])}function Xse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})])}function Qse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})])}function Jse(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})])}function eie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function tie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function nie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"})])}function oie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"})])}function aie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function rie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"})])}function lie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})])}function sie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function iie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"})])}function uie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function cie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function die(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})])}function mie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function fie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function pie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function vie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}function hie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function gie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function bie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 16.318A4.486 4.486 0 0 0 12.016 15a4.486 4.486 0 0 0-3.198 1.318M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})])}function yie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"})])}function _ie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0 1 18 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0 1 18 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 0 1 6 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function wie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})])}function Iie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})])}function xie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function kie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 0 1-1.161.886l-.143.048a1.107 1.107 0 0 0-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 0 1-1.652.928l-.679-.906a1.125 1.125 0 0 0-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 0 0-8.862 12.872M12.75 3.031a9 9 0 0 1 6.69 14.036m0 0-.177-.529A2.25 2.25 0 0 0 17.128 15H16.5l-.324-.324a1.453 1.453 0 0 0-2.328.377l-.036.073a1.586 1.586 0 0 1-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 0 1-5.276 3.67m0 0a9 9 0 0 1-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"})])}function $ie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function Cie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m7.875 14.25 1.214 1.942a2.25 2.25 0 0 0 1.908 1.058h2.006c.776 0 1.497-.4 1.908-1.058l1.214-1.942M2.41 9h4.636a2.25 2.25 0 0 1 1.872 1.002l.164.246a2.25 2.25 0 0 0 1.872 1.002h2.092a2.25 2.25 0 0 0 1.872-1.002l.164-.246A2.25 2.25 0 0 1 16.954 9h4.636M2.41 9a2.25 2.25 0 0 0-.16.832V12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 12V9.832c0-.287-.055-.57-.16-.832M2.41 9a2.25 2.25 0 0 1 .382-.632l3.285-3.832a2.25 2.25 0 0 1 1.708-.786h8.43c.657 0 1.281.287 1.709.786l3.284 3.832c.163.19.291.404.382.632M4.5 20.25h15A2.25 2.25 0 0 0 21.75 18v-2.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125V18a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Sie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z"})])}function Tie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function Eie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"})])}function Fie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})])}function Aie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])}function Rie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function Die(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})])}function Oie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"})])}function Pie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"})])}function Mie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"})])}function Bie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"})])}function Nie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})])}function Vie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})])}function Lie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"})])}function qie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 3.75 18 6m0 0 2.25 2.25M18 6l2.25-2.25M18 6l-2.25 2.25m1.5 13.5c-8.284 0-15-6.716-15-15V4.5A2.25 2.25 0 0 1 4.5 2.25h1.372c.516 0 .966.351 1.091.852l1.106 4.423c.11.44-.054.902-.417 1.173l-1.293.97a1.062 1.062 0 0 0-.38 1.21 12.035 12.035 0 0 0 7.143 7.143c.441.162.928-.004 1.21-.38l.97-1.293a1.125 1.125 0 0 1 1.173-.417l4.423 1.106c.5.125.852.575.852 1.091V19.5a2.25 2.25 0 0 1-2.25 2.25h-2.25Z"})])}function Uie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function jie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function zie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})])}function Hie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Wie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})])}function Gie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6.878V6a2.25 2.25 0 0 1 2.25-2.25h7.5A2.25 2.25 0 0 1 18 6v.878m-12 0c.235-.083.487-.128.75-.128h10.5c.263 0 .515.045.75.128m-12 0A2.25 2.25 0 0 0 4.5 9v.878m13.5-3A2.25 2.25 0 0 1 19.5 9v.878m0 0a2.246 2.246 0 0 0-.75-.128H5.25c-.263 0-.515.045-.75.128m15 0A2.25 2.25 0 0 1 21 12v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6c0-.98.626-1.813 1.5-2.122"})])}function Kie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})])}function Zie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"})])}function Yie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}function Xie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})])}function Qie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})])}function Jie(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function eue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})])}function tue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 9.75 19.5 12m0 0 2.25 2.25M19.5 12l2.25-2.25M19.5 12l-2.25 2.25m-10.5-6 4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})])}function nue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})])}function oue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"})])}function aue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})])}function rue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function lue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"})])}function sue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"})])}function iue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 6h.008v.008H6V6Z"})])}function uue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function cue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})])}function due(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function mue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}function fue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function pue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125Z"})])}function vue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.5 3.75H6A2.25 2.25 0 0 0 3.75 6v1.5M16.5 3.75H18A2.25 2.25 0 0 1 20.25 6v1.5m0 9V18A2.25 2.25 0 0 1 18 20.25h-1.5m-9 0H6A2.25 2.25 0 0 1 3.75 18v-1.5M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function hue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8.25V18a2.25 2.25 0 0 0 2.25 2.25h13.5A2.25 2.25 0 0 0 21 18V8.25m-18 0V6a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 6v2.25m-18 0h18M5.25 6h.008v.008H5.25V6ZM7.5 6h.008v.008H7.5V6Zm2.25 0h.008v.008H9.75V6Z"})])}function gue(e,t){return g(),D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const bue={components:{EyeIcon:gie,SparklesSolidIcon:vse,CheckBadgeIcon:Kse,BanknotesIcon:Fse,LockClosedIcon:Die,ClockIcon:tie,CodeBracketIcon:oie,AcademicCapIcon:bse,RocketLaunchIcon:Kie,ChatBubbleBottomCenterTextIcon:Hse,ViewfinderCircleIcon:vue,SunIcon:rue,MoonIcon:Mie,MegaphoneIcon:Oie,VolumeOffIcon:tue,VolumeUpIcon:eue,EmojiHappyIcon:yie,EmojiSadIcon:bie,ArrowRightIcon:kse,ArrowLeftIcon:wse,ReplyIcon:Cse,CurrencyDollarIcon:sie,CursorClickIcon:iie,FilterIcon:Iie,ShareIcon:Yie,ListBulletIcon:Rie,CogIcon:aie,CollectionIcon:Gie,ColorSwatchIcon:lue,HomeIcon:$ie,LightBulbIcon:Fie,Bars3CenterLeftIcon:Dse,Bars3BottomLeftIcon:Ase,MenuAlt3Icon:Rse,PhotographIcon:jie,PlusSolidIcon:pse,MinusSolidIcon:mse,PlusIcon:Hie,MicrophoneIcon:Pie,UserGroupIcon:due,ViewGridIcon:nue,XSolidIcon:gse,ArchiveBoxIcon:yse,BugAntIcon:Lse,MagnifyingGlassSolidIcon:dse,ChartSquareBarIcon:zse,MailIcon:vie,CalendarIcon:Use,ArrowPathRoundedSquareIcon:Ise,TableCellsIcon:sue,UsersIcon:fue,UserIcon:mue,OfficeBuildingIcon:qse,InboxIcon:Sie,InboxStackIcon:Cie,GiftIcon:xie,KeyIcon:Eie,FilmIcon:_ie,FolderIcon:wie,CpuChipIcon:rie,PlayCircleIcon:zie,CheckCircleIcon:Zse,CheckCircleSolidIcon:ase,ArrowUpSolidIcon:ose,ArrowDownSolidIcon:nse,CheckIcon:Yse,XCircleSolidIcon:hse,InformationCircleIcon:Tie,ChevronUpSolidIcon:ise,ChevronDownSolidIcon:rse,ChevronRightSolidIcon:sse,ChevronLeftSolidIcon:lse,ChevronLeftIcon:Xse,ChevronRightIcon:Qse,ExclamationTriangleIcon:hie,ShieldExclamationIcon:Qie,ShieldCheckIcon:Xie,SquaresPlusIcon:oue,QuestionMarkCircleIcon:Wie,SelectorIcon:Jse,BellIcon:Mse,ArrowsPointingOutIcon:Sse,ArrowsRightLeftIcon:Tse,RefreshIcon:xse,DuplicateIcon:die,GlobeIcon:kie,DeviceMobileIcon:uie,PhoneIcon:Uie,PhoneXMarkIcon:qie,AdjustmentsVerticalSolidIcon:ese,ArrowLeftStartOnRectangleIcon:_se,PencilSquareSolidIcon:fse,WindowIcon:hue,DocumentDownloadIcon:cie,EllipsisHorizontalSolidIcon:use,EllipsisVerticalSolidIcon:cse,DocumentAddIcon:mie,DocumentIcon:pie,DocumentTextIcon:fie,DownloadSolidIcon:tse,ExternalLinkIcon:$se,LinkIcon:Aie,TrashIcon:uue,PencilAltIcon:Vie,PencilIcon:Lie,StarIcon:aue,Bars3Icon:Ose,TagIcon:iue,ViewColumnsIcon:pue,SortAscendingIcon:Pse,AtSymbolIcon:Ese,ShoppingBagIcon:Jie,BriefcaseIcon:Vse,ChatIcon:Gse,ChatAltIcon:Wse,BookOpenIcon:Bse,BookmarkIcon:Nse,CameraIcon:jse,TruckIcon:cue,CloudArrowUpIcon:nie,PaperClipIcon:Nie,PaintBrushIcon:Bie,ClipboardIcon:eie,CreditCardIcon:lie,WrenchScrewdriverIcon:gue,ScaleIcon:Zie},props:{type:{type:String,default:"hero"},icon:{required:!0}},setup(e){function t(){return e.type==="hero"}return{isHeroIcon:t}}};function yue(e,t,n,o,a,r){return o.isHeroIcon?(g(),R(_t(`${n.icon}Icon`),{key:0,"aria-hidden":"true"})):Z("",!0)}const Cs=an(bue,[["render",yue]]),Jf={primary:{bg:"bg-primary-50 dark:bg-primary-600/30",text:"text-primary-700 dark:text-primary-100",heading:"text-primary-800 dark:text-primary-100",icon:"text-primary-400 dark:text-primary-300"},success:{bg:"bg-success-50 dark:bg-success-600/20",text:"text-success-700 dark:text-success-100",heading:"text-success-800 dark:text-success-100",icon:"text-success-400 dark:text-success-300"},info:{bg:"bg-info-100/60 dark:bg-info-600/30",text:"text-info-700 dark:text-info-100",heading:"text-info-800 dark:text-info-100",icon:"text-info-400 dark:text-info-300"},warning:{bg:"bg-warning-100/60 dark:bg-warning-600/40",text:"text-warning-700 dark:text-warning-100",heading:"text-warning-800 dark:text-warning-100",icon:"text-warning-400 dark:text-warning-300"},danger:{bg:"bg-danger-50 dark:bg-danger-600/40",text:"text-danger-700 dark:text-danger-100",heading:"text-danger-800 dark:text-danger-100",icon:"text-danger-400 dark:text-danger-300"}},_ue={warning:"ExclamationTriangle",danger:"XCircleSolid",success:"CheckCircle"};function Cc(e,t){return Object.hasOwn(Jf,bt(t))&&Jf[bt(t)][e]||""}const wue=Ve({name:"IAlert",inheritAttrs:!1,props:{show:{type:Boolean,default:!0},icon:String,dismissible:Boolean,variant:{default:"info",type:String,validator(e){return Object.keys(Jf).includes(e)}}},emits:["dismissed"],setup(e,{slots:t,attrs:n,emit:o}){st("currentVariant",P(()=>e.variant));const a=V(!1),r=P(()=>e.icon||_ue[e.variant]||"InformationCircle"),s=P(()=>a.value?!1:e.show);function i(){a.value=!0,o("dismissed")}return()=>te(Ae("div",{...n,role:"alert",class:$t(["rounded-md p-4",Cc("bg",e.variant)],n.class)},[Ae("div",{class:"flex"},[Ae(Cs,{icon:r.value,class:["mt-0.5 size-5 shrink-0",Cc("icon",e.variant)]}),Ae("div",{class:"ml-3"},[t.default?t.default({variant:e.variant}):""]),e.dismissible&&Ae("div",{class:"ml-auto pl-3"},[Ae("div",{class:"-my-1.5"},[Ae(Wv,{"aria-labeL":"Close",class:"mt-1",icon:"XSolid",variant:e.variant,small:!0,ghost:!0,onClick:i})])])])]),[[fe,s.value]])}}),Iue=Ve({name:"IAlertHeading",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){const o=Le("currentVariant");return()=>Ae("h3",{...n,class:$t(["text-base/6 font-medium sm:text-sm/6",Cc("heading",o)],n.class)},Hn(e.text,t.default))}}),xue=Ve({name:"IAlertBody",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){const o=Le("currentVariant");return()=>Ae("div",{...n,class:$t(["text-base/6 sm:text-sm/6",Cc("text",o)],n.class)},Hn(e.text,t.default))}}),kue=Ve({name:"IAlertActions",setup(e,{slots:t}){return()=>Ae("div",{class:"mt-4"},[Ae("div",{class:"-mx-2.5 -my-1.5 flex space-x-4"},t.default?t.default():[])])}}),$ue={install(e){e.component("IAlert",wue),e.component("IAlertBody",xue),e.component("IAlertHeading",Iue),e.component("IAlertActions",kue)}},Qr=500,Sl=[0,50,100,200,300,400,500,600,700,800,900,950,1e3],S1=[50,100,200,300,400,500,600,700,800,900],Ko={value:"",valueStop:Qr,swatches:[],h:0,s:0,lMin:0,lMax:100,useLightness:!0};function $k(e,t,n){const[o,a,r]=[e,t,n].map(function(s){return s/=255,s<.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)});return 21.26*o+71.52*a+7.22*r}function Cue(e){return Fue($k(...Object.values(Ck(e))),2)}function Sue(e,t,n){const o={};for(let s=99;s>=0;s--)o[s]=Math.abs(n-$k(...Object.values(Sk(e,t,s))));let a=100,r=100;for(let s=Object.keys(o).length-1;s>=0;s--)o[s]<a&&(r=s,a=o[s]);return r}function Ck(e){e.length===6&&!e.startsWith("#")&&(e=`#${e}`);let t="0",n="0",o="0";return e.length===4?(t=`0x${e[1]}${e[1]}`,n=`0x${e[2]}${e[2]}`,o=`0x${e[3]}${e[3]}`):e.length===7&&(t=`0x${e[1]}${e[2]}`,n=`0x${e[3]}${e[4]}`,o=`0x${e[5]}${e[6]}`),{r:t,g:n,b:o}}function Tue(e){e.length===6&&!e.startsWith("#")&&(e=`#${e}`);let{r:t,g:n,b:o}=Ck(e);t/=255,n/=255,o/=255;const a=Math.min(t,n,o),r=Math.max(t,n,o),s=r-a;let i=0,u=0,d=0;return s===0?i=0:r===t?i=(n-o)/s%6:r===n?i=(o-t)/s+2:i=(t-n)/s+4,i=Math.round(i*60),i<0&&(i+=360),d=(r+a)/2,u=s===0?0:s/(1-Math.abs(2*d-1)),u=+(u*100).toFixed(1),d=+(d*100).toFixed(1),{h:i,s:u,l:d}}function Sk(e,t,n){t/=100,n/=100;const o=(1-Math.abs(2*n-1))*t,a=o*(1-Math.abs(e/60%2-1)),r=n-o/2;let s=0,i=0,u=0;return e>=0&&e<60?(s=o,i=a,u=0):e>=60&&e<120?(s=a,i=o,u=0):e>=120&&e<180?(s=0,i=o,u=a):e>=180&&e<240?(s=0,i=a,u=o):e>=240&&e<300?(s=a,i=0,u=o):e>=300&&e<360&&(s=o,i=0,u=a),{r:Math.round((s+r)*255),g:Math.round((i+r)*255),b:Math.round((u+r)*255)}}function Eue(e,t,n){let{r:o,g:a,b:r}=Sk(e,t,n);return o=o.toString(16),a=a.toString(16),r=r.toString(16),o.length===1&&(o=`0${o}`),a.length===1&&(a=`0${a}`),r.length===1&&(r=`0${r}`),`#${o}${a}${r}`}function Fue(e,t=0){const n=Math.pow(10,t);return Math.round(e*n)/n}function Aue(e,t,n){return"#"+(16777216+(e<<16|t<<8|n<<0)).toString(16).slice(1)}function Rue(e=0,t=Qr){const n=Sl,o=n.indexOf(t);if(o===-1)throw new Error(`Invalid key value: ${t}`);return n.map(a=>{const r=Math.abs(n.indexOf(a)-o),s=e?Math.round((r+1)*e*(1+r/10)):0;return s>100?{stop:a,tweak:100}:{stop:a,tweak:s}})}function Due(e=0,t=Qr){const n=Sl,o=n.indexOf(t);if(o===-1)throw new Error(`Invalid parameter value: ${t}`);return n.map(a=>{const r=Math.abs(n.indexOf(a)-o),s=e?(r+1)*e-e:0;return s<0?{stop:a,tweak:360+s}:s>360?{stop:a,tweak:s-360}:{stop:a,tweak:s}})}function Oue(e=0,t=100,n,o=Qr){const a=Sl,r=[{stop:0,tweak:t},{stop:o,tweak:n},{stop:1e3,tweak:e}];for(let s=0;s<a.length;s++){const i=a[s];if(i===0||i===1e3||i===o)continue;const u=Math.abs((i-o)/100),d=i<o?Math.abs(a.indexOf(o)-a.indexOf(Sl[0]))-1:Math.abs(a.indexOf(o)-a.indexOf(Sl[Sl.length-1]))-1,m=i<o?t-n:n-e,f=i<o?m/d*u+n:n-m/d*u;r.push({stop:i,tweak:Math.round(f)})}return r.sort((s,i)=>s.stop-i.stop),r}function Tk(e){const{value:t,valueStop:n}=e,o=e.useLightness??Ko.useLightness,a=e.h??Ko.h,r=e.s??Ko.s,s=e.lMin??Ko.lMin,i=e.lMax??Ko.lMax,u=Due(a,n),d=Rue(r,n),{h:m,s:f,l:h}=Tue(t),y=o?h:Cue(t),b=Oue(s,i,y,n);return u.map(({stop:w},k)=>{const x=m+u[k].tweak,$=f+d[k].tweak,C=o?b[k].tweak:Sue(x,$,b[k].tweak),F=Eue(x,$,C);return{stop:w,hex:w===n?`#${t.toUpperCase()}`:F.toUpperCase(),h:x,hScale:u[k].tweak,s:$,sScale:d[k].tweak,l:C}})}const Pue={__name:"ScopedVarColorPalette",props:{color:{type:String,required:!0},tag:{type:String,default:"span"},name:{type:String,default:"custom"}},setup(e){const t=e,n=[0,950,1e3],o=P(()=>{const a=t.color,r=Object.assign({},Ko,{value:a.substring(1),valueStop:Qr,lMax:Ko.lMax,lMin:Ko.lMin});return Tk(r).filter(i=>!n.includes(i.stop)).reduce((i,u)=>(i[u.stop]=Ju(u.hex),i),{})});return(a,r)=>(g(),R(_t(e.tag),{style:Nt({[`--color-${e.name}-50`]:o.value[50],[`--color-${e.name}-100`]:o.value[100],[`--color-${e.name}-200`]:o.value[200],[`--color-${e.name}-300`]:o.value[300],[`--color-${e.name}-400`]:o.value[400],[`--color-${e.name}-500`]:o.value[500],[`--color-${e.name}-600`]:o.value[600],[`--color-${e.name}-700`]:o.value[700],[`--color-${e.name}-800`]:o.value[800],[`--color-${e.name}-900`]:o.value[900]})},{default:p(()=>[Ee(a.$slots,"default")]),_:3},8,["style"]))}},T1={primary:"bg-primary-50 text-primary-700 ring-primary-700/10 dark:bg-primary-400/10 dark:text-primary-400 dark:ring-primary-400/30",neutral:"bg-neutral-100 text-neutral-700 ring-neutral-600/10 dark:bg-neutral-400/10 dark:text-neutral-400 dark:ring-neutral-400/20",success:"bg-success-50 text-success-700 ring-success-600/20 dark:bg-success-500/10 dark:text-success-400 dark:ring-success-500/20",info:"bg-info-50 text-info-700 ring-info-700/10 dark:bg-info-400/10 dark:text-info-400 dark:ring-info-400/30",warning:"bg-warning-50 text-warning-800 ring-warning-600/20 dark:bg-warning-400/10 dark:text-warning-500 dark:ring-warning-400/20",danger:"bg-danger-50 text-danger-700 ring-danger-600/10 dark:bg-danger-400/10 dark:text-danger-400 dark:ring-danger-400/20",custom:"bg-[rgba(var(--color-custom-50))] text-[rgba(var(--color-custom-700))] ring-[rgba(var(--color-custom-600),0.1)] dark:bg-[rgba(var(--color-custom-400),0.1)] dark:text-[rgba(var(--color-custom-300))] dark:ring-[rgba(var(--color-custom-400),0.2)]"},tu=Ve({name:"IBadge",inheritAttrs:!1,props:{text:[String,Number],tag:{type:String,default:"span"},pill:Boolean,icon:String,color:String,variant:{default:"neutral",type:String,validator(e){return Object.keys(T1).includes(e)}}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.color?Pue:e.tag,{...t,"data-slot":"badge",tag:e.color?e.tag:void 0,color:e.color||void 0,name:e.color?"custom":"",class:$t(["inline-flex items-center gap-x-1.5 px-2 py-1 text-sm font-medium ring-1 ring-inset sm:text-xs",T1[e.color?"custom":e.variant],e.pill?"min-h-6 min-w-6 justify-center rounded-full":"rounded-md"],t.class)},{default:()=>[e.icon?Ae(Cs,{class:"size-4",icon:e.icon}):null,Hn(e.text,n.default)]})}}),Od=Ve({name:"IBadgeButton",props:{text:[String,Number]},setup(e,{slots:t}){return()=>Ae(tu,{type:"button",tag:"button",class:"hover:opacity-80 disabled:pointer-events-none"},()=>Hn(e.text,t.default))}}),Mue={install(e){e.component("IBadge",tu),e.component("IBadgeButton",Od)}},Bue={};function Nue(e,t){return t[0]||(He(-1),(t[0]=(g(),D("svg",{"data-slot":"icon",class:"animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-loading":""},[t[1]||(t[1]=_("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),t[2]||(t[2]=_("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1))]))).cacheIndex=0,He(1),t[0])}const Gv=an(Bue,[["render",Nue]]),Lue={class:"absolute inset-0 z-50"},que={key:0,class:"absolute bottom-1/2 left-1/2 z-20 translate-y-1/2"},Ek={__name:"IOverlay",props:{show:Boolean},setup(e){return(t,n)=>(g(),D("div",{class:be({relative:e.show})},[Ee(t.$slots,"default"),te(_("div",Lue,[n[0]||(n[0]=_("div",{class:"absolute inset-0 rounded-lg bg-neutral-100 opacity-60 dark:bg-neutral-700/30"},null,-1)),e.show?(g(),D("div",que,[Ee(t.$slots,"overlay",{},()=>[l(Gv,{class:"size-5 text-primary-500 dark:text-neutral-300"})])])):Z("",!0)],512),[[fe,e.show]])],2))}},Ss=Ve({name:"IText",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:$t("text-neutral-500 dark:text-neutral-300","text-base/6 sm:text-sm/6",t.class)},Hn(e.text,n.default))}}),Uue=Ve({name:"ITextBlock",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae(Ss,{as:"div",...t,text:e.text},n)}}),Pd=Ve({name:"ITextDark",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:$t("text-neutral-800 dark:text-white","text-base/6 sm:text-sm/6",t.class)},Hn(e.text,n.default))}}),jue=Ve({name:"ITextBlockDark",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae(Pd,{as:"div",...t,text:e.text},n)}}),Fk=Ve({name:"ITextDisplay",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"h3"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:$t("text-lg/6 font-semibold text-neutral-900 dark:text-white sm:text-base/6",t.class)},Hn(e.text,n.default))}}),zue=Ve({name:"ITextSmall",inheritAttrs:!1,props:{text:[String,Number],as:{type:String,default:"p"}},setup(e,{attrs:t,slots:n}){return()=>Ae(e.as,{...t,class:$t("text-sm/5 text-neutral-500 dark:text-neutral-300 sm:text-xs/5",t.class)},Hn(e.text,n.default))}}),Hue={install(e){e.component("IText",Ss),e.component("ITextBlock",Uue),e.component("ITextBlockDark",jue),e.component("ITextDark",Pd),e.component("ITextDisplay",Fk),e.component("ITextSmall",zue)}},Wue=Ve({name:"ICard",inheritAttrs:!1,props:{as:{type:String,default:"div"},overlay:Boolean},setup(e,{slots:t,attrs:n}){return()=>Ae(Ek,{show:e.overlay},()=>Ae(e.as,{...n,class:$t(["overflow-hidden rounded-lg bg-white shadow-sm dark:bg-neutral-900","border border-neutral-200 dark:border-neutral-500/30","[&>[data-slot=header]]:mb-0 [&>[data-slot=header]]:border-b [&>[data-slot=header]]:border-neutral-200 [&>[data-slot=header]]:px-6 [&>[data-slot=header]]:py-4 [&>[data-slot=header]]:dark:border-neutral-500/30"],n.class)},t.default?t.default():[]))}}),Gue=Ve({name:"ICardHeader",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,"data-slot":"header",class:$t(["mb-3 flex flex-wrap items-center gap-x-2 gap-y-3 sm:flex-nowrap","has-[[data-slot=actions]]:justify-between"],n.class)},t.default?t.default():[])}}),Kue=Ve({name:"ICardHeading",setup(e,{slots:t}){return()=>Ae(Fk,{"data-slot":"heading"},t)}}),Zue=Ve({name:"ICardActions",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,"data-slot":"actions",class:$t("flex items-center gap-x-1.5",n.class)},t.default?t.default():[])}}),Yue=Ve({name:"ICardBody",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:$t("px-6 py-5",n.class)},t.default?t.default():[])}}),Xue=Ve({name:"ICardFooter",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:$t(["bg-neutral-50 dark:bg-neutral-800/90","px-6 py-4","border-t border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),Que={install(e){e.component("ICard",Wue),e.component("ICardHeader",Gue),e.component("ICardHeading",Kue),e.component("ICardActions",Zue),e.component("ICardBody",Yue),e.component("ICardFooter",Xue)}},Jue=["id","value","name","disabled","autocomplete","autofocus","type","tabindex","required","placeholder","pattern","minlength","maxlength","min","max"],Md=Object.assign({inheritAttrs:!1},{__name:"IFormInput",props:{type:{type:String,default:"text"},modelValue:[String,Number],debounce:{type:[Boolean,Number,String],default:!1},max:{type:[String,Number],default:void 0},min:{type:[String,Number],default:void 0},autocomplete:String,maxlength:[String,Number],minlength:[String,Number],pattern:String,placeholder:String,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","keyup","keydown","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=V(null),s=V(null);function i(x){const $=x.target.value;a("update:modelValue",$),a("input",$)}let u;Se(()=>o.debounce,x=>{u&&u.cancel&&u.cancel(),x!==!1&&x!==void 0?u=xa(i,x):u=i},{immediate:!0});function d(x){a("blur",x),x.target.value!==s.value&&a("change",x.target.value)}function m(x){a("focus",x),s.value=x.target.value}function f(x){a("keyup",x)}function h(x){a("keydown",x)}function y(){r.value.blur()}function b(){r.value.click()}function I(x){r.value.focus(x)}function w(){r.value.select()}function k(x){r.value.setRangeText(x)}return t({setRangeText:k,select:w,focus:I,click:b,blur:y,inputRef:r}),(x,$)=>(g(),D("input",Ue({id:e.id,ref_key:"inputRef",ref:r,class:v($t)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-500/80 disabled:bg-neutral-200 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-300/70 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","px-3.5 py-2.5 sm:px-3 sm:py-1.5 sm:text-sm/6"],x.$attrs.class),value:e.modelValue,name:e.name,disabled:e.disabled,autocomplete:e.autocomplete,autofocus:e.autofocus,type:e.type,tabindex:e.tabindex,required:e.required,placeholder:e.placeholder,pattern:e.pattern,minlength:e.minlength,maxlength:e.maxlength,min:e.min,max:e.max},{...x.$attrs,class:""},{onBlur:d,onFocus:m,onKeyup:f,onKeydown:h,onInput:$[0]||($[0]=(...C)=>v(u)&&v(u)(...C))}),null,16,Jue))}});let ece=0;function tce(){return++ece}const nce={__name:"ISelectClearButton",emits:["clear"],setup(e){return(t,n)=>{const o=c("Icon");return g(),D("button",{type:"button",class:"rounded-md border-0 p-0.5 text-neutral-400 outline-none hover:bg-neutral-50 hover:text-neutral-700 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-500 active:bg-neutral-50 active:text-neutral-700 dark:hover:bg-neutral-600/20 dark:hover:text-neutral-300 dark:active:bg-neutral-600/20",title:"Clear Selected","aria-label":"Clear Selected",onClick:n[0]||(n[0]=ot(a=>t.$emit("clear"),["prevent","stop"]))},[l(o,{icon:"XSolid",class:"size-5 shrink-0 sm:size-4"})])}}},oce={__name:"ISelectOption",props:["label","uid","index","active","isSelected","isSelectable","swatchColor"],emits:["typeAheadPointer","selected"],setup(e){const t=e,n=P(()=>t.isSelected||t.active),o=P(()=>({"bg-neutral-100/80 text-neutral-700 hover:text-neutral-900 dark:bg-neutral-700 dark:text-neutral-100 dark:hover:text-white":n.value,"text-neutral-700 dark:text-neutral-100 dark:hover:text-white":!n.value,"pointer-events-none opacity-50":!t.isSelectable}));return(a,r)=>Ia([n.value,e.isSelectable,e.label,e.swatchColor],()=>(g(),D("li",{id:`cs${e.uid}__option-${e.index}`,role:"option",class:"relative","aria-selected":n.value?!0:null},[_("a",{href:"#",class:be(["group block px-4 py-2 text-base/6 focus:outline-none sm:text-sm/6",o.value]),onClick:r[0]||(r[0]=ot(s=>a.$emit("selected"),["prevent"])),onMouseoverPassive:r[1]||(r[1]=ot(s=>e.isSelectable?a.$emit("typeAheadPointer",e.index):null,["self"]))},[(g(),R(_t(e.swatchColor?v(tu):"span"),{color:e.swatchColor||void 0},{default:p(()=>[Ee(a.$slots,"default",{label:e.label},()=>[ne(K(e.label),1)])]),_:3},8,["color"]))],34),Ee(a.$slots,"option-inner",{index:e.index})],8,["id","aria-selected"])),r,2)}},ace=["disabled","title","aria-label"],rce={__name:"ISelectSelectedOptionDeselectButton",props:{option:{required:!0},deselect:{type:Function,required:!0},disabled:Boolean,label:{type:[String,Number],required:!0}},setup(e){return(t,n)=>{const o=c("Icon");return g(),D("button",{type:"button",class:"text-current hover:opacity-60 focus:outline-none",disabled:e.disabled,title:`Deselect ${e.label}`,"aria-label":`Deselect ${e.label}`,onClick:n[0]||(n[0]=ot(a=>e.deselect(e.option),["stop"]))},[l(o,{icon:"XSolid",class:"size-4"})],8,ace)}}},lce={__name:"ISelectSelectedOption",props:["option","label","multiple","searching","disabled","deselect","simple"],setup(e){const t=e,n=P(()=>{const{option:o,multiple:a,disabled:r,simple:s,searching:i}=t,u=typeof o=="object";let d=["gap-x-2"],m={class:"",...u&&o.swatch_color&&{color:o.swatch_color}};return a||u&&o.swatch_color?(t.simple||d.push("!py-0.5","!text-sm","-my-px sm:-my-0"),a&&d.push("hover:opacity-90"),u&&!o.swatch_color&&(m.variant="neutral")):d.push("dark:text-white"),(r&&!s||i)&&d.push("opacity-60","dark:opacity-80"),m.class=d.join(" "),m});return(o,a)=>(g(),R(_t(typeof e.option=="object"&&e.option.swatch_color||e.multiple?v(tu):"span"),zt(Qt(n.value)),{default:p(()=>[Ee(o.$slots,"default",{label:e.label},()=>[ne(K(e.label),1)]),e.multiple&&!e.disabled?(g(),R(rce,{key:0,deselect:e.deselect,label:e.label,option:e.option},null,8,["deselect","label","option"])):Z("",!0)]),_:3},16))}},sce={modelValue:{},placeholderType:{type:String,default:"regular",validator:e=>["regular","display"].includes(e)},listClass:[String,Array,Object],listWrapperClass:[String,Array,Object],reorderable:Boolean,truncate:[Boolean,String],simple:Boolean,toggleIcon:{type:String,default:"Selector"},loading:Boolean,inputId:String,inputName:String,tabindex:Number,autocomplete:{type:String,default:"off"},placeholder:{type:String,default:""},autoscroll:{type:Boolean,default:!0},disabled:Boolean,clearable:{type:Boolean,default:!0},multiple:Boolean,clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},optionKey:{type:[String,Function],default:"id"},taggable:Boolean,pushTags:Boolean,createOptionProvider:Function,optionComparatorProvider:Function,displayNewOptionsLast:Boolean,options:{type:Array,default(){return[]}},filterable:{type:Boolean,default:!0},debounce:{type:[Boolean,Number,String],default:!1},filterBy:{type:Function,default(e,t,n){return(t||"").toLowerCase().indexOf(n.toLowerCase())>-1}},optionLabel:Function,reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0}};function ice(e,t,n,o,a){const r=V(-1);let s=null;const i=P(()=>e.value.length);Jt(()=>{s=v(t)}),Se(r,()=>{v(n)&&f()}),Se(i,y=>{for(let b=0;b<y;b++)if(s(v(e)[b])){r.value=b;break}});function u(){for(let y=r.value-1;y>=0;y--)if(s(v(e)[y])){r.value=y;break}}function d(){for(let y=r.value+1;y<i.value;y++)if(s(v(e)[y])){r.value=y;break}}function m(){const y=v(e)[r.value];y&&a(y)}function f(){var b;const y=((b=o.value)==null?void 0:b.targetDomElement.children[r.value])||!1;if(y){const I=h(),{top:w,bottom:k,height:x}=y.getBoundingClientRect();if(w<I.top)return o.value.targetDomElement.scrollTop=y.offsetTop;if(k>I.bottom)return o.value.targetDomElement.scrollTop=y.offsetTop-(I.height-x)}}function h(){return o.value?o.value.targetDomElement.getBoundingClientRect():{height:0,top:0,bottom:0}}return{typeAheadPointer:r,typeAheadSelect:m,typeAheadDown:d,typeAheadUp:u}}const uce={class:"flex items-center"},cce=["id","aria-expanded","aria-owns"],dce={class:"mr-4 grow"},mce=["id","name","tabindex","disabled","value","autocomplete","placeholder","readonly","aria-labelledby","aria-controls","aria-activedescendant"],fce={class:"flex items-center [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:shrink-0 [&>[data-slot=icon]]:text-neutral-400 [&>[data-slot=icon]]:sm:size-4"},pce={key:0,class:"border-b border-neutral-200 px-4 py-3 dark:border-neutral-500/30"},vce={class:"relative cursor-default select-none px-4 py-2 text-base/6 text-neutral-600 dark:text-neutral-300 sm:text-sm/6"},hce={class:"absolute right-5 top-2"},gce={class:"flex items-center space-x-1.5"},bce={key:0,"data-sortable-handle":"select-items",class:"cursor-move"},yce="body",_ce=Object.assign({name:"ICustomSelect",inheritAttrs:!1},{__name:"ISelect",props:sce,emits:["update:modelValue","update:draggable","open","close","cleared","optionSelecting","optionCreated","optionSelected","optionDeselecting","optionDeselected","search","searchBlur","searchFocus"],setup(e,{expose:t,emit:n}){const o=e,a=n;let r=null,s=null;const i=V(null),u=V(null),d=V(null),m=V(null),f=tce(),h=V(""),y=V(!1),b=V(!1),I=V([]),w=V([]),k=V(o.loading),{floatingStyles:x}=Vv(i,d,{placement:"bottom",middleware:[Nv(10),nk()],whileElementsMounted:Bv}),{t:$}=Pe();function C(we=null){return we==null?k.value=!k.value:k.value=we}function F(we){let Ge=null;return o.createOptionProvider?Ge=o.createOptionProvider(we):Ge=typeof ge.value[0]=="object"?{[o.label]:we}:we,a("optionCreated",Ge),Ge}function T(we,Ge){return we.filter(yt=>{let rn=S(yt);return typeof rn=="number"&&(rn=rn.toString()),o.filterBy(yt,rn,Ge)})}function S(we){return o.optionLabel?o.optionLabel(we):typeof we=="object"?Object.hasOwn(we,o.label)?we[o.label]:console.warn(`[select warn]: Label key "option.${o.label}" does not exist in options object ${JSON.stringify(we)}.`):we}function A(we){if(typeof we!="object")return we;if(typeof o.optionKey=="function")return o.optionKey(we);try{return Object.hasOwn(we,o.optionKey)?we[o.optionKey]:E(we)}catch(Ge){return console.warn("[select warn]: Could not stringify this option to generate unique key. Please provide 'optionKey' prop to return a unique key for each option.",we,Ge)}}function E(we){const Ge={};return Object.keys(we).sort().forEach(yt=>{Ge[yt]=we[yt]}),JSON.stringify(Ge)}function B(we){Array.isArray(we)?w.value=we.map(Ge=>L(Ge)):w.value=L(we)}function M(we){a("optionSelecting",we),X(we)||(o.taggable&&!ce(we)&&(a("optionCreated",we),oe(we)),o.multiple&&(we=le.value.concat(we)),j(we),a("optionSelected",we)),U()}function N(we){a("optionDeselecting",we),j(le.value.filter(Ge=>!q(Ge,we))),a("optionDeselected",we)}function G(){j(o.multiple?[]:null),a("cleared")}function U(we){o.closeOnSelect&&(W(),m.value.blur()),o.clearSearchOnSelect&&(h.value="")}function j(we){typeof o.modelValue>"u"&&(w.value=we),we!==null&&(Array.isArray(we)?we=we.map(Ge=>o.reduce(Ge)):we=o.reduce(we)),a("update:modelValue",we)}function O(){m.value.focus()}function H(){y.value=!0,O()}function W(){y.value=!1,h.value=""}function X(we){return le.value.some(Ge=>q(Ge,we))}function q(we,Ge){return o.optionComparatorProvider?o.optionComparatorProvider(we,Ge,A):A(we)===A(Ge)}function L(we){const Ge=rn=>JSON.stringify(o.reduce(rn))===JSON.stringify(we),yt=[...o.options,...I.value].filter(Ge);return yt.length===1?yt[0]:yt.find(rn=>q(rn,w.value))||we}function ee(){if(!m.value.value.length&&le.value&&le.value.length&&o.clearable){let we=null;o.multiple&&(we=Array.from(le.value.slice(0,le.value.length-1))),j(we)}}function ce(we){return ge.value.some(Ge=>q(Ge,we))}function ue(we){return typeof we=="object"?we:{[o.label]:we}}function oe(we){I.value.push(we)}function re(){h.value.length?h.value="":m.value.blur()}function Y(we){a("searchBlur")}function ae(){a("searchFocus")}const se=P(()=>ve.value?$("core::app.no_search_results"):$("core::app.not_enough_data")),xe=P(()=>typeof o.modelValue>"u"||!!o.reduce),le=P(()=>{let we=o.modelValue;return xe.value&&(we=w.value),we?[].concat(we):[]}),ge=P(()=>o.options.concat(o.pushTags?I.value:[])),ve=P(()=>!!h.value),ie=P(()=>y.value&&!k.value),me=P(()=>Fe.value&&o.placeholder?o.placeholder:""),Ce=P(()=>({deselect:N,multiple:o.multiple,disabled:o.disabled,searching:ve.value,simple:o.simple})),ke=P(()=>Be.value.length),Be=P(()=>{const we=[].concat(ge.value);if(!o.filterable&&!o.taggable)return we;let Ge=h.value.length?T(we,h.value):we;if(o.taggable&&h.value.length){const yt=F(h.value);ce(yt)||(o.displayNewOptionsLast?Ge.unshift(yt):Ge.push(yt))}return Ge}),Fe=P(()=>le.value.length===0),he=P(()=>!o.multiple&&o.clearable&&!y.value&&!Fe.value),_e=P(()=>(!o.simple||!(o.simple&&o.disabled))&&o.toggleIcon);typeof o.modelValue<"u"&&xe.value&&B(o.modelValue);const{typeAheadPointer:Te,typeAheadUp:Ne,typeAheadDown:lt,typeAheadSelect:Ke}=ice(Be,xt(o,"selectable"),xt(o,"autoscroll"),u,M);Se(()=>o.options,()=>{o.modelValue&&xe.value&&B(o.modelValue)}),Se(()=>o.modelValue,we=>{xe.value&&B(we)}),Se(()=>o.multiple,G),Se(y,we=>{a(we?"open":"close")}),Se(()=>o.debounce,we=>{r&&r(),s&&s.cancel&&s.cancel(),s=xa(Ge=>a("search",Ge,C),we),r=Se(h,s)},{immediate:!0}),Se(()=>o.loading,we=>{k.value=we});let $e=null;const De=V(null);function at(){typeof window<"u"&&"ResizeObserver"in window&&i.value&&($e=new ResizeObserver(([we])=>{De.value=we.borderBoxSize.reduce((Ge,{inlineSize:yt})=>Ge+yt,0)}),$e.observe(i.value))}function dt(){$e&&($e.disconnect(),$e=void 0,De.value=null)}return Xe(()=>{at(),Uw(d,W,{ignore:[i.value]})}),mn(dt),t({focus:O,show:H,hide:W}),(we,Ge)=>{const yt=c("Icon"),rn=c("SortableDraggable");return g(),D(de,null,[_("div",Ue(we.$attrs,{ref_key:"reference",ref:i,role:"button",class:["relative w-full text-left text-base/6 sm:text-sm/6",{"ring-2 ring-inset ring-primary-600 dark:ring-primary-600":y.value&&!we.simple,"rounded-lg px-3.5 py-2.5 shadow-sm ring-1 ring-inset ring-neutral-300 dark:ring-neutral-500/30 sm:px-3 sm:py-1.5":!we.simple,"bg-white dark:bg-neutral-500/10":!we.simple&&!we.disabled,"bg-neutral-200 dark:bg-neutral-700/10":!we.simple&&we.disabled,"pointer-events-none":we.disabled}],onClick:Ge[6]||(Ge[6]=Oe=>y.value?W():H())}),[_("div",uce,[_("div",{id:`cs${v(f)}__combobox`,role:"combobox","aria-label":"Search for an option",class:be(["flex items-center",{"cursor-text":we.filterable&&!we.simple,truncate:we.truncate}]),"aria-expanded":ie.value.toString(),"aria-owns":`cs${v(f)}__listbox`},[te(_("div",{class:be(["space-x-1.5",{"absolute left-auto flex opacity-40":!we.multiple&&ie.value,"max-w-[calc(100%-55px)]":we.truncate&&!we.multiple&&ie.value,"overflow-hidden":we.truncate}])},[(g(!0),D(de,null,Ie(le.value,Oe=>Ee(we.$slots,"selected-option-container",Ue({option:ue(Oe),label:S(Oe),truncate:we.truncate,ref_for:!0},Ce.value),()=>[l(lce,Ue({option:Oe,label:S(Oe),class:[typeof we.truncate=="string"?we.truncate:"",we.truncate?"block min-w-0 truncate":""],ref_for:!0},Ce.value),{default:p(({label:Ze})=>[Ee(we.$slots,"selected-option",Ue({ref_for:!0},ue(Oe)),()=>[ne(K(Ze),1)],!0),Ee(we.$slots,"after-selected-option-inner",{option:Oe},void 0,!0)]),_:2},1040,["option","label","class"])],!0)),256))],2),[[fe,!h.value||we.multiple]])],10,cce),te(_("div",dce,[_("input",{id:we.inputId,ref_key:"inputSearchRef",ref:m,type:"search","aria-autocomplete":"list",class:be([(ie.value||Fe.value||ve.value)&&!we.simple?"w-full":"w-0","cs__search border-0 bg-transparent p-0 text-base leading-none focus:border-0 focus:ring-0 dark:text-white sm:text-sm",we.placeholderType==="regular"?"placeholder-neutral-400 dark:placeholder-neutral-400":"placeholder-neutral-600 placeholder:font-medium dark:placeholder-neutral-100"]),name:we.inputName,tabindex:we.tabindex,disabled:we.disabled,value:h.value,autocomplete:we.autocomplete,placeholder:me.value,readonly:we.simple,"aria-labelledby":`cs${v(f)}__combobox`,"aria-controls":`cs${v(f)}__listbox`,"aria-activedescendant":ie.value&&Be.value[v(Te)]?`cs${v(f)}__option-${v(Te)}`:void 0,onBlur:Y,onFocus:ae,onInput:Ge[0]||(Ge[0]=Oe=>h.value=Oe.target.value),onCompositionstart:Ge[1]||(Ge[1]=Oe=>b.value=!0),onCompositionend:Ge[2]||(Ge[2]=Oe=>b.value=!0),onKeydown:[mo(ee,["delete"]),mo(re,["esc"]),Ge[3]||(Ge[3]=mo(ot((...Oe)=>v(Ne)&&v(Ne)(...Oe),["prevent"]),["up"])),Ge[4]||(Ge[4]=mo(ot((...Oe)=>v(lt)&&v(lt)(...Oe),["prevent"]),["down"])),Ge[5]||(Ge[5]=mo(ot(Oe=>!b.value&&v(Ke)(),["prevent"]),["enter"]))]},null,42,mce)],512),[[fe,!we.simple]]),_("div",fce,[te(l(nce,{class:"mr-2",disabled:we.disabled,onClear:G},null,8,["disabled"]),[[fe,he.value]]),k.value?(g(),R(Gv,{key:0,class:"-mt-0.5 mr-2"})):Z("",!0),_e.value?(g(),R(yt,{key:1,class:"toggle-icon",icon:we.toggleIcon},null,8,["icon"])):Z("",!0)])])],16),(g(),R(To,{to:yce},[y.value?(g(),D("div",{key:0,ref_key:"dropdownMenuWrapperRef",ref:d,class:be(["__popper overflow-hidden rounded-lg border border-neutral-200 bg-white shadow-lg dark:border-neutral-500/30 dark:bg-neutral-800",we.listWrapperClass]),style:Nt({zIndex:99999,width:typeof De.value=="number"?`${De.value}px`:"",...v(x)})},[we.simple&&we.filterable?(g(),D("div",pce,[l(Md,{modelValue:h.value,"onUpdate:modelValue":Ge[7]||(Ge[7]=Oe=>h.value=Oe),type:"search",placeholder:me.value},null,8,["modelValue","placeholder"])])):Z("",!0),Ee(we.$slots,"header",{},void 0,!0),(g(),R(rn,Ue({...we.$draggable.common,ghostClass:"drag-ghost"},{id:`cs${v(f)}__listbox`,ref_key:"dropdownMenuRef",ref:u,key:`cs${v(f)}__listbox`,handle:"[data-sortable-handle='select-items']",tag:"ul",role:"listbox","model-value":Be.value,"item-key":Oe=>A(Oe),class:[we.listClass,"max-h-80 overflow-y-auto"],"onUpdate:modelValue":Ge[9]||(Ge[9]=Oe=>we.$emit("update:draggable",Oe))}),gn({item:p(({element:Oe,index:Ze})=>[(g(),R(oce,{key:Ze,uid:v(f),"swatch-color":Oe.swatch_color,index:Ze,active:Ze===v(Te),label:S(Oe),"is-selectable":we.selectable(Oe),"is-selected":X(Oe),onSelected:Et=>M(Oe),onTypeAheadPointer:Ge[8]||(Ge[8]=Et=>Te.value=Et)},{default:p(({label:Et})=>[Ee(we.$slots,"option",zt(Qt(ue(Oe))),()=>[ne(K(Et),1)],!0)]),"option-inner":p(Et=>[_("span",hce,[_("div",gce,[Ee(we.$slots,"option-actions",zt(Qt(Et)),void 0,!0),we.reorderable?(g(),D("div",bce,[te(l(yt,{icon:"Selector",class:"size-5 text-neutral-600 dark:text-neutral-200"},null,512),[[fe,Be.value.length>1&&!ve.value]])])):Z("",!0)])])]),_:2},1032,["uid","swatch-color","index","active","label","is-selectable","is-selected","onSelected"]))]),_:2},[ke.value===0&&!we.loading?{name:"header",fn:p(()=>[_("li",vce,[Ee(we.$slots,"no-options",zt(Qt({search:h.value,loading:we.loading,searching:ve.value,text:se.value})),()=>[ne(K(se.value),1)],!0)])]),key:"0"}:void 0]),1040,["id","model-value","item-key","class"])),Ee(we.$slots,"footer",{},void 0,!0)],6)):Z("",!0)]))],64)}}}),wce=an(_ce,[["__scopeId","data-v-4e5ffed4"]]),Ice={},xce={class:"fixed inset-0 bg-neutral-900/25 transition-opacity dark:bg-neutral-700/40"};function kce(e,t){return g(),D("div",xce)}const Kv=an(Ice,[["render",kce]]);function Ak(e,t,n){function o(r){r===v(n)&&e()}function a(r){r===v(n)&&t()}Xe(()=>{jt("_dialog-hide",a),jt("_dialog-show",o)})}function Zv(e){return P(()=>{let t=v(e);return t==="xs"?"sm:max-w-md":!t||t==="sm"?"sm:max-w-lg":t==="md"?"sm:max-w-2xl":t==="lg"?"sm:max-w-3xl":t==="xl"?"sm:max-w-4xl":"sm:max-w-5xl"})}const $ce={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Cce={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Sce={class:"sm:flex sm:items-start"},Tce={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},Ece=["innerHTML"],Fce=["textContent"],Ace=["innerHTML"],Rce=["textContent"],Dce={class:"mt-6 sm:flex sm:flex-row-reverse"},Oce={__name:"IConfirmationDialog",props:{dialog:{required:!0,type:Object}},setup(e){const t=e,n=Zv(xt(t.dialog,"size")),o=V(!0),a=P(()=>t.dialog.title===!1?null:t.dialog.title),r=P(()=>t.dialog.icon||"ExclamationTriangle"),s=P(()=>t.dialog.confirmVariant||"danger");function i(){o.value=!1}function u(){t.dialog.resolve(),i()}function d(){t.dialog.reject(),i()}return(m,f)=>{const h=c("Icon");return g(),R(v(rl),{as:"template",show:o.value},{default:p(()=>[l(v(Yi),{as:"div",class:"dialog relative",open:o.value,static:""},{default:p(()=>[l(v(ho),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[l(Kv)]),_:1}),_("div",$ce,[_("div",Cce,[l(v(ho),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[l(v(Xi),{class:be(["relative w-full transform overflow-hidden rounded-xl bg-white px-4 pb-4 pt-5 text-left shadow-xl ring-1 ring-neutral-600/10 transition-all dark:bg-neutral-900 dark:ring-neutral-500/20 sm:my-8 sm:rounded-2xl sm:p-6",v(n)])},{default:p(()=>[e.dialog.component?(g(),R(_t(e.dialog.component),{key:0,close:i,cancel:d,dialog:e.dialog},null,8,["dialog"])):(g(),D(de,{key:1},[_("div",Sce,[_("div",{class:be(["mx-auto flex size-12 shrink-0 items-center justify-center rounded-full sm:mx-0 sm:size-10",e.dialog.iconWrapperColorClass?e.dialog.iconWrapperColorClass:"bg-danger-100"])},[l(h,{icon:r.value,class:be(["size-6",e.dialog.iconColorClass?e.dialog.iconColorClass:"text-danger-600"])},null,8,["icon","class"])],2),_("div",Tce,[l(v(Sx),{class:"mt-2 text-base/6 font-medium text-neutral-700 dark:text-white"},{default:p(()=>[e.dialog.html?(g(),D("span",{key:0,innerHTML:a.value},null,8,Ece)):(g(),D("span",{key:1,textContent:K(a.value)},null,8,Fce))]),_:1}),e.dialog.message?(g(),D("div",{key:0,class:be(a.value?"mt-2":"")},[l(v(Ss),null,{default:p(()=>[e.dialog.html?(g(),D("span",{key:0,innerHTML:e.dialog.message},null,8,Ace)):(g(),D("span",{key:1,textContent:K(e.dialog.message)},null,8,Rce))]),_:1})],2)):Z("",!0)])]),_("div",Dce,[l(jn,{class:"w-full sm:ml-2 sm:w-auto",variant:s.value,text:e.dialog.confirmText,onClick:u},null,8,["variant","text"]),l(jn,{class:"mt-2 w-full sm:mt-0 sm:w-auto",text:e.dialog.cancelText,basic:"",onClick:d},null,8,["text"])])],64))]),_:1},8,["class"])]),_:1})])])]),_:1},8,["open"])]),_:1},8,["show"])}}},Pce={},Mce={type:"button",class:"rounded bg-transparent text-neutral-400 outline-none hover:text-neutral-600 focus:text-neutral-600 dark:text-neutral-400 dark:hover:text-neutral-300 dark:focus:text-neutral-300"};function Bce(e,t){const n=c("Icon");return g(),D("button",Mce,[l(n,{icon:"XSolid",class:"size-6 sm:size-5"})])}const Rk=an(Pce,[["render",Bce]]),Nce=["textContent"],Dk={__name:"IDialogTitle",props:{title:String,subTitle:String},setup(e){return(t,n)=>(g(),D("div",null,[l(v(Sx),{class:"text-lg/6 font-semibold text-neutral-700 dark:text-white"},{default:p(()=>[Ee(t.$slots,"default",{title:e.title},()=>[ne(K(e.title),1)])]),_:3}),e.subTitle?(g(),D("p",{key:0,class:"mt-0.5 text-base/5 text-neutral-500 dark:text-neutral-300 sm:text-sm/5",textContent:K(e.subTitle)},null,8,Nce)):Z("",!0)]))}},Ok={form:Boolean,overlay:{type:Boolean,default:!0},visible:Boolean,title:String,subTitle:String,busy:Boolean,okText:[String,Number],okVariant:{type:String,default:"primary"},okDisabled:Boolean,okLoading:Boolean,cancelText:[String,Number],cancelDisabled:Boolean,hideFooter:Boolean,hideHeader:Boolean,hideHeaderClose:Boolean,initialFocus:{type:Object,default:null},static:Boolean,size:{type:String,default:"md",validator:e=>["xs","sm","md","lg","xl","xxl"].includes(e)},id:{type:String,default(){return So()}}},Vce={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Lce={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},qce={class:"bg-white p-6 dark:bg-neutral-900 sm:p-8"},Uce={key:0,class:"mb-6"},jce={key:0,class:"absolute right-5 top-6 -mt-px sm:right-7 sm:top-8 sm:mt-0"},zce={class:"px-6 pb-6 sm:px-8 sm:pb-8"},Hce={class:"flex justify-end space-x-2"},Wce=["id"],Gce={__name:"IModal",props:Ok,emits:["hidden","show","shown","ok","update:visible","submit"],setup(e,{expose:t,emit:n}){const o=e,a=n;Ak(h,y,xt(o,"id"));const r=Zv(xt(o,"size")),s=V(!1),i=V(!1),u=V(null),d=P(()=>o.busy||o.okDisabled),m=P(()=>o.busy||o.cancelDisabled);Se(()=>o.visible,I=>I?h():y());function f(){u.value.children.length>0||o.static||y()}function h(){a("show"),s.value=!0,a("update:visible",!0),We(()=>a("shown"))}function y(){i.value||(i.value=!0,s.value=!1,a("update:visible",!1),We(()=>{zn(()=>{a("hidden"),i.value=!1},200)}))}function b(I){a("ok",I)}return Xe(()=>{o.visible&&h()}),t({hide:y,show:h}),(I,w)=>(g(),R(v(rl),{as:"template",show:s.value},{default:p(()=>[l(v(Yi),{as:"div",class:"dialog relative",open:s.value,"initial-focus":I.initialFocus,static:"",onClose:f},{default:p(()=>[l(v(ho),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[te(l(Kv,null,null,512),[[fe,I.overlay]])]),_:1}),_("div",Vce,[_("div",Lce,[l(v(ho),{as:"template",enter:"ease-out duration-100","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-100","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[l(v(Xi),{as:I.form?"form":"div",novalidate:I.form?!0:void 0,class:be([v(r),"relative w-full transform overflow-hidden rounded-2xl bg-white text-left shadow-lg ring-1 ring-neutral-500/10 transition-all dark:bg-neutral-900 dark:ring-neutral-500/20 sm:my-8"]),onSubmit:w[0]||(w[0]=ot(k=>I.$emit("submit",k),["prevent"]))},{default:p(()=>[_("div",qce,[I.hideHeader?Z("",!0):(g(),D("div",Uce,[te(l(Dk,{class:"mr-5","sub-title":I.subTitle},{default:p(()=>[Ee(I.$slots,"title",{title:I.title},()=>[ne(K(I.title),1)])]),_:3},8,["sub-title"]),[[fe,!I.hideHeader]]),I.hideHeaderClose?Z("",!0):(g(),D("div",jce,[l(Rk,{onClick:y})]))])),_("div",null,[Ee(I.$slots,"default")])]),te(_("div",zce,[Ee(I.$slots,"modal-footer",{cancel:y},()=>[_("div",Hce,[Ee(I.$slots,"modal-cancel",{cancel:y,text:I.cancelText||I.$dialog._cancelText},()=>[l(jn,{disabled:m.value,text:I.cancelText||I.$dialog._cancelText,basic:"",onClick:y},null,8,["disabled","text"])]),Ee(I.$slots,"modal-ok",{text:I.okText||I.$dialog._okText},()=>[l(jn,{type:I.form?"submit":"button",variant:I.okVariant,disabled:d.value,loading:I.okLoading,text:I.okText||I.$dialog._okText,onClick:b},null,8,["type","variant","disabled","loading","text"])])])])],512),[[fe,!I.hideFooter]]),_("div",{id:I.id+"-teleport",ref_key:"teleportRef",ref:u,class:"_child-dialogs"},null,8,Wce)]),_:3},8,["as","novalidate","class"])]),_:3})])])]),_:3},8,["open","initial-focus"])]),_:3},8,["show"]))}},Kce={},Zce={class:"-mx-8 h-px bg-neutral-200 dark:bg-neutral-500/30"};function Yce(e,t){return g(),D("div",Zce)}const Xce=an(Kce,[["render",Yce]]),Qce={class:"fixed inset-0 overflow-hidden"},Jce={class:"absolute inset-0 overflow-hidden"},ede={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},tde={class:"flex h-full flex-col divide-y divide-neutral-600/10 border-l border-neutral-500/10 bg-white shadow-xl dark:divide-neutral-500/30 dark:border-neutral-500/30 dark:bg-neutral-900"},nde={class:"flex min-h-0 flex-1 flex-col overflow-y-scroll py-6"},ode={class:"px-4 sm:px-6"},ade={class:"flex items-start justify-between"},rde={class:"ml-3 h-5"},lde={class:"relative mt-6 flex-1 px-4 sm:px-6"},sde={class:"shrink-0 px-4 py-4"},ide={class:"flex shrink-0 flex-wrap justify-end space-x-2 sm:flex-nowrap"},ude=["id"],cde={__name:"ISlideover",props:Ok,emits:["hidden","show","shown","ok","update:visible","submit"],setup(e,{expose:t,emit:n}){const o=e,a=n;Ak(h,y,xt(o,"id"));const r=Zv(xt(o,"size")),s=V(!1),i=V(!1),u=V(null),d=P(()=>o.busy||o.okDisabled),m=P(()=>o.busy||o.cancelDisabled);Se(()=>o.visible,I=>I?h():y());function f(){u.value.children.length>0||o.static||y()}function h(){a("show"),s.value=!0,a("update:visible",!0),We(()=>a("shown"))}function y(){i.value||(i.value=!0,s.value=!1,a("update:visible",!1),We(()=>{zn(()=>{a("hidden"),i.value=!1},200)}))}function b(I){a("ok",I)}return Xe(()=>{o.visible&&h()}),t({hide:y,show:h}),(I,w)=>(g(),R(v(rl),{as:"template",show:s.value},{default:p(()=>[l(v(Yi),{as:"div",class:"dialog relative","initial-focus":I.initialFocus,open:s.value,static:"",onClose:f},{default:p(()=>[l(v(ho),{as:"template",enter:"ease-in-out duration-400","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-400","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[te(l(Kv,null,null,512),[[fe,I.overlay]])]),_:1}),_("div",Qce,[_("div",Jce,[_("div",ede,[l(v(ho),{as:"template",enter:"transform transition ease-in-out duration-400 sm:duration-600","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-400 sm:duration-600","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:p(()=>[l(v(Xi),{as:I.form?"form":"div",novalidate:I.form?!0:void 0,class:be(["pointer-events-auto w-screen",v(r)]),onSubmit:w[0]||(w[0]=ot(k=>I.$emit("submit",k),["prevent"]))},{default:p(()=>[_("div",tde,[_("div",nde,[te(_("div",ode,[_("div",ade,[l(Dk,{"sub-title":I.subTitle},{default:p(()=>[Ee(I.$slots,"title",{title:I.title},()=>[ne(K(I.title),1)])]),_:3},8,["sub-title"]),_("div",rde,[I.hideHeaderClose?Z("",!0):(g(),R(Rk,{key:0,onClick:y}))])])],512),[[fe,!I.hideHeader]]),_("div",lde,[Ee(I.$slots,"default")])]),te(_("div",sde,[Ee(I.$slots,"modal-footer",{cancel:y},()=>[_("div",ide,[Ee(I.$slots,"modal-cancel",{cancel:y,text:I.cancelText||I.$dialog._cancelText},()=>[l(jn,{disabled:m.value,text:I.cancelText||I.$dialog._cancelText,basic:"",onClick:y},null,8,["disabled","text"])]),Ee(I.$slots,"modal-ok",{text:I.okText||I.$dialog._okText},()=>[l(jn,{type:I.form?"submit":"button",variant:I.okVariant,disabled:d.value,loading:I.okLoading,text:I.okText||I.$dialog._okText,onClick:b},null,8,["type","variant","disabled","loading","text"])])])])],512),[[fe,!I.hideFooter]])]),_("div",{id:I.id+"-teleport",ref_key:"teleportRef",ref:u,class:"_child-dialogs"},null,8,ude)]),_:3},8,["as","novalidate","class"])]),_:3})])])])]),_:3},8,["initial-focus","open"])]),_:3},8,["show"]))}},dde={install(e,t={}){var n,o;e.component("IModal",Gce),e.component("IModalSeparator",Xce),e.component("ISlideover",cde),e.component("IConfirmationDialog",Oce),e.directive("dialog",{beforeMount:function(a,r,s){a._showDialog=()=>Ot("_dialog-show",r.value),a.addEventListener("click",a._showDialog)},unmounted:function(a,r,s){a.removeEventListener("click",a._showDialog)}}),e.config.globalProperties.$dialog={_okText:((n=t.dialog)==null?void 0:n.labels._okText)||"Ok",_cancelText:((o=t.dialog)==null?void 0:o.labels.cancelText)||"Cancel",hide:a=>Ot("_dialog-hide",a),show:a=>Ot("_dialog-show",a)},e.config.globalProperties.confirmationDialog=V(null),e.config.globalProperties.$confirm=function(a){var d,m,f,h;let r=null;const s=document.querySelectorAll(".dialog");let i=null;s.length>0&&(i=(d=s[s.length-1].querySelector("._child-dialogs"))==null?void 0:d.id);let u={title:(m=t.confirmation)==null?void 0:m.labels.title,confirmText:(f=t.confirmation)==null?void 0:f.labels.confirmText,cancelText:(h=t.confirmation)==null?void 0:h.labels.cancelText,_teleport:i?"#"+i:null};return typeof a=="string"?u.message=a:typeof a=="function"?r=a:u=Object.assign(u,a),new Promise((y,b)=>{e.config.globalProperties.confirmationDialog.value=Object.assign({},u,{resolve:I=>{y(I),r&&r(I),e.config.globalProperties.confirmationDialog.value=null},reject:I=>{b(I),e.config.globalProperties.confirmationDialog.value=null}})})}}},mde=Object.assign({inheritAttrs:!1},{__name:"IDropdownMinimal",props:{horizontal:Boolean,placement:{type:String,default:"bottom"}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("IDropdownMenu");return g(),R(v(Yv),{placement:e.placement,offset:10},{default:p(()=>[l(v(Mk),Ue({basic:"","no-caret":""},t.$attrs),{default:p(()=>[l(o,{icon:e.horizontal?"EllipsisHorizontalSolid":"EllipsisVerticalSolid"},null,8,["icon"])]),_:1},16),l(a,null,{default:p(()=>[Ee(t.$slots,"default")]),_:3})]),_:3},8,["placement"])}}}),fde={class:"inline-flex space-x-1"},pde={__name:"IExtendedDropdown",props:{text:[String,Number],to:[Object,String],adaptiveWidth:Boolean,placement:{type:String,default:"bottom-end"},arrow:{type:Boolean,default:!0},shift:[Boolean,Number],disabled:Boolean,loading:Boolean,variant:{type:String,default:"primary"},icon:{type:String},type:{type:String,default:"button"}},emits:["click"],setup(e){return(t,n)=>{const o=c("IDropdownButton");return g(),D("div",fde,[l(v(Yv),{placement:e.placement,"adaptive-width":e.adaptiveWidth,shift:e.shift},{default:p(()=>[l(o,{arrow:e.arrow,as:jn,disabled:e.disabled,basic:""},null,8,["arrow","disabled"]),Ee(t.$slots,"default")]),_:3},8,["placement","adaptive-width","shift"]),l(jn,{variant:e.variant,type:e.type,icon:e.icon,to:e.to,disabled:e.disabled,loading:e.loading,onClick:n[0]||(n[0]=a=>t.$emit("click",a))},{default:p(()=>[Ee(t.$slots,"button-content",{},()=>[ne(K(e.text),1)])]),_:3},8,["variant","type","icon","to","disabled","loading"])])}}},Pk=mde,vde=pde,Yv=Ve({name:"IDropdown",inheritAttrs:!1,props:{arrow:{type:Boolean,default:!0},portal:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},zIndex:{type:Number,default:1250},offset:{type:[Number,Function,Object],default:15},flip:{type:[Boolean,Number],default:!0}},emits:["show","hide"],setup(e,{emit:t,attrs:n,slots:o}){return st("arrow",P(()=>e.arrow)),()=>Ae(qne,null,{default:({close:a})=>[Ae(bk,{enter:"ease-out duration-100 overflow-y-hidden",enterFrom:"opacity-0 scale-95 overflow-y-hidden",enterTo:"opacity-100 scale-100 overflow-y-hidden",leave:"ease-in duration-75 overflow-y-hidden",leaveFrom:"opacity-100 scale-100 overflow-y-hidden",leaveTo:"opacity-0 scale-95 overflow-y-hidden",placement:e.placement,arrow:e.arrow,offset:e.offset,zIndex:e.zIndex,flip:e.flip,portal:e.portal,...n,onShow:()=>t("show"),onHide:()=>t("hide")},{default:()=>o.default?o.default({hide:a}):[]})]})}}),Mk=Ve({name:"IDropdownButton",inheritAttrs:!1,props:{as:{type:[String,Object],default:Wv},link:Boolean,noCaret:Boolean,text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>{const o=e.link?kk:e.as;return Ae(Une,{as:o,...t},{default:()=>[Hn(e.text,n.default),e.noCaret?null:Ae(Cs,{icon:"ChevronDownSolid",class:"ml-auto size-5 shrink-0 sm:size-4"})]})}}}),hde=Ve({name:"IDropdownMenu",setup(e,{slots:t}){const n=Le("arrow");return()=>Ae(jne,{class:"overflow-y-auto overflow-x-hidden rounded-lg border border-neutral-200 bg-white shadow-lg outline-none focus:outline-none dark:border-neutral-500/30 dark:bg-neutral-800"},{default:()=>[n?Ae(fae,{class:"absolute w-5 h-5 rotate-45 border border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-800"}):null,Ae("div",{class:"relative rounded-lg bg-white p-1 dark:bg-neutral-800"},t.default?t.default():[])]})}}),Bk=Ve({name:"IDropdownItem",inheritAttrs:!1,props:{active:Boolean,condensed:Boolean,disabled:Boolean,icon:String,href:String,text:[String,Number],to:[Object,String],confirmable:Boolean,confirmText:{type:[String,Number],default:"Confirm"}},emits:["click","confirmed"],setup(e,{emit:t,attrs:n,slots:o}){const a=V(!1),r=V(null),s=wt(),i=P(()=>e.href?e.href:e.to?s.resolve(e.to).href:"#");function u(m){return e.confirmable?a.value?(t("confirmed",m),a.value=!1,!1):(r.value.style.minWidth=`${r.value.offsetWidth}px`,a.value=!0,r.value.focus(),m.preventDefault(),m.stopPropagation(),!0):!1}function d(m,f){e.disabled||u(m)||(t("click",m),!m.defaultPrevented&&(e.to&&s.push(e.to),e.href||m.preventDefault(),f()))}return()=>Ae(zne,{disabled:e.disabled},{default:({active:m,close:f})=>[Ae("a",{ref:r,...n,href:i.value,class:$t(["grid grid-cols-[auto_1fr_1.5rem_0.5rem_auto] items-center rounded-lg text-left text-base/6 focus:outline-none sm:text-sm/6","[&>[data-slot=icon]]:col-start-1 [&>[data-slot=icon]]:row-start-1 [&>[data-slot=icon]]:mr-2.5 [&>[data-slot=icon]]:size-5 sm:[&>[data-slot=icon]]:mr-2 [&>[data-slot=icon]]:sm:size-4",e.disabled?"pointer-events-none opacity-50":"",e.condensed?"px-2.5 py-1.5 sm:px-2 sm:py-1":"px-3.5 py-2.5 sm:px-3 sm:py-1.5",a.value?"justify-center bg-danger-600 text-white hover:bg-danger-500 focus-visible:outline-danger-500":m||e.active?"bg-neutral-100 text-neutral-800 dark:bg-neutral-900/60 dark:text-white":"text-neutral-800 dark:text-white"],n.class),onClick:h=>d(h,f)},a.value?e.confirmText:[e.icon?Ae(Cs,{icon:e.icon}):null,Hn(e.text,o.default)])]})}}),gde=Ve({name:"IDropdownItemLabel",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:$t("col-start-2 row-start-1",t.class)},Hn(e.text,n.default))}}),bde=Ve({name:"IDropdownItemDescription",inheritAttrs:!1,props:{text:[String,Number]},setup(e,{slots:t,attrs:n}){return()=>Ae("p",{...n,"data-slot":"description",class:$t("col-span-2 col-start-2 row-start-2 text-sm/5 text-neutral-500 dark:text-neutral-400 sm:text-xs/5",n.class)},Hn(e.text,t.default))}}),yde=Ve({name:"IDropdownSeparator",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:$t("col-span-full mx-3.5 my-1 h-px border-0 bg-neutral-200 dark:bg-white/10 sm:mx-3",t.class)},n.default?n.default():"")}}),_de={install(e){e.component("IDropdown",Yv),e.component("IDropdownButton",Mk),e.component("IDropdownItemLabel",gde),e.component("IDropdownMenu",hde),e.component("IDropdownItem",Bk),e.component("IDropdownItemDescription",bde),e.component("IDropdownSeparator",yde),e.component("IDropdownMinimal",Pk),e.component("IExtendedDropdown",vde)}},wde={class:"mt-2 text-base/6 text-danger-600 dark:text-danger-500 sm:text-sm/6"},Ide={__name:"IFormError",props:{error:String},setup(e){return(t,n)=>te((g(),D("p",wde,[Ee(t.$slots,"default",{},()=>[ne(K(e.error),1)])],512)),[[fe,e.error]])}},xde={key:0,class:"mr-1 text-base text-danger-600 sm:text-sm",textContent:"*"},ep={__name:"IFormLabel",props:{as:{type:[String,Object],default:"label"},label:String,required:Boolean},setup(e){const t=e,n=P(()=>t.required&&t.label);return(o,a)=>(g(),R(_t(e.as),{"data-slot":"label",class:"block text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[n.value?(g(),D("span",xde)):Z("",!0),Ee(o.$slots,"default",{},()=>[ne(K(e.label),1)])]),_:3}))}},Nk={__name:"IFormText",props:{text:[String,Number]},setup(e){return(t,n)=>(g(),R(v(Ss),null,{default:p(()=>[Ee(t.$slots,"default",{},()=>[ne(K(e.text),1)])]),_:3}))}},kde={class:"mb-3"},$de={key:1,class:"flex"},Cde={class:"mb-px self-end text-xs text-neutral-600 dark:text-neutral-200"},Sde={__name:"IFormGroup",props:{label:String,labelFor:String,description:String,optional:Boolean,required:Boolean},setup(e){return(t,n)=>{const o=ze("t");return g(),D("div",kde,[Ee(t.$slots,"label",{label:e.label,labelFor:e.labelFor},()=>[!e.optional&&e.label?(g(),R(ep,{key:0,class:"mb-1",for:e.labelFor,label:e.label,required:e.required},null,8,["for","label","required"])):e.label?(g(),D("div",$de,[l(ep,{class:"mb-1 grow",for:e.labelFor,label:e.label},null,8,["for","label"]),te(_("span",Cde,null,512),[[o,"core::app.optional"]])])):Z("",!0)]),Ee(t.$slots,"default"),e.description?(g(),R(Nk,{key:0,class:"mt-1",text:e.description},null,8,["text"])):Z("",!0)])}}},Tde=Object.assign({inheritAttrs:!1},{__name:"IFormInputDropdown",props:{inputId:{type:String,default:"input-dropdown"},width:String,height:String,maxHeight:String,modelValue:String,placeholder:String,items:Array,disabled:Boolean,condensed:Boolean,flip:{type:[Boolean,Number],default:!0},adaptiveWidth:{type:Boolean,default:!0}},emits:["update:modelValue","blur","cleared","show","hide"],setup(e,{emit:t}){const n=e,o=t,a=Pt(n.modelValue);Se(a,d=>{d!==n.modelValue&&o("update:modelValue",d)}),Se(()=>n.modelValue,d=>{d!==a.value&&(a.value=d)});function r(d){zn(()=>o("blur"),500)}function s(d){a.value=d}function i(d){return d===a.value}function u(){a.value="",o("cleared")}return(d,m)=>{const f=c("IDropdownButton"),h=c("IDropdownItem"),y=c("IDropdownMenu"),b=c("IDropdown");return g(),R(b,{flip:e.flip,"adaptive-width":e.adaptiveWidth,onShow:m[1]||(m[1]=I=>d.$emit("show")),onHide:m[2]||(m[2]=I=>d.$emit("hide"))},{default:p(()=>[l(f,{as:"div",style:Nt({width:e.width}),class:be(["relative",{"pointer-events-none":e.disabled}]),"no-caret":""},{default:p(()=>[l(Md,Ue({id:e.inputId},d.$attrs,{modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=I=>a.value=I),autocomplete:"off",class:["pointer-events-none pr-8",{"sm:pointer-events-auto":!e.disabled}],disabled:e.disabled,placeholder:e.placeholder,onBlur:r}),null,16,["id","modelValue","class","disabled","placeholder"]),te(l(jn,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:ot(u,["prevent"])},null,512),[[fe,!!a.value]])]),_:1},8,["style","class"]),l(y,{style:Nt([{height:e.height,"overflow-y":e.maxHeight?"scroll":null,"max-height":e.maxHeight||"auto"}])},{default:p(()=>[(g(!0),D(de,null,Ie(e.items,(I,w)=>(g(),R(h,{key:w,active:i(I),text:I,condensed:e.condensed,onClick:k=>s(I)},null,8,["active","text","condensed","onClick"]))),128))]),_:1},8,["style"])]),_:1},8,["flip","adaptive-width"])}}}),Ede={__name:"IFormNumericInput",props:{currency:{type:String,default:""},max:{type:Number,default:Number.MAX_SAFE_INTEGER||9007199254740991},min:{type:Number,default:Number.MIN_SAFE_INTEGER||-9007199254740991},minus:Boolean,placeholder:{type:String,default:""},emptyValue:{type:[Number,String],default:""},precision:{type:Number,default:()=>Number(Innoclapps.scriptConfig("currency.precision"))},separator:{type:String,default:","},thousandSeparator:{default:()=>Innoclapps.scriptConfig("currency.thousands_separator"),type:String},decimalSeparator:{default:()=>Innoclapps.scriptConfig("currency.decimal_mark"),type:String},outputType:{type:String,default:"Number"},modelValue:{type:[Number,String],default:""},disabled:Boolean,currencySymbolPosition:{type:String,default:"prefix"}},emits:["blur","focus","update:modelValue"],setup(e,{emit:t}){const n=e,o=t,a=V(""),r=V(null),s=P(()=>k(a.value)),i=P(()=>k(n.modelValue,".")),u=P(()=>typeof n.decimalSeparator<"u"?n.decimalSeparator:n.separator===","?".":","),d=P(()=>typeof n.thousandSeparator<"u"?n.thousandSeparator:n.separator==="."?".":n.separator==="space"?" ":","),m=P(()=>n.currency?n.currencySymbolPosition==="suffix"?"%v %s":"%s %v":"%v");Se(i,$=>{r.value.inputRef!==document.activeElement&&(a.value=w($))},{flush:"post"}),Se([()=>n.separator,()=>n.currency,()=>n.precision],()=>{b(i.value),a.value=w(i.value)}),Xe(()=>{(i.value||x())&&(b(i.value),a.value=w(i.value),zn(()=>{b(i.value),a.value=w(i.value)},500))});function f($){o("blur",$),a.value=w(i.value)}function h($){o("focus",$),i.value===0?a.value=null:a.value=bc(i.value,{symbol:"",format:"%v",thousand:"",decimal:u.value,precision:Number(n.precision)})}function y(){b(s.value)}function b($){$>=n.max&&I(n.max),$<=n.min&&I(n.min),$>n.min&&$<n.max&&I($),!n.minus&&$<0&&(n.min>=0?I(n.min):I(0))}function I($){const C=gc($,n.precision),F=n.outputType.toLowerCase()==="string"?C:Number(C);o("update:modelValue",F)}function w($){return bc($,{symbol:n.currency,format:m.value,precision:Number(n.precision),decimal:u.value,thousand:d.value})}function k($,C){const F=typeof $=="string"&&$===""?n.emptyValue:$;return PI(F,C||u.value)}function x(){return i.value===0&&n.modelValue!==""}return($,C)=>(g(),R(Md,{ref_key:"inputRef",ref:r,modelValue:a.value,"onUpdate:modelValue":[C[0]||(C[0]=F=>a.value=F),y],type:"tel",placeholder:e.placeholder,disabled:e.disabled,onBlur:f,onFocus:h},null,8,["modelValue","placeholder","disabled"]))}},Fde=["id","name","autofocus","placeholder","tabindex","disabled","required","multiple","value"],Ade=Object.assign({inheritAttrs:!1},{__name:"IFormSelect",props:{modelValue:{},placeholder:String,multiple:Boolean,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","change"],setup(e,{expose:t,emit:n}){const o=n,a=V(null);function r(f){o("update:modelValue",f.target.value),o("change",f.target.value)}function s(f){o("input",f.target.value)}function i(f){o("blur",f)}function u(f){o("focus",f)}function d(){a.value.blur()}function m(f){a.value.focus(f)}return t({blur:d,focus:m}),(f,h)=>(g(),D("select",Ue({id:e.id,ref_key:"selectRef",ref:a,class:v($t)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-400 disabled:bg-neutral-200 disabled:opacity-100 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-400 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","py-2.5 pl-3.5 pr-[calc(theme(spacing[3.5])+24px)] sm:py-1.5 sm:pl-3 sm:pr-[calc(theme(spacing.3)+24px)] sm:text-sm/6","[&>option]:bg-white [&>option]:dark:bg-neutral-800"],f.$attrs.class),name:e.name,autofocus:e.autofocus,placeholder:e.placeholder,tabindex:e.tabindex,disabled:e.disabled,required:e.required,multiple:e.multiple,value:e.modelValue},{...f.$attrs,class:""},{onBlur:i,onFocus:u,onInput:s,onChange:r}),[Ee(f.$slots,"default")],16,Fde))}}),Rde=["id","value","name","tabindex","autocomplete","autofocus","required","placeholder","pattern","wrap","minlength","maxlength","rows","cols","disabled"],Dde=Object.assign({inheritAttrs:!1},{__name:"IFormTextarea",props:{rows:[String,Number],cols:[String,Number],wrap:{type:String,default:"soft"},resizeable:{type:Boolean,default:!0},minHeight:{default:60,type:[String,Number]},modelValue:[String,Number],autocomplete:String,maxlength:[String,Number],minlength:[String,Number],pattern:String,placeholder:String,id:String,name:String,disabled:Boolean,autofocus:Boolean,required:Boolean,tabindex:[String,Number]},emits:["update:modelValue","focus","blur","input","change","keyup","keydown"],setup(e,{expose:t,emit:n}){const o=e,a=n,r=V(null),s=V(null);function i(x){x.target.style.height="auto",x.target.style.height=x.target.scrollHeight+"px"}function u(x){o.resizeable&&i(x),a("input",x.target.value),a("update:modelValue",x.target.value)}function d(x){a("focus",x),o.resizeable&&i(x),s.value=x.target.value}function m(x){a("blur",x),x.target.value!==s.value&&a("change",x.target.value)}function f(x){a("keyup",x)}function h(x){a("keydown",x)}function y(){r.value.blur()}function b(){r.value.click()}function I(x){r.value.focus(x)}function w(){r.value.select()}function k(x){r.value.setRangeText(x)}return Xe(()=>{o.resizeable&&We(()=>{zn(()=>{var x;(x=r.value)==null||x.setAttribute("style","height:"+(r.value.scrollHeight||o.minHeight)+"px;")},400)})}),t({setRangeText:k,select:w,focus:I,click:b,blur:y}),(x,$)=>(g(),D("textarea",Ue({id:e.id,ref_key:"textareaRef",ref:r,value:e.modelValue,name:e.name,tabindex:e.tabindex,autocomplete:e.autocomplete,autofocus:e.autofocus,required:e.required,placeholder:e.placeholder,pattern:e.pattern,wrap:e.wrap,minlength:e.minlength,maxlength:e.maxlength,rows:e.rows,cols:e.cols,disabled:e.disabled,class:v($t)(["block w-full rounded-lg border-0 text-base/6 text-neutral-900 shadow-sm placeholder:text-neutral-400 disabled:bg-neutral-200 dark:bg-neutral-500/10 dark:text-white dark:placeholder-neutral-400 dark:disabled:bg-neutral-700/10","ring-1 ring-inset ring-neutral-300 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:ring-neutral-500/30 dark:focus:ring-primary-600","px-3.5 py-2.5 sm:px-3 sm:py-1.5 sm:text-sm/6",e.resizeable?"resize-none overflow-y-hidden":""],x.$attrs.class)},{...x.$attrs,class:""},{onBlur:m,onFocus:d,onKeyup:f,onKeydown:h,onInput:u}),null,16,Rde))}}),Ode={install(e){e.component("IFormGroup",Sde),e.component("IFormLabel",ep),e.component("IFormError",Ide),e.component("IFormText",Nk),e.component("IFormInput",Md),e.component("IFormNumericInput",Ede),e.component("IFormSelect",Ade),e.component("IFormTextarea",Dde),e.component("IFormInputDropdown",Tde)}},Pde=Ve({name:"IFormCheckbox",inheritAttrs:!1,props:{checked:[Array,String,Boolean,Number],value:{type:[Array,String,Boolean,Number],default:!0},uncheckedValue:{type:[Array,String,Boolean,Number],default:!1}},emits:["update:checked","change"],setup(e,{emit:t,attrs:n}){const o=V(null),a=P(()=>Array.isArray(e.checked)?!!e.checked.find(s=>String(s)===String(e.value))||!1:e.checked==e.value);function r(s){const i=e.checked,u=s.target.checked;let d;Array.isArray(i)?(d=[...i],u?d.push(e.value):d.splice(d.findIndex(m=>String(m)===String(e.value)),1)):d=u?e.value:e.uncheckedValue,t("update:checked",d),t("change",d)}return Xe(()=>E1(o.value)),Jr(()=>E1(o.value)),()=>Ae("input",{ref:o,type:"checkbox","data-slot":"control",...n,class:$t(["size-4 rounded-[calc(theme(borderRadius.md)-1px)] bg-transparent","border-neutral-300 dark:border-neutral-500/30","hover:border-neutral-400/70 dark:hover:border-neutral-200/20","focus:ring-0 focus:ring-offset-0 focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","text-primary-600 dark:text-primary-600","shadow-sm checked:shadow-[inset_0_1px_theme(colors.white/15%)] dark:shadow-none dark:checked:shadow-none","disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none"],n.class),checked:a.value,value:e.value,onChange:r})}}),Mde=Ve({name:"IFormCheckboxGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(Ed,{as:"div",...t,"data-slot":"control",class:$t(["space-y-3","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Bde=Ve({name:"IFormCheckboxLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Lx,{...t,"data-slot":"label",class:$t("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),Nde=Ve({name:"IFormCheckboxField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(Ed,{as:"div",...t,"data-slot":"field",class:$t(["grid grid-cols-[1.125rem_1fr] items-center gap-x-2 gap-y-1 sm:grid-cols-[1rem_1fr]","[&>[data-slot=control]]:col-start-1 [&>[data-slot=control]]:row-start-1 [&>[data-slot=control]]:justify-self-center","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=label]]:col-start-2 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-2 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Vde=Ve({name:"IFormCheckboxDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(qx,{as:"p",...t,"data-slot":"description",class:$t("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),Lde={install(e){e.component("IFormCheckboxGroup",Mde),e.component("IFormCheckboxField",Nde),e.component("IFormCheckboxLabel",Bde),e.component("IFormCheckboxDescription",Vde),e.component("IFormCheckbox",Pde)}},E1=e=>{const t=e.nextElementSibling||e.previousElementSibling;t&&!e.getAttribute("id")&&t.dataset.slot==="label"&&(t.getAttribute("for")||t.setAttribute("for",t.getAttribute("id")),e.setAttribute("id",t.getAttribute("id")))},qde=Ve({name:"IFormRadio",inheritAttrs:!1,props:{modelValue:[String,Boolean,Number],value:{type:[String,Boolean,Number],required:!0},name:{type:String,required:!0}},emits:["update:modelValue","change"],setup(e,{emit:t,attrs:n}){const o=V(null),a=P(()=>r(e.value)==r(e.modelValue));function r(i){return i==="false"?i=!1:i==="true"&&(i=!0),i}function s(i){let u=r(i.target.value);t("update:modelValue",u),t("change",u)}return Xe(()=>F1(o.value)),Jr(()=>F1(o.value)),()=>Ae("input",{ref:o,type:"radio","data-slot":"control",...n,class:$t(["size-4 bg-transparent shadow-sm","border-neutral-300 dark:border-neutral-500/30","hover:border-neutral-400/70 dark:hover:border-neutral-200/20","focus:ring-0 focus:ring-offset-0 focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","text-primary-600 dark:text-primary-600","disabled:pointer-events-none disabled:opacity-50"],n.class),checked:a.value,name:e.name,value:e.value,onChange:s})}}),Ude=Ve({name:"IFormRadioGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae($s,{...t,"data-slot":"control",class:$t(["space-y-3","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),jde=Ve({name:"IFormRadioLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(vr,{...t,"data-slot":"label",class:$t("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),zde=Ve({name:"IFormRadioField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae($s,{...t,"data-slot":"field",class:$t(["grid grid-cols-[1.125rem_1fr] items-center gap-x-2 gap-y-1 sm:grid-cols-[1rem_1fr]","[&>[data-slot=control]]:col-start-1 [&>[data-slot=control]]:row-start-1 [&>[data-slot=control]]:justify-self-center","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=label]]:col-start-2 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-2 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Hde=Ve({name:"IFormRadioDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(gi,{as:"p",...t,"data-slot":"description",class:$t("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),Wde={install(e){e.component("IFormRadioGroup",Ude),e.component("IFormRadioField",zde),e.component("IFormRadioLabel",jde),e.component("IFormRadioDescription",Hde),e.component("IFormRadio",qde)}},F1=e=>{const t=e.nextElementSibling||e.previousElementSibling;t&&!e.getAttribute("id")&&t.dataset.slot==="label"&&(t.getAttribute("for")||t.setAttribute("for",t.getAttribute("id")),e.setAttribute("id",t.getAttribute("id")))},Gde=Ve({name:"IFormSwitch",inheritAttrs:!1,props:{modelValue:{},disabled:Boolean,value:{default:!0},uncheckedValue:{default:!1}},emits:["update:modelValue","change"],setup(e,{emit:t,attrs:n}){const o=V(!1);return Se(o,a=>{const r=a?e.value:e.uncheckedValue;r!==e.modelValue&&(t("update:modelValue",r),t("change",r))}),Se(()=>e.modelValue,a=>{o.value=a===e.value},{immediate:!0}),()=>Ae(Xne,{...n.class,modelValue:o.value,"onUpdate:modelValue":a=>{o.value=a},"data-slot":"control",disabled:e.disabled,class:$t(["relative inline-flex shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none","h-5 w-9","focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-70",o.value?"bg-primary-600":"bg-neutral-200 dark:bg-neutral-700"],n.class)},{default:()=>[Ae("span",{"aria-hidden":"true",class:[o.value?"translate-x-4 dark:bg-neutral-300":"translate-x-0 dark:bg-neutral-400","pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"]})]})}}),Kde=Ve({name:"IFormSwitchGroup",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(Ed,{as:"div",...t,"data-slot":"control",class:$t(["space-y-3 [&_[data-slot=label]]:font-normal","has-[[data-slot=description]]:space-y-6 [&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Zde=Ve({name:"IFormSwitchLabel",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(Lx,{...t,"data-slot":"label",class:$t("select-none text-base/6 text-neutral-900 dark:text-white sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),Yde=Ve({name:"IFormSwitchField",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae(Ed,{as:"div",...t,"data-slot":"field",class:$t(["grid grid-cols-[1fr_auto] items-center gap-x-4 gap-y-1 sm:grid-cols-[1fr_auto]","has-[[data-slot=control]:disabled]:opacity-70","[&>[data-slot=control]]:col-start-2 [&>[data-slot=control]]:self-center","[&>[data-slot=label]]:col-start-1 [&>[data-slot=label]]:row-start-1 [&>[data-slot=label]]:justify-self-start","[&>[data-slot=description]]:col-start-1 [&>[data-slot=description]]:row-start-2","[&_[data-slot=label]]:has-[[data-slot=description]]:font-medium"],t.class)},n)}}),Xde=Ve({name:"IFormSwitchDescription",inheritAttrs:!1,props:{text:String},setup(e,{attrs:t,slots:n}){return()=>Ae(qx,{as:"p",...t,"data-slot":"description",class:$t("text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6",t.class)},{default:()=>Hn(e.text,n.default)})}}),Qde={install(e){e.component("IFormSwitchGroup",Kde),e.component("IFormSwitchField",Yde),e.component("IFormSwitchLabel",Zde),e.component("IFormSwitchDescription",Xde),e.component("IFormSwitch",Gde)}},Jde={__name:"IActionMessage",props:{message:String,show:Boolean},setup(e){return(t,n)=>(g(),R(sr,{"leave-active-class":"transition ease-in duration-1000","leave-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[te(l(v(Ss),null,{default:p(()=>[Ee(t.$slots,"default",{},()=>[ne(K(e.message),1)])]),_:3},512),[[fe,e.show]])]),_:3}))}},eme=["src"],tme={__name:"IAvatar",props:{src:{type:String,required:!0},size:{default:"sm",type:String,validator:e=>["xs","sm","md","lg"].includes(e)}},setup(e){const t={xs:"size-5",sm:"size-6",md:"size-7",lg:"size-8"};return(n,o)=>(g(),D("img",{class:be(["inline-block rounded-full",t[e.size]]),src:e.src},null,10,eme))}},nme={class:"inline-flex flex-wrap"},ome=["onClick"],ame={class:"relative"},rme=["name","model-value"],lme={__name:"IColorSwatch",props:{modelValue:String,name:String,swatches:Array,customable:{default:!0,type:Boolean}},emits:["update:modelValue","input","removeRequested"],setup(e,{emit:t}){const n=e,o=t,a=V(null),r=P(()=>(n.swatches||[]).map(h=>h.toLowerCase())),s=P(()=>n.modelValue?n.modelValue.toLowerCase():null),i=P(()=>n.modelValue?r.value.filter(h=>h===s.value).length===0:!1),u=xa(d,500);function d(h){o("update:modelValue",h),o("input",h)}function m(){d(null),o("removeRequested")}function f(){m(),a.value.click()}return(h,y)=>{const b=c("Icon");return g(),D("div",nme,[(g(!0),D(de,null,Ie(r.value,I=>(g(),D("button",{key:I,type:"button",class:"mb-2 mr-1 inline-flex size-8 items-center justify-center rounded",style:Nt({backgroundColor:I}),onClick:w=>I===s.value?m():d(I)},[I===s.value?(g(),R(b,{key:0,icon:"Check",class:"size-5",style:Nt({color:v(Zr)(I)})},null,8,["style"])):Z("",!0)],12,ome))),128)),_("div",ame,[_("input",{ref_key:"customColorInputRef",ref:a,class:"m-0 -ml-0.5 -mt-1 h-[40px] w-[38px] cursor-pointer appearance-none border-0 bg-white p-0 outline-none [&::-webkit-color-swatch]:rounded",type:"color",name:e.name,"model-value":i.value?s.value:"#ffffff",onInput:y[0]||(y[0]=I=>v(u)(I.target.value))},null,40,rme),i.value?(g(),D("a",{key:0,href:"#",class:"absolute left-1.5 top-1.5 ml-px cursor-pointer",onClick:ot(f,["prevent"])},[l(b,{icon:"Check",class:"size-5",style:Nt({color:v(Zr)(s.value)})},null,8,["style"])])):Z("",!0)])])}}},sme={class:"text-center"},ime={class:"mt-6"},ume={__name:"IEmptyState",props:{title:String,description:String,buttonText:String,buttonIcon:{default:"PlusSolid",type:String},to:[Object,String],secondButtonText:String,secondButtonIcon:{default:"PlusSolid",type:String},secondButtonVariant:{default:"secondary",type:String},secondButtonTo:[Object,String]},emits:["click","click2"],setup(e,{emit:t}){const n=t,o=wt();function a(r,s,i){i?o.push(i):n(s,r)}return(r,s)=>(g(),D("div",sme,[s[0]||(He(-1),(s[0]=(g(),D("svg",{class:"mx-auto size-12 text-neutral-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[s[3]||(s[3]=_("path",{"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"},null,-1))]))).cacheIndex=0,He(1),s[0]),l(v(Pd),{class:"mt-2 font-medium"},{default:p(()=>[ne(K(e.title),1)]),_:1}),l(v(Ss),{class:"mx-auto max-w-xl"},{default:p(()=>[ne(K(e.description),1)]),_:1}),_("div",ime,[l(jn,{variant:"primary",icon:e.buttonIcon,text:e.buttonText,onClick:s[1]||(s[1]=i=>a(i,"click",e.to))},null,8,["icon","text"]),e.secondButtonText?(g(),R(jn,{key:0,class:"ml-4",variant:e.secondButtonVariant,icon:e.secondButtonIcon,text:e.secondButtonText,onClick:s[2]||(s[2]=i=>a(i,"click2",e.secondButtonTo))},null,8,["variant","icon","text"])):Z("",!0)])]))}},cme=Object.assign({inheritAttrs:!1},{__name:"IIconPicker",props:{modelValue:[String,Number],label:String,disabled:Boolean,valueField:{type:String,default:"icon"},name:String,icons:{type:Array,default:function(){return["Mail","PencilAlt","OfficeBuilding","Phone","Calendar","Collection","Bell","AtSymbol","Briefcase","Chat","CheckCircle","BookOpen","Camera","Truck","Folder","DeviceMobile","Users","CreditCard","Clock","ShieldExclamation","WrenchScrewdriver","ShoppingBag","Film","Gift","Inbox","Key","LockClosed","PaintBrush","Bookmark","AcademicCap","ArchiveBox","BugAnt","CodeBracket"].map(e=>({icon:e,tooltip:null}))}}},emits:["update:modelValue","change"],setup(e,{emit:t}){const n=e,o=t,a=V(n.modelValue);function r(i){a.value=i,s(i)}function s(i){o("update:modelValue",i),o("change",i)}return Se(()=>n.modelValue,r),(i,u)=>{const d=c("Icon"),m=ze("i-tooltip");return g(),R(v($s),{"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":r},{default:p(()=>[_("div",Ue({class:"flex flex-wrap gap-x-1.5 gap-y-2"},i.$attrs),[(g(!0),D(de,null,Ie(e.icons,f=>(g(),R(v(Td),{key:f[e.valueField],as:"template",name:e.name,value:f[e.valueField]},{default:p(({checked:h})=>[te((g(),D("div",{class:be(["flex cursor-pointer items-center justify-center rounded-lg text-neutral-700 ring-1 ring-neutral-300 dark:text-white dark:ring-neutral-500/30","px-2.5 py-2",e.disabled?"pointer-events-none opacity-50":"",h?"bg-neutral-50 dark:bg-neutral-500/40":"bg-white hover:bg-neutral-50 dark:bg-neutral-500/10 dark:hover:bg-neutral-500/40"])},[l(v(vr),{as:"span"},{default:p(()=>[l(d,{class:"size-5",icon:f.icon},null,8,["icon"])]),_:2},1024)],2)),[[m,f.tooltip]])]),_:2},1032,["name","value"]))),128))],16)]),_:1},8,["model-value","disabled"])}}}),dme=Ve({name:"IPopover",inheritAttrs:!1,props:{portal:{type:Boolean,default:!0},placement:{type:String,default:"bottom"},zIndex:{type:Number,default:1250},offset:{type:[Number,Function,Object],default:10},flip:{type:[Boolean,Number],default:!0}},emits:["show","hide"],setup(e,{attrs:t,slots:n,emit:o}){return()=>Ae(Dx,{as:"template"},{default:({close:a})=>[Ae(bk,{enter:"ease-out duration-100","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-75","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",offset:e.offset,"z-index":e.zIndex,placement:e.placement,portal:e.portal,flip:e.flip,composable:!0,...t,onShow:()=>o("show"),onHide:()=>o("hide")},{default:()=>n.default?n.default({hide:a}):[]})]})}}),mme=Ve({name:"IPopoverButton",inheritAttrs:!1,props:{as:{type:[String,Object],default:Wv},link:Boolean,caret:{type:Boolean},text:[String,Number]},setup(e,{attrs:t,slots:n}){return()=>{const o=e.link?kk:e.as;return Ae(iae,null,()=>Ae(Gne,{as:o,...t},{default:()=>[Hn(e.text,n.default),e.caret?Ae(Cs,{icon:"ChevronDownSolid",class:"ml-auto size-5 shrink-0 sm:size-4"}):null]}))}}}),fme=Ve({name:"IPopoverHeader",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:$t(["px-5 py-2.5","border-b border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),pme=Ve({name:"IPopoverHeading",setup(e,{slots:t}){return()=>Ae(Pd,{class:"font-medium"},t)}}),vme=Ve({name:"IPopoverPanel",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae(cae,null,{default:()=>[Ae(Kne,{...n,class:$t(["overflow-hidden rounded-lg bg-white shadow-lg outline-none focus:outline-none dark:bg-neutral-800","border border-neutral-200 dark:border-neutral-500/30"],n.class)},t)]})}}),hme=Ve({name:"IPopoverBody",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:$t("px-4 py-3 sm:p-5",n.class)},t.default?t.default():[])}}),gme=Ve({name:"IPopoverFooter",inheritAttrs:!1,setup(e,{slots:t,attrs:n}){return()=>Ae("div",{...n,class:$t(["px-5 py-2.5","border-t border-neutral-200 dark:border-neutral-500/30"],n.class)},t.default?t.default():[])}}),bme={install(e){e.component("IPopover",dme),e.component("IPopoverButton",mme),e.component("IPopoverPanel",vme),e.component("IPopoverHeader",fme),e.component("IPopoverHeading",pme),e.component("IPopoverBody",hme),e.component("IPopoverFooter",gme)}},yme=["textContent"],_me=["textContent"],wme=["textContent"],Ime={__name:"IStepCircle",props:{name:String,isLast:Boolean,spacing:{type:String,default:"md",validator(e){return["md","lg","xl"].includes(e)}},status:{type:String,validator(e){return["complete","current",""].includes(e)}}},emits:["click"],setup(e){return(t,n)=>{const o=c("Icon");return g(),D("li",{class:be([e.isLast?"":{"pr-8 sm:pr-20":e.spacing==="md","pr-10 sm:pr-36":e.spacing==="lg","pr-10 sm:pr-44":e.spacing==="xl"},"relative"])},[e.status==="complete"?(g(),D(de,{key:0},[n[3]||(n[3]=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-primary-600"})],-1)),_("a",{href:"#",class:"relative flex size-8 items-center justify-center rounded-full bg-primary-600 hover:bg-primary-900",onClick:n[0]||(n[0]=ot(a=>t.$emit("click",a),["prevent"]))},[l(o,{icon:"Check",class:"size-5 text-white"}),_("span",{class:"mt-20 shrink-0 text-sm",textContent:K(e.name)},null,8,yme)])],64)):e.status==="current"?(g(),D(de,{key:1},[n[5]||(n[5]=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-neutral-200 dark:bg-neutral-700"})],-1)),_("a",{href:"#",class:"relative flex size-8 items-center justify-center rounded-full border-2 border-primary-600 bg-neutral-50 dark:bg-neutral-800","aria-current":"step",onClick:n[1]||(n[1]=ot(a=>t.$emit("click",a),["prevent"]))},[n[4]||(n[4]=_("span",{class:"h-2.5 w-2.5 rounded-full bg-primary-600","aria-hidden":"true"},null,-1)),_("span",{class:"mt-20 shrink-0 text-sm font-semibold",textContent:K(e.name)},null,8,_me)])],64)):(g(),D(de,{key:2},[n[7]||(n[7]=_("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[_("div",{class:"h-0.5 w-full bg-neutral-200 dark:bg-neutral-700"})],-1)),_("a",{href:"#",class:"group relative flex size-8 items-center justify-center rounded-full border-2 border-neutral-300 bg-neutral-50 hover:border-neutral-400 dark:border-neutral-600 dark:bg-neutral-800",onClick:n[2]||(n[2]=ot(a=>t.$emit("click",a),["prevent"]))},[n[6]||(n[6]=_("span",{class:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-neutral-300","aria-hidden":"true"},null,-1)),_("span",{class:"mt-20 shrink-0 text-sm",textContent:K(e.name)},null,8,wme)])],64))],2)}}},xme={},kme={"aria-label":"Progress"},$me={class:"flex items-center"};function Cme(e,t){return g(),D("nav",kme,[_("ol",$me,[Ee(e.$slots,"default")])])}const Sme=an(xme,[["render",Cme]]),Tme={install(e){e.component("IStepCircle",Ime),e.component("IStepsCircle",Sme)}},Eme=["data-state"],Fme={__name:"ITab",props:{title:String,disabled:Boolean},emits:["activated"],setup(e,{emit:t}){const n=t,o=V(null),a=jw();return Se(a,r=>{o.value&&o.value.el.isEqualNode(r)&&n("activated")},{flush:"post"}),Xe(()=>{o.value.el.getAttribute("aria-selected")==="true"&&n("activated")}),(r,s)=>(g(),R(v(ooe),{ref_key:"tabRef",ref:o,as:"template",disabled:e.disabled},{default:p(({selected:i})=>[_("button",{type:"button","data-slot":"tab","data-state":i?"active":"inactive",class:be(["group inline-flex min-w-full shrink-0 snap-start snap-always items-center justify-center whitespace-nowrap border-b-2 text-base/5 font-semibold focus:outline-none sm:min-w-0","data-[state=inactive]:border-transparent data-[state=inactive]:text-neutral-700 data-[state=inactive]:hover:border-neutral-300 data-[state=inactive]:hover:text-neutral-800 data-[state=inactive]:dark:text-neutral-50 data-[state=inactive]:dark:hover:border-neutral-500 data-[state=inactive]:dark:hover:text-neutral-300","data-[state=active]:border-primary-500 data-[state=active]:text-primary-600 data-[state=active]:dark:border-primary-400 data-[state=active]:dark:text-primary-300","disabled:pointer-events-none disabled:opacity-70","px-1 py-4 sm:text-sm/5","[&>[data-slot=icon]]:-ml-0.5 [&>[data-slot=icon]]:mr-1.5 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:sm:size-4","[&>[data-slot=badge]]:ml-1.5"])},[Ee(r.$slots,"default",{},()=>[ne(K(e.title),1)])],8,Eme)]),_:3},8,["disabled"]))}},Ame={__name:"ITabGroup",props:{modelValue:{type:Number},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue");return(n,o)=>(g(),R(v(toe),{"selected-index":t.value,onChange:o[0]||(o[0]=a=>t.value=a)},{default:p(()=>[Ee(n.$slots,"default")]),_:3},8,["selected-index"]))}},Rme={class:"border-b border-neutral-200 dark:border-neutral-500/30","data-slot":"list"},Dme={__name:"ITabList",props:{responsive:{type:Boolean,default:!0},fill:Boolean,centered:Boolean},setup(e){let t=null;const n=V(!1),o=V(!0),a=V(null);function r(){return a.value.$el.querySelector("button:first-child")}function s(){return a.value.$el.querySelector("button:last-child")}function i(){a.value.$el.scrollLeft-=r().offsetWidth}function u(){a.value.$el.scrollLeft+=s().offsetWidth}function d(){t.unobserve(r()),t.unobserve(s())}function m(y){y.forEach(b=>{b.target==s()?n.value=b.isIntersecting:b.target==r()&&(o.value=b.isIntersecting,n.value=!1)})}function f(){t=new IntersectionObserver(m,{root:a.value.$el,threshold:1})}function h(){f();let y=r(),b=s();We(()=>{y&&t.observe(y),b&&t.observe(b)})}return Xe(()=>{h()}),mn(()=>{d(),t=null}),(y,b)=>{const I=c("Icon");return g(),D("div",Rme,[_("div",{class:be(["flex items-center",{"justify-center":e.centered}])},[_("a",{href:"#",class:be(["block px-1 text-neutral-500 dark:text-neutral-200 sm:hidden",{"pointer-events-none opacity-50":o.value}]),onClick:ot(i,["prevent"])},[l(I,{icon:"ChevronLeftSolid",class:"size-6"})],2),l(v(noe),{ref_key:"listRef",ref:a,class:be(["overlow-y-hidden -mb-px flex grow snap-x snap-mandatory overflow-x-auto scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-300 sm:space-x-4 sm:px-4",{"justify-around":e.fill,"sm:grow-0":!e.fill}])},{default:p(()=>[Ee(y.$slots,"default")]),_:3},8,["class"]),_("a",{href:"#",class:be(["block px-1 text-neutral-500 dark:text-neutral-200 sm:hidden",{"pointer-events-none opacity-50":n.value}]),onClick:ot(u,["prevent"])},[l(I,{icon:"ChevronRightSolid",class:"size-6"})],2)],2)])}}},Ome={__name:"ITabPanel",props:{lazy:Boolean},emits:["activated"],setup(e,{emit:t}){const n=t,o=jw(),a=V(null);return Se(o,r=>{a.value.$el instanceof Element&&r.dataset.slot&&r.dataset.slot==="tab"&&r.id===a.value.$el.getAttribute("aria-labelledby")&&n("activated")},{flush:"post"}),Xe(()=>{!a.value.el.$&&a.value.el.dataset.headlessuiState==="selected"&&n("activated")}),(r,s)=>(g(),R(v(roe),{ref_key:"panelRef",ref:a,class:"focus:outline-none","data-slot":"panel",unmount:e.lazy},{default:p(()=>[Ee(r.$slots,"default")]),_:3},8,["unmount"]))}},Pme={__name:"ITabPanels",setup(e){return(t,n)=>(g(),R(v(aoe),{class:"py-2 sm:py-4"},{default:p(()=>[Ee(t.$slots,"default")]),_:3}))}},Mme={install(e){e.component("ITabGroup",Ame),e.component("ITabList",Dme),e.component("ITab",Fme),e.component("ITabPanels",Pme),e.component("ITabPanel",Ome)}},Bme=Ve({name:"ITableOuter",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("div",{...t,class:$t("overflow-hidden rounded-lg border border-neutral-900/10 bg-white dark:border-white/10 dark:bg-neutral-900",t.class)},n.default?n.default():[])}}),Nme=Ve({name:"ITable",inheritAttrs:!1,props:{maxHeight:String,condensed:Boolean,fixedLayout:Boolean,id:String,bleed:Boolean,grid:Boolean},setup(e,{slots:t,attrs:n,expose:o}){const a=V(null),r=V(null);return st("condensed",xt(e,"condensed")),st("bleed",xt(e,"bleed")),st("grid",xt(e,"grid")),o({$el:r,$wrapperEl:a}),()=>Ae("div",{class:"flow-root"},[Ae("div",{ref:a,...n,class:$t("-mx-[--gutter] touch-auto overflow-x-auto whitespace-nowrap",n.class),style:Ue(n.style||{},{maxHeight:e.maxHeight})},[Ae("div",{class:["inline-block w-full min-w-full align-middle",e.bleed?"":"sm:px-[--gutter]"]},[Ae("table",{ref:r,id:e.id,class:["relative w-full min-w-full text-left text-sm/6 text-neutral-700 dark:text-neutral-200",e.fixedLayout?"table-fixed":""]},t.default?t.default():[])])])])}}),Vme=Ve({name:"ITableRow",setup(e,{slots:t}){return()=>Ae("tr",null,t.default?t.default():[])}}),Lme=Ve({name:"ITableHead",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>Ae("thead",{...t,class:$t("text-neutral-500 dark:text-neutral-400",t.class)},n.default?n.default():[])}}),qme=Ve({name:"ITableHeader",inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){const a=Le("bleed"),r=Le("grid"),s=V(null);return o({$el:s}),()=>Ae("th",{ref:s,...t,class:$t(["border-b border-b-neutral-900/10 px-4 py-2 font-medium first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-b-white/10",r.value&&"border-l border-l-neutral-900/5 first:border-l-0 dark:border-l-white/5",!a.value&&"sm:first:pl-2 sm:last:pr-2"],t.class)},n.default?n.default():[])}}),Ume=Ve({name:"ITableBody",setup(e,{slots:t}){return()=>Ae("tbody",null,t.default?t.default():[])}}),jme=Ve({name:"ITableCell",inheritAttrs:!1,setup(e,{attrs:t,slots:n,expose:o}){const a=Le("condensed"),r=Le("bleed"),s=Le("grid"),i=V(null);return o({$el:i}),()=>Ae("td",{ref:i,...t,class:$t(["relative border-b border-neutral-900/5 px-4 first:pl-[var(--gutter,theme(spacing.2))] last:pr-[var(--gutter,theme(spacing.2))] dark:border-white/5",s.value&&"border-l border-l-neutral-900/5 first:border-l-0 dark:border-l-white/5",a.value?"py-1.5":"py-3",!r.value&&"sm:first:pl-2 sm:last:pr-2"],t.class)},n.default?n.default():[])}}),zme=Ve({name:"ITableRowActions",setup(e,{slots:t}){return()=>Ae("div",{class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform"},[Ae(Pk,{placement:"left-center",horizontal:!0,small:!0},t)])}}),Hme=Ve({name:"ITableRowAction",setup(e,{slots:t}){return()=>Ae(Bk,null,t)}}),Wme={install(e){e.component("ITable",Nme),e.component("ITableCell",jme),e.component("ITableOuter",Bme),e.component("ITableRow",Vme),e.component("ITableHeader",qme),e.component("ITableBody",Ume),e.component("ITableHead",Lme),e.component("ITableRowActions",zme),e.component("ITableRowAction",Hme)}};class Gme{constructor(t){this.el=t.el,this.rootComponent=t.rootComponent,this.props=(t==null?void 0:t.props)??{},this.appContext={...(t==null?void 0:t.appContext)??{}}}mount(){const t=l(this.rootComponent,this.props);ef(t,this.el)}unmount(){ef(null,this.el)}}const Kme=["textContent"],A1={__name:"ITooltip",props:{delay:{type:Number,default:300},offset:{type:Number,default:10}},setup(e){const t=e,n={dark:{wrapper:"border border-neutral-900/90 shadow-lg bg-neutral-900/90",inner:"bg-neutral-900/90",content:"text-white",arrow:"border border-neutral-900/90 bg-neutral-900/90"},light:{wrapper:"border border-neutral-200 dark:border-neutral-500/30 shadow-lg bg-white dark:bg-neutral-800",inner:"bg-white dark:bg-neutral-800",content:"text-neutral-700 dark:text-neutral-200",arrow:"border border-neutral-200 dark:border-neutral-500/30 bg-white dark:bg-neutral-800"}};let o=null;const a=V(null),r=V(),s=V(null),i=V(""),u=V("dark"),d=h=>{const y=h.target.closest("[v-tooltip]");o&&(clearTimeout(o),o=null),s.value!==y&&(s.value=null),y&&(o=setTimeout(()=>{s.value=y},t.delay))},m=async()=>{if(!s.value)return;await We();const h=s.value.getAttribute("v-tooltip-placement");u.value=s.value.getAttribute("v-tooltip-variant"),i.value=s.value.getAttribute("v-tooltip")||"";const y={placement:h,middleware:[Nv(t.offset),tk(),ak({element:a.value})]};ok(s.value,r.value,y).then(({x:b,y:I,placement:w,middlewareData:k})=>{var $,C;const x={top:"bottom",right:"left",bottom:"top",left:"right"}[w.split("-")[0]];Object.assign(a.value.style,{...(($=k.arrow)==null?void 0:$.y)&&{top:`${k.arrow.y}px`},...((C=k.arrow)==null?void 0:C.x)&&{left:`${k.arrow.x}px`},right:"",bottom:"",[x]:"-0.25rem"}),Object.assign(r.value.style,{left:`${b}px`,top:`${I}px`})})},f=()=>{s.value=null,i.value=null};return Se(s,async h=>{h?await m():f()}),Xe(()=>{document.addEventListener("mouseover",d)}),mn(()=>{o&&clearTimeout(o),document.removeEventListener("mouseover",d)}),(h,y)=>(g(),R(To,{to:"body"},[_("div",{ref_key:"tooltipRef",ref:r,class:"pointer-events-none absolute left-0 top-0 z-[1300]"},[l(sr,{"enter-active-class":"duration-200 ease","enter-from-class":"transform opacity-0","leave-to-class":"transform opacity-0"},{default:p(()=>[s.value?(g(),D("div",{key:0,class:be(["overflow-hidden rounded-md",n[u.value].wrapper])},[_("div",{ref_key:"arrowRef",ref:a,class:be(["absolute size-2 rotate-45",n[u.value].arrow])},null,2),_("div",{class:be(["relative max-w-sm",n[u.value].inner])},[_("div",{class:be(["px-4 py-1.5 text-center text-base/5 sm:text-sm/5",n[u.value].content]),textContent:K(i.value)},null,10,Kme)],2)],2)):Z("",!0)]),_:1})],512)]))}},Zme=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"],Yme=["dark","light"];function R1(e,t){return e.reduce((n,o)=>(t[o]&&(n=o),n),"")}const D1=(e,t)=>{const{modifiers:n,value:o}=t,a=R1(Zme,n)||"top",r=R1(Yme,n)||"dark";if(!o){Vk(e);return}e.setAttribute("v-tooltip",o),e.getAttribute("v-tooltip-placement")||e.setAttribute("v-tooltip-placement",a),e.getAttribute("v-tooltip-variant")||e.setAttribute("v-tooltip-variant",r)};function Vk(e){e.removeAttribute("v-tooltip"),e.removeAttribute("v-tooltip-placement"),e.removeAttribute("v-tooltip-variant")}const Xme={beforeMount:(e,t)=>D1(e,t),updated:(e,t)=>D1(e,t),beforeUnmount:e=>Vk(e)},Qme={install(e,t={}){e.component("ITooltip",A1),e.directive("i-tooltip",Xme),new Gme({el:document.body,rootComponent:A1,props:t,appContext:e._context}).mount()}},Jme={},efe={class:"space-y-1","aria-label":"Sidebar"};function tfe(e,t){return g(),D("nav",efe,[Ee(e.$slots,"default")])}const nfe=an(Jme,[["render",tfe]]),ofe={__name:"IVerticalNavigationCollapsible",props:{fixed:Boolean},setup(e){const t=e,n=V(null),o=V(t.fixed===!0),a=V(!1),r=V(!1);function s(u){u.target.tagName==="A"&&n.value.querySelector("a:first-child")!==u.target||t.fixed||(o.value=!o.value)}async function i(){if(await We(),!n.value)return!1;a.value=n.value.querySelectorAll("a").length>1,r.value=n.value.querySelectorAll(".active").length>0}return Se(r,u=>{o.value=u}),Jr(i),Xe(i),(u,d)=>{const m=c("Icon");return g(),D("div",{ref_key:"elRef",ref:n,class:"relative cursor-pointer",onClick:s},[_("div",{class:be(["[&>:not(:first-child)]:ml-6",o.value||e.fixed?"[&>:not(:first-child)]:block":"[&>:not(:first-child)]:hidden"])},[Ee(u.$slots,"default")],2),!e.fixed&&a.value?(g(),R(m,{key:0,icon:"ChevronDownSolid",class:"pointer-events-none absolute right-4 top-2.5 size-5 sm:size-4"})):Z("",!0)],512)}}},afe=Object.assign({name:"IVerticalNavigationItem"},{__name:"IVerticalNavigationItem",props:{to:[String,Object],active:Boolean,href:{type:String,default:"#"}},setup(e){const t=e,n=wt(),o=Ct(),a=P(()=>{if(t.active)return!0;if(!t.to)return!1;const{path:s}=n.resolve(t.to);return o.path==s||o.path.startsWith(s)});function r(){if(!t.to)return;const{path:s}=n.resolve(t.to);o.path!=s&&n.push(t.to)}return(s,i)=>(g(),R(Dd,{"data-slot":"control",href:e.href,class:be(["group flex items-center rounded-lg text-base font-semibold focus:outline-none",a.value?"active bg-neutral-200/60 text-primary-600 dark:bg-neutral-900/40 dark:text-primary-400":"text-neutral-700 hover:bg-neutral-200/50 hover:text-primary-600 dark:text-white dark:hover:dark:bg-neutral-900/40 dark:hover:text-primary-400","px-3 py-2 sm:text-sm","[&>[data-slot=icon]]:-ml-1 [&>[data-slot=icon]]:mr-3 [&>[data-slot=icon]]:size-5 [&>[data-slot=icon]]:sm:size-4","[&>[data-slot=badge]]:-my-0.5 [&>[data-slot=badge]]:ml-auto"]),plain:"",onClick:r},{default:p(()=>[Ee(s.$slots,"default")]),_:3},8,["href","class"]))}}),rfe={install(e){e.component("IVerticalNavigation",nfe),e.component("IVerticalNavigationCollapsible",ofe),e.component("IVerticalNavigationItem",afe)}},lfe={class:"grid grid-cols-3 gap-4"},sfe=["textContent"],ife={key:0},ufe={__name:"BaseDetailField",props:["field","resource","resourceName","resourceId","isFloating","editAction"],emits:["updated"],setup(e){const t=e,n=P(()=>!Ut(t.field.value)),o=P(()=>t.field.isRequired&&!n.value);return(a,r)=>{const s=c("FieldInlineEdit");return g(),D("div",{class:be(["group relative rounded-md px-3 py-2",o.value?"bg-danger-100 dark:bg-danger-600/40":"hover:bg-neutral-50 dark:hover:bg-neutral-800/60"])},[l(s,{class:"hidden group-hover:block",field:e.field,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"edit-action":e.editAction,"is-floating":e.isFloating,onUpdated:r[0]||(r[0]=i=>a.$emit("updated",i))},gn({_:2},[Ie(a.$slots,(i,u)=>({name:u,fn:p(d=>[Ee(a.$slots,u,zt(Qt(d)))])}))]),1032,["field","resource","resource-name","resource-id","edit-action","is-floating"]),_("div",lfe,[_("div",{class:be(["col-span-1 max-w-full justify-self-end truncate text-right text-base/6 hover:max-w-none hover:overflow-visible hover:whitespace-normal sm:text-sm/6",o.value?"text-danger-800 dark:text-danger-400":"text-neutral-500 dark:text-neutral-300"]),textContent:K(e.field.label)},null,10,sfe),_("div",{class:be(["col-span-2 break-words text-base/6 sm:text-sm/6",o.value?"text-danger-700":"text-neutral-800 dark:text-white"])},[Ee(a.$slots,"default",{hasValue:n.value,value:e.field.value},()=>[n.value?(g(),D("p",ife,K(e.field.value),1)):Z("",!0)])],2)])],2)}}},cfe={__name:"BaseFormField",props:["field","resourceName","value","isFloating"],setup(e){const t=e,n=P(()=>t.field.readonly||En(t.field,"attributes.readonly")),o=P(()=>(t.resourceName?t.resourceName+"-":"")+(t.field.id||t.field.attribute)+(t.isFloating?"-floating":""));function a(r){t.field.emitChangeEvent&&Ot(t.field.emitChangeEvent,r)}return Xe(()=>{if(Array.isArray(t.value)){Wz(()=>t.value,r=>{a(r)},{deep:!0});return}Se(()=>t.value,(r,s)=>{Ml(r)&&Ml(s)&&JSON.stringify(r)===JSON.stringify(s)||a(r)},{deep:!0})}),(r,s)=>Ee(r.$slots,"default",{readonly:n.value,fieldId:o.value})}},dfe={__name:"BaseIndexField",props:["resourceName","resourceId","row","field","editAction"],emits:["reload"],setup(e){const t=e,{getIndexFields:n}=In(),o=P(()=>!Ut(t.field.value));async function a(){return(await n(t.resourceName,{intent:"update",params:{resourceId:t.resourceId}})).find(s=>t.field.attribute===s.attribute)}return(r,s)=>{const i=c("FieldInlineEdit");return g(),D(de,null,[l(i,{class:"hidden group-hover/td:block",field:e.field,"field-fetcher":a,resource:e.row,"resource-name":e.resourceName,"resource-id":e.resourceId,"edit-action":e.editAction,onUpdated:s[0]||(s[0]=u=>r.$emit("reload"))},gn({_:2},[Ie(r.$slots,(u,d)=>({name:d,fn:p(m=>[Ee(r.$slots,d,zt(Qt(m)))])}))]),1032,["field","resource","resource-name","resource-id","edit-action"]),Ee(r.$slots,"default",{hasValue:o.value,value:e.field.value})],64)}}};function mfe(){}var ffe=mfe,zm=Ky,pfe=ffe,vfe=Kp,hfe=1/0,gfe=zm&&1/vfe(new zm([,-0]))[1]==hfe?function(e){return new zm(e)}:pfe,bfe=gfe,yfe=Wp,_fe=_k,wfe=wk,Ife=Gp,xfe=bfe,kfe=Kp,$fe=200;function Cfe(e,t,n){var o=-1,a=_fe,r=e.length,s=!0,i=[],u=i;if(n)s=!1,a=wfe;else if(r>=$fe){var d=t?null:xfe(e);if(d)return kfe(d);s=!1,a=Ife,u=new yfe}else u=t?[]:i;e:for(;++o<r;){var m=e[o],f=t?t(m):m;if(m=n||m!==0?m:0,s&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),i.push(m)}else a(u,f,n)||(u!==i&&u.push(f),i.push(m))}return i}var Xv=Cfe,Sfe=ua,Tfe=Xv;function Efe(e,t){return e&&e.length?Tfe(e,Sfe(t)):[]}var Ffe=Efe;const Hm=Rt(Ffe),Afe=Object.assign({inheritAttrs:!1},{__name:"BaseSelectField",props:["field","value","options"],setup(e){const t=e,{t:n}=Pe(),o=V(!1),a=V(2),r=V(0),s=V(!1),i=V(!1),u=V(null),d=V(null),m=P(()=>!!t.field.asyncUrl),f=P(()=>!m.value),h=P(()=>{if(Array.isArray(t.options))return t.options;const S=function(){return t.field.value?Array.isArray(t.field.value)?t.field.value.filter(A=>typeof A=="object"):typeof t.field.value=="object"?[t.field.value]:[]:[]}();return Array.isArray(u.value)?u.value:d.value?Hm([].concat(d.value,t.field.options||[],S),t.field.valueKey):Hm([].concat(t.field.options||[],S),t.field.valueKey)}),y=V(null),b=P(()=>m.value&&s.value?n("core::app.type_more_to_search",{characters:a.value-r.value}):""),I=P(()=>!m.value||m.value&&o.value?n("core::app.no_search_results"):n("core::app.type_to_search"));async function w(){if(!t.field.lazyLoad||d.value!==null)return;let S=[];const A=bt(t.field.lazyLoad);for(const E of Array.isArray(A)?A:[A]){let B=await k(E.url,E.params);S=S.concat((B==null?void 0:B.data)||B)}d.value=Hm(S,"id")}async function k(S,A){i.value=!0;const{data:E}=await Innoclapps.request(S,{params:A});return i.value=!1,E}function x(S,A){m.value&&$(S,A)}const $=xa(async(S,A)=>{if(S==""){u.value=null;return}const E=S.length;if(r.value=E,f.value||E<a.value)return s.value=!0,S;s.value=!1,A(!0);let{data:B}=await Innoclapps.request(t.field.asyncUrl,{params:{q:S}});u.value=B,o.value=!0,A(!1)},400);function C(S){return{[t.field.valueKey]:S,[t.field.labelKey]:S}}function F(S){y.value=S}function T(S,A){if(Ut(S)){y.value=null;return}Array.isArray(A)&&Array.isArray(y.value)&&y.value.length>0&&A.forEach(E=>{S.indexOf(E)===-1&&(typeof y.value[0]=="object"?y.value=y.value.filter(B=>B[t.field.valueKey]!=E):y.value=y.value.filter(B=>B!=A))}),h.value.length&&typeof h.value[0]=="object"&&(Array.isArray(S)?(Array.isArray(y.value)||(y.value=[]),S.forEach(E=>{let B=ft(h.value,[t.field.valueKey,E]);B&&!ft(y.value,[t.field.valueKey,E])&&y.value.push(B)})):y.value!=S&&(y.value=ft(h.value,[t.field.valueKey,S])))}return Se(()=>t.value,T,{immediate:!0,deep:!0}),(S,A)=>{const E=c("BaseFormField");return g(),R(E,Ue({field:e.field,value:e.value},S.$attrs),{default:p(B=>[Ee(S.$slots,"default",zt(Qt({...B,selectValue:y.value,handleSelectInputChange:F,createOption:C,onDropdownOpen:w,headerText:b.value,noOptionsText:I.value,onSearch:x,lazyLoadingOptions:i.value,filterable:f.value,options:h.value})))]),_:3},16,["field","value"])}}}),Rfe={class:"grid grid-cols-12 gap-y-1"},Dfe={__name:"DetailFields",props:{fields:{required:!0,type:Array},collapsed:Boolean,isFloating:Boolean,resourceName:{required:!0,type:String},resourceId:{required:!0,type:Number},resource:{required:!0,type:Object}},emits:["updated"],setup(e){return(t,n)=>(g(),D("div",Rfe,[(g(!0),D(de,null,Ie(e.fields,o=>(g(),D("div",{key:o.attribute,class:be([o.width==="half"?"col-span-12 sm:col-span-12":"col-span-12",o.displayNone||e.collapsed&&o.collapsed?"pointer-events-none hidden":""])},[(g(),R(_t(o.detailComponent),{field:o,"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource,"is-floating":e.isFloating,onUpdated:n[0]||(n[0]=a=>t.$emit("updated",a))},null,40,["field","resource-name","resource-id","resource","is-floating"]))],2))),128))]))}},Ofe=["onSubmit"],Pfe=Object.assign({inheritAttrs:!1},{__name:"FieldInlineEdit",props:["field","fieldFetcher","resource","resourceName","resourceId","editAction","isFloating","width"],emits:["updated"],setup(e,{emit:t}){const n=e,o=t,a=V(!1),r=V(!1);let s=null;const i=V({}),{form:u}=Qe(),{updateResource:d}=qt(n.resourceName),{fields:m,hasFields:f,hydrateFields:h}=In(),y=P(()=>{switch(n.field.inlineEditPanelWidth){case"medium":return"w-screen sm:w-80";case"large":return"w-screen sm:w-96";default:return""}});function b(C){s&&(s(),s=null),C()}async function I(){let C=await new Promise(F=>PS(n.fieldFetcher)?F(n.fieldFetcher()):F(n.field));return i.value=C,C.inlineEditWith!==null&&(C=C.inlineEditWith),C}async function w(){r.value=!0;let C=Nn(Vn(await I()));C.forEach(F=>F.width="full"),m.value=C,h(n.resource),a.value=!0}function k(){u.errors.clear(),a.value=!1,m.value=[],zn(()=>{r.value=!1},300)}async function x(C){const F=await d(u,n.resourceId,{cancelToken:new ol(T=>s=T)});C(),o("updated",F)}const $=P(()=>n.resource.authorizations.update&&n.field.inlineEditDisabled!==!0&&!En(n.resource,`_edit_disabled.${n.field.attribute}`)&&(n.field.inlineEditWith!==null||n.field.applicableForUpdate));return(C,F)=>{const T=c("IPopoverButton"),S=c("IPopoverHeading"),A=c("IPopoverHeader"),E=c("FormFields"),B=c("IPopoverBody"),M=c("IButton"),N=c("IPopoverFooter"),G=c("IOverlay"),U=c("IPopoverPanel"),j=c("IPopover");return $.value?(g(),R(j,{key:0,"adaptive-width":"",shift:"",flip:"",onShow:w,onHide:k},{default:p(({hide:O})=>[l(T,Ue(C.$attrs,{icon:"Pencil",class:["absolute right-0.5 z-20 my-auto -mt-0.5 mr-4",{"!block":r.value}],small:"",onClick:e.editAction}),null,16,["class","onClick"]),l(U,{class:be(y.value)},{default:p(()=>[l(G,{show:!v(f)},{default:p(()=>[_("form",{onSubmit:ot(H=>x(O),["prevent"])},[l(A,null,{default:p(()=>[l(S,{text:C.$t("core::fields.update_field")},null,8,["text"])]),_:1}),l(B,null,{default:p(()=>[a.value?(g(),R(E,{key:0,fields:v(m),form:v(u),"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,collapsed:!1,onUpdateFieldValue:F[0]||(F[0]=H=>v(u).fill(H.attribute,H.value)),onSetInitialValue:F[1]||(F[1]=H=>v(u).set(H.attribute,H.value))},null,8,["fields","form","resource-name","resource-id","is-floating"])):Z("",!0),Ee(C.$slots,"after-inline-edit-form-fields",{hidePopover:O})]),_:2},1024),l(N,{class:"flex items-center justify-end space-x-2"},{default:p(()=>[l(M,{text:C.$t("core::app.cancel"),disabled:!a.value,basic:"",onClick:H=>b(O)},null,8,["text","disabled","onClick"]),l(M,{type:"submit",variant:"primary",text:C.$t("core::app.save"),disabled:v(u).busy||!a.value,loading:v(u).busy,onClick:H=>x(O)},null,8,["text","disabled","loading","onClick"])]),_:2},1024)],40,Ofe)]),_:2},1032,["show"])]),_:2},1032,["class"])]),_:3})):Z("",!0)}}}),Mfe={__name:"FieldsButtonCollapse",props:{collapsed:{required:!0,type:Boolean},total:{type:Number,required:!0}},emits:["update:collapsed"],setup(e){return(t,n)=>{const o=c("Icon"),a=c("IButton");return g(),R(a,{basic:"",small:"",onClick:n[0]||(n[0]=r=>t.$emit("update:collapsed",!e.collapsed))},{default:p(()=>[ne(K(t.$t(e.collapsed?"core::fields.more_fields":"core::fields.hide_fields",{count:e.total}))+" ",1),l(o,{icon:e.collapsed?"ChevronDownSolid":"ChevronUpSolid"},null,8,["icon"])]),_:1})}}},Bfe={class:"flex animate-pulse"},Nfe={class:"flex-1 space-y-4"},Vfe={__name:"FieldsPlaceholder",props:{total:{default:8,type:Number}},setup(e){const t=["w-full","w-1/2","w-5/6","w-3/4"];function n(){return t[Math.floor(Math.random()*t.length)]}return(o,a)=>(g(),D("div",Bfe,[_("div",Nfe,[(g(!0),D(de,null,Ie(e.total,r=>(g(),D("div",{key:r,class:be(["h-9 rounded-md bg-neutral-200 dark:bg-neutral-700",n()])},null,2))),128))])]))}},Lfe={class:"grid grid-cols-12 gap-x-4"},qfe={__name:"FormFields",props:{fields:{required:!0,type:Array},form:{required:!0,type:Object},collapsed:Boolean,resourceId:[String,Number],resourceName:String,except:[Array,String],only:[Array,String],isFloating:Boolean,focusFirst:Boolean},emits:["updateFieldValue","setInitialValue"],setup(e){const t=e,n=V(null),o=P(()=>t.only?Vn(t.only):[]),a=P(()=>t.except?Vn(t.except):[]),r=P(()=>t.fields?t.only?t.fields.filter(u=>o.value.indexOf(u.attribute)>-1):t.except?t.fields.filter(u=>a.value.indexOf(u.attribute)===-1):t.fields:[]),s=P(()=>t.form.errors.groupByField());function i(){const u=["date","datetime-local","email","file","month","number","password","range","search","tel","text","time","url","week"],d=n.value.querySelector("div:first-child input"),m=n.value.querySelector("div:first-child textarea");d&&u.indexOf(d.getAttribute("type"))>-1?d.focus():m&&m.focus()}return t.focusFirst&&Xe(()=>{zn(i,600)}),(u,d)=>(g(),D("div",{ref_key:"wrapperRef",ref:n},[_("div",Lfe,[(g(!0),D(de,null,Ie(r.value,m=>(g(),D("div",{key:m.attribute,class:be(m.width==="half"?"col-span-12 sm:col-span-6":"col-span-12")},[Ee(u.$slots,`before-${m.attribute}-field`,{field:m}),_("div",{class:be(m.displayNone||m.hidden||e.collapsed&&m.collapsed?"hidden":"")},[(g(),R(_t(m.formComponent),{field:m,"resource-id":e.resourceId,"resource-name":e.resourceName,"is-floating":e.isFloating,"validation-errors":s.value[m.attribute],"model-value":e.form[m.attribute],"onUpdate:modelValue":f=>u.$emit("updateFieldValue",{attribute:m.attribute,value:f}),onSetInitialValue:f=>u.$emit("setInitialValue",{attribute:m.attribute,value:f})},null,40,["field","resource-id","resource-name","is-floating","validation-errors","model-value","onUpdate:modelValue","onSetInitialValue"]))],2),Ee(u.$slots,`after-${m.attribute}-field`,{field:m})],2))),128))])],512))}},Ufe={class:"pt-8"},jfe={class:"mx-auto max-w-3xl"},zfe={class:"bg-white shadow dark:bg-neutral-900 sm:rounded-lg"},Hfe={class:"px-4 py-5 sm:p-6"},Wfe={class:"sm:flex sm:items-start sm:justify-between"},Gfe={class:"mt-5 sm:ml-6 sm:mt-1 sm:flex sm:shrink-0 sm:items-center"},Kfe={__name:"ActionPanel",props:{buttonText:{default:"Update",type:String},title:String,description:String,redirectTo:String,method:{type:String,default:"post"},action:{type:String,required:!0}},setup(e){const t=e,{appUrl:n}=qe(),o=V(!1);function a(){o.value=!0,Innoclapps.request({method:t.method,url:t.action}).then(()=>{t.redirectTo?window.location.href=t.redirectTo:window.location.href=n}).finally(()=>o.value=!1)}return(r,s)=>{const i=c("ITextDisplay"),u=c("IText"),d=c("IButton");return g(),D("div",Ufe,[_("div",jfe,[_("div",zfe,[_("div",Hfe,[_("div",Wfe,[_("div",null,[l(i,{text:e.title},null,8,["text"]),l(u,{class:"mt-2 max-w-xl",text:e.description},null,8,["text"])]),_("div",Gfe,[_("form",{onSubmit:ot(a,["prevent"])},[l(d,{type:"submit",variant:"primary",loading:o.value,disabled:o.value,text:e.buttonText},null,8,["loading","disabled","text"])],32)])])])])])])}}},Zfe=Xl({loader:()=>ws(()=>import("./FullCalendar-HKjneGqb.js"),__vite__mapDeps([0,1])),loadingComponent:ji}),Yfe=Xl({loader:()=>ws(()=>import("./vuedraggable.umd-SiqAtVac.js").then(e=>e.v),[]),loadingComponent:ji}),Xfe=Xl({loader:()=>ws(()=>import("./TextCollapse-aFGhHmde.js"),[]),loadingComponent:ji}),Qfe=Xl({loader:()=>ws(()=>import("./CropsAndUploadsImage-Celk3FxC.js"),__vite__mapDeps([2,3])),loadingComponent:ji});function Jfe(e){e.use(OY).use(Jle).use(Que).use(_de).use(bme).use(Wme).use(Ode).use(Qde).use(Lde).use(Wde).use(Mme).use(Hue).use(Tme).use(Qme).use($ue).use(Mue).use(rfe).use(dde,{dialog:{labels:{cancelText:rt("core::app.cancel"),okText:"Ok"}},confirmation:{labels:{title:rt("core::actions.confirmation_message"),confirmText:rt("core::app.confirm"),cancelText:rt("core::app.cancel")}}}),e.component("FullCalendar",Zfe).component("SortableDraggable",Yfe).component("FileUpload",FY).component("IActionMessage",Jde).component("IAvatar",tme).component("ICustomSelect",wce).component("IOverlay",Ek).component("IEmptyState",ume).component("IIconPicker",cme).component("ISpinner",Gv).component("IColorSwatch",lme).component("ILink",Dd).component("ILinkBase",Rl).component("MainLayout",zQ).component("TheNavbar",xle).component("NavbarItems",KQ).component("NavbarSeparator",QQ).component("TheSidebar",Zle).component("TheFloatNotifications",Mre).component("TheFloatingResourceModal",yre).component("DatePicker",IX).component("DateRangePicker",EX).component("ActionPanel",Kfe).component("Icon",Cs).component("Anchor",VY).component("ActionModal",NY).component("ActionBulkEditModal",BY).component("ProgressionChart",yX).component("PresentationChart",gX).component("CardTable",XY).component("CardAsyncTable",WY).component("ResourceTable",zae).component("ResourceExport",_J).component("CropsAndUploadsImage",Qfe).component("TextCollapse",Xfe).component("Editor",MQ).component("EditorText",LQ).component("Panel",oJ).component("Panels",cJ).component("ResourceMediaPanel",HJ).component("ResourceDetailsPanel",fJ).component("BaseFormField",cfe).component("BaseSelectField",Afe).component("FormFields",qfe).component("DetailFields",Dfe).component("BaseDetailField",ufe).component("BaseIndexField",dfe).component("FieldsButtonCollapse",Mfe).component("FieldsPlaceholder",Vfe).component("FieldInlineEdit",Pfe).component("InputSearch",jQ)}const epe={};function tpe(e,t){const n=c("FormSelectField");return g(),R(n)}const npe=an(epe,[["render",tpe]]),ope=Object.freeze(Object.defineProperty({__proto__:null,default:npe},Symbol.toStringTag,{value:"Module"})),ape=["textContent"],rpe={key:0,class:"mr-1 text-base text-danger-600 sm:text-sm",textContent:"*"},lpe=["innerHTML"],cn={__name:"FormFieldGroup",props:{field:{required:!0,type:Object},validationErrors:Object,fieldId:String,label:String,asParagraphLabel:Boolean},setup(e){const t=e,n=V(!1),o=P(()=>t.validationErrors&&t.validationErrors.messages&&t.validationErrors.messages[0]?t.validationErrors.messages[0]:null),a=P(()=>t.field.toggleable&&!n.value&&!u.value),r=P(()=>t.field.helpText&&t.field.helpTextDisplay==="icon"),s=P(()=>t.field.helpText&&t.field.helpTextDisplay==="text"),i=P(()=>t.field.helpText&&t.field.helpTextDisplay==="alert"),u=P(()=>!Ut(t.field.value)),d=P(()=>!a.value&&s.value?t.field.helpText:null);return(m,f)=>{const h=c("Icon"),y=c("ILink"),b=c("IFormLabel"),I=c("IAlertBody"),w=c("IAlert"),k=c("IFormError"),x=c("IFormGroup"),$=ze("i-tooltip");return g(),R(x,{description:d.value},{default:p(()=>[a.value?(g(),R(y,{key:0,class:"flex items-center",onClick:f[0]||(f[0]=C=>n.value=!0)},{default:p(()=>[l(h,{icon:"PlusSolid",class:"mr-1 size-4"}),_("span",{textContent:K(e.label)},null,8,ape)]),_:1})):Z("",!0),te(_("div",null,[e.label&&!e.field.hideLabel?(g(),R(b,{key:0,class:"mb-1 inline-flex items-center",for:e.asParagraphLabel?void 0:e.fieldId,as:e.asParagraphLabel?"p":void 0,required:e.field.isRequired},{default:p(()=>[e.field.isRequired&&e.label?(g(),D("span",rpe)):Z("",!0),r.value?te((g(),R(h,{key:1,icon:"QuestionMarkCircle",class:"mr-1 size-4 text-neutral-500 hover:text-neutral-700 dark:text-white dark:hover:text-neutral-300"},null,512)),[[$,e.field.helpText]]):Z("",!0),_("span",{innerHTML:e.label},null,8,lpe)]),_:1},8,["for","as","required"])):Z("",!0),Ee(m.$slots,"default")],512),[[fe,!a.value]]),i.value?(g(),R(w,{key:1,class:"mt-3"},{default:p(()=>[l(I,null,{default:p(()=>[ne(K(e.field.helpText),1)]),_:1})]),_:1})):Z("",!0),o.value?(g(),R(k,{key:2,error:o.value},null,8,["error"])):Z("",!0)]),_:3},8,["description"])}}},spe=["innerHTML"],ipe={__name:"BooleanField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?n.field.falseValue:n.field.value)}return r(),(s,i)=>{const u=c("IFormCheckbox"),d=c("IFormCheckboxLabel"),m=c("IFormCheckboxDescription"),f=c("IFormCheckboxField"),h=c("IAlertBody"),y=c("IAlert"),b=c("BaseFormField");return g(),R(b,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:I,fieldId:w})=>[l(cn,{field:e.field,"field-id":w,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[l(f,null,{default:p(()=>[l(u,Ue({id:w,checked:a.value,"onUpdate:checked":i[0]||(i[0]=k=>a.value=k),name:e.field.attribute,"unchecked-value":e.field.falseValue,value:e.field.trueValue,disabled:I},e.field.attributes),null,16,["id","checked","name","unchecked-value","value","disabled"]),l(d,{for:w},{default:p(()=>[_("span",{innerHTML:e.field.label},null,8,spe)]),_:2},1032,["for"]),e.field.helpText&&(e.field.helpTextDisplay==="text"||e.field.helpTextDisplay==="icon")?(g(),R(m,{key:0},{default:p(()=>[ne(K(e.field.helpText),1)]),_:1})):Z("",!0)]),_:2},1024)]),_:2},1032,["field","field-id","validation-errors"]),e.field.helpText&&e.field.helpTextDisplay==="alert"?(g(),R(y,{key:0,class:"mt-3"},{default:p(()=>[l(h,null,{default:p(()=>[ne(K(e.field.helpText),1)]),_:1})]),_:1})):Z("",!0)]),_:1},8,["resource-name","field","value","is-floating"])}}},upe=Object.freeze(Object.defineProperty({__proto__:null,default:ipe},Symbol.toStringTag,{value:"Module"})),cpe=["textContent"],dpe={__name:"CheckboxField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",(Zt(n.field.value)?[]:n.field.value).map(s=>s[n.field.valueKey]))}return r(),(s,i)=>{const u=c("IFormCheckbox"),d=c("IBadge"),m=c("IFormCheckboxLabel"),f=c("IFormCheckboxField"),h=c("BaseFormField");return g(),R(h,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:y,fieldId:b})=>[l(cn,{field:e.field,label:e.field.label,"field-id":b,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",{class:be({"flex items-center space-x-2":e.field.inline,"space-y-1":!e.field.inline})},[(g(!0),D(de,null,Ie(e.field.options,I=>(g(),R(f,{key:I[e.field.valueKey]},{default:p(()=>[l(u,Ue({checked:a.value,"onUpdate:checked":i[0]||(i[0]=w=>a.value=w),value:I[e.field.valueKey],name:e.field.attribute,disabled:y,ref_for:!0},e.field.attributes),null,16,["checked","value","name","disabled"]),l(m,null,{default:p(()=>[I.swatch_color?(g(),R(d,{key:0,text:I[e.field.labelKey],color:I.swatch_color},null,8,["text","color"])):(g(),D("span",{key:1,textContent:K(I[e.field.labelKey])},null,8,cpe))]),_:2},1024)]),_:2},1024))),128))],2)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},mpe=Object.freeze(Object.defineProperty({__proto__:null,default:dpe},Symbol.toStringTag,{value:"Module"})),fpe={__name:"ColorSwatchField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IColorSwatch"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:m})=>[l(cn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[_("div",null,[l(u,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),swatches:s.$scriptConfig("favourite_colors"),name:e.field.attribute},null,8,["modelValue","swatches","name"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},ppe=Object.freeze(Object.defineProperty({__proto__:null,default:fpe},Symbol.toStringTag,{value:"Module"})),vpe={__name:"DateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{DateTime:a}=it();function r(i){o("update:modelValue",i||"")}function s(){o("setInitialValue",Zt(n.field.value)?"":a.fromISO(n.field.value).toISODate())}return We(s),(i,u)=>{const d=c("DatePicker"),m=c("BaseFormField");return g(),R(m,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:f,fieldId:h})=>[l(cn,{field:e.field,label:e.field.label,"field-id":h,"validation-errors":e.validationErrors},{default:p(()=>[l(d,Ue({id:h,"model-value":e.modelValue,required:e.field.isRequired,name:e.field.attribute,disabled:f},e.field.attributes,{"onUpdate:modelValue":r}),null,16,["id","model-value","required","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},hpe=Object.freeze(Object.defineProperty({__proto__:null,default:vpe},Symbol.toStringTag,{value:"Module"})),gpe={__name:"DateTimeField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){o("update:modelValue",s||"")}function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return We(r),(s,i)=>{const u=c("DatePicker"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:m,fieldId:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f},e.field.attributes,{mode:"dateTime","model-value":e.modelValue,required:e.field.isRequired,name:e.field.attribute,disabled:m,"onUpdate:modelValue":a}),null,16,["id","model-value","required","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},bpe=Object.freeze(Object.defineProperty({__proto__:null,default:gpe},Symbol.toStringTag,{value:"Module"}));function O1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wm,P1;function M1(){return P1||(P1=1,Wm=function(t){var n=typeof window<"u"?window:Vr;n.$locutus=n.$locutus||{};var o=n.$locutus;return o.php=o.php||{},o.php.ini=o.php.ini||{},o.php.ini[t]&&o.php.ini[t].local_value!==void 0?o.php.ini[t].local_value===null?"":o.php.ini[t].local_value:""}),Wm}var ype=function(t,n){for(var o=void 0,a=(typeof O1<"u"?M1()("locutus.parse_url.mode"):void 0)||"php",r=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],s={php:new RegExp(["(?:([^:\\/?#]+):)?","(?:\\/\\/()(?:(?:()(?:([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?","()","(?:(()(?:(?:[^?#\\/]*\\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)"].join("")),strict:new RegExp(["(?:([^:\\/?#]+):)?","(?:\\/\\/((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?","((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)"].join("")),loose:new RegExp(["(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?","(?:\\/\\/\\/?)?","((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)","(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))","(?:\\?([^#]*))?(?:#(.*))?)"].join(""))},i=s[a].exec(t),u={},d=14;d--;)i[d]&&(u[r[d]]=i[d]);if(n)return u[n.replace("PHP_URL_","").toLowerCase()];if(a!=="php"){var m=(typeof O1<"u"?M1()("locutus.parse_url.queryKey"):void 0)||"queryKey";s=/(?:^|&)([^&=]*)=?([^&]*)/g,u[m]={},o=u[r[12]]||"",o.replace(s,function(f,h,y){h&&(u[m][h]=y)})}return delete u.source,u};const _pe=Rt(ype),wpe={class:"relative text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},Ipe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},xpe={__name:"DomainField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){let i=a.value;i&&!i.startsWith("http")&&(i=`https://${i}`),a.value=_pe(i).host||null}function s(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return s(),(i,u)=>{const d=c("Icon"),m=c("IFormInput"),f=c("BaseFormField");return g(),R(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:h,fieldId:y})=>[l(cn,{field:e.field,label:e.field.label,"field-id":y,"validation-errors":e.validationErrors},{default:p(()=>[_("div",wpe,[_("div",Ipe,[l(d,{icon:"Globe",class:"size-5"})]),l(m,Ue({id:y,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=b=>a.value=b)},e.field.attributes,{class:"pl-10 sm:pl-11",name:e.field.attribute,disabled:h,onBlur:r}),null,16,["id","modelValue","name","disabled"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},kpe=Object.freeze(Object.defineProperty({__proto__:null,default:xpe},Symbol.toStringTag,{value:"Module"})),$pe={__name:"EditorField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue"),r=P(()=>(n.resourceName?n.resourceName+"-":"")+(n.field.id||n.field.attribute)+(n.isFloating?"-floating":"")+"-"+So());function s(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return s(),(i,u)=>{const d=c("Editor"),m=c("BaseFormField");return g(),R(m,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":r.value,"validation-errors":e.validationErrors},{default:p(()=>[l(d,Ue({id:r.value,modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=h=>a.value=h),disabled:f},e.field.attributes),null,16,["id","modelValue","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Cpe=Object.freeze(Object.defineProperty({__proto__:null,default:$pe},Symbol.toStringTag,{value:"Module"})),Spe={class:"relative text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},Tpe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Epe=["textContent"],Fpe={__name:"EmailField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue"),r=Pt(null);function s(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}async function i(){await We(),!u.value||!a.value?r.value=null:r.value=await d(a.value)}const u=P(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function d(m){const{data:f}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:m,...n.field.checkDuplicatesWith.params}});return f.length>0?f[0]:null}return s(),(m,f)=>{const h=c("Icon"),y=c("IFormInput"),b=c("I18nT"),I=c("IAlertBody"),w=c("IButton"),k=c("IAlertActions"),x=c("IAlert"),$=c("BaseFormField");return g(),R($,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:C,fieldId:F})=>[l(cn,{field:e.field,label:e.field.label,"field-id":F,"validation-errors":e.validationErrors},{default:p(()=>[_("div",Spe,[_("div",Tpe,[l(h,{icon:"Mail",class:"size-5"})]),l(y,Ue({id:F,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=T=>a.value=T),type:"email"},e.field.attributes,{class:"pl-10 sm:pl-11",disabled:C,name:e.field.attribute,debounce:u.value,onInput:i}),null,16,["id","modelValue","disabled","name","debounce"])]),r.value?(g(),R(x,{key:0,class:"mt-2",dismissible:"",onDismissed:f[1]||(f[1]=T=>r.value=null)},{default:p(({variant:T})=>[l(I,null,{default:p(()=>[l(b,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:K(r.value.display_name)},null,8,Epe)]),_:1},8,["keypath"])]),_:1}),l(k,null,{default:p(()=>[l(w,{rel:"noopener noreferrer",target:"_blank",icon:"ExternalLink",href:r.value.path,variant:T,text:m.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:1})):Z("",!0)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Ape=Object.freeze(Object.defineProperty({__proto__:null,default:Fpe},Symbol.toStringTag,{value:"Module"})),Rpe={class:"mb-1 mt-3"},Dpe=["textContent"],Ope=Object.assign({inheritAttrs:!1},{__name:"HeadingField",props:{field:{type:Object,require:!0}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("ITextDisplay"),r=c("IText");return g(),D("div",Rpe,[l(a,{class:be([e.field.titleIcon?"inline-flex items-center":""])},{default:p(()=>[e.field.titleIcon?(g(),R(o,{key:0,class:"mr-1.5 size-4",icon:e.field.titleIcon},null,8,["icon"])):Z("",!0),_("span",{textContent:K(e.field.title)},null,8,Dpe)]),_:1},8,["class"]),l(r,{innerHTML:e.field.message},null,8,["innerHTML"])])}}}),Ppe=Object.freeze(Object.defineProperty({__proto__:null,default:Ope},Symbol.toStringTag,{value:"Module"})),Mpe={__name:"IconPickerField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IIconPicker"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:m})=>[l(cn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),name:e.field.attribute},e.field.attributes),null,16,["modelValue","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Bpe=Object.freeze(Object.defineProperty({__proto__:null,default:Mpe},Symbol.toStringTag,{value:"Module"})),Npe={__name:"NumberField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IFormInput"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:m,fieldId:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),type:"number",disabled:m,name:e.field.attribute},e.field.attributes),null,16,["id","modelValue","disabled","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Vpe=Object.freeze(Object.defineProperty({__proto__:null,default:Npe},Symbol.toStringTag,{value:"Module"})),Lpe={class:"relative"},qpe={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Upe=["textContent"],jpe={key:1,class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},zpe=["textContent"],Hpe={__name:"NumericField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IFormNumericInput"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:m,fieldId:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[_("div",Lpe,[e.field.prependText||e.field.currency&&e.field.currency.symbol_first?(g(),D("div",qpe,[_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:K(e.field.currency?e.field.currency.iso_code:e.field.prependText)},null,8,Upe)])):Z("",!0),l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),disabled:m,name:e.field.attribute},e.field.attributes,{class:{"pl-14 sm:pl-14":e.field.prependText||e.field.currency&&e.field.currency.symbol_first,"pr-14 sm:pr-14":e.field.appendText||e.field.currency&&!e.field.currency.symbol_first}}),null,16,["id","modelValue","disabled","name","class"]),e.field.appendText||e.field.currency&&!e.field.currency.symbol_first?(g(),D("div",jpe,[_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:K(e.field.currency?e.field.currency.iso_code:e.field.appendText)},null,8,zpe)])):Z("",!0)])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Wpe=Object.freeze(Object.defineProperty({__proto__:null,default:Hpe},Symbol.toStringTag,{value:"Module"})),Gpe=["textContent"],Kpe={__name:"RadioField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue"),r=P(()=>n.field.options.some(i=>!!i.description));function s(){o("setInitialValue",function(){return Zt(n.field.value)?"":typeof n.field.value=="object"?n.field.value[n.field.valueKey]:n.field.value}())}return s(),(i,u)=>{const d=c("IFormRadio"),m=c("IBadge"),f=c("IFormRadioLabel"),h=c("IFormRadioDescription"),y=c("IFormRadioField"),b=c("BaseFormField");return g(),R(b,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:I,fieldId:w})=>[l(cn,{field:e.field,label:e.field.label,"field-id":w,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",{class:be({"flex items-center space-x-2":e.field.inline,"space-y-1":!e.field.inline&&!r.value,"space-y-4":r.value})},[(g(!0),D(de,null,Ie(e.field.options,k=>(g(),R(y,{key:k[e.field.valueKey]},{default:p(()=>[l(d,Ue({ref_for:!0},e.field.attributes,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=x=>a.value=x),name:e.field.attribute,value:k[e.field.valueKey],disabled:I}),null,16,["modelValue","name","value","disabled"]),l(f,null,{default:p(()=>[k.swatch_color?(g(),R(m,{key:0,text:k[e.field.labelKey],color:k.swatch_color},null,8,["text","color"])):(g(),D("span",{key:1,textContent:K(k[e.field.labelKey])},null,8,Gpe))]),_:2},1024),k.description?(g(),R(h,{key:0},{default:p(()=>[ne(K(k.description),1)]),_:2},1024)):Z("",!0)]),_:2},1024))),128))],2)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Zpe=Object.freeze(Object.defineProperty({__proto__:null,default:Kpe},Symbol.toStringTag,{value:"Module"})),Ype={class:"flex items-center"},Xpe={class:"relative mr-2"},Qpe={class:"flex items-center space-x-2"},Jpe=["value"],eve={__name:"ReminderField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),r=["minutes","hours","days","weeks"],s=V(a("defaults.reminder_minutes")),i=V("minutes"),u=V(!1),d=P(()=>u.value?null:i.value==="minutes"?parseInt(s.value):i.value==="hours"?parseInt(s.value)*60:i.value==="days"?parseInt(s.value)*1440:i.value==="weeks"?parseInt(s.value)*10080:parseInt(30)),m=P(()=>i.value==="minutes"?59:i.value==="hours"?23:i.value==="days"?6:4);Se(d,I=>{y(I)});function f(I){u.value=!u.value,s.value=a("defaults.reminder_minutes"),i.value="minutes"}function h(){if(n.field.value)return s.value=t2(n.field.value),i.value=Rp(n.field.value),n.field.value;if(n.field.value===null&&n.field.cancelable)f();else return s.value}function y(I){o("update:modelValue",I)}function b(){o("setInitialValue",h()||null)}return b(),(I,w)=>{const k=c("IButton"),x=c("IFormNumericInput"),$=c("IFormSelect"),C=c("IText"),F=c("BaseFormField");return g(),R(F,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:T})=>[l(cn,{field:e.field,label:e.field.label,"field-id":T,"validation-errors":e.validationErrors},{default:p(()=>[_("div",Ype,[_("div",Xpe,[e.field.cancelable?(g(),R(k,{key:0,class:"absolute left-1.5 top-1.5 sm:top-1",icon:u.value?"Bell":"XSolid",basic:"",small:"",onClick:w[0]||(w[0]=S=>f())},null,8,["icon"])):Z("",!0),l(x,{id:T,modelValue:s.value,"onUpdate:modelValue":w[1]||(w[1]=S=>s.value=S),type:"number",class:be(e.field.cancelable?"!pl-11":""),name:e.field.attribute,max:m.value,min:1,disabled:u.value,precision:0,placeholder:I.$t("core::dates."+i.value)},null,8,["id","modelValue","class","name","max","disabled","placeholder"])]),_("div",Qpe,[l($,{id:T+"-reminder-type",modelValue:i.value,"onUpdate:modelValue":w[2]||(w[2]=S=>i.value=S),class:"sm:flex-1",disabled:u.value},{default:p(()=>[(g(),D(de,null,Ie(r,S=>_("option",{key:S,value:S},K(I.$t("core::dates."+S)),9,Jpe)),64))]),_:2},1032,["id","modelValue","disabled"]),l(C,{class:"ml-2 truncate",text:I.$t("core::app.reminder_before_due")},null,8,["text"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},tve=Object.freeze(Object.defineProperty({__proto__:null,default:eve},Symbol.toStringTag,{value:"Module"})),nve={__name:"SelectField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){s=s&&!Ut(s[n.field.valueKey])?s[n.field.valueKey]:null,o("update:modelValue",s)}function r(){o("setInitialValue",Zt(n.field.value)?null:function(){return typeof n.field.value=="object"?n.field.value[n.field.valueKey]:n.field.value}())}return r(),(s,i)=>{const u=c("IText"),d=c("ICustomSelect"),m=c("BaseSelectField");return g(),R(m,{field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:f,fieldId:h,options:y,createOption:b,lazyLoadingOptions:I,filterable:w,onSearch:k,onDropdownOpen:x,noOptionsText:$,headerText:C,selectValue:F,handleSelectInputChange:T})=>[l(cn,{field:e.field,label:e.field.label,"field-id":h,"validation-errors":e.validationErrors},{default:p(()=>[l(d,Ue({"model-value":F,"input-id":h,disabled:f,filterable:w,options:y,"create-option-provider":b,loading:I,name:e.field.attribute,label:e.field.labelKey},e.field.attributes,{"onUpdate:modelValue":S=>(a(S),T(S)),onSearch:k,onOpen:x}),{"no-options":p(()=>[ne(K($),1)]),header:p(()=>[te(l(u,{class:"px-3 py-2",text:C},null,8,["text"]),[[fe,C]]),I?(g(),R(u,{key:0,class:"-mt-1 px-3 py-2"},{default:p(()=>i[0]||(i[0]=[_("span",{class:"block size-4 motion-safe:animate-bounce"},"...",-1)])),_:1})):Z("",!0)]),_:2},1040,["model-value","input-id","disabled","filterable","options","create-option-provider","loading","name","label","onUpdate:modelValue","onSearch","onOpen"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","is-floating"])}}},ove=Object.freeze(Object.defineProperty({__proto__:null,default:nve},Symbol.toStringTag,{value:"Module"})),ave={__name:"SelectMultipleField",props:{field:{type:Object,required:!0},modelValue:{type:Array,default:()=>[]},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t;function a(s){let i=[];ga(s,u=>{i.push(u[n.field.valueKey])}),o("update:modelValue",i)}function r(){o("setInitialValue",Zt(n.field.value)?[]:function(){return n.field.value.length===0?[]:typeof n.field.value[0]=="object"?n.field.value.map(s=>s[n.field.valueKey]):n.field.value}())}return r(),(s,i)=>{const u=c("Icon"),d=c("ILink"),m=c("IText"),f=c("ICustomSelect"),h=c("BaseSelectField");return g(),R(h,{field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:y,fieldId:b,options:I,createOption:w,lazyLoadingOptions:k,filterable:x,onSearch:$,onDropdownOpen:C,noOptionsText:F,headerText:T,selectValue:S,handleSelectInputChange:A})=>[l(cn,{field:e.field,label:e.field.label,"field-id":b,"validation-errors":e.validationErrors},{default:p(()=>[l(f,Ue({"model-value":S,"input-id":b,disabled:y,filterable:x,options:I,"create-option-provider":w,loading:k,name:e.field.attribute,label:e.field.labelKey,multiple:""},e.field.attributes,{"onUpdate:modelValue":E=>(a(E),A(E)),onSearch:$,onOpen:C}),gn({"no-options":p(()=>[ne(K(F),1)]),header:p(()=>[te(l(m,{class:"px-3 py-2",text:T},null,8,["text"]),[[fe,T]]),k?(g(),R(m,{key:0,class:"-mt-1 px-3 py-2"},{default:p(()=>i[1]||(i[1]=[_("span",{class:"block size-4 motion-safe:animate-bounce"},"...",-1)])),_:1})):Z("",!0)]),_:2},[e.field.displayOptionViewActionFromPath?{name:"after-selected-option-inner",fn:p(({option:E})=>[E.path?(g(),R(d,{key:0,target:"_blank",to:E.path,plain:"",onClick:i[0]||(i[0]=ot(()=>{},["stop"]))},{default:p(()=>[l(u,{icon:"Eye",class:"size-4"})]),_:2},1032,["to"])):Z("",!0)]),key:"0"}:void 0]),1040,["model-value","input-id","disabled","filterable","options","create-option-provider","loading","name","label","onUpdate:modelValue","onSearch","onOpen"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","is-floating"])}}},rve=Object.freeze(Object.defineProperty({__proto__:null,default:ave},Symbol.toStringTag,{value:"Module"})),Da=V([]),Lk=()=>{const{scriptConfig:e}=qe();Da.value=[...e("tags")||[]],Jt(()=>{e("tags",[...Da.value])});const t=P(()=>Vt(Da.value,"display_order"));function n(d){return Da.value.findIndex(m=>m.id==d)}function o(d){return t.value.find(m=>m.id==d)}function a(d){return t.value.filter(m=>m.type==d)}function r(d){Da.value=d}function s(d){Da.value.push(d)}function i(d,m){Da.value[n(d)]=m}function u(d){Da.value.splice(n(d),1)}return{tags:Da,tagsByDisplayOrder:t,findTagById:o,findTagsByType:a,setTags:r,setTag:i,addTag:s,removeTag:u}},lve={class:"p-5"},sve={class:"flex items-center border-t border-neutral-200 px-5 py-2 dark:border-neutral-500/30"},ive={class:"ml-auto flex items-center space-x-2"},uve={class:"border-t border-neutral-200 px-4 py-2 hover:bg-neutral-50 dark:border-neutral-500/30 dark:hover:bg-neutral-700"},Ts={__name:"InputTagsSelect",props:{modelValue:Array,type:String,simple:Boolean},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),{tagsByDisplayOrder:r,findTagsByType:s,removeTag:i,setTag:u,findTagById:d,setTags:m,addTag:f}=Lk(),h=P(()=>n.type?s(n.type):r.value),y=a("favourite_colors").slice(0,-2),{form:b}=Qe({name:"",swatch_color:y[1]},{resetOnSuccess:!0}),I=V(!1),w=V(null),k=P(()=>n.simple?!n.modelValue||n.modelValue.length===0?"Tag":"":"Selector"),x=P(()=>I.value||!!w.value);function $(){I.value?S():A()}function C(M){w.value=M.id,b.fill("name",M.name),b.fill("swatch_color",M.swatch_color)}function F(M){m(M.map((N,G)=>({...N,display_order:G+1}))),Innoclapps.request().post("/tags/order",M.map((N,G)=>({id:N.id,display_order:G+1})))}function T(){I.value=!1,w.value=null,b.reset()}function S(){b.post(`/tags${n.type?`/${n.type}`:""}`).then(M=>{d(M.id)?u(M.id,M):f(M),T()})}function A(){const M=d(w.value).name;b.put(`/tags/${w.value}`).then(N=>{u(N.id,N);let G=n.modelValue.findIndex(U=>((U==null?void 0:U.name)||U)===M);if(G!==-1){let U=Wn(n.modelValue[G]);typeof U=="string"?U=N.name:U.name=N.name;let j=Wn(n.modelValue);j[G]=U,E(j)}T()})}function E(M){o("update:modelValue",M.map(N=>typeof N=="string"?N:N.name))}async function B(M){let N=d(M);await Innoclapps.request().delete(`/tags/${M}`),n.modelValue.findIndex(U=>((U==null?void 0:U.name)||U)===N.name)!==-1&&E(n.modelValue.filter(U=>((U==null?void 0:U.name)||U)!==N.name)),i(M),T()}return(M,N)=>{const G=c("IButton"),U=c("ITextBlockDark"),j=c("IFormInput"),O=c("IFormError"),H=c("IFormGroup"),W=c("IFormLabel"),X=c("IColorSwatch"),q=c("ILink"),L=c("ICustomSelect");return g(),R(L,{label:"name",class:be(e.simple?"[&_.toggle-icon]:size-5":""),"model-value":e.modelValue,multiple:!0,options:h.value,reduce:ee=>ee.name,simple:e.simple,filterable:!x.value,placeholder:e.simple?M.$t("core::tags.search"):void 0,"toggle-icon":k.value,"list-wrapper-class":e.simple?"min-w-[340px]":void 0,"list-class":x.value?"hidden":void 0,reorderable:M.$gate.isSuperAdmin(),"onUpdate:modelValue":E,"onUpdate:draggable":F},gn({"option-actions":p(({index:ee})=>[M.$gate.isSuperAdmin()?(g(),R(G,{key:0,icon:"Pencil",basic:"",small:"",onClick:ce=>C(h.value[ee])},null,8,["onClick"])):Z("",!0)]),_:2},[x.value?{name:"header",fn:p(()=>[l(U,{class:"border-b border-neutral-200 px-5 py-2.5 font-medium dark:border-neutral-500/30",text:I.value?M.$t("core::tags.new_tag"):M.$t("core::tags.edit_tag")},null,8,["text"]),_("div",lve,[l(H,{"label-for":"tag_name",label:M.$t("core::tags.tag_name"),required:""},{default:p(()=>[l(j,{id:"tag_name",modelValue:v(b).name,"onUpdate:modelValue":N[0]||(N[0]=ee=>v(b).name=ee),name:"tag_name",onKeydown:mo($,["enter"])},null,8,["modelValue"]),l(O,{error:v(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(W,{class:"mb-1",label:M.$t("core::tags.color"),required:""},null,8,["label"]),l(X,{modelValue:v(b).swatch_color,"onUpdate:modelValue":N[1]||(N[1]=ee=>v(b).swatch_color=ee),swatches:v(y)},null,8,["modelValue","swatches"]),l(O,{error:v(b).getError("swatch_color")},null,8,["error"])]),_("div",sve,[!I.value&&M.$gate.isSuperAdmin()?(g(),R(G,{key:0,icon:"Trash","confirm-text":M.$t("core::app.confirm"),basic:"",confirmable:"",onConfirmed:N[2]||(N[2]=ee=>B(w.value))},null,8,["confirm-text"])):Z("",!0),_("div",ive,[l(G,{text:M.$t("core::app.cancel"),basic:"",onClick:T},null,8,["text"]),l(G,{variant:"primary",text:M.$t("core::app.save"),loading:v(b).busy,disabled:v(b).busy,onClick:$},null,8,["text","loading","disabled"])])])]),key:"0"}:void 0,M.$gate.isSuperAdmin()?{name:"footer",fn:p(()=>[te(_("div",uve,[te(l(q,{class:"text-base sm:text-sm",onClick:N[3]||(N[3]=ee=>I.value=!0)},{default:p(()=>[ne(" + "+K(M.$t("core::tags.add_new")),1)]),_:1},512),[[fe,!x.value]])],512),[[fe,!x.value]])]),key:"1"}:void 0]),1032,["class","model-value","options","reduce","simple","filterable","placeholder","toggle-icon","list-wrapper-class","list-class","reorderable"])}}},cve={__name:"TagsField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){var i;return((i=n.field.value)==null?void 0:i.map(u=>typeof u=="string"?u:u.name))||[]}function s(){o("setInitialValue",r())}return s(),(i,u)=>{const d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:m,fieldId:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(Ts,Ue({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=h=>a.value=h),disabled:m,"input-id":f,name:e.field.attribute,type:e.field.type},e.field.attributes),null,16,["modelValue","disabled","input-id","name","type"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},dve=Object.freeze(Object.defineProperty({__proto__:null,default:cve},Symbol.toStringTag,{value:"Module"})),mve=["textContent"],fve={__name:"TextField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue"),r=Pt(null);function s(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}async function i(){await We(),!u.value||!a.value?r.value=null:r.value=await d(a.value)}const u=P(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function d(m){const{data:f}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:m,...n.field.checkDuplicatesWith.params}});return f.length>0?f[0]:null}return s(),(m,f)=>{const h=c("IFormInput"),y=c("I18nT"),b=c("IAlertBody"),I=c("IButton"),w=c("IAlertActions"),k=c("IAlert"),x=c("BaseFormField");return g(),R(x,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:$,fieldId:C})=>[l(cn,{field:e.field,label:e.field.label,"field-id":C,"validation-errors":e.validationErrors},{default:p(()=>[l(h,Ue({id:C,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=F=>a.value=F),disabled:$,name:e.field.attribute,type:e.field.inputType||"text"},e.field.attributes,{debounce:u.value,onInput:i}),null,16,["id","modelValue","disabled","name","type","debounce"]),r.value?(g(),R(k,{key:0,class:"mt-2",dismissible:"",onDismissed:f[1]||(f[1]=F=>r.value=null)},{default:p(({variant:F})=>[l(b,null,{default:p(()=>[l(y,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:K(r.value.display_name)},null,8,mve)]),_:1},8,["keypath"])]),_:1}),l(w,null,{default:p(()=>[l(I,{rel:"noopener noreferrer",target:"_blank",icon:"ExternalLink",href:r.value.path,variant:F,text:m.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:1})):Z("",!0)]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},pve=Object.freeze(Object.defineProperty({__proto__:null,default:fve},Symbol.toStringTag,{value:"Module"})),vve={__name:"TextareaField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IFormTextarea"),d=c("BaseFormField");return g(),R(d,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:m,fieldId:f})=>[l(cn,{field:e.field,label:e.field.label,"field-id":f,"validation-errors":e.validationErrors},{default:p(()=>[l(u,Ue({id:f,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),disabled:m,name:e.field.attribute},e.field.attributes),null,16,["id","modelValue","disabled","name"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},hve=Object.freeze(Object.defineProperty({__proto__:null,default:vve},Symbol.toStringTag,{value:"Module"})),gve={__name:"TimezoneField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),Innoclapps.timezones(n.field.timezones),(s,i)=>{const u=c("BaseFormField");return g(),R(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:d,fieldId:m})=>[l(cn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(Zw,Ue({modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),"field-id":m,clearable:!0,name:e.field.attribute,disabled:d},e.field.attributes),null,16,["modelValue","field-id","name","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},bve=Object.freeze(Object.defineProperty({__proto__:null,default:gve},Symbol.toStringTag,{value:"Module"})),yve={class:"relative"},_ve={key:0,class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},wve={class:"absolute inset-y-0 right-0 flex items-center pr-3"},Ive={__name:"UrlField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("IFormInput"),d=c("Icon"),m=c("ILink"),f=c("BaseFormField");return g(),R(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:h,fieldId:y})=>[l(cn,{field:e.field,label:e.field.label,"field-id":y,"validation-errors":e.validationErrors},{default:p(()=>[_("div",yve,[e.field.https?(g(),D("div",_ve,i[1]||(i[1]=[_("span",{class:"text-base text-neutral-500 dark:text-neutral-300 sm:text-sm",textContent:"https://"},null,-1)]))):Z("",!0),l(u,Ue({id:y,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=b=>a.value=b),type:"url",disabled:h,name:e.field.attribute},e.field.attributes,{class:["pr-10 sm:pr-10",{"pl-[calc(theme(spacing.20)-12px)] sm:pl-16":e.field.https}]}),null,16,["id","modelValue","disabled","name","class"]),_("div",wve,[l(m,{variant:"primary",href:a.value||"#",basic:!a.value,class:be(a.value?"":"pointer-events-none")},{default:p(()=>[l(d,{icon:"Link",class:"size-5"})]),_:1},8,["href","basic","class"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},xve=Object.freeze(Object.defineProperty({__proto__:null,default:Ive},Symbol.toStringTag,{value:"Module"})),nu=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=P(()=>Vt(n.value,"name"));d();function a(m){return n.value.findIndex(f=>f.id==m)}function r(m){n.value.splice(a(m),1)}function s(m){n.value.push(m)}function i(m,f){n.value[a(m)]=f}async function u(m){await Innoclapps.request().delete(`/teams/${m}`),r(m)}function d(m){e(!0),Innoclapps.request("/teams",m).then(({data:f})=>n.value=f).finally(()=>e(!1))}return{teams:n,teamsByName:o,teamsAreBeingFetched:t,addTeam:s,removeTeam:r,setTeam:i,deleteTeam:u,fetchTeams:d}}),kve={class:"mt-1"},$ve={class:"space-y-3 sm:flex sm:items-center sm:space-x-4 sm:space-y-0"},Cve={class:"mt-4"},Sve={class:"mt-0.5 block text-right text-xs italic text-neutral-500 dark:text-neutral-300"},Tve={class:"mt-4"},Bd={__name:"VisibilityGroupSelector",props:{disabled:Boolean,dependsOn:Array,type:String},emits:["update:type","update:dependsOn"],setup(e){const{users:t}=qe(),{teamsByName:n}=nu(),o=P(()=>t.value.filter(a=>!a.super_admin));return(a,r)=>{const s=c("IFormLabel"),i=c("IFormRadio"),u=c("IFormRadioLabel"),d=c("IFormRadioField"),m=c("ICustomSelect");return g(),D("div",null,[l(s,{as:"p"},{default:p(()=>[ne(K(a.$t("core::app.visibility_group.visible_to")),1)]),_:1}),_("fieldset",kve,[r[8]||(r[8]=_("legend",{class:"sr-only"},"Visibility group",-1)),_("div",$ve,[l(d,null,{default:p(()=>[l(i,{value:"all",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[0]||(r[0]=f=>a.$emit("update:type",f)),onChange:r[1]||(r[1]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("core::app.visibility_group.all")},null,8,["text"])]),_:1}),l(d,null,{default:p(()=>[l(i,{value:"teams",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[2]||(r[2]=f=>a.$emit("update:type",f)),onChange:r[3]||(r[3]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("users::team.teams")},null,8,["text"])]),_:1}),l(d,null,{default:p(()=>[l(i,{value:"users",name:"visible_to","model-value":e.type,disabled:e.disabled,"onUpdate:modelValue":r[4]||(r[4]=f=>a.$emit("update:type",f)),onChange:r[5]||(r[5]=f=>a.$emit("update:dependsOn",[]))},null,8,["model-value","disabled"]),l(u,{text:a.$t("users::user.users")},null,8,["text"])]),_:1})])]),te(_("div",Cve,[l(m,{label:"name","model-value":e.dependsOn,options:o.value,placeholder:a.$t("users::user.select"),reduce:f=>f.id,multiple:"","onUpdate:modelValue":r[6]||(r[6]=f=>a.$emit("update:dependsOn",f))},null,8,["model-value","options","placeholder","reduce"]),_("span",Sve," * "+K(a.$t("users::user.admin_users_excluded")),1)],512),[[fe,e.type==="users"]]),te(_("div",Tve,[l(m,{label:"name","model-value":e.dependsOn,options:v(n),placeholder:a.$t("users::team.select"),reduce:f=>f.id,multiple:"","onUpdate:modelValue":r[7]||(r[7]=f=>a.$emit("update:dependsOn",f))},null,8,["model-value","options","placeholder","reduce"])],512),[[fe,e.type==="teams"]])])}}},Eve={__name:"VisibilityGroupField",props:{field:{type:Object,required:!0},modelValue:{type:Object,default:()=>({})},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=V(s());function r(u){o("update:modelValue",u)}function s(){return!n.field.value||!n.field.value.type?{type:"all",depends_on:[]}:n.field.value}function i(){o("setInitialValue",s())}return i(),Se(a,r,{deep:!0}),(u,d)=>{const m=c("BaseFormField");return g(),R(m,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:f,fieldId:h})=>[l(cn,{field:e.field,label:e.field.label,"field-id":h,"validation-errors":e.validationErrors},{default:p(()=>[l(Bd,Ue({type:a.value.type,"onUpdate:type":d[0]||(d[0]=y=>a.value.type=y),dependsOn:a.value.depends_on,"onUpdate:dependsOn":d[1]||(d[1]=y=>a.value.depends_on=y)},e.field.attributes,{disabled:f}),null,16,["type","dependsOn","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Fve=Object.freeze(Object.defineProperty({__proto__:null,default:Eve},Symbol.toStringTag,{value:"Module"})),Ave={key:1},Ha={__name:"OptionsList",props:["value","displayAsBadges","eachOnNewLine","onOptionClick","list","labelKey","valueKey"],setup(e){const t=e,{floatResource:n}=Ro(),o=P(()=>t.value?Vn(t.value):[]),a=P(()=>o.value.length);function r(s){if(typeof s=="string"){if(!t.list)return s;let i=t.list.find(u=>u[t.valueKey]===s);return i?i[t.labelKey]:s}return s[t.labelKey]}return(s,i)=>a.value>0?(g(),D("div",{key:0,class:be(e.eachOnNewLine?"space-y-0.5":"")},[(g(!0),D(de,null,Ie(o.value,(u,d)=>(g(),R(_t(e.onOptionClick?Dd:"span"),{key:d,class:be(e.eachOnNewLine?"block":"mr-1.5 last:mr-0"),plain:e.onOptionClick&&!e.displayAsBadges?!1:void 0,to:e.onOptionClick&&e.onOptionClick.action==="redirect"?e.onOptionClick.to.replace("{id}",u.id):void 0,onClick:m=>e.onOptionClick&&e.onOptionClick.action==="float"?v(n)({resourceName:e.onOptionClick.resourceName,resourceId:u.id,mode:e.onOptionClick.mode||"detail"}):void 0},{default:p(()=>[(g(),R(_t(e.displayAsBadges?v(tu):"span"),{variant:e.displayAsBadges&&!u.swatch_color?"neutral":void 0,icon:u.icon&&e.displayAsBadges?u.icon:void 0,color:e.displayAsBadges&&u.swatch_color?u.swatch_color:void 0},{default:p(()=>[ne(K(r(u)),1)]),_:2},1032,["variant","icon","color"]))]),_:2},1032,["class","plain","to","onClick"]))),128))],2)):(g(),D("span",Ave,"—"))}},Rve={__name:"BelongsToField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(Ha,{value:e.field.value,"label-key":e.field.labelKey,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick},null,8,["value","label-key","display-as-badges","on-option-click"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Dve=Object.freeze(Object.defineProperty({__proto__:null,default:Rve},Symbol.toStringTag,{value:"Module"})),Ove={__name:"BooleanField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=P(()=>t.field.value===t.field.trueValue);return(o,a)=>{const r=c("BaseDetailField");return g(),R(r,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[_("span",{class:be(["mt-0.5 inline-block size-4 rounded-full",n.value?"bg-success-400":"bg-danger-400"])},null,2)]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Pve=Object.freeze(Object.defineProperty({__proto__:null,default:Ove},Symbol.toStringTag,{value:"Module"})),Mve={};function Bve(e,t){const n=c("DetailSelectMultipleField");return g(),R(n)}const Nve=an(Mve,[["render",Bve]]),Vve=Object.freeze(Object.defineProperty({__proto__:null,default:Nve},Symbol.toStringTag,{value:"Module"})),Lve={key:1},qve={__name:"ColorSwatchField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:a,value:r})=>[a?(g(),D("span",{key:0,class:"block size-6 rounded-lg",style:Nt({backgroundColor:r})},null,4)):(g(),D("span",Lve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Uve=Object.freeze(Object.defineProperty({__proto__:null,default:qve},Symbol.toStringTag,{value:"Module"})),jve={key:0},zve={__name:"DateField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{localizedDate:t}=it();return(n,o)=>{const a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",jve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Hve=Object.freeze(Object.defineProperty({__proto__:null,default:zve},Symbol.toStringTag,{value:"Module"})),Wve={key:0},Gve={__name:"DateTimeField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{localizedDateTime:t}=it();return(n,o)=>{const a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",Wve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Kve=Object.freeze(Object.defineProperty({__proto__:null,default:Gve},Symbol.toStringTag,{value:"Module"})),Zve={key:1},Yve={__name:"DomainField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("ILink"),a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,href:"http://"+s,text:s},null,8,["href","text"])):(g(),D("span",Zve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Xve=Object.freeze(Object.defineProperty({__proto__:null,default:Yve},Symbol.toStringTag,{value:"Module"})),Qve={key:0},Jve={__name:"EditorField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("TextCollapse"),a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[l(o,{text:s||""},null,8,["text"]),r?Z("",!0):(g(),D("span",Qve,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},ehe=Object.freeze(Object.defineProperty({__proto__:null,default:Jve},Symbol.toStringTag,{value:"Module"})),the={key:1},qk={__name:"EmailField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["show"],setup(e){return(t,n)=>{const o=c("IDropdownButton"),a=c("IButtonCopy"),r=c("IDropdownItem"),s=c("IDropdownMenu"),i=c("IDropdown"),u=c("BaseDetailField");return g(),R(u,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:d,value:m})=>[d?(g(),R(i,{key:0,onShow:n[0]||(n[0]=f=>t.$emit("show"))},{default:p(()=>[l(o,{class:"break-all",text:m,link:"","no-caret":""},null,8,["text"]),l(s,null,{default:p(()=>[Ee(t.$slots,"start",{email:m}),l(a,{as:"IDropdownItem","success-message":t.$t("core::fields.email_copied"),text:m},{default:p(()=>[ne(K(t.$t("core::app.copy")),1)]),_:2},1032,["success-message","text"]),l(r,{href:"mailto:"+m,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)):(g(),D("span",the,"—"))]),_:3},8,["field","is-floating","resource","resource-name","resource-id"])}}},nhe=Object.freeze(Object.defineProperty({__proto__:null,default:qk},Symbol.toStringTag,{value:"Module"})),ohe={key:1},ahe={__name:"IconPickerField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("Icon"),a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,class:"size-5",icon:s},null,8,["icon"])):(g(),D("span",ohe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},rhe=Object.freeze(Object.defineProperty({__proto__:null,default:ahe},Symbol.toStringTag,{value:"Module"})),lhe={__name:"IdField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({value:a})=>[ne(K(a),1)]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},she=Object.freeze(Object.defineProperty({__proto__:null,default:lhe},Symbol.toStringTag,{value:"Module"})),ihe={key:0},uhe={__name:"NumberField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{formatNumber:t}=lo();return(n,o)=>{const a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",ihe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},che=Object.freeze(Object.defineProperty({__proto__:null,default:uhe},Symbol.toStringTag,{value:"Module"})),dhe={__name:"NumericField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,{formatMoney:n,formatNumber:o}=lo(),a=P(()=>{var i;let r=t.field.value;if(Zt(r)&&(r=""),t.field.currency)return n(r,t.field.currency);const s=o(r,{precision:((i=t.field.attributes)==null?void 0:i.precision)||2});return(t.field.prependText||"")+s+(t.field.appendText||"")});return(r,s)=>{const i=c("BaseDetailField");return g(),R(i,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},gn({default:p(()=>[Ee(r.$slots,"numeric-field",{formattedValue:a.value},()=>[ne(K(a.value),1)])]),_:2},[Ie(r.$slots,(u,d)=>({name:d,fn:p(m=>[Ee(r.$slots,d,zt(Qt(m)))])}))]),1032,["field","is-floating","resource","resource-name","resource-id"])}}},mhe=Object.freeze(Object.defineProperty({__proto__:null,default:dhe},Symbol.toStringTag,{value:"Module"})),fhe={};function phe(e,t){const n=c("DetailSelectField");return g(),R(n)}const vhe=an(fhe,[["render",phe]]),hhe=Object.freeze(Object.defineProperty({__proto__:null,default:vhe},Symbol.toStringTag,{value:"Module"})),ghe={__name:"SelectField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=P(()=>t.field.value?t.field.options.find(o=>o[t.field.valueKey]==t.field.value):null);return(o,a)=>{const r=c("BaseDetailField");return g(),R(r,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(Ha,{value:n.value,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","on-option-click","label-key"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},bhe=Object.freeze(Object.defineProperty({__proto__:null,default:ghe},Symbol.toStringTag,{value:"Module"})),yhe={__name:"SelectMultipleField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(Ha,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"each-on-new-line":e.field.eachOnNewLine,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","each-on-new-line","on-option-click","label-key"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},_he=Object.freeze(Object.defineProperty({__proto__:null,default:yhe},Symbol.toStringTag,{value:"Module"})),whe={__name:"TagsField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(()=>[l(Ha,{"label-key":"name",value:e.field.value,"display-as-badges":!0},null,8,["value"])]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Ihe=Object.freeze(Object.defineProperty({__proto__:null,default:whe},Symbol.toStringTag,{value:"Module"})),xhe={key:0},khe={key:1},$he={__name:"TextField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("BaseDetailField");return g(),R(o,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:a,value:r})=>[a?(g(),D("p",xhe,K(r),1)):(g(),D("span",khe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Che=Object.freeze(Object.defineProperty({__proto__:null,default:$he},Symbol.toStringTag,{value:"Module"})),She={key:1},The={__name:"TextareaField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("TextCollapse"),a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,text:s,length:250},null,8,["text"])):(g(),D("span",She,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Ehe=Object.freeze(Object.defineProperty({__proto__:null,default:The},Symbol.toStringTag,{value:"Module"})),Fhe={key:0,class:"text-base sm:text-sm"},Ahe={class:"block text-xs text-neutral-500"},Rhe={key:1},Dhe={__name:"TimezoneField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const{DateTime:t}=it();return(n,o)=>{const a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),D("span",Fhe,[ne(K(s)+" ",1),_("span",Ahe,K(v(t).now().setZone(s).toLocaleString(v(t).DATETIME_MED_WITH_WEEKDAY)),1)])):(g(),D("span",Rhe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Ohe=Object.freeze(Object.defineProperty({__proto__:null,default:Dhe},Symbol.toStringTag,{value:"Module"})),Phe={key:1},Mhe={__name:"UrlField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("ILink"),a=c("BaseDetailField");return g(),R(a,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,class:"break-all",href:s,text:s},null,8,["href","text"])):(g(),D("span",Phe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Bhe=Object.freeze(Object.defineProperty({__proto__:null,default:Mhe},Symbol.toStringTag,{value:"Module"})),Nhe={__name:"BelongsToField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(Ha,{value:e.field.value,field:e.field,"label-key":e.field.labelKey,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick},null,8,["value","field","label-key","display-as-badges","on-option-click"])]),_:1},8,["resource-name","resource-id","row","field"])}}},Vhe=Object.freeze(Object.defineProperty({__proto__:null,default:Nhe},Symbol.toStringTag,{value:"Module"})),Lhe={__name:"BooleanField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,n=P(()=>t.field.value===t.field.trueValue);return(o,a)=>{const r=c("BaseIndexField");return g(),R(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[_("span",{class:be(["mt-0.5 inline-block size-4 rounded-full",n.value?"bg-success-400":"bg-danger-400"])},null,2)]),_:1},8,["resource-name","resource-id","row","field"])}}},qhe=Object.freeze(Object.defineProperty({__proto__:null,default:Lhe},Symbol.toStringTag,{value:"Module"})),Uhe={};function jhe(e,t){const n=c("IndexSelectMultipleField");return g(),R(n)}const zhe=an(Uhe,[["render",jhe]]),Hhe=Object.freeze(Object.defineProperty({__proto__:null,default:zhe},Symbol.toStringTag,{value:"Module"})),Whe={key:1},Ghe={__name:"ColorSwatchField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:a,value:r})=>[a?(g(),D("span",{key:0,class:"block size-6 rounded-md",style:Nt({backgroundColor:r})},null,4)):(g(),D("span",Whe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Khe=Object.freeze(Object.defineProperty({__proto__:null,default:Ghe},Symbol.toStringTag,{value:"Module"})),Zhe={key:0},Yhe={__name:"DateField",props:["column","row","field","resourceName","resourceId"],setup(e){const{localizedDate:t}=it();return(n,o)=>{const a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",Zhe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},Xhe=Object.freeze(Object.defineProperty({__proto__:null,default:Yhe},Symbol.toStringTag,{value:"Module"})),Qhe={key:0},Jhe={__name:"DateTimeField",props:["column","row","field","resourceName","resourceId"],setup(e){const{localizedDateTime:t}=it();return(n,o)=>{const a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",Qhe,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},e0e=Object.freeze(Object.defineProperty({__proto__:null,default:Jhe},Symbol.toStringTag,{value:"Module"})),t0e={key:1},n0e={__name:"DomainField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("ILink"),a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,href:"http://"+s,text:s},null,8,["href","text"])):(g(),D("span",t0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},o0e=Object.freeze(Object.defineProperty({__proto__:null,default:n0e},Symbol.toStringTag,{value:"Module"})),a0e={key:1},r0e={__name:"EditorField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=V(!0);return(n,o)=>{const a=c("TextCollapse"),r=c("BaseIndexField");return g(),R(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:s,value:i})=>[s?(g(),R(a,{key:0,collapsed:t.value,"onUpdate:collapsed":o[0]||(o[0]=u=>t.value=u),text:i||"","strip-tags":!e.column.wrap&&!t.value},null,8,["collapsed","text","strip-tags"])):(g(),D("span",a0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},l0e=Object.freeze(Object.defineProperty({__proto__:null,default:r0e},Symbol.toStringTag,{value:"Module"})),s0e={key:1},Uk={__name:"EmailField",props:["column","row","field","resourceName","resourceId"],emits:["show"],setup(e){return(t,n)=>{const o=c("IDropdownButton"),a=c("IButtonCopy"),r=c("IDropdownItem"),s=c("IDropdownMenu"),i=c("IDropdown"),u=c("BaseIndexField");return g(),R(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:d,value:m})=>[d?(g(),R(i,{key:0,onShow:n[0]||(n[0]=f=>t.$emit("show"))},{default:p(()=>[l(o,{text:m,link:"","no-caret":""},null,8,["text"]),l(s,null,{default:p(()=>[Ee(t.$slots,"start",{email:m}),l(a,{as:"IDropdownItem","success-message":t.$t("core::fields.email_copied"),text:m},{default:p(()=>[ne(K(t.$t("core::app.copy")),1)]),_:2},1032,["success-message","text"]),l(r,{href:"mailto:"+m,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)):(g(),D("span",s0e,"—"))]),_:3},8,["resource-name","resource-id","row","field"])}}},i0e=Object.freeze(Object.defineProperty({__proto__:null,default:Uk},Symbol.toStringTag,{value:"Module"})),u0e={key:1},c0e={__name:"IconPickerField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("Icon"),a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,class:"size-5",icon:s},null,8,["icon"])):(g(),D("span",u0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},d0e=Object.freeze(Object.defineProperty({__proto__:null,default:c0e},Symbol.toStringTag,{value:"Module"})),m0e={__name:"IdField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({value:a})=>[ne(K(a),1)]),_:1},8,["resource-name","resource-id","row","field"])}}},f0e=Object.freeze(Object.defineProperty({__proto__:null,default:m0e},Symbol.toStringTag,{value:"Module"})),p0e={key:0},v0e={__name:"NumberField",props:["column","row","field","resourceName","resourceId"],setup(e){const{formatNumber:t}=lo();return(n,o)=>{const a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[ne(K(r?v(t)(s):"")+" ",1),r?Z("",!0):(g(),D("span",p0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},h0e=Object.freeze(Object.defineProperty({__proto__:null,default:v0e},Symbol.toStringTag,{value:"Module"})),g0e={__name:"NumericField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{formatMoney:n,formatNumber:o}=lo(),a=P(()=>{var i;let r=t.field.value;if(Zt(r)&&(r=""),t.field.currency)return n(r,t.field.currency);const s=o(r,{precision:((i=t.field.attributes)==null?void 0:i.precision)||2});return(t.field.prependText||"")+s+(t.field.appendText||"")});return(r,s)=>{const i=c("BaseIndexField");return g(),R(i,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},gn({default:p(()=>[Ee(r.$slots,"numeric-field",{formattedValue:a.value},()=>[ne(K(a.value),1)])]),_:2},[Ie(r.$slots,(u,d)=>({name:d,fn:p(m=>[Ee(r.$slots,d,zt(Qt(m)))])}))]),1032,["resource-name","resource-id","row","field"])}}},b0e=Object.freeze(Object.defineProperty({__proto__:null,default:g0e},Symbol.toStringTag,{value:"Module"})),y0e={};function _0e(e,t){const n=c("IndexSelectField");return g(),R(n)}const w0e=an(y0e,[["render",_0e]]),I0e=Object.freeze(Object.defineProperty({__proto__:null,default:w0e},Symbol.toStringTag,{value:"Module"})),x0e={__name:"SelectField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(Ha,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey,"value-key":e.field.valueKey,list:e.field.options},null,8,["value","display-as-badges","on-option-click","label-key","value-key","list"])]),_:1},8,["resource-name","resource-id","row","field"])}}},k0e=Object.freeze(Object.defineProperty({__proto__:null,default:x0e},Symbol.toStringTag,{value:"Module"})),$0e={__name:"SelectMultipleField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(Ha,{value:e.field.value,"display-as-badges":e.field.displayAsBadges,"each-on-new-line":e.column.wrap,"on-option-click":e.field.onOptionClick,"label-key":e.field.labelKey},null,8,["value","display-as-badges","each-on-new-line","on-option-click","label-key"])]),_:1},8,["resource-name","resource-id","row","field"])}}},C0e=Object.freeze(Object.defineProperty({__proto__:null,default:$0e},Symbol.toStringTag,{value:"Module"})),S0e={__name:"TagsField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(Ha,{"label-key":"name",value:e.field.value,"display-as-badges":!0},null,8,["value"])]),_:1},8,["resource-name","resource-id","row","field"])}}},T0e=Object.freeze(Object.defineProperty({__proto__:null,default:S0e},Symbol.toStringTag,{value:"Module"})),E0e={key:0},F0e={key:1},A0e={__name:"TextField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:a,value:r})=>[a?(g(),D("p",E0e,K(r),1)):(g(),D("span",F0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},R0e=Object.freeze(Object.defineProperty({__proto__:null,default:A0e},Symbol.toStringTag,{value:"Module"})),D0e={key:1},O0e={__name:"TextareaField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=V(!0);return(n,o)=>{const a=c("TextCollapse"),r=c("BaseIndexField");return g(),R(r,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:s,value:i})=>[s?(g(),R(a,{key:0,collapsed:t.value,"onUpdate:collapsed":o[0]||(o[0]=u=>t.value=u),class:be(!e.column.wrap&&t.value?"whitespace-nowrap":""),"keep-whitespaces":!0,"strip-tags":!e.column.wrap,text:i},null,8,["collapsed","class","strip-tags","text"])):(g(),D("span",D0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},P0e=Object.freeze(Object.defineProperty({__proto__:null,default:O0e},Symbol.toStringTag,{value:"Module"})),M0e={key:1},B0e={__name:"TimezoneField",props:["column","row","field","resourceName","resourceId"],setup(e){const{DateTime:t}=it();return(n,o)=>{const a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),D(de,{key:0},[ne(K(s)+" ",1),_("span",{class:be(["text-xs text-neutral-500",e.column.wrap?"block":""])},K(v(t).now().setZone(s).toLocaleString(v(t).DATETIME_MED_WITH_WEEKDAY)),3)],64)):(g(),D("span",M0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},N0e=Object.freeze(Object.defineProperty({__proto__:null,default:B0e},Symbol.toStringTag,{value:"Module"})),V0e={key:1},L0e={__name:"UrlField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("ILink"),a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),R(o,{key:0,href:s,text:s},null,8,["href","text"])):(g(),D("span",V0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},q0e=Object.freeze(Object.defineProperty({__proto__:null,default:L0e},Symbol.toStringTag,{value:"Module"})),U0e={key:0},j0e={key:1},z0e={__name:"UserField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("IAvatar"),a=c("BaseIndexField");return g(),R(a,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:r,value:s})=>[r?(g(),D("span",U0e,[l(o,{class:"mr-1",size:"xs",src:s.avatar_url,alt:s.name},null,8,["src","alt"]),_("span",null,K(s.name),1)])):(g(),D("span",j0e,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},H0e=Object.freeze(Object.defineProperty({__proto__:null,default:z0e},Symbol.toStringTag,{value:"Module"})),B1=Object.assign({"./fields/Form/BelongsToField.vue":ope,"./fields/Form/BooleanField.vue":upe,"./fields/Form/CheckboxField.vue":mpe,"./fields/Form/ColorSwatchField.vue":ppe,"./fields/Form/DateField.vue":hpe,"./fields/Form/DateTimeField.vue":bpe,"./fields/Form/DomainField.vue":kpe,"./fields/Form/EditorField.vue":Cpe,"./fields/Form/EmailField.vue":Ape,"./fields/Form/HeadingField.vue":Ppe,"./fields/Form/IconPickerField.vue":Bpe,"./fields/Form/NumberField.vue":Vpe,"./fields/Form/NumericField.vue":Wpe,"./fields/Form/RadioField.vue":Zpe,"./fields/Form/ReminderField.vue":tve,"./fields/Form/SelectField.vue":ove,"./fields/Form/SelectMultipleField.vue":rve,"./fields/Form/TagsField.vue":dve,"./fields/Form/TextField.vue":pve,"./fields/Form/TextareaField.vue":hve,"./fields/Form/TimezoneField.vue":bve,"./fields/Form/UrlField.vue":xve,"./fields/Form/VisibilityGroupField.vue":Fve}),N1=Object.assign({"./fields/Detail/BelongsToField.vue":Dve,"./fields/Detail/BooleanField.vue":Pve,"./fields/Detail/CheckboxField.vue":Vve,"./fields/Detail/ColorSwatchField.vue":Uve,"./fields/Detail/DateField.vue":Hve,"./fields/Detail/DateTimeField.vue":Kve,"./fields/Detail/DomainField.vue":Xve,"./fields/Detail/EditorField.vue":ehe,"./fields/Detail/EmailField.vue":nhe,"./fields/Detail/IconPickerField.vue":rhe,"./fields/Detail/IdField.vue":she,"./fields/Detail/NumberField.vue":che,"./fields/Detail/NumericField.vue":mhe,"./fields/Detail/RadioField.vue":hhe,"./fields/Detail/SelectField.vue":bhe,"./fields/Detail/SelectMultipleField.vue":_he,"./fields/Detail/TagsField.vue":Ihe,"./fields/Detail/TextField.vue":Che,"./fields/Detail/TextareaField.vue":Ehe,"./fields/Detail/TimezoneField.vue":Ohe,"./fields/Detail/UrlField.vue":Bhe}),V1=Object.assign({"./fields/Index/BelongsToField.vue":Vhe,"./fields/Index/BooleanField.vue":qhe,"./fields/Index/CheckboxField.vue":Hhe,"./fields/Index/ColorSwatchField.vue":Khe,"./fields/Index/DateField.vue":Xhe,"./fields/Index/DateTimeField.vue":e0e,"./fields/Index/DomainField.vue":o0e,"./fields/Index/EditorField.vue":l0e,"./fields/Index/EmailField.vue":i0e,"./fields/Index/IconPickerField.vue":d0e,"./fields/Index/IdField.vue":f0e,"./fields/Index/NumberField.vue":h0e,"./fields/Index/NumericField.vue":b0e,"./fields/Index/RadioField.vue":I0e,"./fields/Index/SelectField.vue":k0e,"./fields/Index/SelectMultipleField.vue":C0e,"./fields/Index/TagsField.vue":T0e,"./fields/Index/TextField.vue":R0e,"./fields/Index/TextareaField.vue":P0e,"./fields/Index/TimezoneField.vue":N0e,"./fields/Index/UrlField.vue":q0e,"./fields/Index/UserField.vue":H0e});function Qv(e){return e.split("/").at(-1).split(".")[0]}function W0e(e){for(const t in B1)e.component(`Form${Qv(t)}`,B1[t].default)}function G0e(e){for(const t in N1)e.component(`Detail${Qv(t)}`,N1[t].default)}function K0e(e){for(const t in V1)e.component(`Index${Qv(t)}`,V1[t].default)}function Z0e(e){W0e(e),G0e(e),K0e(e)}Y0e();window.Innoclapps&&Innoclapps.booting(function(e,t,n){const o=yo();t.beforeEach((s,i,u)=>{s.meta.title&&(o.value=s.meta.title),n.state.sidebarOpen&&n.commit("SET_SIDEBAR_OPEN",!1),u()}),Jfe(e),Z0e(e),n.registerModule("fields",bY),n.registerModule("table",$Y),n.registerModule("dataViews",pY),n.registerModule("queryBuilder",IY),cY.forEach(s=>t.addRoute(s));const a={delay:15,delayOnTouchOnly:!0,animation:0,disabled:!1,ghostClass:"drag-ghost-rounded"},r={scroll:!0,scrollSpeed:50,forceFallback:!0,...a,onStart:function(){document.body.style.userSelect="none"},onEnd:function(){document.body.style.userSelect=""}};e.config.globalProperties.$draggable={common:a,scrollable:r},this.$on("conflict",s=>{s&&this.info(s)}),this.$on("error-404",()=>{t.replace({name:"404"})}),this.$on("error-403",s=>{s.response.config.url!=="/broadcasting/auth"&&t.replace({name:"403",query:{message:s.response.data.message}})}),this.$on("error",s=>{s&&this.error(s)}),this.$on("too-many-requests",()=>{this.error(rt("core::app.throttle_error"))}),this.$on("token-expired",()=>{this.error(rt("core::app.token_expired"),3e4,{action:{onClick:()=>window.location.reload(),text:rt("core::app.reload")}})}),this.$on("maintenance-mode",s=>{this.info(s||"Down for maintenance",3e4,{action:{onClick:()=>window.location.reload(),text:rt("core::app.reload")}})})});function Y0e(){window._app_={router:{useRoute:Ct,useRouter:wt,onBeforeRouteUpdate:Qc,onBeforeRouteLeave:v2},store:{useStore:fn},i18n:{useI18n:Pe,t:hO,translate:rt}}}function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},tp.apply(this,arguments)}var X0e=function(){var t=!1,n=[],o=function(){if(!t){t=!0;for(var i=0,u=n.length;i<u;i++)n[i]()}},a=function(i){if(!t){n.push(i);return}i()},r={resolved:function(){return t},resolve:o,promise:{then:a}};return r},L1=Object.prototype.hasOwnProperty;function Q0e(){var e=X0e();return{notify:function(){e.resolve()},wait:function(){return e.promise},render:function(n,o,a){this.wait().then(function(){a(window.grecaptcha.render(n,o))})},reset:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.reset(n)}))},execute:function(n){typeof n>"u"||(this.assertLoaded(),this.wait().then(function(){return window.grecaptcha.execute(n)}))},checkRecaptchaLoad:function(){L1.call(window,"grecaptcha")&&L1.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!e.resolved())throw new Error("ReCAPTCHA has not been loaded")}}}var Qs=Q0e();typeof window<"u"&&(window.vueRecaptchaApiLoaded=Qs.notify);var Jv=Ve({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(t,n){var o=n.slots,a=n.emit,r=V(null),s=V(null),i=function(f){a("verify",f)},u=function(){a("expired")},d=function(){a("error")};return Xe(function(){if(Qs.checkRecaptchaLoad(),t.loadRecaptchaScript&&!document.getElementById(t.recaptchaScriptId)){var m=document.createElement("script");m.id=t.recaptchaScriptId,m.src="https://"+t.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+t.language,m.async=!0,m.defer=!0,document.head.appendChild(m)}var f=tp({},t,{callback:i,"expired-callback":u,"error-callback":d}),h=r.value,y=o.default?h.children[0]:h;Qs.render(y,f,function(b){s.value=b,a("render",b)})}),{root:r,widgetId:s,reset:function(){Qs.reset(s.value)},execute:function(){Qs.execute(s.value)}}},render:function(){var t=this.$slots.default,n;return typeof t=="function"?n=t():n=t,Ae("div",{ref:"root"},n)}});const J0e={class:"flex items-center justify-between"},ege={__name:"AuthLogin",setup(e){const{appUrl:t,scriptConfig:n}=qe(),o=n("reCaptcha")||{},a=V(null),r=V(null),s=V(!1),{form:i}=Qe({email:null,password:null,remember:null,"g-recaptcha-response":null}),u=P(()=>s.value);async function d(){s.value=!0,a.value.blur(),await Innoclapps.request(t+"/sanctum/csrf-cookie"),i.post(t+"/login").then(f=>window.location.href=f.redirect_path).finally(()=>r.value&&r.value.reset()).catch(()=>s.value=!1)}function m(f){i.fill("g-recaptcha-response",f)}return(f,h)=>{const y=c("IFormInput"),b=c("IFormError"),I=c("IFormGroup"),w=c("IFormCheckbox"),k=c("IFormCheckboxLabel"),x=c("IFormCheckboxField"),$=c("ILinkBase"),C=c("IButton");return g(),D("form",{class:"space-y-6",onSubmit:h[3]||(h[3]=ot((...F)=>f.submit&&f.submit(...F),["prevent"]))},[l(I,{"label-for":"email",label:f.$t("auth::auth.login")},{default:p(()=>[l(y,{id:"email",modelValue:v(i).email,"onUpdate:modelValue":h[0]||(h[0]=F=>v(i).email=F),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(b,{error:v(i).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(I,{"label-for":"password",label:f.$t("auth::auth.password")},{default:p(()=>[l(y,{id:"password",ref_key:"passwordRef",ref:a,modelValue:v(i).password,"onUpdate:modelValue":h[1]||(h[1]=F=>v(i).password=F),type:"password",name:"password",autocomplete:"current-password",required:""},null,8,["modelValue"]),l(b,{error:v(i).getError("password")},null,8,["error"])]),_:1},8,["label"]),v(o).validate?(g(),R(I,{key:0},{default:p(()=>[l(v(Jv),{ref_key:"reCaptchaRef",ref:r,sitekey:v(o).siteKey,onVerify:m},null,8,["sitekey"]),l(b,{error:v(i).getError("g-recaptcha-response")},null,8,["error"])]),_:1})):Z("",!0),_("div",J0e,[l(x,null,{default:p(()=>[l(w,{modelValue:v(i).remember,"onUpdate:modelValue":h[2]||(h[2]=F=>v(i).remember=F)},null,8,["modelValue"]),l(k,{text:f.$t("auth::auth.remember_me")},null,8,["text"])]),_:1}),v(n)("disable_password_forgot")?Z("",!0):(g(),R($,{key:0,variant:"primary",href:"/password/reset"},{default:p(()=>[ne(K(f.$t("auth::auth.forgot_password")),1)]),_:1}))]),l(C,{type:"submit",variant:"primary",disabled:u.value,loading:s.value,text:f.$t("auth::auth.login"),block:"",onClick:d},null,8,["disabled","loading","text"])],32)}}},tge={__name:"AuthPasswordEmail",setup(e){const{appUrl:t,scriptConfig:n}=qe(),{form:o}=Qe({email:null,"g-recaptcha-response":null},{resetOnSuccess:!0}),a=n("reCaptcha")||{},r=V(null),s=V(!1),i=V(null);async function u(){s.value=!0,i.value=null,await Innoclapps.request(t+"/sanctum/csrf-cookie"),o.post(t+"/password/email").then(m=>{i.value=m.message}).finally(()=>{s.value=!1,r.value&&r.value.reset()})}function d(m){o.fill("g-recaptcha-response",m)}return(m,f)=>{const h=c("IAlertBody"),y=c("IAlert"),b=c("IFormInput"),I=c("IFormError"),w=c("IFormGroup"),k=c("IButton");return g(),D("form",{class:"space-y-6",onSubmit:f[1]||(f[1]=ot((...x)=>m.submit&&m.submit(...x),["prevent"]))},[l(y,{variant:"success",show:i.value!==null},{default:p(()=>[l(h,null,{default:p(()=>[ne(K(i.value||""),1)]),_:1})]),_:1},8,["show"]),l(w,{"label-for":"email",label:m.$t("auth::auth.email_address")},{default:p(()=>[l(b,{id:"email",modelValue:v(o).email,"onUpdate:modelValue":f[0]||(f[0]=x=>v(o).email=x),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(I,{error:v(o).getError("email")},null,8,["error"])]),_:1},8,["label"]),v(a).validate?(g(),R(w,{key:0},{default:p(()=>[l(v(Jv),{ref_key:"reCaptchaRef",ref:r,sitekey:v(a).siteKey,onVerify:d},null,8,["sitekey"]),l(I,{error:v(o).getError("g-recaptcha-response")},null,8,["error"])]),_:1})):Z("",!0),l(k,{type:"submit",variant:"primary",disabled:s.value||!v(o).email,loading:s.value,text:m.$t("passwords.send_password_reset_link"),block:"",onClick:u},null,8,["disabled","loading","text"])],32)}}},nge={__name:"AuthPasswordReset",props:{email:String,token:{required:!0,type:String}},setup(e){const t=e,{appUrl:n}=qe(),o=V(!1),a=V(null),{form:r}=Qe({token:t.token,email:t.email,password:null,password_confirmation:null});async function s(){o.value=!0,await Innoclapps.request(n+"/sanctum/csrf-cookie"),r.post(n+"/password/reset").then(i=>a.value=i.message).finally(()=>o.value=!1)}return(i,u)=>{const d=c("ILinkBase"),m=c("IAlertBody"),f=c("IAlert"),h=c("IFormInput"),y=c("IFormError"),b=c("IFormGroup"),I=c("IButton");return g(),D("form",{class:"space-y-6",onSubmit:u[3]||(u[3]=ot((...w)=>i.submit&&i.submit(...w),["prevent"]))},[l(f,{variant:"success",show:a.value!==null},{default:p(()=>[l(m,null,{default:p(()=>[ne(K(a.value)+" ",1),l(d,{class:"mt-2 font-medium",variant:"primary",href:"/login"},{default:p(()=>[ne(K(i.$t("core::dashboard.dashboard")),1)]),_:1})]),_:1})]),_:1},8,["show"]),l(b,{"label-for":"email",label:i.$t("auth::auth.email_address")},{default:p(()=>[l(h,{id:"email",modelValue:v(r).email,"onUpdate:modelValue":u[0]||(u[0]=w=>v(r).email=w),type:"email",name:"email",autocomplete:"email",autofocus:"",required:""},null,8,["modelValue"]),l(y,{error:v(r).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password",label:i.$t("auth::auth.password")},{default:p(()=>[l(h,{id:"password",modelValue:v(r).password,"onUpdate:modelValue":u[1]||(u[1]=w=>v(r).password=w),type:"password",name:"password",autocomplete:"new-password",required:""},null,8,["modelValue"]),l(y,{error:v(r).getError("password")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password-confirm",label:i.$t("auth::auth.confirm_password")},{default:p(()=>[l(h,{id:"password-confirm",modelValue:v(r).password_confirmation,"onUpdate:modelValue":u[2]||(u[2]=w=>v(r).password_confirmation=w),type:"password",name:"password_confirmation",autocomplete:"new-password",required:""},null,8,["modelValue"])]),_:1},8,["label"]),l(I,{type:"submit",variant:"primary",disabled:o.value,loading:o.value,text:i.$t("passwords.reset_password"),block:"",onClick:s},null,8,["disabled","loading","text"])],32)}}};window.Innoclapps&&Innoclapps.booting(function(e){e.component("AuthLogin",ege).component("AuthPasswordEmail",tge).component("AuthPasswordReset",nge)});function oge(e,t){var o;(o=Innoclapps.broadcaster)!=null&&o.hasDriver()&&window.Echo.private("Modules.Users.Models.User."+e).notification(t)}function ou(e,t,n){var i;const o=((i=Innoclapps.broadcaster)==null?void 0:i.hasDriver())||!1,a=V(null);ry(()=>{a.value=bt(e)}),Se(a,(u,d)=>{d&&s(d),u&&r()},{immediate:!0});function r(){!o||!a.value||window.Echo.private(a.value).listen(t,n)}function s(u){!o||!u&&!a.value||window.Echo.private(u||a.value).stopListening(t,n)}return{listen:r,stopListening:s}}class age{constructor(t,n="authorizations"){this.user=t,this.authorizationProperty=n}isSuperAdmin(){return!!this.user.super_admin}isRegularUser(){return!this.isSuperAdmin()}userCan(t){return this.before()?!0:this.user.permissions.indexOf(t)>-1}userCant(t){return!this.userCan(t)}before(){return this.isSuperAdmin()?!0:null}allows(t,n){return this.before()?!0:this.user&&Object.hasOwn(n,this.authorizationProperty)?n[this.authorizationProperty][t]:!1}denies(t,n){return!this.allows(t,n)}}const rge={install(e,t){e.config.globalProperties.$gate=new age(t)}},lge={__name:"UserInvitationAcceptForm",props:{invitation:{type:Object,required:!0},timezones:{type:Array,required:!0},dateFormat:String,timeFormat:String},setup(e){const t=e,{t:n}=Pe(),{appUrl:o}=qe(),{guessTimezone:a}=it(),{form:r}=Qe({name:null,password:null,timezone:a(),locale:"en",date_format:t.dateFormat,time_format:t.timeFormat,password_confirmation:null,email:t.invitation.email}),s=V(!1);function i(){s.value=!0,r.post(t.invitation.link).then(()=>window.location.href=o).catch(u=>{u.isValidationError()&&Innoclapps.error(n("core::app.form_validation_failed_with_sections"),3e3)}).finally(()=>s.value=!1)}return Innoclapps.timezones(t.timezones),(u,d)=>{const m=c("ITab"),f=c("ITabList"),h=c("IFormInput"),y=c("IFormError"),b=c("IFormGroup"),I=c("ITabPanel"),w=c("IButton"),k=c("ITabPanels"),x=c("ITabGroup");return g(),D("form",{onSubmit:ot(i,["prevent"])},[l(x,null,{default:p(()=>[l(f,{class:"-mt-5"},{default:p(()=>[l(m,{title:u.$t("users::profile.profile")},null,8,["title"]),l(m,{title:u.$t("auth::auth.password")},null,8,["title"]),l(m,{title:u.$t("users::user.localization")},null,8,["title"])]),_:1}),l(k,null,{default:p(()=>[l(I,null,{default:p(()=>[l(b,{"label-for":"name",label:u.$t("users::user.name"),required:""},{default:p(()=>[l(h,{id:"name",ref:"name",modelValue:v(r).name,"onUpdate:modelValue":d[0]||(d[0]=$=>v(r).name=$),type:"text"},null,8,["modelValue"]),l(y,{error:v(r).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"email",label:u.$t("users::user.email")},{default:p(()=>[l(h,{id:"email",modelValue:v(r).email,"onUpdate:modelValue":d[1]||(d[1]=$=>v(r).email=$),name:"email",type:"email",disabled:""},null,8,["modelValue"]),l(y,{error:v(r).getError("email")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(I,null,{default:p(()=>[l(b,{"label-for":"password",label:u.$t("auth::auth.password"),required:""},{default:p(()=>[l(h,{id:"password",modelValue:v(r).password,"onUpdate:modelValue":d[2]||(d[2]=$=>v(r).password=$),name:"password",type:"password"},null,8,["modelValue"]),l(y,{error:v(r).getError("password")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"password_confirmation",label:u.$t("auth::auth.confirm_password"),required:""},{default:p(()=>[l(h,{id:"password_confirmation",modelValue:v(r).password_confirmation,"onUpdate:modelValue":d[3]||(d[3]=$=>v(r).password_confirmation=$),name:"password_confirmation",type:"password"},null,8,["modelValue"]),l(y,{error:v(r).getError("password_confirmation")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(I,null,{default:p(()=>[l(md,{form:v(r),"onUpdate:timeFormat":d[4]||(d[4]=$=>v(r).time_format=$),"onUpdate:dateFormat":d[5]||(d[5]=$=>v(r).date_format=$),"onUpdate:locale":d[6]||(d[6]=$=>v(r).locale=$),"onUpdate:timezone":d[7]||(d[7]=$=>v(r).timezone=$)},null,8,["form"])]),_:1}),l(w,{type:"submit",class:"mt-2",disabled:s.value,loading:s.value,text:u.$t("users::user.accept_invitation")},null,8,["disabled","loading","text"])]),_:1})]),_:1})],32)}}};function Mr(e){return Mt(e.collection,["id",parseInt(Innoclapps.scriptConfig("user_id"))])}const sge={collection:[],endpoint:"/users"},ige={SET(e,t){e.collection=t},ADD(e,t){e.collection.push(t)},UPDATE(e,t){const n=Mt(e.collection,["id",parseInt(t.id)]);n!==-1&&(e.collection[n]=t.item)},REMOVE(e,t){const n=Mt(e.collection,["id",parseInt(t)]);n!=-1&&e.collection.splice(n,1)},SET_TOTAL_UNREAD_NOTIFICATIONS(e,t){const n=Mr(e);e.collection[n].notifications.unread_count=t},INCREMENT_TOTAL_UNREAD_NOTIFICATIONS(e){const t=Mr(e);e.collection[t].notifications.unread_count=e.collection[t].notifications.unread_count+1},DECREMENT_TOTAL_UNREAD_NOTIFICATIONS(e){const t=Mr(e);e.collection[t].notifications.unread_count=e.collection[t].notifications.unread_count-1},ADD_DASHBOARD(e,t){const n=Mr(e);e.collection[n].dashboards.push(t),t.is_default&&e.collection[n].dashboards.forEach((o,a)=>{o.id!=t.id&&(e.collection[a].dashboards[a].is_default=!1)})},UPDATE_DASHBOARD(e,t){const n=Mr(e),o=Mt(e.collection[n].dashboards,["id",parseInt(t.id)]);e.collection[n].dashboards[o]=Object.assign({},e.collection[n].dashboards[o],t),t.is_default&&e.collection[n].dashboards.forEach((a,r)=>{a.id!=t.id&&(e.collection[n].dashboards[r].is_default=!1)})},REMOVE_DASHBOARD(e,t){const n=Mr(e),o=Mt(e.collection[n].dashboards,["id",parseInt(t)]);e.collection[n].dashboards.splice(o,1)}},uge={getById:e=>t=>ft(e.collection,["id",parseInt(t)]),current(e){return e.collection[Mr(e)]}},cge={namespaced:!0,state:sge,getters:uge,mutations:ige},dge={class:"mx-auto max-w-5xl"},mge={key:0,class:"px-6"},fge={class:"-my-1.5"},pge={class:"flex items-center justify-between space-x-2"},vge={__name:"UsersPersonalAccessTokens",setup(e){const t=V(null),n=V(!1),o=V(!1),a=V(!1),r=el([]),{form:s}=Qe({name:""},{resetOnSuccess:!0}),{localizedDateTime:i}=it(),{currentUser:u}=qe(),d=wt(),m=P(()=>r.length);function f(){h()}function h(){a.value=!0,Innoclapps.request("/personal-access-tokens").then(k=>{r.push(...k.data)}).finally(()=>a.value=!1)}function y(){o.value=!0}function b(){t.value=null,s.post("/personal-access-tokens").then(k=>{r.push(k.accessToken),I(k.plainTextToken)})}function I(k){o.value=!1,t.value=k,n.value=!0}async function w(k){await Innoclapps.request().delete(`/personal-access-tokens/${k.id}`),r.splice(r.findIndex(x=>x.id===k.id),1)}return La(()=>{u.value.access_api?f():d.push({path:"/403"})}),(k,x)=>{const $=c("ICardHeading"),C=c("IButton"),F=c("ICardActions"),T=c("ICardHeader"),S=c("ITableHeader"),A=c("ITableRow"),E=c("ITableHead"),B=c("ITableCell"),M=c("ITableBody"),N=c("ITable"),G=c("IEmptyState"),U=c("ICardBody"),j=c("ICard"),O=c("IFormInput"),H=c("IFormError"),W=c("IFormGroup"),X=c("IModal"),q=c("ITextDisplay"),L=c("IText"),ee=c("IButtonCopy"),ce=c("MainLayout"),ue=ze("i-tooltip");return g(),R(ce,null,{default:p(()=>[_("div",dge,[l(T,null,{default:p(()=>[l($,{text:k.$t("core::api.personal_access_tokens")},null,8,["text"]),l(F,null,{default:p(()=>[te(l(C,{variant:"primary",icon:"PlusSolid",text:k.$t("core::api.create_token"),onClick:y},null,8,["text"]),[[fe,m.value>0]])]),_:1})]),_:1}),l(j,{overlay:a.value},{default:p(()=>[m.value>0?(g(),D("div",mge,[l(N,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(E,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(A,null,{default:p(()=>[l(S,null,{default:p(()=>[ne(K(k.$t("core::api.token_name")),1)]),_:1}),l(S,null,{default:p(()=>[ne(K(k.$t("core::api.token_last_used")),1)]),_:1}),l(S,null,{default:p(()=>[ne(K(k.$t("core::app.created_at")),1)]),_:1}),l(S,{width:"8%"})]),_:1})]),_:1}),l(M,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(r),oe=>(g(),R(A,{key:oe.id},{default:p(()=>[l(B,{class:"font-medium"},{default:p(()=>[ne(K(oe.name),1)]),_:2},1024),l(B,null,{default:p(()=>[ne(K(oe.last_used_at?v(i)(oe.last_used_at):"N/A"),1)]),_:2},1024),l(B,null,{default:p(()=>[ne(K(v(i)(oe.created_at)),1)]),_:2},1024),l(B,{class:"text-right"},{default:p(()=>[_("div",fge,[te(l(C,{icon:"Trash",small:"",basic:"",onClick:re=>k.$confirm({message:k.$t("core::api.token_delete_warning")}).then(()=>w(oe))},null,8,["onClick"]),[[ue,k.$t("core::api.revoke_token")]])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):a.value?Z("",!0):(g(),R(U,{key:1},{default:p(()=>[l(G,{title:k.$t("core::api.no_tokens"),"button-text":k.$t("core::api.create_token"),description:k.$t("core::api.empty_state.description"),onClick:y},null,8,["title","button-text","description"])]),_:1}))]),_:1},8,["overlay"])]),l(X,{visible:o.value,"onUpdate:visible":x[1]||(x[1]=oe=>o.value=oe),size:"sm","ok-disabled":v(s).busy,"ok-text":k.$t("core::app.create"),title:k.$t("core::api.create_token"),form:"",onShown:x[2]||(x[2]=()=>k.$refs.createTokenNameRef.focus()),onSubmit:b},{default:p(()=>[l(W,{"label-for":"name",label:k.$t("core::api.token_name"),required:""},{default:p(()=>[l(O,{id:"name",ref:"createTokenNameRef",modelValue:v(s).name,"onUpdate:modelValue":x[0]||(x[0]=oe=>v(s).name=oe),name:"name"},null,8,["modelValue"]),l(H,{error:v(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["visible","ok-disabled","ok-text","title"]),l(X,{visible:n.value,"onUpdate:visible":x[3]||(x[3]=oe=>n.value=oe),size:"sm","hide-header":"",static:""},{"modal-footer":p(({cancel:oe})=>[_("div",pge,[l(C,{variant:"secondary",text:k.$t("core::app.hide"),onClick:oe},null,8,["text","onClick"]),te(l(ee,{class:"mt-1.5",text:t.value},null,8,["text"]),[[ue,k.$t("core::app.copy")]])])]),default:p(()=>[l(q,{class:"mb-2"},{default:p(()=>[ne(K(k.$t("core::api.personal_access_token")),1)]),_:1}),l(L,{class:"text-warning-700 dark:text-warning-600"},{default:p(()=>[ne(K(k.$t("core::api.after_token_created_info")),1)]),_:1}),l(L,{class:"mt-5 select-all break-all rounded-lg border border-neutral-300 p-1.5 text-center dark:border-neutral-400"},{default:p(()=>[ne(K(t.value),1)]),_:1})]),_:1},8,["visible"])]),_:1})}}};function hge(e,t,n,o){var a=-1,r=e==null?0:e.length;for(o&&r&&(n=e[++a]);++a<r;)n=t(n,e[a],a,e);return n}var gge=hge;function bge(e,t,n,o,a){return a(e,function(r,s,i){n=o?(o=!1,r):t(n,r,s,i)}),n}var yge=bge,_ge=gge,wge=Li,Ige=ua,xge=yge,kge=$n;function $ge(e,t,n){var o=kge(e)?_ge:xge,a=arguments.length<3;return o(e,Ige(t),n,a,wge)}var Cge=$ge;const Nd=Rt(Cge),Sge={class:"rounded-lg border border-neutral-200 bg-neutral-50 px-4 py-5 shadow-sm dark:border-neutral-500/30 dark:bg-neutral-800/60"},Tge={class:"relative mb-8 flex h-16 w-full items-center justify-center rounded-lg border border-neutral-200 bg-white p-3 text-center dark:border-neutral-600 dark:bg-neutral-700"},Ege={class:"mb-10"},Fge={class:"flex justify-between"},Age={class:"mb-3"},Rge={class:"flex justify-between"},Dge=["max"],Oge={class:"mb-3"},Pge={class:"flex justify-between"},Mge=["max"],Bge={class:"mb-3"},Nge={class:"flex justify-between"},Vge=["max"],Lge={__name:"PasswordGenerator",setup(e){const t=V(""),n=V({maxLength:64,maxDigits:10,maxSymbols:10,length:12,digits:4,symbols:2,ambiguous:!0});Se(()=>n.value.length,a),Se(()=>n.value.digits,a),Se(()=>n.value.symbols,a);const o=P(()=>{let r={excess:0,upperCase:0,numbers:0,symbols:0},s={excess:3,upperCase:4,numbers:5,symbols:5,combo:0,flatLower:0,flatNumber:0},i={text:"",score:0},u=30;for(let m=0;m<t.value.length;m++)t.value.charAt(m).match(/[A-Z]/g)&&r.upperCase++,t.value.charAt(m).match(/[0-9]/g)&&r.numbers++,t.value.charAt(m).match(/(.*[!,@,#,$,%,^,&,*,?,_,~])/)&&r.symbols++;r.excess=t.value.length-6,r.upperCase&&r.numbers&&r.symbols?s.combo=25:(r.upperCase&&r.numbers||r.upperCase&&r.symbols||r.numbers&&r.symbols)&&(s.combo=15),t.value.match(/^[\sa-z]+$/)&&(s.flatLower=-30),t.value.match(/^[\s0-9]+$/)&&(s.flatNumber=-50);let d=u+r.excess*s.excess+r.upperCase*s.upperCase+r.numbers*s.numbers+r.symbols*s.symbols+s.combo+s.flatLower+s.flatNumber;return d<30?(i.text="weak",i.score=10,i):d>=30&&d<75?(i.text="average",i.score=40,i):d>=75&&d<150?(i.text="strong",i.score=75,i):(i.text="secure",i.score=100,i)});function a(){let r=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s=["=","+","-","^","?","!","%","&","*","$","#","^","@","|"],i=[],u=[];for(let d=0;d<n.value.length;d++)u.push(d),Math.round(Math.random()*1)===0?i[d]=r[Math.floor(Math.random()*r.length)].toUpperCase():i[d]=r[Math.floor(Math.random()*r.length)];for(let d=0;d<n.value.digits;d++){let m=Math.round(Math.random()*9),f=u[Math.floor(Math.random()*u.length)];i[f]=m;let h=u.indexOf(f);d!=-1&&u.splice(h,1)}for(let d=0;d<n.value.symbols;d++){let m=s[Math.floor(Math.random()*s.length)],f=u[Math.floor(Math.random()*u.length)];i[f]=m;let h=u.indexOf(f);d!=-1&&u.splice(h,1)}t.value=i.join("")}return Xe(()=>{a()}),(r,s)=>{const i=c("ITextDisplay"),u=c("ITextDark"),d=c("IButton"),m=c("IButtonCopy"),f=c("IFormLabel"),h=ze("i-tooltip"),y=ze("t");return g(),D("section",Sge,[l(i,{class:"mb-2",text:r.$t("core::app.password_generator.heading")},null,8,["text"]),_("div",Tge,[l(u,{class:"mr-10 select-all"},{default:p(()=>[ne(K(t.value),1)]),_:1}),l(d,{icon:"Refresh",basic:"",small:"",onClick:a}),te(l(m,{class:"ml-1",text:t.value,"success-message":r.$t("core::app.password_generator.copied"),basic:"",small:""},null,8,["text","success-message"]),[[h,r.$t("core::app.copy")]])]),_("div",Ege,[_("div",Fge,[te(l(f,null,null,512),[[y,"core::app.password_generator.strength"]]),l(u,{text:r.$t("core::app.password_generator."+o.value.text)},null,8,["text"])]),te(_("input",{"onUpdate:modelValue":s[0]||(s[0]=b=>o.value.score=b),type:"range",class:be(["input-score pointer-events-none h-2 w-full appearance-none overflow-hidden rounded-lg focus:outline-none",{"bg-danger-400":o.value.text==="weak","bg-warning-300":o.value.text==="average","bg-success-400":o.value.text==="strong"||o.value.text==="secure"}]),min:"0",max:"100"},null,2),[[pa,o.value.score]])]),_("div",Age,[_("div",Rge,[te(l(f,null,null,512),[[y,"core::app.password_generator.length"]]),l(u,{text:n.value.length},null,8,["text"])]),te(_("input",{"onUpdate:modelValue":s[1]||(s[1]=b=>n.value.length=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"6",max:n.value.maxLength},null,8,Dge),[[pa,n.value.length]])]),_("div",Oge,[_("div",Pge,[te(l(f,null,null,512),[[y,"core::app.password_generator.digits"]]),l(u,{text:n.value.digits},null,8,["text"])]),te(_("input",{"onUpdate:modelValue":s[2]||(s[2]=b=>n.value.digits=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"0",max:n.value.maxDigits},null,8,Mge),[[pa,n.value.digits]])]),_("div",Bge,[_("div",Nge,[te(l(f,null,null,512),[[y,"core::app.password_generator.symbols"]]),l(u,{text:n.value.symbols},null,8,["text"])]),te(_("input",{"onUpdate:modelValue":s[3]||(s[3]=b=>n.value.symbols=b),type:"range",class:"range-slider h-2 w-full appearance-none overflow-hidden rounded-lg bg-primary-200 focus:outline-none",min:"0",max:n.value.maxSymbols},null,8,Vge),[[pa,n.value.symbols]])])])}}},jk=an(Lge,[["__scopeId","data-v-831e9989"]]);let Mu=null;function zk(e,t){let n="";e.newlineable?n=`<textarea class="_placeholder"
                          rows="1"
                          data-tag="${e.tag}"
                          placeholder="${t} ${e.description}"></textarea> `:n=`<input type="text"
                          class="_placeholder"
                          data-tag="${e.tag}"
                          placeholder="${t} ${e.description}" /> `,tinymce.activeEditor.execCommand("mceInsertContent",!1,n)}function Hk(){const e=Lw(async()=>{if(Mu!==null)return Mu;const{data:a}=await Innoclapps.request("/placeholders",{params:{resources:["contacts","companies","deals"]}});return a.contacts.icon="Users",a.companies.icon="OfficeBuilding",a.deals.icon="CurrencyDollar",Mu=a,Mu},[],{lazy:!0}),t=P(()=>{let a=[];return Object.keys(e.value).forEach(r=>{e.value[r].placeholders.forEach(s=>{a.push(s)})}),a}),n=P(()=>t.value.reduce((a,r)=>{const s=[r.interpolation_start,r.interpolation_end];return a.length===0?a.push(s):a.forEach(i=>{i[0]!==s[0]&&i[1]!==s[1]&&a.push(s)}),a},[]));async function o(a,r,s){if(!r)return r;let{data:i}=await Innoclapps.request().post(`/placeholders/${s}`,{resources:a,content:r});return i}return{placeholders:e,allPlaceholders:t,allPlaceholdersInterpolations:n,makeParsePlaceholdersRequest:o}}const qge={class:"mt-4 flex flex-wrap"},Uge=["data-placeholder","onClick","onMouseup","textContent"],jge={__name:"MailEditorPlacehodersList",props:["placeholders"],emits:["insertRequested"],setup(e,{emit:t}){const n=e,o=t,a=V(null),r=V(null),{copy:s,isSupported:i}=zw({source:"",legacy:!0});function u(h){i.value&&(s(`{{ ${h.tag} }}`),Innoclapps.info("Placeholder copied"))}const d=P(()=>a.value?n.placeholders.filter(h=>h.description.toLowerCase().includes(a.value.toLowerCase())||h.tag.toLowerCase().includes(a.value.toLowerCase())):n.placeholders);function m(h){a.value=null,r.value=h,o("insertRequested",h),zn(()=>r.value=null,1500)}function f(h){h.dataTransfer.setData("text/plain",h.target.dataset.placeholder)}return(h,y)=>{const b=c("InputSearch"),I=c("Icon"),w=ze("i-tooltip");return g(),D(de,null,[l(b,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=k=>a.value=k)},null,8,["modelValue"]),_("div",qge,[(g(!0),D(de,null,Ie(d.value,k=>(g(),D("div",{key:k.tag,class:"relative mb-1 mr-1 flex items-center rounded-md border border-neutral-200 px-4 py-1 dark:border-neutral-500/30 dark:hover:border-neutral-700"},[te(_("a",{href:"#","data-placeholder":`${k.interpolation_start} ${k.tag} ${k.interpolation_end}`,class:be(["mr-1 text-base text-neutral-600 hover:text-neutral-900 dark:text-neutral-200 dark:hover:text-neutral-400 sm:text-sm",{"pointer-events-none":r.value}]),onDragstart:f,onClick:ot(x=>m(k),["prevent"]),onMouseup:ot(x=>u(k),["right"]),onContextmenu:y[1]||(y[1]=ot(()=>{},["prevent"])),textContent:K(k.description)},null,42,Uge),[[w,`${k.interpolation_start} ${k.tag} ${k.interpolation_end}`,void 0,{top:!0}]]),te(l(I,{icon:"Check",class:"absolute right-1 top-2 size-3 rounded-full text-neutral-600 dark:text-neutral-100"},null,512),[[fe,r.value&&r.value.tag===k.tag]])]))),128))])],64)}}},zge={__name:"MailEditorPlaceholders",props:{placeholders:{type:Object}},emits:["inserted"],setup(e,{emit:t}){const n=t;function o(a,r){zk(a,r),zn(()=>n("inserted"),500)}return(a,r)=>{const s=c("Icon"),i=c("ITab"),u=c("ITabList"),d=c("ITabPanel"),m=c("ITabPanels"),f=c("ITabGroup");return g(),D("div",null,[l(f,null,{default:p(()=>[l(u,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.placeholders,(h,y)=>(g(),R(i,{key:y,class:"first:sm:-ml-2.5"},{default:p(()=>[l(s,{icon:h.icon},null,8,["icon"]),ne(" "+K(h.label),1)]),_:2},1024))),128))]),_:1}),l(m,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.placeholders,(h,y)=>(g(),R(d,{key:y},{default:p(()=>[l(jge,{placeholders:h.placeholders,onInsertRequested:b=>o(b,h.label)},null,8,["placeholders","onInsertRequested"])]),_:2},1024))),128))]),_:1})]),_:1})])}}},q1="--",Hge="[[",au=Object.assign({inheritAttrs:!1},{__name:"MailEditor",props:pt({disabled:Boolean,placeholder:{type:String,default:""},withDrop:Boolean,placeholders:Object,placeholdersDisabled:Boolean,placeholdersParseInProgress:Boolean},{modelValue:{default:""},modelModifiers:{}}),emits:pt(["init","placeholderInserted","templateSelected"],["update:modelValue"]),setup(e,{expose:t,emit:n}){const o=e,a=n,r=Ht(e,"modelValue"),{t:s}=Pe(),{scriptConfig:i,isDarkMode:u,locale:d}=qe();So();const m=V(!1),f=V(!1);let h=null,y=null,b=null;const I=V({cache_suffix:"?v="+i("version"),license_key:"gpl",branding:!1,promotion:!1,highlight_on_focus:!1,height:200,min_height:200,max_height:800,menubar:!1,contextmenu:!1,statusbar:!1,language:WI(d.value),automatic_uploads:!0,images_reuse_filename:!0,paste_data_images:o.withDrop,relative_urls:!1,remove_script_host:!1,placeholder:o.placeholder||s("mailclient::mail.new_message_placeholder",{trigger:q1}),browser_spellcheck:!0,body_class:`${u.value?"dark ":""}${o.placeholdersDisabled?"placeholders-disabled":""}`,content_style:`
      .mce-content-body.dark {background: #0f172a;}
      .mce-content-body.dark[data-mce-placeholder]:not(.mce-visualblocks)::before {
          color: #64748b;
      }

      ._placeholder:focus {
          outline: 0;
      }

      ._placeholder {
          box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.050);
          border: 0.0625rem solid #cad1d7;
          min-width: 120px;
          display: inline-block;
          height: 29px;
          border-radius: 4px;
          line-height: 25px;
          padding-right: 0.7rem;
          padding-left: 0.7rem;
      }

      .mce-content-body.dark ._placeholder {
          background-color: #1e293b;
          border-color: #334155;
          color: white;
      }

      ._placeholder[data-autofilled] {
          background-color: #f2f9ff;
      }

      .mce-content-body.dark ._placeholder[data-autofilled] {
          border-color: rgba(14, 165, 233, 0.2);
          background-color: rgba(14, 165, 233, 0.2);
      }

      .placeholders-disabled ._placeholder {
          pointer-events: none !important;
          cursor: not-allowed !important;
          background-color: #f4f5f7 !important;
          opacity: 0.8;
      }

      .mce-content-body.dark.placeholders-disabled ._placeholder {
          background-color: #0f172a !important;
      }`,block_formats:`${tinymce.util.I18n.translate("Paragraph")}=p; ${tinymce.util.I18n.translate("Heading 1")}=h1; ${tinymce.util.I18n.translate("Heading 2")}=h2; ${tinymce.util.I18n.translate("Heading 3")}=h3;  ${tinymce.util.I18n.translate("Heading 4")}=h4`,setup:N=>{o.placeholders&&F(N),B(N),N.on("click",G=>{G.target.classList.contains("_placeholder")&&(G.preventDefault(),C(b,G))}),N.on("init",G=>{b=G.target,f.value=!0,a("init")})},plugins:["quickbars","advlist","lists","autolink","link","image","media","table","autoresize","emoticons"],toolbar:`
        placeholders |
        blocks |
        bold italic underline strikethrough |
        table |
        alignment bullist numlist |
        emoticons blockquote removeformat undo redo`,toolbar_location:"bottom",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:"bold italic underline | forecolor backcolor quicklink | alignleft aligncenter alignright | blockquote blocks",quickbars_image_toolbar:"image | alignleft aligncenter alignright | remove",toolbar_groups:{alignment:{icon:"align-left",tooltip:tinymce.util.I18n.translate("Alignment"),items:"alignleft aligncenter alignright | alignjustify"}},link_context_toolbar:!0}),w=P(()=>({...I.value,...u.value?{skin:"oxide-dark",content_css:"dark"}:{}})),k=P(()=>o.disabled||o.placeholdersParseInProgress);Se(()=>o.placeholdersParseInProgress,N=>{N?y=b.selection.getBookmark(2,!0):!N&&y&&(b.selection.moveToBookmark(y),y=null,tinymce.activeEditor.selection.getSel().focusNode.tagName==="HTML"&&tinymce.activeEditor.selection.collapse(!0))},{flush:"post"}),Se(r,N=>{N===null&&(r.value="")});function x(){b.focus()}function $(N,G){N.tagName.toLowerCase()==="input"?N.setAttribute("value",G):N.textContent=G}function C(N,G){const U=G.target.dataset.tag,j=G.target.tagName.toLowerCase(),O=G.target.placeholder,H=G.target.value;N.windowManager.open({title:O,size:"normal",body:{type:"panel",items:[{type:j,name:"placeholder"}]},initialData:{placeholder:H},buttons:[{type:"cancel",text:s("core::app.cancel")},{type:"submit",text:s("core::app.save"),primary:!0}],onSubmit:function(W){const X=W.getData(),q=G.currentTarget.querySelector('[data-tag="'+U+'"]');$(q,X.placeholder),delete q.dataset.autofilled,N.fire("change"),W.close()}})}function F(N){N.ui.registry.addToggleButton("placeholders",{icon:"accordion-toggle",active:m.value,text:s("core::fields.fields"),onAction:G=>{m.value=!m.value,G.setActive(m.value)}}),S(N)}function T(N){const G=Nn(o.placeholders);return ga(G,(U,j)=>{G[j].placeholders=U.placeholders.filter(O=>U.label.toLowerCase()==N.toLowerCase()||O.description.toLowerCase().indexOf(N.toLowerCase())!==-1)}),G}function S(N){N.ui.registry.addAutocompleter("placeholders",{trigger:q1,minChars:0,columns:1,highlightOn:["main-text"],fetch:function(G){return new Promise(U=>{const j=[];ga(T(G),O=>{j.push(...O.placeholders.map(H=>M({...H,group_label:O.label},H.description,O.label)))}),U(j)})},onAction:function(G,U,j){N.selection.setRng(U||0),zk(j,j.group_label),zn(()=>a("placeholderInserted"),500),G.hide()}})}async function A(){h=(await Innoclapps.request("/mails/templates")).data}async function E(N){return h===null&&await A(),h.filter(G=>G.name.toLowerCase().indexOf(N.toLowerCase())!==-1||G.subject.toLowerCase().indexOf(N.toLowerCase())!==-1)}function B(N){N.on("blur",()=>{h=null}),N.ui.registry.addAutocompleter("templates",{trigger:Hge,minChars:1,columns:1,highlightOn:["main-text"],fetch:function(G){return new Promise(U=>{E(G).then(j=>{U(j.map(O=>M(O,O.name,O.subject)))})})},onAction:function(G,U,j){N.selection.setRng(U||0),N.insertContent(""),a("templateSelected",j),G.hide()}})}function M(N,G,U){return{type:"cardmenuitem",value:N,label:G,items:[{type:"cardcontainer",direction:"vertical",items:[{type:"cardtext",text:G,name:"main-text"},{type:"cardtext",text:U}]}]}}return t({focus:x}),(N,G)=>(g(),D(de,null,[e.placeholders&&f.value?te((g(),R(zge,{key:0,placeholders:e.placeholders,onInserted:G[0]||(G[0]=U=>N.$emit("placeholderInserted"))},null,8,["placeholders"])),[[fe,m.value]]):Z("",!0),l(v(qI),Ue({modelValue:r.value,"onUpdate:modelValue":G[1]||(G[1]=U=>r.value=U)},N.$attrs,{disabled:k.value,init:w.value}),null,16,["modelValue","disabled","init"])],64))}});var Wge=Xv;function Gge(e){return e&&e.length?Wge(e):[]}var Kge=Gge;const Wk=Rt(Kge),Zge=["textContent"],Gk={__name:"UserNotificationSettings",props:{modelValue:{required:!0,type:Object}},emits:["update:modelValue"],setup(e){const{scriptConfig:t}=qe(),n=t("notifications_settings"),o={mail:"Mail",database:"Bell"},a=Wk(iQ(Fn(n,"channels")));return(r,s)=>{const i=c("Icon"),u=c("ITableHeader"),d=c("ITableRow"),m=c("ITableHead"),f=c("IFormCheckbox"),h=c("ITableCell"),y=c("IText"),b=c("ITableBody"),I=c("ITable"),w=ze("i-tooltip");return g(),R(I,{grid:""},{default:p(()=>[l(m,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(d,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(a),k=>te((g(),R(u,{key:"heading-"+k,class:"text-center",width:"8%"},{default:p(()=>[l(i,{class:"inline size-5",icon:o[k]},null,8,["icon"])]),_:2},1024)),[[w,r.$t("core::notifications.channels."+k)]])),128)),l(u,{class:"text-left",width:"92%"},{default:p(()=>[ne(K(r.$t("core::notifications.notification")),1)]),_:1})]),_:1})]),_:1}),l(b,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(n),k=>(g(),R(d,{key:k.key},{default:p(()=>[(g(!0),D(de,null,Ie(v(a),x=>(g(),R(h,{key:x,class:"text-center"},{default:p(()=>[k.channels.indexOf(x)>-1?(g(),R(f,{key:0,checked:e.modelValue[k.key][x],"onUpdate:checked":$=>r.$emit("update:modelValue",{...e.modelValue,[k.key]:{...e.modelValue[k.key],[x]:$}})},null,8,["checked","onUpdate:checked"])):(g(),R(i,{key:1,class:"inline size-5 text-neutral-500",icon:"XSolid"}))]),_:2},1024))),128)),l(h,{class:"space-y-0.5"},{default:p(()=>[_("p",{textContent:K(k.name)},null,8,Zge),te(l(y,{text:k.description},null,8,["text"]),[[fe,k.description]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}}},Yge={class:"m-auto max-w-7xl"},Xge={class:"md:grid md:grid-cols-3 md:gap-6"},Qge={class:"space-y-1 md:col-span-1"},Jge={class:"mt-2 md:col-span-2"},ebe={class:"mt-10 sm:mt-0"},tbe={class:"md:grid md:grid-cols-3 md:gap-6"},nbe={class:"space-y-1 md:col-span-1"},obe={class:"mt-5 md:col-span-2 md:mt-0"},abe={class:"mt-10 sm:mt-0"},rbe={class:"md:grid md:grid-cols-3 md:gap-6"},lbe={class:"space-y-1 md:col-span-1"},sbe={class:"mt-5 md:col-span-2 md:mt-0"},ibe={class:"mt-10 sm:mt-0"},ube={class:"md:grid md:grid-cols-3 md:gap-6"},cbe={class:"space-y-1 md:col-span-1"},dbe={class:"mt-5 md:col-span-2 md:mt-0"},mbe={class:"mt-10 sm:mt-0"},fbe={class:"md:grid md:grid-cols-3 md:gap-6"},pbe={class:"space-y-1 md:col-span-1"},vbe={class:"mt-5 md:col-span-2 md:mt-0"},hbe={class:"flex"},gbe={key:0,class:"hidden sm:block","aria-hidden":"true"},bbe={key:1,class:"mt-10 sm:mt-0"},ybe={class:"md:grid md:grid-cols-3 md:gap-6"},_be={class:"space-y-1 md:col-span-1"},wbe={class:"mt-5 md:col-span-2 md:mt-0"},Ibe={role:"list",class:"space-y-4 divide-y divide-neutral-200 dark:divide-neutral-500/30"},xbe={__name:"UsersProfile",setup(e){const{t}=Pe(),n=fn(),{currentUser:o,resetStoreState:a}=qe(),r=v(o),{form:s}=Qe(),{form:i}=Qe({},{resetOnSuccess:!0}),{teams:u}=nu(),d=V(null),m=[{value:"/deals",label:t("deals::deal.deals")},{value:"/contacts",label:t("contacts::contact.contacts")},{value:"/companies",label:t("contacts::company.companies")},{value:"/activities",label:t("activities::activity.activities")},{value:"/documents",label:t("documents::document.documents")},{value:"/dashboard",label:t("core::dashboard.insights")},{value:"/inbox",label:t("mailclient::inbox.inbox")},{value:"/calls",label:t("calls::call.calls")}],f=V(!1),h=P(()=>u.value.filter($=>$.manager.id===o.value.id));let y=null;function b($){n.commit("users/UPDATE",{id:$.id,item:$}),r.avatar=$.avatar,r.avatar_url=$.avatar_url,s.avatar=r.avatar}function I(){r.avatar&&Innoclapps.request().delete(`/users/${r.id}/avatar`).then(({data:$})=>{s.avatar=$.avatar,n.commit("users/UPDATE",{id:r.id,item:$})})}function w(){s.put("/profile").then($=>{n.commit("users/UPDATE",{id:$.id,item:$}),Innoclapps.success(t("users::profile.updated")),y!==s.locale?window.location.reload():a()})}function k(){i.put("/profile/password").then(()=>{Innoclapps.success(t("users::profile.password_updated"))})}function x(){y=r.locale,d.value=m.find($=>$.value===r.default_landing_page),s.set({name:r.name,email:r.email,mail_signature:r.mail_signature,default_landing_page:r.default_landing_page,date_format:r.date_format,time_format:r.time_format,timezone:r.timezone,locale:r.locale,notifications_settings:Nd(r.notifications.settings,($,C)=>($[C.key]=C.availability,$),{})}),i.set({old_password:null,password:null,password_confirmation:null})}return x(),($,C)=>{const F=c("ITextDisplay"),T=c("IText"),S=c("CropsAndUploadsImage"),A=c("ICardBody"),E=c("ICard"),B=c("IFormInput"),M=c("IFormError"),N=c("IFormGroup"),G=c("ICustomSelect"),U=c("IButton"),j=c("ICardFooter"),O=c("IFormLabel"),H=c("ILink"),W=c("ITextDark"),X=c("IAvatar"),q=c("MainLayout");return g(),R(q,null,{default:p(()=>[_("div",Yge,[_("div",Xge,[_("div",Qge,[l(F,{text:$.$t("core::app.avatar")},null,8,["text"]),l(T,{text:$.$t("users::profile.avatar_info")},null,8,["text"])]),_("div",Jge,[l(E,null,{default:p(()=>[l(A,null,{default:p(()=>[l(S,{name:"avatar","upload-url":`${$.$scriptConfig("apiURL")}/users/${v(o).id}/avatar`,image:v(o).uploaded_avatar_url,"cropper-options":{aspectRatio:1/1},"choose-text":v(o).uploaded_avatar_url?$.$t("core::app.change"):$.$t("core::app.upload_avatar"),onCleared:I,onSuccess:b},null,8,["upload-url","image","choose-text"])]),_:1})]),_:1})])]),C[15]||(C[15]=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1)),_("div",ebe,[_("div",tbe,[_("div",nbe,[l(F,{text:$.$t("users::profile.profile")},null,8,["text"]),l(T,{text:$.$t("users::profile.profile_info")},null,8,["text"])]),_("div",obe,[l(E,{as:"form",onSubmit:ot(w,["prevent"])},{default:p(()=>[l(A,null,{default:p(()=>[l(N,{"label-for":"name",label:$.$t("users::user.name")},{default:p(()=>[l(B,{id:"name",modelValue:v(s).name,"onUpdate:modelValue":C[0]||(C[0]=L=>v(s).name=L),name:"name"},null,8,["modelValue"]),l(M,{error:v(s).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(N,{"label-for":"email",label:$.$t("users::user.email")},{default:p(()=>[l(B,{id:"email",modelValue:v(s).email,"onUpdate:modelValue":C[1]||(C[1]=L=>v(s).email=L),name:"email",type:"email"},null,8,["modelValue"]),l(M,{error:v(s).getError("email")},null,8,["error"])]),_:1},8,["label"]),l(N,{"label-for":"mail_signature",label:$.$t("mailclient::mail.signature"),description:v(o).mail_signature?$.$t("mailclient::mail.signature_info"):""},{default:p(()=>[l(au,{modelValue:v(s).mail_signature,"onUpdate:modelValue":C[2]||(C[2]=L=>v(s).mail_signature=L),placeholder:$.$t("mailclient::mail.signature_info")},null,8,["modelValue","placeholder"]),l(M,{error:v(s).getError("mail_signature")},null,8,["error"])]),_:1},8,["label","description"]),l(N,{"label-for":"default_landing_page",label:$.$t("users::profile.default_landing_page"),description:$.$t("users::profile.default_landing_page_info")},{default:p(()=>[l(G,{modelValue:d.value,"onUpdate:modelValue":[C[3]||(C[3]=L=>d.value=L),C[4]||(C[4]=L=>v(s).default_landing_page=L.value)],"input-id":"default_landing_page",clearable:!1,options:m},null,8,["modelValue"]),l(M,{error:v(s).getError("default_landing_page")},null,8,["error"])]),_:1},8,["label","description"])]),_:1}),l(j,{class:"text-right"},{default:p(()=>[l(U,{type:"submit",variant:"primary",disabled:v(s).busy,text:$.$t("users::profile.update"),onClick:w},null,8,["disabled","text"])]),_:1})]),_:1})])])]),C[16]||(C[16]=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1)),_("div",abe,[_("div",rbe,[_("div",lbe,[l(F,{text:$.$t("users::user.localization")},null,8,["text"]),l(T,{text:$.$t("users::profile.localization_info")},null,8,["text"])]),_("div",sbe,[l(E,null,{default:p(()=>[l(A,null,{default:p(()=>[l(md,{form:v(s),"onUpdate:timeFormat":C[5]||(C[5]=L=>v(s).time_format=L),"onUpdate:dateFormat":C[6]||(C[6]=L=>v(s).date_format=L),"onUpdate:locale":C[7]||(C[7]=L=>v(s).locale=L),"onUpdate:timezone":C[8]||(C[8]=L=>v(s).timezone=L)},null,8,["form"])]),_:1}),l(j,{class:"text-right"},{default:p(()=>[l(U,{variant:"primary",disabled:v(s).busy,text:$.$t("core::app.save"),onClick:w},null,8,["disabled","text"])]),_:1})]),_:1})])])]),C[17]||(C[17]=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1)),_("div",ibe,[_("div",ube,[_("div",cbe,[l(F,{text:$.$t("core::notifications.notifications")},null,8,["text"]),l(T,{text:$.$t("users::profile.notifications_info")},null,8,["text"])]),_("div",dbe,[l(E,{id:"notifications"},{default:p(()=>[l(Gk,{modelValue:v(s).notifications_settings,"onUpdate:modelValue":C[9]||(C[9]=L=>v(s).notifications_settings=L),class:"-mt-px"},null,8,["modelValue"]),l(j,{class:"text-right"},{default:p(()=>[l(U,{variant:"primary",disabled:v(s).busy,text:$.$t("core::app.save"),onClick:w},null,8,["disabled","text"])]),_:1})]),_:1})])])]),C[18]||(C[18]=_("div",{class:"hidden sm:block","aria-hidden":"true"},[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})])],-1)),_("div",mbe,[_("div",fbe,[_("div",pbe,[l(F,{text:$.$t("auth::auth.password")},null,8,["text"]),l(T,{text:$.$t("users::profile.password_info")},null,8,["text"])]),_("div",vbe,[l(E,{as:"form",onSubmit:ot(k,["prevent"])},{default:p(()=>[l(A,null,{default:p(()=>[l(N,{"label-for":"old_password",label:$.$t("auth::auth.current_password")},{default:p(()=>[l(B,{id:"old_password",modelValue:v(i).old_password,"onUpdate:modelValue":C[10]||(C[10]=L=>v(i).old_password=L),name:"old_password",type:"password",autocomplete:"current-password"},null,8,["modelValue"]),l(M,{error:v(i).getError("old_password")},null,8,["error"])]),_:1},8,["label"]),l(N,null,{label:p(()=>[_("div",hbe,[l(O,{class:"mb-1 grow",for:"password",label:$.$t("auth::auth.new_password")},null,8,["label"]),l(H,{text:$.$t("core::app.password_generator.heading"),onClick:C[11]||(C[11]=L=>f.value=!f.value)},null,8,["text"])])]),default:p(()=>[l(B,{id:"password",modelValue:v(i).password,"onUpdate:modelValue":C[12]||(C[12]=L=>v(i).password=L),name:"password",type:"password",autocomplete:"new-password"},null,8,["modelValue"]),l(M,{error:v(i).getError("password")},null,8,["error"])]),_:1}),l(N,{"label-for":"password_confirmation",label:$.$t("auth::auth.confirm_password")},{default:p(()=>[l(B,{id:"password_confirmation",modelValue:v(i).password_confirmation,"onUpdate:modelValue":C[13]||(C[13]=L=>v(i).password_confirmation=L),name:"password_confirmation",type:"password",autocomplete:"new-password"},null,8,["modelValue"]),l(M,{error:v(i).getError("password_confirmation")},null,8,["error"])]),_:1},8,["label"]),te(l(jk,null,null,512),[[fe,f.value]])]),_:1}),l(j,{class:"text-right"},{default:p(()=>[l(U,{type:"submit",variant:"primary",disabled:v(i).busy,text:$.$t("auth::auth.change_password")},null,8,["disabled","text"])]),_:1})]),_:1})])])]),h.value.length>0?(g(),D("div",gbe,C[14]||(C[14]=[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})],-1)]))):Z("",!0),h.value.length>0?(g(),D("div",bbe,[_("div",ybe,[_("div",_be,[l(F,{text:$.$t("users::team.your_teams",h.value.length)},null,8,["text"]),l(T,{text:$.$t("users::team.managing_teams")},null,8,["text"])]),_("div",wbe,[l(E,null,{default:p(()=>[l(A,null,{default:p(()=>[_("ul",Ibe,[(g(!0),D(de,null,Ie(h.value,L=>(g(),D("li",{key:L.id,class:"pt-4 first:pt-0"},[l(W,{class:"truncate font-medium",text:L.name},null,8,["text"]),l(T,{class:"my-2",text:$.$t("users::team.members")},null,8,["text"]),(g(!0),D(de,null,Ie(L.members,ee=>(g(),D("div",{key:"info-"+ee.email,class:"mb-1 flex items-center space-x-1.5 last:mb-0"},[l(X,{alt:ee.name,src:ee.avatar_url},null,8,["alt","src"]),l(T,{text:ee.name},null,8,["text"])]))),128))]))),128))])]),_:1})]),_:1})])])])):Z("",!0)])]),_:1})}}},ru=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=P(()=>Vt(n.value,"name")),a=P(()=>o.value.map(h=>h.name));f();function r(h){return n.value.findIndex(y=>y.id==h)}function s(h){n.value.splice(r(h),1)}function i(h){n.value.push(h)}function u(h,y){n.value[r(h)]=y}async function d(h,y){const{data:b}=await Innoclapps.request(`/roles/${h}`,y);return b}async function m(h){await Innoclapps.request().delete(`/roles/${h}`),s(h)}function f(){e(!0),Innoclapps.request("/roles").then(({data:h})=>n.value=h).finally(()=>e(!1))}return{roles:n,rolesByName:o,rolesNames:a,rolesAreBeingFetched:t,addRole:i,removeRole:s,setRole:u,fetchRoles:f,fetchRole:d,deleteRole:m}}),kbe={class:"flex items-center justify-between"},Kk={__name:"RolesFormFields",props:{inCreateMode:Boolean,name:{required:!0,type:String},permissions:{required:!0,type:Array},form:{required:!0,type:Object}},emits:["update:name","update:permissions"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{setLoading:s,isLoading:i}=Cn(),u=V(null),d=V({all:[],grouped:{}});function m(I){if(I.single)return o.permissions.includes(I.keys[0])?r("core::role.granted"):r("core::role.revoked");const w=I.keys.find(k=>o.permissions.includes(k));return w?I.permissions[w]:r("core::role.revoked")}function f(I,w){let k=h(I,!1);a("update:permissions",[...k,w])}function h(I,w=!0){const k=o.permissions.filter(x=>!I.keys.includes(x));return w&&a("update:permissions",k),k}function y(I){const w=Object.values(I.grouped).flatMap(k=>k.views.filter(x=>!x.single).map(x=>Object.keys(x.permissions)[0]));a("update:permissions",w)}async function b(){s(!0);try{const{data:I}=await Innoclapps.request("/permissions");d.value=I,o.inCreateMode&&y(I)}finally{s(!1)}}return b(),t({nameRef:u}),(I,w)=>{const k=c("IFormInput"),x=c("IFormError"),$=c("IFormGroup"),C=c("ITextDisplay"),F=c("ITextDark"),T=c("IText"),S=c("IDropdownButton"),A=c("IDropdownItem"),E=c("IDropdownMenu"),B=c("IDropdown"),M=c("IOverlay");return g(),D(de,null,[l($,{"label-for":"name",label:I.$t("core::role.name"),required:""},{default:p(()=>[l(k,{id:"name",ref_key:"nameRef",ref:u,name:"name",type:"text","model-value":e.name,"onUpdate:modelValue":w[0]||(w[0]=N=>I.$emit("update:name",N))},null,8,["model-value"]),l(x,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(M,{class:"mt-5",show:v(i)},{default:p(()=>[te(_("div",null,[l(C,{class:"my-4",text:I.$t("core::role.permissions")},null,8,["text"]),(g(!0),D(de,null,Ie(d.value.grouped,(N,G)=>(g(),D("div",{key:G,class:"mb-4"},[l(F,{class:"mb-1 font-medium"},{default:p(()=>[ne(K(N.as),1)]),_:2},1024),(g(!0),D(de,null,Ie(N.views,U=>(g(),D("div",{key:U.group},[_("div",kbe,[l(T,null,{default:p(()=>[ne(K(U.as?U.as:U.single?U.permissions[U.keys[0]]:""),1)]),_:2},1024),l(B,{placement:"bottom-end"},{default:p(()=>[l(S,{text:m(U),basic:""},null,8,["text"]),l(E,null,{default:p(()=>[te(l(A,{text:I.$t("core::role.revoked"),condensed:"",onClick:j=>h(U)},null,8,["text","onClick"]),[[fe,U.revokeable]]),U.single?(g(),R(A,{key:0,text:I.$t("core::role.granted"),condensed:"",onClick:j=>f(U,U.keys[0])},null,8,["text","onClick"])):(g(!0),D(de,{key:1},Ie(U.permissions,(j,O)=>(g(),R(A,{key:O,disabled:e.permissions.indexOf(O)>-1,text:j,condensed:"",onClick:H=>f(U,O)},null,8,["disabled","text","onClick"]))),128))]),_:2},1024)]),_:2},1024)])]))),128))]))),128))],512),[[fe,d.value.all.length>0]])]),_:1},8,["show"])],64)}}},$be={__name:"RolesCreate",setup(e){const{t}=Pe(),n=V(null),o=wt(),{addRole:a}=ru(),{form:r}=Qe({name:"",permissions:[]});function s(){n.value.nameRef.focus()}function i(){r.post("/roles").then(u=>{a(u),Innoclapps.success(t("core::role.created")),o.back()})}return(u,d)=>{const m=c("ISlideover");return g(),R(m,{"ok-disabled":v(r).busy,"ok-text":u.$t("core::app.create"),title:u.$t("core::role.create"),visible:"",form:"",static:"",onSubmit:i,onHidden:u.$router.back,onShown:s},{default:p(()=>[l(Kk,{ref_key:"formRef",ref:n,name:v(r).name,"onUpdate:name":d[0]||(d[0]=f=>v(r).name=f),permissions:v(r).permissions,"onUpdate:permissions":d[1]||(d[1]=f=>v(r).permissions=f),form:v(r),"in-create-mode":""},null,8,["name","permissions","form"])]),_:1},8,["ok-disabled","ok-text","title","onHidden"])}}},Cbe={__name:"RolesEdit",setup(e){const{t}=Pe(),n=Ct(),o=wt(),{fetchRole:a,setRole:r}=ru(),s=V(!1),{form:i}=Qe({name:"",permissions:[]}),u=P(()=>t("core::role.edit")+" "+i.name);function d(){i.put(`/roles/${n.params.id}`).then(f=>{r(f.id,f),Innoclapps.success(t("core::role.updated")),o.back()})}async function m(f){const h=await a(f);i.set({name:h.name,permissions:h.permissions.map(y=>y.name)}),We(()=>s.value=!0)}return m(n.params.id),(f,h)=>{const y=c("FieldsPlaceholder"),b=c("ISlideover");return g(),R(b,{"ok-text":f.$t("core::app.save"),"ok-disabled":v(i).busy,title:u.value,visible:"",form:"",static:"",onSubmit:d,onHidden:f.$router.back},{default:p(()=>[s.value?(g(),R(Kk,{key:1,name:v(i).name,"onUpdate:name":h[0]||(h[0]=I=>v(i).name=I),permissions:v(i).permissions,"onUpdate:permissions":h[1]||(h[1]=I=>v(i).permissions=I),form:v(i)},null,8,["name","permissions","form"])):(g(),R(y,{key:0}))]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},Sbe={key:0,class:"px-6"},Tbe={__name:"RolesIndex",setup(e){const{t}=Pe(),{rolesByName:n,rolesAreBeingFetched:o,deleteRole:a}=ru(),r=P(()=>n.value.length>0);async function s(i){await a(i),Innoclapps.success(t("core::role.deleted"))}return(i,u)=>{const d=c("ICardHeading"),m=c("IButton"),f=c("ICardActions"),h=c("ICardHeader"),y=c("ITableHeader"),b=c("ITableRow"),I=c("ITableHead"),w=c("ITableCell"),k=c("ILink"),x=c("ITableRowAction"),$=c("ITableRowActions"),C=c("ITableBody"),F=c("ITable"),T=c("IEmptyState"),S=c("ICardBody"),A=c("ICard"),E=c("RouterView");return g(),D(de,null,[l(h,null,{default:p(()=>[l(d,{text:i.$t("core::role.roles")},null,8,["text"]),l(f,null,{default:p(()=>[te(l(m,{variant:"primary",icon:"PlusSolid",to:{name:"create-role"},text:i.$t("core::role.create")},null,8,["text"]),[[fe,r.value]])]),_:1})]),_:1}),l(A,{overlay:v(o)},{default:p(()=>[r.value?(g(),D("div",Sbe,[l(F,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(I,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(b,null,{default:p(()=>[l(y,{width:"5%"},{default:p(()=>[ne(K(i.$t("core::app.id")),1)]),_:1}),l(y,null,{default:p(()=>[ne(K(i.$t("core::role.name")),1)]),_:1}),l(y,{width:"8%"})]),_:1})]),_:1}),l(C,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(n),B=>(g(),R(b,{key:B.id},{default:p(()=>[l(w,null,{default:p(()=>[ne(K(B.id),1)]),_:2},1024),l(w,null,{default:p(()=>[l(k,{class:"font-medium",to:{name:"edit-role",params:{id:B.id}},text:B.name},null,8,["to","text"])]),_:2},1024),l(w,null,{default:p(()=>[l($,null,{default:p(()=>[l(x,{to:{name:"edit-role",params:{id:B.id}},text:i.$t("core::app.edit")},null,8,["to","text"]),l(x,{text:i.$t("core::app.delete"),onClick:M=>i.$confirm(()=>s(B.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):v(o)?Z("",!0):(g(),R(S,{key:1},{default:p(()=>[l(T,{to:{name:"create-role"},"button-text":i.$t("core::role.create"),title:i.$t("core::role.empty_state.title"),description:i.$t("core::role.empty_state.description")},null,8,["button-text","title","description"])]),_:1}))]),_:1},8,["overlay"]),l(E)],64)}}},Ebe={class:"mb-5 flex items-center justify-between"},Fbe={class:"flex items-center space-x-3"},Abe={__name:"UsersIndex",setup(e){const t=Innoclapps.resourceName("users"),n=fn(),{resetStoreState:o}=qe(),{reloadTable:a}=qo(t),{fetchTeams:r}=nu(),s=V(!1),i=V(null);function u(d){d.destroyable&&(d.ids.forEach(m=>n.commit("users/REMOVE",m)),i.value.refetchActions(),r())}return un(()=>{o()}),(d,m)=>{const f=c("ITextDisplay"),h=c("IButton"),y=c("ResourceTable"),b=c("RouterView");return g(),D(de,null,[_("div",Ebe,[l(f,{text:d.$t("users::user.users")},null,8,["text"]),_("div",Fbe,[l(h,{variant:"secondary",disabled:!s.value,to:{name:"invite-user"},text:d.$t("users::user.invite")},null,8,["disabled","text"]),l(h,{variant:"primary",icon:"PlusSolid",disabled:!s.value,to:{name:"create-user"},text:d.$t("users::user.create")},null,8,["disabled","text"])])]),l(y,{ref_key:"tableRef",ref:i,"resource-name":v(t),onLoaded:m[0]||(m[0]=I=>s.value=!0),onActionExecuted:u},null,8,["resource-name"]),l(b,{name:"createEdit",onCreated:v(a),onUpdated:v(a),onHidden:m[1]||(m[1]=I=>d.$router.push({name:"users-index"}))},null,8,["onCreated","onUpdated"]),l(b,{name:"invite"})],64)}}},Rbe={__name:"SettingsManageUsers",setup(e){const t=Ct(),n=wt(),o=V(0);function a(){o.value===0&&!["create-user","edit-user","invite-user"].includes(t.name)?n.push({name:"users-index"}):o.value===1&&!["create-role","edit-role"].includes(t.name)?n.push({name:"role-index"}):o.value===2&&n.push({name:"manage-teams"})}return Qc((r,s,i)=>{r.name==="users-index"&&(o.value=0),i()}),["role-index","create-role","edit-role"].includes(t.name)?o.value=1:t.name==="manage-teams"&&(o.value=2),(r,s)=>{const i=c("Icon"),u=c("ITab"),d=c("ITabList"),m=c("ITabPanel"),f=c("RouterView"),h=c("ITabPanels"),y=c("ITabGroup");return g(),R(y,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=b=>o.value=b)},{default:p(()=>[l(d,null,{default:p(()=>[l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"User"}),ne(" "+K(r.$t("users::user.users")),1)]),_:1}),l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"ShieldExclamation"}),ne(" "+K(r.$t("core::role.roles")),1)]),_:1}),l(u,{onActivated:a},{default:p(()=>[l(i,{icon:"UserGroup"}),ne(" "+K(r.$t("users::team.teams")),1)]),_:1})]),_:1}),l(h,null,{default:p(()=>[l(m,{lazy:""},{default:p(()=>[l(Abe)]),_:1}),l(m,null,{default:p(()=>[l(f,{name:"roles"})]),_:1}),l(m,null,{default:p(()=>[l(f,{name:"teams"})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Zk={__name:"UserFormFields",props:{inEditMode:Boolean,form:{required:!0,type:Object},name:{required:!0,type:String},email:{required:!0,type:String},roles:{required:!0,type:Array},password:{required:!0,type:String},passwordConfirmation:{required:!0,type:String},timezone:{required:!0,type:String},locale:{required:!0,type:String},dateFormat:{required:!0,type:String},timeFormat:{required:!0,type:String},notificationsSettings:{required:!0,type:Object},superAdmin:{required:!0,type:Boolean},accessApi:{required:!0,type:Boolean}},emits:["update:name","update:email","update:roles","update:password","update:passwordConfirmation","update:timezone","update:locale","update:dateFormat","update:timeFormat","update:notificationsSettings","update:superAdmin","update:accessApi"],setup(e,{emit:t}){const n=e,o=t,{currentUser:a}=qe(),{rolesNames:r}=ru(),s=P(()=>a.value.id===n.form.id);function i(u){u&&o("update:accessApi",!0)}return(u,d)=>{const m=c("ITab"),f=c("ITabList"),h=c("IFormInput"),y=c("IFormError"),b=c("IFormGroup"),I=c("ICustomSelect"),w=c("ITabPanel"),k=c("ITabPanels"),x=c("IFormSwitchLabel"),$=c("IFormSwitchDescription"),C=c("IFormSwitch"),F=c("IFormSwitchField"),T=c("ITabGroup");return g(),R(T,null,{default:p(()=>[l(f,{fill:""},{default:p(()=>[l(m,{title:u.$t("users::user.user")},null,8,["title"]),l(m,{title:u.$t("auth::auth.password")},null,8,["title"]),l(m,{title:u.$t("users::user.localization")},null,8,["title"]),l(m,{title:u.$t("core::notifications.notifications")},null,8,["title"]),l(m,{title:u.$t("core::app.advanced")},null,8,["title"])]),_:1}),l(k,null,{default:p(()=>[l(w,null,{default:p(()=>[l(b,{"label-for":"name",label:u.$t("users::user.name"),required:""},{default:p(()=>[l(h,{id:"name",ref:"name",type:"text",autocomplete:"off","model-value":e.name,"onUpdate:modelValue":d[0]||(d[0]=S=>u.$emit("update:name",S))},null,8,["model-value"]),l(y,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"email",label:u.$t("users::user.email"),required:""},{default:p(()=>[l(h,{id:"email",name:"email",type:"email",autocomplete:"off","model-value":e.email,"onUpdate:modelValue":d[1]||(d[1]=S=>u.$emit("update:email",S))},null,8,["model-value"]),l(y,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label"]),l(b,{"label-for":"roles",label:u.$t("core::role.roles")},{default:p(()=>[l(I,{"input-id":"roles","model-value":e.roles,placeholder:u.$t("users::user.roles"),options:v(r),multiple:!0,"onUpdate:modelValue":d[2]||(d[2]=S=>u.$emit("update:roles",S))},null,8,["model-value","placeholder","options"])]),_:1},8,["label"])]),_:1}),l(w,null,{default:p(()=>[l(b,{"label-for":"password",label:u.$t("auth::auth.password"),required:!e.inEditMode},{default:p(()=>[l(h,{id:"password",name:"password",type:"password",autocomplete:"new-password","model-value":e.password,"onUpdate:modelValue":d[3]||(d[3]=S=>u.$emit("update:password",S))},null,8,["model-value"]),l(y,{error:e.form.getError("password")},null,8,["error"])]),_:1},8,["label","required"]),l(b,{"label-for":"password_confirmation",label:u.$t("auth::auth.confirm_password"),required:!e.inEditMode||!!e.password},{default:p(()=>[l(h,{id:"password_confirmation",name:"password_confirmation",autocomplete:"new-password",type:"password","model-value":e.passwordConfirmation,"onUpdate:modelValue":d[4]||(d[4]=S=>u.$emit("update:passwordConfirmation",S))},null,8,["model-value"]),l(y,{error:e.form.getError("password_confirmation")},null,8,["error"])]),_:1},8,["label","required"]),l(jk)]),_:1}),l(w,null,{default:p(()=>[l(md,{form:e.form,"time-format":e.timeFormat,"date-format":e.dateFormat,locale:e.locale,timezone:e.timezone,"onUpdate:timeFormat":d[5]||(d[5]=S=>u.$emit("update:timeFormat",S)),"onUpdate:dateFormat":d[6]||(d[6]=S=>u.$emit("update:dateFormat",S)),"onUpdate:locale":d[7]||(d[7]=S=>u.$emit("update:locale",S)),"onUpdate:timezone":d[8]||(d[8]=S=>u.$emit("update:timezone",S))},null,8,["form","time-format","date-format","locale","timezone"])]),_:1})]),_:1}),l(w,null,{default:p(()=>[l(Gk,{class:"overflow-hidden rounded-lg","model-value":e.notificationsSettings,bordered:"","onUpdate:modelValue":d[9]||(d[9]=S=>u.$emit("update:notificationsSettings",S))},null,8,["model-value"])]),_:1}),l(w,null,{default:p(()=>[_("div",{class:be(["flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",e.form.super_admin?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(F,null,{default:p(()=>[l(x,{text:u.$t("users::user.super_admin")},null,8,["text"]),l($,{text:u.$t("users::user.as_super_admin_info")},null,8,["text"]),l(C,{"model-value":e.superAdmin,disabled:s.value,"onUpdate:modelValue":d[10]||(d[10]=S=>u.$emit("update:superAdmin",S)),onChange:i},null,8,["model-value","disabled"])]),_:1})],2),_("div",{class:be(["mt-3 flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",e.form.access_api?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(F,null,{default:p(()=>[l(x,{text:u.$t("users::user.enable_api")},null,8,["text"]),l($,{text:u.$t("users::user.allow_api_info")},null,8,["text"]),l(C,{"model-value":e.accessApi,disabled:s.value||e.form.super_admin,"onUpdate:modelValue":d[11]||(d[11]=S=>u.$emit("update:accessApi",S))},null,8,["model-value","disabled"])]),_:1})],2)]),_:1})]),_:1})}}},Dbe={__name:"UsersCreate",emits:["created","hidden"],setup(e,{emit:t}){const n=t,o=wt(),a=fn(),{t:r}=Pe(),{scriptConfig:s}=qe(),{guessTimezone:i}=it(),{form:u}=Qe({name:"",email:"",roles:[],password:"",password_confirmation:"",timezone:i(),locale:"en",date_format:s("date_format"),time_format:s("time_format"),notifications_settings:Nd(s("notifications_settings"),function(m,f){let h={};return f.channels.forEach(y=>h[y]=!0),m[f.key]=h,m},{}),super_admin:!1,access_api:!1,avatar:null});async function d(){try{let m=await u.post("/users");a.commit("users/ADD",m),n("created",m),Innoclapps.success(r("core::resource.created"))}catch(m){return m.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(m)}o.back()}return(m,f)=>{const h=c("ISlideover");return g(),R(h,{"ok-disabled":v(u).busy,"ok-loading":v(u).busy,"ok-text":m.$t("core::app.create"),title:m.$t("users::user.create"),form:"",visible:"",static:"",onHidden:f[12]||(f[12]=y=>m.$emit("hidden")),onShown:f[13]||(f[13]=()=>m.$refs.formRef.$refs.name.focus()),onSubmit:d},{default:p(()=>[l(Zk,{ref:"formRef",name:v(u).name,"onUpdate:name":f[0]||(f[0]=y=>v(u).name=y),email:v(u).email,"onUpdate:email":f[1]||(f[1]=y=>v(u).email=y),roles:v(u).roles,"onUpdate:roles":f[2]||(f[2]=y=>v(u).roles=y),password:v(u).password,"onUpdate:password":f[3]||(f[3]=y=>v(u).password=y),"password-confirmation":v(u).password_confirmation,"onUpdate:passwordConfirmation":f[4]||(f[4]=y=>v(u).password_confirmation=y),timezone:v(u).timezone,"onUpdate:timezone":f[5]||(f[5]=y=>v(u).timezone=y),locale:v(u).locale,"onUpdate:locale":f[6]||(f[6]=y=>v(u).locale=y),"date-format":v(u).date_format,"onUpdate:dateFormat":f[7]||(f[7]=y=>v(u).date_format=y),"time-format":v(u).time_format,"onUpdate:timeFormat":f[8]||(f[8]=y=>v(u).time_format=y),"notifications-settings":v(u).notifications_settings,"onUpdate:notificationsSettings":f[9]||(f[9]=y=>v(u).notifications_settings=y),"super-admin":v(u).super_admin,"onUpdate:superAdmin":f[10]||(f[10]=y=>v(u).super_admin=y),"access-api":v(u).access_api,"onUpdate:accessApi":f[11]||(f[11]=y=>v(u).access_api=y),form:v(u)},null,8,["name","email","roles","password","password-confirmation","timezone","locale","date-format","time-format","notifications-settings","super-admin","access-api","form"])]),_:1},8,["ok-disabled","ok-loading","ok-text","title"])}}},Obe={__name:"UsersEdit",emits:["updated","hidden"],setup(e,{emit:t}){const n=t,{t:o}=Pe(),a=wt(),r=Ct(),s=fn(),{currentUser:i}=qe(),{form:u}=Qe(),d=V(!1),m=V(null);async function f(){try{const y=await u.put(`/users/${r.params.id}`);s.commit("users/UPDATE",{id:y.id,item:y}),Innoclapps.success(o("core::resource.updated")),y.locale!==m.value&&y.id==i.value.id?window.location.reload(!0):(n("updated",y),a.back())}catch(y){return y.isValidationError()&&Innoclapps.error(o("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(y)}}function h(){Innoclapps.request(`/users/${r.params.id}`).then(({data:y})=>{m.value=y.locale,u.set({name:y.name,email:y.email,roles:y.roles.map(b=>b.name),password:"",password_confirmation:"",timezone:y.timezone,locale:y.locale,date_format:y.date_format,time_format:y.time_format,notifications_settings:Nd(y.notifications.settings,function(b,I){return b[I.key]=I.availability,b},{}),super_admin:y.super_admin,access_api:y.access_api}),d.value=!0})}return h(),(y,b)=>{const I=c("FieldsPlaceholder"),w=c("ISlideover");return g(),R(w,{"ok-text":y.$t("core::app.save"),"ok-disabled":v(u).busy,"ok-loading":v(u).busy,title:y.$t("users::user.edit"),form:"",visible:"",static:"",onHidden:b[12]||(b[12]=k=>y.$emit("hidden")),onSubmit:f},{default:p(()=>[d.value?Z("",!0):(g(),R(I,{key:0})),d.value?(g(),R(Zk,{key:1,name:v(u).name,"onUpdate:name":b[0]||(b[0]=k=>v(u).name=k),email:v(u).email,"onUpdate:email":b[1]||(b[1]=k=>v(u).email=k),roles:v(u).roles,"onUpdate:roles":b[2]||(b[2]=k=>v(u).roles=k),password:v(u).password,"onUpdate:password":b[3]||(b[3]=k=>v(u).password=k),"password-confirmation":v(u).password_confirmation,"onUpdate:passwordConfirmation":b[4]||(b[4]=k=>v(u).password_confirmation=k),timezone:v(u).timezone,"onUpdate:timezone":b[5]||(b[5]=k=>v(u).timezone=k),locale:v(u).locale,"onUpdate:locale":b[6]||(b[6]=k=>v(u).locale=k),"date-format":v(u).date_format,"onUpdate:dateFormat":b[7]||(b[7]=k=>v(u).date_format=k),"time-format":v(u).time_format,"onUpdate:timeFormat":b[8]||(b[8]=k=>v(u).time_format=k),"notifications-settings":v(u).notifications_settings,"onUpdate:notificationsSettings":b[9]||(b[9]=k=>v(u).notifications_settings=k),"super-admin":v(u).super_admin,"onUpdate:superAdmin":b[10]||(b[10]=k=>v(u).super_admin=k),"access-api":v(u).access_api,"onUpdate:accessApi":b[11]||(b[11]=k=>v(u).access_api=k),form:v(u),"in-edit-mode":""},null,8,["name","email","roles","password","password-confirmation","timezone","locale","date-format","time-format","notifications-settings","super-admin","access-api","form"])):Z("",!0)]),_:1},8,["ok-text","ok-disabled","ok-loading","title"])}}},Pbe={class:"mb-3 flex"},Mbe={__name:"UsersInvite",setup(e){const{t}=Pe(),n=wt(),o=V([]),{rolesNames:a}=ru(),{isMailerConfiguredToSendEmails:r}=qe(),{teamsByName:s}=nu(),{form:i}=Qe({emails:[""],access_api:!1,super_admin:!1,roles:[]}),u=P(()=>i.emails.length);function d(){i.emails.push(""),We(()=>{o.value[u.value-1].focus()})}function m(b){i.emails.splice(b,1),We(()=>{i.emails[u.value-1]===""&&o.value[u.value-1].focus()})}function f(){We(()=>{o.value[0].focus()})}function h(b){b&&(i.access_api=!0)}function y(){i.post("/users/invite").then(()=>{Innoclapps.success(t("users::user.invited")),n.back()})}return(b,I)=>{const w=c("IAlertHeading"),k=c("IAlertBody"),x=c("IButton"),$=c("IAlertActions"),C=c("IAlert"),F=c("IText"),T=c("IFormLabel"),S=c("IFormInput"),A=c("IFormError"),E=c("ICustomSelect"),B=c("IFormGroup"),M=c("IFormSwitchLabel"),N=c("IFormSwitchDescription"),G=c("IFormSwitch"),U=c("IFormSwitchField"),j=c("IModal"),O=ze("i-tooltip");return g(),R(j,{size:"sm","ok-text":b.$t("users::user.send_invitation"),"ok-disabled":v(i).busy,title:b.$t("users::user.invite"),form:"",static:"",visible:"",onSubmit:y,onHidden:b.$router.back,onShown:f},{default:p(()=>[v(r)()?Z("",!0):(g(),R(C,{key:0,variant:"warning",class:"mb-6"},{default:p(()=>[l(w,null,{default:p(()=>[ne(K(b.$t("core::app.action_required")),1)]),_:1}),l(k,null,{default:p(()=>[ne(K(b.$t("core::mail_template.email_account_not_configured")),1)]),_:1}),l($,null,{default:p(()=>[l(x,{variant:"warning",to:{name:"settings-general"},text:b.$t("core::settings.go_to_settings"),soft:""},null,8,["text"])]),_:1})]),_:1})),l(F,null,{default:p(()=>[ne(K(b.$t("users::user.invitation_expires_after_info",{total:b.$scriptConfig("invitation.expires_after")})),1)]),_:1}),I[4]||(I[4]=_("div",{class:"mb-4 border-b border-neutral-200 pt-4 dark:border-neutral-500/30"},null,-1)),_("div",Pbe,[l(T,{class:"grow text-neutral-900 dark:text-neutral-100",for:"email0",label:b.$t("users::user.email"),required:""},null,8,["label"]),te(l(x,{icon:"PlusSolid",basic:"",small:"",onClick:d},null,512),[[O,b.$t("core::app.add_another")]])]),(g(!0),D(de,null,Ie(v(i).emails,(H,W)=>(g(),D("div",{key:W,class:"relative mb-3"},[l(S,{id:"email"+W,ref_for:!0,ref_key:"emailsRef",ref:o,modelValue:v(i).emails[W],"onUpdate:modelValue":X=>v(i).emails[W]=X,type:"email",placeholder:b.$t("users::user.email"),onKeydown:mo(ot(d,["prevent"]),["enter"])},null,8,["id","modelValue","onUpdate:modelValue","placeholder","onKeydown"]),te(l(x,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:X=>m(W)},null,8,["onClick"]),[[fe,W>0]]),l(A,{error:v(i).getError("emails."+W)},null,8,["error"])]))),128)),l(B,{"label-for":"roles",class:"mt-3",label:b.$t("core::role.roles")},{default:p(()=>[l(E,{modelValue:v(i).roles,"onUpdate:modelValue":I[0]||(I[0]=H=>v(i).roles=H),"input-id":"roles",label:"name",placeholder:b.$t("users::user.roles"),options:v(a),multiple:!0},null,8,["modelValue","placeholder","options"])]),_:1},8,["label"]),l(B,{"label-for":"teams",label:b.$t("users::team.teams")},{default:p(()=>[l(E,{modelValue:v(i).teams,"onUpdate:modelValue":I[1]||(I[1]=H=>v(i).teams=H),"input-id":"teams",label:"name",placeholder:b.$t("users::team.teams"),options:v(s),reduce:H=>H.id,multiple:!0},null,8,["modelValue","placeholder","options","reduce"])]),_:1},8,["label"]),_("div",{class:be(["flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",v(i).super_admin?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(U,null,{default:p(()=>[l(M,{text:b.$t("users::user.super_admin")},null,8,["text"]),l(N,{text:b.$t("users::user.as_super_admin_info")},null,8,["text"]),l(G,{modelValue:v(i).super_admin,"onUpdate:modelValue":I[2]||(I[2]=H=>v(i).super_admin=H),onChange:h},null,8,["modelValue"])]),_:1})],2),_("div",{class:be(["mt-3 flex items-center rounded-lg border-2 px-5 py-4 shadow-sm",v(i).access_api?"border-primary-400":"border-neutral-200 dark:border-neutral-500/30"])},[l(U,null,{default:p(()=>[l(M,{text:b.$t("users::user.enable_api")},null,8,["text"]),l(N,{text:b.$t("users::user.allow_api_info")},null,8,["text"]),l(G,{modelValue:v(i).access_api,"onUpdate:modelValue":I[3]||(I[3]=H=>v(i).access_api=H),disabled:v(i).super_admin},null,8,["modelValue","disabled"])]),_:1})],2)]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},Bbe={key:0,role:"list",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},Nbe={class:"flex items-center px-4 py-4 sm:px-6"},Vbe={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},Lbe={class:"truncate"},qbe={class:"flex items-center text-base/6 sm:text-sm/6"},Ube=["textContent"],jbe=["datetime"],zbe={class:"mt-4 shrink-0 sm:ml-5 sm:mt-0"},Hbe={class:"flex -space-x-1 overflow-hidden"},Wbe={class:"ml-5 shrink-0"},Gbe={class:"px-4 py-4 sm:px-6"},Kbe={__name:"UsersManageTeams",setup(e){const{users:t}=qe(),{localizedDateTime:n}=it(),{teamsByName:o,teamsAreBeingFetched:a,addTeam:r,deleteTeam:s,setTeam:i}=nu(),u=nv(),d=V(!1),m=V(null),f=V(!1),h=V({}),{form:y}=Qe({name:null,description:null,user_id:null,members:[]},{resetOnSuccess:!0}),{form:b}=Qe({name:null,description:null,user_id:null,members:[]},{resetOnSuccess:!0}),I=P(()=>o.value.length>0);function w(){y.post("/teams").then(C=>{r(C),d.value=!1,f.value=!0})}function k(){b.put(`/teams/${m.value.id}`).then(C=>{i(C.id,C),m.value=null,f.value=!0})}async function x(C){await s(C),f.value=!0}function $(C){m.value=C,b.fill("name",C.name),b.fill("user_id",C.user_id),b.fill("members",C.members.map(F=>F.id)),b.fill("description",C.description)}return La(()=>{f.value&&u()}),(C,F)=>{var re;const T=c("ICardHeading"),S=c("IButton"),A=c("ICardActions"),E=c("ICardHeader"),B=c("ILink"),M=c("Icon"),N=c("ITextBlock"),G=c("IAvatar"),U=c("ITextDark"),j=c("IText"),O=c("IEmptyState"),H=c("ICardBody"),W=c("ICard"),X=c("IFormInput"),q=c("IFormError"),L=c("IFormGroup"),ee=c("ICustomSelect"),ce=c("IFormTextarea"),ue=c("IModal"),oe=ze("i-tooltip");return g(),D(de,null,[l(E,null,{default:p(()=>[l(T,{text:C.$t("users::team.teams")},null,8,["text"]),l(A,null,{default:p(()=>[te(l(S,{variant:"primary",icon:"PlusSolid",text:C.$t("users::team.add"),onClick:F[0]||(F[0]=Y=>d.value=!0)},null,8,["text"]),[[fe,I.value]])]),_:1})]),_:1}),l(W,{overlay:v(a)},{default:p(()=>[I.value?(g(),D("ul",Bbe,[(g(!0),D(de,null,Ie(v(o),Y=>(g(),D("li",{key:Y.id},[l(B,{class:"group block hover:bg-neutral-50 dark:hover:bg-neutral-800/60",plain:"",onClick:ae=>h.value[Y.id]=!h.value[Y.id]},{default:p(()=>[_("div",Nbe,[_("div",Vbe,[_("div",Lbe,[_("div",qbe,[_("p",{class:"truncate font-medium text-primary-600 dark:text-primary-100",textContent:K(Y.name)},null,8,Ube),l(B,{class:"ml-2 md:hidden md:group-hover:block",text:C.$t("core::app.edit"),onClick:ot(ae=>$(Y),["stop"])},null,8,["text","onClick"]),l(B,{class:"ml-2 md:hidden md:group-hover:block",variant:"danger",text:C.$t("core::app.delete"),onClick:ot(ae=>C.$confirm(()=>x(Y.id)),["stop"])},null,8,["text","onClick"])]),l(N,{class:"mt-2 flex items-center space-x-1.5"},{default:p(()=>[l(M,{icon:"Calendar",class:"size-5 shrink-0"}),_("p",null,[ne(K(C.$t("core::app.created_at"))+" "+K(" ")+" ",1),_("time",{datetime:Y.created_at},K(v(n)(Y.created_at)),9,jbe)])]),_:2},1024)]),_("div",zbe,[_("div",Hbe,[(g(!0),D(de,null,Ie(Y.members,ae=>te((g(),R(G,{key:ae.email,class:"ring-2 ring-white dark:ring-neutral-900",alt:ae.name,src:ae.avatar_url},null,8,["alt","src"])),[[oe,ae.name]])),128))])])]),_("div",Wbe,[l(M,{icon:"ChevronRight",class:"size-5 text-neutral-400 sm:size-4"})])])]),_:2},1032,["onClick"]),te(_("div",Gbe,[l(U,{class:"mb-1 font-medium",text:C.$t("users::team.manager")},null,8,["text"]),l(j,{class:"mb-3",text:Y.manager.name},null,8,["text"]),l(U,{class:"mb-1 font-medium",text:C.$t("users::team.members")},null,8,["text"]),(g(!0),D(de,null,Ie(Y.members,ae=>(g(),D("div",{key:"info-"+ae.email,class:"mb-1 flex items-center space-x-1.5 last:mb-0"},[l(G,{alt:ae.name,src:ae.avatar_url},null,8,["alt","src"]),l(j,{text:ae.name},null,8,["text"])]))),128)),te(l(U,{class:"mb-1 mt-3 font-medium",text:C.$t("users::team.description")},null,8,["text"]),[[fe,Y.description]]),l(j,{text:Y.description},null,8,["text"])],512),[[fe,h.value[Y.id]]])]))),128))])):v(a)?Z("",!0):(g(),R(H,{key:1},{default:p(()=>[l(O,{"button-text":C.$t("users::team.add"),title:C.$t("users::team.empty_state.title"),description:C.$t("users::team.empty_state.description"),onClick:F[1]||(F[1]=Y=>d.value=!0)},null,8,["button-text","title","description"])]),_:1}))]),_:1},8,["overlay"]),l(ue,{title:C.$t("users::team.create"),visible:d.value,"ok-text":C.$t("core::app.create"),"ok-disabled":v(y).busy,form:"",onHidden:F[6]||(F[6]=Y=>d.value=!1),onSubmit:w,onShown:F[7]||(F[7]=()=>C.$refs.nameInputCreateRef.focus())},{default:p(()=>[l(L,{"label-for":"nameInputCreate",label:C.$t("users::team.name"),required:""},{default:p(()=>[l(X,{id:"nameInputCreate",ref:"nameInputCreateRef",modelValue:v(y).name,"onUpdate:modelValue":F[2]||(F[2]=Y=>v(y).name=Y)},null,8,["modelValue"]),l(q,{error:v(y).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(L,{"label-for":"user_id",label:C.$t("users::team.manager"),required:""},{default:p(()=>[l(ee,{modelValue:v(y).user_id,"onUpdate:modelValue":F[3]||(F[3]=Y=>v(y).user_id=Y),label:"name","input-id":"user_id",options:v(t),clearable:!1,reduce:Y=>Y.id},null,8,["modelValue","options","reduce"]),l(q,{error:v(y).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(L,{"label-for":"membersInputCreate",label:C.$t("users::team.members")},{default:p(()=>[l(ee,{modelValue:v(y).members,"onUpdate:modelValue":F[4]||(F[4]=Y=>v(y).members=Y),"input-id":"membersInputCreate",label:"name",options:v(t),reduce:Y=>Y.id,multiple:""},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(L,{"label-for":"descriptionInputCreate",label:C.$t("users::team.description")},{default:p(()=>[l(ce,{id:"descriptionInputCreate",modelValue:v(y).description,"onUpdate:modelValue":F[5]||(F[5]=Y=>v(y).description=Y)},null,8,["modelValue"]),l(q,{error:v(y).getError("description")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["title","visible","ok-text","ok-disabled"]),l(ue,{visible:m.value!==null,"ok-text":C.$t("core::app.save"),"ok-disabled":v(b).busy,title:C.$t("users::team.edit"),"sub-title":(re=m.value)==null?void 0:re.name,form:"",onHidden:F[12]||(F[12]=Y=>{m.value=null,v(b).reset()}),onSubmit:k},{default:p(()=>[l(L,{"label-for":"nameInputEdit",label:C.$t("users::team.name"),required:""},{default:p(()=>[l(X,{id:"nameInputEdit",ref:"nameInputEdit",modelValue:v(b).name,"onUpdate:modelValue":F[8]||(F[8]=Y=>v(b).name=Y)},null,8,["modelValue"]),l(q,{error:v(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(L,{"label-for":"user_id",label:C.$t("users::team.manager"),required:""},{default:p(()=>[l(ee,{modelValue:v(b).user_id,"onUpdate:modelValue":F[9]||(F[9]=Y=>v(b).user_id=Y),label:"name","input-id":"user_id",options:v(t),clearable:!1,reduce:Y=>Y.id},null,8,["modelValue","options","reduce"]),l(q,{error:v(b).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(L,{"label-for":"membersInputEdit",label:C.$t("users::team.members")},{default:p(()=>[l(ee,{modelValue:v(b).members,"onUpdate:modelValue":F[10]||(F[10]=Y=>v(b).members=Y),"input-id":"membersInputEdit",label:"name",options:v(t),reduce:Y=>Y.id,multiple:""},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(L,{"label-for":"descriptionInputEdit",label:C.$t("users::team.description")},{default:p(()=>[l(ce,{id:"descriptionInputEdit",modelValue:v(b).description,"onUpdate:modelValue":F[11]||(F[11]=Y=>v(b).description=Y)},null,8,["modelValue"]),l(q,{error:v(b).getError("description")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["visible","ok-text","ok-disabled","title","sub-title"])],64)}}},Zbe=[{path:"users",component:Rbe,name:"users-index",meta:{title:rt("users::user.users"),superAdmin:!0},children:[{path:"create",name:"create-user",components:{createEdit:Dbe},meta:{title:rt("users::user.create")}},{path:":id/edit",name:"edit-user",components:{createEdit:Obe},meta:{title:rt("users::user.edit")}},{path:"invite",name:"invite-user",components:{invite:Mbe},meta:{title:rt("users::user.invite")}},{path:"roles",name:"role-index",components:{roles:Tbe},meta:{title:rt("core::role.roles")},children:[{path:"create",name:"create-role",component:$be,meta:{title:rt("core::role.create")}},{path:":id/edit",name:"edit-role",component:Cbe,meta:{title:rt("core::role.edit")}}]},{path:"teams",name:"manage-teams",components:{teams:Kbe},meta:{title:rt("users::team.teams")}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t,n){const o=this.scriptConfig("users")||[],a=this.scriptConfig("user_id");e.component("UserInvitationAcceptForm",lge),n.registerModule("users",cge),n.commit("users/SET",o),e.use(rge,n.getters["users/current"]),t.beforeEach((r,s,i)=>{const u=r.matched.find(d=>d.meta.superAdmin);u&&u.meta.superAdmin===!0&&!n.getters["users/current"].super_admin?i({path:"/403"}):i()}),a&&oge(a,r=>{this.request(`/notifications/${r.id}`).then(({data:s})=>Ot("new-notification",s))}),Zbe.forEach(r=>t.addRoute("settings",r)),t.addRoute({path:"/profile",name:"profile",component:xbe,meta:{title:rt("users::profile.profile")}}),t.addRoute({path:"/personal-access-tokens",name:"personal-access-tokens",component:vge,meta:{title:rt("core::api.personal_access_tokens")}})});function Ca(e,t){const n=fn(),o=P(()=>n.state.comments.requestInProgress),a=P({set(d){n.commit("comments/SET_LOADED",{commentableId:bt(e),commentableType:t,value:d})},get(){return n.getters["comments/areLoadedFor"](bt(e),t)}}),r=P({set(d){n.commit("comments/SET_VISIBILITY",{commentableId:bt(e),commentableType:t,visible:d})},get(){return n.getters["comments/areVisibleFor"](bt(e),t)}}),s=P({set(d){n.commit("comments/SET_ADD_COMMENT_VISIBILITY",{commentableId:bt(e),commentableType:t,value:d})},get(){return n.getters["comments/isCommentBeingCreatedFor"](bt(e),t)}});function i(){r.value=!r.value}function u(d,m){return n.dispatch("comments/getAll",{resourceName:t,resourceId:bt(e),viaResource:d,viaResourceId:m})}return{requestInProgress:o,commengIsBeingCreated:s,commentsAreLoaded:a,commentsAreVisible:r,getAllComments:u,toggleCommentsVisibility:i}}const Ybe=["v-tooltip-placement"],Vd={__name:"ActivityStateChange",props:{activityId:{required:!0,type:Number},isCompleted:{required:!0,type:Boolean},tooltipPlacement:{type:String,default:"top"},disabled:Boolean},emits:["changed"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{updateResource:r,resourceBeingUpdated:s}=qt(Innoclapps.resourceName("activities")),i=P(()=>{let m=["inline-block mr-0.5 focus:outline-none"];return n.isCompleted?m.push("text-success-500 hover:text-neutral-500 dark:text-success-400 dark:hover:text-neutral-300"):m.push("text-neutral-500 hover:text-success-600 dark:text-neutral-300 dark:hover:text-success-400"),(n.disabled||s.value)&&m.push("pointer-events-none opacity-60"),m}),u=P(()=>n.disabled?a("users::user.not_authorized"):n.isCompleted?a("activities::activity.mark_as_incomplete"):a("activities::activity.mark_as_completed"));function d(){r({is_completed:!n.isCompleted},n.activityId).then(m=>o("changed",m))}return(m,f)=>{const h=c("ISpinner"),y=c("Icon"),b=c("ILink"),I=ze("i-tooltip");return te((g(),D("span",{class:"inline-block","v-tooltip-placement":e.tooltipPlacement},[l(b,{class:be(i.value),plain:"",onClick:d},{default:p(()=>[v(s)?(g(),R(h,{key:0,class:be(["size-4",e.isCompleted?"text-neutral-500 dark:text-neutral-300":"text-success-500 dark:text-success-400"])},null,8,["class"])):(g(),D("span",{key:1,class:be(["flex size-4 items-center justify-center rounded-full border",e.isCompleted?"border-success-300 dark:border-success-400":"border-neutral-300 dark:border-neutral-600"])},[e.isCompleted?(g(),R(y,{key:0,icon:"Check"})):Z("",!0)],2))]),_:1},8,["class"])],8,Ybe)),[[I,u.value]])}}},Xbe={key:0,class:"flex items-center"},Qbe={key:0,class:"absolute -top-3 right-5 sm:top-2"},Jbe={key:2,class:"mt-10 sm:mt-0"},e1e={class:"mt-5"},t1e={class:"my-3 text-right"},Yk={__name:"EditActivityModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},isReady:{required:!0,type:Boolean},updateUsing:{required:!0,type:Function}},emits:["actionExecuted"],setup(e){const t=e,n=Innoclapps.resourceName("activities"),{t:o}=Pe(),a=Ct(),{form:r}=Qe(),{localizedDateTime:s}=it(),i=V(!1),u=V(!1),d=V(!1),m=V(a.query.comment_id?1:0),f=P(()=>t.resource.id),h=P(()=>f.value||[]),y=P(()=>t.resource.actions||[]),b=P(()=>t.isReady?`${o("core::app.created_at")}: ${s(t.resource.created_at)} - ${t.resource.creator.name}`:""),I=Le("synchronizeResourceSilently"),w=Le("synchronizeResource"),k=Le("hydrateFields"),x=Le("incrementResourceCount"),$=Le("decrementResourceCount"),{getAllComments:C,commentsAreLoaded:F}=Ca(f,n);async function T(){I({comments:await C()}),F.value=!0}function S(A,E){w({[A]:E}),k({[A]:E}),r[A].push(E.id)}return(A,E)=>{var Y;const B=c("FieldsPlaceholder"),M=c("ITab"),N=c("ITabList"),G=c("ILink"),U=c("FormFields"),j=c("IText"),O=c("ITextDisplay"),H=c("ITabPanel"),W=c("CommentsAdd"),X=c("CommentsList"),q=c("IOverlay"),L=c("ITabPanels"),ee=c("ITabGroup"),ce=c("CreateDealModal"),ue=c("CreateContactModal"),oe=c("CreateCompanyModal"),re=c("ISlideover");return g(),R(re,{id:"editActivityModal","ok-disabled":v(r).busy||!((Y=e.resource.authorizations)!=null&&Y.update),"ok-text":A.$t("core::app.save"),"hide-footer":m.value===1,title:e.resource.title,"sub-title":b.value,visible:"",form:"",static:"",onSubmit:E[21]||(E[21]=ae=>e.updateUsing(v(r)))},{title:p(({title:ae})=>[e.isReady?(g(),D("div",Xbe,[l(Vd,{class:"mr-1 mt-0.5 self-start","tooltip-placement":"bottom","is-completed":e.resource.is_completed,disabled:!e.resource.authorizations.update,"activity-id":f.value,onChanged:E[0]||(E[0]=se=>v(w)(se,!0))},null,8,["is-completed","disabled","activity-id"]),_("span",null,K(ae),1)])):Z("",!0)]),default:p(()=>[e.isReady?(g(),D("div",Qbe,[l(xs,{type:"dropdown",ids:h.value,actions:y.value,"resource-name":v(n),onActionExecuted:E[1]||(E[1]=ae=>A.$emit("actionExecuted",ae))},null,8,["ids","actions","resource-name"])])):Z("",!0),e.isReady?(g(),D("div",Jbe,[l(ee,{modelValue:m.value,"onUpdate:modelValue":E[12]||(E[12]=ae=>m.value=ae)},{default:p(()=>[l(N,null,{default:p(()=>[l(M,{title:A.$t("activities::activity.activity")},null,8,["title"]),l(M,{title:A.$t("comments::comment.comments")+" ("+e.resource.comments_count+")",onActivatedOnce:T},null,8,["title"])]),_:1}),l(L,null,{default:p(()=>[l(H,null,{default:p(()=>[l(U,{fields:e.fields,form:v(r),"resource-id":f.value,"resource-name":v(n),onUpdateFieldValue:E[5]||(E[5]=ae=>v(r).fill(ae.attribute,ae.value)),onSetInitialValue:E[6]||(E[6]=ae=>v(r).set(ae.attribute,ae.value))},{"after-deals-field":p(()=>[l(G,{class:"-mt-1 block text-right",onClick:E[2]||(E[2]=ae=>i.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(G,{class:"-mt-1 block text-right",onClick:E[3]||(E[3]=ae=>d.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("contacts::company.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(G,{class:"-mt-1 block text-right",onClick:E[4]||(E[4]=ae=>u.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("contacts::contact.create")),1)]),_:1})]),_:1},8,["fields","form","resource-id","resource-name"]),_("div",e1e,[l(O,null,{default:p(()=>[ne(K(A.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),R(j,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):Z("",!0)]),_:1}),l(Is,{"resource-name":v(n),"resource-id":f.value,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,onDeleted:E[7]||(E[7]=ae=>v(w)({media:{id:ae.id,_delete:!0}})),onUploaded:E[8]||(E[8]=ae=>v(w)({media:[ae]}))},null,8,["resource-name","resource-id","media","authorize-delete"])])]),_:1}),l(H,{lazy:""},{default:p(()=>[_("div",t1e,[l(W,{"commentable-type":"activities","commentable-id":f.value,onCreated:E[9]||(E[9]=ae=>(v(x)("comments_count"),v(I)({comments:[ae]})))},null,8,["commentable-id"])]),l(q,{show:!v(F)},{default:p(()=>[v(F)?(g(),R(X,{key:0,"commentable-type":"activities",comments:e.resource.comments||[],"commentable-id":f.value,"auto-focus-if-required":!0,onUpdated:E[10]||(E[10]=ae=>v(I)({comments:ae})),onDeleted:E[11]||(E[11]=ae=>(v($)("comments_count"),v(I)({comments:{id:ae,_delete:!0}})))},null,8,["comments","commentable-id"])):Z("",!0)]),_:1},8,["show"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(g(),R(B,{key:1})),l(ce,{visible:i.value,"onUpdate:visible":E[13]||(E[13]=ae=>i.value=ae),overlay:!1,onCreated:E[14]||(E[14]=ae=>(S("deals",ae.deal),i.value=!1))},null,8,["visible"]),l(ue,{visible:u.value,"onUpdate:visible":E[15]||(E[15]=ae=>u.value=ae),overlay:!1,onCreated:E[16]||(E[16]=ae=>(S("contacts",ae.contact),u.value=!1)),onRestored:E[17]||(E[17]=ae=>(S("contacts",ae),u.value=!1))},null,8,["visible"]),l(oe,{visible:d.value,"onUpdate:visible":E[18]||(E[18]=ae=>d.value=ae),overlay:!1,onCreated:E[19]||(E[19]=ae=>(S("companies",ae.company),d.value=!1)),onRestored:E[20]||(E[20]=ae=>(S("companies",ae),d.value=!1))},null,8,["visible"])]),_:1},8,["ok-disabled","ok-text","hide-footer","title","sub-title"])}}},n1e={__name:"ActivityFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},setup(e){const t=Le("synchronizeResource"),n=Le("synchronizeAndEmitUpdatedEvent");return st("synchronizeResourceSilently",t),st("synchronizeResource",n),(o,a)=>(g(),R(Yk,{"update-using":e.updateHandler,"is-ready":e.floatingReady,fields:e.fields,resource:e.resource},null,8,["update-using","is-ready","fields","resource"]))}},o1e={__name:"CreateActivityModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,withExtendedSubmitButtons:Boolean,title:String,note:{},description:{},activityTypeId:{},contacts:{},companies:{},deals:{},dueDate:{},endDate:{},reminderMinutesBefore:{}},emits:["created","update:visible"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("activities"),{t:r}=Pe(),s=wt(),{fields:i,hasFields:u,findField:d,getCreateFields:m}=In(),{form:f}=Qe(),{createResource:h}=qt(a),y=V(!1),b=V(!1),I=V(!1);qa(()=>n.visible,S,{immediate:!0});function w(A,E){d(A).options.push(E),f[A].push(E.id)}function k(){C().then(T)}function x(){C("create-another").then(A=>{f.reset(),T(A)})}function $(){C("go-to-list").then(T)}async function C(A=null){try{let B={activity:await h(f),isRegularAction:A===null,action:A};return o("created",B),Innoclapps.success(r("activities::activity.created")),B}catch(E){return E.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(E)}}function F(){i.value=[]}function T(A){if(A.indexRoute={name:"activity-index"},A.action==="go-to-list")return s.push(A.indexRoute);if(A.action!=="create-another"&&n.redirectToView){let E=A.activity;s.activity=E,s.push({name:"view-activity",params:{id:E.id}})}}async function S(){const A=await m(a),E=M=>A.some(N=>N.attribute===M),B=M=>Mt(A,["attribute",M]);if(E("contacts")&&E("companies")){let M=B("contacts"),N=B("companies");const{lazyLoad:G}=A[M],{lazyLoad:U}=A[N];A[N].lazyLoad=P(()=>f.contacts.length?f.contacts.map(j=>({url:`/contacts/${j}/companies`})):U),A[M].lazyLoad=P(()=>f.companies.length?f.companies.map(j=>({url:`/companies/${j}/contacts`})):G)}i.value=Fn(A,M=>(["contacts","companies","deals","title","note","description"].indexOf(M.attribute)>-1?M.value=n[M.attribute]:M.attribute==="activity_type_id"&&n.activityTypeId?M.value=n.activityTypeId:M.attribute==="due_date"&&n.dueDate?M.value=n.dueDate:M.attribute==="end_date"&&n.endDate?M.value=n.endDate:M.attribute==="reminder_minutes_before"&&n.reminderMinutesBefore&&(M.value=n.reminderMinutesBefore),M))}return(A,E)=>{const B=c("FieldsPlaceholder"),M=c("ILink"),N=c("FormFields"),G=c("IDropdownItem"),U=c("IDropdownMenu"),j=c("IExtendedDropdown"),O=c("CreateDealModal"),H=c("CreateContactModal"),W=c("CreateCompanyModal"),X=c("ISlideover");return g(),R(X,{id:"createActivityModal",visible:e.visible,title:e.title||A.$t("activities::activity.create"),"ok-text":A.$t("core::app.create"),"ok-disabled":v(f).busy,static:"",form:"",onHidden:F,"onUpdate:visible":E[13]||(E[13]=q=>A.$emit("update:visible",q)),onSubmit:k},gn({default:p(()=>[v(u)?Z("",!0):(g(),R(B,{key:0})),l(N,{fields:v(i),form:v(f),"resource-name":v(a),"is-floating":"","focus-first":"",onUpdateFieldValue:E[3]||(E[3]=q=>v(f).fill(q.attribute,q.value)),onSetInitialValue:E[4]||(E[4]=q=>v(f).set(q.attribute,q.value))},{"after-deals-field":p(()=>[l(M,{class:"-mt-1 block text-right",onClick:E[0]||(E[0]=q=>y.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(M,{class:"-mt-1 block text-right",onClick:E[1]||(E[1]=q=>I.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("contacts::company.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(M,{class:"-mt-1 block text-right",onClick:E[2]||(E[2]=q=>b.value=!0)},{default:p(()=>[ne(" + "+K(A.$t("contacts::contact.create")),1)]),_:1})]),_:1},8,["fields","form","resource-name"]),l(O,{visible:y.value,"onUpdate:visible":E[5]||(E[5]=q=>y.value=q),overlay:!1,onCreated:E[6]||(E[6]=q=>(w("deals",q.deal),y.value=!1))},null,8,["visible"]),l(H,{visible:b.value,"onUpdate:visible":E[7]||(E[7]=q=>b.value=q),overlay:!1,onCreated:E[8]||(E[8]=q=>(w("contacts",q.contact),b.value=!1)),onRestored:E[9]||(E[9]=q=>(w("contacts",q),b.value=!1))},null,8,["visible"]),l(W,{visible:I.value,"onUpdate:visible":E[10]||(E[10]=q=>I.value=q),overlay:!1,onCreated:E[11]||(E[11]=q=>(w("companies",q.company),I.value=!1)),onRestored:E[12]||(E[12]=q=>(w("companies",q),I.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(j,{type:"submit",placement:"top-end",disabled:v(f).busy,loading:v(f).busy,text:A.$t("core::app.create")},{default:p(()=>[l(U,{class:"min-w-48"},{default:p(()=>[l(G,{text:A.$t("core::app.create_and_add_another"),onClick:x},null,8,["text"]),e.goToList?(g(),R(G,{key:0,text:A.$t("core::app.create_and_go_to_list"),onClick:$},null,8,["text"])):Z("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},a1e={class:"-mt-1"},r1e=["textContent"],l1e={class:"relative"},s1e={class:"group flex items-center"},i1e={class:"mr-1.5 mt-1 self-start sm:self-auto"},u1e={class:"whitespace-normal group-hover:left-6 hover:max-w-none sm:max-w-[13rem] sm:truncate sm:whitespace-nowrap sm:group-hover:absolute sm:hover:whitespace-normal"},c1e={__name:"MyActivitiesCard",props:{card:Object},setup(e){const t=V(null),n=V(!1),{floatResourceInEditMode:o}=Ro();function a(){r(),n.value=!1}function r(){t.value.reload()}return(s,i)=>{const u=c("CreateActivityModal"),d=c("IButton"),m=c("Icon"),f=c("IText"),h=c("ILink"),y=c("IBadge"),b=c("CardAsyncTable");return g(),D(de,null,[l(u,{visible:n.value,onCreated:a,onHidden:i[0]||(i[0]=I=>n.value=!1)},null,8,["visible"]),l(b,{ref_key:"tableRef",ref:t,card:e.card},{actions:p(()=>[_("div",a1e,[l(d,{class:"hide-when-editing mt-2",variant:"secondary",icon:"PlusSolid",text:s.$t("activities::activity.create"),small:"",onClick:i[1]||(i[1]=I=>n.value=!0)},null,8,["text"])])]),empty:p(I=>[_("div",{class:be(["flex flex-col justify-center",{"items-center py-4":!I.search&&!I.loading}])},[te(l(m,{icon:"Check",class:"size-8 text-success-500"},null,512),[[fe,!I.search&&!I.loading]]),l(f,{class:be(!I.search&&!I.loading?"mt-2":"")},{default:p(()=>[te(_("span",{textContent:K(I.text)},null,8,r1e),[[fe,I.loading]]),te(_("span",null,K(I.search?I.text:s.$t("core::app.all_caught_up")),513),[[fe,!I.loading]])]),_:2},1032,["class"])],2)]),title:p(({row:I,formatted:w})=>[_("div",l1e,[_("div",s1e,[_("div",i1e,[l(Vd,{"activity-id":I.id,"is-completed":I.is_completed,disabled:!I.authorizations.update,onChanged:r},null,8,["activity-id","is-completed","disabled"])]),_("div",u1e,[l(h,{text:w,onClick:k=>v(o)({resourceName:"activities",resourceId:I.id})},null,8,["text","onClick"])])])])]),"type.name":p(({row:I,formatted:w})=>[l(y,{text:w,color:I.type.swatch_color,icon:I.type.icon},null,8,["text","color","icon"])]),_:1},8,["card"])],64)}}},d1e=an(c1e,[["__scopeId","data-v-56cce77e"]]),m1e={__name:"RecordTabActivity",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=P(()=>{const o=(t.resource.activities||[]).filter(r=>!r.is_completed);let a=t.resource.incomplete_activities_for_user_count;return a===0&&o.length>0?o.length:a});return(o,a)=>{const r=c("Icon"),s=c("IBadge"),i=c("ITab");return Ia([n.value],()=>l(i,null,{default:p(()=>[l(r,{icon:"Calendar"}),ne(" "+K(o.$t("activities::activity.activities"))+" ",1),te(l(s,{variant:"danger",text:n.value,pill:""},null,8,["text"]),[[fe,n.value]])]),_:1}),a,0)}}};function Es(e){const t=V(1),n=V(null),o=V(null),a=V(!1),r=V(e.perPage||15),{gate:s}=bs(),i=P(()=>n.value!==null),u=P(()=>o.value&&o.value.length>0);function d(w){if(e.infinityRef.value.state.reset(),t.value=1,!w){m(),n.value=null,o.value=null;return}o.value=[],n.value=w,m(!0)}function m(w=!1){e.infinityRef.value.attemptLoad(w)}function f(w){e.handleInfinityResult?e.handleInfinityResult(w):e.synchronizeResource({[e.timelineRelation]:w.data})}function h(w,k){return k=k||r.value,e.makeRequestForData?e.makeRequestForData(w,k):Innoclapps.request(`${e.resource.value.path}/${e.timelineRelation}`,{params:{page:w,q:n.value,per_page:k,timeline:1}})}async function y(w){if(s.denies("view",e.resource.value)){w.complete();return}let k=null;if({data:k}=await h(t.value),k.data.length===0){i.value&&t.value===1&&(o.value=[]),w.complete(),a.value=!0;return}t.value+=1,i.value?o.value=u.value?o.value.concat(...k.data):k.data:(f(k),We(()=>a.value=!0)),w.loaded()}function b(){h(1,r.value*t.value).then(({data:w})=>{w.data.length===0?e.synchronizeResource({[e.timelineRelation]:{_reset:[]}}):f(w)})}async function I(w,k){let{data:x}=await Innoclapps.request(`/${e.timelineRelation}/${w}`,{params:{via_resource:e.resourceName,via_resource_id:e.resource.value.id}});e.synchronizeResource({[e.timelineRelation]:[x]}),await We();const C=document.getElementById("tabPanel-"+e.timelineRelation).querySelector(`.${k}-${x.id}`),F=e.scrollElement?document.querySelector(e.scrollElement):window;C&&F.scrollTo({top:C.getBoundingClientRect().top,behavior:"smooth"})}return{focusToAssociateableElement:I,dataLoadedFirstTime:a,searchResults:o,hasSearchResults:u,infiniteHandler:y,search:n,loadData:m,performSearch:d,isSearching:i,defaultPerPage:r,refresh:b}}const f1e={class:"flex items-center"},U1=2,p1e=5,Uo={__name:"AssociationsPopover",props:{widthClass:{type:String,default:"w-72"},modelValue:Object,resourceName:String,resourceId:[String,Number],associationsCount:Number,primaryResourceName:String,primaryRecord:Object,primaryRecordDisabled:Boolean,initialAssociateables:Object,associateables:Object,limitInitialAssociateables:{type:Number,default:3},excludedResources:[String,Array]},emits:["update:modelValue","update:associationsCount","synced","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{setLoading:s,isLoading:i}=Cn(),u=V(0),d=V(!1),m=V(""),f=V([]),h=V({}),y=V({}),b=V({}),I={},w={contacts:{title:r("contacts::contact.contacts"),resource:"contacts"},companies:{title:r("contacts::company.companies"),resource:"companies"},deals:{title:r("deals::deal.deals"),resource:"deals"}},{syncAssociations:k,associationsBeingSaved:x}=qt(xt(o,"resourceName"));o.excludedResources&&Vn(o.excludedResources).forEach(ue=>{delete w[ue]});const $=P(()=>U1-u.value),C=P(()=>m.value!=""),F=P(()=>!!o.primaryRecord),T=P(()=>mr(Object.keys(w),ue=>[ue!==o.primaryResourceName,ue])),S=P(()=>Object.values(o.modelValue||{}).flat().join(",")),A=P(()=>Object.keys(T.value).map(oe=>ee(oe)).flat().join(",")),E=P(()=>T.value.some(ue=>b.value[ue]&&b.value[ue].records.length>0)),B=P(()=>{if(E.value)return b.value;let ue={},oe=(re,Y)=>{Mt(ue[re].records,["id",parseInt(Y.id)])===-1&&ue[re].records.push(Y)};return T.value.forEach(re=>{ue[re]=Object.assign({},w[re],{records:[]}),F.value&&re===o.primaryResourceName&&oe(re,o.primaryRecord),o.initialAssociateables&&O(re).forEach(Y=>oe(re,Y)),Object.hasOwn(o.associateables||{},re)&&o.associateables[re].forEach(Y=>oe(re,Y)),Object.hasOwn(f.value,re)&&f.value[re].forEach(Y=>oe(re,Y)),Object.hasOwn(y.value,re)&&y.value[re].records.forEach(Y=>oe(re,Y))}),ue}),M=P(()=>{let ue=o.associationsCount||0;return T.value.some(oe=>h.value[oe]&&h.value[oe].length>0)&&(ue=G()),ue}),N=P(()=>M.value===0?r("core::app.no_associations"):r("core::app.associated_with_total_records",{count:M.value}));function G(){return Object.values(h.value).reduce((ue,oe)=>ue+oe.length,0)}function U(){s(!0),Innoclapps.request(`/associations/${o.resourceName}/${o.resourceId}`,{perPage:100}).then(({data:ue})=>{f.value=ue,ce()}).finally(()=>s(!1))}function j(){o.resourceName&&o.resourceId&&U()}function O(ue){return Vt((o.initialAssociateables[ue]||[]).slice(0,o.limitInitialAssociateables),"created_at","desc")}function H(ue){let oe=[];return T.value.forEach(re=>{oe.push(Innoclapps.request(`/${re}/search`,{params:{q:ue,take:p1e},cancelToken:new ol(Y=>I[re]=Y)}))}),oe}function W(){Object.values(I).forEach(ue=>{ue&&ue()})}async function X(ue,oe,re){if(!y.value[oe]&&re&&(y.value[oe]={records:[],is_search:re}),await We(),h.value[oe].includes(ue.id)&&re)y.value[oe].records.push(ue);else if(y.value[oe]){let Y=Mt(y.value[oe].records,["id",parseInt(ue.id)]);Y!=-1&&y.value[oe].records.splice(Y,1)}o.modelValue==null?k(o.resourceId,h.value).then(Y=>{a("synced",Y),a("change",h.value),U()}):a("change",h.value),await We(),a("update:associationsCount",G())}function q(){m.value="",L(""),W()}function L(ue){const oe=ue.length;if(oe===0){b.value={};return}if(u.value=oe,oe<U1)return d.value=!0,ue;d.value=!1,W(),s(!0),Promise.all(H(ue)).then(re=>{let Y={};T.value.forEach((ae,se)=>{Y[ae]=Object.assign({},w[ae],{records:Fn(re[se].data,xe=>{var le,ge;return xe.from_search=!0,xe.disabled=((ge=ft(((le=B.value[ae])==null?void 0:le.records)||[],["id",xe.id]))==null?void 0:ge.disabled)||!1,xe}),is_search:!0})}),b.value=Y,s(!1)})}function ee(ue){var re;let oe=((re=o.modelValue)==null?void 0:re[ue])??[];return Object.hasOwn(f.value,ue)&&(oe=oe.concat(Fn(f.value[ue],"id"))),Object.hasOwn(o.associateables||{},ue)&&(oe=oe.concat(Fn(o.associateables[ue],"id"))),[...new Set(oe)]}function ce(){const ue={};for(let oe of T.value)ue[oe]=ee(oe),oe===o.primaryResourceName&&o.primaryRecordDisabled===!0&&F.value&&!ue[oe].includes(o.primaryRecord.id)&&ue[oe].push(o.primaryRecord.id);h.value=ue,a("update:modelValue",ue)}return Se(A,()=>{ce()}),Se(S,()=>{ce()}),Xe(ce),t({retrieveAssociatedResources:U}),(ue,oe)=>{const re=c("IPopoverButton"),Y=c("IPopoverHeading"),ae=c("IPopoverHeader"),se=c("IFormInput"),xe=c("IButton"),le=c("IFormGroup"),ge=c("IText"),ve=c("ITextDark"),ie=c("IFormCheckbox"),me=c("IFormCheckboxLabel"),Ce=c("Icon"),ke=c("ILink"),Be=c("IFormCheckboxField"),Fe=c("IPopoverBody"),he=c("IOverlay"),_e=c("IPopoverPanel"),Te=c("IPopover");return g(),R(Te,{onHide:q,onShow:j},{default:p(()=>[l(re,{text:N.value,link:""},null,8,["text"]),l(_e,{class:be(e.widthClass)},{default:p(()=>[l(he,{show:v(x)||v(i)},{default:p(()=>[l(ae,null,{default:p(()=>[l(Y,{text:ue.$t("core::app.associate_with_record")},null,8,["text"])]),_:1}),l(Fe,null,{default:p(()=>[l(le,{class:"relative"},{default:p(()=>[l(se,{modelValue:m.value,"onUpdate:modelValue":oe[0]||(oe[0]=Ne=>m.value=Ne),class:"pr-8",placeholder:ue.$t("core::app.search_records"),debounce:"",onInput:L},null,8,["modelValue","placeholder"]),te(l(xe,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:q},null,512),[[fe,m.value]])]),_:1}),te(l(ge,{class:"text-center",text:ue.$t("core::app.no_search_results")},null,8,["text"]),[[fe,C.value&&!E.value&&!v(i)&&!d.value]]),te(l(ge,{class:"text-center",text:ue.$t("core::app.type_more_to_search",{characters:$.value})},null,8,["text"]),[[fe,C.value&&d.value]]),(g(!0),D(de,null,Ie(B.value,Ne=>(g(),D("div",{key:Ne.resource},[te(l(ve,{class:"mb-2 mt-3 font-medium",text:Ne.title},null,8,["text"]),[[fe,Ne.records.length>0]]),(g(!0),D(de,null,Ie(Ne.records,(lt,Ke)=>(g(),R(Be,{key:Ne.resource+"-"+lt.id},{default:p(()=>[l(ie,{id:Ne.resource+"-"+lt.id,checked:h.value[Ne.resource],"onUpdate:checked":$e=>h.value[Ne.resource]=$e,value:lt.id,disabled:lt.disabled||e.primaryRecordDisabled===!0&&e.primaryResourceName===Ne.resource&&F.value&&parseInt(e.primaryRecord.id)===parseInt(lt.id),onChange:$e=>X(lt,Ne.resource,Ne.is_search)},null,8,["id","checked","onUpdate:checked","value","disabled","onChange"]),_("div",f1e,[l(me,{class:"grow",for:Ne.resource+"-"+lt.id},{default:p(()=>[ne(K(lt.display_name),1)]),_:2},1032,["for"]),lt.path&&lt.path!==ue.$route.path?(g(),R(ke,{key:0,to:lt.path,basic:""},{default:p(()=>[l(Ce,{icon:"Eye",class:"size-4"})]),_:2},1032,["to"])):Z("",!0),Ee(ue.$slots,"after-record",{index:Ke,title:Ne.title,resource:Ne.resource,record:lt,isSearching:C.value,isSelected:h.value[Ne.resource].includes(lt.id),selectedRecords:h.value[Ne.resource]})])]),_:2},1024))),128))]))),128))]),_:3})]),_:3},8,["show"])]),_:3},8,["class"])]),_:3})}}},fl=V([]),kr=()=>{const{setLoading:e,isLoading:t}=Cn(),{scriptConfig:n}=qe();fl.value=[...n("activities.types")||[]],Jt(()=>{n("activities.types",[...fl.value])});const o=P(()=>Vt(fl.value,"name")),a=P(()=>i(o.value));function r(m){return o.value.find(f=>f.id==m)}function s(m){return o.value.find(f=>f.flag==m)}function i(m){return m.map(f=>({id:f.id,icon:f.icon,tooltip:f.name}))}function u(m){fl.value=m}function d(m={}){e(!0),Innoclapps.request("/activity-types",Object.assign({},{params:{per_page:100}},m)).then(({data:f})=>fl.value=f.data).finally(()=>e(!1))}return{activityTypes:fl,typesByName:o,typesAreBeingFetched:t,typesForIconPicker:a,findTypeById:r,findTypeByFlag:s,formatTypesForIcons:i,setActivityTypes:u,fetchActivityTypes:d}},v1e={class:"flex shrink-0"},h1e={key:0,class:"ml-1 truncate"},g1e={__name:"ActivityDateDisplay",props:{dueDate:{required:!0},endDate:{required:!0},isDue:{required:!0,type:Boolean},withIcon:{type:Boolean,default:!0}},setup(e){const t=e,{DateTime:n,localizedDate:o,localizedTime:a,localizedDateTime:r,hasTime:s}=it(),i=P(()=>{if(!t.endDate)return"";const u=s(t.endDate),d=s(t.dueDate),m=n.fromISO(t.endDate),f=n.fromISO(t.dueDate);if(!u&&!d){if(!m.hasSame(f,"day"))return o(t.endDate)}else if(u&&d)if(m.hasSame(f,"day")){if(m.toFormat("HH:mm")!==f.toFormat("HH:mm"))return a(t.endDate)}else return r(t.endDate);else if(!m.hasSame(f,"day"))return u?r(t.endDate):o(t.endDate);return""});return(u,d)=>{const m=c("Icon");return g(),D("div",{class:be(["flex items-center text-base/6 sm:text-sm/6",e.isDue?"text-danger-500 dark:text-danger-400":"text-neutral-800 dark:text-white"])},[_("div",v1e,[e.withIcon?(g(),R(m,{key:0,icon:"Calendar",class:be(["mr-2 size-5",{"text-neutral-800 dark:text-white":!e.isDue,"text-danger-400":e.isDue}])},null,8,["class"])):Z("",!0),ne(" "+K(v(s)(e.dueDate)?v(r)(e.dueDate):v(o)(e.dueDate)),1)]),i.value?(g(),D("span",h1e,[d[0]||(d[0]=_("span",null,"-",-1)),ne(" "+K(i.value),1)])):Z("",!0)],2)}}},b1e={class:"flex w-full flex-col sm:w-auto sm:flex-row sm:items-center sm:justify-end"},y1e={__name:"RelatedActivityEdit",props:{activityId:{type:Number,required:!0},relatedResource:{required:!0,type:Object},viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0}},emits:["cancelled","updated"],setup(e,{emit:t}){const n=e,o=t,a=Le("synchronizeResource"),r=Le("incrementResourceCount"),s=Le("decrementResourceCount"),i=Innoclapps.resourceName("activities"),{t:u}=Pe(),{fields:d,hydrateFields:m,updateField:f,getUpdateFields:h}=In(),{form:y}=Qe(),{updateResource:b,retrieveResource:I}=qt(i);let w=!1;const k=P(()=>d.value.length>0),x=P(()=>n.viaResource==="contacts"?[n.relatedResource]:n.relatedResource.contacts||[]);function $(){b(y.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.activityId).then(C)}function C(F){F.is_completed!==w&&(F.is_completed?s("incomplete_activities_for_user_count"):r("incomplete_activities_for_user_count"),w=F.is_completed),a({activities:F}),o("updated",F),Innoclapps.success(u("core::resource.updated"))}return La(async()=>{const F=await I(n.activityId);w=F.is_completed,d.value=await h(i,n.activityId,{viaResource:n.viaResource,viaResourceId:n.viaResourceId}),f("guests",{contacts:x}),m(F),y.set("is_completed",F.is_completed)}),(F,T)=>{const S=c("FormFields"),A=c("ICardBody"),E=c("IFormSwitchLabel"),B=c("IFormSwitch"),M=c("IFormSwitchField"),N=c("IButton"),G=c("ICardFooter"),U=c("ICard");return g(),R(U,{as:"form",overlay:!k.value,onSubmit:ot($,["prevent"])},{default:p(()=>[l(A,null,{default:p(()=>[l(S,{fields:v(d),form:v(y),"resource-id":e.activityId,"resource-name":v(i),onUpdateFieldValue:T[0]||(T[0]=j=>v(y).fill(j.attribute,j.value)),onSetInitialValue:T[1]||(T[1]=j=>v(y).set(j.attribute,j.value))},null,8,["fields","form","resource-id","resource-name"])]),_:1}),l(G,null,{default:p(()=>[_("div",b1e,[l(M,{class:"mb-4 sm:mb-0 sm:mr-4 sm:border-r sm:border-neutral-200 sm:pr-4 sm:dark:border-neutral-500/30"},{default:p(()=>[l(E,{text:F.$t("activities::activity.mark_as_completed")},null,8,["text"]),l(B,{modelValue:v(y).is_completed,"onUpdate:modelValue":T[2]||(T[2]=j=>v(y).is_completed=j)},null,8,["modelValue"])]),_:1}),l(N,{class:"mb-2 ml-0 sm:mb-0 sm:mr-2",variant:"secondary",text:F.$t("core::app.cancel"),onClick:T[3]||(T[3]=j=>F.$emit("cancelled",j))},null,8,["text"]),l(N,{type:"submit",variant:"primary",disabled:v(y).busy,text:F.$t("core::app.save"),onClick:$},null,8,["disabled","text"])])]),_:1})]),_:1},8,["overlay"])}}},_1e={class:"flex w-full flex-1"},w1e={class:"mr-2 mt-px flex shrink-0 self-start"},I1e={class:"flex grow flex-col space-y-1 lg:flex-row lg:space-x-3 lg:space-y-0"},x1e={class:"flex grow flex-col items-start"},k1e={class:"space-x-2 lg:space-x-0"},$1e=["textContent"],C1e={key:0,class:"-mt-px border-y border-warning-600/20 bg-warning-50 dark:border-warning-400/20 dark:bg-warning-400/10"},S1e=["onClick"],T1e={class:"space-y-4 sm:space-y-6"},E1e={key:0,class:"mb-8"},F1e={class:"flex flex-col flex-wrap space-y-2 align-baseline lg:flex-row lg:space-y-0"},A1e={key:0,class:"mr-0 self-start sm:self-auto lg:-ml-2 lg:mr-4"},R1e=["textContent"],D1e={class:"border-t border-neutral-200 px-4 py-2.5 dark:border-neutral-500/30 sm:px-6"},O1e={class:"border-t border-neutral-200 px-4 py-2.5 dark:border-neutral-500/30 sm:px-6"},Xk=Object.assign({inheritAttrs:!1},{__name:"RelatedActivity",props:{activityId:{required:!0,type:Number},title:{required:!0,type:String},commentsCount:{required:!0,type:Number},isCompleted:{required:!0,type:Boolean},isReminded:{required:!0,type:Boolean},isDue:{required:!0,type:Boolean},typeId:{required:!0,type:Number},userId:{required:!0,type:Number},note:{required:!0},description:{required:!0},reminderMinutesBefore:{required:!0},dueDate:{required:!0},endDate:{required:!0},attachmentsCount:{required:!0,type:Number},media:{required:!0,type:Array},authorizations:{required:!0,type:Object},comments:{required:!0,type:Array},associationsCount:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResource:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("activities"),o=Le("synchronizeResource"),a=Le("incrementResourceCount"),r=Le("decrementResourceCount"),{t:s}=Pe(),{localizedDateTime:i,localizedDate:u,hasTime:d}=it(),{updateResource:m,deleteResource:f}=qt(n),{users:h,findUserById:y}=qe(),{commentsAreVisible:b}=Ca(t.activityId,"activities"),I=V(!1),w=V(!1),{typesByName:k,findTypeById:x}=kr(),$=P(()=>x(t.typeId)),C=P(()=>y(t.userId)),F=P(()=>s("core::app.reminder_set_for",{value:t2(t.reminderMinutesBefore),type:s("core::dates."+Rp(t.reminderMinutesBefore))}));function T(){Innoclapps.request({method:"post",data:{ids:[t.activityId]},responseType:"blob",url:"/activities/actions/download-ics-file/run"}).then(({data:G,headers:U})=>{zl(G,U["content-disposition"].split("filename=")[1]||"unknown")})}function S(G={}){m({via_resource:t.viaResource,via_resource_id:t.viaResourceId,...G},t.activityId).then(U=>o({activities:U}))}async function A(G){await f(G),o({activities:{id:G,_delete:!0}}),r("incomplete_activities_for_user_count"),Innoclapps.success(s("activities::activity.deleted"))}function E(G){o({activities:G}),G.is_completed?r("incomplete_activities_for_user_count"):a("incomplete_activities_for_user_count")}function B(G){G.type=="dblclick"&&I.value||t.authorizations.update&&(I.value=!I.value)}function M(G){o({activities:{id:t.activityId,media:[G]}})}function N(G){o({activities:{id:t.activityId,media:{id:G.id,_delete:!0}}})}return(G,U)=>{const j=c("ICardHeading"),O=c("ITextDark"),H=c("IDropdownButton"),W=c("IDropdownItem"),X=c("IDropdownMenu"),q=c("IDropdown"),L=c("IDropdownMinimal"),ee=c("ICardActions"),ce=c("ICardHeader"),ue=c("Icon"),oe=c("ILink"),re=c("TextCollapse"),Y=c("EditorText"),ae=c("ITextBlockDark"),se=c("IAvatar"),xe=c("IText"),le=c("ICardBody"),ge=c("CollapseableCommentsLink"),ve=c("CollapsableCommentsList"),ie=c("CommentsAdd"),me=c("ICardFooter"),Ce=c("ICard"),ke=ze("t"),Be=ze("i-tooltip");return g(),D(de,null,[te(l(Ce,Ue(G.$attrs,{class:"activity-"+e.activityId}),{default:p(()=>[l(ce,null,{default:p(()=>[_("div",_1e,[_("div",w1e,[Ia([e.isCompleted],()=>l(Vd,{class:"ml-px md:mt-px","activity-id":e.activityId,"is-completed":e.isCompleted,disabled:!e.authorizations.update,onChanged:E},null,8,["activity-id","is-completed","disabled"]),U,0)]),_("div",I1e,[_("div",x1e,[l(j,{class:be(["text-base/6 font-medium sm:text-sm/6",e.isCompleted?"line-through":""]),text:e.title},null,8,["class","text"]),l(Uo,{placement:"bottom-start","associations-count":e.associationsCount,"initial-associateables":e.relatedResource,"resource-id":e.activityId,"resource-name":v(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:U[1]||(U[1]=Fe=>v(o)({activities:Fe}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"])]),_("div",k1e,[te(l(O,{class:"inline font-medium lg:hidden"},null,512),[[ke,"activities::activity.type.type"]]),l(q,null,{default:p(()=>[l(H,{class:"lg:mt-1.5",as:v(Od),disabled:!e.authorizations.update,color:$.value.swatch_color},{default:p(()=>[_("span",{class:"max-w-32 truncate",textContent:K($.value.name)},null,8,$1e)]),_:1},8,["as","disabled","color"]),l(X,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(k),Fe=>(g(),R(W,{key:Fe.id,text:Fe.name,active:e.typeId===Fe.id,icon:Fe.icon,onClick:he=>S({activity_type_id:Fe.id})},null,8,["text","active","icon","onClick"]))),128))]),_:1})]),_:1})])])]),l(ee,{class:"mt-1 self-start"},{default:p(()=>[l(L,{small:""},{default:p(()=>[e.authorizations.update?(g(),R(W,{key:0,text:G.$t("core::app.edit"),onClick:B},null,8,["text"])):Z("",!0),l(W,{text:G.$t("activities::activity.download_ics"),onClick:T},null,8,["text"]),e.authorizations.delete?(g(),R(W,{key:1,text:G.$t("core::app.delete"),onClick:U[2]||(U[2]=Fe=>G.$confirm(()=>A(e.activityId)))},null,8,["text"])):Z("",!0)]),_:1})]),_:1})]),_:1}),e.isDue?(g(),D("div",{key:0,class:be(["-mt-px flex items-center border-warning-600/20 bg-warning-50 px-4 py-1.5 text-base text-warning-800 dark:border-warning-400/20 dark:bg-warning-400/10 dark:text-warning-400 sm:px-6 sm:text-sm",e.note?"border-t":"border-y"])},[l(ue,{icon:"Clock",class:"mr-3 size-5"}),_("span",null,K(G.$t("activities::activity.activity_was_due",{date:v(d)(e.dueDate)?v(i)(e.dueDate):v(u)(e.dueDate)})),1)],2)):Z("",!0),_("div",{onDblclick:B},[e.note?(g(),D("div",C1e,[l(Y,null,{default:p(()=>[l(re,{class:"px-4 py-1.5 leading-4 text-warning-800 dark:text-warning-400 sm:px-6",text:e.note,length:100,lightbox:""},{action:p(({collapsed:Fe,toggle:he})=>[te(_("div",{class:"absolute bottom-0 h-6 w-full cursor-pointer bg-gradient-to-t from-warning-50 to-transparent dark:from-warning-400/20",onClick:he},null,8,S1e),[[fe,Fe]]),te(l(oe,{variant:"warning",class:"my-2.5 inline-block px-4 text-base font-medium sm:px-6 sm:text-sm",text:G.$t("core::app.show_less"),onClick:he},null,8,["text","onClick"]),[[fe,!Fe]])]),_:1},8,["text"])]),_:1})])):Z("",!0),l(le,null,{default:p(()=>[_("div",T1e,[e.description?(g(),D("div",E1e,[l(ae,{class:"mb-1 inline-flex font-medium"},{default:p(()=>[l(ue,{icon:"Bars3BottomLeft",class:"mr-3 size-5 text-neutral-500 dark:text-neutral-300"}),te(_("span",null,null,512),[[ke,"activities::activity.description"]])]),_:1}),l(Y,{class:"ml-8"},{default:p(()=>[l(re,{class:"leading-4",text:e.description,length:200,lightbox:""},null,8,["text"])]),_:1})])):Z("",!0),_("div",F1e,[C.value?te((g(),D("div",A1e,[e.authorizations.update?(g(),R(q,{key:0},{default:p(()=>[l(H,{class:"-ml-3.5 lg:-ml-1",basic:""},{default:p(()=>[l(se,{size:"xs",src:C.value.avatar_url},null,8,["src"]),ne(" "+K(C.value.name),1)]),_:1}),l(X,{class:"max-h-64"},{default:p(()=>[(g(!0),D(de,null,Ie(v(h),Fe=>(g(),R(W,{key:Fe.id,text:Fe.name,active:e.userId===Fe.id,onClick:he=>S({user_id:Fe.id})},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})):(g(),R(ae,{key:1,class:"ml-2 flex items-center space-x-1.5 font-medium"},{default:p(()=>[l(se,{size:"xs",src:C.value.avatar_url},null,8,["src"]),_("span",{textContent:K(C.value.name)},null,8,R1e)]),_:1}))])),[[Be,G.$t("activities::activity.owner"),void 0,{top:!0}]]):Z("",!0),l(g1e,{"due-date":e.dueDate,"end-date":e.endDate,"is-due":e.isDue},null,8,["due-date","end-date","is-due"])])]),e.reminderMinutesBefore&&!e.isReminded?(g(),R(xe,{key:0,class:"mt-1 flex items-center"},{default:p(()=>[l(ue,{icon:"Bell",class:"mr-2 size-5"}),ne(" "+K(F.value),1)]),_:1})):Z("",!0)]),_:1})],32),_("div",D1e,[l(oe,{class:"group inline-flex items-center",basic:"",onClick:U[3]||(U[3]=Fe=>w.value=!w.value)},{default:p(()=>[l(ue,{icon:"PaperClip",class:"mr-3 size-5 text-neutral-500 group-hover:text-neutral-700 dark:text-neutral-300 dark:group-hover:text-white"}),_("span",null,K(G.$t("core::app.attachments"))+" ("+K(e.attachmentsCount)+") ",1),l(ue,{class:"ml-2 size-4",icon:w.value?"ChevronDownSolid":"ChevronRightSolid"},null,8,["icon"])]),_:1}),te(l(Is,{class:"ml-8","resource-name":v(n),"resource-id":e.activityId,media:e.media,"authorize-delete":e.authorizations.update,onDeleted:N,onUploaded:M},null,8,["resource-name","resource-id","media","authorize-delete"]),[[fe,w.value]])]),te(_("div",O1e,[l(ve,{"commentable-type":"activities",class:"ml-8 mt-3","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.activityId,count:e.commentsCount,comments:e.comments,onUpdated:U[4]||(U[4]=Fe=>v(o)({activities:{id:e.activityId,comments:Fe}})),onDeleted:U[5]||(U[5]=Fe=>v(o)({activities:{id:e.activityId,comments:{id:Fe,_delete:!0}}})),"onUpdate:comments":U[6]||(U[6]=Fe=>v(o)({activities:{id:e.activityId,comments:Fe}})),"onUpdate:count":U[7]||(U[7]=Fe=>v(o)({activities:{id:e.activityId,comments_count:Fe}}))},{default:p(({hasComments:Fe,totalComments:he,commentsAreBeingLoaded:_e,toggleCommentsVisibility:Te})=>[Fe?(g(),R(ge,{key:0,loading:_e,total:he,collapsed:v(b),onClick:Te},null,8,["loading","total","collapsed","onClick"])):Z("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])],512),[[fe,e.commentsCount]]),l(me,{class:"text-right"},{default:p(()=>[l(ie,{"commentable-type":"activities","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.activityId,onCreated:U[8]||(U[8]=Fe=>(b.value=!0,v(o)({activities:{id:e.activityId,comments:[Fe]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[fe,!I.value]]),I.value?(g(),R(y1e,{key:0,"activity-id":e.activityId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"related-resource":e.relatedResource,onCancelled:U[9]||(U[9]=Fe=>I.value=!1),onUpdated:U[10]||(U[10]=Fe=>I.value=!1)},null,8,["activity-id","via-resource","via-resource-id","related-resource"])):Z("",!0)],64)}}}),P1e={class:"flex w-full flex-wrap items-center justify-between sm:w-auto"},M1e={class:"mt-sm-0 mt-2 flex w-full flex-col sm:w-auto sm:flex-row sm:items-center sm:justify-end"},B1e={__name:"RelatedActivityCreate",props:{viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0},relatedResource:{required:!0,type:Object}},emits:["cancel"],setup(e){const t=e,n=Le("synchronizeResource"),o=Le("incrementResourceCount"),a=Innoclapps.resourceName("activities"),{t:r}=Pe(),{fields:s,hasFields:i,updateField:u,getCreateFields:d}=In(),{form:m}=Qe({is_completed:!1,associations:{[t.viaResource]:[t.viaResourceId]}},{resetOnSuccess:!0}),{createResource:f}=qt(a),h=P(()=>t.viaResource==="contacts"?[t.relatedResource]:t.relatedResource.contacts||[]);async function y(){s.value=await d(a,{viaResource:t.viaResource,viaResourceId:t.viaResourceId}),u("guests",{contacts:h})}async function b(){let I=await f(m.withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId}));Innoclapps.success(r("activities::activity.created")),I.is_completed||o("incomplete_activities_for_user_count"),n({activities:[I]})}return y(),(I,w)=>{const k=c("FormFields"),x=c("IAlertBody"),$=c("IAlert"),C=c("ICardBody"),F=c("IFormSwitchLabel"),T=c("IFormSwitch"),S=c("IFormSwitchField"),A=c("IButton"),E=c("ICardFooter"),B=c("ICard");return g(),R(B,{as:"form",overlay:!v(i),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(C,null,{default:p(()=>[l(k,{fields:v(s),form:v(m),"resource-name":v(a),"focus-first":"",onUpdateFieldValue:w[0]||(w[0]=M=>v(m).fill(M.attribute,M.value)),onSetInitialValue:w[1]||(w[1]=M=>v(m).set(M.attribute,M.value))},null,8,["fields","form","resource-name"]),l($,{class:"mt-1",variant:"success",show:v(m).recentlySuccessful},{default:p(()=>[l(x,{text:I.$t("activities::activity.created")},null,8,["text"])]),_:1},8,["show"])]),_:1}),l(E,null,{default:p(()=>[_("div",P1e,[_("div",null,[l(Uo,{modelValue:v(m).associations,"onUpdate:modelValue":w[2]||(w[2]=M=>v(m).associations=M),placement:"bottom-start","primary-record":e.relatedResource,"primary-resource-name":e.viaResource,"primary-record-disabled":!0,"initial-associateables":e.relatedResource},null,8,["modelValue","primary-record","primary-resource-name","initial-associateables"])]),_("div",M1e,[l(S,{class:"mb-4 sm:mb-0 sm:mr-4 sm:border-r sm:border-neutral-200 sm:pr-4 sm:dark:border-neutral-500/30"},{default:p(()=>[l(F,{text:I.$t("activities::activity.mark_as_completed")},null,8,["text"]),l(T,{modelValue:v(m).is_completed,"onUpdate:modelValue":w[3]||(w[3]=M=>v(m).is_completed=M)},null,8,["modelValue"])]),_:1}),l(A,{class:"mb-2 sm:mb-0 sm:mr-2",variant:"secondary",text:I.$t("core::app.cancel"),onClick:w[4]||(w[4]=M=>I.$emit("cancel"))},null,8,["text"]),l(A,{variant:"primary",type:"submit",disabled:v(m).busy,text:I.$t("activities::activity.add")},null,8,["disabled","text"])])])]),_:1})]),_:1},8,["overlay"])}}},N1e={class:"sm:flex sm:items-start sm:justify-between"},V1e={class:"mt-5 sm:ml-6 sm:mt-0"},L1e={class:"mt-3 sm:mt-7 sm:block"},q1e={class:"border-b border-neutral-200 dark:border-neutral-500/30"},U1e={class:"flex items-center justify-center"},j1e={class:"overlow-y-hidden -mb-px flex grow snap-x snap-mandatory overflow-x-auto sm:grow-0 sm:space-x-4 lg:space-x-6"},z1e={class:"ml-2"},H1e={class:"py-2 sm:py-4"},W1e={class:"mt-3 space-y-4"},Gm="activities",G1e={__name:"RecordTabActivityPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o=V("all"),a=V(null),r=V(!1),{DateTime:s,LocalDateTimeInstance:i,hasTime:u}=it(),{t:d}=Pe(),m=Ct(),{commentsAreVisible:f}=Ca(m.query.resourceId,Gm),{dataLoadedFirstTime:h,focusToAssociateableElement:y,searchResults:b,isSearching:I,hasSearchResults:w,performSearch:k,search:x,loadData:$,infiniteHandler:C}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,perPage:100,infinityRef:a,synchronizeResource:n,timelineRelation:Gm}),F=P(()=>H.value.find(W=>W.id===o.value)),T=P(()=>M.value.filter(W=>O(W.due_date).hasSame(i,"day"))),S=P(()=>M.value.filter(W=>O(W.due_date).hasSame(i.plus({days:1}),"day"))),A=P(()=>M.value.filter(W=>O(W.due_date).hasSame(i,"week",{useLocaleWeeks:!0}))),E=P(()=>M.value.filter(W=>O(W.due_date).hasSame(i.plus({weeks:1}),"week",{useLocaleWeeks:!0}))),B=P(()=>Vt(b.value||t.resource.activities,["is_completed",W=>O(W.due_date).toJSDate()],["asc","asc"])),M=P(()=>B.value.filter(W=>!W.is_completed)),N=P(()=>B.value.filter(W=>W.is_completed)),G=P(()=>B.value.length>0),U=P(()=>F.value.total===0&&h.value&&!(I.value&&!w.value));function j(W){o.value=W.id,$()}function O(W){return u(W)?s.fromISO(W):s.fromFormat(W,"yyyy-MM-dd")}const H=P(()=>[{id:"all",title:d("activities::activity.filters.all"),data:B.value,total:B.value.length,empty:{text:d("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"today",title:d("activities::activity.filters.today"),data:T.value,total:T.value.length,empty:{text:d("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"tomorrow",title:d("activities::activity.filters.tomorrow"),data:S.value,total:S.value.length,empty:{text:d("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"this_week",title:d("activities::activity.filters.this_week"),data:A.value,total:A.value.length,empty:{text:d("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"next_week",title:d("activities::activity.filters.next_week"),data:E.value,total:E.value.length,empty:{text:d("core::app.all_caught_up"),icon:"Check",iconClass:"text-success-500"}},{id:"done",title:d("activities::activity.filters.done"),data:N.value,total:N.value.length,empty:{text:d("activities::activity.filters.done_empty_state"),icon:"CheckCircle",iconClass:"text-neutral-500 dark:text-neutral-300"}}]);return m.query.resourceId&&m.query.section===Gm&&Se(h,()=>{y(m.query.resourceId,"activity").then(()=>{m.query.comment_id&&(f.value=!0)})},{once:!0}),(W,X)=>{const q=c("ITextDark"),L=c("IText"),ee=c("IButton"),ce=c("InputSearch"),ue=c("ICardBody"),oe=c("ICard"),re=c("ILink"),Y=c("Icon"),ae=c("ITabPanel");return g(),R(ae,{lazy:!v(h),onActivatedOnce:v($)},{default:p(()=>[te(l(oe,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(ue,null,{default:p(()=>[_("div",N1e,[_("div",null,[l(q,{class:"font-semibold",text:W.$t("activities::activity.manage_activities")},null,8,["text"]),l(L,{class:"max-w-xl",text:W.$t("activities::activity.info")},null,8,["text"])]),_("div",V1e,[l(ee,{variant:"primary",icon:"PlusSolid",text:W.$t("activities::activity.add"),onClick:X[0]||(X[0]=se=>r.value=!0)},null,8,["text"])])]),te(l(ce,{modelValue:v(x),"onUpdate:modelValue":[X[1]||(X[1]=se=>hn(x)?x.value=se:null),v(k)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[fe,G.value||v(x)]])]),_:1})]),_:1},512),[[fe,!r.value]]),r.value?(g(),R(B1e,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,onCancel:X[2]||(X[2]=se=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource"])):Z("",!0),_("div",L1e,[te(_("div",q1e,[_("div",U1e,[_("nav",j1e,[(g(!0),D(de,null,Ie(H.value,se=>(g(),R(re,{key:se.id,class:be([o.value===se.id?"border-neutral-700 text-neutral-700 dark:border-neutral-400 dark:text-neutral-200":"border-transparent text-neutral-500 hover:border-neutral-300 hover:text-neutral-700 dark:text-neutral-100 dark:hover:border-neutral-500 dark:hover:text-neutral-300","group inline-flex min-w-full shrink-0 snap-start snap-always items-center justify-center whitespace-nowrap border-b-2 px-1 py-4 text-base/5 font-medium sm:min-w-0 sm:text-sm/5"]),plain:"",onClick:xe=>j(se)},{default:p(()=>[ne(K(se.title)+" ",1),_("span",z1e,"("+K(se.total)+")",1)]),_:2},1032,["class","onClick"]))),128))])])],512),[[fe,G.value]])]),_("div",H1e,[U.value?(g(),R(q,{key:0,class:"mt-6 flex items-center justify-center font-medium"},{default:p(()=>[l(Y,{icon:F.value.empty.icon,class:be(["mr-2 size-5",F.value.empty.iconClass])},null,8,["icon","class"]),ne(" "+K(F.value.empty.text),1)]),_:1})):Z("",!0),_("div",W1e,[(g(!0),D(de,null,Ie(F.value.data,se=>(g(),D("div",{key:se.id},[l(Xk,{"activity-id":se.id,title:se.title,"comments-count":se.comments_count,"is-completed":se.is_completed,"is-reminded":se.is_reminded,"is-due":se.is_due,"type-id":se.activity_type_id,"user-id":se.user_id,note:se.note,description:se.description,"reminder-minutes-before":se.reminder_minutes_before,"due-date":se.due_date,"end-date":se.end_date,"attachments-count":se.media.length,media:se.media,"associations-count":se.associations_count,authorizations:se.authorizations,comments:se.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["activity-id","title","comments-count","is-completed","is-reminded","is-due","type-id","user-id","note","description","reminder-minutes-before","due-date","end-date","attachments-count","media","associations-count","authorizations","comments","via-resource","via-resource-id","related-resource"])]))),128))])]),te(l(L,{class:"mt-6 text-center",text:W.$t("core::app.no_search_results")},null,8,["text"]),[[fe,v(I)&&!v(w)]]),l(Ir,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:X[3]||(X[3]=se=>v(C)(se))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},K1e={__name:"RecordTabTimelineEntryPin",props:{resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},isPinned:{type:Boolean,required:!0},timelineSubjectKey:{type:String,required:!0},timelineRelationship:{type:String,required:!0},timelineableKey:{type:String,required:!0},timelineableId:{type:[Number,String],required:!0}},setup(e){const t=e,n=Le("synchronizeResource");function o(){Innoclapps.request().post("timeline/pin",{subject_id:parseInt(t.resourceId),subject_type:t.timelineSubjectKey,timelineable_id:parseInt(t.timelineableId),timelineable_type:t.timelineableKey}).then(()=>{n({[t.timelineRelationship]:{id:t.timelineableId,is_pinned:!0,pinned_date:new Date().toISOString()}})})}function a(){Innoclapps.request().post("timeline/unpin",{subject_id:parseInt(t.resourceId),subject_type:t.timelineSubjectKey,timelineable_id:parseInt(t.timelineableId),timelineable_type:t.timelineableKey}).then(()=>{n({[t.timelineRelationship]:{id:t.timelineableId,is_pinned:!1,pinned_date:null}})})}return(r,s)=>{const i=c("ILink");return e.isPinned?(g(),R(i,{key:1,class:"text-sm/6 sm:text-xs/6",text:r.$t("core::timeline.unpin"),basic:"",onClick:a},null,8,["text"])):(g(),R(i,{key:0,class:"text-sm/6 sm:text-xs/6",text:r.$t("core::timeline.pin"),basic:"",onClick:o},null,8,["text"]))}}},Z1e={class:"hidden sm:relative sm:block sm:px-1.5"},Y1e={class:"min-w-0 flex-1 sm:py-1"},X1e={class:"flex justify-between space-x-4"},Q1e={class:"flex-1 md:flex md:items-center"},_o={__name:"BaseRecordTabTimelineItem",props:{heading:String,headingClass:[String,Object,Array],resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},isPinned:{type:Boolean,required:!0},createdAt:{type:String,required:!0},timelineRelationship:{type:String,required:!0},timelineSubjectKey:{type:String,required:!0},timelineableKey:{type:String,required:!0},timelineableId:{type:[Number,String],required:!0},icon:{type:String,required:!0}},setup(e){const{localizedDateTime:t}=it();return(n,o)=>{const a=c("Icon"),r=c("ITextDark"),s=c("ITextSmall");return g(),D(de,null,[_("div",Z1e,[_("div",{class:be([e.isPinned?"bg-warning-300":"bg-neutral-200 dark:bg-neutral-700","flex size-7 items-center justify-center rounded-full ring-8 ring-neutral-100 dark:ring-neutral-800"])},[l(a,{icon:e.icon,class:be(["size-5 sm:size-4",e.isPinned?"text-warning-900":"text-neutral-600 dark:text-neutral-100"])},null,8,["icon","class"])],2)]),_("div",Y1e,[_("div",X1e,[_("div",Q1e,[l(r,{class:be(["mr-2",e.headingClass])},{default:p(()=>[Ee(n.$slots,"heading",{},()=>[ne(K(e.heading),1)])]),_:3},8,["class"]),o[0]||(He(-1),(o[0]=l(s,{class:"whitespace-nowrap"},{default:p(()=>[Ee(n.$slots,"date",{},()=>[o[1]||(o[1]=_("span",{class:"hidden md:inline-block"},"-",-1)),ne(" "+K(v(t)(e.createdAt)),1)])]),_:3})).cacheIndex=0,He(1),o[0])]),l(K1e,{"resource-name":e.resourceName,"resource-id":e.resourceId,"timeline-subject-key":e.timelineSubjectKey,"timeline-relationship":e.timelineRelationship,"timelineable-key":e.timelineableKey,"timelineable-id":e.timelineableId,"is-pinned":e.isPinned},null,8,["resource-name","resource-id","timeline-subject-key","timeline-relationship","timelineable-key","timelineable-id","is-pinned"])]),Ee(n.$slots,"default")])],64)}}},J1e={class:"mt-3"},eye={__name:"RecordTabTimelineActivity",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{findTypeById:n}=kr(),o=P(()=>n(t.log.activity_type_id));return(a,r)=>(g(),R(_o,{"heading-class":"font-medium","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:o.value.icon,heading:a.$t("activities::activity.timeline.heading")},{default:p(()=>[_("div",J1e,[l(Xk,{"activity-id":e.log.id,title:e.log.title,"comments-count":e.log.comments_count,"is-completed":e.log.is_completed,"is-reminded":e.log.is_reminded,"is-due":e.log.is_due,"type-id":e.log.activity_type_id,"user-id":e.log.user_id,note:e.log.note,description:e.log.description,"reminder-minutes-before":e.log.reminder_minutes_before,"due-date":e.log.due_date,"end-date":e.log.end_date,"attachments-count":e.log.media.length,media:e.log.media,authorizations:e.log.authorizations,comments:e.log.comments||[],"associations-count":e.log.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["activity-id","title","comments-count","is-completed","is-reminded","is-due","type-id","user-id","note","description","reminder-minutes-before","due-date","end-date","attachments-count","media","authorizations","comments","associations-count","via-resource","via-resource-id","related-resource"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},tye={__name:"ActivitiesTypesIndex",setup(e){const t=Innoclapps.resourceName("activity-types"),{fetchActivityTypes:n}=kr();return(o,a)=>{const r=c("ICardHeading");return g(),R(Ui,{"resource-name":v(t),"with-cancel":!1,onCreated:v(n),onUpdated:v(n),onDeleted:v(n)},{header:p(()=>[l(r,{text:o.$t("activities::activity.type.types")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},nye={class:"space-y-8"},oye={__name:"SettingsActivities",setup(e){const{resetStoreState:t}=qe(),{form:n,submit:o,isReady:a}=Ao(),r=V(null),{typesByName:s}=kr();function i(u){n.default_activity_type=u.id,o(t)}return Se(a,()=>{r.value=s.value.find(u=>u.id==n.default_activity_type)},{once:!0}),(u,d)=>{const m=c("ICardHeading"),f=c("ICardHeader"),h=c("IFormSwitchLabel"),y=c("IFormSwitchDescription"),b=c("IFormSwitch"),I=c("IFormSwitchField"),w=c("IFormSwitchGroup"),k=c("ICustomSelect"),x=c("IFormGroup"),$=c("ICardBody"),C=c("ICard");return g(),D("div",nye,[_("div",null,[l(f,null,{default:p(()=>[l(m,{text:u.$t("activities::activity.activities")},null,8,["text"])]),_:1}),l(C,{overlay:!v(a)},{default:p(()=>[l($,{class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[l(w,null,{default:p(()=>[l(I,null,{default:p(()=>[l(h,{text:u.$t("activities::activity.settings.send_contact_email")},null,8,["text"]),l(y,{text:u.$t("activities::activity.settings.send_contact_email_info")},null,8,["text"]),l(b,{modelValue:v(n).send_contact_attends_to_activity_mail,"onUpdate:modelValue":d[0]||(d[0]=F=>v(n).send_contact_attends_to_activity_mail=F),onChange:v(o)},null,8,["modelValue","onChange"])]),_:1}),l(I,null,{default:p(()=>[l(h,{text:u.$t("activities::activity.settings.add_event_guests_to_contacts")},null,8,["text"]),l(y,{text:u.$t("activities::activity.settings.add_event_guests_to_contacts_info")},null,8,["text"]),l(b,{modelValue:v(n).add_event_guests_to_contacts,"onUpdate:modelValue":d[1]||(d[1]=F=>v(n).add_event_guests_to_contacts=F),onChange:v(o)},null,8,["modelValue","onChange"])]),_:1})]),_:1}),l(x,{class:"mt-3 pt-3","label-for":"default_activity_type",label:u.$t("activities::activity.type.default_type")},{default:p(()=>[l(k,{modelValue:r.value,"onUpdate:modelValue":d[2]||(d[2]=F=>r.value=F),"input-id":"default_activity_type",class:"xl:w-1/3",label:"name",clearable:!1,options:v(s),onOptionSelected:i},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(tye)])])}}},aye={class:"flex items-center space-x-1"},rye={__name:"ActivityDueDateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),{DateTime:r,timeFormatForLuxon:s,localizedTime:i,hasTime:u}=it(),d=V(""),m=V(""),f=V(""),h=V(""),y=P(()=>m.value&&!h.value),b=P(()=>xf("00:00",15,"minutes").map(F=>i(r.fromFormat(F,"HH:mm").toUTC().toISO()))),I=P(()=>h.value?w(f.value,h.value).toISO():f.value);function w(F,T){return r.fromFormat(`${F} ${r.fromFormat(`${F} ${T}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm")}`,"yyyy-MM-dd HH:mm").setZone(a("timezone"))}function k(F){Ot("update-end-time",F)}async function x(){await We(),!h.value&&m.value&&k("")}function $(F){o("update:modelValue",F)}function C(){let F=n.field.value;if(F)if(u(F)){const T=r.fromISO(F,{zone:a("timezone")}),S=T.toLocal();o("setInitialValue",T.toISO()),f.value=S.toISODate(),h.value=i(S.toUTC().toISO())}else o("setInitialValue",F),f.value=F;else{const T=r.now().setZone(a("timezone")).plus({hour:1}).startOf("hour"),S=T.toLocal();f.value=S.toISODate(),h.value=i(S.toUTC().toISO()),o("setInitialValue",T.toISO())}Ot("due-date-initial-value-set",{date:f.value,time:h.value})}return jt("end-time-changed",F=>m.value=F.newVal),jt("end-date-changed",F=>d.value=F.newVal),Xe(C),Se(I,F=>$(F)),Se(f,(F,T)=>Ot("due-date-changed",{newVal:F,oldVal:T})),Se(h,(F,T)=>{if(Ot("due-time-changed",{newVal:F,oldVal:T}),!m.value||m.value===f.value)return;let S=w(f.value,F),A=w(d.value,m.value),E=w(f.value,T),B=i(S.plus({minutes:A.diff(E,"minutes").minutes}).toISO());k(B)}),(F,T)=>{const S=c("IFormLabel"),A=c("DatePicker"),E=c("IFormInputDropdown"),B=c("BaseFormField");return g(),R(B,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:M,fieldId:N})=>[l(cn,{class:"relative",field:e.field,"field-id":N,"validation-errors":e.validationErrors},{default:p(()=>[l(S,{for:N+"-due-date",class:be(["mb-1 block",e.field.hideLabel?"sm:hidden":""]),label:F.$t("activities::activity.due_date"),required:e.field.isRequired},null,8,["for","class","label","required"]),_("div",aye,[l(A,Ue({id:N+"-due-date",modelValue:f.value,"onUpdate:modelValue":T[0]||(T[0]=G=>f.value=G),name:e.field.attribute,disabled:M,"with-icon":!1,required:e.field.isRequired},e.field.attributes),null,16,["id","modelValue","name","disabled","required"]),l(E,{modelValue:h.value,"onUpdate:modelValue":T[1]||(T[1]=G=>h.value=G),"max-height":"300px",items:b.value,placeholder:v(s),"input-id":N+"-due-time",class:be(["sm:max-w-[150px]",{"!border-danger-500 ring-danger-500 focus:border-danger-500 focus:ring-danger-500":y.value}]),condensed:"",onBlur:x,onCleared:x},null,8,["modelValue","items","placeholder","input-id","class"]),T[2]||(T[2]=_("div",{class:"absolute -right-3 hidden text-neutral-900 dark:text-neutral-300 md:block"}," - ",-1))])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},lye={class:"flex items-center space-x-1"},sye={__name:"ActivityEndDateField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),{DateTime:r,timeFormatForLuxon:s,localizedTime:i,hasTime:u}=it(),d=V(""),m=V(""),f=V(""),h=V(""),y=P(()=>!!(!m.value&&h.value&&d.value>f.value)),b=P(()=>{if(!h.value||d.value>f.value)return xf("00:00",15,"minutes",23).map(F=>i(r.fromFormat(F,"HH:mm").toUTC().toISO()));const C=r.fromFormat(`${f.value} ${h.value}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm");return xf(C,15,"minutes",23).map(F=>i(r.fromFormat(F,"HH:mm").toUTC().toISO()))}),I=P(()=>m.value?w(d.value,m.value).toISO():d.value);function w(C,F){return r.fromFormat(`${C} ${r.fromFormat(`${C} ${F}`,`yyyy-MM-dd ${s.value}`).toFormat("HH:mm")}`,"yyyy-MM-dd HH:mm").setZone(a("timezone"))}function k(){m.value||(m.value=h.value)}function x(C){o("update:modelValue",C)}function $(){let C=n.field.value;if(C)if(u(C)){const F=r.fromISO(C,{zone:a("timezone")}),T=F.toLocal();o("setInitialValue",F.toISO());let S=i(T.toUTC().toISO());d.value=T.toISODate(),S===h.value&&d.value===f.value?o("setInitialValue",F.toISODate()):(m.value=S,o("setInitialValue",F.toISO()))}else o("setInitialValue",C),d.value=C;else{let F;h.value?F=w(f.value,h.value):F=r.now().setZone(a("timezone")),o("setInitialValue",F.toISODate()),d.value=F.toISODate()}}return jt("due-date-initial-value-set",({date:C,time:F})=>{f.value=C,h.value=F,$()}),jt("update-end-time",C=>m.value=C),jt("due-time-changed",C=>h.value=C.newVal),jt("due-date-changed",C=>{f.value=C.newVal,C.newVal>d.value&&(d.value=C.newVal)}),Se(I,C=>x(C)),Se(h,C=>{C||(m.value="")}),Se(m,(C,F)=>Ot("end-time-changed",{newVal:C,oldVal:F})),Se(d,(C,F)=>Ot("end-date-changed",{newVal:C,oldVal:F})),(C,F)=>{const T=c("IFormLabel"),S=c("IFormInputDropdown"),A=c("DatePicker"),E=c("BaseFormField");return g(),R(E,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({readonly:B,fieldId:M})=>[l(cn,{field:e.field,"field-id":M,"validation-errors":e.validationErrors},{default:p(()=>[l(T,{for:M+"-end-date",class:be(["mb-1 block",e.field.hideLabel?"sm:hidden":""]),label:C.$t("activities::activity.end_date"),required:e.field.isRequired},null,8,["for","class","label","required"]),_("div",lye,[l(S,{modelValue:m.value,"onUpdate:modelValue":F[0]||(F[0]=N=>m.value=N),"max-height":"300px",items:b.value,"input-id":M+"-end-time",placeholder:v(s),disabled:!h.value,class:be(["sm:max-w-[150px]",{"!border-danger-500 ring-danger-500 focus:border-danger-500 focus:ring-danger-500":y.value}]),condensed:"",onShow:k},null,8,["modelValue","items","input-id","placeholder","disabled","class"]),l(A,Ue({id:M+"-end-date",modelValue:d.value,"onUpdate:modelValue":F[1]||(F[1]=N=>d.value=N),required:e.field.isRequired,"min-date":f.value,"with-icon":!1,name:e.field.attribute,disabled:B},e.field.attributes),null,16,["id","modelValue","required","min-date","name","disabled"])])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},iye={__name:"ActivityTypeField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue"),{typesForIconPicker:r}=kr();function s(){o("setInitialValue",Zt(n.field.value)?null:typeof n.field.value=="object"?n.field.value.id:n.field.value)}return s(),(i,u)=>{const d=c("IFormLabel"),m=c("IIconPicker"),f=c("BaseFormField");return g(),R(f,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:h})=>[l(cn,{field:e.field,"field-id":h,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[l(d,{class:"mb-1 block sm:hidden",for:h,label:i.$t("activities::activity.type.type")},null,8,["for","label"]),l(m,Ue({modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=y=>a.value=y),class:"flex-nowrap overflow-auto p-px sm:flex-wrap sm:overflow-visible","value-field":"id",size:"md",icons:v(r)},e.field.attributes),null,16,["modelValue","icons"])]),_:2},1032,["field","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},uye={class:"max-h-96 overflow-y-auto break-all px-1"},j1=2,cye=5,dye={__name:"ActivityGuestsSelect",props:{modelValue:{},contacts:{},guests:{}},emits:["update:modelValue","change"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{setLoading:s,isLoading:i}=Cn(),u=V(0),d=V(!1),m=V(""),f=V({}),h=V({}),y=V({}),b={},I={contacts:{title:r("contacts::contact.contacts"),resource:"contacts"},users:{title:r("users::user.users"),resource:"users"}},{users:w}=qe();Se(f,U=>{a("update:modelValue",U)},{deep:!0}),Se(()=>o.guests,()=>{G()});const k=P(()=>Object.keys(I)),x=P(()=>j1-u.value),$=P(()=>r("core::app.search_records")),C=P(()=>{let U=!1;return k.value.every(j=>(U=y.value[j]?y.value[j].records.length>0:!1,!U)),U}),F=P(()=>m.value!=""),T=P(()=>{let U=0;return k.value.forEach(j=>{U+=f.value[j]?f.value[j].length:0}),r("activities::activity.count_guests",U)}),S=P(()=>{if(C.value)return y.value;let U={},j=(O,H)=>{Mt(U[O].records,["id",parseInt(H.id)])===-1&&U[O].records.push(H)};return k.value.forEach(O=>{U[O]=Object.assign({},I[O],{records:[]}),o.guests&&Vo(o.guests,["resource_name",O]).forEach(H=>j(O,H)),h.value[O]&&h.value[O].records.forEach(H=>j(O,H))}),w.value.forEach(O=>j("users",O)),o.contacts.forEach(O=>j("contacts",O)),Fn(U,O=>(O.records=mr(O.records,"guest_display_name"),O))});function A(U){let j=[];return k.value.forEach(O=>{j.push(Innoclapps.request().get(`/${O}/search`,{params:{q:U,take:cye},cancelToken:new ol(H=>b[O]=H)}))}),j}function E(){Object.keys(b).forEach(U=>{b[U]&&b[U]()})}function B(U,j,O){!h.value[j]&&O&&(h.value[j]={records:[],is_search:O}),We(()=>{if(f.value[j].includes(U.id)&&O)h.value[j].records.push(U);else if(h.value[j]){let H=Mt(h.value[j].records,["id",parseInt(U.id)]);H!=-1&&h.value[j].records.splice(H,1)}a("change",f.value)})}function M(){m.value="",N("")}function N(U){const j=U.length;if(j===0){y.value={};return}if(u.value=j,j<j1)return d.value=!0,U;d.value=!1,E(),s(!0),Promise.all(A(U)).then(O=>{k.value.forEach((H,W)=>{y.value[H]=Object.assign({},I[H],{records:Fn(O[W].data,X=>(X.from_search=!0,X)),is_search:!0})}),s(!1)})}function G(){let U={};k.value.forEach(j=>{let O=[];o.modelValue&&o.modelValue[j]&&(O=Ml(o.modelValue[j][0])?Fn(o.modelValue[j],"id"):o.modelValue[j]),o.guests&&(O=O.concat(Fn(Vo(o.guests,["resource_name",j]),"id"))),U[j]=Wk(O)}),f.value=U}return Xe(()=>{We(G)}),t({setSelectedGuests:G}),(U,j)=>{const O=c("IPopoverButton"),H=c("IPopoverHeading"),W=c("IPopoverHeader"),X=c("IFormInput"),q=c("IButton"),L=c("IFormGroup"),ee=c("IText"),ce=c("ITextDark"),ue=c("IFormCheckbox"),oe=c("IFormCheckboxLabel"),re=c("IFormCheckboxDescription"),Y=c("IFormCheckboxField"),ae=c("IPopoverBody"),se=c("IOverlay"),xe=c("IPopoverPanel"),le=c("IPopover");return g(),R(le,{onHide:M},{default:p(()=>[l(O,{link:""},{default:p(()=>[ne(K(T.value),1)]),_:1}),l(xe,{class:"w-72"},{default:p(()=>[l(se,{show:v(i)},{default:p(()=>[l(W,null,{default:p(()=>[l(H,{text:U.$t("activities::activity.guests")},null,8,["text"])]),_:1}),l(ae,null,{default:p(()=>[l(L,{class:"relative"},{default:p(()=>[l(X,{modelValue:m.value,"onUpdate:modelValue":j[0]||(j[0]=ge=>m.value=ge),class:"pr-8",placeholder:$.value,debounce:"",onInput:N},null,8,["modelValue","placeholder"]),te(l(q,{class:"absolute right-1.5 top-1.5 sm:top-1",icon:"XSolid",basic:"",small:"",onClick:M},null,512),[[fe,m.value]])]),_:1}),te(l(ee,{class:"text-center",text:U.$t("core::app.no_search_results")},null,8,["text"]),[[fe,F.value&&!C.value&&!v(i)&&!d.value]]),te(l(ee,{class:"text-center",text:U.$t("core::app.type_more_to_search",{characters:x.value})},null,8,["text"]),[[fe,F.value&&d.value]]),_("div",uye,[(g(!0),D(de,null,Ie(S.value,ge=>(g(),D("div",{key:ge.resource},[te(l(ce,{class:"mb-2 mt-3 font-medium",text:ge.title},null,8,["text"]),[[fe,ge.records.length>0]]),(g(!0),D(de,null,Ie(ge.records,ve=>(g(),R(Y,{key:ge.resource+"-"+ve.id,class:"mb-2 gap-y-0"},{default:p(()=>[l(ue,{checked:f.value[ge.resource],"onUpdate:checked":ie=>f.value[ge.resource]=ie,value:ve.id,onChange:ie=>B(ve,ge.resource,ge.is_search)},null,8,["checked","onUpdate:checked","value","onChange"]),l(oe,{text:ve.guest_display_name},null,8,["text"]),l(re,{class:be(ve.guest_email?"-mt-1":""),text:ve.guest_email},null,8,["class","text"])]),_:2},1024))),128))]))),128))])]),_:1})]),_:1},8,["show"])]),_:1})]),_:1})}}},mye={class:"block"},fye={class:"inline-block"},pye={__name:"GuestsSelectField",props:{field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean,modelValue:{type:Object,default:()=>({contacts:[],users:[]})}},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=V([]),r=V(null),s=P(()=>n.field.contacts||[]);function i(d){o("update:modelValue",d)}function u(){a.value=n.field.value||[];const d={contacts:[],users:[]};a.value.forEach(m=>{m.resource_name==="users"?d.users.push(m.id):d.contacts.push(m.id)}),o("setInitialValue",d)}return u(),(d,m)=>{const f=c("BaseFormField");return g(),R(f,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:h})=>[l(cn,{field:e.field,label:e.field.label,"field-id":h,"validation-errors":e.validationErrors,"as-paragraph-label":""},{default:p(()=>[_("div",mye,[_("div",fye,[l(dye,{ref_key:"guestsSelectRef",ref:r,placement:"bottom-start","model-value":e.modelValue,guests:a.value,contacts:s.value,"onUpdate:modelValue":i},null,8,["model-value","guests","contacts"])])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},vye={key:0},hye={__name:"ActivityDueDateField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{localizedDate:n,localizedDateTime:o,hasTime:a}=it(),r=P(()=>{const s=t.row[t.column.attribute];return s?a(s)?o(s):n(s):""});return(s,i)=>{const u=c("BaseIndexField");return g(),R(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:d})=>[ne(K(r.value)+" ",1),d?Z("",!0):(g(),D("span",vye,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},gye={key:0},bye={__name:"ActivityEndDateField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{localizedDate:n,localizedDateTime:o,hasTime:a}=it(),r=P(()=>{const s=t.row[t.column.attribute];return s?a(s)?o(s):n(s):""});return(s,i)=>{const u=c("BaseIndexField");return g(),R(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:d})=>[ne(K(r.value)+" ",1),d?Z("",!0):(g(),D("span",gye,"—"))]),_:1},8,["resource-name","resource-id","row","field"])}}},yye={__name:"ActivityTypeField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>[l(Ha,{value:e.field.value,"label-key":e.field.labelKey,"on-option-click":e.field.onOptionClick,"display-as-badges":!0},null,8,["value","label-key","on-option-click"])]),_:1},8,["resource-name","resource-id","row","field"])}}},_ye={class:"h-full w-full bg-white dark:bg-neutral-900"},wye={class:"block self-start truncate font-normal"},Iye=["textContent"],xye={__name:"FullCalendarEvent",props:{arg:{type:Object,required:!0},color:{type:String,required:!0},minHeight:{type:Number,default:26}},setup(e){const t=e,{DateTime:n,localizedTime:o}=it(),a=V(!0),r=P(()=>t.arg.view.type==="dayGridMonth"),s=P(()=>!a.value||r.value),i=P(()=>{const{arg:d}=t;if(d.event.allDay)return"";let m=n.fromISO(d.event.startStr),f,h=o(m.toUTC().toISO());if(d.isMirror&&d.isDragging&&d.event.extendedProps.isAllDay?f=n.fromISO(d.event.startStr).plus({hours:1}):(d.isMirror&&d.isResizing||d.isMirror&&d.isDragging||d.event.endStr&&d.event.extendedProps.hasEndTime===!0)&&d.event.endStr!=d.event.startStr&&(f=n.fromISO(d.event.endStr)),f){let y=o(f.toUTC().toISO());f.day!=m.day?h+=" - "+y+" "+f.toFormat("LLL d"):h+=" - "+y}return h});function u(){let d;t.arg.isMirror?d=document.querySelector(".fc-event-mirror"):d=document.getElementById(`event-${t.arg.event.id}`),a.value=d.offsetHeight<=t.minHeight-1}return Jr(u),Xe(u),(d,m)=>{const f=c("IBadge");return g(),D("div",_ye,[l(f,{id:"event-"+e.arg.event.id,class:"h-full w-full",color:e.color},{default:p(()=>[_("div",wye,[Ee(d.$slots,"default",{usesExtendedView:s.value,timeForDisplay:i.value},()=>[_("span",{textContent:K(e.arg.event.title)},null,8,Iye)])])]),_:3},8,["id","color"])])}}},kye={class:"space-x-0.5"},Qk={__name:"ActivitiesNavbarViewSelector",props:{active:{type:String,required:!0}},setup(e){return(t,n)=>{const o=c("IButton"),a=ze("i-tooltip");return g(),D("div",kye,[te(l(o,{icon:"TableCells",to:{name:"activity-index"},active:e.active==="index",basic:""},null,8,["active"]),[[a,t.$t("core::app.list_view"),void 0,{bottom:!0}]]),te(l(o,{icon:"Calendar",to:{name:"activity-calendar"},active:e.active==="calendar",basic:""},null,8,["active"]),[[a,t.$t("activities::calendar.calendar"),void 0,{bottom:!0}]])])}}},$ye={class:"px-3 py-4 sm:px-5"},Cye={key:0,class:"block space-x-1 opacity-90"},Sye=["textContent"],Tye=["textContent"],Eye=["textContent"],Fye={key:1},Aye={class:"flex items-center space-x-2"},Rye={key:0,class:"flex items-center space-x-2"},Dye={__name:"ActivitiesCalendar",setup(e){const t=Innoclapps.resourceName("activities"),{setLoading:n,isLoading:o}=Cn(),{floatResourceInEditMode:a}=Ro(),{currentUser:r,users:s}=qe(),{DateTime:i}=it(),{typesByName:u,findTypeById:d}=kr(),{updateResource:m}=qt(t),f=V(null),h=V(null),y=V(null),b=V(!1),I=qi("activitiesCalendar",{activity_type_id:null,user_id:r.value.id}),w=P(()=>s.value.find(G=>G.id==I.value.user_id)),k=P(()=>d(I.value.activity_type_id));Se(()=>[I.value.activity_type_id,I.value.user_id],M);function x(G,U,j){Innoclapps.request("/calendar",{params:{resource_name:t,activity_type_id:I.value.activity_type_id,user_id:I.value.user_id,start_date:i.fromJSDate(G.start).toUTC().toFormat("yyyy-MM-dd HH:mm:ss"),end_date:i.fromJSDate(G.end).toUTC().toFormat("yyyy-MM-dd HH:mm:ss")}}).then(({data:O})=>U(B(O))).catch(O=>{console.error(O),j("Error while retrieving events",O)})}function $(G){h.value=G.allDay?G.dateStr:i.fromISO(I.dateStr).toUTC().toISO(),y.value=G.allDay?G.dateStr:i.fromISO(G.dateStr).toUTC().toISODate(),b.value=!0}function C(G){const{id:U,allDay:j,startStr:O,endStr:H}=G.event;if(j){m({due_date:O,end_date:E(H)},U);return}const W=i.fromISO(O).toUTC(),X=i.fromISO(H).toUTC();m({due_date:W.toISO(),end_date:X.toISO()},U)}function F(G){const U={},{event:j}=G,{allDay:O,startStr:H,endStr:W}=j;if(O)U.due_date=H,j.end?U.end_date=E(W):U.end_date=U.due_date,j.setExtendedProp("isAllDay",!0),j.setEnd(A(U.end_date));else{const X=i.fromISO(H).toUTC();if(U.due_date=X.toISO(),G.oldEvent.allDay&&!O){let q=i.fromISO(H).plus({hours:1});U.end_date=q.toUTC().toISO(),j.setEnd(q.toISO()),j.setExtendedProp("hasEndTime",!0)}else U.end_date=W?i.fromISO(W).toUTC().toISODate():U.due_date,(G.view.type!=="dayGridMonth"||j.extendedProps.hasEndTime)&&(U.end_date=W?i.fromISO(W).toUTC().toISO():U.due_date,j.setExtendedProp("hasEndTime",!0));j.setExtendedProp("isAllDay",!1)}m(U,j.id)}function T(){M(),b.value=!1}function S(){b.value=!1,h.value=null,y.value=null}function A(G){return i.fromISO(G).plus({days:1}).toISODate()}function E(G){return i.fromISO(G).minus({days:1}).toISODate()}function B(G){return G.map(U=>{if(U.backgroundColor="inherit",U.borderColor="transparent",U.extendedProps.isAllDay=U.allDay,U.allDay)U.end=A(U.end);else if(/\d{4}-\d{2}-\d{2}\T?\d{2}:\d{2}:\d{2}$/.test(U.end))U.extendedProps.hasEndTime=!0;else{const j=i.fromISO(U.start),O=i.fromISO(U.end);U.end=O.set({hour:j.hour,minute:j.minute,second:0}).plus({minutes:30}).toFormat("yyyy-MM-dd'T'HH:mm:ss"),U.extendedProps.hasEndTime=!1}return U.readonly&&(U.editable=!1),U})}function M(){f.value.refresh()}const{stopListening:N}=ou(`Modules.Users.Models.User.${r.value.id}`,".Modules\\Activities\\Events\\CalendarSyncFinished",M);return mn(N),jt("floating-resource-hidden",M),(G,U)=>{const j=c("NavbarSeparator"),O=c("IButton"),H=c("NavbarItems"),W=c("IFormLabel"),X=c("IDropdownButton"),q=c("IDropdownItem"),L=c("IDropdownSeparator"),ee=c("IDropdownMenu"),ce=c("IDropdown"),ue=c("FullCalendar"),oe=c("CreateActivityModal"),re=c("MainLayout");return g(),R(re,{overlay:v(o),"no-padding":""},{actions:p(()=>[l(j,{class:"hidden lg:block"}),l(H,null,{default:p(()=>[l(Qk,{active:"calendar"}),l(O,{icon:"PlusSolid",variant:"primary",text:G.$t("activities::activity.create"),onClick:U[0]||(U[0]=Y=>b.value=!0)},null,8,["text"])]),_:1})]),default:p(()=>[_("div",$ye,[l(ue,{ref_key:"calendarRef",ref:f,"calendar-id":"activities",config:{events:x},onEventDrop:F,onEventResize:C,onLoading:v(n),onEventClick:U[3]||(U[3]=Y=>v(a)({resourceName:v(t),resourceId:parseInt(Y.event.id)})),onDateClick:$},{eventContent:p(Y=>[l(xye,{color:Y.event.extendedProps.type.swatch_color,arg:Y},{default:p(({usesExtendedView:ae,timeForDisplay:se})=>[ae?(g(),D(de,{key:0},[ae?(g(),D("span",Cye,[Y.event.allDay?Z("",!0):(g(),D("span",{key:0,textContent:K(se)},null,8,Sye)),_("span",{textContent:K(Y.event.extendedProps.type.name)},null,8,Tye)])):Z("",!0),_("span",{class:"font-semibold",textContent:K(Y.event.title)},null,8,Eye)],64)):(g(),D("span",Fye,K(se+" "+Y.event.extendedProps.type.name+" - "+Y.event.title),1))]),_:2},1032,["color","arg"])]),header:p(()=>[_("div",Aye,[l(W,{label:G.$t("activities::activity.type.type")},null,8,["label"]),l(ce,null,{default:p(()=>{var Y;return[l(X,{as:v(Od),color:k.value?k.value.swatch_color:"#94a3b8",text:((Y=k.value)==null?void 0:Y.name)||G.$t("core::app.all")},null,8,["as","color","text"]),l(ee,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(u),ae=>(g(),R(q,{key:ae.id,text:ae.name,icon:ae.icon,active:v(I).activity_type_id===ae.id,onClick:se=>v(I).activity_type_id=ae.id},null,8,["text","icon","active","onClick"]))),128)),l(L),l(q,{text:G.$t("core::app.all"),active:!v(I).activity_type_id,onClick:U[1]||(U[1]=ae=>v(I).activity_type_id=null)},null,8,["text","active"])]),_:1})]}),_:1})]),G.$gate.userCan("view all activities")?(g(),D("div",Rye,[l(W,{label:G.$t("activities::activity.owner")},null,8,["label"]),l(ce,null,{default:p(()=>{var Y;return[l(X,{text:((Y=w.value)==null?void 0:Y.name)||G.$t("core::app.all"),basic:""},null,8,["text"]),l(ee,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(s),ae=>(g(),R(q,{key:ae.id,text:ae.name,active:v(I).user_id===ae.id,onClick:se=>v(I).user_id=ae.id},null,8,["text","active","onClick"]))),128)),l(L),l(q,{text:G.$t("core::app.all"),active:!v(I).user_id,onClick:U[2]||(U[2]=ae=>v(I).user_id=null)},null,8,["text","active"])]),_:1})]}),_:1})])):Z("",!0)]),_:1},8,["config","onLoading"]),l(oe,{visible:b.value,"due-date":h.value,"end-date":y.value,onCreated:T,onHidden:S},null,8,["visible","due-date","end-date"])])]),_:1},8,["overlay"])}}},Oye={};function Pye(e,t){const n=c("CreateActivityModal");return g(),R(n,{"with-extended-submit-buttons":!0})}const Mye=an(Oye,[["render",Pye]]),z1={__name:"ActivitiesEdit",setup(e){const t=Innoclapps.resourceName("activities"),n=Ct(),o=P(()=>parseInt(n.params.id)),{t:a}=Pe(),r=wt(),{fields:s,hasFields:i,hydrateFields:u,getUpdateFields:d}=In(),{resource:m,fetchResource:f,synchronizeResource:h,incrementResourceCount:y,decrementResourceCount:b,updateResource:I}=eu(t,o);st("hydrateFields",u),st("synchronizeResource",h),st("synchronizeResourceSilently",h),st("incrementResourceCount",y),st("decrementResourceCount",b);function w($){$.destroyable?r.push({name:"activity-index"}):x()}async function k($){await I($),Innoclapps.success(a("core::resource.updated"))}async function x(){await f(),s.value=await d(t,o.value),u(m.value)}return x(),($,C)=>(g(),R(Yk,{"update-using":k,"is-ready":v(i),fields:v(s),resource:v(m),onActionExecuted:w,onHidden:C[0]||(C[0]=F=>$.$router.back())},null,8,["is-ready","fields","resource"]))}},Bye={key:1,class:"m-auto mt-8 max-w-5xl"},Nye={class:"flex items-center space-x-1"},Vye={__name:"ActivitiesIndex",setup(e){const{resourceName:t,resourceInformation:n}=qt("activities"),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=P(()=>a.value&&r.value);function i(u){a.value=u.isPreEmpty,r.value=!0}return(u,d)=>{const m=c("NavbarSeparator"),f=c("IDropdownItem"),h=c("IDropdownMinimal"),y=c("IButton"),b=c("NavbarItems"),I=c("IOverlay"),w=c("IEmptyState"),k=c("ResourceTable"),x=c("ResourceExport"),$=c("RouterView"),C=c("MainLayout");return g(),R(C,null,{actions:p(()=>[l(m,{class:"hidden lg:block"}),l(b,null,{default:p(()=>[l(h,{placement:a.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[v(n).authorizedToImport?(g(),R(f,{key:0,icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:v(t)}},text:u.$t("core::resource.import",{resource:v(n).label})},null,8,["to","text"])):Z("",!0),v(n).authorizedToExport?(g(),R(f,{key:1,icon:"DocumentDownload",text:u.$t("core::resource.export",{resource:v(n).label}),onClick:d[0]||(d[0]=F=>u.$dialog.show("export-modal"))},null,8,["text"])):Z("",!0),v(n).usesSoftDeletes?(g(),R(f,{key:2,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:u.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),l(Qk,{active:"index"}),te(l(y,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-activity"},text:u.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!a.value]])]),_:1})]),default:p(()=>[r.value?Z("",!0):(g(),R(I,{key:0,show:""})),s.value?(g(),D("div",Bye,[l(w,zt(Qt({to:{name:"create-activity"},title:u.$t("activities::activity.empty_state.title"),buttonText:u.$t("activities::activity.create"),description:u.$t("activities::activity.empty_state.description"),secondButtonText:u.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:v(t)}}})),null,16)])):Z("",!0),te(_("div",null,[l(k,{"resource-name":v(t),onLoaded:i},{title:p(({row:F})=>[_("div",Nye,[F.authorizations.update?(g(),R(Vd,{key:0,class:"mr-1 mt-0.5","is-completed":F.is_completed,"activity-id":F.id,onChanged:v(o)},null,8,["is-completed","activity-id","onChanged"])):Z("",!0),_("span",null,K(F.title),1)])]),_:1},8,["resource-name"])],512),[[fe,!a.value]]),l(x,{"resource-name":v(t)},null,8,["resource-name"]),l($,{name:"create",onCreated:d[1]||(d[1]=({isRegularAction:F,action:T})=>(v(o)(),F||T==="go-to-list"?u.$router.back():void 0)),onHidden:u.$router.back},null,8,["onHidden"]),l($,{name:"edit"})]),_:1})}}},Lye={},qye={id:"Layer_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"};function Uye(e,t){return g(),D("svg",qye,t[0]||(t[0]=[_("path",{style:{fill:"#fbbb00"},d:`M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256
    c0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456
    C103.821,274.792,107.225,292.797,113.47,309.408z`},null,-1),_("path",{style:{fill:"#518ef8"},d:`M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451
    c-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535
    c29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z`},null,-1),_("path",{style:{fill:"#28b446"},d:`M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512
    c-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771
    c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z`},null,-1),_("path",{style:{fill:"#f14336"},d:`M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012
    c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0
    C318.115,0,375.068,22.126,419.404,58.936z`},null,-1)]))}const Jk=an(Lye,[["render",Uye]]),jye={},zye={id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"};function Hye(e,t){return g(),D("svg",zye,t[0]||(t[0]=[_("path",{style:{fill:"#1976d2"},d:`M496,112.011H272c-8.832,0-16,7.168-16,16s7.168,16,16,16h177.376l-98.304,76.448l-70.496-44.832
    l-17.152,27.008l80,50.88c2.592,1.664,5.6,2.496,8.576,2.496c3.456,0,6.944-1.12,9.824-3.36L480,160.715v207.296H272
    c-8.832,0-16,7.168-16,16s7.168,16,16,16h224c8.832,0,16-7.168,16-16v-256C512,119.179,504.832,112.011,496,112.011z`},null,-1),_("path",{style:{fill:"#2196f3"},d:`M282.208,19.691c-3.648-3.04-8.544-4.352-13.152-3.392l-256,48C5.472,65.707,0,72.299,0,80.011v352
    c0,7.68,5.472,14.304,13.056,15.712l256,48c0.96,0.192,1.952,0.288,2.944,0.288c3.712,0,7.328-1.28,10.208-3.68
    c3.68-3.04,5.792-7.584,5.792-12.32v-448C288,27.243,285.888,22.731,282.208,19.691z`},null,-1),_("path",{style:{fill:"#fafafa"},d:`M144,368.011c-44.096,0-80-43.072-80-96s35.904-96,80-96s80,43.072,80,96
    S188.096,368.011,144,368.011z M144,208.011c-26.464,0-48,28.704-48,64s21.536,64,48,64s48-28.704,48-64
    S170.464,208.011,144,208.011z`},null,-1)]))}const e5=an(jye,[["render",Hye]]),Wye={class:"flex justify-center space-x-2 py-3"},Gye=["onClick"],H1="flex flex-col items-center space-y-1 rounded-lg border border-neutral-200 px-5 py-3 shadow-sm hover:bg-neutral-100 dark:border-neutral-700 dark:hover:bg-neutral-800",Kye={__name:"CalendarSyncConnectAccount",setup(e){const{isGoogleApiConfigured:t,isMicrosoftGraphConfigured:n,scriptConfig:o}=qe(),a=[{id:"google",title:"Google Calendar",icon:Jk,settingsRouteName:"settings-integrations-google",popoverContentLangKey:"activities::calendar.missing_google_integration",configured:t()},{id:"microsoft",title:"Outlook Calendar",icon:e5,settingsRouteName:"settings-integrations-microsoft",popoverContentLangKey:"activities::calendar.missing_outlook_integration",configured:n()}];function r(s){window.location.href=`${o("url")}/calendar/sync/${s}/connect`}return(s,i)=>{const u=c("IPopoverButton"),d=c("ILink"),m=c("IText"),f=c("IPopoverBody"),h=c("IPopoverPanel"),y=c("IPopover"),b=c("IModal");return g(),R(b,{id:"calendarConnectNewAccountModal",size:"sm",title:s.$t("core::oauth.connect_new_account"),"sub-title":s.$t("activities::calendar.choose_oauth_account"),"hide-footer":""},{default:p(()=>[_("div",Wye,[(g(),D(de,null,Ie(a,I=>(g(),D(de,{key:I.id},[I.configured?(g(),D("button",{key:0,type:"button",class:be(["text-base text-neutral-800 dark:text-neutral-200 sm:text-sm",H1]),onClick:w=>r(I.id)},[(g(),R(_t(I.icon),{class:"mb-2"})),ne(" "+K(I.title),1)],10,Gye)):(g(),R(y,{key:1,placement:"top"},{default:p(()=>[l(u,{as:"button",class:be(["text-base text-neutral-800 dark:text-neutral-200 sm:text-sm",H1])},{default:p(()=>[(g(),R(_t(I.icon),{class:"mb-2"})),ne(" "+K(I.title),1)]),_:2},1032,["class"]),l(h,{class:"max-w-xs sm:max-w-sm"},{default:p(()=>[l(f,null,{default:p(()=>[l(m,{class:"whitespace-pre-wrap"},{default:p(()=>[ne(K(s.$t(I.popoverContentLangKey))+" ",1),s.$gate.isSuperAdmin()?(g(),R(d,{key:0,class:"mt-2 block text-right",text:s.$t("core::settings.go_to_settings"),to:{name:I.settingsRouteName}},null,8,["text","to"])):Z("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))],64))),64))])]),_:1},8,["title","sub-title"])}}},Zye={class:"mx-auto max-w-5xl"},Yye={key:1},Xye={key:0,class:"pb-4 pt-6"},Qye={class:"mx-auto flex max-w-lg flex-col items-center text-center"},Jye={class:"mt-3 text-lg/6 font-semibold text-neutral-900 dark:text-white sm:text-base/6"},e_e={class:"mt-10 block sm:inline-flex sm:items-center sm:space-x-2"},t_e={key:1,class:"mx-auto max-w-2xl space-y-3 pb-6"},n_e={key:2},o_e=["textContent"],a_e={class:"mb-3"},r_e={class:"grid grid-cols-12 gap-1 lg:gap-6"},l_e={class:"col-span-12 self-start lg:col-span-3 lg:flex lg:items-center lg:justify-end"},s_e={class:"col-span-12 lg:col-span-4"},i_e={class:"mb-3"},u_e={class:"grid grid-cols-12 gap-1 lg:gap-6"},c_e={class:"col-span-12 self-start lg:col-span-3 lg:flex lg:items-center lg:justify-end"},d_e={class:"col-span-12 lg:col-span-4"},m_e={class:"grid grid-cols-12 gap-1 lg:gap-6"},f_e={class:"col-span-12 lg:col-span-3 lg:text-right"},p_e={class:"col-span-12 lg:col-span-4"},v_e={class:"flex flex-col lg:flex-row lg:items-center"},h_e={class:"mb-2 grow lg:mb-0"},g_e={class:"flex items-center space-x-2"},b_e={__name:"CalendarSync",setup(e){const{t}=Pe(),n=Ct(),{localizedDateTime:o}=it(),{scriptConfig:a}=qe(),{form:r}=Qe(),{typesByName:s}=kr(),i=V(!1),u=V(!1),d=V(null),m=V(null),f=V(null),h=V(!1),y=V([]),b=V([]),I=P(()=>y.value.length>0),w=P(()=>s.value.find(M=>M.id==r.activity_type_id)),k=P(()=>b.value.find(M=>M.id==r.calendar_id)),x=P(()=>!f.value||!f.value.account?!1:f.value.account.requires_auth),$=P(()=>{if(!m.value&&!f.value||f.value&&f.value.is_sync_stopped)return"";if(!f.value)return t("activities::calendar.only_future_events_will_be_synced");const M=Vo(f.value.previously_used,["calendar_id",r.calendar_id]);return f.value.calendar_id===r.calendar_id&&!m.value?t("activities::calendar.events_being_synced_from",{date:o(f.value.start_sync_from)}):m.value||f.value.calendar_id!==r.calendar_id?M.length>0?t("activities::calendar.events_will_sync_from",{date:o(M[0].start_sync_from)}):f.value.calendar_id===r.calendar_id?t("activities::calendar.events_will_sync_from",{date:o(f.value.start_sync_from)}):t("activities::calendar.only_future_events_will_be_synced"):""});function C(){return Vt(y.value,M=>new Date(M.created_at),["desc"])[0]}function F(){r.clear().set({access_token_id:null,activity_type_id:a("activities.default_activity_type_id"),activity_types:s.value.map(M=>M.id),calendar_id:null})}function T(M){m.value=M,r.fill("access_token_id",M.id),E(M.id).then(N=>{r.set("calendar_id",N[0].id)})}function S(){r.post("/calendar/account").then(M=>{f.value=M,m.value=null})}function A(){h.value=!0,Innoclapps.request().delete("/calendar/account").then(({data:M})=>{f.value=M,m.value=null,F()}).finally(()=>h.value=!1)}async function E(M){u.value=!0,d.value=null;try{let{data:N}=await Innoclapps.request(`/calendars/${M}`);return b.value=N,N}catch(N){throw d.value=N.response.data.message,N}finally{u.value=!1}}function B(M){r.set({activity_type_id:M.activity_type_id,activity_types:M.activity_types,access_token_id:M.account?M.account.id:null})}return F(),Promise.all([Innoclapps.request("oauth/accounts"),Innoclapps.request("calendar/account")]).then(M=>{y.value=M[0].data,f.value=M[1].data,f.value&&B(f.value),n.query.viaOAuth?T(C()):f.value.account&&!x.value&&E(f.value.account.id).then(()=>{r.set("calendar_id",f.value.calendar_id)}),i.value=!0}),(M,N)=>{const G=c("IBadge"),U=c("ICardHeading"),j=c("ITextDark"),O=c("I18nT"),H=c("IText"),W=c("ICardHeader"),X=c("IAlertBody"),q=c("IAlert"),L=c("Icon"),ee=c("IButton"),ce=c("IFormLabel"),ue=c("ICustomSelect"),oe=c("IFormError"),re=c("IFormCheckbox"),Y=c("IFormCheckboxLabel"),ae=c("IFormCheckboxField"),se=c("ICardBody"),xe=c("ICardFooter"),le=c("ICard"),ge=c("MainLayout"),ve=ze("t"),ie=ze("dialog");return g(),R(ge,null,{default:p(()=>[_("div",Zye,[l(W,null,{default:p(()=>[_("div",null,[l(U,{class:"flex items-center"},{default:p(()=>[ne(K(M.$t("activities::calendar.calendar_sync"))+" ",1),f.value&&!f.value.is_sync_disabled&&!f.value.is_sync_stopped?(g(),R(G,{key:0,class:"ml-2",variant:"success",icon:"Refresh",text:f.value.is_synchronizing_via_webhook?"Webhook":"Polling"},null,8,["text"])):Z("",!0)]),_:1}),m.value&&(!f.value||f.value&&f.value.is_sync_disabled)?(g(),R(H,{key:0},{default:p(()=>[l(O,{scope:"global",keypath:"activities::calendar.account_being_connected"},{email:p(()=>[l(j,{as:"span",class:"font-medium",text:m.value.email},null,8,["text"])]),_:1})]),_:1})):Z("",!0)])]),_:1}),l(le,{overlay:!i.value},{default:p(()=>[l(se,null,{default:p(()=>[d.value?(g(),R(q,{key:0,variant:"warning",dismissible:"",onDismissed:N[0]||(N[0]=me=>d.value=null)},{default:p(()=>[l(X,{text:d.value},null,8,["text"])]),_:1})):Z("",!0),(!f.value||f.value&&f.value.is_sync_disabled||!f.value.account)&&!m.value?(g(),D("div",Yye,[l(Kye),!f.value||f.value&&f.value.is_sync_disabled?(g(),D("div",Xye,[_("div",Qye,[l(L,{icon:"ArrowPathRoundedSquare",class:"h-12 w-12 text-neutral-400"}),te(_("h4",Jye,null,512),[[ve,"activities::calendar.connect_account"]]),l(H,{class:"mt-1"},{default:p(()=>[ne(K(M.$t("activities::calendar.no_account_connected")),1)]),_:1}),_("div",e_e,[te((g(),R(ee,{variant:"primary",soft:""},{default:p(()=>[ne(K(M.$t("core::oauth.add"))+" ",1),N[5]||(N[5]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1})),[[ie,"calendarConnectNewAccountModal"]]),te(l(H,{text:M.$t("core::oauth.or_choose_existing")},null,8,["text"]),[[fe,I.value]])])])])):Z("",!0),I.value&&!m.value?(g(),D("div",t_e,[(g(!0),D(de,null,Ie(y.value,me=>(g(),R(pc,{key:me.id,account:me},{default:p(()=>[l(ee,{class:"ml-2",variant:"info",disabled:me.requires_auth,text:M.$t("core::oauth.connect"),soft:"",onClick:Ce=>T(me)},null,8,["disabled","text","onClick"])]),_:2},1032,["account"]))),128))])):Z("",!0)])):Z("",!0),m.value||f.value&&!f.value.is_sync_disabled?(g(),D("div",n_e,[f.value&&!f.value.is_sync_disabled&&f.value.account?(g(),R(pc,{key:0,class:"mb-10",account:f.value.account},gn({default:p(()=>[l(ee,{variant:"danger",class:"ml-2",disabled:h.value,loading:h.value,onClick:A},{default:p(()=>[ne(K(f.value.is_sync_stopped?M.$t("core::app.cancel"):M.$t("core::oauth.stop_syncing")),1)]),_:1},8,["disabled","loading"])]),_:2},[f.value.sync_state_comment?{name:"after-name",fn:p(()=>[_("span",{class:"text-base/6 text-danger-500 sm:text-sm/6",textContent:K(f.value.sync_state_comment)},null,8,o_e)]),key:"0"}:void 0]),1032,["account"])):Z("",!0),_("div",a_e,[_("div",r_e,[_("div",l_e,[l(ce,{as:"p",label:M.$t("activities::calendar.calendar")},null,8,["label"])]),_("div",s_e,[l(ue,{label:"title",options:b.value,"model-value":k.value,loading:u.value,disabled:x.value,placeholder:u.value?M.$t("core::app.loading"):"",clearable:!1,onOptionSelected:N[1]||(N[1]=me=>v(r).calendar_id=me.id)},null,8,["options","model-value","loading","disabled","placeholder"]),l(H,{class:"mt-2",text:M.$t("activities::calendar.sync_support_only_primary")},null,8,["text"]),l(oe,{error:v(r).getError("calendar_id")},null,8,["error"])])])]),_("div",i_e,[_("div",u_e,[_("div",c_e,[l(ce,{as:"p",label:M.$t("activities::calendar.save_events_as")},null,8,["label"])]),_("div",d_e,[l(ue,{label:"name",options:v(s),"model-value":w.value,clearable:!1,onOptionSelected:N[2]||(N[2]=me=>v(r).activity_type_id=me.id)},null,8,["options","model-value"]),l(oe,{error:v(r).getError("activity_type_id")},null,8,["error"])])])]),_("div",m_e,[_("div",f_e,[l(ce,{as:"p",label:M.$t("activities::calendar.sync_activity_types")},null,8,["label"])]),_("div",p_e,[(g(!0),D(de,null,Ie(v(s),me=>(g(),R(ae,{key:me.id},{default:p(()=>[l(re,{checked:v(r).activity_types,"onUpdate:checked":N[3]||(N[3]=Ce=>v(r).activity_types=Ce),value:me.id},null,8,["checked","value"]),l(Y,{text:me.name},null,8,["text"])]),_:2},1024))),128)),l(oe,{error:v(r).getError("activity_types")},null,8,["error"])])])])):Z("",!0)]),_:1}),m.value||f.value&&!f.value.is_sync_disabled?(g(),R(xe,{key:0},{default:p(()=>[_("div",v_e,[_("div",h_e,[$.value?(g(),R(j,{key:0},{default:p(()=>[l(L,{icon:"ExclamationTriangle",class:"-mt-1 mr-1 inline-flex size-5"}),ne(" "+K($.value),1)]),_:1})):Z("",!0)]),_("div",g_e,[!f.value||f.value&&f.value.is_sync_disabled||f.value.is_sync_stopped?(g(),R(ee,{key:0,disabled:v(r).busy,text:M.$t("core::app.cancel"),onClick:N[4]||(N[4]=me=>m.value=null)},null,8,["disabled","text"])):Z("",!0),te(l(ee,{variant:"primary",disabled:v(r).busy,loading:v(r).busy,onClick:S},{default:p(()=>[ne(K(!f.value||f.value&&f.value.is_sync_disabled||f.value.is_sync_stopped?M.$t("core::oauth.start_syncing"):M.$t("core::app.save")),1)]),_:1},8,["disabled","loading"]),[[fe,!f.value||f.value&&!f.value.is_sync_stopped]]),te(l(ee,{variant:"primary",disabled:v(r).busy||x.value,loading:v(r).busy,text:M.$t("activities::calendar.reconfigure"),onClick:S},null,8,["disabled","loading","text"]),[[fe,f.value&&f.value.is_sync_stopped]])])])]),_:1})):Z("",!0)]),_:1},8,["overlay"])])]),_:1})}}},Km=qi("activity-calendar-view-default",!1),y_e=[{path:"/calendar/sync",name:"calendar-sync",component:b_e,meta:{title:rt("activities::calendar.calendar_sync")}},{path:"/activities/calendar",name:"activity-calendar",component:Dye,meta:{title:rt("activities::calendar.calendar")},beforeEnter:()=>{Km.value=!0}},{path:"/activities",name:"activity-index",component:Vye,meta:{title:rt("activities::activity.activities"),subRoutes:["create-activity","edit-activity","view-activity"],calendarRoute:"activity-calendar"},beforeEnter:async(e,t)=>{if(Km.value&&t.name!=e.meta.calendarRoute&&e.meta.subRoutes.indexOf(e.name)===-1&&!e.query.view_id)return{name:e.meta.calendarRoute};e.meta.subRoutes.indexOf(e.name)===-1&&!e.query.view_id&&(Km.value=!1)},children:[{path:"create",name:"create-activity",components:{create:Mye},meta:{title:rt("activities::activity.create")}},{path:":id",name:"view-activity",meta:{scrollToTop:!1},components:{edit:z1}},{path:":id/edit",name:"edit-activity",meta:{scrollToTop:!1},components:{edit:z1}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("MyActivitiesCard",d1e),e.component("RecordTabTimelineActivity",eye),e.component("CreateActivityModal",o1e),e.component("ActivityFloatingModal",n1e),e.component("FormActivityDueDateField",rye),e.component("FormActivityEndDateField",sye),e.component("FormGuestsSelectField",pye),e.component("FormActivityTypeField",iye),e.component("IndexActivityTypeField",yye),e.component("IndexActivityDueDateField",hye),e.component("IndexActivityEndDateField",bye),e.component("ActivitiesTab",m1e),e.component("ActivitiesTabPanel",G1e),y_e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"activities",name:"activity-settings",component:oye,meta:{title:rt("activities::activity.activities")}})});const __e={class:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-6"},w_e={class:"sm:col-span-2"},I_e={class:"sm:col-span-2"},x_e={__name:"SettingsProducts",setup(e){const{form:t,isReady:n,submit:o}=Ao(),{scriptConfig:a}=qe(),r=a("taxes.types"),s=[{label:a("currency.iso_code"),value:"fixed"},{label:"%",value:"percent"}];return(i,u)=>{const d=c("ICardHeading"),m=c("ICardHeader"),f=c("IFormInput"),h=c("IFormGroup"),y=c("IFormNumericInput"),b=c("IFormRadio"),I=c("IFormRadioLabel"),w=c("IFormRadioField"),k=c("ICardBody"),x=c("IButton"),$=c("ICardFooter"),C=c("ICard");return g(),D(de,null,[l(m,null,{default:p(()=>[l(d,{text:i.$t("billable::product.products")},null,8,["text"])]),_:1}),l(C,{as:"form",overlay:!v(n),onSubmit:ot(v(o),["prevent"])},{default:p(()=>[l(k,null,{default:p(()=>[_("div",__e,[_("div",w_e,[l(h,{"label-for":"tax_label",label:i.$t("billable::product.tax_label"),required:""},{default:p(()=>[l(f,{id:"tax_label",modelValue:v(t).tax_label,"onUpdate:modelValue":u[0]||(u[0]=F=>v(t).tax_label=F)},null,8,["modelValue"])]),_:1},8,["label"])]),_("div",I_e,[l(h,{"label-for":"tax_rate",label:i.$t("billable::product.tax_rate")},{default:p(()=>[l(y,{id:"tax_rate",modelValue:v(t).tax_rate,"onUpdate:modelValue":u[1]||(u[1]=F=>v(t).tax_rate=F),placeholder:i.$t("billable::product.tax_percent"),precision:3,minus:!0},null,8,["modelValue","placeholder"])]),_:1},8,["label"])])]),l(h,{class:"mt-3 space-y-1","label-for":"tax_type",label:i.$t("billable::product.settings.default_tax_type")},{default:p(()=>[(g(!0),D(de,null,Ie(v(r),F=>(g(),R(w,{key:F},{default:p(()=>[l(b,{modelValue:v(t).tax_type,"onUpdate:modelValue":u[2]||(u[2]=T=>v(t).tax_type=T),name:"tax_type",value:F},null,8,["modelValue","value"]),l(I,{text:i.$t("billable::billable.tax_types."+F)},null,8,["text"])]),_:2},1024))),128))]),_:1},8,["label"]),l(h,{"label-for":"tax_type",class:"mt-3 space-y-1",label:i.$t("billable::product.settings.default_discount_type")},{default:p(()=>[(g(),D(de,null,Ie(s,F=>l(w,{key:F.value},{default:p(()=>[l(b,{modelValue:v(t).discount_type,"onUpdate:modelValue":u[3]||(u[3]=T=>v(t).discount_type=T),name:"discount_type",value:F.value},null,8,["modelValue","value"]),l(I,{text:F.label},null,8,["text"])]),_:2},1024)),64))]),_:1},8,["label"])]),_:1}),l($,{class:"text-right"},{default:p(()=>[l(x,{type:"submit",variant:"primary",disabled:v(t).busy,text:i.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay","onSubmit"])],64)}}};var k_e=sd,$_e=ua,C_e=id,S_e=Xv,W1=ov,T_e=UI,E_e=C_e(function(e){var t=T_e(e);return W1(t)&&(t=void 0),S_e(k_e(e,1,W1,!0),$_e(t))}),F_e=E_e;const A_e=Rt(F_e),eh=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=V(!1);async function a(u,d){const{data:m}=await Innoclapps.request(`/products/${u}`,d);return m}async function r(u){const{data:d}=await Innoclapps.request("/products/search",{params:{q:u,search_fields:"name:="}});return d.length>0?d[0]:null}async function s(u=100){if(o.value)return n.value;e(!0);try{const{data:d}=await i({params:{take:u}});return n.value=d,d}finally{e(!1),o.value=!0}}function i(u){return Innoclapps.request("/products/active",u)}return{limitedNumberOfActiveProducts:n,limitedNumberOfActiveProductsRetrieved:o,limitedNumberOfProductsLoading:t,fetchProduct:a,fetchProductByName:r,retrieveLimitedNumberOfActiveProducts:s,fetchActiveProducts:i}});function t5(e={}){return Object.assign({product_id:null,name:null,description:null,tax_rate:null,tax_label:null,unit_price:0,qty:1,discount_type:null,discount_total:0,unit:null,note:null,display_order:-1},e)}function R_e(e,t,n){return n?parseFloat(parseFloat(e))-parseFloat(parseFloat(e))/(1+parseFloat(t)/100):parseFloat(e)*(parseFloat(t)/100)}function n5(e,t){if(e.discount_type==="fixed")return parseFloat(e.discount_total);const n=parseFloat(e.discount_total),o=parseFloat(e.unit_price),a=parseFloat(e.qty);return t?n/100*o*a:n/100*(o*a)}function np(e,t){const n=parseFloat(e.unit_price),o=parseFloat(e.qty);return n*o-n5(e,t)}const D_e={width:"30%",class:"px-3 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},O_e={class:"relative w-60 sm:w-auto"},P_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},M_e={class:"w-32 sm:w-auto"},B_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},N_e={class:"w-40 sm:w-auto"},V_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},L_e={class:"w-44 sm:w-auto"},q_e={class:"flex items-center rounded-lg shadow-sm"},U_e={class:"relative"},j_e={class:"px-2 py-2.5 align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},z_e={class:"relative w-44 rounded-lg shadow-sm sm:w-auto"},H_e={class:"absolute inset-y-0 right-0 flex items-center"},W_e=["value","textContent"],G_e={class:"px-2 py-4 text-center align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},K_e={__name:"BillableFormTableProductRow",props:{modelValue:{type:Object,default:()=>({})},taxType:{required:!0,type:String},index:{required:!0,type:Number}},emits:["update:modelValue","productSelected"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{formatMoney:r}=lo(),{scriptConfig:s}=qe(),{limitedNumberOfActiveProducts:i,retrieveLimitedNumberOfActiveProducts:u,limitedNumberOfActiveProductsRetrieved:d,fetchActiveProducts:m,fetchProductByName:f}=eh(),h=Pt(null),y=V(!1),b=V(n.modelValue||[]);let I=V(null);const w=P(()=>h.value||i.value);function k(){d.value||(y.value=!0,u().then(()=>y.value=!1))}function x(E,B){if(E==""){B(!1),h.value=null;return}B(!0),m({params:{q:E}}).then(({data:M})=>{h.value=M}).finally(()=>B(!1))}Xe(()=>{I.value=n.modelValue||[]});const $=[{label:s("currency.iso_code"),value:"fixed"},{label:"%",value:"percent"}],C=P(()=>np(n.modelValue,n.taxType==="inclusive"));function F(E){return t5({name:E,discount_type:s("discount_type"),tax_rate:s("tax_rate"),tax_label:s("tax_label")})}function T(E){return E.sku?`${E.sku}: ${E.name}`:E.name}async function S(E){if(!E){A({name:null,product_id:null});return}const B={product_id:E.id,name:E.name,description:E.description,unit_price:E.unit_price||0,unit:E.unit,tax_rate:E.tax_rate||0,tax_label:E.tax_label},M=await f(E.name);M?(B.product_id=M.id,i.value.find(N=>N.id==M.id)||i.value.unshift(M)):(Innoclapps.info(a("billable::product.will_be_added_as_new",{name:E.name})),B.product_id=null),A(B),o("productSelected",{product:E.value,index:n.index})}function A(E,B=null){let M=Mw(n.modelValue,typeof E=="object"?E:{[E]:B});o("update:modelValue",M),b.value=M}return(E,B)=>{const M=c("ICustomSelect"),N=c("IFormTextarea"),G=c("IFormNumericInput"),U=c("IFormInput"),j=c("IFormSelect");return g(),D("tr",null,[_("td",D_e,[_("div",O_e,[l(M,{modelValue:v(I),"onUpdate:modelValue":B[0]||(B[0]=O=>hn(I)?I.value=O:I=O),label:"name","create-option-provider":F,"option-label":T,placeholder:E.$t("billable::product.choose_or_enter"),options:w.value,loading:y.value,truncate:"",filterable:"",taggable:"",debounce:"",onOptionSelected:S,onCleared:B[1]||(B[1]=O=>S(null)),onSearch:x,onOpen:k},null,8,["modelValue","placeholder","options","loading"]),Ee(E.$slots,"after-product-select",{product:b.value,index:e.index}),te(l(N,{class:"mt-1","model-value":b.value.description,name:"products."+e.index+".description",placeholder:E.$t("billable::product.description")+" ("+E.$t("core::app.optional")+")",rows:3,"onUpdate:modelValue":B[2]||(B[2]=O=>A({description:O}))},null,8,["model-value","name","placeholder"]),[[fe,v(I)]])])]),_("td",P_e,[_("div",M_e,[l(G,{class:"text-right","decimal-separator":".",pattern:".*",precision:2,"empty-value":1,placeholder:E.$t("billable::product.quantity"),"model-value":b.value.qty,"onUpdate:modelValue":B[3]||(B[3]=O=>A({qty:O}))},null,8,["placeholder","model-value"]),l(U,{class:"mt-1 text-right",placeholder:E.$t("billable::product.unit"),"model-value":b.value.unit,"onUpdate:modelValue":B[4]||(B[4]=O=>A({unit:O}))},null,8,["placeholder","model-value"])])]),_("td",B_e,[_("div",N_e,[l(G,{class:"text-right",placeholder:E.$t("billable::product.unit_price"),minus:!0,"model-value":b.value.unit_price,"onUpdate:modelValue":B[5]||(B[5]=O=>A({unit_price:O}))},null,8,["placeholder","model-value"])])]),te(_("td",V_e,[_("div",L_e,[_("div",q_e,[_("div",U_e,[l(G,{class:"z-10 grow rounded-r-none !pr-8",placeholder:E.$t("billable::product.tax_percent"),precision:3,minus:!0,max:100,"model-value":b.value.tax_rate,"onUpdate:modelValue":B[6]||(B[6]=O=>A({tax_rate:O}))},null,8,["placeholder","model-value"]),B[11]||(B[11]=_("div",{class:"pointer-events-none absolute inset-y-0 right-0 z-20 flex items-center pr-3",textContent:"%"},null,-1))]),l(U,{class:"-ml-px w-16 rounded-l-none text-center focus:z-20","model-value":b.value.tax_label,"onUpdate:modelValue":B[7]||(B[7]=O=>A({tax_label:O}))},null,8,["model-value"])])])],512),[[fe,e.taxType!=="no_tax"]]),_("td",j_e,[_("div",z_e,[e.modelValue.discount_type=="fixed"?(g(),R(G,{key:0,class:"!pr-12",placeholder:E.$t("billable::product.discount_amount"),"model-value":b.value.discount_total,"onUpdate:modelValue":B[8]||(B[8]=O=>A({discount_total:O}))},null,8,["placeholder","model-value"])):(g(),R(G,{key:1,class:"!pr-12",placeholder:E.$t("billable::product.discount_percent"),max:100,precision:2,"model-value":b.value.discount_total,"onUpdate:modelValue":B[9]||(B[9]=O=>A({discount_total:O}))},null,8,["placeholder","model-value"])),_("div",H_e,[l(j,{class:"rounded-l-none bg-transparent bg-none !pl-1 !pr-2 text-center ring-0 dark:bg-transparent","model-value":b.value.discount_type,"onUpdate:modelValue":B[10]||(B[10]=O=>A({discount_type:O}))},{default:p(()=>[(g(),D(de,null,Ie($,O=>_("option",{key:O.value,value:O.value,textContent:K(O.label)},null,8,W_e)),64))]),_:1},8,["model-value"])])])]),_("td",G_e,K(v(r)(C.value)),1),Ee(E.$slots,"default")])}}},Z_e={class:"mb-2 mt-4 grid grid-cols-12 gap-2"},Y_e={class:"col-span-8 text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},X_e=["textContent"],Q_e={class:"col-span-8 text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},J_e={class:"col-span-4 text-right text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5"},e2e={class:"grid grid-cols-12 gap-2"},t2e={class:"col-span-8 text-base/5 font-semibold text-neutral-900 dark:text-neutral-100 sm:col-span-5 sm:col-start-5 sm:text-right sm:text-sm/5"},n2e=["textContent"],o2e={__name:"BillableTotalSection",props:{taxType:{required:!0},total:{required:!0},totalDiscount:{required:!0},subtotal:{required:!0},taxes:{default:()=>[]}},setup(e){const t=e,{formatMoney:n}=lo(),o=P(()=>t.totalDiscount>0),a=P(()=>t.taxType!=="no_tax"),r=P(()=>t.taxType==="inclusive");return(s,i)=>{const u=ze("t");return g(),D(de,null,[_("div",Z_e,[_("div",Y_e,[ne(K(s.$t("billable::billable.sub_total"))+" ",1),te(_("p",{class:"italic text-neutral-500 dark:text-neutral-300"}," ("+K(s.$t("billable::billable.includes_discount",{amount:v(n)(e.totalDiscount)}))+") ",513),[[fe,o.value]])]),_("div",{class:"col-span-4 text-right text-base/5 text-neutral-600 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5",textContent:K(v(n)(e.subtotal))},null,8,X_e)]),(g(!0),D(de,null,Ie(e.taxes,d=>te((g(),D("div",{key:d.key,class:"mb-2 grid grid-cols-12 gap-2"},[_("div",Q_e,K(d.label)+" ("+K(d.rate)+"%) ",1),_("div",J_e,[_("span",null,[te(_("span",null,null,512),[[fe,r.value],[u,"billable::billable.tax_amount_is_inclusive"]]),ne(" "+K(v(n)(d.raw_total)),1)])])])),[[fe,a.value]])),128)),_("div",e2e,[te(_("div",t2e,null,512),[[u,"billable::billable.total"]]),_("div",{class:"col-span-4 text-right text-base/5 font-medium text-neutral-900 dark:text-neutral-100 sm:col-span-3 sm:text-sm/5",textContent:K(v(n)(e.total))},null,8,n2e)])],64)}}},a2e={class:"overflow-hidden rounded-lg border border-neutral-900/10 bg-white dark:border-white/10 dark:bg-neutral-900"},r2e={class:"touch-auto overflow-x-auto"},l2e={class:"bg-neutral-50 dark:bg-neutral-500/10"},s2e={class:"py-3 pl-4 pr-2 text-left text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},i2e={class:"p-2 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},u2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},c2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},d2e={class:"px-2 py-3 text-right text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},m2e={class:"px-2 py-3 text-center text-sm font-semibold uppercase tracking-wider text-neutral-600 dark:text-neutral-200 sm:text-xs"},f2e={class:"bg-white dark:bg-neutral-800/20"},p2e=["colspan"],v2e={class:"bg-white dark:bg-neutral-800/20"},h2e={class:"p-2 text-right align-top text-sm font-medium text-neutral-900 dark:text-neutral-100"},g2e={class:"-mt-1.5 flex items-center justify-between space-x-1"},b2e={class:"mt-2 cursor-move","data-sortable-handle":"products"},y2e={key:0},_2e=["colspan"],w2e={class:"relative z-auto mb-1 rounded-sm p-2"},th={__name:"BillableFormTableProducts",props:{products:{type:Array,default:()=>[]},removedProducts:{type:Array,default:()=>[]},taxType:{required:!0,type:String}},emits:["update:products","update:removedProducts","productSelected","productRemoved"],setup(e,{expose:t,emit:n}){const o=e,a=n,{toFixed:r}=lo(),{scriptConfig:s}=qe(),{limitedNumberOfActiveProductsRetrieved:i,limitedNumberOfActiveProducts:u}=eh(),d=V(null),m=s("currency.precision"),f=V(null),h=V([]);un(()=>{i.value=!1,u.value=[]}),Se(h,E=>{a("update:products",E),C()},{deep:!0}),Se(()=>o.products,E=>{h.value=E},{immediate:!0});const y=P(()=>o.taxType!=="no_tax"),b=P(()=>o.taxType==="inclusive"),I=P(()=>{let E=parseFloat(k.value)+parseFloat(b.value?0:$.value);return parseFloat(r(E,m))}),w=P(()=>parseFloat(r(h.value.reduce((E,B)=>E+n5(B,b.value),0),m))),k=P(()=>parseFloat(r(h.value.reduce((E,B)=>E+np(B,b.value),0),m))),x=P(()=>y.value?mr(A_e(h.value,E=>E.tax_label+E.tax_rate),"tax_rate").filter(E=>E.tax_rate>0).reduce((E,B)=>{let M={key:B.tax_label+B.tax_rate,rate:B.tax_rate,label:B.tax_label,raw_total:Vo(h.value,{tax_label:B.tax_label,tax_rate:B.tax_rate}).reduce((N,G)=>(N+=R_e(np(G,b.value),G.tax_rate,b.value),N),0)};return E.push(M),E},[]):[]),$=P(()=>parseFloat(r(x.value.reduce((E,B)=>E+parseFloat(r(B.raw_total,m)),0),m)));function C(){h.value.filter(E=>!E._key).forEach(E=>{E._key=So()})}function F(E){f.value=E,We(()=>d.value.focus())}function T(E){let B=h.value[E];h.value.splice(E,1),f.value===E&&(f.value=null),a("productRemoved",{product:B,index:E}),B.id&&a("update:removedProducts",[...o.removedProducts,B.id])}function S(){h.value.push(t5({discount_type:s("discount_type"),tax_rate:s("tax_rate"),tax_label:s("tax_label")})),A()}function A(){h.value.forEach((E,B)=>E.display_order=B+1)}return t({insertNewLine:S}),(E,B)=>{const M=c("IDropdownItem"),N=c("IDropdownMinimal"),G=c("Icon"),U=c("IFormLabel"),j=c("IFormTextarea"),O=c("SortableDraggable"),H=c("ILink"),W=ze("t");return g(),D(de,null,[_("div",a2e,[_("div",r2e,[l(O,Ue({modelValue:h.value,"onUpdate:modelValue":B[1]||(B[1]=X=>h.value=X),tag:"table",class:"min-w-full divide-y divide-neutral-200 dark:divide-neutral-500/20",handle:"[data-sortable-handle='products']","item-key":X=>X._key},E.$draggable.common,{onEnd:A,onStart:B[2]||(B[2]=X=>f.value=null)}),{header:p(()=>[_("thead",l2e,[_("tr",null,[te(_("th",s2e,null,512),[[W,"billable::product.table_heading"]]),te(_("th",i2e,null,512),[[W,"billable::product.qty"]]),te(_("th",u2e,null,512),[[W,"billable::product.unit_price"]]),te(_("th",c2e,null,512),[[fe,y.value],[W,"billable::product.tax"]]),te(_("th",d2e,null,512),[[W,"billable::product.discount"]]),te(_("th",m2e,null,512),[[W,"billable::product.amount"]]),B[3]||(B[3]=_("th",null,null,-1))])]),te(_("tbody",f2e,[_("tr",null,[te(_("td",{class:"p-3 text-center text-sm text-neutral-900 dark:text-neutral-200",colspan:y.value?6:5},null,8,p2e),[[W,"billable::product.resource_has_no_products"]])])],512),[[fe,!h.value.length]])]),item:p(({element:X,index:q})=>[_("tbody",v2e,[l(K_e,{modelValue:h.value[q],"onUpdate:modelValue":L=>h.value[q]=L,"tax-type":e.taxType,index:q,onProductSelected:B[0]||(B[0]=L=>E.$emit("productSelected",L))},{"after-product-select":p(L=>[Ee(E.$slots,"after-product-select",zt(Qt(L)))]),default:p(()=>[_("td",h2e,[_("div",g2e,[l(N,{class:"mt-2",horizontal:"",small:""},{default:p(()=>[te(l(M,{text:E.$t("core::app.add_note"),onClick:L=>F(q)},null,8,["text","onClick"]),[[fe,(f.value===null||f.value!==q)&&!h.value[q].note]]),l(M,{text:E.$t("core::app.remove"),onClick:L=>T(q)},null,8,["text","onClick"])]),_:2},1024),_("div",b2e,[l(G,{icon:"Selector",class:"size-5 text-neutral-500"})])])])]),_:2},1032,["modelValue","onUpdate:modelValue","tax-type","index"]),f.value===q||X.note||h.value[q].note?(g(),D("tr",y2e,[_("td",{class:"px-1",colspan:y.value?7:6},[_("div",w2e,[l(U,{class:"mb-1",for:"product-note-"+q},{default:p(()=>[ne(K(E.$t("core::app.note_is_private")),1)]),_:2},1032,["for"]),l(j,{ref_key:"productNoteRef",ref:d,modelValue:h.value[q].note,"onUpdate:modelValue":L=>h.value[q].note=L,rows:"2",class:"bg-warning-100 ring-warning-300 focus:ring-warning-400 dark:bg-warning-200 dark:text-neutral-800 dark:focus:ring-warning-400"},null,8,["modelValue","onUpdate:modelValue"])])],8,_2e)])):Z("",!0)])]),_:3},16,["modelValue","item-key"])])]),l(H,{class:"mt-3 inline-block font-medium",onClick:S},{default:p(()=>[ne(" + "+K(E.$t("core::app.insert_new_line")),1)]),_:1}),l(o2e,{"tax-type":e.taxType,total:I.value,"total-discount":w.value,subtotal:k.value,taxes:x.value},null,8,["tax-type","total","total-discount","subtotal","taxes"])],64)}}},I2e={class:"flex flex-col space-y-1 sm:flex-row sm:space-x-2 sm:space-y-0"},nh={__name:"BillableFormTaxTypes",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue"),{t:n}=Pe(),{scriptConfig:o}=qe(),a=o("taxes.types"),r=P(()=>a.map(s=>({value:s,label:n("billable::billable.tax_types."+s)})));return(s,i)=>{const u=c("IFormRadio"),d=c("IFormRadioLabel"),m=c("IFormRadioField");return g(),D("div",I2e,[(g(!0),D(de,null,Ie(r.value,f=>(g(),R(m,{key:f.value},{default:p(()=>[l(u,{modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=h=>t.value=h),name:"tax_type",value:f.value},null,8,["modelValue","value"]),l(d,{text:f.label},null,8,["text"])]),_:2},1024))),128))])}}},Ld={__name:"BillableFormProductsModal",props:{billable:Object,visible:Boolean,prefetch:Boolean,resourceName:{required:!0,type:String},resourceId:{required:!0,type:Number}},emits:["saved","hidden"],setup(e,{emit:t}){const n=e,o=t,{form:a}=Qe({products:[],removed_products:[]}),r=V(null),s=V(!1);function i(){o("hidden"),s.value=!1}async function u(){let f=await a.post(`${n.resourceName}/${n.resourceId}/billable`);o("saved",f),Innoclapps.dialog().hide("productsModal")}async function d(){let f=structuredClone(n.prefetch?await m():n.billable||{});a.set("tax_type",f.tax_type||"exclusive"),a.set("products",f.products||[]),s.value=!0}qa(s,()=>{a.products.length===0&&We(r.value.insertNewLine)},{flush:"post"});async function m(){let{data:f}=await Innoclapps.request(`/${n.resourceName}/${n.resourceId}/billable`);return f}return(f,h)=>{const y=c("IFormError"),b=c("IOverlay"),I=c("IModal");return g(),R(I,{id:"productsModal",size:"xxl","ok-text":f.$t("core::app.save"),"ok-disabled":v(a).busy,title:f.$t("billable::product.manage"),visible:e.visible,static:"",onOk:u,onHidden:i,onShow:d},{default:p(()=>[l(b,{show:!s.value},{default:p(()=>[l(nh,{modelValue:v(a).tax_type,"onUpdate:modelValue":h[0]||(h[0]=w=>v(a).tax_type=w),class:"mb-4 mt-6"},null,8,["modelValue"]),s.value?(g(),R(th,{key:0,ref_key:"productsRef",ref:r,products:v(a).products,"onUpdate:products":h[1]||(h[1]=w=>v(a).products=w),"removed-products":v(a).removed_products,"onUpdate:removedProducts":h[2]||(h[2]=w=>v(a).removed_products=w),"tax-type":v(a).tax_type},{"after-product-select":p(({index:w})=>[l(y,{error:v(a).getError("products."+w+".name")},null,8,["error"])]),_:1},8,["products","removed-products","tax-type"])):Z("",!0)]),_:1},8,["show"])]),_:1},8,["ok-text","ok-disabled","title","visible"])}}},x2e={key:0,class:"ml-1 text-xs text-neutral-500 dark:text-neutral-400"},k2e=Object.assign({inheritAttrs:!1},{__name:"BillableAmountField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["updated"],setup(e,{emit:t}){const n=e,o=t,a=P(()=>n.resource.products_count>0),r=V(!1);function s(u){o("updated",Object.assign({},n.resource,{billable:u,[n.field.attribute]:u.total,products_count:u.products.length}))}function i(u){u&&u.preventDefault(),r.value=!0}return(u,d)=>{const m=c("Icon"),f=c("ILink"),h=c("DetailNumericField"),y=ze("t");return g(),D(de,null,[r.value?(g(),R(Ld,{key:0,"resource-name":e.resourceName,"resource-id":e.resourceId,visible:"",prefetch:"",onSaved:s,onHidden:d[0]||(d[0]=b=>r.value=!1)},null,8,["resource-name","resource-id"])):Z("",!0),l(h,Ue(u.$attrs,{"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,field:{...e.field,readonly:a.value},resource:e.resource,"edit-action":e.field.onlyProducts||a.value?i:void 0,onUpdated:d[1]||(d[1]=b=>u.$emit("updated",b))}),{"numeric-field":p(({formattedValue:b})=>[ne(K(b)+" ",1),a.value?(g(),D("span",x2e," ("+K(u.$t("billable::product.count",{count:e.resource.products_count}))+") ",1)):Z("",!0)]),"after-inline-edit-form-fields":p(({hidePopover:b})=>[l(f,{class:"inline-flex items-center",onClick:I=>(i(),b())},{default:p(()=>[te(_("span",null,null,512),[[y,"billable::product.manage"]]),l(m,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])]),_:1},16,["resource-name","resource-id","is-floating","field","resource","edit-action"])],64)}}}),$2e={key:0,class:"ml-1 text-xs text-neutral-500 dark:text-neutral-400"},C2e=Object.assign({inheritAttrs:!1},{__name:"BillableAmountField",props:["resourceName","resourceId","row","field"],emits:["reload"],setup(e,{emit:t}){const n=e,o=t,a=V(!1),r=P(()=>n.row.products_count>0);function s(u){u&&u.preventDefault(),a.value=!0}function i(){o("reload")}return(u,d)=>{const m=c("Icon"),f=c("ILink"),h=c("IndexNumericField"),y=ze("t");return g(),D(de,null,[a.value?(g(),R(Ld,{key:0,"resource-name":e.resourceName,"resource-id":e.resourceId,visible:"",prefetch:"",onSaved:i,onHidden:d[0]||(d[0]=b=>a.value=!1)},null,8,["resource-name","resource-id"])):Z("",!0),l(h,Ue(u.$attrs,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field,"edit-action":e.field.onlyProducts||r.value?s:void 0,onReload:d[1]||(d[1]=b=>u.$emit("reload"))}),{"numeric-field":p(({formattedValue:b})=>[ne(K(b)+" ",1),r.value?(g(),D("span",$2e," ("+K(u.$t("billable::product.count",{count:e.row.products_count}))+") ",1)):Z("",!0)]),"after-inline-edit-form-fields":p(({hidePopover:b})=>[l(f,{class:"flex items-center",onClick:I=>(s(),b())},{default:p(()=>[te(_("span",null,null,512),[[y,"billable::product.manage"]]),l(m,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])]),_:1},16,["resource-name","resource-id","row","field","edit-action"])],64)}}}),S2e={__name:"ProductsCreate",emits:["created","restored"],setup(e,{emit:t}){const n=t,o=Innoclapps.resourceName("products"),{t:a}=Pe(),r=wt(),{fields:s,hasFields:i,getCreateFields:u}=In(),{form:d}=Qe(),{createResource:m}=qt(o),f=V(null),h=V({byName:!1});Ba(()=>d.name,$=>{if(!$){f.value=null;return}Innoclapps.request("/trashed/products/search",{params:{q:$,search_fields:"name:="}}).then(({data:C})=>{f.value=C.length>0?C[0]:null})},{debounce:500});function y(){w().then(()=>r.back())}function b(){w().then(()=>d.reset())}function I(){w().then(()=>r.push("/products"))}async function w(){try{let $=await m(d);return n("created",$),Innoclapps.success(a("billable::product.created")),$}catch($){return $.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject($)}}async function k($,C){await Innoclapps.request().post(`/trashed/products/${$}`),h.value[C]=!0,n("restored",f)}async function x(){const $=await u(o);s.value=$}return x(),($,C)=>{const F=c("FieldsPlaceholder"),T=c("IAlertBody"),S=c("IButton"),A=c("IAlertActions"),E=c("IAlert"),B=c("FormFields"),M=c("IDropdownItem"),N=c("IDropdownMenu"),G=c("IExtendedDropdown"),U=c("ISlideover");return g(),R(U,{id:"createProductModal",title:$.$t("billable::product.create"),visible:"",static:"",form:"",onSubmit:y,onHidden:$.$router.back},{"modal-ok":p(()=>[l(G,{type:"submit",disabled:v(d).busy,loading:v(d).busy,text:$.$t("core::app.create")},{default:p(()=>[l(N,{class:"min-w-48"},{default:p(()=>[l(M,{text:$.$t("core::app.create_and_add_another"),onClick:b},null,8,["text"]),l(M,{text:$.$t("core::app.create_and_go_to_list"),onClick:I},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])]),default:p(()=>[v(i)?Z("",!0):(g(),R(F,{key:0})),l(B,{fields:v(s),form:v(d),"resource-name":v(o),"is-floating":"","focus-first":"",onUpdateFieldValue:C[3]||(C[3]=j=>v(d).fill(j.attribute,j.value)),onSetInitialValue:C[4]||(C[4]=j=>v(d).set(j.attribute,j.value))},gn({_:2},[f.value!==null?{name:"after-name-field",fn:p(()=>[l(E,{class:"mb-3",dismissible:"",onDismissed:C[2]||(C[2]=j=>{h.value.byName=!1,f.value=null})},{default:p(({variant:j})=>[l(T,null,{default:p(()=>[ne(K($.$t("billable::product.exists_in_trash_by_name")),1)]),_:1}),l(A,null,{default:p(()=>[h.value.byName?Z("",!0):(g(),R(S,{key:0,variant:j,text:$.$t("core::app.soft_deletes.restore"),ghost:"",onClick:C[0]||(C[0]=O=>k(f.value.id,"byName"))},null,8,["variant","text"])),h.value.byName?(g(),R(S,{key:1,variant:j,text:$.$t("core::app.view_record"),ghost:"",onClick:C[1]||(C[1]=O=>$.$router.replace({name:"view-product",params:{id:f.value.id}}))},null,8,["variant","text"])):Z("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0]),1032,["fields","form","resource-name"])]),_:1},8,["title","onHidden"])}}},G1={__name:"ProductsEdit",emits:["updated"],setup(e,{emit:t}){const n=t,o=Innoclapps.resourceName("products"),{t:a}=Pe(),r=wt(),s=Ct(),{fetchProduct:i}=eh(),{fields:u,hasFields:d,getUpdateFields:m,hydrateFields:f}=In(),{form:h}=Qe(),{updateResource:y}=qt(o),b=V(null);async function I(){let k=await y(h,s.params.id);n("updated",k),Innoclapps.success(a("billable::product.updated")),r.back()}async function w(){const[k,x]=await Promise.all([i(s.params.id),m(o,s.params.id)]);u.value=x,f(k),b.value=k}return w(),(k,x)=>{const $=c("FieldsPlaceholder"),C=c("FormFields"),F=c("ISlideover");return g(),R(F,{id:"editProductModal","ok-disabled":v(h).busy||v(d)&&!b.value.authorizations.update,"ok-loading":v(h).busy,"ok-text":k.$t("core::app.save"),title:k.$t("billable::product.edit"),visible:"",static:"",form:"",onHidden:k.$router.back,onSubmit:I},{default:p(()=>[v(d)?Z("",!0):(g(),R($,{key:0})),l(C,{fields:v(u),form:v(h),"resource-name":v(o),"resource-id":k.$route.params.id,"is-floating":"",onUpdateFieldValue:x[0]||(x[0]=T=>v(h).fill(T.attribute,T.value)),onSetInitialValue:x[1]||(x[1]=T=>v(h).set(T.attribute,T.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1},8,["ok-disabled","ok-loading","ok-text","title","onHidden"])}}},T2e={key:1,class:"m-auto mt-8 max-w-5xl"},E2e={__name:"ProductsIndex",setup(e){const t=Innoclapps.resourceName("products"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=P(()=>a.value&&r.value);function i(u){a.value=u.isPreEmpty,r.value=!0}return(u,d)=>{const m=c("NavbarSeparator"),f=c("IDropdownItem"),h=c("IDropdownMinimal"),y=c("IButton"),b=c("NavbarItems"),I=c("IOverlay"),w=c("IEmptyState"),k=c("ResourceTable"),x=c("ResourceExport"),$=c("RouterView"),C=c("MainLayout");return g(),R(C,null,{actions:p(()=>[l(m,{class:"hidden lg:block"}),l(b,null,{default:p(()=>[l(h,{placement:a.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[v(n).authorizedToImport?(g(),R(f,{key:0,icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:v(t)}},text:u.$t("core::resource.import",{resource:v(n).label})},null,8,["to","text"])):Z("",!0),v(n).authorizedToExport?(g(),R(f,{key:1,icon:"DocumentDownload",text:u.$t("core::resource.export",{resource:v(n).label}),onClick:d[0]||(d[0]=F=>u.$dialog.show("export-modal"))},null,8,["text"])):Z("",!0),v(n).usesSoftDeletes?(g(),R(f,{key:2,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:u.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),te(l(y,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-product"},text:u.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!a.value]])]),_:1})]),default:p(()=>[r.value?Z("",!0):(g(),R(I,{key:0,show:""})),s.value?(g(),D("div",T2e,[l(w,zt(Qt({to:{name:"create-product"},title:u.$t("billable::product.empty_state.title"),buttonText:u.$t("billable::product.create"),description:u.$t("billable::product.empty_state.description"),secondButtonText:u.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:v(t)}}})),null,16)])):Z("",!0),te(_("div",null,[l(k,{"resource-name":v(t),onLoaded:i},null,8,["resource-name"])],512),[[fe,!a.value]]),l(x,{"resource-name":v(t)},null,8,["resource-name"]),l($,{onCreated:v(o),onRestored:v(o),onUpdated:v(o)},null,8,["onCreated","onRestored","onUpdated"])]),_:1})}}},F2e=[{path:"/products",name:"product-index",component:E2e,meta:{title:rt("billable::product.products")},children:[{path:"create",name:"create-product",component:S2e,meta:{title:rt("billable::product.create")}},{path:":id",name:"view-product",component:G1},{path:":id/edit",name:"edit-product",component:G1}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("DetailBillableAmountField",k2e),e.component("IndexBillableAmountField",C2e),F2e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"products",component:x_e,name:"settings-products",meta:{title:rt("billable::product.products")}})});const lu=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=P(()=>Vt(n.value,"name")),a=P(()=>Vt(n.value,["is_default","name"],["desc","asc"]));y();function r(b){return n.value.findIndex(I=>I.id==b)}function s(b){n.value.splice(r(b),1)}function i(b){b.is_default&&h(),n.value.push(b)}function u(b,I){I.is_default&&h(),n.value[r(b)]=I}function d(b,I){I.is_default&&h();const w=r(b);n.value[w]=Object.assign(n.value[w],I)}async function m(b,I){const{data:w}=await Innoclapps.request(`/brands/${b}`,I);return w}async function f(b){await Innoclapps.request().delete(`/brands/${b}`),s(b)}function h(){n.value.forEach(b=>{b.is_default=!1})}function y(b){e(!0),Innoclapps.request("/brands",b).then(({data:I})=>n.value=I).finally(()=>e(!1))}return{brands:n,brandsByName:o,orderedBrands:a,brandsAreBeingFetched:t,addBrand:i,removeBrand:s,setBrand:u,patchBrand:d,fetchBrands:y,fetchBrand:m,deleteBrand:f,unmarkAllAsDefault:h}}),A2e={class:"px-6"},R2e={__name:"BrandsIndex",setup(e){const{orderedBrands:t,brandsAreBeingFetched:n,deleteBrand:o}=lu();return(a,r)=>{const s=c("ICardHeading"),i=c("IButton"),u=c("ICardActions"),d=c("ICardHeader"),m=c("ITableHeader"),f=c("ITableRow"),h=c("ITableHead"),y=c("ITableCell"),b=c("ILink"),I=c("IBadge"),w=c("ITableRowAction"),k=c("ITableRowActions"),x=c("ITableBody"),$=c("ITable"),C=c("ICard");return g(),D(de,null,[l(d,null,{default:p(()=>[l(s,{text:a.$t("brands::brand.brands")},null,8,["text"]),l(u,null,{default:p(()=>[l(i,{variant:"primary",icon:"PlusSolid",to:{name:"create-brand"},text:a.$t("brands::brand.create")},null,8,["text"])]),_:1})]),_:1}),l(C,{overlay:v(n)},{default:p(()=>[_("div",A2e,[l($,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(h,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(f,null,{default:p(()=>[l(m,{width:"5%"},{default:p(()=>[ne(K(a.$t("core::app.id")),1)]),_:1}),l(m,null,{default:p(()=>[ne(K(a.$t("brands::brand.brand")),1)]),_:1}),l(m,{width:"8%"})]),_:1})]),_:1}),l(x,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(t),F=>(g(),R(f,{key:F.id},{default:p(()=>[l(y,null,{default:p(()=>[ne(K(F.id),1)]),_:2},1024),l(y,null,{default:p(()=>[l(b,{class:"font-medium",to:{name:"edit-brand",params:{id:F.id}},text:F.name},null,8,["to","text"]),F.is_default?(g(),R(I,{key:0,class:"ml-2",variant:"primary",text:a.$t("core::app.is_default")},null,8,["text"])):Z("",!0)]),_:2},1024),l(y,null,{default:p(()=>[l(k,null,{default:p(()=>[l(w,{icon:"PencilAlt",to:{name:"edit-brand",params:{id:F.id}},text:a.$t("core::app.edit")},null,8,["to","text"]),l(w,{icon:"Trash",text:a.$t("core::app.delete"),onClick:T=>a.$confirm(()=>v(o)(F.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1},8,["overlay"])],64)}}},D2e={__name:"SettingsBrands",setup(e){return(t,n)=>(g(),R(R2e))}},O2e={__name:"BrandsCreate",setup(e){const{t}=Pe(),n=wt(),{addBrand:o}=lu(),{form:a}=Qe({name:"",display_name:"",is_default:!1,config:{primary_color:"#4f46e5"},visibility_group:{type:"all",depends_on:[]}});function r(){a.post("/brands").then(s=>{o(s),Innoclapps.success(t("brands::brand.created")),n.push({name:"edit-brand",params:{id:s.id}})})}return(s,i)=>{const u=c("IFormInput"),d=c("IFormError"),m=c("IFormGroup"),f=c("IColorSwatch"),h=c("IFormCheckbox"),y=c("IFormCheckboxLabel"),b=c("IFormCheckboxField"),I=c("IModal");return g(),R(I,{size:"sm","ok-text":s.$t("core::app.create"),"ok-disabled":v(a).busy,title:s.$t("brands::brand.create"),visible:"",static:"",form:"",onSubmit:r,onHidden:s.$router.back,onShown:i[7]||(i[7]=()=>s.$refs.inputNameRef.focus())},{default:p(()=>[l(m,{"label-for":"name",label:s.$t("brands::brand.form.name"),required:""},{default:p(()=>[l(u,{id:"name",ref:"inputNameRef",modelValue:v(a).name,"onUpdate:modelValue":i[0]||(i[0]=w=>v(a).name=w),onChange:i[1]||(i[1]=w=>v(a).display_name?void 0:v(a).display_name=w)},null,8,["modelValue"]),l(d,{error:v(a).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(m,{"label-for":"display_name",label:s.$t("brands::brand.form.display_name"),required:""},{default:p(()=>[l(u,{id:"display_name",modelValue:v(a).display_name,"onUpdate:modelValue":i[2]||(i[2]=w=>v(a).display_name=w)},null,8,["modelValue"]),l(d,{error:v(a).getError("display_name")},null,8,["error"])]),_:1},8,["label"]),l(m,{label:s.$t("brands::brand.form.primary_color")},{default:p(()=>[l(f,{modelValue:v(a).config.primary_color,"onUpdate:modelValue":i[3]||(i[3]=w=>v(a).config.primary_color=w),swatches:s.$scriptConfig("favourite_colors")},null,8,["modelValue","swatches"]),l(d,{error:v(a).getError("config.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(m,null,{default:p(()=>[l(b,null,{default:p(()=>[l(h,{checked:v(a).is_default,"onUpdate:checked":i[4]||(i[4]=w=>v(a).is_default=w)},null,8,["checked"]),l(y,{text:s.$t("brands::brand.form.is_default")},null,8,["text"])]),_:1}),l(d,{error:v(a).getError("is_default")},null,8,["error"])]),_:1}),l(m,{class:"mt-4"},{default:p(()=>[l(Bd,{type:v(a).visibility_group.type,"onUpdate:type":i[5]||(i[5]=w=>v(a).visibility_group.type=w),dependsOn:v(a).visibility_group.depends_on,"onUpdate:dependsOn":i[6]||(i[6]=w=>v(a).visibility_group.depends_on=w)},null,8,["type","dependsOn"])]),_:1})]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},P2e={class:"mb-1 flex justify-between"},tr={__name:"TranslateableLabel",props:["labelFor","label","locale"],emits:["update:locale"],setup(e){const{locales:t}=qe();return(n,o)=>{const a=c("IFormLabel"),r=c("IDropdownButton"),s=c("IDropdownItem"),i=c("IDropdownMenu"),u=c("IDropdown");return g(),D("div",P2e,[l(a,{for:e.labelFor,label:e.label},null,8,["for","label"]),l(u,null,{default:p(()=>[l(r,{text:e.locale,basic:"",small:""},null,8,["text"]),l(i,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(t),d=>(g(),R(s,{key:d,text:d,active:d===e.locale,condensed:"",onClick:m=>n.$emit("update:locale",d)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])}}},M2e=["src"],B2e=["src"],N2e={__name:"BrandsEdit",setup(e){const{t}=Pe(),n=Ct(),{scriptConfig:o,currentUser:a}=qe(),{brands:r,setBrand:s,fetchBrand:i,patchBrand:u}=lu(),d=V(!1),m=V(null),f=o("favourite_colors"),h=o("contentbuilder.fonts"),y=ro({documentSendMailSubject:a.value.locale,documentSendMailMessage:a.value.locale,documentSendMailButton:a.value.locale,documentSignedMailSubject:a.value.locale,documentSignedMailMessage:a.value.locale,documentSignedThankyouMessage:a.value.locale,documentAcceptedThankyouMessage:a.value.locale,signatureBoundText:a.value.locale}),{form:b}=Qe({visibility_group:{type:"all",depends_on:[]}}),I=P(()=>h.map(T=>T["font-family"])),w=P(()=>r.value.length===1&&m.value.is_default===!1?!0:r.value.length>1&&m.value.is_default===!1);function k(T){i(T,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}}).then(S=>{let A=S;b.set({name:A.name,display_name:A.display_name,config:A.config,is_default:A.is_default}),A.visibility_group&&b.set("visibility_group",A.visibility_group),m.value=A}).finally(()=>d.value=!0)}function x(){b.put(`/brands/${m.value.id}`,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}}).then(T=>{m.value=T,s(T.id,T),Innoclapps.success(t("brands::brand.updated"))}).catch(T=>{T.isValidationError()&&Innoclapps.error(t("core::app.form_validation_failed_with_sections"),3e3)})}function $(T){Innoclapps.request().delete(`/brands/${m.value.id}/logo/${T}`).then(()=>{F(T,null)})}function C(T,S){F(S,T.path)}function F(T,S){m.value["logo_"+T]=S,m.value["logo_"+T+"_url"]=S,u(m.value.id,{["logo_"+T]:S,["logo_"+T+"_url"]:S})}return k(n.params.id),(T,S)=>{const A=c("ICardHeading"),E=c("ICardHeader"),B=c("ITab"),M=c("ITabList"),N=c("IFormCheckbox"),G=c("IFormCheckboxLabel"),U=c("IFormCheckboxField"),j=c("IFormError"),O=c("IFormGroup"),H=c("IFormInput"),W=c("IColorSwatch"),X=c("ITabPanel"),q=c("CropsAndUploadsImage"),L=c("IText"),ee=c("ITextDisplay"),ce=c("Editor"),ue=c("ICustomSelect"),oe=c("IFormTextarea"),re=c("ITabPanels"),Y=c("ITabGroup"),ae=c("IButton"),se=c("ICardFooter"),xe=c("ICard");return g(),D(de,null,[l(E,null,{default:p(()=>[l(A,{text:T.$t("brands::brand.update")},null,8,["text"])]),_:1}),l(xe,{as:"form",overlay:!d.value,onSubmit:ot(x,["prevent"])},{default:p(()=>[d.value?(g(),R(Y,{key:0},{default:p(()=>[l(M,{class:"sm:px-1"},{default:p(()=>[l(B,{title:T.$t("brands::brand.form.sections.general")},null,8,["title"]),l(B,{title:T.$t("brands::brand.form.sections.navigation")},null,8,["title"]),l(B,{title:T.$t("brands::brand.form.sections.email")},null,8,["title"]),l(B,{title:T.$t("brands::brand.form.sections.thank_you")},null,8,["title"]),l(B,{title:T.$t("brands::brand.form.sections.pdf")},null,8,["title"]),l(B,{title:T.$t("brands::brand.form.sections.signature")},null,8,["title"])]),_:1}),l(re,{class:"px-4 sm:px-6"},{default:p(()=>[l(X,null,{default:p(()=>[w.value?(g(),R(O,{key:0,class:"mb-6"},{default:p(()=>[l(U,null,{default:p(()=>[l(N,{checked:v(b).is_default,"onUpdate:checked":S[0]||(S[0]=le=>v(b).is_default=le)},null,8,["checked"]),l(G,{text:T.$t("brands::brand.form.is_default")},null,8,["text"])]),_:1}),l(j,{error:v(b).getError("is_default")},null,8,["error"])]),_:1})):Z("",!0),l(O,{"label-for":"name",label:T.$t("brands::brand.form.name"),required:""},{default:p(()=>[l(H,{id:"name",modelValue:v(b).name,"onUpdate:modelValue":S[1]||(S[1]=le=>v(b).name=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(O,{"label-for":"display_name",label:T.$t("brands::brand.form.display_name"),required:""},{default:p(()=>[l(H,{id:"display_name",modelValue:v(b).display_name,"onUpdate:modelValue":S[2]||(S[2]=le=>v(b).display_name=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("display_name")},null,8,["error"])]),_:1},8,["label"]),l(O,{label:T.$t("brands::brand.form.primary_color")},{default:p(()=>[l(W,{modelValue:v(b).config.primary_color,"onUpdate:modelValue":S[3]||(S[3]=le=>v(b).config.primary_color=le),swatches:v(f)},null,8,["modelValue","swatches"]),l(j,{error:v(b).getError("config.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(O,{class:"mt-4"},{default:p(()=>[l(Bd,{type:v(b).visibility_group.type,"onUpdate:type":S[4]||(S[4]=le=>v(b).visibility_group.type=le),dependsOn:v(b).visibility_group.depends_on,"onUpdate:dependsOn":S[5]||(S[5]=le=>v(b).visibility_group.depends_on=le)},null,8,["type","dependsOn"])]),_:1})]),_:1}),l(X,null,{default:p(()=>[l(O,{class:"mb-5 max-w-xl",label:T.$t("brands::brand.form.upload_logo")},{default:p(()=>[l(q,{name:"logo_view","upload-url":`${T.$scriptConfig("apiURL")}/brands/${m.value.id}/logo/view`,image:m.value.logo_view_url,"show-delete":!!m.value.logo_view,"cropper-options":{aspectRatio:null},"choose-text":v(b).logo_view?T.$t("core::app.change"):T.$t("core::settings.choose_logo"),onCleared:S[6]||(S[6]=le=>$("view")),onSuccess:S[7]||(S[7]=le=>C(le,"view"))},{image:p(({src:le})=>[_("img",{class:"h-8 w-auto",src:le},null,8,M2e)]),_:1},8,["upload-url","image","show-delete","choose-text"]),l(L,{class:"mt-4",text:T.$t("brands::brand.form.navigation.upload_logo_info")},null,8,["text"])]),_:1},8,["label"]),l(O,{label:T.$t("brands::brand.form.navigation.background_color")},{default:p(()=>[l(W,{modelValue:v(b).config.navigation.background_color,"onUpdate:modelValue":S[8]||(S[8]=le=>v(b).config.navigation.background_color=le),swatches:v(f)},null,8,["modelValue","swatches"]),l(j,{error:v(b).getError("config.navigation.background_color")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,null,{default:p(()=>[l(O,{class:"mb-5 max-w-xl",label:T.$t("brands::brand.form.upload_logo")},{default:p(()=>[l(q,{name:"logo_mail","upload-url":`${T.$scriptConfig("apiURL")}/brands/${m.value.id}/logo/mail`,image:m.value.logo_mail_url,"show-delete":!!m.value.logo_mail,"cropper-options":{aspectRatio:null},"choose-text":v(b).logo_mail?T.$t("core::app.change"):T.$t("core::settings.choose_logo"),onCleared:S[9]||(S[9]=le=>$("mail")),onSuccess:S[10]||(S[10]=le=>C(le,"mail"))},{image:p(({src:le})=>[_("img",{class:"h-8 w-auto",src:le},null,8,B2e)]),_:1},8,["upload-url","image","show-delete","choose-text"]),l(L,{class:"mt-4",text:T.$t("brands::brand.form.email.upload_logo_info")},null,8,["text"])]),_:1},8,["label"]),l(ee,{class:"mb-4",text:T.$t("brands::brand.form.document.send.info")},null,8,["text"]),l(O,{"label-for":"document_mail_subject",label:T.$t("brands::brand.form.document.send.subject")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSendMailSubject,"onUpdate:locale":S[11]||(S[11]=ve=>y.documentSendMailSubject=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(H,{id:"document_mail_subject",modelValue:v(b).config.document.mail_subject[y.documentSendMailSubject],"onUpdate:modelValue":S[12]||(S[12]=le=>v(b).config.document.mail_subject[y.documentSendMailSubject]=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.mail_subject")},null,8,["error"])]),_:1},8,["label"]),l(O,{label:T.$t("brands::brand.form.document.send.message")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSendMailMessage,"onUpdate:locale":S[13]||(S[13]=ve=>y.documentSendMailMessage=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(ce,{modelValue:v(b).config.document.mail_message[y.documentSendMailMessage],"onUpdate:modelValue":S[14]||(S[14]=le=>v(b).config.document.mail_message[y.documentSendMailMessage]=le),"with-image":!1,"absolute-urls":""},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.mail_message")},null,8,["error"])]),_:1},8,["label"]),l(O,{"label-for":"document_mail_button_text",label:T.$t("brands::brand.form.document.send.button_text")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSendMailButton,"onUpdate:locale":S[15]||(S[15]=ve=>y.documentSendMailButton=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(H,{id:"document_mail_button_text",modelValue:v(b).config.document.mail_button_text[y.documentSendMailButton],"onUpdate:modelValue":S[16]||(S[16]=le=>v(b).config.document.mail_button_text[y.documentSendMailButton]=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.mail_button_text")},null,8,["error"])]),_:1},8,["label"]),l(ee,{class:"mb-4 mt-6",text:T.$t("brands::brand.form.document.sign.info")},null,8,["text"]),l(O,{"label-for":"signed_mail_subject",label:T.$t("brands::brand.form.document.sign.subject")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSignedMailSubject,"onUpdate:locale":S[17]||(S[17]=ve=>y.documentSignedMailSubject=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(H,{id:"signed_mail_subject",modelValue:v(b).config.document.signed_mail_subject[y.documentSignedMailSubject],"onUpdate:modelValue":S[18]||(S[18]=le=>v(b).config.document.signed_mail_subject[y.documentSignedMailSubject]=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.signed_mail_subject")},null,8,["error"])]),_:1},8,["label"]),l(O,{label:T.$t("brands::brand.form.document.sign.message")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSignedMailMessage,"onUpdate:locale":S[19]||(S[19]=ve=>y.documentSignedMailMessage=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(ce,{modelValue:v(b).config.document.signed_mail_message[y.documentSignedMailMessage],"onUpdate:modelValue":S[20]||(S[20]=le=>v(b).config.document.signed_mail_message[y.documentSignedMailMessage]=le),"with-image":!1,"absolute-urls":""},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.signed_mail_message")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,null,{default:p(()=>[l(O,{label:T.$t("brands::brand.form.document.sign.after_sign_message")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentSignedThankyouMessage,"onUpdate:locale":S[21]||(S[21]=ve=>y.documentSignedThankyouMessage=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(ce,{modelValue:v(b).config.document.signed_thankyou_message[y.documentSignedThankyouMessage],"onUpdate:modelValue":S[22]||(S[22]=le=>v(b).config.document.signed_thankyou_message[y.documentSignedThankyouMessage]=le),"with-image":!1,minimal:""},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.signed_thankyou_message")},null,8,["error"])]),_:1},8,["label"]),l(O,{label:T.$t("brands::brand.form.document.accept.after_accept_message")},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.documentAcceptedThankyouMessage,"onUpdate:locale":S[23]||(S[23]=ve=>y.documentAcceptedThankyouMessage=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(ce,{modelValue:v(b).config.document.accepted_thankyou_message[y.documentAcceptedThankyouMessage],"onUpdate:modelValue":S[24]||(S[24]=le=>v(b).config.document.accepted_thankyou_message[y.documentAcceptedThankyouMessage]=le),"with-image":!1,minimal:""},null,8,["modelValue"]),l(j,{error:v(b).getError("config.document.accepted_thankyou_message")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,null,{default:p(()=>[l(O,{"label-for":"pdf-font",label:T.$t("brands::brand.form.pdf.default_font"),description:T.$t("brands::brand.form.pdf.default_font_info",{fontName:"DejaVu Sans"}),required:""},{default:p(()=>[l(ue,{modelValue:v(b).config.pdf.font,"onUpdate:modelValue":S[25]||(S[25]=le=>v(b).config.pdf.font=le),"input-id":"pdf-font",clearable:!1,options:I.value},null,8,["modelValue","options"]),l(j,{error:v(b).getError("config.pdf.font")},null,8,["error"])]),_:1},8,["label","description"]),l(O,{"label-for":"pdf-size",label:T.$t("brands::brand.form.pdf.size"),required:""},{default:p(()=>[l(ue,{modelValue:v(b).config.pdf.size,"onUpdate:modelValue":S[26]||(S[26]=le=>v(b).config.pdf.size=le),"input-id":"pdf-size",clearable:!1,options:["a4","letter"]},null,8,["modelValue"]),l(j,{error:v(b).getError("config.pdf.size")},null,8,["error"])]),_:1},8,["label"]),l(O,{"label-for":"pdf-orientation",label:T.$t("brands::brand.form.pdf.orientation"),required:""},{default:p(()=>[l(ue,{modelValue:v(b).config.pdf.orientation,"onUpdate:modelValue":S[27]||(S[27]=le=>v(b).config.pdf.orientation=le),"input-id":"pdf-orientation",clearable:!1,options:["portrait","landscape"]},{label:p(({option:le})=>[ne(K(T.$t("brands::brand.form.pdf.orientation_"+le)),1)]),option:p(le=>[ne(K(T.$t("brands::brand.form.pdf.orientation_"+le.label)),1)]),_:1},8,["modelValue"]),l(j,{error:v(b).getError("config.pdf.orientation")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,null,{default:p(()=>[l(O,{"label-for":"bound_text",label:T.$t("brands::brand.form.signature.bound_text"),required:""},{label:p(({label:le,labelFor:ge})=>[l(tr,{locale:y.signatureBoundText,"onUpdate:locale":S[28]||(S[28]=ve=>y.signatureBoundText=ve),label:le,"label-for":ge},null,8,["locale","label","label-for"])]),default:p(()=>[l(oe,{id:"bound_text",modelValue:v(b).config.signature.bound_text[y.signatureBoundText],"onUpdate:modelValue":S[29]||(S[29]=le=>v(b).config.signature.bound_text[y.signatureBoundText]=le)},null,8,["modelValue"]),l(j,{error:v(b).getError("config.signature.bound_text")},null,8,["error"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})):Z("",!0),l(se,{class:"text-right"},{default:p(()=>[l(ae,{type:"submit",variant:"primary",disabled:v(b).busy,text:T.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/brands",component:D2e,meta:{title:rt("brands::brand.brands"),superAdmin:!0}}),t.addRoute("settings",{path:"/settings/brands/create",component:O2e,name:"create-brand",meta:{superAdmin:!0}}),t.addRoute("settings",{path:"/settings/brands/:id/edit",component:N2e,name:"edit-brand",meta:{superAdmin:!0}})});const V2e={class:"text-right"},L2e=["textContent"],q2e={__name:"LoggedCallsCard",props:{card:Object},setup(e){const t=V(null),n=V(!1);function o(a){t.value=a,n.value=!0}return(a,r)=>{const s=c("ITextBlock"),i=c("IButton"),u=c("IModal"),d=c("Icon"),m=c("ILink"),f=c("IText"),h=c("IBadge"),y=c("CardAsyncTable");return g(),D(de,null,[l(u,{id:"readCallOutcomeModal",visible:n.value,"onUpdate:visible":r[0]||(r[0]=b=>n.value=b),size:"sm",title:a.$t("calls.call.outcome.call_outcome")},{"modal-footer":p(({cancel:b})=>[_("div",V2e,[l(i,{variant:"secondary",text:a.$t("core::app.hide"),onClick:b},null,8,["text","onClick"])])]),default:p(()=>[l(s,{innerHTML:t.value},null,8,["innerHTML"])]),_:1},8,["visible","title"]),l(y,{card:e.card},{date:p(({formatted:b,row:I})=>[l(f,null,{default:p(()=>[ne(K(I.user.name)+" - ",1),l(m,{class:"inline-flex items-center",onClick:w=>o(I.body)},{default:p(()=>[_("span",{textContent:K(b)},null,8,L2e),l(d,{icon:"Window",class:"ml-2 size-4"})]),_:2},1032,["onClick"])]),_:2},1024),(g(!0),D(de,null,Ie(I.associations,(w,k)=>(g(),D("div",{key:k},[(g(!0),D(de,null,Ie(w,x=>(g(),D("div",{key:x.id,class:"flex space-x-2"},[l(m,{class:"font-normal underline underline-offset-2",to:x.path,text:x.display_name,basic:""},null,8,["to","text"])]))),128))]))),128))]),"outcome.name":p(({row:b,formatted:I})=>[l(h,{class:"shrink-0",text:I,color:b.outcome.swatch_color},null,8,["text","color"])]),_:1},8,["card"])],64)}}},U2e={__name:"RecordTabCall",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("IBadge"),r=c("ITab");return Ia([e.resource.calls_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"Phone"}),ne(" "+K(t.$t("calls::call.calls"))+" ",1),te(l(a,{variant:"neutral",text:e.resource.calls_count,pill:""},null,8,["text"]),[[fe,e.resource.calls_count]])]),_:1}),n,0)}}};function qd(){const{scriptConfig:e}=qe(),t=Innoclapps.app.config.globalProperties.$voip,n=e("voip.client")!==null;return{voip:t,hasVoIPClient:n}}const j2e={class:"flex items-center"},z2e={key:0,class:"flex sm:ml-2"},H2e={class:"shrink-0"},W2e=["value"],Fs={__name:"CreateFollowUpTask",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e,{expose:t}){const n=Ht(e,"modelValue"),{t:o}=Pe(),{DateTime:a,LocalDateTimeInstance:r,UTCDateTimeInstance:s}=it(),i=V(""),u=V(!1),d=P(()=>({label:o("core::dates.today"),value:s.toISODate()})),m=P(()=>({label:o("core::dates.tomorrow"),value:s.plus({days:1}).toISODate(),default:!0})),f=P(()=>({label:o("core::dates.in_x_days",2)+" ("+r.plus({days:2}).toFormat("cccc")+")",value:s.plus({days:2}).toISODate()})),h=P(()=>({label:o("core::dates.in_x_days",3)+" ("+r.plus({days:3}).toFormat("cccc")+")",value:s.plus({days:3}).toISODate()})),y=P(()=>({label:o("core::dates.in_x_days",4)+" ("+r.plus({days:4}).toFormat("cccc")+")",value:s.plus({days:4}).toISODate()})),b=P(()=>({label:o("core::dates.in_x_days",5)+" ("+r.plus({days:5}).toFormat("cccc")+")",value:s.plus({days:5}).toISODate()})),I=P(()=>{const B=F(r,"weeks",1);return{label:o("core::dates.in_x_weeks",1)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),w=P(()=>{const B=F(r,"weeks",2);return{label:o("core::dates.in_x_weeks",2)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),k=P(()=>{const B=F(r,"month",1);return{label:o("core::dates.in_x_months",1)+" ("+B.toLocaleString(a.DATE_MED_WITH_WEEKDAY)+")",value:B.toUTC().toISODate()}}),x=P(()=>i.value==="custom"),$=P(()=>[v(d),v(m),v(f),v(h),v(y),v(b),v(I),v(w),v(k),{label:o("core::dates.custom"),value:"custom"}]),C=P(()=>{let B=ft($.value,["value",i.value]);return B?B.label:""});function F(B,M,N){let G=B.plus({[M]:N});return G.weekday===6?G=G.plus({days:2}):G.weekday===7&&(G=G.plus({days:1})),G}const T=P(()=>ft($.value,["default",!0]).value);function S(B){B!=="custom"&&(n.value=B),zn(()=>i.value=B,300)}function A(B){B&&!n.value?We(()=>{n.value=T.value,i.value=T.value}):B||(n.value=null)}function E(){u.value=!1}return t({reset:E}),(B,M)=>{const N=c("IFormCheckbox"),G=c("IFormCheckboxLabel"),U=c("IFormCheckboxField"),j=c("IDropdownButton"),O=c("IDropdownItem"),H=c("IDropdownMenu"),W=c("IDropdown"),X=c("DatePicker");return g(),D("div",j2e,[l(U,{class:"shrink-0"},{default:p(()=>[l(N,{checked:u.value,"onUpdate:checked":M[0]||(M[0]=q=>u.value=q),onChange:A},null,8,["checked"]),l(G,{class:be(u.value?"hidden sm:block":""),text:B.$t("activities::activity.create_follow_up_task")},null,8,["class","text"])]),_:1}),u.value?(g(),D("div",z2e,[te(_("div",H2e,[l(W,null,{default:p(()=>[l(j,{basic:""},{default:p(()=>[ne(K(C.value),1)]),_:1}),l(H,null,{default:p(()=>[(g(!0),D(de,null,Ie($.value,q=>(g(),R(O,{key:q.value,text:q.label,condensed:"",onClick:L=>S(q.value)},null,8,["text","onClick"]))),128))]),_:1})]),_:1})],512),[[fe,!x.value]]),x.value?(g(),R(X,{key:0,modelValue:n.value,"onUpdate:modelValue":M[1]||(M[1]=q=>n.value=q),required:!0},{default:p(({inputValue:q,inputEvents:L})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:q},Kr(L,!0)),null,16,W2e)]),_:1},8,["modelValue"])):Z("",!0)])):Z("",!0)])}}};function su(){const{t:e}=Pe(),{findTypeByFlag:t}=kr(),{scriptConfig:n,currentUser:o}=qe(),{DateTime:a}=it();async function r(s,i,u,d,m={}){let f=a.fromFormat(s,"yyyy-MM-dd").set({hour:n("activities.defaults.hour"),minute:n("activities.defaults.minutes"),second:0}).toUTC();const{createResource:h}=qt(Innoclapps.resourceName("activities"));return await h(Object.assign({title:e("activities::activity.follow_up_with_title",{with:d}),activity_type_id:t("task").id,due_date:f.toISO(),end_date:f.toISODate(),reminder_minutes_before:n("defaults.reminder_minutes"),user_id:o.value.id,[i]:[u]},m))}return{createFollowUpActivity:r}}const G2e={class:"mt-2 space-y-2 sm:mt-0 sm:space-x-2 sm:space-y-0"},K2e={__name:"CallsCreate",props:{viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResource:{required:!0,type:Object}},emits:["cancel"],setup(e){const t=e,n=Le("synchronizeResource"),o=Le("incrementResourceCount"),a=Innoclapps.resourceName("calls"),{t:r}=Pe(),{fields:s,hasFields:i,getCreateFields:u}=In(),{createFollowUpActivity:d}=su(),{createResource:m}=qt(a),{form:f}=Qe({task_date:null,associations:{[t.viaResource]:[t.viaResourceId]}}),h=V(null);async function y(w){if(f.task_date){let k=await d(f.task_date,t.viaResource,t.viaResourceId,t.relatedResourceDisplayName,{note:r("calls::call.follow_up_task_body",{content:w.body})});h.value.reset(),k&&(n({activities:[k]}),o("incomplete_activities_for_user_count"))}n({calls:[w]}),o("calls_count"),Innoclapps.success(r("calls::call.created")),f.reset()}function b(){m(f.withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId})).then(y)}async function I(){s.value=await u(a,{viaResource:t.viaResource,viaResourceId:t.viaResourceId})}return I(),(w,k)=>{const x=c("FormFields"),$=c("ICardBody"),C=c("IButton"),F=c("ICardFooter"),T=c("ICard");return g(),R(T,{as:"form",overlay:!v(i),onSubmit:ot(b,["prevent"])},{default:p(()=>[l($,null,{default:p(()=>[l(x,{form:v(f),fields:v(s),"resource-name":v(a),onUpdateFieldValue:k[0]||(k[0]=S=>v(f).fill(S.attribute,S.value)),onSetInitialValue:k[1]||(k[1]=S=>v(f).set(S.attribute,S.value))},null,8,["form","fields","resource-name"]),l(Uo,{modelValue:v(f).associations,"onUpdate:modelValue":k[2]||(k[2]=S=>v(f).associations=S),placement:"bottom-start","primary-record":e.relatedResource,"primary-resource-name":e.viaResource,"primary-record-disabled":!0,"initial-associateables":e.relatedResource},null,8,["modelValue","primary-record","primary-resource-name","initial-associateables"])]),_:1}),l(F,{class:"flex flex-col sm:flex-row sm:items-center"},{default:p(()=>[l(Fs,{ref_key:"createFollowUpTaskRef",ref:h,modelValue:v(f).task_date,"onUpdate:modelValue":k[3]||(k[3]=S=>v(f).task_date=S),class:"grow"},null,8,["modelValue"]),_("div",G2e,[l(C,{class:"w-full sm:w-auto",variant:"secondary",text:w.$t("core::app.cancel"),onClick:k[4]||(k[4]=S=>w.$emit("cancel"))},null,8,["text"]),l(C,{class:"w-full sm:w-auto",variant:"primary",disabled:v(f).busy,text:w.$t("calls::call.add"),onClick:b},null,8,["disabled","text"])])]),_:1})]),_:1},8,["overlay"])}}},Z2e=["innerHTML"],iu={__name:"HtmlableLightbox",props:{html:String},setup(e){const t=e,n=V(null),o=V(null),a=V([]);function r(i){var u;i.target.tagName==="IMG"&&i.target.dataset!==void 0&&i.target.dataset.lightboxIndex>=0&&((u=i.target.parents("a")[0])==null?void 0:u.tagName)!=="A"&&(n.value=parseInt(i.target.dataset.lightboxIndex))}function s(){a.value=[],Array.from(o.value.getElementsByTagName("img")).forEach(i=>{var u;i.src&&a.value.indexOf(i.src)===-1&&((u=i.parents("a")[0])==null?void 0:u.tagName)!=="A"&&(a.value.push(i.src),i.classList.add("cursor-pointer"),i.classList.add("hover:opacity-90"),i.dataset.lightboxIndex=a.value.length-1)})}return Se(()=>t.html,s,{flush:"post"}),Xe(s),(i,u)=>(g(),D("div",null,[l(yv,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=d=>n.value=d),urls:a.value},null,8,["modelValue","urls"]),_("div",{ref_key:"htmlWrapperRef",ref:o,onClick:r,innerHTML:e.html},null,8,Z2e)]))}},pl=V([]),o5=()=>{const{setLoading:e,isLoading:t}=Cn(),{scriptConfig:n}=qe();pl.value=[...n("calls.outcomes")||[]],Jt(()=>{n("calls.outcomes",[...pl.value])});const o=P(()=>Vt(pl.value,"name"));function a(s){pl.value=s}function r(s={}){e(!0),Innoclapps.request("/call-outcomes",Object.assign({},{params:{per_page:100}},s)).then(({data:i})=>pl.value=i.data).finally(()=>e(!1))}return{callOutcomes:pl,outcomesByName:o,outcomesAreBeingFetched:t,setCallOutcomes:a,fetchCallOutcomes:r}},Y2e={__name:"CallsEdit",props:{callId:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]}},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,a=Le("synchronizeResource"),r=Innoclapps.resourceName("calls"),{t:s}=Pe(),{fields:i,hasFields:u,hydrateFields:d,getUpdateFields:m}=In(),{form:f}=Qe(),{updateResource:h,retrieveResource:y}=qt(r);function b(){h(f.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.callId).then(I)}function I(k){a({calls:k}),o("updated",k),Innoclapps.success(s("calls::call.updated"))}async function w(){const k=await y(n.callId);i.value=await m(r,n.callId,{viaResource:n.viaResource,viaResourceId:n.viaResourceId}),d(k)}return w(),(k,x)=>{const $=c("FormFields"),C=c("ICardBody"),F=c("IButton"),T=c("ICardFooter"),S=c("ICard");return g(),R(S,{as:"form",overlay:!v(u),onSubmit:ot(b,["prevent"])},{default:p(()=>[l(C,null,{default:p(()=>[l($,{fields:v(i),form:v(f),"resource-name":v(r),"resource-id":e.callId,onUpdateFieldValue:x[0]||(x[0]=A=>v(f).fill(A.attribute,A.value)),onSetInitialValue:x[1]||(x[1]=A=>v(f).set(A.attribute,A.value))},null,8,["fields","form","resource-name","resource-id"])]),_:1}),l(T,{class:"space-x-2 text-right"},{default:p(()=>[l(F,{variant:"secondary",text:k.$t("core::app.cancel"),onClick:x[2]||(x[2]=A=>k.$emit("cancelled"))},null,8,["text"]),l(F,{type:"submit",variant:"primary",disabled:v(f).busy,text:k.$t("core::app.save"),onClick:b},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])}}},X2e={class:"flex w-full flex-1"},Q2e={class:"mr-2 mt-px flex shrink-0 self-start"},J2e={class:"flex grow flex-col space-y-1 lg:flex-row lg:space-x-3 lg:space-y-0"},ewe={class:"flex grow flex-col items-start"},twe=["textContent"],nwe=["textContent"],owe={class:"space-x-2 lg:space-x-0"},awe=["textContent"],a5=Object.assign({inheritAttrs:!1},{__name:"CallsView",props:{callId:{required:!0,type:Number},commentsCount:{required:!0,type:Number},callDate:{required:!0,type:String},body:{required:!0,type:String},userId:{required:!0,type:Number},outcomeId:{required:!0,type:Number},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},authorizations:{required:!0,type:Object},associationsCount:{required:!0,type:Number},relatedResource:{required:!0,type:Object},comments:{required:!0,type:Array},collapsable:Boolean},setup(e){const t=e,n=Le("synchronizeResource"),o=Le("decrementResourceCount"),{t:a}=Pe(),{localizedDateTime:r}=it(),{outcomesByName:s}=o5(),{findUserById:i}=qe(),u=Innoclapps.resourceName("calls"),{updateResource:d,deleteResource:m}=qt(u),f=P(()=>s.value.find(x=>x.id==t.outcomeId)),h=P(()=>i(t.userId)),{commentsAreVisible:y}=Ca(t.callId,"calls"),b=V(!1);async function I(x={}){let $=await d({call_outcome_id:t.outcomeId,date:t.callDate,body:t.body,via_resource:t.viaResource,via_resource_id:t.viaResourceId,...x},t.callId);n({calls:$})}async function w(x){await m(x),n({calls:{id:x,_delete:!0}}),o("calls_count"),Innoclapps.success(a("calls::call.deleted"))}function k(x){x.type=="dblclick"&&b.value||t.authorizations.update&&(b.value=!b.value)}return(x,$)=>{const C=c("IAvatar"),F=c("I18nT"),T=c("ITextBlockDark"),S=c("ITextDark"),A=c("IDropdownButton"),E=c("IDropdownItem"),B=c("IDropdownMenu"),M=c("IDropdown"),N=c("IDropdownMinimal"),G=c("ICardActions"),U=c("ICardHeader"),j=c("TextCollapse"),O=c("EditorText"),H=c("CollapseableCommentsLink"),W=c("CollapsableCommentsList"),X=c("ICardBody"),q=c("CommentsAdd"),L=c("ICardFooter"),ee=c("ICard");return g(),D(de,null,[te(l(ee,Ue(x.$attrs,{class:"call-"+e.callId}),{default:p(()=>[l(U,null,{default:p(()=>[_("div",X2e,[_("div",Q2e,[l(C,{src:h.value.avatar_url},null,8,["src"])]),_("div",J2e,[_("div",ewe,[l(T,{class:"mt-0.5 grow lg:mt-0.5"},{default:p(()=>[l(F,{scope:"global",keypath:"calls::call.info_created"},{user:p(()=>[_("span",{class:"font-medium",textContent:K(h.value.name)},null,8,twe)]),date:p(()=>[_("span",{class:"font-medium",textContent:K(v(r)(e.callDate))},null,8,nwe)]),_:1})]),_:1}),l(Uo,{placement:"bottom-start","associations-count":e.associationsCount,"initial-associateables":e.relatedResource,"resource-id":e.callId,"resource-name":v(u),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:$[0]||($[0]=ce=>v(n)({calls:ce}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"])]),_("div",owe,[l(S,{class:"inline font-medium lg:hidden",text:x.$t("calls::call.outcome.outcome")},null,8,["text"]),l(M,null,{default:p(()=>[l(A,{class:"lg:mt-1.5",as:v(Od),disabled:!e.authorizations.update,color:f.value.swatch_color},{default:p(()=>[_("span",{class:"truncate lg:max-w-36",textContent:K(f.value.name)},null,8,awe)]),_:1},8,["as","disabled","color"]),l(B,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(s),ce=>(g(),R(E,{key:ce.id,text:ce.name,active:e.outcomeId===ce.id,onClick:ue=>I({call_outcome_id:ce.id})},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])])]),l(G,{class:"mt-1 self-start"},{default:p(()=>[e.authorizations.update&&e.authorizations.delete?(g(),R(N,{key:0,small:""},{default:p(()=>[te(l(E,{text:x.$t("core::app.edit"),onClick:k},null,8,["text"]),[[fe,e.authorizations.update]]),te(l(E,{text:x.$t("core::app.delete"),onClick:$[1]||($[1]=ce=>x.$confirm(()=>w(e.callId)))},null,8,["text"]),[[fe,e.authorizations.delete]])]),_:1})):Z("",!0)]),_:1})]),_:1}),l(X,null,{default:p(()=>[l(O,{onDblclick:k},{default:p(()=>[e.collapsable?(g(),R(j,{key:0,text:e.body,length:250,lightbox:""},null,8,["text"])):(g(),R(iu,{key:1,html:e.body},null,8,["html"]))]),_:1}),l(W,{class:"mt-3","commentable-type":"calls","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.callId,count:e.commentsCount,comments:e.comments,onUpdated:$[2]||($[2]=ce=>v(n)({calls:{id:e.callId,comments:ce}})),onDeleted:$[3]||($[3]=ce=>v(n)({calls:{id:e.callId,comments:{id:ce,_delete:!0}}})),"onUpdate:comments":$[4]||($[4]=ce=>v(n)({calls:{id:e.callId,comments:ce}})),"onUpdate:count":$[5]||($[5]=ce=>v(n)({calls:{id:e.callId,comments_count:ce}}))},{default:p(({hasComments:ce,totalComments:ue,commentsAreBeingLoaded:oe,toggleCommentsVisibility:re})=>[ce?(g(),R(H,{key:0,class:"mt-6",loading:oe,total:ue,collapsed:v(y),onClick:re},null,8,["loading","total","collapsed","onClick"])):Z("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])]),_:1}),l(L,{class:"text-right"},{default:p(()=>[l(q,{"commentable-type":"calls","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.callId,onCreated:$[6]||($[6]=ce=>(y.value=!0,v(n)({calls:{id:e.callId,comments:[ce]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[fe,!b.value]]),b.value?(g(),R(Y2e,{key:0,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"call-id":e.callId,onCancelled:$[7]||($[7]=ce=>b.value=!1),onUpdated:$[8]||($[8]=ce=>b.value=!1)},null,8,["via-resource","via-resource-id","call-id"])):Z("",!0)],64)}}}),rwe={class:"text-xs"},lwe={__name:"MakeCallButton",props:{resourceName:{required:!0,type:String},resource:{required:!0,type:Object}},emits:["requested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{gate:r}=bs(),{hasVoIPClient:s}=qd(),i=P(()=>{if(s){if(r.userCant("use voip"))return a("calls::call.no_voip_permissions")}else return a("core::app.integration_not_configured");return""}),u=P(()=>r.userCant("use voip")||!s),d=P(()=>{let w=[];switch(w.push(...I(n.resource)),n.resourceName){case"contacts":w.push(...I(n.resource.companies||[]));break;case"companies":w.push(...I(n.resource.contacts||[]));break;case"deals":w.push(...I(n.resource.companies||[])),w.push(...I(n.resource.contacts||[]));break}return w}),m=P(()=>d.value.map(w=>w.phoneNumber)),f=P(()=>m.value.length),h=P(()=>f.value>0),y=P(()=>f.value>1);function b(w){o("requested",w)}function I(w){let k=[];return Vn(w).forEach(x=>{k=k.concat(...(x.phones||[]).map($=>({type:$.type,phoneNumber:$.number,resourceDisplayName:x.display_name})))}),k}return(w,k)=>{const x=c("IDropdownButton"),$=c("IDropdownItem"),C=c("IDropdownMenu"),F=c("IDropdown"),T=c("IButton"),S=ze("i-tooltip");return te((g(),D("span",null,[y.value?(g(),R(F,{key:0},{default:p(()=>[l(x,{variant:"primary",icon:"Phone",class:"w-full",disabled:u.value,text:w.$t("calls::call.make"),soft:""},null,8,["disabled","text"]),l(C,null,{default:p(()=>[(g(!0),D(de,null,Ie(d.value,(A,E)=>(g(),R($,{key:A.phoneNumber+A.type+E,icon:A.type=="mobile"?"DeviceMobile":"Phone",onClick:B=>b(A.phoneNumber)},{default:p(()=>[ne(K(A.phoneNumber)+" ",1),_("span",rwe," ("+K(A.resourceDisplayName)+") ",1)]),_:2},1032,["icon","onClick"]))),128))]),_:1})]),_:1})):(g(),R(T,{key:1,icon:"Phone",variant:"primary",disabled:!h.value||u.value,text:w.$t("calls::call.make"),soft:"",onClick:k[0]||(k[0]=A=>b(m.value[0]))},null,8,["disabled","text"]))])),[[S,u.value?i.value:null]])}}},swe={class:"sm:flex sm:items-start sm:justify-between"},iwe={class:"mt-5 space-x-0 space-y-1 sm:ml-6 sm:mt-0 sm:flex sm:shrink-0 sm:items-center sm:space-x-2 sm:space-y-0"},uwe={class:"mt-3 space-y-4 sm:mt-7"},Zm="calls",cwe={__name:"RecordTabCallPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o=Ct(),a=V(null),r=V(!1),{voip:s}=qd(),{commentsAreVisible:i}=Ca(o.query.resourceId,Zm),{dataLoadedFirstTime:u,focusToAssociateableElement:d,searchResults:m,isSearching:f,hasSearchResults:h,performSearch:y,search:b,loadData:I,infiniteHandler:w}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,synchronizeResource:n,infinityRef:a,timelineRelation:Zm}),k=P(()=>Vt(m.value||t.resource.calls,"date","desc")),x=P(()=>k.value.length>0);async function $(C){r.value=!0,await s.makeCall(C)}return o.query.resourceId&&o.query.section===Zm&&Se(u,()=>{d(o.query.resourceId,"call").then(()=>{o.query.comment_id&&(i.value=!0)})},{once:!0}),(C,F)=>{const T=c("ITextDark"),S=c("IText"),A=c("IButton"),E=c("InputSearch"),B=c("ICardBody"),M=c("ICard"),N=c("ITabPanel");return g(),R(N,{lazy:!v(u),onActivatedOnce:v(I)},{default:p(()=>[te(l(M,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(B,null,{default:p(()=>[_("div",swe,[_("div",null,[l(T,{class:"font-semibold",text:C.$t("calls::call.manage_calls")},null,8,["text"]),l(S,{class:"max-w-xl",text:C.$t("calls::call.info")},null,8,["text"])]),_("div",iwe,[l(A,{variant:"primary",icon:"PlusSolid",class:"w-full sm:w-auto",text:C.$t("calls::call.add"),onClick:F[0]||(F[0]=G=>r.value=!0)},null,8,["text"]),C.$gate.userCan("use voip")?(g(),R(lwe,{key:0,class:"block w-full sm:w-auto","resource-name":e.resourceName,resource:e.resource,onRequested:$},null,8,["resource-name","resource"])):Z("",!0)])]),te(l(E,{modelValue:v(b),"onUpdate:modelValue":[F[1]||(F[1]=G=>hn(b)?b.value=G:null),v(y)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[fe,x.value||v(b)]])]),_:1})]),_:1},512),[[fe,!r.value]]),r.value?(g(),R(K2e,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,onCancel:F[2]||(F[2]=G=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource"])):Z("",!0),_("div",uwe,[(g(!0),D(de,null,Ie(k.value,(G,U,j,O)=>{const H=[G.updated_at,G.comments_count,G.comments?G.comments.map(X=>X.updated_at):null,G.call_outcome_id];if(O&&O.key===G.id&&Fc(O,H))return O;const W=(g(),D("div",{key:G.id},[l(a5,{"call-id":G.id,"comments-count":G.comments_count,"call-date":G.date,body:G.body,"user-id":G.user_id,"outcome-id":G.call_outcome_id,authorizations:G.authorizations,"associations-count":G.associations_count,comments:G.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["call-id","comments-count","call-date","body","user-id","outcome-id","authorizations","associations-count","comments","via-resource","via-resource-id","related-resource"])]));return W.memo=H,W},F,3),128))]),te(l(S,{class:"mt-6 text-center",text:C.$t("core::app.no_search_results")},null,8,["text"]),[[fe,v(f)&&!v(h)]]),l(Ir,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:F[5]||(F[5]=G=>v(w)(G))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},dwe={class:"mt-3"},mwe={__name:"RecordTabTimelineCall",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),R(_o,{"heading-class":"font-medium",icon:"Phone","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:t.$t("calls::call.timeline.heading")},{default:p(()=>[_("div",dwe,[l(a5,{"call-id":e.log.id,"comments-count":e.log.comments_count,"call-date":e.log.date,body:e.log.body,"user-id":e.log.user_id,"outcome-id":e.log.call_outcome_id,authorizations:e.log.authorizations,"associations-count":e.log.associations_count,"related-resource":e.resource,comments:e.log.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,collapsable:""},null,8,["call-id","comments-count","call-date","body","user-id","outcome-id","authorizations","associations-count","related-resource","comments","via-resource","via-resource-id"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}},fwe={__name:"CallsOutcomesIndex",setup(e){const t=Innoclapps.resourceName("call-outcomes"),{fetchCallOutcomes:n}=o5();return(o,a)=>{const r=c("ICardHeading");return g(),R(Ui,{"resource-name":v(t),"with-cancel":!1,onCreated:v(n),onUpdated:v(n),onDeleted:v(n)},{header:p(()=>[l(r,{text:o.$t("calls::call.outcome.outcomes")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},pwe={__name:"SettingsCalls",setup(e){return(t,n)=>(g(),R(fwe))}},vwe={class:"flex items-center"},hwe={class:"lg:flex lg:space-y-4"},gwe={class:"w-full"},bwe={class:"grid grid-cols-12 gap-2 lg:gap-4"},ywe={class:"col-span-12 lg:col-span-6"},_we={class:"mb-1 flex"},wwe={class:"grow"},Iwe={class:"col-span-12 lg:col-span-6"},xwe={class:"mb-1 flex"},kwe={class:"grow"},$we={class:"mt-1 flex space-x-2"},Cwe={class:"relative flex grow rounded-lg shadow-sm"},Swe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Twe=["value"],Ewe={class:"mt-1 flex space-x-2"},Fwe={__name:"SettingsTwilio",setup(e){const{t}=Pe(),{form:n}=Qe(),{scriptConfig:o}=qe(),a=V([]),r=V(!1),s=V(!1),i=V(!1),u=V(!1),d=V(!1),m=o("is_secure"),f=P(()=>!Ut(n.twilio_auth_token)),h=P(()=>!Ut(n.twilio_account_sid)),y=P(()=>!Ut(n.twilio_app_sid)),b=P(()=>f.value&&h.value),I=P(()=>!Ut(n.twilio_number)),w=P(()=>f.value&&h.value&&y.value),k=P(()=>ft(a.value,["phoneNumber",n.twilio_number])),x=P(()=>k.value?k.value.capabilities.voice===!1:!1);function $(){!n.twilio_account_sid&&!n.twilio_account_sid.twilio_auth_token&&(n.twilio_number=null),n.post("settings").then(()=>{Innoclapps.success(t("core::settings.updated")),window.location.reload()})}function C(){Innoclapps.request().delete("/twilio").then(()=>{window.location.reload()})}function F(){Innoclapps.request().put(`/twilio/app/${n.twilio_app_sid}`,{voiceUrl:o("voip.endpoints.call")}).then(()=>{window.location.reload()})}function T(){u.value=!0,Innoclapps.request("/twilio/numbers",{params:{account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token}}).then(({data:N})=>{a.value=N}).finally(()=>u.value=!1)}async function S(){let{data:N}=await Innoclapps.request(`/twilio/app/${n.twilio_app_sid}`);return N}function A(){s.value=!0,Innoclapps.request().post("/twilio/app",{number:n.twilio_number,account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token,voiceMethod:"POST",voiceUrl:o("voip.endpoints.call"),friendlyName:"Concord CRM"}).then(({data:N})=>{n.twilio_app_sid=N.app_sid}).finally(()=>s.value=!1)}function E(){Innoclapps.confirm().then(B)}function B(){Innoclapps.request().delete(`/twilio/app/${n.twilio_app_sid}`,{params:{account_sid:n.twilio_account_sid,auth_token:n.twilio_auth_token}}).then(()=>{i.value=!0,n.twilio_app_sid=null})}function M(){Innoclapps.request("/settings").then(({data:N})=>{n.set({twilio_account_sid:N.twilio_account_sid,twilio_auth_token:N.twilio_auth_token,twilio_app_sid:N.twilio_app_sid,twilio_number:N.twilio_number}),r.value=!0,f.value&&h.value&&(T(),y.value&&S().then(G=>{G.voiceUrl!==o("voip.endpoints.call")&&(d.value=!0)}).catch(G=>{G.response.data.deleted?B():console.error(G)}))})}return M(),(N,G)=>{const U=c("Icon"),j=c("ICardHeading"),O=c("IStepCircle"),H=c("IStepsCircle"),W=c("IButton"),X=c("ICardActions"),q=c("ICardHeader"),L=c("IAlertBody"),ee=c("IAlertActions"),ce=c("IAlert"),ue=c("IFormLabel"),oe=c("ILink"),re=c("IFormInput"),Y=c("IFormGroup"),ae=c("IFormSelect"),se=c("ICardBody"),xe=c("ICardFooter"),le=c("ICard");return g(),D(de,null,[l(q,null,{default:p(()=>[_("div",vwe,[w.value&&r.value&&!u.value?(g(),R(U,{key:0,icon:a.value.length===0||x.value||!v(m)?"XCircleSolid":"CheckCircle",class:be(["mr-1 size-5",a.value.length===0||x.value||!v(m)?"text-danger-500":"text-success-600"])},null,8,["icon","class"])):Z("",!0),l(j,null,{default:p(()=>G[4]||(G[4]=[ne("Twilio")])),_:1}),l(H,{class:"pointer-events-none ml-4"},{default:p(()=>[l(O,{status:b.value?"complete":"current"},null,8,["status"]),l(O,{status:v(n).twilio_number?"complete":""},null,8,["status"]),l(O,{status:w.value&&v(n).twilio_number?"complete":"","is-last":""},null,8,["status"])]),_:1})]),l(X,null,{default:p(()=>[te(l(W,{variant:"danger",text:N.$t("calls::twilio.disconnect"),onClick:C},null,8,["text"]),[[fe,w.value]])]),_:1})]),_:1}),l(le,{overlay:!r.value},{default:p(()=>[l(se,null,{default:p(()=>[_("div",hwe,[_("div",gwe,[l(ce,{class:"mb-10",variant:"warning",show:d.value},{default:p(({variant:ge})=>[l(L,null,{default:p(()=>G[5]||(G[5]=[ne(" Your Twilio application URL does match your installation URL. ")])),_:1}),l(ee,null,{default:p(()=>[l(W,{text:"Update URL",variant:ge,ghost:"",onClick:F},null,8,["variant"])]),_:2},1024)]),_:1},8,["show"]),l(ce,{class:"mb-10",variant:"warning",show:!v(m)},{default:p(()=>[l(L,null,{default:p(()=>G[6]||(G[6]=[ne(" Application must be served over HTTPS URL in order to use the Twilio integration. ")])),_:1})]),_:1},8,["show"]),_("div",bwe,[_("div",ywe,[l(Y,null,{label:p(()=>[_("div",_we,[_("div",wwe,[l(ue,{for:"twilio_account_sid"},{default:p(()=>G[7]||(G[7]=[ne(" Account SID ")])),_:1})]),l(oe,{href:"https://www.twilio.com/console"},{default:p(()=>G[8]||(G[8]=[ne(" https://www.twilio.com/console ")])),_:1})])]),default:p(()=>[l(re,{id:"twilio_account_sid",modelValue:v(n).twilio_account_sid,"onUpdate:modelValue":G[0]||(G[0]=ge=>v(n).twilio_account_sid=ge),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_("div",Iwe,[l(Y,null,{label:p(()=>[_("div",xwe,[_("div",kwe,[l(ue,{for:"twilio_auth_token"},{default:p(()=>G[9]||(G[9]=[ne(" Auth Token ")])),_:1})]),l(oe,{href:"https://www.twilio.com/console"},{default:p(()=>G[10]||(G[10]=[ne(" https://www.twilio.com/console ")])),_:1})])]),default:p(()=>[l(re,{id:"twilio_auth_token",modelValue:v(n).twilio_auth_token,"onUpdate:modelValue":G[1]||(G[1]=ge=>v(n).twilio_auth_token=ge),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})])]),_("div",{class:be(["mt-2 border-t border-neutral-200 pt-5 dark:border-neutral-500/30",{"pointer-events-none opacity-50 blur-sm":!b.value}])},[l(ue,{label:N.$t("calls::twilio.number")},null,8,["label"]),l(ce,{class:"my-3",variant:"danger",show:x.value},{default:p(()=>[l(L,null,{default:p(()=>G[11]||(G[11]=[ne(" This phone number does not have enabled voice capabilities. ")])),_:1})]),_:1},8,["show"]),_("div",$we,[_("div",Cwe,[_("div",Swe,[l(U,{icon:"Phone",class:"size-5 text-neutral-500 dark:text-neutral-300"})]),l(ae,{modelValue:v(n).twilio_number,"onUpdate:modelValue":G[2]||(G[2]=ge=>v(n).twilio_number=ge),class:"!pl-11",disabled:!a.value.length},{default:p(()=>[G[12]||(G[12]=_("option",{value:""},null,-1)),(g(!0),D(de,null,Ie(a.value,ge=>(g(),D("option",{key:ge.phoneNumber,value:ge.phoneNumber},K(ge.phoneNumber),9,Twe))),128))]),_:1},8,["modelValue","disabled"])]),l(W,{variant:"secondary",loading:u.value,disabled:u.value,text:N.$t("calls::twilio.retrieve_numbers"),onClick:T},null,8,["loading","disabled","text"])])],2),_("div",{class:be(["mt-5 border-t border-neutral-200 pt-5 dark:border-neutral-500/30",{"pointer-events-none opacity-50 blur-sm":!I.value}])},[l(ue,{label:N.$t("calls::twilio.app")},null,8,["label"]),_("div",Ewe,[l(re,{modelValue:v(n).twilio_app_sid,"onUpdate:modelValue":G[3]||(G[3]=ge=>v(n).twilio_app_sid=ge),class:"grow",disabled:!0},null,8,["modelValue"]),l(W,{variant:"primary",class:"shrink-0",loading:s.value,disabled:s.value||y.value||x.value,text:N.$t("calls::twilio.create_app"),onClick:A},null,8,["loading","disabled","text"]),y.value?(g(),R(W,{key:0,class:"shrink-0",icon:"Trash",basic:"",onClick:E})):Z("",!0)])],2)])])]),_:1}),w.value||i.value?(g(),R(xe,{key:0,class:"text-right"},{default:p(()=>[l(W,{variant:"primary",disabled:x.value,text:N.$t("core::app.save"),onClick:$},null,8,["disabled","text"])]),_:1})):Z("",!0)]),_:1},8,["overlay"])],64)}}},Awe={key:0},Rwe={key:0},Dwe={key:1},Owe={__name:"PhoneCallableField",props:["resource","resourceName","resourceId","field","isFloating"],emits:["updated"],setup(e){const t=e,n=Innoclapps.resourceName("calls"),o=Le("synchronizeResource",null),a=Le("incrementResourceCount",null),r=V(!1),{t:s}=Pe(),{gate:i}=bs(),{voip:u,hasVoIPClient:d}=qd(),{fields:m,hasFields:f,getCreateFields:h}=In(),{form:y}=Qe({task_date:null}),{createResource:b}=qt(n),{createFollowUpActivity:I}=su(),w=P(()=>!d||!i.userCan("use voip")),k=P(()=>{if(d){if(i.userCant("use voip"))return s("calls::call.no_voip_permissions")}else return s("core::app.integration_not_configured");return""});async function x(F){if(y.task_date){let T=await I(y.task_date,t.resourceName,t.resourceId,t.resource.display_name,{note:s("calls::call.follow_up_task_body",{content:F.body})});T&&(o&&o({activities:[T]}),a&&a("incomplete_activities_for_user_count"))}o&&o({calls:[F]}),a&&a("calls_count"),Innoclapps.success(s("calls::call.created")),y.reset(),r.value=!1}async function $(F){y.set("task_date",null),(await u.makeCall(F)).on("Disconnect",()=>{r.value=!0}),m.value=await h(n,{viaResource:t.resourceName,viaResourceId:t.resourceId})}function C(){b(y.set(t.resourceName,[t.resourceId]).withQueryString({via_resource:t.resourceName,via_resource_id:t.resourceId})).then(x)}return(F,T)=>{const S=c("FormFields"),A=c("IOverlay"),E=c("IModal"),B=c("IDropdownButton"),M=c("IDropdownItem"),N=c("IButtonCopy"),G=c("IDropdownMenu"),U=c("IDropdown"),j=c("BaseDetailField"),O=ze("i-tooltip");return g(),D(de,null,[l(E,{visible:r.value,"onUpdate:visible":T[3]||(T[3]=H=>r.value=H),size:"md",title:F.$t("calls::call.add"),"ok-text":F.$t("calls::call.add"),"ok-disabled":v(y).busy,onShown:T[4]||(T[4]=H=>r.value=!0),onHidden:T[5]||(T[5]=H=>r.value=!1),onOk:C},{default:p(()=>[r.value?(g(),D("div",Awe,[l(A,{show:!v(f)},{default:p(()=>[l(S,{fields:v(m),form:v(y),"resource-name":v(n),onUpdateFieldValue:T[0]||(T[0]=H=>v(y).fill(H.attribute,H.value)),onSetInitialValue:T[1]||(T[1]=H=>v(y).set(H.attribute,H.value))},null,8,["fields","form","resource-name"])]),_:1},8,["show"]),l(Fs,{modelValue:v(y).task_date,"onUpdate:modelValue":T[2]||(T[2]=H=>v(y).task_date=H),class:"mt-2"},null,8,["modelValue"])])):Z("",!0)]),_:1},8,["visible","title","ok-text","ok-disabled"]),l(j,{field:e.field,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"is-floating":e.isFloating,onUpdated:T[6]||(T[6]=H=>F.$emit("updated",H))},{default:p(({hasValue:H,value:W})=>[H?(g(!0),D(de,{key:0},Ie(W,(X,q)=>(g(),D("div",{key:q},[l(U,null,{default:p(()=>[te(l(B,{text:X.number,link:"","no-caret":""},null,8,["text"]),[[O,F.$t("contacts::fields.phone.types."+X.type)]]),l(G,null,{default:p(()=>[e.isFloating?Z("",!0):te((g(),D("span",Rwe,[l(M,{disabled:w.value,text:F.$t("calls::call.make"),onClick:L=>$(X.number)},null,8,["disabled","text","onClick"])])),[[O,w.value?k.value:null]]),l(N,{as:"IDropdownItem",text:X.number,"success-message":F.$t("contacts::fields.phone.copied")},{default:p(()=>[ne(K(F.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(M,{href:"tel:"+X.number,text:F.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)]))),128)):Z("",!0),H?Z("",!0):(g(),D("span",Dwe,"—"))]),_:1},8,["field","resource","resource-name","resource-id","is-floating"])],64)}}},Pwe={key:1},r5={__name:"PhoneField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("IDropdownButton"),a=c("IButtonCopy"),r=c("IDropdownItem"),s=c("IDropdownMenu"),i=c("IDropdown"),u=c("BaseIndexField"),d=ze("i-tooltip");return g(),R(u,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(({hasValue:m,value:f})=>[m?(g(!0),D(de,{key:0},Ie(f,(h,y)=>(g(),D("div",{key:y,class:be(e.column.wrap?"":"mr-2.5 inline last:mr-0")},[l(i,null,{default:p(()=>[te(l(o,{text:h.number,link:"","no-caret":""},null,8,["text"]),[[d,t.$t("contacts::fields.phone.types."+h.type)]]),l(s,null,{default:p(()=>[Ee(t.$slots,"start",{phone:h}),l(a,{as:"IDropdownItem",text:h.number,"success-message":t.$t("contacts::fields.phone.copied")},{default:p(()=>[ne(K(t.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(r,{href:"tel:"+h.number,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)],2))),128)):(g(),D("span",Pwe,"—"))]),_:3},8,["resource-name","resource-id","row","field"])}}},Mwe={key:0},Bwe={class:"sm:flex sm:items-center sm:justify-between"},Nwe={class:"mt-4 flex flex-col-reverse gap-y-2 space-x-2 sm:mt-0 sm:block"},Vwe=Object.assign({inheritAttrs:!1},{__name:"PhoneCallableField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,n=Innoclapps.resourceName("calls"),{t:o}=Pe(),{gate:a}=bs(),{voip:r,hasVoIPClient:s}=qd(),{createFollowUpActivity:i}=su(),{fields:u,hasFields:d,getCreateFields:m}=In(),{form:f}=Qe({task_date:null,associations:{[t.resourceName]:[t.resourceId]}}),{createResource:h}=qt(n),y=V(!1),b=P(()=>!s||!a.userCan("use voip")),I=P(()=>t.row.display_name||t.row.name||t.row.contact),w=P(()=>{if(s){if(a.userCant("use voip"))return o("calls::call.no_voip_permissions")}else return o("core::app.integration_not_configured");return""});async function k(){u.value=await m(n,{viaResource:t.resourceName,viaResourceId:t.row.id})}function x(){k(),y.value=!0}async function $(T){f.set("task_date",null),(await r.makeCall(T)).on("Disconnect",()=>{y.value=!0})}async function C(T){f.task_date&&i(f.task_date,t.resourceName,t.resourceId,I.value,{note:o("calls::call.follow_up_task_body",{content:T.body})}),f.reset(),y.value=!1}function F(){h(f.set(t.resourceName,[t.row.id]).withQueryString({via_resource:t.resourceName,via_resource_id:t.row.id})).then(C)}return(T,S)=>{const A=c("FormFields"),E=c("IOverlay"),B=c("IButton"),M=c("IModal"),N=c("IDropdownItem"),G=ze("i-tooltip");return g(),D(de,null,[l(M,{visible:y.value,"onUpdate:visible":S[4]||(S[4]=U=>y.value=U),size:"md",title:T.$t("calls::call.add"),onShown:S[5]||(S[5]=U=>y.value=!0),onHidden:S[6]||(S[6]=U=>y.value=!1)},{"modal-footer":p(({cancel:U})=>[_("div",Bwe,[l(Fs,{modelValue:v(f).task_date,"onUpdate:modelValue":S[3]||(S[3]=j=>v(f).task_date=j)},null,8,["modelValue"]),_("div",Nwe,[l(B,{text:T.$t("core::app.cancel"),basic:"",onClick:U},null,8,["text","onClick"]),l(B,{variant:"primary",disabled:v(f).busy,text:T.$t("calls::call.add"),onClick:F},null,8,["disabled","text"])])])]),default:p(()=>[y.value?(g(),D("div",Mwe,[l(E,{show:!v(d)},{default:p(()=>[l(A,{fields:v(u),form:v(f),"resource-name":v(n),onUpdateFieldValue:S[0]||(S[0]=U=>v(f).fill(U.attribute,U.value)),onSetInitialValue:S[1]||(S[1]=U=>v(f).set(U.attribute,U.value))},null,8,["fields","form","resource-name"])]),_:1},8,["show"]),l(Uo,{modelValue:v(f).associations,"onUpdate:modelValue":S[2]||(S[2]=U=>v(f).associations=U),placement:"bottom-start","primary-record":{...e.row,display_name:I.value},"primary-resource-name":e.resourceName,"primary-record-disabled":!0},null,8,["modelValue","primary-record","primary-resource-name"])])):Z("",!0)]),_:1},8,["visible","title"]),l(r5,zt(Qt({...T.$props,...T.$attrs})),{start:p(({phone:U})=>[te((g(),D("span",null,[e.row._trashed?Z("",!0):(g(),R(N,{key:0,disabled:b.value,text:T.$t("calls::call.make"),onClick:j=>$(U.number)},null,8,["disabled","text","onClick"]))])),[[G,b.value?w.value:null]]),e.row._trashed?Z("",!0):(g(),R(N,{key:0,text:T.$t("calls::call.add"),onClick:x},null,8,["text"]))]),_:1},16)],64)}}}),Lwe={__name:"CallsIndex",setup(e){const t=Innoclapps.resourceName("calls");return(n,o)=>{const a=c("ResourceTable"),r=c("MainLayout");return g(),R(r,null,{default:p(()=>[l(a,{"resource-name":v(t)},null,8,["resource-name"])]),_:1})}}};var qwe=J_,Uwe=go,jwe="Expected a function";function zwe(e,t,n){var o=!0,a=!0;if(typeof e!="function")throw new TypeError(jwe);return Uwe(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),qwe(e,t,{leading:o,maxWait:t,trailing:a})}var Hwe=zwe;const Wwe=Rt(Hwe),Gwe={setup(){const{floatResourceInDetailMode:e}=Ro();return{floatResourceInDetailMode:e}},data:()=>({error:null,isCallInProgress:!1,callStartedDate:null,callEndedDate:null,isIncoming:!1,duration:null,durationInterval:null,visible:!1,isMuted:!1,lastConnectedNumber:null,person:{},askForActivationIn:1,audioDevices:{speaker:{items:[],selected:null},ringtone:{items:[],selected:null}}}),computed:{showCallComponent(){return this.visible===!0||this.isCallInProgress},cardHeader(){return this.isIncoming&&!this.isCallInProgress?this.$t("calls::call.new_from",{number:this.person.display_name||this.lastConnectedNumber}):this.isCallInProgress?this.$t("calls::call.connected_with",{number:this.person.display_name||this.lastConnectedNumber}):this.lastConnectedNumber?this.$t("calls::call.ended",{number:this.person.display_name||this.lastConnectedNumber}):""}},watch:{lastConnectedNumber:function(e){e&&this.findPersonForDisplay(e)}},created(){document.documentElement.addEventListener("mousedown",Wwe(this.bootVoIPDevice,500)),window.addEventListener("beforeunload",()=>{this.getDevice()&&this.getDevice().unregister()}),setTimeout(()=>{this.getDevice()||this.$dialog.show("callingActivation")},this.askForActivationIn*60*1e3)},methods:{strTruncate:jA,findPersonForDisplay(e){let t={search_fields:"phones.number:=",q:e};Promise.all([Innoclapps.request("/contacts/search",{params:t}),Innoclapps.request("/companies/search",{params:t})]).then(n=>{let o=n[0].data,a=n[1].data;o.length>0?this.person={display_name:o[0].display_name,id:o[0].id,resourceName:"contacts"}:a.length>0?this.person={display_name:a[0].display_name,id:a[0].id,resourceName:"companies"}:this.person={}})},hideCallHandler(){this.visible=!1,this.duration=null},callingModalHiddenEvent(){Innoclapps.success(this.$t("calls::call.voip_activated"))},updateDuration(){let t=(this.callEndedDate||ut.now()).diff(this.callStartedDate),n=t.as("minutes"),o=t.as("seconds")%60;this.duration=(Math.floor(n)<10?"0"+Math.floor(n):Math.floor(n))+":"+(Math.floor(o)<10?"0"+Math.floor(o):Math.floor(o))},prepareComponent(e){try{e.on("Registering",t=>{}),e.on("Registered",t=>{t.instance.audio.on("deviceChange",this.updateAllDevices)}),e.on("Error",({error:t,Call:n})=>this.error=t.message),this.setDevice(e),this.$voip.onCall(({Call:t,isIncoming:n})=>{this.callEndedDate=null,this.callStartedDate=null,this.duration=null,this.$options.call=t,this.isIncoming=n,this.visible=!0,n?this.lastConnectedNumber=t.instance.parameters.From:this.lastConnectedNumber=t.instance.customParameters.get("To"),t.on("Mute",({isMuted:o,Call:a})=>this.isMuted=o),t.on("Error",o=>{this.visible=!0,this.call=null,this.isIncoming=!1,this.error=o.message}),t.on("Accept",o=>{this.isCallInProgress=!0,this.callStartedDate=ut.now(),this.bindVolumeIndicators(o.instance),this.durationInterval=setInterval(this.updateDuration,1e3)}),t.on("Cancel",()=>{this.isCallInProgress=!1,this.visibility=!0,this.isIncoming=!1,this.$options.call=null}),t.on("Reject",()=>{this.duration=null,this.callStartedDate=null,this.isIncoming=!1,this.isCallInProgress=!1,this.$options.call=null}),t.on("Disconnect",o=>{this.visible=!0,this.isCallInProgress=!1,this.$options.call=null,this.isMuted=!1,this.isIncoming=!1,this.callEndedDate=ut.now(),clearInterval(this.durationInterval)})})}catch(t){this.error=t.message,this.visible=!0}},setDevice(e){this.$options.device=e},getDevice(){return this.$options.device},bootVoIPDevice(){if(this.getDevice()){document.documentElement.removeEventListener("mousedown",this.bootVoIPDevice);return}this.$voip.ready(this.prepareComponent),this.$voip.ready(this.getMediaDevices),this.$voip.ready(e=>e.instance.register()),this.$voip.connect()},updateAllDevices(){this.updateDevices(this.getDevice().instance.audio.speakerDevices.get(),"speaker"),this.updateDevices(this.getDevice().instance.audio.ringtoneDevices.get(),"ringtone")},updateDevices(e,t){this.audioDevices[t].items=[],this.audioDevices[t].selected=null,this.getDevice().instance.audio.availableOutputDevices.forEach((o,a)=>{let r=e.size===0&&a==="default";e.forEach(function(i){i.deviceId===a&&(r=!0)});let s={label:o.label,id:a};this.audioDevices[t].items.push(s),r&&(this.audioDevices[t].selected=s)})},getMediaDevices(){navigator.mediaDevices.getUserMedia({audio:!0}).then(this.updateAllDevices).catch(e=>this.error=e)},bindVolumeIndicators(e){e.on("volume",(t,n)=>{let o="red";t<.5?o="green":t<.75&&(o="yellow"),this.$refs.inputVolumeBar.style.width=Math.floor(t*300)+"px",this.$refs.inputVolumeBar.style.background=o;let a="red";n<.5?a="green":n<.75&&(a="yellow"),this.$refs.outputVolumeBar.style.width=Math.floor(n*300)+"px",this.$refs.outputVolumeBar.style.background=a})}}},Kwe={class:"sticky top-0 -mx-4 border-b border-neutral-300 bg-white/50 px-7 py-3 dark:border-neutral-700 dark:bg-neutral-700/30"},Zwe={class:"flex items-center px-4"},Ywe={class:"grow"},Xwe={class:"flex items-center space-x-4"},Qwe=["textContent"],Jwe={class:"ml-0 mt-2 space-x-2 sm:ml-2 sm:mt-0"},eIe={class:"mt-4 flex flex-col items-center md:flex-row"},tIe={class:"flex flex-col items-center space-y-2 sm:flex-row md:space-x-2 md:space-y-0"},nIe=["textContent"],oIe=["textContent"],aIe={class:"ml-5 flex space-x-3 pl-5 sm:border-l sm:border-neutral-300"},rIe={class:"flex items-center"},lIe={ref:"outputVolumeBar",class:"ml-1 h-4 rounded-md"},sIe={class:"flex items-center"},iIe={ref:"inputVolumeBar",class:"ml-1 h-4 rounded-md"};function uIe(e,t,n,o,a,r){const s=c("ITextDark"),i=c("IModal"),u=c("IAlertBody"),d=c("IAlert"),m=c("Icon"),f=c("ILink"),h=c("IBadge"),y=c("IButton"),b=c("IDropdownButton"),I=c("IDropdownItem"),w=c("IDropdownMenu"),k=c("IDropdown"),x=ze("i-tooltip");return g(),D(de,null,[l(i,{id:"callingActivation","cancel-variant":"success","cancel-text":e.$t("calls::call.activate_voip"),title:e.$t("calls::call.activation_required"),onHidden:r.callingModalHiddenEvent},{"modal-ok":p(()=>t[7]||(t[7]=[ne(" ")])),default:p(()=>[l(s,null,{default:p(()=>[ne(K(e.$t("calls::call.activation_gesture_required",{askForActivationIn:e.askForActivationIn})),1)]),_:1})]),_:1},8,["cancel-text","title","onHidden"]),te(_("div",Kwe,[l(d,{class:"mb-4",variant:"danger",show:e.error!==null,dismissible:"",onDismissed:t[0]||(t[0]=$=>e.error=null)},{default:p(()=>[l(u,null,{default:p(()=>[ne(K(e.error),1)]),_:1})]),_:1},8,["show"]),_("div",Zwe,[_("div",Ywe,[_("div",Xwe,[e.person.resourceName?(g(),R(f,{key:1,class:"flex items-center gap-x-2 font-medium",variant:e.isCallInProgress||e.isIncoming&&!e.isCallInProgress?"success":"info",onClick:t[1]||(t[1]=ot($=>o.floatResourceInDetailMode({resourceName:e.person.resourceName,resourceId:e.person.id}),["prevent"]))},{default:p(()=>[ne(K(r.cardHeader)+" ",1),l(m,{icon:"Window",class:"size-4"})]),_:1},8,["variant"])):(g(),D("p",{key:0,class:be(["text-base font-medium",e.isCallInProgress||e.isIncoming&&!e.isCallInProgress?"text-success-500":"text-info-800 dark:text-info-100"]),textContent:K(r.cardHeader)},null,10,Qwe)),te(l(h,{variant:"info"},{default:p(()=>[l(m,{icon:"Clock",class:"mr-1 size-4"}),ne(" "+K(e.isCallInProgress||e.lastConnectedNumber?e.duration:null),1)]),_:1},512),[[fe,e.isCallInProgress||e.lastConnectedNumber&&e.duration]]),_("div",null,[_("div",Jwe,[e.isCallInProgress?te((g(),R(y,{key:0,variant:"secondary",icon:"VolumeUp",pill:"",onClick:t[2]||(t[2]=$=>e.$options.call.mute(!1))},null,512)),[[fe,e.isMuted],[x,e.$t("calls::call.unmute")]]):Z("",!0),e.isCallInProgress?te((g(),R(y,{key:1,variant:"secondary",icon:"VolumeOff",pill:"",onClick:t[3]||(t[3]=$=>e.$options.call.mute(!0))},null,512)),[[fe,!e.isMuted],[x,e.$t("calls::call.mute")]]):Z("",!0),te(l(y,{variant:"success",icon:"Phone",pill:"",onClick:t[4]||(t[4]=$=>e.$options.call.accept())},null,512),[[fe,e.isIncoming&&!e.isCallInProgress],[x,e.$t("calls::call.answer")]]),te(l(y,{variant:"danger",icon:"XSolid",pill:"",onClick:t[5]||(t[5]=$=>e.$options.call.disconnect())},null,512),[[fe,e.isCallInProgress],[x,e.$t("calls::call.hangup")]]),te(l(y,{variant:"danger",icon:"PhoneXMark",pill:"",onClick:t[6]||(t[6]=$=>e.$options.call.reject())},null,512),[[fe,e.isIncoming&&!e.isCallInProgress],[x,e.$t("calls::call.reject")]])])])])]),_("div",null,[te(l(y,{icon:"XSolid",basic:"",onClick:r.hideCallHandler},null,8,["onClick"]),[[fe,e.visible===!0],[x,e.$t("calls::call.hide_bar"),void 0,{left:!0}]])])]),_("div",eIe,[_("div",tIe,[l(k,null,{default:p(()=>[l(b,{icon:"Megaphone",basic:""},{default:p(()=>{var $;return[_("span",{class:"max-w-[13rem] truncate",textContent:K(($=e.audioDevices.speaker.selected)==null?void 0:$.label)},null,8,nIe)]}),_:1}),l(w,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.audioDevices.speaker.items,$=>(g(),R(I,{key:$.id,text:$.label,onClick:C=>r.getDevice().instance.audio.speakerDevices.set([$.id])},null,8,["text","onClick"]))),128))]),_:1})]),_:1}),l(k,null,{default:p(()=>[l(b,{icon:"Microphone",basic:""},{default:p(()=>{var $;return[_("span",{class:"max-w-[13rem] truncate",textContent:K(($=e.audioDevices.ringtone.selected)==null?void 0:$.label)},null,8,oIe)]}),_:1}),l(w,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.audioDevices.ringtone.items,$=>(g(),R(I,{key:$.id,text:$.label,onClick:C=>r.getDevice().instance.audio.ringtoneDevices.set([$.id])},null,8,["text","onClick"]))),128))]),_:1})]),_:1}),l(f,{class:"hidden lg:block",text:e.$t("calls::call.unknown_devices"),onClick:r.getMediaDevices},null,8,["text","onClick"])]),te(_("div",aIe,[_("div",rIe,[te(l(m,{icon:"VolumeUp",class:"size-5 text-current dark:text-neutral-200"},null,512),[[x,e.$t("calls::call.speaker_volume"),void 0,{bottom:!0}]]),_("div",lIe,null,512)]),_("div",sIe,[te(l(m,{icon:"Microphone",class:"h-4 w-5 text-current dark:text-neutral-200"},null,512),[[x,e.$t("calls::call.mic_volume"),void 0,{bottom:!0}]]),_("div",iIe,null,512)])],512),[[fe,e.isCallInProgress]])])],512),[[fe,r.showCallComponent]])],64)}const cIe=an(Gwe,[["render",uIe]]);class dIe{constructor(){this.instance=null,this.emitter=Bc(),this.events={Registering:"registering",Registered:"registered",Error:"error"}}async createCall(t){}async connect(){}incoming(t){}unregister(){}on(t,n){return Object.hasOwn(this.events,t)?(this.emitter.on(this.events[t],n),this):(console.error(`${t} event listener does not exists for this device.`),this)}}class mIe{constructor(t){this.instance=t,this.emitter=Bc(),this.events={Accept:"accept",Disconnect:"disconnect",Reject:"reject",Cancel:"Cancel",Mute:"mute",Error:"error"}}accept(){}reject(){}disconnect(){}mute(t=!0){}get isMuted(){}on(t,n){return Object.hasOwn(this.events,t)?(this.emitter.on(this.events[t],n),this):(console.error(`${t} event listener does not exists for the call.`),this)}}class Ym extends mIe{constructor(t){super(t),t.on("accept",n=>this.emitter.emit(this.events.Accept,this)),t.on("disconnect",n=>this.emitter.emit(this.events.Disconnect,this)),t.on("reject",()=>this.emitter.emit(this.events.Reject)),t.on("cancel",()=>this.emitter.emit(this.events.Cancel)),t.on("mute",(n,o)=>this.emitter.emit(this.events.Mute,{isMuted:n,Call:this})),t.on("Error",n=>this.emitter.emit(this.events.Error,n))}accept(){this.instance.accept()}reject(){this.instance.reject()}disconnect(){this.instance.disconnect()}mute(t=!0){this.instance.mute(t)}get isMuted(){return this.instance.isMuted()}}async function fIe(){const{Device:e}=await ws(async()=>{const{Device:t}=await import("./twilio-BbPtKGKS.js").then(n=>n.t);return{Device:t}},[]);return e}let pIe=class extends dIe{constructor(){super(),this.incomingCallbacks=[],this.instance=null}async createCall(t){let n={...yk(t)?{To:t}:t,viaApp:!0};const o=await this.instance.connect({params:n});return new Ym(o)}incoming(t){this.incomingCallbacks.push(t)}unregister(){this.instance.unregister()}async getAccessToken(t){let{data:n}=await Innoclapps.request("/voip/token",{params:{ttl:t}});return n.token}async connect(){const o=await this.getAccessToken(6e5),a=await this.createTwilioDevice(o);return this.instance=a,this.instance.on("error",(r,s)=>this.emitter.emit(this.events.Error,{Call:new Ym(s),error:r})),this.instance.on("registering",r=>this.emitter.emit(this.events.Registering,this)),this.instance.on("registered",r=>this.emitter.emit(this.events.Registered,this)),this.instance.on("incoming",r=>{this.incomingCallbacks.forEach(s=>s(new Ym(r)))}),setInterval(async()=>{const r=await this.getAccessToken(6e5);this.instance.updateToken(r)},57e4),this}async createTwilioDevice(t){const n=await fIe();return new n(t,{logLevel:"silent"})}};const K1={CallComponent:cIe,Device:pIe};class vIe{constructor(t){this.client=t,this.device=null,this.readyCallbacks=[],this.callCallbacks=[]}onCall(t){this.callCallbacks.push(t)}ready(t){this.readyCallbacks.push(t)}async makeCall(t){const n=await this.device.createCall(t);return this.callCallbacks.forEach(o=>o({Call:n,isIncoming:!1})),n}connect(){if(this.client=="twilio")this.device=new K1.Device;else{console.error("VoIP client not found.");return}this.device.connect().then(t=>{t.incoming(n=>{this.callCallbacks.forEach(o=>o({Call:n,isIncoming:!0}))}),this.readyCallbacks.forEach(n=>n(t)),this.readyCallbacks=[]})}get callComponent(){return this.client=="twilio"?K1.CallComponent:(console.error("VoIP call component not found."),"")}}window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("CallsTab",U2e),e.component("CallsTabPanel",cwe),e.component("RecordTabTimelineCall",mwe),e.component("LoggedCallsCard",q2e),e.component("DetailPhoneCallableField",Owe),e.component("IndexPhoneCallableField",Vwe),t.addRoute({path:"/calls",name:"call-index",component:Lwe,meta:{title:rt("calls::call.calls")}}),t.addRoute("settings",{path:"integrations/twilio",component:Fwe,name:"settings-integrations-twilio",meta:{title:"Twilio"}}),t.addRoute("settings",{path:"calls",name:"calls-settings",component:pwe,meta:{title:rt("calls::call.calls"),superAdmin:!0}});const n=this.scriptConfig("voip")||{};if(n.client&&this.scriptConfig("user_id")&&e.config.globalProperties.$gate.userCan("use voip")){const o=new vIe(n.client);e.config.globalProperties.$voip=o,e.component("CallComponent",o.callComponent)}});const hIe={class:"mt-2 space-x-2 text-right"},gIe={__name:"CommentsEdit",props:{commentId:{required:!0,type:Number},body:{required:!0,type:String},commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{form:r}=Qe({body:n.body});async function s(){n.viaResource&&r.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId});let i=await r.put(`/comments/${n.commentId}`);o("updated",i),Innoclapps.success(a("comments::comment.updated"))}return(i,u)=>{const d=c("Editor"),m=c("IFormError"),f=c("IButton");return g(),D("div",null,[l(d,{modelValue:v(r).body,"onUpdate:modelValue":u[0]||(u[0]=h=>v(r).body=h),"with-mention":"",minimal:""},null,8,["modelValue"]),l(m,{error:v(r).getError("body")},null,8,["error"]),_("div",hIe,[l(f,{variant:"secondary",text:i.$t("core::app.cancel"),onClick:u[1]||(u[1]=h=>i.$emit("cancelled"))},null,8,["text"]),l(f,{variant:"primary",disabled:v(r).busy,text:i.$t("core::app.save"),onClick:s},null,8,["disabled","text"])])])}}},bIe=["id"],yIe={class:"flex flex-wrap"},_Ie=["textContent"],wIe={class:"flex justify-end space-x-2 py-2 text-base sm:text-sm"},IIe={__name:"CommentsListItem",props:{commentId:{required:!0,type:Number},body:{required:!0,type:String},createdBy:{required:!0,type:Number},createdAt:{required:!0,type:String},authorizations:{required:!0,type:Object},commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},highlighted:Boolean,viaResource:String,viaResourceId:[String,Number]},emits:["deleted","updated"],setup(e,{emit:t}){const n=e,o=t,{localizedDateTime:a}=it(),{currentUser:r,findUserById:s}=qe(),i=P(()=>s(n.createdBy)),{commengIsBeingCreated:u}=Ca(n.commentableId,n.commentableType),d=V(!1);function m(){u.value=!0,We(()=>{document.getElementById("add-comment-"+n.commentableType+"-"+n.commentableId).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),zn(()=>{tinymce.activeEditor.setContent(""),tinymce.activeEditor.concordCommands.insertMentionUser(i.value.id,i.value.name)},650)})}function f(y){d.value=!1,o("updated",y)}async function h(y){await Innoclapps.request().delete(`/comments/${y}`),o("deleted",n.commentId)}return(y,b)=>{const I=c("IAvatar"),w=c("I18nT"),k=c("ITextBlockDark"),x=c("ITextBlock"),$=c("EditorText"),C=c("ILink");return g(),D("div",null,[_("div",{id:"comment-"+e.commentId,class:be(["comment rounded-lg",e.highlighted?"bg-info-50 dark:bg-info-600/30":"bg-white dark:bg-neutral-800",{"border border-neutral-200 px-4 py-2.5 shadow-sm dark:border-neutral-500/30":!d.value}])},[te(_("div",yIe,[b[0]||(He(-1),(b[0]=_("div",{class:"flex grow items-center"},[l(I,{class:"mr-1",src:i.value.avatar_url},null,8,["src"]),l(k,null,{default:p(()=>[l(w,{scope:"global",keypath:"comments::comment.user_left_comment"},{user:p(()=>[_("b",{class:"font-medium",textContent:K(i.value.name)},null,8,_Ie)]),_:1})]),_:1})])).cacheIndex=0,He(1),b[0]),b[1]||(He(-1),(b[1]=l(x,{class:"mt-1"},{default:p(()=>[ne(K(v(a)(e.createdAt)),1)]),_:1})).cacheIndex=1,He(1),b[1])],512),[[fe,!d.value]]),te(l($,{class:"mt-3"},{default:p(()=>[l(iu,{html:e.body},null,8,["html"])]),_:1},512),[[fe,!d.value]]),d.value?(g(),R(gIe,{key:0,class:"mt-3","comment-id":e.commentId,body:e.body,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,onCancelled:b[2]||(b[2]=F=>d.value=!1),onUpdated:f},null,8,["comment-id","body","commentable-type","commentable-id","via-resource","via-resource-id"])):Z("",!0)],10,bIe),_("div",wIe,[e.createdBy!==v(r).id&&!d.value?(g(),R(C,{key:0,text:y.$t("comments::comment.reply"),onClick:m},null,8,["text"])):Z("",!0),te(l(C,{text:y.$t("core::app.edit"),onClick:b[3]||(b[3]=F=>d.value=!0)},null,8,["text"]),[[fe,e.authorizations.update&&!d.value]]),te(l(C,{variant:"danger",text:y.$t("core::app.delete"),onClick:b[4]||(b[4]=F=>y.$confirm(()=>h(e.commentId)))},null,8,["text"]),[[fe,e.authorizations.delete&&!d.value]])])])}}},l5={__name:"CommentsList",props:{autoFocusIfRequired:Boolean,comments:Array,commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["deleted","updated"],setup(e){const t=e,n=Ct(),o=V(null),a=V(null),r=P(()=>t.comments.length>0);function s(){!n.query.comment_id||!t.autoFocusIfRequired||We(()=>{const i=o.value.querySelector("#comment-"+n.query.comment_id);i&&(i.scrollIntoView({behavior:"auto",block:"center",inline:"nearest"}),a.value=parseInt(n.query.comment_id),zn(()=>a.value=null,1e4))})}return Xe(s),(i,u)=>{const d=c("IText");return g(),D("div",{ref_key:"commentsRef",ref:o},[r.value?Z("",!0):(g(),R(d,{key:0,class:"text-center",text:i.$t("comments::comment.no_comments")},null,8,["text"])),(g(!0),D(de,null,Ie(e.comments,m=>(g(),R(IIe,{key:m.id,class:"mb-3","commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"comment-id":m.id,highlighted:m.id===a.value,body:m.body,"created-by":m.created_by,"created-at":m.created_at,authorizations:m.authorizations,onDeleted:u[0]||(u[0]=f=>i.$emit("deleted",f)),onUpdated:u[1]||(u[1]=f=>i.$emit("updated",f))},null,8,["commentable-type","commentable-id","via-resource","via-resource-id","comment-id","highlighted","body","created-by","created-at","authorizations"]))),128))],512)}}},xIe=Object.assign({inheritAttrs:!1},{__name:"CollapsableCommentsList",props:{count:Number,listWrapperClass:[Array,Object,String],commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},comments:{required:!0,type:Array},viaResource:String,viaResourceId:[String,Number]},emits:["update:count","update:comments","deleted","updated"],setup(e,{emit:t}){const n=e,o=t,{requestInProgress:a,commentsAreVisible:r,commentsAreLoaded:s,toggleCommentsVisibility:i,getAllComments:u}=Ca(n.commentableId,n.commentableType),d=P(()=>s.value?n.comments.length:n.count||0),m=P(()=>d.value>0);Se(d,b=>{o("update:count",b)}),Se(d,b=>{b===0&&(r.value=!1)},{flush:"post"}),qa(r,()=>{if(n.count===0&&n.comments.length===1&&n.comments[0].was_recently_created===!0){s.value=!0;return}s.value||f()});async function f(){let b=await u(n.viaResource,n.viaResource?n.viaResourceId:null);s.value=!0,o("update:comments",b)}async function h(b){await We(),m.value||(r.value=!1),o("deleted",b)}function y(b){o("updated",b)}return mn(()=>{r.value=!1,s.value=!1}),(b,I)=>(g(),D(de,null,[Ee(b.$slots,"default",{commentsAreVisible:v(r),totalComments:d.value,hasComments:m.value,commentsAreBeingLoaded:v(a),toggleCommentsVisibility:v(i)}),te(_("div",zt(Qt(b.$attrs)),[v(s)?(g(),R(l5,{key:0,comments:e.comments,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"auto-focus-if-required":!0,onUpdated:y,onDeleted:h},null,8,["comments","commentable-type","commentable-id","via-resource","via-resource-id"])):Z("",!0)],16),[[fe,v(r)&&v(s)]])],64))}}),kIe={class:"mr-3 size-5 text-neutral-500 group-hover:text-neutral-700 dark:text-neutral-300 dark:group-hover:text-white"},$Ie={__name:"CollapseableCommentsLink",props:{total:{type:Number,required:!0},collapsed:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("ISpinner"),r=c("ILink"),s=ze("t");return g(),R(r,{class:"group mt-1 inline-flex items-center",basic:""},{default:p(()=>[_("span",kIe,[te(l(o,{icon:"ChatAlt",class:"size-5"},null,512),[[fe,!e.loading]]),e.loading?(g(),R(a,{key:0,class:"mt-px size-4"})):Z("",!0)]),te(_("span",null,null,512),[[s,{path:"comments::comment.total",args:{total:e.total}}]]),l(o,{class:"ml-2 size-4",icon:e.collapsed?"ChevronDownSolid":"ChevronRightSolid"},null,8,["icon"])]),_:1})}}},CIe=["id"],SIe={class:"mt-2 flex justify-end space-x-2"},TIe={__name:"CommentsCreate",props:{commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["created","cancelled"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{form:r}=Qe({body:""},{resetOnSuccess:!0});function s(u){o("created",u),Innoclapps.success(a("comments::comment.created"))}function i(){n.viaResource&&r.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),r.post(`${n.commentableType}/${n.commentableId}/comments`).then(s)}return(u,d)=>{const m=c("Editor"),f=c("IFormError"),h=c("IButton");return g(),D("div",{id:"add-comment-"+e.commentableType+"-"+e.commentableId},[l(m,{ref:"editorRef",modelValue:v(r).body,"onUpdate:modelValue":d[0]||(d[0]=y=>v(r).body=y),placeholder:u.$t("comments::comment.add_placeholder"),"with-mention":"",minimal:"",onInit:d[1]||(d[1]=()=>u.$refs.editorRef.focus())},null,8,["modelValue","placeholder"]),l(f,{error:v(r).getError("body")},null,8,["error"]),_("div",SIe,[l(h,{variant:"secondary",text:u.$t("core::app.cancel"),onClick:d[2]||(d[2]=y=>u.$emit("cancelled"))},null,8,["text"]),l(h,{variant:"primary",disabled:v(r).busy,text:u.$t("core::app.save"),onClick:i},null,8,["disabled","text"])])],8,CIe)}}},EIe=Object.assign({inheritAttrs:!1},{__name:"CommentsAdd",props:{commentableType:{required:!0,type:String},commentableId:{required:!0,type:Number},viaResource:String,viaResourceId:[String,Number]},emits:["created"],setup(e,{emit:t}){const n=e,o=t,{commengIsBeingCreated:a}=Ca(n.commentableId,n.commentableType);function r(s){o("created",s)}return un(()=>{a.value=!1}),(s,i)=>{const u=c("Icon"),d=c("ILink");return g(),D(de,null,[te(l(d,Ue(s.$attrs,{class:"inline-flex items-center",onClick:i[0]||(i[0]=m=>a.value=!0)}),{default:p(()=>[l(u,{icon:"PlusSolid",class:"mr-1.5 size-4"}),ne(" "+K(s.$t("comments::comment.add")),1)]),_:1},16),[[fe,!v(a)]]),v(a)?(g(),R(TIe,{key:0,"commentable-type":e.commentableType,"commentable-id":e.commentableId,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,onCreated:r,onCancelled:i[1]||(i[1]=m=>a.value=!1)},null,8,["commentable-type","commentable-id","via-resource","via-resource-id"])):Z("",!0)],64)}}}),FIe={visible:{},loaded:{},commentBeingCreated:{},requestInProgress:!1},AIe={SET_VISIBILITY(e,t){e.visible[String(t.commentableId+t.commentableType)]=t.visible},SET_ADD_COMMENT_VISIBILITY(e,t){e.commentBeingCreated=Object.assign({},e.commentBeingCreated,{[String(t.commentableId+t.commentableType)]:t.value})},SET_LOADED(e,t){e.loaded=Object.assign({},e.loaded,{[String(t.commentableId+t.commentableType)]:t.value})},SET_REQUEST_IN_PROGRESS(e,t){e.requestInProgress=t}},RIe={areVisibleFor:e=>(t,n)=>!!e.visible[String(t+n)],isCommentBeingCreatedFor:e=>(t,n)=>!!e.commentBeingCreated[String(t+n)],areLoadedFor:e=>(t,n)=>!!e.loaded[String(t+n)]},DIe={async getAll({commit:e},{resourceName:t,resourceId:n,viaResource:o,viaResourceId:a}){e("SET_REQUEST_IN_PROGRESS",!0);let{data:r}=await Innoclapps.request(`${t}/${n}/comments`,{params:a&&a?{via_resource:o,via_resource_id:a}:{}});return e("SET_REQUEST_IN_PROGRESS",!1),r}},OIe={state:FIe,mutations:AIe,getters:RIe,actions:DIe,namespaced:!0};window.Innoclapps&&Innoclapps.booting(function(e,t,n){e.component("CollapseableCommentsLink",$Ie),e.component("CommentsAdd",EIe),e.component("CollapsableCommentsList",xIe),e.component("CommentsList",l5),n.registerModule("comments",OIe)});const PIe={class:"mb-2 flex items-center justify-between"},MIe={class:"flex items-center space-x-2"},BIe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},NIe={class:"min-w-0 flex-1"},VIe={class:"max-w-44 truncate sm:max-w-full"},LIe={class:"sm:flex sm:space-x-2"},qIe={key:0,class:"-mt-0.5 hidden sm:inline"},UIe={class:"block shrink-0 md:hidden md:group-hover:block"},jIe={class:"flex items-center sm:space-x-1"},zIe={__name:"DealsList",props:{deals:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("deals"),{t:o}=Pe(),{floatResource:a}=Ro(),{formatMoney:r}=lo(),s=V(!1),i=P(()=>Vn(t.deals)),u=P(()=>Vt(i.value.filter(I=>I.status==="won"),I=>new Date(I.won_date),"desc")),d=P(()=>Vt(i.value.filter(I=>I.status==="lost"),I=>new Date(I.lost_date),"desc")),m=P(()=>Vt(i.value.filter(I=>I.status==="open"),I=>new Date(I.created_at))),f=P(()=>[...m.value,...d.value,...u.value]),h=P(()=>i.value.length),y=P(()=>h.value>0),b=P(()=>t.title||o("deals::deal.deals"));return(I,w)=>{const k=c("IText"),x=c("ITextDisplay"),$=c("ILink"),C=c("ITextSmall"),F=c("IBadge"),T=c("IButton"),S=ze("t");return g(),D(de,null,[_("div",PIe,[l(x,null,{default:p(()=>[ne(K(b.value)+" ",1),te(l(k,{class:"ml-0.5 inline",text:"("+h.value+")"},null,8,["text"]),[[fe,h.value>0]])]),_:1}),_("div",MIe,[h.value>e.limit?(g(),R($,{key:0,class:"shrink-0 text-sm sm:text-xs",text:s.value?I.$t("core::app.show_less"):I.$t("core::app.show_all"),onClick:w[0]||(w[0]=A=>s.value=!s.value)},null,8,["text"])):Z("",!0),h.value>e.limit?te((g(),R(C,{key:1},null,512)),[[fe,!s.value],[S,{path:"core::app.has_more",args:{count:h.value-e.limit}}]]):Z("",!0),Ee(I.$slots,"top-actions")])]),_("ul",BIe,[(g(!0),D(de,null,Ie(f.value,(A,E)=>te((g(),D("li",{key:A.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[l(F,{class:"shrink-0",variant:A.status==="won"?"success":A.status==="lost"?"danger":"neutral",text:I.$t("deals::deal.status."+A.status)},null,8,["variant","text"]),_("div",NIe,[_("div",VIe,[l($,{class:"font-medium",href:A.path,text:A.display_name,basic:"",onClick:B=>v(a)({resourceName:v(n),resourceId:A.id,mode:e.floatMode})},null,8,["href","text","onClick"]),_("div",LIe,[l(k,{text:A.stage.name},null,8,["text"]),Object.hasOwn(A,"amount")?(g(),D("span",qIe," – ")):Z("",!0),Object.hasOwn(A,"amount")?(g(),R(k,{key:1,text:v(r)(A.amount)},null,8,["text"])):Z("",!0)])])]),_("div",UIe,[_("div",jIe,[A.authorizations.view?(g(),R(T,{key:0,class:"hidden sm:inline-flex",text:I.$t("core::app.view_record"),to:A.path,basic:"",small:""},null,8,["text","to"])):Z("",!0),A.authorizations.view?(g(),R(T,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:A.path,small:"",basic:""},null,8,["to"])):Z("",!0),Ee(I.$slots,"actions",{deal:A})])])])),[[fe,E<=e.limit-1||s.value]])),128))]),te(l(k,{class:"lowercase first-letter:uppercase",text:e.emptyText},null,8,["text"]),[[fe,!y.value]])],64)}}},oh={__name:"ResourceDealsList",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},showCreateButton:{type:Boolean,required:!0},showDissociateButton:{type:Boolean,required:!0}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resource(n.resourceName),{t:r}=Pe(),s=Le("detachResourceAssociations");async function i(u){await s({deals:[u]}),o("dissociated",u),Innoclapps.success(r("core::resource.dissociated"))}return(u,d)=>{const m=c("IButton"),f=ze("i-tooltip");return g(),R(zIe,{deals:e.resource.deals,"empty-text":u.$t("core::resource.has_no_associations",{related_resource:v(a).singularLabel,resource:u.$t("deals::deal.deals")})},{actions:p(({deal:h})=>[e.showDissociateButton?te((g(),R(m,{key:0,icon:"XSolid",basic:"",small:"",onClick:y=>u.$confirm(()=>i(h.id))},null,8,["onClick"])),[[f,u.$t("deals::deal.dissociate"),void 0,{left:!0}]]):Z("",!0)]),"top-actions":p(()=>[e.showCreateButton?te((g(),R(m,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:d[0]||(d[0]=h=>u.$emit("createRequested"))},null,512)),[[f,u.$t("deals::deal.add")]]):Z("",!0)]),_:1},8,["deals","empty-text"])}}},HIe={class:"mb-2 flex items-center justify-between"},WIe={class:"flex items-center space-x-2"},GIe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},KIe={class:"shrink-0 self-start"},ZIe={class:"min-w-0 flex-1"},YIe={class:"max-w-44 truncate sm:max-w-full"},XIe={class:"block shrink-0 md:hidden md:group-hover:block"},QIe={class:"flex items-center sm:space-x-1"},JIe={__name:"ContactsList",props:{contacts:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("contacts"),{t:o}=Pe(),{floatResource:a}=Ro(),r=V(!1),s=P(()=>Vt(Vn(t.contacts),m=>new Date(m.created_at),["asc"])),i=P(()=>s.value.length),u=P(()=>i.value>0),d=P(()=>t.title||o("contacts::contact.contacts"));return(m,f)=>{const h=c("IText"),y=c("ITextDisplay"),b=c("ILink"),I=c("ITextSmall"),w=c("IAvatar"),k=c("IButton"),x=ze("t");return g(),D(de,null,[_("div",HIe,[l(y,null,{default:p(()=>[ne(K(d.value)+" ",1),te(l(h,{class:"ml-0.5 inline",text:"("+i.value+")"},null,8,["text"]),[[fe,i.value>0]])]),_:1}),_("div",WIe,[i.value>e.limit?(g(),R(b,{key:0,class:"shrink-0 text-sm sm:text-xs",text:r.value?m.$t("core::app.show_less"):m.$t("core::app.show_all"),onClick:f[0]||(f[0]=$=>r.value=!r.value)},null,8,["text"])):Z("",!0),i.value>e.limit?te((g(),R(I,{key:1},null,512)),[[fe,!r.value],[x,{path:"core::app.has_more",args:{count:i.value-e.limit}}]]):Z("",!0),Ee(m.$slots,"top-actions")])]),_("ul",GIe,[(g(!0),D(de,null,Ie(s.value,($,C)=>te((g(),D("li",{key:$.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[_("div",KIe,[l(w,{size:"sm",src:$.avatar_url},null,8,["src"])]),_("div",ZIe,[_("div",YIe,[l(b,{class:"font-medium",href:$.path,text:$.display_name,basic:"",onClick:F=>v(a)({resourceName:v(n),resourceId:$.id,mode:e.floatMode})},null,8,["href","text","onClick"]),l(h,{class:"truncate",text:$.job_title},null,8,["text"])])]),_("div",XIe,[_("div",QIe,[$.authorizations.view?(g(),R(k,{key:0,class:"hidden sm:inline-flex",text:m.$t("core::app.view_record"),to:$.path,basic:"",small:""},null,8,["text","to"])):Z("",!0),$.authorizations.view?(g(),R(k,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:$.path,small:"",basic:""},null,8,["to"])):Z("",!0),Ee(m.$slots,"actions",{contact:$})])])])),[[fe,C<=e.limit-1||r.value]])),128))]),te(l(h,{class:"lowercase first-letter:uppercase",text:e.emptyText},null,8,["text"]),[[fe,!u.value]])],64)}}},ah={__name:"ResourceContactsList",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},showCreateButton:{type:Boolean,required:!0},showDissociateButton:{type:Boolean,required:!0}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resource(n.resourceName),{t:r}=Pe(),s=Le("detachResourceAssociations");async function i(u){await s({contacts:[u]}),o("dissociated",u),Innoclapps.success(r("core::resource.dissociated"))}return(u,d)=>{const m=c("IButton"),f=ze("i-tooltip");return g(),R(JIe,{contacts:e.resource.contacts,"empty-text":u.$t("core::resource.has_no_associations",{related_resource:v(a).singularLabel,resource:u.$t("contacts::contact.contacts")})},{actions:p(({contact:h})=>[e.showDissociateButton?te((g(),R(m,{key:0,icon:"XSolid",basic:"",small:"",onClick:y=>u.$confirm(()=>i(h.id))},null,8,["onClick"])),[[f,u.$t("contacts::contact.dissociate"),void 0,{left:!0}]]):Z("",!0)]),"top-actions":p(()=>[e.showCreateButton?te((g(),R(m,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:d[0]||(d[0]=h=>u.$emit("createRequested"))},null,512)),[[f,u.$t("contacts::contact.add")]]):Z("",!0)]),_:1},8,["contacts","empty-text"])}}},exe={key:1,class:"flex flex-col"},txe={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},nxe={class:"flex justify-end space-x-2"},oxe={__name:"CompanyFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("companies"),{form:o}=Qe(),a=V(!0),r=V(!1),s=V(!1),i=Le("synchronizeAndEmitUpdatedEvent"),u=Le("hydrateFields"),d=Le("totalCollapsableFields");function m(y,b){u({[y]:b}),o.fill(y,b.map(I=>I.id))}function f(y){r.value=!1,i({contacts:y.contact}),We(()=>{m("contacts",t.resource.contacts)})}function h(y){s.value=!1,i({deals:y.deal}),We(()=>{m("deals",t.resource.deals)})}return(y,b)=>{const I=c("FieldsPlaceholder"),w=c("FieldsButtonCollapse"),k=c("FormFields"),x=c("DetailFields"),$=c("IText"),C=c("ITextDisplay"),F=c("CreateContactModal"),T=c("CreateDealModal"),S=c("IButton"),A=c("ISlideover");return g(),R(A,{id:"companyFloatingModal",title:e.resource.display_name,static:"",form:"",onSubmit:b[13]||(b[13]=E=>e.updateHandler(v(o)))},{"modal-footer":p(()=>[_("div",nxe,[l(S,{variant:"secondary",disabled:!e.floatingReady,text:y.$t("core::app.view_record"),onClick:b[12]||(b[12]=E=>y.$emit("viewRequested",E))},null,8,["disabled","text"]),e.mode==="edit"?(g(),R(S,{key:0,type:"submit",variant:"primary",loading:v(o).busy,text:y.$t("core::app.save"),disabled:!e.floatingReady||v(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):Z("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",exe,[v(d)>0?(g(),R(w,{key:0,collapsed:a.value,"onUpdate:collapsed":b[0]||(b[0]=E=>a.value=E),class:"mb-2 ml-auto",total:v(d)},null,8,["collapsed","total"])):Z("",!0),e.mode==="edit"?(g(),R(k,{key:1,fields:e.fields,form:v(o),"resource-name":v(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:b[1]||(b[1]=E=>v(o).fill(E.attribute,E.value)),onSetInitialValue:b[2]||(b[2]=E=>v(o).set(E.attribute,E.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),R(x,{key:2,fields:e.fields,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:b[3]||(b[3]=E=>v(i)(E,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),te(_("div",txe,null,512),[[fe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(ah,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:b[4]||(b[4]=E=>(m("contacts",e.resource.contacts),v(i)({contacts:{id:E,_delete:!0}}))),onCreateRequested:b[5]||(b[5]=E=>r.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(oh,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:b[6]||(b[6]=E=>(m("deals",e.resource.deals),v(i)({deals:{id:E,_delete:!0}}))),onCreateRequested:b[7]||(b[7]=E=>s.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(C,null,{default:p(()=>[ne(K(y.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),R($,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):Z("",!0)]),_:1}),l(Is,{"resource-name":v(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:b[8]||(b[8]=E=>v(i)({media:[E]})),onDeleted:b[9]||(b[9]=E=>v(i)({media:{id:E.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(F,{visible:r.value,"onUpdate:visible":b[10]||(b[10]=E=>r.value=E),overlay:!1,companies:[e.resource],onCreated:f,onRestored:f},null,8,["visible","companies"]),l(T,{visible:s.value,"onUpdate:visible":b[11]||(b[11]=E=>s.value=E),overlay:!1,companies:[e.resource],onCreated:h,onRestored:h},null,8,["visible","companies"])])):(g(),R(I,{key:0}))]),_:1},8,["title"])}}},axe={},rxe={class:"inline-flex size-8 items-center justify-center rounded-full bg-neutral-200 dark:bg-neutral-600"};function lxe(e,t){const n=c("Icon");return g(),D("span",rxe,[l(n,{icon:"OfficeBuilding",class:"size-5 text-neutral-400 dark:text-neutral-300"})])}const s5=an(axe,[["render",lxe]]),sxe={class:"mb-2 flex items-center justify-between"},ixe={class:"flex items-center space-x-2"},uxe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},cxe={class:"shrink-0"},dxe={class:"min-w-0 flex-1 truncate"},mxe={class:"block shrink-0 md:hidden md:group-hover:block"},fxe={class:"flex items-center sm:space-x-1"},i5={__name:"CompaniesList",props:{companies:{type:[Object,Array],required:!0},limit:{type:Number,default:3},emptyText:String,title:String,floatMode:{type:String,default:"detail"}},setup(e){const t=e,n=Innoclapps.resourceName("companies"),{t:o}=Pe(),{floatResource:a}=Ro(),r=V(!1),s=P(()=>Vt(Vn(t.companies),m=>new Date(m.created_at),["asc"])),i=P(()=>s.value.length),u=P(()=>i.value>0),d=P(()=>t.title||o("contacts::company.companies"));return(m,f)=>{const h=c("IText"),y=c("ITextDisplay"),b=c("ILink"),I=c("ITextSmall"),w=c("IButton"),k=ze("t");return g(),D(de,null,[_("div",sxe,[l(y,null,{default:p(()=>[ne(K(d.value)+" ",1),te(l(h,{class:"ml-0.5 inline",text:"("+i.value+")"},null,8,["text"]),[[fe,i.value>0]])]),_:1}),_("div",ixe,[i.value>e.limit?(g(),R(b,{key:0,class:"shrink-0 text-sm sm:text-xs",text:r.value?m.$t("core::app.show_less"):m.$t("core::app.show_all"),onClick:f[0]||(f[0]=x=>r.value=!r.value)},null,8,["text"])):Z("",!0),i.value>e.limit?te((g(),R(I,{key:1},null,512)),[[fe,!r.value],[k,{path:"core::app.has_more",args:{count:i.value-e.limit}}]]):Z("",!0),Ee(m.$slots,"top-actions")])]),_("ul",uxe,[(g(!0),D(de,null,Ie(s.value,(x,$)=>te((g(),D("li",{key:x.id,class:"group flex items-center space-x-2 py-3 last:pb-0"},[_("div",cxe,[l(s5)]),_("div",dxe,[l(b,{class:"font-medium",href:x.path,text:x.display_name,basic:"",onClick:C=>v(a)({resourceName:v(n),resourceId:x.id,mode:e.floatMode})},null,8,["href","text","onClick"]),te(_("p",null,[l(b,{class:"opacity-90",href:"http://"+x.domain,text:x.domain,basic:""},null,8,["href","text"])],512),[[fe,x.domain]])]),_("div",mxe,[_("div",fxe,[x.authorizations.view?(g(),R(w,{key:0,class:"hidden sm:inline-flex",text:m.$t("core::app.view_record"),to:x.path,basic:"",small:""},null,8,["text","to"])):Z("",!0),x.authorizations.view?(g(),R(w,{key:1,class:"inlnie-flex sm:hidden",icon:"ChevronRightSolid",to:x.path,small:"",basic:""},null,8,["to"])):Z("",!0),Ee(m.$slots,"actions",{company:x})])])])),[[fe,$<=e.limit-1||r.value]])),128))]),te(l(h,{class:"lowercase first-letter:uppercase",text:e.emptyText},null,8,["text"]),[[fe,!u.value]])],64)}}},rh={__name:"ResourceCompaniesList",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},showCreateButton:{type:Boolean,required:!0},showDissociateButton:{type:Boolean,required:!0}},emits:["dissociated","createRequested"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resource(n.resourceName),{t:r}=Pe(),s=Le("detachResourceAssociations");async function i(u){await s({companies:[u]}),o("dissociated",u),Innoclapps.success(r("core::resource.dissociated"))}return(u,d)=>{const m=c("IButton"),f=ze("i-tooltip");return g(),R(i5,{companies:e.resource.companies,"empty-text":u.$t("core::resource.has_no_associations",{related_resource:v(a).singularLabel,resource:u.$t("contacts::company.companies")})},{actions:p(({company:h})=>[e.showDissociateButton?te((g(),R(m,{key:0,icon:"XSolid",basic:"",small:"",onClick:y=>u.$confirm(()=>i(h.id))},null,8,["onClick"])),[[f,u.$t("contacts::company.dissociate"),void 0,{left:!0}]]):Z("",!0)]),"top-actions":p(()=>[e.showCreateButton?te((g(),R(m,{key:0,class:"-my-1.5 ml-4",icon:"PlusSolid",basic:"",small:"",onClick:d[0]||(d[0]=h=>u.$emit("createRequested"))},null,512)),[[f,u.$t("contacts::company.add")]]):Z("",!0)]),_:1},8,["companies","empty-text"])}}},pxe={key:1,class:"flex flex-col"},vxe={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},hxe={class:"flex justify-end space-x-2"},gxe={__name:"ContactFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("contacts"),{form:o}=Qe(),a=V(!0),r=V(!1),s=V(!1),i=Le("synchronizeAndEmitUpdatedEvent"),u=Le("hydrateFields"),d=Le("totalCollapsableFields");function m(y,b){u({[y]:b}),o.fill(y,b.map(I=>I.id))}function f(y){r.value=!1,i({companies:y.company}),We(()=>{m("companies",t.resource.companies)})}function h(y){s.value=!1,i({deals:y.deal}),We(()=>{m("deals",t.resource.deals)})}return(y,b)=>{const I=c("FieldsPlaceholder"),w=c("FieldsButtonCollapse"),k=c("FormFields"),x=c("DetailFields"),$=c("IText"),C=c("ITextDisplay"),F=c("CreateCompanyModal"),T=c("CreateDealModal"),S=c("IButton"),A=c("ISlideover");return g(),R(A,{id:"contactFloatingModal",title:e.resource.display_name,static:"",form:"",onSubmit:b[13]||(b[13]=E=>e.updateHandler(v(o)))},{"modal-footer":p(()=>[_("div",hxe,[l(S,{variant:"secondary",disabled:!e.floatingReady,text:y.$t("core::app.view_record"),onClick:b[12]||(b[12]=E=>y.$emit("viewRequested",E))},null,8,["disabled","text"]),e.mode==="edit"?(g(),R(S,{key:0,type:"submit",variant:"primary",loading:v(o).busy,text:y.$t("core::app.save"),disabled:!e.floatingReady||v(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):Z("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",pxe,[v(d)>0?(g(),R(w,{key:0,collapsed:a.value,"onUpdate:collapsed":b[0]||(b[0]=E=>a.value=E),class:"mb-2 ml-auto",total:v(d)},null,8,["collapsed","total"])):Z("",!0),e.mode==="edit"?(g(),R(k,{key:1,fields:e.fields,form:v(o),"resource-name":v(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:b[1]||(b[1]=E=>v(o).fill(E.attribute,E.value)),onSetInitialValue:b[2]||(b[2]=E=>v(o).set(E.attribute,E.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),R(x,{key:2,fields:e.fields,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:b[3]||(b[3]=E=>v(i)(E,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),te(_("div",vxe,null,512),[[fe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(rh,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:b[4]||(b[4]=E=>(m("companies",e.resource.companies),v(i)({companies:{id:E,_delete:!0}}))),onCreateRequested:b[5]||(b[5]=E=>r.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(oh,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:b[6]||(b[6]=E=>(m("deals",e.resource.deals),v(i)({deals:{id:E,_delete:!0}}))),onCreateRequested:b[7]||(b[7]=E=>s.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(C,null,{default:p(()=>[ne(K(y.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),R($,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):Z("",!0)]),_:1}),l(Is,{"resource-name":v(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:b[8]||(b[8]=E=>v(i)({media:[E]})),onDeleted:b[9]||(b[9]=E=>v(i)({media:{id:E.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(F,{visible:r.value,"onUpdate:visible":b[10]||(b[10]=E=>r.value=E),overlay:!1,contacts:[e.resource],onCreated:f,onRestored:f},null,8,["visible","contacts"]),l(T,{visible:s.value,"onUpdate:visible":b[11]||(b[11]=E=>s.value=E),overlay:!1,contacts:[e.resource],onCreated:h,onRestored:h},null,8,["visible","contacts"])])):(g(),R(I,{key:0}))]),_:1},8,["title"])}}},bxe={__name:"CreateCompanyModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,contacts:Array,deals:Array},emits:["created","restored","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),r=wt(),s=Innoclapps.resourceName("companies"),i=V(!1),u=V(!1),d=P(()=>w("phones")),m=Pt(null),f=Pt(null),h=V([]),y=V({byName:!1,byEmail:!1,byPhone:{}}),{fields:b,hasFields:I,findField:w,getCreateFields:k}=In(),{form:x}=Qe(),{createResource:$}=qt(s);qa(()=>n.visible,G,{immediate:!0}),Ba(()=>x.email,U=>{if(!U){m.value=null;return}S(U,"email").then(({data:j})=>{m.value=j.length>0?j[0]:null})},{debounce:500}),Ba(()=>x.name,U=>{if(!U){f.value=null;return}S(U,"name").then(({data:j})=>{f.value=j.length>0?j[0]:null})},{debounce:500}),Ba(()=>x.phones,U=>{if(!U)return;const j=U.filter(O=>!O.number||!(d.value.callingPrefix&&d.value.callingPrefix.trim()===O.number)).map(O=>O.number);if(j.length===0){h.value=[];return}Innoclapps.request("/trashed/companies/search",{params:{q:j.join(","),search_fields:"phones.number:in"}}).then(({data:O})=>{h.value=O})},{debounce:500,deep:!0});function C(U){if(U.indexRoute={name:"company-index"},U.action==="go-to-list")return r.push(U.indexRoute);if(U.action!=="create-another"&&n.redirectToView){let j=U.company;r.company=j,r.push({name:"view-company",params:{id:j.id}})}}function F(U,j){w(U).options.push(j),x[U].push(j.id)}function T(){b.value=[],x.reset()}function S(U,j){return Innoclapps.request("/trashed/companies/search",{params:{q:U,search_fields:j+":="}})}function A(U,j){Innoclapps.request().post(`/trashed/companies/${U}`).then(({data:O})=>{typeof y.value[j]=="object"?y.value[j][O.id]=!0:y.value[j]=!0,o("restored",O)})}function E(){N().then(C)}function B(){N("create-another").then(U=>{x.reset(),C(U)})}function M(){N("go-to-list").then(C)}async function N(U=null){let O={company:await $(x).catch(H=>(H.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject(H))),isRegularAction:U===null,action:U};return o("created",O),Innoclapps.success(a("core::resource.created")),O}async function G(){const U=await k(s),j=O=>Mt(U,["attribute",O]);for(let O of["contacts","deals"]){if(!n[O])continue;let H=j(O);H===-1?x.set(O,n[O].map(W=>typeof W=="object"?W.id:W)):U[H].value=n[O]}b.value=U,o("ready",{fields:b,form:x})}return(U,j)=>{const O=c("FieldsPlaceholder"),H=c("ILink"),W=c("IAlertBody"),X=c("IButton"),q=c("IAlertActions"),L=c("IAlert"),ee=c("FormFields"),ce=c("IDropdownItem"),ue=c("IDropdownMenu"),oe=c("IExtendedDropdown"),re=c("CreateDealModal"),Y=c("CreateContactModal"),ae=c("ISlideover");return g(),R(ae,{id:"createCompanyModal",visible:e.visible,title:e.title||U.$t("contacts::company.create"),"ok-text":U.$t("core::app.create"),"ok-disabled":v(x).busy,static:"",form:"",onHidden:T,onSubmit:j[13]||(j[13]=se=>e.createUsing?e.createUsing(E):E()),"onUpdate:visible":j[14]||(j[14]=se=>U.$emit("update:visible",se))},gn({default:p(()=>[v(I)?Z("",!0):(g(),R(O,{key:0})),Ee(U.$slots,"top",{isReady:v(I)}),te(_("div",null,[l(ee,{fields:v(b),form:v(x),"resource-name":v(s),"is-floating":"","focus-first":"",onUpdateFieldValue:j[6]||(j[6]=se=>v(x).fill(se.attribute,se.value)),onSetInitialValue:j[7]||(j[7]=se=>v(x).set(se.attribute,se.value))},gn({"after-deals-field":p(()=>[l(H,{class:"-mt-1 block text-right",onClick:j[0]||(j[0]=se=>i.value=!0)},{default:p(()=>[ne(" + "+K(U.$t("deals::deal.create")),1)]),_:1})]),"after-contacts-field":p(()=>[l(H,{class:"-mt-1 block text-right",onClick:j[1]||(j[1]=se=>u.value=!0)},{default:p(()=>[ne(" + "+K(U.$t("contacts::contact.create")),1)]),_:1})]),_:2},[m.value!==null?{name:"after-email-field",fn:p(()=>[l(L,{class:"mb-3",dismissible:"",onDismissed:j[3]||(j[3]=se=>{y.value.byEmail=!1,m.value=null})},{default:p(({variant:se})=>[l(W,null,{default:p(()=>[ne(K(U.$t("contacts::company.exists_in_trash_by_email")),1)]),_:1}),l(q,null,{default:p(()=>[y.value.byEmail?Z("",!0):(g(),R(X,{key:0,variant:se,text:U.$t("core::app.soft_deletes.restore"),ghost:"",onClick:j[2]||(j[2]=xe=>A(m.value.id,"byEmail"))},null,8,["variant","text"])),y.value.byEmail?(g(),R(X,{key:1,variant:se,to:{name:"view-company",params:{id:m.value.id}},text:U.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):Z("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0,f.value!==null?{name:"after-name-field",fn:p(()=>[f.value?(g(),R(L,{key:0,class:"mb-3",dismissible:"",onDismissed:j[5]||(j[5]=se=>{y.value.byName=!1,f.value=null})},{default:p(({variant:se})=>[l(W,null,{default:p(()=>[ne(K(U.$t("contacts::company.exists_in_trash_by_name")),1)]),_:1}),l(q,null,{default:p(()=>[y.value.byName?Z("",!0):(g(),R(X,{key:0,variant:se,text:U.$t("core::app.soft_deletes.restore"),ghost:"",onClick:j[4]||(j[4]=xe=>A(f.value.id,"byName"))},null,8,["variant","text"])),y.value.byName?(g(),R(X,{key:1,variant:se,to:{name:"view-company",params:{id:f.value.id}},text:U.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):Z("",!0)]),_:2},1024)]),_:1})):Z("",!0)]),key:"1"}:void 0,h.value.length>0?{name:"after-phones-field",fn:p(()=>[(g(!0),D(de,null,Ie(h.value,(se,xe)=>(g(),R(L,{key:se.id,class:"mb-3",dismissible:"",onDismissed:le=>{y.value.byPhone[se.id]=!1,h.value[xe]=null}},{default:p(({variant:le})=>[l(W,null,{default:p(()=>[ne(K(U.$t("contacts::company.exists_in_trash_by_phone",{company:se.display_name,phone_numbers:se.phones.map(ge=>ge.number).join(",")})),1)]),_:2},1024),l(q,null,{default:p(()=>[y.value.byPhone[se.id]?Z("",!0):(g(),R(X,{key:0,variant:le,text:U.$t("core::app.soft_deletes.restore"),ghost:"",onClick:ge=>A(se.id,"byPhone")},null,8,["variant","text","onClick"])),y.value.byPhone[se.id]?(g(),R(X,{key:1,variant:le,to:{name:"view-company",params:{id:se.id}},text:U.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):Z("",!0)]),_:2},1024)]),_:2},1032,["onDismissed"]))),128))]),key:"2"}:void 0]),1032,["fields","form","resource-name"])],512),[[fe,e.fieldsVisible]]),l(re,{visible:i.value,"onUpdate:visible":j[8]||(j[8]=se=>i.value=se),overlay:!1,onCreated:j[9]||(j[9]=se=>(F("deals",se.deal),i.value=!1))},null,8,["visible"]),l(Y,{visible:u.value,"onUpdate:visible":j[10]||(j[10]=se=>u.value=se),overlay:!1,onCreated:j[11]||(j[11]=se=>(F("contacts",se.contact),u.value=!1)),onRestored:j[12]||(j[12]=se=>(F("contacts",se),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(oe,{type:"submit",placement:"top-end",disabled:v(x).busy,loading:v(x).busy,text:U.$t("core::app.create")},{default:p(()=>[l(ue,{class:"min-w-48"},{default:p(()=>[l(ce,{text:U.$t("core::app.create_and_add_another"),onClick:B},null,8,["text"]),te(l(ce,{text:U.$t("core::app.create_and_go_to_list"),onClick:M},null,8,["text"]),[[fe,e.goToList]])]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},yxe={__name:"CreateContactModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,firstName:String,lastName:String,email:String,associations:Object,companies:Array,deals:Array},emits:["created","restored","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("contacts"),{t:r}=Pe(),s=wt(),i=V(!1),u=V(!1),d=Pt(null),m=V([]),f=V({byEmail:!1,byPhone:{}}),{fields:h,hasFields:y,findField:b,getCreateFields:I}=In(),{createResource:w}=qt(a),{form:k}=Qe({avatar:null});qa(()=>n.visible,B,{immediate:!0}),Ba(()=>k.email,M=>{if(!M){d.value=null;return}Innoclapps.request("/trashed/contacts/search",{params:{q:M,search_fields:"email:="}}).then(({data:N})=>{d.value=N.length>0?N[0]:null})},{debounce:500}),Ba(()=>k.phones,M=>{const N=M.map(G=>G.number);if(N.length===0){m.value=[];return}Innoclapps.request("/trashed/contacts/search",{params:{q:N.join(","),search_fields:"phones.number:in"}}).then(({data:G})=>{m.value=G})},{debounce:500,deep:!0});function x(M){if(M.indexRoute={name:"contact-index"},M.action==="go-to-list")return s.push(M.indexRoute);if(M.action!=="create-another"&&n.redirectToView){let N=M.contact;s.contact=N,s.push({name:"view-contact",params:{id:N.id}})}}function $(M,N){b(M).options.push(N),k[M].push(N.id)}function C(){h.value=[],k.reset()}function F(M,N){Innoclapps.request().post(`/trashed/contacts/${M}`).then(({data:G})=>{typeof f.value[N]=="object"?f.value[N][G.id]=!0:f.value[N]=!0,o("restored",G)})}function T(){E().then(x)}function S(){E("create-another").then(M=>{k.reset(),x(M)})}function A(){E("go-to-list").then(x)}async function E(M=null){n.associations&&k.fill(n.associations);let G={contact:await w(k).catch(U=>(U.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(U))),isRegularAction:M===null,action:M};return o("created",G),Innoclapps.success(r("core::resource.created")),G}async function B(){const M=await I(a),N=j=>Mt(M,["attribute",j]);for(let j of["companies","deals"]){if(!n[j])continue;let O=N(j);O===-1?k.set(j,n[j].map(H=>typeof H=="object"?H.id:H)):M[O].value=n[j]}n.firstName&&(M[N("first_name")].value=n.firstName);const G=n.lastName&&N("last_name");G&&M[G]&&(M[G].value=n.lastName);const U=n.email&&N("email");U&&M[U]&&(M[U].value=n.email),h.value=M,o("ready",{fields:h,form:k})}return(M,N)=>{const G=c("FieldsPlaceholder"),U=c("ILink"),j=c("IAlertBody"),O=c("IButton"),H=c("IAlertActions"),W=c("IAlert"),X=c("FormFields"),q=c("IDropdownItem"),L=c("IDropdownMenu"),ee=c("IExtendedDropdown"),ce=c("CreateDealModal"),ue=c("CreateCompanyModal"),oe=c("ISlideover");return g(),R(oe,{id:"createContactModal",visible:e.visible,title:e.title||M.$t("contacts::contact.create"),"ok-text":M.$t("core::app.create"),"ok-disabled":v(k).busy,static:"",form:"",onHidden:C,onSubmit:N[11]||(N[11]=re=>e.createUsing?e.createUsing(T):T()),"onUpdate:visible":N[12]||(N[12]=re=>M.$emit("update:visible",re))},gn({default:p(()=>[v(y)?Z("",!0):(g(),R(G,{key:0})),Ee(M.$slots,"top",{isReady:v(y)}),te(l(X,{fields:v(h),form:v(k),"resource-name":v(a),"is-floating":"","focus-first":"",onUpdateFieldValue:N[4]||(N[4]=re=>v(k).fill(re.attribute,re.value)),onSetInitialValue:N[5]||(N[5]=re=>v(k).set(re.attribute,re.value))},gn({"after-deals-field":p(()=>[l(U,{class:"-mt-1 block text-right",onClick:N[0]||(N[0]=re=>i.value=!0)},{default:p(()=>[ne(" + "+K(M.$t("deals::deal.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(U,{class:"-mt-1 block text-right",onClick:N[1]||(N[1]=re=>u.value=!0)},{default:p(()=>[ne(" + "+K(M.$t("contacts::company.create")),1)]),_:1})]),_:2},[d.value!==null?{name:"after-email-field",fn:p(()=>[l(W,{class:"mb-3",dismissible:"",onDismissed:N[3]||(N[3]=re=>{f.value.byEmail=!1,d.value=null})},{default:p(({variant:re})=>[l(j,null,{default:p(()=>[ne(K(M.$t("contacts::contact.exists_in_trash_by_email")),1)]),_:1}),l(H,null,{default:p(()=>[f.value.byEmail?Z("",!0):(g(),R(O,{key:0,variant:re,text:M.$t("core::app.soft_deletes.restore"),ghost:"",onClick:N[2]||(N[2]=Y=>F(d.value.id,"byEmail"))},null,8,["variant","text"])),f.value.byEmail?(g(),R(O,{key:1,variant:re,to:{name:"view-contact",params:{id:d.value.id}},text:M.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):Z("",!0)]),_:2},1024)]),_:1})]),key:"0"}:void 0,m.value.length>0?{name:"after-phones-field",fn:p(()=>[(g(!0),D(de,null,Ie(m.value,(re,Y)=>(g(),R(W,{key:re.id,class:"mb-3",dismissible:"",onDismissed:ae=>{f.value.byPhone[re.id]=!1,m.value[Y]=null}},{default:p(({variant:ae})=>[l(j,null,{default:p(()=>[ne(K(M.$t("contacts::contact.exists_in_trash_by_phone",{contact:re.display_name,phone_numbers:re.phones.map(se=>se.number).join(",")})),1)]),_:2},1024),l(H,null,{default:p(()=>[f.value.byPhone[re.id]?Z("",!0):(g(),R(O,{key:0,variant:ae,text:M.$t("core::app.soft_deletes.restore"),ghost:"",onClick:se=>F(re.id,"byPhone")},null,8,["variant","text","onClick"])),f.value.byPhone[re.id]?(g(),R(O,{key:1,variant:ae,to:{name:"view-contact",params:{id:re.id}},text:M.$t("core::app.view_record"),ghost:""},null,8,["variant","to","text"])):Z("",!0)]),_:2},1024)]),_:2},1032,["onDismissed"]))),128))]),key:"1"}:void 0]),1032,["fields","form","resource-name"]),[[fe,e.fieldsVisible]]),l(ce,{visible:i.value,"onUpdate:visible":N[6]||(N[6]=re=>i.value=re),overlay:!1,onCreated:N[7]||(N[7]=re=>($("deals",re.deal),i.value=!1))},null,8,["visible"]),l(ue,{visible:u.value,"onUpdate:visible":N[8]||(N[8]=re=>u.value=re),overlay:!1,onCreated:N[9]||(N[9]=re=>($("companies",re.company),u.value=!1)),onRestored:N[10]||(N[10]=re=>($("companies",re),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(ee,{type:"submit",placement:"top-end",disabled:v(k).busy,loading:v(k).busy,text:M.$t("core::app.create")},{default:p(()=>[l(L,{class:"min-w-48"},{default:p(()=>[l(q,{text:M.$t("core::app.create_and_add_another"),onClick:S},null,8,["text"]),te(l(q,{text:M.$t("core::app.create_and_go_to_list"),onClick:A},null,8,["text"]),[[fe,e.goToList]])]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled"])}}},_xe={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},u5={__name:"CompaniesCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("companies"),{t:r}=Pe(),{fields:s}=In([{asyncUrl:"/companies/search",attribute:"companies",formComponent:"FormSelectField",helpText:r("contacts::company.associate_field_info"),helpTextDisplay:"text",label:r("contacts::company.company"),labelKey:"name",valueKey:"id",lazyLoad:{url:"/companies",params:{order:"created_at|desc"}}}]),{form:i}=Qe(),u=P(()=>!!i.companies),d=P(()=>n.viaResource?u.value?r("contacts::company.associate_with",{name:n.parentResource.display_name}):r("contacts::company.create_with",{name:n.parentResource.display_name}):r("contacts::company.create"));async function m(){await i.set({companies:[i.companies]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.companies[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||yo(r("contacts::company.create")),(f,h)=>{const y=c("FormFields"),b=c("CreateCompanyModal");return g(),R(b,zt({title:d.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":I=>u.value?m():I()}),{top:p(({isReady:I})=>[e.viaResource?te((g(),D("div",_xe,[l(y,{fields:v(s),form:v(i),"resource-name":v(a),"is-floating":"",onUpdateFieldValue:h[0]||(h[0]=w=>v(i).fill(w.attribute,w.value)),onSetInitialValue:h[1]||(h[1]=w=>v(i).set(w.attribute,w.value))},null,8,["fields","form","resource-name"])],512)),[[fe,I]]):Z("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},wxe={__name:"ResourceCompaniesPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},panel:{required:!0,type:Object}},setup(e){const t=Le("fetchResource"),n=V(!1);return(o,a)=>{const r=c("Panel");return g(),R(r,{panel:e.panel},{default:p(()=>[l(rh,{resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onCreateRequested:a[0]||(a[0]=s=>n.value=!0)},null,8,["resource","resource-name","resource-id","show-create-button","show-dissociate-button"]),n.value?(g(),R(u5,{key:0,"via-resource":e.resourceName,"parent-resource":e.resource,"go-to-list":!1,onAssociated:a[1]||(a[1]=s=>(v(t)(),n.value=!1)),onCreated:a[2]||(a[2]=({isRegularAction:s})=>(s&&(n.value=!1),v(t)())),onHidden:a[3]||(a[3]=s=>n.value=!1)},null,8,["via-resource","parent-resource"])):Z("",!0)]),_:1},8,["panel"])}}},Ixe={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},c5={__name:"ContactsCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("contacts"),{t:r}=Pe(),{fields:s}=In([{asyncUrl:"/contacts/search",attribute:"contacts",formComponent:"FormSelectField",helpText:r("contacts::contact.associate_field_info"),helpTextDisplay:"text",label:r("contacts::contact.contact"),labelKey:"display_name",valueKey:"id",lazyLoad:{url:"/contacts",params:{order:"created_at|desc"}}}]),{form:i}=Qe(),u=P(()=>!!i.contacts),d=P(()=>n.viaResource?u.value?r("contacts::contact.associate_with",{name:n.parentResource.display_name}):r("contacts::contact.create_with",{name:n.parentResource.display_name}):r("contacts::contact.create"));async function m(){await i.set({contacts:[i.contacts]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.contacts[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||yo(r("contacts::contact.create")),(f,h)=>{const y=c("FormFields"),b=c("CreateContactModal");return g(),R(b,zt({title:d.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":I=>u.value?m():I()}),{top:p(({isReady:I})=>[e.viaResource?te((g(),D("div",Ixe,[l(y,{fields:v(s),form:v(i),"resource-name":v(a),"is-floating":"",onUpdateFieldValue:h[0]||(h[0]=w=>v(i).fill(w.attribute,w.value)),onSetInitialValue:h[1]||(h[1]=w=>v(i).set(w.attribute,w.value))},null,8,["fields","form","resource-name"])],512)),[[fe,I]]):Z("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},xxe={__name:"ResourceContactsPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},panel:{required:!0,type:Object}},setup(e){const t=Le("fetchResource"),n=V(!1);return(o,a)=>{const r=c("Panel");return g(),R(r,{panel:e.panel},{default:p(()=>[l(ah,{resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onCreateRequested:a[0]||(a[0]=s=>n.value=!0)},null,8,["resource","resource-name","resource-id","show-create-button","show-dissociate-button"]),n.value?(g(),R(c5,{key:0,"via-resource":e.resourceName,"parent-resource":e.resource,"go-to-list":!1,onAssociated:a[1]||(a[1]=s=>(v(t)(),n.value=!1)),onCreated:a[2]||(a[2]=({isRegularAction:s})=>(s&&(n.value=!1),v(t)())),onHidden:a[3]||(a[3]=s=>n.value=!1)},null,8,["via-resource","parent-resource"])):Z("",!0)]),_:1},8,["panel"])}}},kxe={__name:"SettingsCompanies",setup(e){const{form:t,submit:n,isReady:o}=Ao();return(a,r)=>{const s=c("ICardHeading"),i=c("ICardHeader"),u=c("IFormSwitchLabel"),d=c("IFormSwitchDescription"),m=c("IFormSwitch"),f=c("IFormSwitchField"),h=c("ICardBody"),y=c("ICard");return g(),D(de,null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("contacts::company.companies")},null,8,["text"])]),_:1}),l(y,{overlay:!v(o)},{default:p(()=>[l(h,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("contacts::company.settings.automatically_associate_with_contacts")},null,8,["text"]),l(d,{text:a.$t("contacts::company.settings.automatically_associate_with_contacts_info")},null,8,["text"]),l(m,{modelValue:v(t).auto_associate_company_to_contact,"onUpdate:modelValue":r[0]||(r[0]=b=>v(t).auto_associate_company_to_contact=b),onChange:v(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1},8,["overlay"])],64)}}},$xe={key:1},Cxe={__name:"PhoneField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){return(t,n)=>{const o=c("IDropdownButton"),a=c("IButtonCopy"),r=c("IDropdownItem"),s=c("IDropdownMenu"),i=c("IDropdown"),u=c("BaseDetailField"),d=ze("i-tooltip");return g(),R(u,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId},{default:p(({hasValue:m,value:f})=>[m?(g(!0),D(de,{key:0},Ie(f,(h,y)=>(g(),D("div",{key:y},[l(i,null,{default:p(()=>[te(l(o,{text:h.number,link:"","no-caret":""},null,8,["text"]),[[d,t.$t("contacts::fields.phone.types."+h.type)]]),l(s,null,{default:p(()=>[l(a,{as:"IDropdownItem",text:h.number,"success-message":t.$t("contacts::fields.phone.copied")},{default:p(()=>[ne(K(t.$t("core::app.copy")),1)]),_:2},1032,["text","success-message"]),l(r,{href:"tel:"+h.number,text:t.$t("core::app.open_in_app")},null,8,["href","text"])]),_:2},1024)]),_:2},1024)]))),128)):(g(),D("span",$xe,"—"))]),_:1},8,["field","is-floating","resource","resource-name","resource-id"])}}},Sxe={class:"absolute left-1 top-1 z-20 flex"},Txe={class:"truncate"},Exe={class:"absolute right-1.5 top-1.5 z-20 flex sm:top-1"},Fxe=["textContent"],Axe={class:"text-right"},Rxe={__name:"PhoneField",props:{field:{type:Object,required:!0},modelValue:{type:Array,default:()=>[]},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){const n=e,o=t,a=V([]),r=V({}),s=P(()=>n.field.callingPrefix),i=P(()=>a.value.length);Se(i,k=>{k===0&&f()}),Se(a,k=>u(k.map(x=>Fl(pr(x,"id"),x._formUniqueId)).filter(x=>!!x.number).filter(x=>!s.value||x.number.trim()!==s.value.trim())),{deep:!0});function u(k){o("update:modelValue",k)}function d(){let k=n.field.value||[];o("setInitialValue",k.map(h))}function m(k){r.value[k]=null,a.value.splice(k,1),i.value===0&&f()}function f(){a.value.push(Fl({number:s.value||"",type:n.field.type}))}function h(k){return{number:k.number,type:k.type}}function y(){a.value=(n.field.value||[]).map(h),a.value.forEach(Fl),d(),a.value.length===0&&f()}async function b(k,x){if(await We(),!I.value||!x||s.value&&s.value===x){r.value[k]=null;return}r.value[k]=await w(x)}const I=P(()=>!n.resourceId&&n.field.checkDuplicatesWith&&Object.keys(n.field.checkDuplicatesWith).length>0);async function w(k){const{data:x}=await Innoclapps.request(n.field.checkDuplicatesWith.url,{params:{q:k,...n.field.checkDuplicatesWith.params}});return x.length>0?x[0]:null}return y(),(k,x)=>{const $=c("IFormInput"),C=c("IDropdownButton"),F=c("IDropdownItem"),T=c("IDropdownMenu"),S=c("IDropdown"),A=c("IButton"),E=c("IFormError"),B=c("I18nT"),M=c("IAlertBody"),N=c("IAlertActions"),G=c("IAlert"),U=c("IFormGroup"),j=c("ILink"),O=c("BaseFormField");return g(),R(O,{"resource-name":e.resourceName,field:e.field,value:e.modelValue,"is-floating":e.isFloating},{default:p(({fieldId:H})=>[l(cn,{class:"multiple",field:e.field,label:e.field.label,"field-id":H,"validation-errors":e.validationErrors},{default:p(()=>[(g(!0),D(de,null,Ie(a.value,(W,X)=>(g(),R(U,{key:X,class:"relative"},{default:p(()=>[l($,{modelValue:a.value[X].number,"onUpdate:modelValue":q=>a.value[X].number=q,class:"pl-32 pr-12 sm:pl-28 sm:pr-11",name:e.field.attribute+"."+X+".number",debounce:I.value,onInput:q=>b(X,a.value[X].number)},null,8,["modelValue","onUpdate:modelValue","name","debounce","onInput"]),_("div",Sxe,[l(S,{"adaptive-width":""},{default:p(()=>[l(C,{class:"w-28 sm:w-24",icon:W.type=="mobile"?"DeviceMobile":"Phone",basic:"",small:""},{default:p(()=>[_("span",Txe,K(a.value[X].type?e.field.types[a.value[X].type]:k.$t("contacts::fields.phone.types.type")),1)]),_:2},1032,["icon"]),l(T,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.field.types,(q,L)=>(g(),R(F,{key:L,text:q,onClick:ee=>a.value[X].type=L},null,8,["text","onClick"]))),128))]),_:2},1024)]),_:2},1024)]),_("div",Exe,[l(A,{icon:"XSolid",basic:"",small:"",onClick:q=>m(X)},null,8,["onClick"])]),e.validationErrors&&e.validationErrors.array&&e.validationErrors.array[e.field.attribute+"."+X+".number"]?(g(),R(E,{key:0,error:e.validationErrors.array[e.field.attribute+"."+X+".number"]},null,8,["error"])):Z("",!0),r.value[X]?(g(),R(G,{key:1,class:"mt-1",dismissible:"",onDismissed:q=>r.value[X]=null},{default:p(({variant:q})=>[l(M,null,{default:p(()=>[l(B,{scope:"global",keypath:e.field.checkDuplicatesWith.lang_keypath},{display_name:p(()=>[_("span",{class:"font-medium",textContent:K(r.value[X].display_name)},null,8,Fxe)]),_:2},1032,["keypath"])]),_:2},1024),l(N,null,{default:p(()=>[l(A,{target:"_blank",rel:"noopener noreferrer",icon:"ExternalLink",href:r.value[X].path,variant:q,text:k.$t("core::app.view_record"),ghost:""},null,8,["href","variant","text"])]),_:2},1024)]),_:2},1032,["onDismissed"])):Z("",!0)]),_:2},1024))),128)),_("div",Axe,[l(j,{text:k.$t("contacts::fields.phone.add"),onClick:f},null,8,["text"])])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},Dxe={class:"flex flex-wrap space-x-0 space-y-4 lg:flex-nowrap lg:space-x-4 lg:space-y-0"},Ud={__name:"CardsRenderer",props:{resourceName:{required:!0,type:String},totalPlaceholders:{default:2,type:Number}},setup(e){const t=e,n=Pt([]),o=V(!1);async function a(){let{data:r}=await Innoclapps.request(`/${t.resourceName}/cards`);n.value=r,o.value=!0}return a(),(r,s)=>(g(),D("div",Dxe,[o.value?Z("",!0):(g(!0),D(de,{key:0},Ie(e.totalPlaceholders,i=>(g(),D("div",{key:i,class:"w-full lg:w-1/2"},[l(Oa,{pulse:""})]))),128)),(g(!0),D(de,null,Ie(n.value,i=>(g(),D("div",{key:i.uriKey,class:be(i.width==="half"?"w-full lg:w-1/2":"w-full")},[(g(),R(_t(i.component),{card:i},null,8,["card"]))],2))),128))]))}},Oxe={key:1,class:"m-auto mt-8 max-w-5xl"},Pxe={__name:"CompaniesIndex",setup(e){const t=Innoclapps.resourceName("companies"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=P(()=>!a.value),i=P(()=>a.value&&r.value);function u(m){a.value=m.isPreEmpty,r.value=!0}function d(){Ot("refresh-cards"),o()}return(m,f)=>{const h=c("NavbarSeparator"),y=c("IDropdownItem"),b=c("IDropdownMinimal"),I=c("IButton"),w=c("NavbarItems"),k=c("IOverlay"),x=c("IEmptyState"),$=c("ResourceTable"),C=c("ResourceExport"),F=c("RouterView"),T=c("MainLayout");return g(),R(T,null,{actions:p(()=>[l(h,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(b,{placement:a.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[v(n).authorizedToImport?(g(),R(y,{key:0,icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:v(t)}},text:m.$t("core::resource.import",{resource:v(n).label})},null,8,["to","text"])):Z("",!0),v(n).authorizedToExport?(g(),R(y,{key:1,icon:"DocumentDownload",text:m.$t("core::resource.export",{resource:v(n).label}),onClick:f[0]||(f[0]=S=>m.$dialog.show("export-modal"))},null,8,["text"])):Z("",!0),v(n).usesSoftDeletes?(g(),R(y,{key:2,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:m.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),te(l(I,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-company"},text:m.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!a.value]])]),_:1})]),default:p(()=>[r.value?Z("",!0):(g(),R(k,{key:0,show:""})),i.value?(g(),D("div",Oxe,[l(x,zt(Qt({to:{name:"create-company"},title:m.$t("contacts::company.empty_state.title"),buttonText:m.$t("contacts::company.create"),description:m.$t("contacts::company.empty_state.description"),secondButtonText:m.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:v(t)}}})),null,16)])):Z("",!0),s.value?(g(),R(Ud,{key:2,class:"mb-6","resource-name":v(t)},null,8,["resource-name"])):Z("",!0),te(_("div",null,[l($,{"resource-name":v(t),onLoaded:u},null,8,["resource-name"])],512),[[fe,!a.value]]),l(C,{"resource-name":v(t)},null,8,["resource-name"]),l(F,{name:"create","redirect-to-view":!0,onCreated:f[1]||(f[1]=({isRegularAction:S})=>S?void 0:d()),onHidden:m.$router.back},null,8,["onHidden"])]),_:1})}}},lh=Object.assign({inheritAttrs:!1},{__name:"RecordTabTimeline",setup(e){return(t,n)=>{const o=c("Icon"),a=c("ITab");return n[0]||(He(-1),(n[0]=l(a,null,{default:p(()=>[l(o,{icon:"Bars3BottomLeft"}),ne(" "+K(t.$t("core::app.all")),1)]),_:1})).cacheIndex=0,He(1),n[0])}}});var Mxe=Si,Bxe=ex,Nxe=Object.prototype,Vxe=Nxe.hasOwnProperty,Lxe=Bxe(function(e,t,n){Vxe.call(e,n)?e[n].push(t):Mxe(e,n,[t])}),qxe=Lxe;const Uxe=Rt(qxe),jxe=["textContent"],zxe={__name:"RecordTabTimelineAttached",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT"),a=c("ILink");return g(),R(_o,{icon:"Plus","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.attached",user:e.log.causer_name},{user:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,jxe)]),_:1},8,["user"])).cacheIndex=0,He(1),n[0]),l(a,{class:"ml-1 font-medium",to:e.log.properties.path,text:e.log.properties.name},null,8,["to","text"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Hxe=["textContent"],Wxe={__name:"RecordTabTimelineCreated",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT");return g(),R(_o,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.created"},{causer:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,Hxe)]),_:1})).cacheIndex=0,He(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Gxe=["textContent"],Kxe={__name:"RecordTabTimelineDeleted",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT");return g(),R(_o,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.deleted"},{causer:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,Gxe)]),_:1})).cacheIndex=0,He(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Zxe=["textContent"],Yxe={__name:"RecordTabTimelineDetached",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT"),a=c("ILink");return g(),R(_o,{icon:"XSolid","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.detached",user:e.log.causer_name},{user:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,Zxe)]),_:1},8,["user"])).cacheIndex=0,He(1),n[0]),l(a,{class:"ml-1 font-medium",to:e.log.properties.path,text:e.log.properties.name},null,8,["to","text"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},Xxe={__name:"RecordTabTimelineGeneric",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{locale:n}=qe(),o=P(()=>{let a=t.log.properties.lang.attrs;return a?((En(window.lang[n.value],t.log.properties.lang.key.replace("::",".")).indexOf("{user}")>-1&&Object.keys(a).indexOf("user")===-1||Object.keys(a).indexOf("user")>-1&&a.user===null)&&(a=Object.assign({},a,{user:t.log.causer_name})),a):null});return(a,r)=>(g(),R(_o,{"resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:e.log.properties.icon||"User",heading:a.$t(e.log.properties.lang.key,o.value)},null,8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},Qxe=["textContent"],Jxe={__name:"RecordTabTimelineImported",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT");return g(),R(_o,{icon:"User","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.imported"},{causer:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,Qxe)]),_:1})).cacheIndex=0,He(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},eke=["textContent"],tke={__name:"RecordTabTimelineRestored",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=c("I18nT");return g(),R(_o,{icon:"Refresh","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[n[0]||(He(-1),(n[0]=l(o,{scope:"global",keypath:"core::timeline.restored"},{causer:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,eke)]),_:1})).cacheIndex=0,He(1),n[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}};var nke=ns,oke=ua,ake=XI,rke=ev;function lke(e,t){if(e==null)return{};var n=nke(rke(e),function(o){return[o]});return t=oke(t),ake(e,n,function(o,a){return t(o,a[0])})}var ske=lke;const ike=Rt(ske),uke=["textContent"],cke=["textContent"],dke={class:"mt-1"},mke={key:0},fke={__name:"RecordTabTimelineUpdated",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const t=e,{t:n,te:o}=Pe(),{localizeIfDate:a}=it(),r=V(!1),s=P(()=>r.value?n("core::fields.hide_updated"):n("core::fields.view_updated")+" ("+u.value+")"),i=P(()=>ike(t.log.properties.attributes,(f,h)=>h.indexOf("_id")===-1)),u=P(()=>Object.keys(i.value).length);function d(f,h){return f&&f.label?f.label:(t.log.module,t.log.module+"::fields."+t.resourceName+"."+h&&o(t.log.module+"::fields."+t.resourceName+"."+h)?n(t.log.module+"::fields."+t.resourceName+"."+h):h)}function m(f,h){return f&&Object.hasOwn(f,"value")?a(f.value,f.value):o("core::timeline."+h+"."+f)?n("core::timeline."+h+"."+f):a(f,f)}return(f,h)=>{const y=c("I18nT"),b=c("ITextDark"),I=c("ITableHeader"),w=c("ITableRow"),k=c("ITableHead"),x=c("ITableCell"),$=c("ITableBody"),C=c("ITable"),F=c("ITableOuter"),T=c("ILink");return g(),R(_o,{icon:"PencilAlt","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key},{heading:p(()=>[h[0]||(He(-1),(h[0]=e.log.causer_name?(g(),R(y,{key:0,scope:"global",keypath:"core::timeline.updated"},{causer:p(()=>[_("span",{class:"font-medium",textContent:K(e.log.causer_name)},null,8,uke)]),_:1})):(g(),D("span",{key:1,textContent:K(f.$t("core::timeline.updated"))},null,8,cke))).cacheIndex=0,He(1),h[0])]),default:p(()=>[_("div",dke,[r.value?(g(),D("div",mke,[l(b,{class:"font-medium"},{default:p(()=>[ne(K(f.$t("core::fields.updated"))+" ("+K(u.value)+") ",1)]),_:1}),l(F,{class:"mt-2 px-6 pb-8 pt-6"},{default:p(()=>[l(C,{class:"[--gutter:theme(spacing.6)] sm:[--gutter:theme(spacing.8)]",condensed:"",bleed:""},{default:p(()=>[l(k,null,{default:p(()=>[l(w,null,{default:p(()=>[l(I,null,{default:p(()=>[ne(K(f.$t("core::fields.updated_field")),1)]),_:1}),l(I,null,{default:p(()=>[ne(K(f.$t("core::fields.new_value")),1)]),_:1}),l(I,null,{default:p(()=>[ne(K(f.$t("core::fields.old_value")),1)]),_:1})]),_:1})]),_:1}),l($,null,{default:p(()=>[(g(!0),D(de,null,Ie(i.value,(S,A)=>(g(),R(w,{key:e.resourceName+A},{default:p(()=>[l(x,{class:"font-medium"},{default:p(()=>[ne(K(d(S,A)),1)]),_:2},1024),l(x,{class:"font-medium"},{default:p(()=>[ne(K(m(S,A)),1)]),_:2},1024),l(x,null,{default:p(()=>[ne(K(m(e.log.properties.old[A],A)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):Z("",!0),l(T,{class:"mt-1 block",text:s.value,onClick:S=>r.value=!r.value},null,8,["text","onClick"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key"])}}},pke={class:"mt-4 inline-flex items-center sm:ml-1 sm:mt-2"},vke={class:"pt-6"},hke={class:"flow-root"},gke={role:"list",class:"sm:-mb-6"},bke={class:"relative sm:pb-6"},yke={key:0,class:"absolute left-5 top-5 -ml-px hidden h-full w-0.5 bg-neutral-200 dark:bg-neutral-700 sm:block","aria-hidden":"true"},_ke={class:"relative flex items-start sm:space-x-3"},wke={key:0,class:"block sm:hidden","aria-hidden":"true"},Ike="changelog",sh={__name:"RecordTabTimelinePanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o={"timeline-restored":tke,"timeline-deleted":Kxe,"timeline-created":Wxe,"timeline-updated":fke,"timeline-attached":zxe,"timeline-detached":Yxe,"timeline-imported":Jxe,"timeline-generic":Xxe},{t:a}=Pe(),r=V(null),{loadData:s,infiniteHandler:i,search:u,refresh:d}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,timelineRelation:Ike,synchronizeResource:n,infinityRef:r,handleInfinityResult:w,makeRequestForData:I});Ba(()=>t.resource._sync_timestamp,()=>d(),{debounce:500});const m=V([]),f=P(()=>[{id:null,name:a("core::app.all")},{id:"changelog",name:a("core::app.changelog")},...m.value.map(k=>({id:k.name,name:k.label}))]),h=V({id:null,name:a("core::app.all")}),y=P(()=>!h.value.id||h.value.id==="changelog"?t.resource.changelog||[]:[]),b=P(()=>{const k=[...y.value];return m.value.forEach(x=>{k.push(...!h.value.id||h.value.id===x.name?t.resource[x.timeline_relation]||[]:[])}),Vt(k,["is_pinned","pinned_date",x=>new Date(x[x.timeline_sort_column])],["desc","desc","desc"])});function I(k,x){return Innoclapps.request(`${t.resource.path}/timeline`,{params:{page:k,per_page:x,q:u.value}})}function w(k){m.value=k.resources,n(Uxe(k.data,"timeline_relation"))}return Xe(s),(k,x)=>{const $=c("ITextDark"),C=c("IDropdownButton"),F=c("IDropdownItem"),T=c("IDropdownMenu"),S=c("IDropdown"),A=c("ITabPanel"),E=ze("t");return g(),R(A,null,{default:p(()=>[_("div",pke,[te(l($,{class:"-mt-0.5 mr-1.5 font-medium"},null,512),[[E,"core::filters.filter_by"]]),l(S,null,{default:p(()=>[l(C,{text:h.value.name,basic:""},null,8,["text"]),l(T,null,{default:p(()=>[(g(!0),D(de,null,Ie(f.value,B=>(g(),R(F,{key:B.id,text:B.name,active:h.value.id===B.id,onClick:M=>(h.value=B,v(s)())},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_("div",vke,[_("div",hke,[_("ul",gke,[(g(!0),D(de,null,Ie(b.value,(B,M)=>(g(),D("li",{key:"timeline-"+B.timeline_component+"-"+B.id},[_("div",bke,[M!==b.value.length-1?(g(),D("span",yke)):Z("",!0),_("div",_ke,[(g(),R(_t(Object.hasOwn(o,"timeline-"+B.timeline_component)?o["timeline-"+B.timeline_component]:B.timeline_component),{log:B,"resource-name":e.resourceName,"resource-id":e.resourceId,resource:e.resource},null,8,["log","resource-name","resource-id","resource"]))])]),M!==b.value.length-1?(g(),D("div",wke,x[1]||(x[1]=[_("div",{class:"py-5"},[_("div",{class:"border-t border-neutral-200 dark:border-neutral-500/30"})],-1)]))):Z("",!0)]))),128))]),l(Ir,{ref_key:"infinityRef",ref:r,"scroll-element":e.scrollElement,onHandle:x[0]||(x[0]=B=>v(i)(B))},null,8,["scroll-element"])])])]),_:1})}}},xke={key:0,class:"mb-4 rounded-lg border border-neutral-300 bg-neutral-50/80 px-4 py-3 dark:border-neutral-500/30 dark:bg-neutral-500/10"},jd={__name:"DealsCreate",props:{viaResource:String,parentResource:Object},emits:["associated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),{t:r}=Pe(),{fields:s}=In([{asyncUrl:"/deals/search",attribute:"deals",formComponent:"FormSelectField",helpText:r("deals::deal.associate_field_info"),helpTextDisplay:"text",label:r("deals::deal.deal"),labelKey:"name",valueKey:"id",lazyLoad:{url:"/deals",params:{order:"created_at|desc"}}}]),{form:i}=Qe(),u=P(()=>!!i.deals),d=P(()=>n.viaResource?u.value?r("deals::deal.associate_with",{name:n.parentResource.display_name}):r("deals::deal.create_with",{name:n.parentResource.display_name}):r("deals::deal.create"));async function m(){await i.set({deals:[i.deals]}).put(`associations/${n.viaResource}/${n.parentResource.id}`),o("associated",i.deals[0]),Innoclapps.success(r("core::resource.associated"))}return n.viaResource||yo(r("deals::deal.create")),(f,h)=>{const y=c("FormFields"),b=c("CreateDealModal");return g(),R(b,zt({title:d.value,"ok-text":u.value?f.$t("core::app.associate"):f.$t("core::app.create"),[e.viaResource||""]:e.viaResource?[e.parentResource]:void 0,"fields-visible":!u.value,"with-extended-submit-buttons":!u.value,"create-using":I=>u.value?m():I()}),{top:p(({isReady:I})=>[e.viaResource?te((g(),D("div",xke,[l(y,{fields:v(s),form:v(i),"resource-name":v(a),"is-floating":"",onUpdateFieldValue:h[0]||(h[0]=w=>v(i).fill(w.attribute,w.value)),onSetInitialValue:h[1]||(h[1]=w=>v(i).set(w.attribute,w.value))},null,8,["fields","form","resource-name"])],512)),[[fe,I]]):Z("",!0)]),_:1},16,["title","ok-text","fields-visible","with-extended-submit-buttons","create-using"])}}},kke={class:"max-w-36 truncate sm:max-w-48"},ih={__name:"UserOwnerDropdown",props:["owner","authorizeUpdate"],emits:["change"],setup(e){const{users:t}=qe();return(n,o)=>{const a=c("IAvatar"),r=c("IDropdownButton"),s=c("IDropdownItem"),i=c("IDropdownSeparator"),u=c("IDropdownMenu"),d=c("IDropdown"),m=ze("i-tooltip");return g(),R(d,null,{default:p(()=>[l(r,{disabled:!e.authorizeUpdate,basic:""},{default:p(()=>[te((g(),D("span",kke,[e.owner?(g(),R(a,{key:0,size:"xs",class:"mr-1.5",src:e.owner.avatar_url},null,8,["src"])):Z("",!0),ne(" "+K(e.owner?e.owner.name:n.$t("core::app.no_owner")),1)])),[[m,n.$t("deals::fields.deals.user.name"),void 0,{top:!0}]])]),_:1},8,["disabled"]),l(u,{class:"max-h-80"},{default:p(()=>[(g(!0),D(de,null,Ie(v(t),f=>(g(),R(s,{key:f.id,text:f.name,active:e.owner&&f.id===e.owner.id,onClick:h=>n.$emit("change",f)},null,8,["text","active","onClick"]))),128)),e.owner?(g(),R(i,{key:0})):Z("",!0),e.owner?(g(),R(s,{key:1,icon:"XSolid",text:n.$t("core::app.no_owner"),onClick:o[0]||(o[0]=f=>n.$emit("change",null))},null,8,["text"])):Z("",!0)]),_:1})]),_:1})}}},$ke={class:"px-5 py-4"},Cke={__name:"CompanyChildCompaniesPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=P(()=>t.resource.parents.length),o=P(()=>n.value>0);return(a,r)=>{const s=c("ICard");return o.value?Ia([e.resource.parents.map(i=>i.updated_at)],()=>(g(),R(s,{key:0},{default:p(()=>[_("div",$ke,[l(i5,{title:a.$t("contacts::company.child",{count:n.value}),companies:e.resource.parents},null,8,["title","companies"])])]),_:1})),r,0):Z("",!0)}}},Ske={class:"mx-auto max-w-7xl"},Tke={key:1,class:"relative"},Eke={class:"px-3 py-4 sm:p-6"},Fke={class:"flex grow flex-col lg:flex-row lg:items-center"},Ake={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-4 lg:text-left"},Rke={class:"space-y-2 overflow-hidden lg:space-y-0"},Dke={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},Oke={class:"shrink-0"},Pke={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2"},Mke={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},Bke={key:2,class:"mt-8"},Nke={class:"lg:grid lg:grid-cols-12 lg:gap-8"},Vke={class:"col-span-4"},Lke={class:"mb-3"},qke={class:"col-span-8 mt-4 lg:mt-0"},Uke={__name:"CompaniesView",setup(e){const t={"timeline-tab":lh,"timeline-tab-panel":sh},n={"company-child-companies-panel":Cke},o=Innoclapps.resourceName("companies"),a=wt(),r=Ct(),{form:s}=Qe(),i=P(()=>r.params.id),{resourceInformation:u,resource:d,synchronizeResource:m,detachResourceAssociations:f,incrementResourceCount:h,decrementResourceCount:y,fetchResource:b,updateResource:I,resourceReady:w}=eu(o,i),k=V(!1),x=V(u.value.detailPage),$=r.query.section?x.value.tabs.findIndex(A=>A.id===r.query.section):0,C=P(()=>{var A,E;return(E=(A=d.value)==null?void 0:A.authorizations)!=null&&E.view?`Modules.Contacts.Models.Company.${i.value}`:null});st("fetchResource",b),st("synchronizeResource",m),st("detachResourceAssociations",f),st("incrementResourceCount",h),st("decrementResourceCount",y),yo(P(()=>d.value.display_name));const{stopListening:F}=ou(C,".CompanyUpdated",()=>b());mn(F),jt("refresh-details-view",()=>b()),jt("floating-resource-updated",()=>b());function T(A){A.destroyable?a.push({name:"company-index"}):b()}function S(){return I(s)}return b(),(A,E)=>{const B=c("IAlertBody"),M=c("IAlert"),N=c("IPopoverButton"),G=c("IFormError"),U=c("IFormGroup"),j=c("IPopoverBody"),O=c("IButton"),H=c("IPopoverFooter"),W=c("IPopoverPanel"),X=c("IPopover"),q=c("ILink"),L=c("ICard"),ee=c("Panels"),ce=c("ITabList"),ue=c("ITabPanels"),oe=c("ITabGroup"),re=c("MainLayout");return g(),R(re,{overlay:!v(w)},{default:p(()=>[_("div",Ske,[v(w)&&!v(d).authorizations.view?(g(),R(M,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(B,null,{default:p(()=>[ne(K(A.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):Z("",!0),v(w)?(g(),D("div",Tke,[l(L,null,{default:p(()=>[_("div",Eke,[_("div",Fke,[_("div",Ake,[l(s5,{class:"lg:shrink-0 lg:self-start"}),_("div",Rke,[_("div",Dke,[l(X,{onShow:E[1]||(E[1]=Y=>v(s).name=v(d).name),onHide:E[2]||(E[2]=Y=>v(s).errors.clear())},{default:p(({hide:Y})=>[l(N,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:v(d).display_name,disabled:!v(d).authorizations.update},null,8,["text","disabled"]),l(W,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot(S,["prevent"])},[l(j,null,{default:p(()=>[l(U,{"label-for":"editCompanyName",label:A.$t("contacts::fields.companies.name"),required:""},{default:p(()=>[(g(),R(_t(v(d).name.length<=60?"IFormInput":"IFormTextarea"),{id:"editCompanyName",modelValue:v(s).name,"onUpdate:modelValue":E[0]||(E[0]=ae=>v(s).name=ae)},null,8,["modelValue"])),l(G,{error:v(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(H,{class:"flex justify-end space-x-2"},{default:p(()=>[l(O,{disabled:v(s).busy,text:A.$t("core::app.cancel"),basic:"",onClick:Y},null,8,["disabled","text","onClick"]),l(O,{variant:"primary",loading:v(s).busy,disabled:v(s).busy||!v(s).name,text:A.$t("core::app.save"),onClick:ae=>S().then(Y)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",Oke,[l(Ts,{disabled:!v(d).authorizations.update,type:A.$scriptConfig("contacts.tags_type"),"model-value":v(d).tags,simple:"","onUpdate:modelValue":E[3]||(E[3]=Y=>v(I)({tags:Y}))},null,8,["disabled","type","model-value"])])]),v(d).domain?(g(),R(q,{key:0,href:"http://"+v(d).domain,text:v(d).domain},null,8,["href","text"])):Z("",!0)])]),_("div",Pke,[E[4]||(He(-1),(E[4]=te(l(O,{variant:"success",class:"mr-3 mt-5 lg:mt-0 lg:shrink-0",icon:"PlusSolid",text:A.$t("deals::deal.add"),onClick:Y=>k.value=!0},null,8,["text","onClick"]),[[fe,v(d).authorizations.update]])).cacheIndex=4,He(1),E[4]),_("div",Mke,[l(ih,{owner:v(d).user,"authorize-update":v(d).authorizations.update,onChange:E[5]||(E[5]=Y=>v(I)({user_id:(Y==null?void 0:Y.id)||null}))},null,8,["owner","authorize-update"]),l(xs,{type:"dropdown",ids:v(d).id||[],actions:v(d).actions||[],"resource-name":v(o),onActionExecuted:T},null,8,["ids","actions","resource-name"])])])])])]),_:1})])):Z("",!0),v(w)?(g(),D("div",Bke,[_("div",Nke,[_("div",Vke,[l(ee,{panels:x.value.panels,"onUpdate:panels":E[7]||(E[7]=Y=>x.value.panels=Y),identifier:v(o)},{default:p(({panel:Y})=>[_("div",Lke,[(g(),R(_t(n[Y.component]||Y.component),{"resource-name":v(o),"resource-id":v(d).id,resource:v(d),panel:Y,onUpdated:E[6]||(E[6]=ae=>v(m)(ae,!0))},null,40,["resource-name","resource-id","resource","panel"]))])]),_:1},8,["panels","identifier"])]),_("div",qke,[l(oe,{"default-index":v($)},{default:p(()=>[l(L,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(ce,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(de,null,Ie(x.value.tabs,Y=>(g(),R(_t(t[Y.component]||Y.component),{key:Y.id,"resource-name":v(o),"resource-id":v(d).id,resource:v(d)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(ue,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(de,null,Ie(x.value.tabs,Y=>(g(),R(_t(t[Y.panelComponent]||Y.panelComponent),{id:"tabPanel-"+Y.id,key:Y.id,"scroll-element":"#main","resource-name":v(o),"resource-id":v(d).id,resource:v(d)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):Z("",!0)]),k.value?(g(),R(jd,{key:0,"via-resource":v(o),"parent-resource":v(d),"go-to-list":!1,onAssociated:E[8]||(E[8]=Y=>(v(b)(),k.value=!1)),onCreated:E[9]||(E[9]=({isRegularAction:Y})=>(Y&&(k.value=!1),v(b)())),onHidden:E[10]||(E[10]=Y=>k.value=!1)},null,8,["via-resource","parent-resource"])):Z("",!0)]),_:1},8,["overlay"])}}},jke={key:1,class:"m-auto mt-8 max-w-5xl"},zke={__name:"ContactsIndex",setup(e){const t=Innoclapps.resourceName("contacts"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=P(()=>!a.value),i=P(()=>a.value&&r.value);function u(m){a.value=m.isPreEmpty,r.value=!0}function d(){Ot("refresh-cards"),o()}return(m,f)=>{const h=c("NavbarSeparator"),y=c("IDropdownItem"),b=c("IDropdownMinimal"),I=c("IButton"),w=c("NavbarItems"),k=c("IOverlay"),x=c("IEmptyState"),$=c("ResourceTable"),C=c("ResourceExport"),F=c("RouterView"),T=c("MainLayout");return g(),R(T,null,{actions:p(()=>[l(h,{class:"hidden lg:block"}),l(w,null,{default:p(()=>[l(b,{placement:a.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[v(n).authorizedToImport?(g(),R(y,{key:0,icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:v(t)}},text:m.$t("core::resource.import",{resource:v(n).label})},null,8,["to","text"])):Z("",!0),v(n).authorizedToExport?(g(),R(y,{key:1,icon:"DocumentDownload",text:m.$t("core::resource.export",{resource:v(n).label}),onClick:f[0]||(f[0]=S=>m.$dialog.show("export-modal"))},null,8,["text"])):Z("",!0),v(n).usesSoftDeletes?(g(),R(y,{key:2,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:m.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),te(l(I,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-contact"},text:m.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!a.value]])]),_:1})]),default:p(()=>[r.value?Z("",!0):(g(),R(k,{key:0,show:""})),i.value?(g(),D("div",jke,[l(x,zt(Qt({to:{name:"create-contact"},title:m.$t("contacts::contact.empty_state.title"),buttonText:m.$t("contacts::contact.create"),description:m.$t("contacts::contact.empty_state.description"),secondButtonText:m.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:v(t)}}})),null,16)])):Z("",!0),s.value?(g(),R(Ud,{key:2,class:"mb-6","resource-name":v(t)},null,8,["resource-name"])):Z("",!0),te(_("div",null,[l($,{"resource-name":v(t),onLoaded:u},null,8,["resource-name"])],512),[[fe,!a.value]]),l(C,{"resource-name":v(t)},null,8,["resource-name"]),l(F,{name:"create","redirect-to-view":!0,onCreated:f[1]||(f[1]=({isRegularAction:S})=>S?void 0:d()),onHidden:m.$router.back},null,8,["onHidden"])]),_:1})}}},Hke={class:"mx-auto max-w-7xl"},Wke={key:1,class:"relative"},Gke={class:"px-3 py-4 sm:p-6"},Kke={class:"flex grow flex-col lg:flex-row lg:items-center"},Zke={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-3 lg:text-left"},Yke={class:"space-y-2 overflow-hidden lg:space-y-0"},Xke={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},Qke={class:"shrink-0"},Jke={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2"},e5e={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},t5e={key:2,class:"mt-8"},n5e={class:"lg:grid lg:grid-cols-12 lg:gap-8"},o5e={class:"col-span-4"},a5e={class:"mb-3"},r5e={class:"col-span-8 mt-4 lg:mt-0"},l5e={__name:"ContactsView",setup(e){const t={"timeline-tab":lh,"timeline-tab-panel":sh},n=Innoclapps.resourceName("contacts"),o=wt(),a=Ct(),{form:r}=Qe({first_name:null,last_name:null}),s=P(()=>a.params.id),{resourceInformation:i,resource:u,synchronizeResource:d,detachResourceAssociations:m,incrementResourceCount:f,decrementResourceCount:h,fetchResource:y,updateResource:b,resourceReady:I}=eu(n,s),w=V(!1),k=V(i.value.detailPage),x=a.query.section?k.value.tabs.findIndex(A=>A.id===a.query.section):0,$=P(()=>{var A,E;return(E=(A=u.value)==null?void 0:A.authorizations)!=null&&E.view?`Modules.Contacts.Models.Contact.${s.value}`:null});st("fetchResource",y),st("synchronizeResource",d),st("detachResourceAssociations",m),st("incrementResourceCount",f),st("decrementResourceCount",h),yo(P(()=>u.value.display_name));const{stopListening:C}=ou($,".ContactUpdated",()=>y());mn(C),jt("refresh-details-view",()=>y()),jt("floating-resource-updated",()=>y());const F=P(()=>u.value.companies.length==1);function T(A){A.destroyable?o.push({name:"contact-index"}):y()}function S(){return b(r)}return y(),(A,E)=>{const B=c("IAlertBody"),M=c("IAlert"),N=c("IAvatar"),G=c("IPopoverButton"),U=c("IFormInput"),j=c("IFormError"),O=c("IFormGroup"),H=c("IPopoverBody"),W=c("IButton"),X=c("IPopoverFooter"),q=c("IPopoverPanel"),L=c("IPopover"),ee=c("IText"),ce=c("ICard"),ue=c("Panels"),oe=c("ITabList"),re=c("ITabPanels"),Y=c("ITabGroup"),ae=c("MainLayout");return g(),R(ae,{overlay:!v(I)},{default:p(()=>[_("div",Hke,[v(I)&&!v(u).authorizations.view?(g(),R(M,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(B,null,{default:p(()=>[ne(K(A.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):Z("",!0),v(I)?(g(),D("div",Wke,[l(ce,null,{default:p(()=>[_("div",Gke,[_("div",Kke,[_("div",Zke,[l(N,{class:"lg:shrink-0 lg:self-start",size:"md",src:v(u).avatar_url,title:v(u).name},null,8,["src","title"]),_("div",Yke,[_("div",Xke,[l(L,{onShow:E[2]||(E[2]=se=>{v(r).first_name=v(u).first_name,v(r).last_name=v(u).last_name}),onHide:E[3]||(E[3]=se=>v(r).errors.clear())},{default:p(({hide:se})=>[l(G,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:v(u).display_name,disabled:!v(u).authorizations.update},null,8,["text","disabled"]),l(q,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot(S,["prevent"])},[l(H,null,{default:p(()=>[l(O,{"label-for":"editFirstName",label:A.$t("contacts::fields.contacts.first_name"),required:""},{default:p(()=>[l(U,{id:"editFirstName",modelValue:v(r).first_name,"onUpdate:modelValue":E[0]||(E[0]=xe=>v(r).first_name=xe)},null,8,["modelValue"]),l(j,{error:v(r).getError("first_name")},null,8,["error"])]),_:1},8,["label"]),l(O,{"label-for":"editLastName",label:A.$t("contacts::fields.contacts.last_name")},{default:p(()=>[l(U,{id:"editLastName",modelValue:v(r).last_name,"onUpdate:modelValue":E[1]||(E[1]=xe=>v(r).last_name=xe)},null,8,["modelValue"]),l(j,{error:v(r).getError("last_name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,{class:"flex justify-end space-x-2"},{default:p(()=>[l(W,{disabled:v(r).busy,text:A.$t("core::app.cancel"),basic:"",onClick:se},null,8,["disabled","text","onClick"]),l(W,{type:"submit",variant:"primary",loading:v(r).busy,disabled:v(r).busy||!v(r).first_name,text:A.$t("core::app.save"),onClick:xe=>S().then(se)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",Qke,[l(Ts,{disabled:!v(u).authorizations.update,type:A.$scriptConfig("contacts.tags_type"),"model-value":v(u).tags,simple:"","onUpdate:modelValue":E[4]||(E[4]=se=>v(b)({tags:se}))},null,8,["disabled","type","model-value"])])]),v(u).job_title?(g(),R(ee,{key:0,class:"block overflow-hidden truncate"},{default:p(()=>[ne(K(F.value?A.$t("contacts::contact.works_at",{job_title:v(u).job_title,company:v(u).companies[0].name}):v(u).job_title),1)]),_:1})):Z("",!0)])]),_("div",Jke,[E[5]||(He(-1),(E[5]=te(l(W,{variant:"success",class:"mr-3 mt-5 lg:mt-0 lg:shrink-0",icon:"PlusSolid",text:A.$t("deals::deal.add"),onClick:se=>w.value=!0},null,8,["text","onClick"]),[[fe,v(u).authorizations.update]])).cacheIndex=5,He(1),E[5]),_("div",e5e,[l(ih,{owner:v(u).user,"authorize-update":v(u).authorizations.update,onChange:E[6]||(E[6]=se=>v(b)({user_id:(se==null?void 0:se.id)||null}))},null,8,["owner","authorize-update"]),l(xs,{type:"dropdown",ids:v(u).id||[],actions:v(u).actions||[],"resource-name":v(n),onActionExecuted:T},null,8,["ids","actions","resource-name"])])])])])]),_:1})])):Z("",!0),v(I)?(g(),D("div",t5e,[_("div",n5e,[_("div",o5e,[l(ue,{panels:k.value.panels,"onUpdate:panels":E[8]||(E[8]=se=>k.value.panels=se),identifier:v(n)},{default:p(({panel:se})=>[_("div",a5e,[(g(),R(_t(se.component),{"resource-name":v(n),"resource-id":v(u).id,resource:v(u),panel:se,onUpdated:E[7]||(E[7]=xe=>v(d)(xe,!0))},null,40,["resource-name","resource-id","resource","panel"]))])]),_:1},8,["panels","identifier"])]),_("div",r5e,[l(Y,{"default-index":v(x)},{default:p(()=>[l(ce,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(oe,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(de,null,Ie(k.value.tabs,se=>(g(),R(_t(t[se.component]||se.component),{key:se.id,"resource-name":v(n),"resource-id":v(u).id,resource:v(u)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(re,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(de,null,Ie(k.value.tabs,se=>(g(),R(_t(t[se.panelComponent]||se.panelComponent),{id:"tabPanel-"+se.id,key:se.id,"scroll-element":"#main","resource-name":v(n),"resource-id":v(u).id,resource:v(u)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):Z("",!0)]),w.value?(g(),R(jd,{key:0,"via-resource":v(n),"parent-resource":v(u),"go-to-list":!1,onAssociated:E[9]||(E[9]=se=>(v(y)(),w.value=!1)),onCreated:E[10]||(E[10]=({isRegularAction:se})=>(se&&(w.value=!1),v(y)())),onHidden:E[11]||(E[11]=se=>w.value=!1)},null,8,["via-resource","parent-resource"])):Z("",!0)]),_:1},8,["overlay"])}}},s5e=[{path:"/companies",name:"company-index",component:Pxe,meta:{title:rt("contacts::company.companies")},children:[{path:"create",name:"create-company",components:{create:u5},meta:{title:rt("contacts::company.create")}}]},{path:"/companies/:id",name:"view-company",component:Uke},{path:"/contacts",name:"contact-index",component:zke,meta:{title:rt("contacts::contact.contacts")},children:[{path:"create",name:"create-contact",components:{create:c5},meta:{title:rt("contacts::contact.create")}}]},{path:"/contacts/:id",name:"view-contact",component:l5e}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("ResourceContactsPanel",xxe),e.component("ResourceCompaniesPanel",wxe),e.component("CompanyFloatingModal",oxe),e.component("ContactFloatingModal",gxe),e.component("CreateCompanyModal",bxe),e.component("CreateContactModal",yxe),e.component("FormPhoneField",Rxe),e.component("DetailPhoneField",Cxe),e.component("IndexPhoneField",r5),s5e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"companies",component:kxe,name:"settings-companies",meta:{title:rt("contacts::company.companies")}})});const i5e={key:0,class:"mb-4 border-b border-neutral-200 pb-8"},u5e={class:"-mt-2 block text-right"},c5e={__name:"CreateDealModal",props:{visible:{type:Boolean,default:!0},goToList:{type:Boolean,default:!0},redirectToView:Boolean,createUsing:Function,withExtendedSubmitButtons:Boolean,fieldsVisible:{type:Boolean,default:!0},title:String,disabledFields:[Array,String],hiddenFields:[Array,String],associations:Object,pipeline:Object,stageId:Number,name:String,contacts:Array,companies:Array},emits:["created","update:visible","ready"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),{t:r}=Pe(),s=wt(),i=V(!1),u=V(!1),d=V(!1),{scriptConfig:m}=qe(),{fields:f,hasFields:h,updateField:y,findField:b,getCreateFields:I}=In(),{form:w}=Qe({billable:{tax_type:m("tax_type"),products:[]}}),{createResource:k}=qt(a);qa(()=>n.visible,N,{immediate:!0});function x(G){if(G.indexRoute={name:"deal-index"},G.action==="go-to-list")return s.push(G.indexRoute);if(G.action!=="create-another"&&n.redirectToView){let U=G.deal;s.deal=U,s.push({name:"view-deal",params:{id:U.id}})}}function $(G,U){b(G).options.push(U),w[G].push(U.id)}function C(){d.value=!1,F(),f.value=[],w.reset()}function F(){w.billable.products=[],w.billable.tax_type=m("tax_type")}function T(){d.value=!0,y("amount",{readonly:!0})}function S(){d.value=!1,y("amount",{readonly:!1})}function A(){M().then(x)}function E(){M("create-another").then(G=>{w.reset(),x(G)})}function B(){M("go-to-list").then(x)}async function M(G=null){d.value||F(),n.associations&&w.fill(n.associations);let j={deal:await k(w).catch(O=>(O.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(O))),isRegularAction:G===null,action:G};return o("created",j),Innoclapps.success(r("core::resource.created")),j}async function N(){let G=await I(a);const U=O=>G.some(H=>H.attribute===O),j=O=>Mt(G,["attribute",O]);for(let O of["contacts","companies"]){if(!n[O])continue;let H=j(O);H!==-1?G[H].value=n[O]:w.set(O,n[O].map(W=>typeof W=="object"?W.id:W))}if(U("contacts")&&U("companies")){let O=j("contacts"),H=j("companies");const{lazyLoad:W}=G[O],{lazyLoad:X}=G[H];G[H].lazyLoad=P(()=>w.contacts.length?w.contacts.map(q=>({url:`/contacts/${q}/companies`})):X),G[O].lazyLoad=P(()=>w.companies.length?w.companies.map(q=>({url:`/companies/${q}/contacts`})):W)}n.name&&(G[j("name")].value=n.name),n.pipeline&&(G[j("pipeline_id")].value=n.pipeline,n.stageId||(G[j("stage_id")].value=n.pipeline.stages[0])),n.stageId&&(G[j("stage_id")].value=n.stageId?ft(n.pipeline.stages,O=>O.id===n.stageId):null),f.value=G,n.disabledFields&&Vn(n.disabledFields).forEach(O=>y(O,{readonly:!0})),n.hiddenFields&&Vn(n.hiddenFields).forEach(O=>y(O,{displayNone:!0})),o("ready",{fields:f,form:w})}return(G,U)=>{const j=c("FieldsPlaceholder"),O=c("ILink"),H=c("ITextDisplay"),W=c("IFormError"),X=c("FormFields"),q=c("IDropdownItem"),L=c("IDropdownMenu"),ee=c("IExtendedDropdown"),ce=c("CreateContactModal"),ue=c("CreateCompanyModal"),oe=c("ISlideover");return g(),R(oe,{id:"createDealModal",visible:e.visible,title:e.title||G.$t("deals::deal.create"),"ok-text":G.$t("core::app.create"),"ok-disabled":v(w).busy,size:d.value?"xxl":"md",static:"",form:"",onHidden:C,onSubmit:U[10]||(U[10]=re=>e.createUsing?e.createUsing(A):A()),"onUpdate:visible":U[11]||(U[11]=re=>G.$emit("update:visible",re))},gn({default:p(()=>[v(h)?Z("",!0):(g(),R(j,{key:0})),Ee(G.$slots,"top",{isReady:v(h)}),te(_("div",null,[d.value?(g(),D("div",i5e,[l(H,{class:"mb-5 inline-flex items-center"},{default:p(()=>[ne(K(G.$t("billable::product.products"))+" ",1),te(l(O,{class:"ml-2 mt-0.5",text:G.$t("deals::deal.dont_add_products"),onClick:S},null,8,["text"]),[[fe,d.value]])]),_:1}),l(nh,{modelValue:v(w).billable.tax_type,"onUpdate:modelValue":U[0]||(U[0]=re=>v(w).billable.tax_type=re),class:"mb-4"},null,8,["modelValue"]),l(th,{products:v(w).billable.products,"onUpdate:products":U[1]||(U[1]=re=>v(w).billable.products=re),"tax-type":v(w).billable.tax_type},{"after-product-select":p(({index:re})=>[l(W,{error:v(w).getError("billable.products."+re+".name")},null,8,["error"])]),_:1},8,["products","tax-type"])])):Z("",!0),l(X,{fields:v(f),form:v(w),"resource-name":v(a),"is-floating":"","focus-first":"",onUpdateFieldValue:U[4]||(U[4]=re=>v(w).fill(re.attribute,re.value)),onSetInitialValue:U[5]||(U[5]=re=>v(w).set(re.attribute,re.value))},{"after-contacts-field":p(()=>[l(O,{class:"-mt-1 block text-right",onClick:U[2]||(U[2]=re=>i.value=!0)},{default:p(()=>[ne(" + "+K(G.$t("contacts::contact.create")),1)]),_:1})]),"after-companies-field":p(()=>[l(O,{class:"-mt-1 block text-right",onClick:U[3]||(U[3]=re=>u.value=!0)},{default:p(()=>[ne(" + "+K(G.$t("contacts::company.create")),1)]),_:1})]),"after-amount-field":p(()=>[_("span",u5e,[te(l(O,{onClick:T},{default:p(()=>[ne(" + "+K(G.$t("deals::deal.add_products")),1)]),_:1},512),[[fe,!d.value]]),te(l(O,{text:G.$t("deals::deal.dont_add_products"),onClick:S},null,8,["text"]),[[fe,d.value]])])]),_:1},8,["fields","form","resource-name"])],512),[[fe,e.fieldsVisible]]),l(ce,{visible:i.value,"onUpdate:visible":U[6]||(U[6]=re=>i.value=re),overlay:!1,onCreated:U[7]||(U[7]=re=>($("contacts",re.contact),i.value=!1))},null,8,["visible"]),l(ue,{visible:u.value,"onUpdate:visible":U[8]||(U[8]=re=>u.value=re),overlay:!1,onCreated:U[9]||(U[9]=re=>($("companies",re.company),u.value=!1))},null,8,["visible"])]),_:2},[e.withExtendedSubmitButtons?{name:"modal-ok",fn:p(()=>[l(ee,{type:"submit",placement:"top-end",disabled:v(w).busy,loading:v(w).busy,text:G.$t("core::app.create")},{default:p(()=>[l(L,{class:"min-w-48"},{default:p(()=>[l(q,{text:G.$t("core::app.create_and_add_another"),onClick:E},null,8,["text"]),e.goToList?(g(),R(q,{key:0,text:G.$t("core::app.create_and_go_to_list"),onClick:B},null,8,["text"])):Z("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])]),key:"0"}:void 0]),1032,["visible","title","ok-text","ok-disabled","size"])}}},Wo=V([]),Sa=()=>{const{setLoading:e,isLoading:t}=Cn(),{scriptConfig:n}=qe();Wo.value=[...n("deals.pipelines")||[]],Jt(()=>{n("deals.pipelines",[...Wo.value])});const o=P(()=>Vt(Wo.value,["user_display_order","is_primary","name"],["asc","desc","asc"])),a=P({get(){return o.value},set(w){const k=Fn(w,(x,$)=>Object.assign({},x,{user_display_order:$+1}));i(k),r(k)}});function r(w){Innoclapps.request().patch("/models/pipeline/sort-order",{module:"deals",order:Fn(w,k=>({id:k.id,display_order:k.user_display_order}))})}function s(w){return Wo.value.findIndex(k=>k.id==w)}function i(w){Wo.value=w}function u(w){return Wo.value[s(w)]}function d(w,k){const x=u(w);return x==null?void 0:x.stages.filter($=>parseInt(k)===parseInt($.id))[0]}function m(w){Wo.value.splice(s(w),1)}function f(w){Wo.value.push(w)}function h(w,k){Wo.value[s(w)]=k}async function y(w,k){const{data:x}=await Innoclapps.request(`/pipelines/${w}`,k);return x}async function b(w){await Innoclapps.request().delete(`/pipelines/${w}`),m(w)}function I(w){e(!0),Innoclapps.request("/pipelines",w).then(({data:k})=>Wo.value=k).finally(()=>e(!1))}return{pipelines:Wo,orderedPipelines:o,pipelinesAreBeingFetched:t,addPipeline:f,removePipeline:m,setPipelines:i,setPipeline:h,findPipelineById:u,findPipelineStageById:d,fetchPipelines:I,fetchPipeline:y,deletePipeline:b,orderedPipelinesForDraggable:a}},d5e=["textContent"],m5e=["textContent"],f5e={key:1,class:"flex flex-wrap items-center justify-center text-base/6 font-medium sm:justify-center sm:text-sm/6"},p5e=["textContent"],v5e=["textContent"],d5={__name:"DealStagePopover",props:{dealId:{required:!0,type:Number},pipeline:{required:!0,type:Object},stageId:{required:!0,type:Number},status:{required:!0,type:String},authorizedToUpdate:{required:!0,type:Boolean}},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{orderedPipelines:a}=Sa(),{form:r}=Qe(),{updateResource:s}=qt(Innoclapps.resourceName("deals")),i=P(()=>n.pipeline),u=P(()=>n.pipeline.stages.filter(b=>b.id==n.stageId)[0]),d=Pt(null),m=Pt(null);async function f(){let b=await s(r.fill({pipeline_id:d.value.id,stage_id:m.value.id}),n.dealId);o("updated",b)}function h(){d.value=i.value,m.value=u.value}function y(b){b.id!=n.pipeline.id?m.value=b.stages[0]||null:b.id===n.pipeline.id&&(m.value=u.value)}return(b,I)=>{const w=c("Icon"),k=c("IPopoverButton"),x=c("ICustomSelect"),$=c("IFormError"),C=c("IPopoverBody"),F=c("IButton"),T=c("IPopoverFooter"),S=c("IPopoverPanel"),A=c("IPopover");return e.authorizedToUpdate&&e.status==="open"?(g(),R(A,{key:0,onShow:h},{default:p(({hide:E})=>[l(k,{as:"button",class:"flex flex-wrap items-center justify-center text-base/6 font-medium focus:outline-none sm:text-sm/6 md:flex-nowrap md:justify-start"},{default:p(()=>[_("span",{class:"w-auto max-w-[15rem] truncate",textContent:K(i.value.name)},null,8,d5e),l(w,{icon:"ChevronRightSolid",class:"size-4"}),_("span",{class:"w-auto max-w-[15rem] truncate text-left",textContent:K(u.value.name)},null,8,m5e),l(w,{icon:"ChevronDownSolid",class:"ml-2 hidden size-4 shrink-0 md:block"})]),_:1}),l(S,{class:"w-80"},{default:p(()=>[l(C,null,{default:p(()=>[l(x,{modelValue:d.value,"onUpdate:modelValue":[I[0]||(I[0]=B=>d.value=B),I[1]||(I[1]=B=>(v(r).errors.clear("pipeline_id"),v(r).errors.clear("stage_id")))],class:"mb-2",label:"name",options:v(a),clearable:!1,onOptionSelected:y},null,8,["modelValue","options"]),l($,{error:v(r).getError("pipeline_id")},null,8,["error"]),l(x,{modelValue:m.value,"onUpdate:modelValue":[I[2]||(I[2]=B=>m.value=B),I[3]||(I[3]=B=>v(r).errors.clear("stage_id"))],label:"name",options:d.value?d.value.stages:[],clearable:!1},null,8,["modelValue","options"]),l($,{error:v(r).getError("stage_id")},null,8,["error"])]),_:1}),l(T,{class:"flex justify-end space-x-2"},{default:p(()=>[l(F,{disabled:v(r).busy,text:b.$t("core::app.cancel"),basic:"",onClick:E},null,8,["disabled","text","onClick"]),l(F,{variant:"primary",text:b.$t("core::app.save"),loading:v(r).busy,disabled:v(r).busy||!m.value,onClick:B=>f().then(E)},null,8,["text","loading","disabled","onClick"])]),_:2},1024)]),_:2},1024)]),_:1})):(g(),D("div",f5e,[_("span",{class:"max-w-[15rem] truncate",textContent:K(i.value.name)},null,8,p5e),l(w,{icon:"ChevronRightSolid",class:"size-4"}),_("span",{class:"max-w-[15rem] truncate",textContent:K(u.value.name)},null,8,v5e)]))}}},vl=V([]),m5=()=>{const{setLoading:e,isLoading:t}=Cn(),{scriptConfig:n}=qe();vl.value=[...n("deals.lost_reasons")||[]],Jt(()=>{n("deals.lost_reasons",[...vl.value])});const o=P(()=>Vt(vl.value,"name"));function a(s){vl.value=s}function r(s={}){e(!0),Innoclapps.request("/lost-reasons",Object.assign({},{params:{per_page:100}},s)).then(({data:i})=>vl.value=i.data).finally(()=>e(!1))}return{lostReasons:vl,lostReasonsByName:o,lostReasonsAreBeingFetched:t,setLostReasons:a,fetchLostReasons:r}},h5e={key:1,class:"mt-2 inline-flex items-center space-x-1"},uh={__name:"DealLostReasonField",props:{modelValue:String,allowCustom:{type:Boolean,default:void 0},attribute:{default:"lost_reason",type:String}},emits:["update:modelValue"],setup(e){const t=e,{scriptConfig:n}=qe(),o=V(!1),a=P(()=>t.allowCustom===void 0?n("allow_lost_reason_enter"):t.allowCustom),{lostReasonsByName:r}=m5();return r.value.length===0&&a.value&&(o.value=!0),Xe(()=>{We(()=>{t.modelValue&&(o.value=!0)})}),(s,i)=>{const u=c("ICustomSelect"),d=c("IFormTextarea"),m=c("ILink"),f=c("Icon");return g(),D(de,null,[!o.value&&v(r).length>0||!a.value?(g(),R(u,{key:0,label:"name",options:v(r),"input-id":o.value?`${e.attribute}-hidden`:e.attribute,"input-name":e.attribute,"onUpdate:modelValue":i[0]||(i[0]=h=>s.$emit("update:modelValue",h?h.name:null))},null,8,["options","input-id","input-name"])):Z("",!0),te(_("div",null,[l(d,{id:o.value?e.attribute:`${e.attribute}-hidden`,rows:"2","model-value":e.modelValue,name:e.attribute,"onUpdate:modelValue":i[1]||(i[1]=h=>s.$emit("update:modelValue",h))},null,8,["id","model-value","name"])],512),[[fe,o.value]]),v(r).length>0&&a.value?(g(),D("div",h5e,[l(m,{tabindex:"-1",text:s.$t(`deals::deal.lost_reasons.${o.value?"choose_lost_reason":"choose_lost_reason_or_enter"}`),basic:"",onClick:i[2]||(i[2]=h=>o.value=!o.value)},null,8,["text"]),l(m,{onClick:i[3]||(i[3]=h=>o.value=!o.value)},{default:p(()=>[l(f,{icon:"ArrowRight",class:"size-4"})]),_:1})])):Z("",!0)],64)}}},g5e={key:0},b5e={class:"inline-flex"},y5e={key:1,class:"flex items-center space-x-2"},f5={__name:"DealStatusChange",props:{dealId:{type:Number,required:!0},dealStatus:{type:String,required:!0},lostPopoverPlacement:{type:String,default:"bottom"}},emits:["updated"],setup(e,{emit:t}){const n=e,o=t,{form:a}=Qe({lost_reason:null},{resetOnSuccess:!0}),{updateResource:r}=qt(Innoclapps.resourceName("deals")),s=ro({won:!1,lost:!1,open:!1});async function i(u){s[u]=!0;try{let d=await r(a.fill({status:u}),n.dealId);u==="won"&&xp(),o("updated",d)}finally{s[u]=!1}}return(u,d)=>{const m=c("IButton"),f=c("IPopoverButton"),h=c("IPopoverHeading"),y=c("IPopoverHeader"),b=c("IFormError"),I=c("IFormGroup"),w=c("IPopoverBody"),k=c("IPopoverPanel"),x=c("IPopover"),$=c("IBadge"),C=ze("i-tooltip"),F=ze("t");return e.dealStatus==="open"?(g(),D("div",g5e,[_("div",b5e,[e.dealStatus!=="won"?te((g(),R(m,{key:0,variant:"success",class:"mr-1.5 px-5",loading:s.won,disabled:s.won,text:u.$t("deals::deal.status.won"),onClick:d[0]||(d[0]=T=>i("won"))},null,8,["loading","disabled","text"])),[[C,u.$t("deals::deal.actions.mark_as_won")]]):Z("",!0),e.dealStatus!=="lost"?(g(),R(x,{key:1,placement:e.lostPopoverPlacement},{default:p(()=>[l(f,{variant:"danger",class:"px-5"},{default:p(()=>[te(_("span",null,null,512),[[C,u.$t("deals::deal.actions.mark_as_lost")],[F,"deals::deal.status.lost"]])]),_:1}),l(k,{class:"w-72 lg:w-[22rem]"},{default:p(()=>[l(y,null,{default:p(()=>[l(h,{text:u.$t("deals::deal.actions.mark_as_lost")},null,8,["text"])]),_:1}),l(w,{class:"flex flex-col"},{default:p(()=>[l(I,{"label-for":"lost_reason",label:u.$t("deals::deal.lost_reasons.lost_reason"),optional:!u.$scriptConfig("lost_reason_is_required"),required:u.$scriptConfig("lost_reason_is_required")},{default:p(()=>[l(uh,{modelValue:v(a).lost_reason,"onUpdate:modelValue":d[1]||(d[1]=T=>v(a).lost_reason=T)},null,8,["modelValue"]),l(b,{error:v(a).getError("lost_reason")},null,8,["error"])]),_:1},8,["label","optional","required"]),l(m,{variant:"danger",loading:s.lost,disabled:s.lost,text:u.$t("deals::deal.actions.mark_as_lost"),block:"",onClick:d[2]||(d[2]=T=>i("lost"))},null,8,["loading","disabled","text"])]),_:1})]),_:1})]),_:1},8,["placement"])):Z("",!0)])])):(g(),D("div",y5e,[l($,{variant:e.dealStatus==="won"?"success":"danger",icon:e.dealStatus==="won"?"CheckBadge":"XSolid",text:u.$t("deals::deal.status."+e.dealStatus)},null,8,["variant","icon","text"]),l(m,{variant:"secondary",disabled:s.open,loading:s.open,text:u.$t("deals::deal.reopen"),onClick:d[3]||(d[3]=T=>i("open"))},null,8,["disabled","loading","text"])]))}}},_5e={key:1,class:"flex flex-col"},w5e={class:"flex flex-col items-center sm:-mt-1 md:flex-row"},I5e={class:"shrink-0 text-base sm:text-sm md:mr-3"},x5e=["textContent"],k5e=["textContent"],$5e={class:"mt-6 h-2 border-t border-neutral-200 dark:border-neutral-500/30"},C5e={class:"flex justify-end space-x-2"},S5e={__name:"DealFloatingModal",props:{resource:{required:!0,type:Object},fields:{required:!0,type:Array},mode:{required:!0,type:String},floatingReady:{required:!0,type:Boolean},updateHandler:{required:!0,type:Function}},emits:["viewRequested"],setup(e){const t=e,n=Innoclapps.resourceName("deals"),{form:o}=Qe(),a=V(!0),r=V(!1),s=V(!1),i=Le("synchronizeAndEmitUpdatedEvent"),u=Le("hydrateFields"),d=Le("totalCollapsableFields"),{t:m}=Pe(),{humanizeDuration:f,localizedDateTime:h}=it(),y=P(()=>t.floatingReady?`${m("core::app.created_at")} ${h(t.resource.created_at)}`:""),b=P(()=>m("deals::deal.been_in_stage_time",{time:f(t.resource.time_in_stages[t.resource.stage.id])}));function I(x,$){u({[x]:$}),o.fill(x,$.map(C=>C.id))}function w(x){r.value=!1,i({companies:x.company}),We(()=>{I("companies",t.resource.companies)})}function k(x){s.value=!1,i({contacts:x.contact}),We(()=>{I("contacts",t.resource.contacts)})}return(x,$)=>{const C=c("FieldsPlaceholder"),F=c("FieldsButtonCollapse"),T=c("FormFields"),S=c("DetailFields"),A=c("IText"),E=c("ITextDisplay"),B=c("CreateContactModal"),M=c("CreateCompanyModal"),N=c("IButton"),G=c("ISlideover");return g(),R(G,{id:"dealFloatingModal",title:e.resource.display_name,"sub-title":y.value,static:"",form:"",onSubmit:$[15]||($[15]=U=>e.updateHandler(v(o)))},{"modal-footer":p(()=>[_("div",C5e,[l(N,{variant:"secondary",disabled:!e.floatingReady,text:x.$t("core::app.view_record"),onClick:$[14]||($[14]=U=>x.$emit("viewRequested",U))},null,8,["disabled","text"]),e.mode==="edit"?(g(),R(N,{key:0,type:"submit",variant:"primary",loading:v(o).busy,text:x.$t("core::app.save"),disabled:!e.floatingReady||v(o).busy||!e.resource.authorizations.update},null,8,["loading","text","disabled"])):Z("",!0)])]),default:p(()=>[e.floatingReady?(g(),D("div",_5e,[_("div",{class:be(["mb-7 rounded-lg border px-4 py-3 md:px-5",{"border-primary-100 bg-primary-50/60 text-primary-800 dark:border-primary-400/20 dark:bg-primary-800/10 dark:text-primary-400":e.resource.status==="open","border-danger-100 bg-danger-50/50 text-danger-800 dark:border-danger-400/20 dark:bg-danger-800/10 dark:text-danger-400":e.resource.status==="lost","border-success-300/30 bg-success-50/50 text-success-800 dark:border-success-400/20 dark:bg-success-900/10 dark:text-success-400":e.resource.status==="won"}])},[_("div",w5e,[_("div",I5e,[l(d5,{"deal-id":e.resource.id,pipeline:e.resource.pipeline,"stage-id":e.resource.stage_id,status:e.resource.status,"authorized-to-update":e.resource.authorizations.update,onUpdated:$[0]||($[0]=U=>v(i)(U,!0))},null,8,["deal-id","pipeline","stage-id","status","authorized-to-update"])]),_("p",{class:"text-base/5 opacity-90 sm:text-sm/5 md:hidden",textContent:K(b.value)},null,8,x5e),l(f5,{class:"my-2 md:my-0 md:ml-auto","lost-popover-placement":"bottom-end","deal-id":e.resource.id,"deal-status":e.resource.status,onUpdated:$[1]||($[1]=U=>v(i)(U,!0))},null,8,["deal-id","deal-status"])]),_("p",{class:"-mt-1.5 hidden text-center text-base/5 opacity-90 sm:text-sm/5 md:block md:text-left",textContent:K(b.value)},null,8,k5e)],2),v(d)>0?(g(),R(F,{key:0,collapsed:a.value,"onUpdate:collapsed":$[2]||($[2]=U=>a.value=U),class:"mb-2 ml-auto",total:v(d)},null,8,["collapsed","total"])):Z("",!0),e.mode==="edit"?(g(),R(T,{key:1,fields:e.fields,form:v(o),"resource-name":v(n),"resource-id":e.resource.id,collapsed:a.value,"is-floating":"",onUpdateFieldValue:$[3]||($[3]=U=>v(o).fill(U.attribute,U.value)),onSetInitialValue:$[4]||($[4]=U=>v(o).set(U.attribute,U.value))},null,8,["fields","form","resource-name","resource-id","collapsed"])):(g(),R(S,{key:2,fields:e.fields,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,collapsed:a.value,"is-floating":"",onUpdated:$[5]||($[5]=U=>v(i)(U,!0))},null,8,["fields","resource-name","resource-id","resource","collapsed"])),te(_("div",$5e,null,512),[[fe,e.mode==="detail"]]),_("div",{class:be(["mt-6 space-y-6 sm:space-y-8",e.mode==="detail"?"sm:px-10":"px-1"])},[_("div",null,[l(ah,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:$[6]||($[6]=U=>(I("contacts",e.resource.contacts),v(i)({contacts:{id:U,_delete:!0}}))),onCreateRequested:$[7]||($[7]=U=>s.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(rh,{"float-mode":e.mode,"resource-name":v(n),"resource-id":e.resource.id,resource:e.resource,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onDissociated:$[8]||($[8]=U=>(I("companies",e.resource.companies),v(i)({companies:{id:U,_delete:!0}}))),onCreateRequested:$[9]||($[9]=U=>r.value=!0)},null,8,["float-mode","resource-name","resource-id","resource","show-create-button","show-dissociate-button"])]),_("div",null,[l(E,null,{default:p(()=>[ne(K(x.$t("core::app.attachments"))+" ",1),e.resource.media.length>0?(g(),R(A,{key:0,class:"ml-0.5 inline",text:"("+e.resource.media.length+")"},null,8,["text"])):Z("",!0)]),_:1}),l(Is,{"resource-name":v(n),"resource-id":e.resource.id,media:e.resource.media,"authorize-delete":e.resource.authorizations.update,"is-floating":"",onUploaded:$[10]||($[10]=U=>v(i)({media:[U]})),onDeleted:$[11]||($[11]=U=>v(i)({media:{id:U.id,_delete:!0}}))},null,8,["resource-name","resource-id","media","authorize-delete"])])],2),l(B,{visible:s.value,"onUpdate:visible":$[12]||($[12]=U=>s.value=U),overlay:!1,deals:[e.resource],onCreated:k,onRestored:k},null,8,["visible","deals"]),l(M,{visible:r.value,"onUpdate:visible":$[13]||($[13]=U=>r.value=U),overlay:!1,deals:[e.resource],onCreated:w,onRestored:w},null,8,["visible","deals"])])):(g(),R(C,{key:0}))]),_:1},8,["title","sub-title"])}}},T5e=["textContent"],E5e={__name:"DealPresentationCard",props:{card:Object},setup(e){const t=e,{orderedPipelines:n,findPipelineById:o}=Sa(),a=Pt(o(t.card.pipeline_id)),r=P(()=>({pipeline_id:a.value.id}));return(s,i)=>{const u=c("IDropdownButton"),d=c("IDropdownItem"),m=c("IDropdownMenu"),f=c("IDropdown"),h=c("PresentationChart");return g(),R(h,{card:e.card,"request-query-string":r.value},{actions:p(()=>[l(f,null,{default:p(()=>[l(u,{class:"md:mr-3",basic:""},{default:p(()=>[_("span",{class:"block max-w-32 truncate",textContent:K(a.value.name)},null,8,T5e)]),_:1}),l(m,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(n),y=>(g(),R(d,{key:y.id,text:y.name,active:a.value.id===y.id,onClick:b=>a.value=y},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["card","request-query-string"])}}},F5e={__name:"ResourceDealsPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},panel:{required:!0,type:Object}},setup(e){const t=Le("fetchResource"),n=V(!1);return(o,a)=>{const r=c("Panel");return g(),R(r,{panel:e.panel},{default:p(()=>[l(oh,{resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,"show-create-button":e.resource.authorizations.update,"show-dissociate-button":e.resource.authorizations.update,onCreateRequested:a[0]||(a[0]=s=>n.value=!0)},null,8,["resource","resource-name","resource-id","show-create-button","show-dissociate-button"]),n.value?(g(),R(jd,{key:0,"via-resource":e.resourceName,"parent-resource":e.resource,"go-to-list":!1,onAssociated:a[1]||(a[1]=s=>(v(t)(),n.value=!1)),onCreated:a[2]||(a[2]=({isRegularAction:s})=>(s&&(n.value=!1),v(t)())),onHidden:a[3]||(a[3]=s=>n.value=!1)},null,8,["via-resource","parent-resource"])):Z("",!0)]),_:1},8,["panel"])}}},A5e={__name:"DealsLostReasonsIndex",setup(e){const t=Innoclapps.resourceName("lost-reasons"),{fetchLostReasons:n}=m5();return(o,a)=>{const r=c("ICardHeading");return g(),R(Ui,{"resource-name":v(t),"with-cancel":!1,onCreated:v(n),onUpdated:v(n),onDeleted:v(n)},{header:p(()=>[l(r,{text:o.$t("deals::deal.lost_reasons.lost_reasons")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},R5e={class:"px-6"},D5e={__name:"DealsPipelinesIndex",setup(e){const{t}=Pe(),{orderedPipelinesForDraggable:n,deletePipeline:o}=Sa();async function a(r){await o(r),Innoclapps.success(t("deals::deal.pipeline.deleted"))}return(r,s)=>{const i=c("ICardHeading"),u=c("IButton"),d=c("ICardActions"),m=c("ICardHeader"),f=c("ITableHeader"),h=c("ITableRow"),y=c("ITableHead"),b=c("ITableCell"),I=c("ILink"),w=c("ITableRowAction"),k=c("ITableRowActions"),x=c("SortableDraggable"),$=c("ITable"),C=c("ICard"),F=c("RouterView");return g(),D(de,null,[l(m,null,{default:p(()=>[l(i,{text:r.$t("deals::deal.pipeline.pipelines")},null,8,["text"]),l(d,null,{default:p(()=>[l(u,{variant:"primary",icon:"PlusSolid",to:{name:"create-pipeline"},text:r.$t("deals::deal.pipeline.create")},null,8,["text"])]),_:1})]),_:1}),l(C,null,{default:p(()=>[_("div",R5e,[l($,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(y,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(h,null,{default:p(()=>[l(f,{class:"text-center",width:"5%"},{default:p(()=>[ne(K(r.$t("core::app.id")),1)]),_:1}),l(f,null,{default:p(()=>[ne(K(r.$t("deals::deal.pipeline.pipeline")),1)]),_:1}),l(f,{width:"8%"})]),_:1})]),_:1}),l(x,Ue(r.$draggable.common,{modelValue:v(n),"onUpdate:modelValue":s[0]||(s[0]=T=>hn(n)?n.value=T:null),"item-key":"id",tag:"tbody"}),{item:p(({element:T})=>[l(h,null,{default:p(()=>[l(b,{class:"text-center"},{default:p(()=>[ne(K(T.id),1)]),_:2},1024),l(b,null,{default:p(()=>[l(I,{class:"font-medium",to:{name:"edit-pipeline",params:{id:T.id}},text:T.name},null,8,["to","text"])]),_:2},1024),l(b,null,{default:p(()=>[l(k,null,{default:p(()=>[l(w,{icon:"PencilAlt",to:{name:"edit-pipeline",params:{id:T.id}},text:r.$t("core::app.edit")},null,8,["to","text"]),l(w,{icon:"Trash",text:r.$t("core::app.delete"),onClick:S=>r.$confirm(()=>a(T.id))},null,8,["text","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1},16,["modelValue"]),s[1]||(s[1]=_("tbody",null,null,-1))]),_:1})])]),_:1}),l(F)],64)}}},O5e={class:"space-y-8"},P5e={__name:"SettingsDeals",setup(e){const{form:t,submit:n,isReady:o}=Ao();return(a,r)=>{const s=c("ICardHeading"),i=c("ICardHeader"),u=c("IFormSwitchLabel"),d=c("IFormSwitchDescription"),m=c("IFormSwitch"),f=c("IFormSwitchField"),h=c("IFormSwitchGroup"),y=c("ICardBody"),b=c("ICard");return g(),D("div",O5e,[_("div",null,[l(D5e)]),_("div",null,[l(i,null,{default:p(()=>[l(s,{text:a.$t("deals::deal.deals")},null,8,["text"])]),_:1}),l(b,{overlay:!v(o)},{default:p(()=>[l(y,null,{default:p(()=>[l(h,null,{default:p(()=>[l(f,null,{default:p(()=>[l(u,{text:a.$t("deals::deal.settings.allow_lost_reason_enter")},null,8,["text"]),l(d,{text:a.$t("deals::deal.settings.allow_lost_reason_enter_info")},null,8,["text"]),l(m,{modelValue:v(t).allow_lost_reason_enter,"onUpdate:modelValue":r[0]||(r[0]=I=>v(t).allow_lost_reason_enter=I),onChange:v(n)},null,8,["modelValue","onChange"])]),_:1}),l(f,null,{default:p(()=>[l(u,{text:a.$t("deals::deal.settings.lost_reason_is_required")},null,8,["text"]),l(d,{text:a.$t("deals::deal.settings.lost_reason_is_required_info")},null,8,["text"]),l(m,{modelValue:v(t).lost_reason_is_required,"onUpdate:modelValue":r[1]||(r[1]=I=>v(t).lost_reason_is_required=I),onChange:v(n)},null,8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1},8,["overlay"])]),_("div",null,[l(A5e)])])}}},M5e={__name:"LostReasonField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("BaseFormField");return g(),R(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({fieldId:d})=>[l(cn,{field:e.field,label:e.field.label,"field-id":d,"validation-errors":e.validationErrors},{default:p(()=>[l(uh,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=m=>a.value=m),attribute:e.field.attribute},null,8,["modelValue","attribute"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},B5e={__name:"PipelineStageField",props:{field:{type:Object,required:!0},modelValue:{},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},emits:["update:modelValue","setInitialValue"],setup(e,{emit:t}){var f;const n=e,o=t,a=V(((f=n.field.value)==null?void 0:f.pipeline_id)||null),r=P(()=>i(a.value)),s=P(()=>r.value.length>0);function i(h){return n.field.options.filter(y=>y[n.field.dependsOn]==h)}async function u(h){a.value=h,We(()=>d(r.value[0]))}function d(h){o("update:modelValue",h&&h[n.field.valueKey]||null)}function m(){var h;o("setInitialValue",(h=n.field.value)==null?void 0:h.id)}return jt("field-pipeline_id-value-changed",u),m(),(h,y)=>{const b=c("IAlertBody"),I=c("IAlert"),w=c("IText"),k=c("ICustomSelect"),x=c("BaseSelectField");return g(),R(x,{field:e.field,value:e.modelValue,options:r.value,"is-floating":e.isFloating},{default:p(({readonly:$,fieldId:C,lazyLoadingOptions:F,filterable:T,onSearch:S,onDropdownOpen:A,noOptionsText:E,headerText:B,selectValue:M,handleSelectInputChange:N})=>[l(cn,{field:e.field,label:e.field.label,"field-id":C,"validation-errors":e.validationErrors},{default:p(()=>[s.value?Z("",!0):(g(),R(I,{key:0,class:"mb-2"},{default:p(()=>[l(b,null,{default:p(()=>[ne(K(h.$t("deals::deal.pipeline.missing_stages")),1)]),_:1})]),_:1})),l(k,Ue({"model-value":M,class:s.value?"":"hidden","input-id":C,disabled:$,filterable:T,options:r.value,loading:F,name:e.field.attribute,label:e.field.labelKey},e.field.attributes,{onSearch:S,onOpen:A,"onUpdate:modelValue":G=>(d(G),N(G))}),{"no-options":p(()=>[ne(K(E),1)]),header:p(()=>[te(l(w,{class:"px-3 py-2",text:B},null,8,["text"]),[[fe,B]])]),_:2},1040,["model-value","class","input-id","disabled","filterable","options","loading","name","label","onSearch","onOpen","onUpdate:modelValue"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["field","value","options","is-floating"])}}},N5e={};function V5e(e,t){const n=c("IndexTextareaField");return g(),R(n)}const L5e=an(N5e,[["render",V5e]]),q5e=["textContent"],U5e=["textContent"],j5e={__name:"PipelineStageField",props:["column","row","field","resourceName","resourceId"],setup(e){return(t,n)=>{const o=c("BaseIndexField");return g(),R(o,{"resource-name":e.resourceName,"resource-id":e.resourceId,row:e.row,field:e.field},{default:p(()=>{var a,r;return[_("span",{class:"font-medium",textContent:K((a=e.field.value)==null?void 0:a.name)},null,8,q5e),_("span",{class:be(["text-sm text-neutral-500 dark:text-neutral-400 sm:text-xs",e.column.wrap?"block":"ml-1"]),textContent:K((r=e.row.pipeline)==null?void 0:r.name)},null,10,U5e)]}),_:1},8,["resource-name","resource-id","row","field"])}}},z5e={__name:"DealsPipelinesCreate",setup(e){const t=wt(),{addPipeline:n}=Sa(),{resetStoreState:o}=qe(),{form:a}=Qe({name:null});function r(){a.post("/pipelines").then(s=>{n(s),o(),t.push("/settings/deals/pipelines/"+s.id+"/edit")})}return(s,i)=>{const u=c("IFormInput"),d=c("IFormError"),m=c("IFormGroup"),f=c("IModal");return g(),R(f,{size:"sm","ok-text":s.$t("core::app.create"),"ok-disabled":v(a).busy,title:s.$t("deals::deal.pipeline.create"),form:"",visible:"",onSubmit:r,onShown:i[1]||(i[1]=()=>s.$refs.inputNameRef.focus()),onHidden:s.$router.back},{default:p(()=>[l(m,{"label-for":"name",label:s.$t("deals::deal.pipeline.name"),required:""},{default:p(()=>[l(u,{id:"name",ref:"inputNameRef",modelValue:v(a).name,"onUpdate:modelValue":i[0]||(i[0]=h=>v(a).name=h),name:"name",type:"text"},null,8,["modelValue"]),l(d,{error:v(a).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}},H5e={class:"px-6"},W5e={class:"flex space-x-2"},G5e={class:"relative flex grow"},K5e={class:"absolute inset-y-0 left-0 flex cursor-move items-center pl-3","data-sortable-handle":"stage-order"},Z5e={key:0,class:"absolute inset-y-0 left-11 hidden w-14 truncate px-1 sm:flex sm:items-center sm:justify-center"},Y5e={class:"flex items-center"},X5e={class:"mr-4 grow"},Q5e=["onUpdate:modelValue"],J5e={__name:"DealsPipelinesEdit",setup(e){const{t}=Pe(),n=Ct(),{resetStoreState:o}=qe(),{setPipeline:a,fetchPipeline:r}=Sa(),{updateResource:s}=qt("pipelines"),i=V(null),u=V({}),d=V(!1),{form:m}=Qe({name:null,stages:[],visibility_group:{type:"all",depends_on:[]}});async function f(){m.stages=Fn(m.stages,(k,x)=>(k.display_order=x,k));const w=await s(m,n.params.id,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}});a(w.id,w),o(),m.stages=w.stages,Innoclapps.success(t("deals::deal.pipeline.updated"))}function h(){m.stages.push({name:"",win_probability:100}),We(()=>{i.value.focus()})}function y(w){m.stages.splice(w,1)}async function b(w){let k=m.stages[w].id;if(!k){y(w);return}await Innoclapps.confirm(),await Innoclapps.request().delete(`/pipeline-stages/${k}`),o(),y(w)}async function I(){try{const w=await r(n.params.id,{params:{with:"visibilityGroup.users;visibilityGroup.teams"}});u.value=w,m.fill("name",w.name),m.fill("stages",w.stages),w.visibility_group&&m.fill("visibility_group",w.visibility_group),m.stages.length===0&&h()}finally{d.value=!0}}return I(),(w,k)=>{const x=c("ICardHeading"),$=c("ICardHeader"),C=c("IFormInput"),F=c("IFormError"),T=c("IFormGroup"),S=c("IAlertBody"),A=c("IAlert"),E=c("ICardBody"),B=c("ITableHeader"),M=c("ITableRow"),N=c("ITableHead"),G=c("Icon"),U=c("IButton"),j=c("ITableCell"),O=c("SortableDraggable"),H=c("ITable"),W=c("ICardFooter"),X=c("ICard");return g(),D(de,null,[l($,null,{default:p(()=>[l(x,{text:w.$t("deals::deal.pipeline.edit")},null,8,["text"])]),_:1}),l(X,{as:"form",overlay:!d.value,onSubmit:ot(f,["prevent"])},{default:p(()=>[l(E,null,{default:p(()=>[l(T,{"label-for":"name",label:w.$t("deals::deal.pipeline.name"),required:""},{default:p(()=>[l(C,{id:"name",modelValue:v(m).name,"onUpdate:modelValue":k[0]||(k[0]=q=>v(m).name=q),name:"name",type:"text"},null,8,["modelValue"]),l(F,{error:v(m).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(T,{class:"mt-4"},{default:p(()=>[l(Bd,{type:v(m).visibility_group.type,"onUpdate:type":k[1]||(k[1]=q=>v(m).visibility_group.type=q),dependsOn:v(m).visibility_group.depends_on,"onUpdate:dependsOn":k[2]||(k[2]=q=>v(m).visibility_group.depends_on=q),disabled:u.value.is_primary},null,8,["type","dependsOn","disabled"])]),_:1}),l(A,{class:"mt-4",show:d.value&&u.value.is_primary},{default:p(()=>[l(S,null,{default:p(()=>[ne(K(w.$t("deals::deal.pipeline.visibility_group.primary_restrictions")),1)]),_:1})]),_:1},8,["show"])]),_:1}),_("div",H5e,[l(H,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(N,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(M,null,{default:p(()=>[l(B,null,{default:p(()=>[ne(K(w.$t("deals::deal.stage.name")),1)]),_:1}),l(B,null,{default:p(()=>[ne(K(w.$t("deals::deal.stage.win_probability")),1)]),_:1})]),_:1})]),_:1}),l(O,Ue({modelValue:v(m).stages,"onUpdate:modelValue":k[3]||(k[3]=q=>v(m).stages=q),tag:"tbody"},w.$draggable.common,{handle:"[data-sortable-handle='stage-order']","item-key":(q,L)=>L}),{item:p(({element:q,index:L})=>[l(M,null,{default:p(()=>[l(j,{class:"w-full sm:w-auto"},{default:p(()=>[_("div",W5e,[_("div",G5e,[_("div",K5e,[l(G,{icon:"Selector",class:"size-5 text-neutral-500"})]),q.id?(g(),D("div",Z5e," ID: "+K(q.id),1)):Z("",!0),l(C,{ref_key:"stageNameInputRef",ref:i,modelValue:v(m).stages[L].name,"onUpdate:modelValue":ee=>v(m).stages[L].name=ee,class:be(q.id?"pl-10 sm:pl-28":"!pl-10"),onKeydown:mo(ot(h,["prevent"]),["enter"])},null,8,["modelValue","onUpdate:modelValue","class","onKeydown"])]),l(U,{icon:"Trash",basic:"",onClick:ee=>b(L)},null,8,["onClick"])]),l(F,{error:v(m).getError("stages."+L+".name")},null,8,["error"])]),_:2},1024),l(j,null,{default:p(()=>[_("div",Y5e,[_("div",X5e,[te(_("input",{"onUpdate:modelValue":ee=>v(m).stages[L].win_probability=ee,type:"range",class:"h-2 w-full appearance-none rounded-lg border border-neutral-200 bg-neutral-200 focus:bg-neutral-300 focus:outline-none dark:border-neutral-500 dark:bg-neutral-700 dark:focus:bg-neutral-800",min:1,max:100},null,8,Q5e),[[pa,v(m).stages[L].win_probability]])]),_("div",null,K(v(m).stages[L].win_probability),1)]),l(F,{error:v(m).getError("stages."+L+".win_probability")},null,8,["error"])]),_:2},1024)]),_:2},1024)]),_:1},16,["modelValue","item-key"]),_("tfoot",null,[l(M,null,{default:p(()=>[l(j,{colspan:"2",class:"px-5 py-3"},{default:p(()=>[l(U,{variant:"primary",text:w.$t("deals::deal.stage.add"),soft:"",onClick:h},null,8,["text"])]),_:1})]),_:1})])]),_:1})]),l(W,{class:"text-right"},{default:p(()=>[l(U,{type:"submit",variant:"primary",disabled:v(m).busy,text:w.$t("core::app.save"),onClick:f},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}},e$e={class:"board-top px-4 py-3 sm:px-6"},t$e=["id"],n$e={__name:"BaseBoard",props:{boardClass:[String,Array,Object],boardId:{required:!0,type:String}},setup(e){return(t,n)=>(g(),D("div",null,[_("div",e$e,[Ee(t.$slots,"top")]),_("div",{id:e.boardId,class:be(["board block h-[calc(100vh-(var(--navbar-height)+var(--board-top-height,60px)))] space-x-4 overflow-x-scroll whitespace-nowrap px-4 pb-2 sm:px-6",e.boardClass])},[Ee(t.$slots,"default")],10,t$e)]))}},o$e={class:"inline-flex h-full w-80 flex-col overflow-y-hidden rounded-lg border border-neutral-300/40 bg-neutral-200/40 align-top shadow dark:border-neutral-500/30 dark:bg-neutral-900"},a$e={class:"px-3 py-2"},r$e={class:"flex items-center"},l$e=["textContent"],s$e=["id"],i$e={class:"m-2 overflow-hidden whitespace-normal rounded-md bg-white shadow dark:bg-neutral-800"},u$e={class:"px-4 py-5 sm:p-6"},c$e={__name:"BaseBoardColumn",props:pt({name:{required:!0,type:String},columnId:{required:!0,type:Number},boardId:{required:!0,type:String},loader:{required:!0,type:Function},move:Function},{modelValue:{type:Array,required:!0},modelModifiers:{}}),emits:pt(["dragStart","dragEnd","updated","added","removed"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(m){n.loader(n.columnId,m)}function s(m){o("dragStart",m)}function i(m){o("dragEnd",m)}function u(m,f){if(n.move&&n.move(m,f)===!1)return!1}function d(m){m.removed&&o("removed",{columnId:n.columnId,event:m}),m.moved&&o("updated",{columnId:n.columnId,event:m}),m.added&&(o("added",{columnId:n.columnId,event:m}),o("updated",{columnId:n.columnId,event:m}))}return(m,f)=>{const h=c("SortableDraggable");return g(),D("div",o$e,[_("div",a$e,[_("div",r$e,[Ee(m.$slots,"header",{},()=>[_("div",{class:"mr-auto truncate text-base font-medium text-neutral-800 dark:text-white sm:text-sm",textContent:K(e.name)},null,8,l$e),_("div",null,[Ee(m.$slots,"actions")])])]),Ee(m.$slots,"after-header")]),_("div",{id:"boardColumn"+e.columnId,class:"h-auto overflow-y-auto overflow-x-hidden"},[l(h,Ue({...m.$draggable.scrollable,delay:5,preventOnFilter:!1,itemKey:y=>y.id,emptyInsertThreshold:100,move:u,group:{name:e.boardId}},{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=y=>a.value=y),"data-column":e.columnId,onStart:s,onEnd:i,onChange:d}),{item:p(({element:y})=>[_("div",i$e,[Ee(m.$slots,"card",{card:y},()=>[_("div",u$e,K(y.display_name),1)])])]),_:3},16,["modelValue","data-column"])],8,s$e),f[2]||(f[2]=_("div",{class:"flex items-center p-3"},null,-1)),l(Ir,{"scroll-element":"#boardColumn"+e.columnId,onHandle:f[1]||(f[1]=y=>r(y))},null,8,["scroll-element"])])}}},d$e={class:"h-dropper fixed bottom-0 left-0 right-0 border-t border-neutral-300 bg-white shadow-sm dark:border-neutral-700 dark:bg-neutral-800 sm:left-56"},m$e={class:"flex justify-end"},f$e={class:"h-dropper relative w-1/3 border-t-2 border-success-500 sm:w-1/5"},p$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},v$e={class:"h-dropper relative w-1/3 border-t-2 border-danger-500 sm:w-1/5"},h$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},g$e={class:"h-dropper relative w-1/3 border-t-2 border-neutral-800 sm:w-1/5"},b$e={class:"dropper-header h-dropper absolute inset-0 flex place-content-center items-center font-medium text-neutral-600 dark:text-neutral-200"},y$e={__name:"DealsBoardBottomDropper",props:{resourceId:{required:!0}},emits:["deleted","won","refreshRequested"],setup(e,{emit:t}){const n=t,o=V(null),{form:a}=Qe({lost_reason:null},{resetOnSuccess:!0}),{updateResource:r,deleteResource:s}=qt(Innoclapps.resourceName("deals"));async function i(b){if(b.added)try{await Innoclapps.confirm(),await s(b.added.element.id),n("deleted",b.added.element)}catch{u()}}function u(){n("refreshRequested")}function d(b){b.added&&(o.value=b.added.element.id,Innoclapps.dialog().show("markAsLostModal"))}function m(){a.reset(),a.errors.clear(),o.value=null,u()}function f(b){r(a.fill({status:"lost"}),b).then(()=>Innoclapps.dialog().hide("markAsLostModal"))}function h(b){r(a.fill({status:"won"}),b).then(I=>{xp(),n("won",I),u()}).catch(()=>u())}function y(b){b.added&&h(b.added.element.id)}return(b,I)=>{const w=c("IFormError"),k=c("IFormGroup"),x=c("IModal"),$=c("SortableDraggable"),C=ze("t");return g(),D("div",d$e,[l(x,{id:"markAsLostModal","ok-variant":"danger",size:"sm",title:b.$t("deals::deal.actions.mark_as_lost"),"ok-disabled":v(a).busy,"ok-text":b.$t("deals::deal.actions.mark_as_lost"),form:"",onSubmit:I[1]||(I[1]=F=>f(o.value)),onHidden:m},{default:p(()=>[l(k,{"label-for":"lost_reason",label:b.$t("deals::deal.lost_reasons.lost_reason"),optional:!b.$scriptConfig("lost_reason_is_required"),required:b.$scriptConfig("lost_reason_is_required")},{default:p(()=>[l(uh,{modelValue:v(a).lost_reason,"onUpdate:modelValue":I[0]||(I[0]=F=>v(a).lost_reason=F)},null,8,["modelValue"]),l(w,{error:v(a).getError("lost_reason")},null,8,["error"])]),_:1},8,["label","optional","required"])]),_:1},8,["title","ok-disabled","ok-text"]),_("div",m$e,[_("div",f$e,[l($,{class:"h-dropper dropper-won dropper","model-value":[],"item-key":F=>F.id,group:{group:"won",put:!0,pull:!1},onChange:y},{item:p(()=>I[2]||(I[2]=[_("div",null,null,-1)])),header:p(()=>[te(_("div",p$e,null,512),[[C,"deals::deal.status.won"]])]),_:1},8,["item-key"])]),_("div",v$e,[l($,{class:"h-dropper dropper-lost dropper","model-value":[],"item-key":F=>F.id,group:{name:"lost",put:!0,pull:!1},onChange:d},{item:p(()=>I[3]||(I[3]=[_("div",null,null,-1)])),header:p(()=>[te(_("div",h$e,null,512),[[C,"deals::deal.status.lost"]])]),_:1},8,["item-key"])]),_("div",g$e,[l($,{class:"h-dropper dropper-delete dropper","model-value":[],"item-key":F=>F.id,group:{name:"delete",put:!0,pull:!1},async:"",onChange:i},{item:p(()=>I[4]||(I[4]=[_("div",null,null,-1)])),header:p(()=>[te(_("div",b$e,null,512),[[C,"core::app.delete"]])]),_:1},8,["item-key"])])])])}}},_$e={class:"flex"},w$e={class:"grow truncate"},I$e={class:"-mt-0.5 flex text-sm"},x$e={class:"px-4 py-2 text-sm sm:text-xs"},k$e={class:"text-neutral-500 dark:text-neutral-300"},$$e=["textContent"],C$e=["onSubmit"],S$e=["textContent"],T$e={class:"flex flex-col items-center space-y-1"},E$e={class:"px-3 py-2 text-xs"},F$e={class:"text-neutral-500 dark:text-neutral-300"},A$e=["textContent"],R$e={key:0,class:"mt-1"},D$e={class:"text-neutral-500 dark:text-neutral-300"},O$e=["textContent"],Bu=!1,P$e={__name:"DealsBoardCard",props:{dealId:{required:!0,type:Number},displayName:{required:!0,type:String},amount:{required:!0,type:[String,Number]},path:{required:!0,type:String},status:{required:!0,type:String},incompleteActivitiesCount:{required:!0,type:Number},productsCount:{required:!0,type:Number},expectedCloseDate:String,nextActivityDate:String,swatchColor:String,fallsBehindExpectedCloseDate:Boolean,updatedAt:String,createdAt:String},emits:["createActivityRequested","update:amount","update:productsCount","update:swatchColor"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("deals"),r=V(!1),{localizedDate:s,localizedDateTime:i,isMidnight:u}=it(),{formatMoney:d}=lo(),{floatResourceInDetailMode:m,floatResourceInEditMode:f}=Ro(),{form:h}=Qe({amount:n.amount}),{updateResource:y}=qt(a),b=P(()=>{const M=["bottom-hidden group px-4 py-2"];return n.fallsBehindExpectedCloseDate&&M.push("bg-warning-200/20","dark:bg-warning-400/30"),n.status==="lost"?M.push("bg-danger-50","dark:bg-danger-500/30"):n.status==="won"&&M.push("bg-success-50/70","dark:bg-success-500/30"),{class:M}}),I=P(()=>d(n.amount)),w=P(()=>s(n.expectedCloseDate)),k=P(()=>i(n.createdAt)),x=P(()=>i(n.updatedAt)),$=P(()=>u(n.nextActivityDate)?s(n.nextActivityDate):i(n.nextActivityDate));function C(){m({resourceName:a,resourceId:n.dealId})}function F(M){r.value=!0,M()}function T(){f({resourceName:a,resourceId:n.dealId})}function S(){return y(h,n.dealId).then(M=>{o("update:amount",M.amount),h.set("amount",M.amount)})}function A(M){n.productsCount>0&&(M.preventDefault(),B())}async function E(M){o("update:amount",M.total),h.set("amount",M.total),o("update:productsCount",M.products.length)}function B(){r.value=!0}return(M,N)=>{const G=c("ILink"),U=c("IDropdownButton"),j=c("IDropdownSeparator"),O=c("IDropdownItem"),H=c("IDropdownMenu"),W=c("IDropdown"),X=c("IPopoverButton"),q=c("IFormNumericInput"),L=c("IFormError"),ee=c("IFormGroup"),ce=c("Icon"),ue=c("IPopoverBody"),oe=c("IButton"),re=c("IPopoverFooter"),Y=c("IPopoverPanel"),ae=c("IPopover"),se=c("IDropdownMinimal"),xe=c("IColorSwatch"),le=ze("t");return g(),D(de,null,[e.swatchColor?(g(),D("div",{key:0,class:"bottom-hidden p-2",style:Nt({background:e.swatchColor})},null,4)):Z("",!0),_("div",zt(Qt(b.value)),[_("div",_$e,[_("div",w$e,[l(G,{class:"font-medium",href:e.path,text:e.displayName,basic:"",onClick:C},null,8,["href","text"]),_("div",I$e,[l(W,{portal:Bu,offset:5},{default:p(()=>[l(U,{as:"button",class:be({"text-warning-500":e.incompleteActivitiesCount>0,"text-success-500":e.incompleteActivitiesCount===0}),"no-caret":""},{default:p(()=>[ne(K(M.$t("activities::activity.count",e.incompleteActivitiesCount,{count:e.incompleteActivitiesCount})),1)]),_:1},8,["class"]),l(H,null,{default:p(()=>[e.nextActivityDate?(g(),D(de,{key:0},[_("div",x$e,[te(_("p",k$e,null,512),[[le,"activities.activity.next_activity_date"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:K($.value)},null,8,$$e)]),l(j)],64)):Z("",!0),l(O,{icon:"Clock",text:M.$t("activities::activity.create"),onClick:N[0]||(N[0]=ge=>M.$emit("createActivityRequested",e.dealId))},null,8,["text"])]),_:1})]),_:1}),r.value?(g(),R(Ld,{key:0,"resource-name":v(a),"resource-id":e.dealId,visible:"",prefetch:"",onSaved:E,onHidden:N[1]||(N[1]=ge=>r.value=!1)},null,8,["resource-name","resource-id"])):Z("",!0),l(ae,{portal:Bu},{default:p(({hide:ge})=>[l(X,{class:"ml-2",text:I.value,link:"",basic:"",onClick:A},null,8,["text"]),l(Y,{class:"w-80"},{default:p(()=>[l(ue,null,{default:p(()=>[_("form",{onSubmit:ot(ve=>S().then(ge),["prevent"])},[l(ee,{"label-for":"editDealAmount",label:M.$t("deals::fields.deals.amount"),required:""},{default:p(()=>[l(q,{id:"editDealAmount",modelValue:v(h).amount,"onUpdate:modelValue":N[2]||(N[2]=ve=>v(h).amount=ve)},null,8,["modelValue"]),l(L,{error:v(h).getError("amount")},null,8,["error"])]),_:1},8,["label"]),l(G,{class:"inline-flex items-center",onClick:ve=>F(ge)},{default:p(()=>[ne(K(M.$t("billable::product.manage"))+" ",1),l(ce,{icon:"Window",class:"ml-2 mt-px size-4"})]),_:2},1032,["onClick"])],40,C$e)]),_:2},1024),l(re,{class:"flex justify-end space-x-2"},{default:p(()=>[l(oe,{disabled:v(h).busy,text:M.$t("core::app.cancel"),basic:"",onClick:ge},null,8,["disabled","text","onClick"]),l(oe,{variant:"primary",loading:v(h).busy,disabled:v(h).busy,text:M.$t("core::app.save"),onClick:ve=>S().then(ge)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)]),_:2},1024)]),_:1})]),e.expectedCloseDate?(g(),D("p",{key:0,class:be(["-mt-1 text-sm/6 sm:text-xs/6",e.fallsBehindExpectedCloseDate?"animate-[pulse_4s_cubic-bezier(0.4,_0,_0.6,_1)_infinite] text-warning-600 dark:text-warning-300":"text-neutral-500 dark:text-neutral-300"]),textContent:K(w.value)},null,10,S$e)):Z("",!0)]),_("div",T$e,[l(se,{"items-class":"min-w-[180px]",placement:"bottom-end",portal:Bu,small:""},{default:p(()=>[_("div",E$e,[te(_("p",F$e,null,512),[[le,"core::app.created_at"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:K(k.value)},null,8,A$e),e.updatedAt&&e.updatedAt!==e.createdAt?(g(),D("div",R$e,[te(_("p",D$e,null,512),[[le,"core::app.updated_at"]]),_("p",{class:"font-medium text-neutral-700 dark:text-neutral-100",textContent:K(x.value)},null,8,O$e)])):Z("",!0)]),l(j),l(O,{icon:"Clock",text:M.$t("activities::activity.create"),onClick:N[3]||(N[3]=ge=>M.$emit("createActivityRequested",e.dealId))},null,8,["text"]),l(O,{icon:"Eye",text:M.$t("core::app.view_record"),to:e.path},null,8,["text","to"]),l(O,{icon:"PencilAlt",text:M.$t("core::app.edit")+" "+M.$t("deals::deal.deal"),onClick:T},null,8,["text"])]),_:1}),l(ae,{placement:"bottom-end",portal:Bu,offset:0},{default:p(()=>[N[4]||(He(-1),(N[4]=l(X,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"ColorSwatch",basic:"",small:""})).cacheIndex=4,He(1),N[4]),l(Y,{class:"w-56"},{default:p(()=>[l(ue,null,{default:p(()=>[l(xe,{"model-value":e.swatchColor,swatches:M.$scriptConfig("favourite_colors"),customable:!1,onInput:N[5]||(N[5]=ge=>M.$emit("update:swatchColor",ge))},null,8,["model-value","swatches"])]),_:1})]),_:1})]),_:1})])])],16)],64)}}},M$e={class:"flex"},B$e={class:"mr-2 grow"},N$e={value:"expected_close_date"},V$e={value:"created_at"},L$e={value:"amount"},q$e={value:"name"},U$e={value:"asc"},j$e={value:"desc"},z$e={__name:"DealsBoardSortOptions",emits:["applied"],setup(e,{emit:t}){const n=t,o=V({field:null,direction:"asc"});function a(){Innoclapps.dialog().hide("boardSortModal")}function r(){n("applied",o.value),a()}return(s,i)=>{const u=c("ITextDark"),d=c("IFormSelect"),m=c("IModal"),f=ze("t");return g(),R(m,{id:"boardSortModal",size:"sm","ok-disabled":!o.value.field,"ok-text":s.$t("core::app.apply"),"hide-header":"",form:"",onSubmit:r},{default:p(()=>[l(u,{class:"mb-2 font-semibold"},{default:p(()=>[ne(K(s.$t("deals::deal.sort_by")),1)]),_:1}),_("div",M$e,[_("div",B$e,[l(d,{modelValue:o.value.field,"onUpdate:modelValue":i[0]||(i[0]=h=>o.value.field=h)},{default:p(()=>[te(_("option",N$e,null,512),[[f,"deals::fields.deals.expected_close_date"]]),te(_("option",V$e,null,512),[[f,"core::app.creation_date"]]),te(_("option",L$e,null,512),[[f,"deals::fields.deals.amount"]]),te(_("option",q$e,null,512),[[f,"deals::deal.name"]])]),_:1},8,["modelValue"])]),_("div",null,[l(d,{modelValue:o.value.direction,"onUpdate:modelValue":i[1]||(i[1]=h=>o.value.direction=h)},{default:p(()=>[_("option",U$e,"Asc ("+K(s.$t("core::app.ascending"))+")",1),_("option",j$e,"Desc ("+K(s.$t("core::app.descending"))+")",1)]),_:1},8,["modelValue"])])])]),_:1},8,["ok-disabled","ok-text"])}}},H$e={class:"space-x-0.5"},p5={__name:"DealsNavbarViewSelector",props:{active:{type:String,required:!0}},setup(e){return(t,n)=>{const o=c("IButton"),a=ze("i-tooltip");return g(),D("div",H$e,[te(l(o,{icon:"TableCells",to:{name:"deal-index"},active:e.active==="index",basic:""},null,8,["active"]),[[a,t.$t("core::app.list_view"),void 0,{bottom:!0}]]),te(l(o,{icon:"ViewColumns",to:{name:"deal-board"},active:e.active==="board",basic:""},null,8,["active"]),[[a,t.$t("deals::board.board"),void 0,{bottom:!0}]])])}}},W$e=["textContent"],G$e={class:"flex justify-between rounded-lg border border-neutral-300 p-3 text-sm dark:border-neutral-500/30"},K$e=["textContent"],Z$e={"data-sortable-handle":"pipelines-order",class:"cursor-move"},Y$e={class:"text-right"},v5=Object.assign({inheritAttrs:!1},{__name:"DealsPipelinesDropdown",emits:["activated","changed"],setup(e,{emit:t}){const n=t,o=V(!1),a=V(null),{orderedPipelinesForDraggable:r}=Sa(),s=qi("deals",{pipeline_id:null},null,{mergeDefaults:!0});a.value=s.value.pipeline_id||r.value[0].id,n("activated",a.value);const i=P(()=>r.value.find(({id:m})=>m===parseInt(a.value))||{}),u=P(()=>{var m;return!!((m=i.value.authorizations)!=null&&m.update)});function d(m){a.value=m,s.value.pipeline_id=m,n("changed",m)}return(m,f)=>{const h=c("IDropdownButton"),y=c("IDropdownItem"),b=c("IDropdownSeparator"),I=c("IDropdownMenu"),w=c("IDropdown"),k=c("ITextDisplay"),x=c("Icon"),$=c("SortableDraggable"),C=c("IButton"),F=c("IModal");return g(),D(de,null,[l(w,Ue({"adaptive-width":""},m.$attrs),{default:p(()=>[l(h,{variant:"secondary",class:"w-full truncate"},{default:p(()=>[_("span",{class:"truncate",textContent:K(i.value.name)},null,8,W$e)]),_:1}),l(I,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(r),T=>(g(),R(y,{key:T.id,text:T.name,active:a.value===T.id,onClick:S=>d(T.id)},null,8,["text","active","onClick"]))),128)),v(r).length>1||u.value?(g(),D(de,{key:0},[l(b),v(r).length>1?(g(),R(y,{key:0,class:"font-medium",icon:"Bars3BottomLeft",text:m.$t("deals::deal.pipeline.reorder"),onClick:f[0]||(f[0]=T=>o.value=!0)},null,8,["text"])):Z("",!0),u.value?(g(),R(y,{key:1,class:"font-medium",icon:"PencilAlt",to:{name:"edit-pipeline",params:{id:i.value.id}},text:m.$t("deals::deal.pipeline.edit")},null,8,["to","text"])):Z("",!0)],64)):Z("",!0)]),_:1})]),_:1},16),l(F,{visible:o.value,"onUpdate:visible":f[3]||(f[3]=T=>o.value=T),size:"sm","hide-header":""},{"modal-footer":p(({cancel:T})=>[_("div",Y$e,[l(C,{variant:"secondary",text:m.$t("core::app.hide"),onClick:T},null,8,["text","onClick"])])]),default:p(()=>[l(k,{class:"mb-2"},{default:p(()=>[ne(K(m.$t("deals::deal.pipeline.reorder")),1)]),_:1}),l($,Ue({modelValue:v(r),"onUpdate:modelValue":f[1]||(f[1]=T=>hn(r)?r.value=T:null),"item-key":"id",class:"space-y-2 pb-2 last:pb-0",handle:"[data-sortable-handle='pipelines-order']"},m.$draggable.common,{onChange:f[2]||(f[2]=T=>v(s).pipeline_id=null)}),{item:p(({element:T})=>[_("div",G$e,[_("p",{class:"font-medium text-neutral-700 dark:text-neutral-200",textContent:K(T.name)},null,8,K$e),_("div",Z$e,[l(x,{icon:"Selector",class:"size-5 text-neutral-500"})])])]),_:1},16,["modelValue"])]),_:1},8,["visible"])],64)}}}),X$e={class:"sm:flex sm:flex-wrap sm:items-center"},Q$e={key:0,class:"ml-0 mt-1 space-y-2 sm:ml-4 sm:mt-0 md:flex md:items-center md:space-x-3.5 md:space-y-0"},J$e={class:"mt-4 flex w-full flex-wrap justify-between sm:ml-auto sm:mt-0 sm:w-auto md:justify-end"},eCe={class:"w-52"},tCe={class:"-mt-1 flex items-center text-sm"},nCe=["textContent"],oCe={key:1,class:"inline-flex items-center text-neutral-600 dark:text-neutral-300"},aCe=["textContent"],rCe=["textContent"],Zs="deals",lCe={__name:"DealsBoard",setup(e){const t={field:"board_order",direction:"asc"},{t:n}=Pe(),{setLoading:o,isLoading:a}=Cn(),{formatMoney:r}=lo(),s=Zs,i=V({}),u=V({q:""}),d=V(null),m=V(null),f=V(!1),h=V(!1),y=Pt(new Map),b=V(0),I=V(t),w=V(!1),k=V(!1),x=V(null),{findPipelineById:$}=Sa(),{availableRules:C,queryBuilderRules:F,hasRules:T,rulesAreValid:S,findRule:A}=Ua(s),{views:E}=ka(s),B=P(()=>$(x.value)||{});Se(B,(ie,me)=>{Object.keys(me).length&&re()});const M=P(()=>{var ie,me;return((me=(ie=A("status"))==null?void 0:ie.query)==null?void 0:me.value)==="lost"}),N=P(()=>{var ie,me;return((me=(ie=A("status"))==null?void 0:ie.query)==null?void 0:me.value)==="won"}),G=P(()=>N.value||M.value),U=P(()=>"/deals/board/"+B.value.id),j=P(()=>{let ie={},me=[];return ie.pipeline=B.value,me.push("pipeline_id"),m.value&&(ie["stage-id"]=m.value,me.push("stage_id")),ie["hidden-fields"]=me,ie});function O(){return{order:I.value,filters:S.value?F.value:[],...u.value}}function H(ie){if(!ie.draggedContext.element.authorizations.update)return!1}async function W(ie){I.value=ie,await Y(),I.value=t,y.value.forEach(se),Innoclapps.info(n("deals::board.columns_sorted"))}async function X(){let ie=await Innoclapps.request(`/${Zs}/table/settings`);C.value=ie.data.rules,E.value=ie.data.views,o(!1),k.value=!0}function q(){b.value>0&&Y(),m.value=null,b.value=0}function L(ie){m.value=parseInt(ie.id),f.value=!0}function ee(){f.value=!0}function ce(ie){b.value++,ie.isRegularAction&&(f.value=!1)}function ue(){Nr(y)}async function oe(ie,me){let Ce=y.value.get(ie);Object.hasOwn(Ce,"infinityState")||(Ce.infinityState=me),Ce.page+=1;const{data:ke}=await Innoclapps.request(`${U.value}/${Ce.id}`,{params:{...O(),page:Ce.page}});ke.cards.length===0?me.complete():(y.value.set(ke.id,Object.assign(y.value.get(ke.id),pr(ke,["cards","summary"]))),ke.cards.forEach(Be=>y.value.get(ke.id).cards.push(Be)),me.loaded()),Nr(y)}function re(){Y(!1)}async function Y(ie=!0){let me={};if(ie){let Ce={};y.value.forEach(ke=>{Ce[ke.id]=ke.page}),u.value.pages=Ce}else delete u.value.pages,y.value.forEach(Ce=>{Ce.infinityState&&(Ce.infinityState.pause(),me[Ce.id]=Ce.infinityState)});o(!0);try{const{data:Ce}=await Innoclapps.request(U.value,{params:O()});return ie||(y.value=new Map,i.value={}),Ce.forEach(ke=>{var Be;ke.page=ie&&((Be=y.value.get(ke.id))==null?void 0:Be.page)||1,y.value.set(ke.id,pr(ke,["summary"])),We(()=>{zn(()=>{Object.hasOwn(me,ke.id)&&(y.value.set(ke.id,Object.assign(y.value.get(ke.id),{infinityState:me[ke.id]})),y.value.get(ke.id).infinityState.resume(),delete me[ke.id])},300)}),i.value[ke.id]=ke.summary}),ie&&Nr(y),Ce}finally{o(!1),delete u.value.pages}}function ae(ie=null){Innoclapps.request(`${U.value}/summary${ie?"/"+ie:""}`,{params:O()}).then(({data:me})=>Object.keys(me).forEach(Ce=>i.value[Ce]=me[Ce]))}function se(ie){xe(ie,!1)}function xe(ie,me=!0){le(Nd(ie.cards,(Ce,ke,Be)=>(Ce.push({id:ke.id,board_order:Be+1,stage_id:ie.id,swatch_color:ke.swatch_color?ke.swatch_color:null}),Ce),[]),me)}function le(ie,me=!0){h.value=!0,Innoclapps.request().post(U.value,ie).finally(()=>{Nr(y),h.value=!1,me&&ae()})}function ge(ie){xe(y.value.get(ie.columnId))}function ve(){h.value&&window.confirm("Update is in progress, please wait till the update finishes, if you still can see the message after few seconds, try to force-refresh the page.")}return X(),window.addEventListener("beforeunload",ve),jt("floating-resource-updated",()=>Y()),un(()=>{window.removeEventListener("beforeunload",ve)}),(ie,me)=>{const Ce=c("NavbarSeparator"),ke=c("IButton"),Be=c("NavbarItems"),Fe=c("InputSearch"),he=c("Icon"),_e=c("CreateDealModal"),Te=c("CreateActivityModal"),Ne=c("MainLayout"),lt=ze("i-tooltip"),Ke=ze("dialog");return g(),R(Ne,{overlay:v(a),"no-padding":""},{actions:p(()=>[l(Ce,{class:"hidden lg:block"}),l(Be,null,{default:p(()=>[l(p5,{active:"board"}),l(ke,{variant:"primary",icon:"PlusSolid",text:ie.$t("deals::deal.create"),onClick:ee},null,8,["text"])]),_:1})]),default:p(()=>[l(n$e,{"board-class":"deals-board",class:"[--board-top-height:112px]","board-id":Zs},{top:p(()=>[k.value?(g(),R(QI,{key:0,class:"mb-3 [--gutter:theme(spacing.4)] sm:[--gutter:theme(spacing.6)]",identifier:v(s)},null,8,["identifier"])):Z("",!0),_("div",X$e,[l(Fe,{modelValue:u.value.q,"onUpdate:modelValue":[me[0]||(me[0]=$e=>u.value.q=$e),re],class:be(["w-full sm:w-auto",k.value?"":"blur"]),placeholder:ie.$t("core::app.search"),disabled:v(T)&&!v(S)},null,8,["modelValue","class","placeholder","disabled"]),k.value&&v(T)?(g(),D("div",Q$e,[l(YI,{identifier:v(s),onApply:re},null,8,["identifier"])])):Z("",!0),_("div",J$e,[_("div",{class:be(["inline-flex items-center space-x-2",k.value?"":"blur"])},[_("div",eCe,[l(v5,{onActivated:me[1]||(me[1]=$e=>x.value=$e),onChanged:me[2]||(me[2]=$e=>x.value=$e)})]),te(l(ke,{variant:"secondary",icon:"SortAscending"},null,512),[[lt,ie.$t("core::app.sort")],[Ke,"boardSortModal"]]),l(z$e,{onApplied:W})],2)])])]),default:p(()=>[(g(!0),D(de,null,Ie(y.value,([$e,De])=>(g(),R(c$e,{key:De.name,modelValue:De.cards,"onUpdate:modelValue":[at=>De.cards=at,ue],name:De.name,"column-id":$e,move:H,loader:oe,"board-id":Zs,onDragStart:me[3]||(me[3]=at=>w.value=!0),onDragEnd:me[4]||(me[4]=at=>w.value=!1),onUpdated:ge},{"after-header":p(()=>[_("div",tCe,[De.win_probability===100||G.value||i.value[De.id].value===0?(g(),D("span",{key:0,class:"text-neutral-600 dark:text-neutral-300",textContent:K(v(r)(i.value[De.id].value))},null,8,nCe)):te((g(),D("span",oCe,[l(he,{icon:"Scale",class:"mr-1 size-4"}),_("span",{textContent:K(v(r)(i.value[De.id].weighted_value))},null,8,aCe)])),[[lt,ie.$t("deals::deal.stage.weighted_value",{weighted_total:v(r)(i.value[De.id].weighted_value),win_probability:De.win_probability+"%",total:v(r)(i.value[De.id].value)}),void 0,{right:!0}]]),me[10]||(me[10]=_("span",{class:"mx-1 text-neutral-900 dark:text-neutral-300"},"-",-1)),_("span",{class:"text-neutral-700 dark:text-neutral-300",textContent:K(ie.$t("deals::deal.count.all",{count:i.value[De.id].count}))},null,8,rCe)])]),actions:p(()=>[l(ke,{icon:"PlusSolid",basic:"",small:"",onClick:at=>L(De)},null,8,["onClick"])]),card:p(({card:at})=>[l(P$e,{amount:at.amount,"onUpdate:amount":[dt=>at.amount=dt,dt=>ae(at.stage_id)],"products-count":at.products_count,"onUpdate:productsCount":[dt=>at.products_count=dt,dt=>ae(at.stage_id)],"swatch-color":at.swatch_color,"onUpdate:swatchColor":[dt=>at.swatch_color=dt,dt=>se(De)],"deal-id":at.id,"display-name":at.display_name,path:at.path,status:at.status,"incomplete-activities-count":at.incomplete_activities_for_user_count,"next-activity-date":at.next_activity_date||void 0,"expected-close-date":at.expected_close_date||void 0,"falls-behind-expected-close-date":at.falls_behind_expected_close_date,"updated-at":at.updated_at,"created-at":at.created_at,onCreateActivityRequested:dt=>d.value=at},null,8,["amount","onUpdate:amount","products-count","onUpdate:productsCount","swatch-color","onUpdate:swatchColor","deal-id","display-name","path","status","incomplete-activities-count","next-activity-date","expected-close-date","falls-behind-expected-close-date","updated-at","created-at","onCreateActivityRequested"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","column-id"]))),128))]),_:1}),l(_e,Ue({visible:f.value,"onUpdate:visible":me[5]||(me[5]=$e=>f.value=$e),"with-extended-submit-buttons":!0,"go-to-list":!1},j.value,{onHidden:q,onCreated:ce}),null,16,["visible"]),l(Te,{visible:d.value!==null,deals:[d.value],"with-extended-submit-buttons":!0,"go-to-list":!1,onCreated:me[6]||(me[6]=({isRegularAction:$e})=>($e&&(d.value=null),Y())),onHidden:me[7]||(me[7]=$e=>d.value=null)},null,8,["visible","deals"]),te(l(y$e,{"resource-id":Zs,onUpdateRequest:le,onRefreshRequested:Y,onDeleted:me[8]||(me[8]=$e=>ae()),onWon:me[9]||(me[9]=$e=>ae())},null,512),[[fe,w.value]])]),_:1},8,["overlay"])}}},sCe={class:"ml-3 w-56"},iCe={__name:"DealsImport",setup(e){const t=Innoclapps.resourceName("deals"),{orderedPipelines:n}=Sa(),o=Pt(n.value[0]);return(a,r)=>{const s=c("ICustomSelect"),i=c("I18nT"),u=c("ICardHeading"),d=c("MainLayout");return g(),R(d,null,{default:p(()=>[l(rI,{"resource-name":v(t),"request-query-string":{pipeline_id:o.value.id}},{header:p(()=>[l(u,{class:"flex items-center"},{default:p(()=>[l(i,{scope:"global",keypath:"deals::deal.import_in"},{pipeline:p(()=>[_("div",sCe,[l(s,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=m=>o.value=m),label:"name",clearable:!1,options:v(n)},null,8,["modelValue","options"])])]),_:1})]),_:1})]),_:1},8,["resource-name","request-query-string"])]),_:1})}}},uCe={key:1,class:"m-auto mt-8 max-w-5xl"},cCe={class:"w-52"},dCe=["textContent"],mCe={class:"mx-1",textContent:"-"},fCe={class:"inline-flex items-center"},pCe={__name:"DealsIndex",setup(e){const t=Innoclapps.resourceName("deals"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=V(null),{formatMoney:i}=lo(),{findRule:u}=Ua(t),d=P(()=>!a.value),m=P(()=>a.value&&r.value);function f(b){a.value=b.isPreEmpty,r.value=!0}function h(){Ot("refresh-cards"),o()}const y=P(()=>{let b=u("status");return b?b.query.value==="won"||b.query.value==="lost":!1});return(b,I)=>{const w=c("NavbarSeparator"),k=c("IDropdownItem"),x=c("IDropdownMinimal"),$=c("IButton"),C=c("NavbarItems"),F=c("IOverlay"),T=c("IEmptyState"),S=c("Icon"),A=c("ITextBlockDark"),E=c("IBadge"),B=c("ResourceTable"),M=c("ResourceExport"),N=c("RouterView"),G=c("MainLayout");return g(),R(G,null,{actions:p(()=>[l(w,{class:"hidden lg:block"}),l(C,null,{default:p(()=>[l(x,{placement:a.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[v(n).authorizedToImport?(g(),R(k,{key:0,icon:"DocumentAdd",to:{name:"import-resource",params:{resourceName:v(t)}},text:b.$t("core::resource.import",{resource:v(n).label})},null,8,["to","text"])):Z("",!0),v(n).authorizedToExport?(g(),R(k,{key:1,icon:"DocumentDownload",text:b.$t("core::resource.export",{resource:v(n).label}),onClick:I[0]||(I[0]=U=>b.$dialog.show("export-modal"))},null,8,["text"])):Z("",!0),v(n).usesSoftDeletes?(g(),R(k,{key:2,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:b.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),l(p5,{active:"index"}),te(l($,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-deal"},text:b.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!a.value]])]),_:1})]),default:p(()=>[r.value?Z("",!0):(g(),R(F,{key:0,show:""})),m.value?(g(),D("div",uCe,[l(T,zt(Qt({to:{name:"create-deal"},title:b.$t("deals::deal.empty_state.title"),buttonText:b.$t("deals::deal.create"),description:b.$t("deals::deal.empty_state.description"),secondButtonText:b.$t("core::import.from_file",{file_type:"CSV"}),secondButtonIcon:"DocumentAdd",secondButtonTo:{name:"import-resource",params:{resourceName:v(t)}}})),null,16)])):Z("",!0),d.value?(g(),R(Ud,{key:2,class:"mb-6","resource-name":v(t)},null,8,["resource-name"])):Z("",!0),te(_("div",null,[l(B,{"resource-name":v(t),"data-request-query-string":{pipeline_id:s.value},onLoaded:f},{header:p(({meta:U})=>[_("div",cCe,[l(v5,{onActivated:I[1]||(I[1]=j=>s.value=j),onChanged:I[2]||(I[2]=j=>s.value=j)})]),l(A,{class:"!-mr-3 inline-flex shrink-0 items-center font-medium"},{default:p(()=>{var j,O,H,W,X,q,L,ee;return[_("span",{textContent:K(v(i)(((j=U.summary)==null?void 0:j.value)||0))},null,8,dCe),te(_("span",mCe,null,512),[[fe,!y.value&&((O=U.summary)==null?void 0:O.weighted_value)>0&&((H=U.summary)==null?void 0:H.weighted_value)!==((W=U.summary)==null?void 0:W.value)]]),te(_("span",fCe,[l(S,{icon:"Scale",class:"mr-1 size-4"}),_("span",null,K(v(i)((X=U.summary)==null?void 0:X.weighted_value)),1)],512),[[fe,!y.value&&((q=U.summary)==null?void 0:q.weighted_value)>0&&((L=U.summary)==null?void 0:L.weighted_value)!==((ee=U.summary)==null?void 0:ee.value)]]),I[4]||(I[4]=_("span",{class:"mx-1",textContent:"-"},null,-1))]}),_:2},1024)]),status:p(({row:U,column:j})=>{var O,H;return[l(E,{variant:(O=j.statuses[U.status])==null?void 0:O.badge,text:b.$t("deals::deal.status."+((H=j.statuses[U.status])==null?void 0:H.name))},null,8,["variant","text"])]}),_:1},8,["resource-name","data-request-query-string"])],512),[[fe,!a.value]]),l(M,{"resource-name":v(t)},null,8,["resource-name"]),l(N,{name:"create","redirect-to-view":!0,onCreated:I[3]||(I[3]=({isRegularAction:U})=>U?void 0:h()),onHidden:b.$router.back},null,8,["onHidden"])]),_:1})}}},vCe={class:"flex items-center px-4 py-2 text-base font-medium sm:text-sm"},hCe={class:"ml-4 text-base font-medium text-neutral-900 dark:text-neutral-200 sm:text-sm"},gCe={__name:"DealMiniPipelineStageComplete",props:{dealStatus:{type:String,required:!0},requestInProgress:Boolean,stageIndex:{required:!0,type:Number},dealStageIndex:{required:!0,type:Number}},emits:["click"],setup(e){const t=e,n=P(()=>t.stageIndex>t.dealStageIndex),o=P(()=>t.stageIndex<=t.dealStageIndex);return(a,r)=>{const s=c("ISpinner"),i=c("Icon"),u=c("ILink");return g(),R(u,{class:"group flex w-full items-center",tabindex:"-1",plain:"",onClick:r[0]||(r[0]=d=>a.$emit("click"))},{default:p(()=>[_("span",vCe,[_("span",{class:be(["flex size-7 shrink-0 items-center justify-center rounded-full",{"bg-success-500 group-hover:bg-success-700 dark:bg-success-400 dark:group-hover:bg-success-500":e.dealStatus==="won"&&o.value||e.dealStatus==="open","border border-success-500 bg-transparent group-hover:border-success-600 dark:border-success-400 dark:group-hover:border-success-600":e.dealStatus==="won"&&n.value,"bg-danger-500 group-hover:bg-danger-700 dark:bg-danger-400 dark:group-hover:bg-danger-600":e.dealStatus==="lost"&&o.value,"border border-danger-500 bg-transparent group-hover:border-danger-600 dark:border-danger-400 dark:group-hover:border-danger-500":e.dealStatus==="lost"&&n.value}])},[e.requestInProgress?(g(),R(s,{key:0,class:"size-6"})):e.dealStatus==="open"||e.dealStatus==="won"?(g(),R(i,{key:1,icon:"Check",class:be(["size-6",e.dealStatus==="open"?"text-white":{"text-white":o.value,"text-success-500":n.value}])},null,8,["class"])):(g(),R(i,{key:2,icon:"XSolid",class:be(["size-6",{"text-white":o.value,"text-danger-500":n.value}])},null,8,["class"]))],2),_("span",hCe,[Ee(a.$slots,"default")])])]),_:3})}}},bCe={class:"flex size-7 shrink-0 items-center justify-center rounded-full border-2 border-success-500 dark:border-success-400"},yCe={class:"text-success-500 dark:text-success-400"},_Ce={class:"ml-4 text-base font-medium text-success-500 dark:text-success-400 sm:text-sm"},wCe={__name:"DealMiniPipelineStageCurrent",props:{requestInProgress:Boolean},emits:["click"],setup(e){return(t,n)=>{const o=c("ISpinner"),a=c("Icon"),r=c("ILink");return g(),R(r,{class:"flex items-center px-4 py-2 font-medium","aria-current":"step",tabindex:"-1",plain:"",onClick:n[0]||(n[0]=s=>t.$emit("click"))},{default:p(()=>[_("span",bCe,[_("span",yCe,[e.requestInProgress?(g(),R(o,{key:0,class:"size-6 text-success-500 dark:text-success-400"})):(g(),R(a,{key:1,icon:"Check",class:"size-6 text-success-500 dark:text-success-400"}))])]),_("span",_Ce,[Ee(t.$slots,"default")])]),_:3})}}},ICe={class:"flex items-center px-4 py-2 text-base font-medium sm:text-sm"},xCe={class:"flex size-7 shrink-0 items-center justify-center rounded-full border-2 border-neutral-300 group-hover:border-neutral-400 dark:border-neutral-500 dark:group-hover:border-neutral-100"},kCe={class:"ml-4 text-base font-medium text-neutral-500 group-hover:text-neutral-900 dark:text-neutral-400 dark:group-hover:text-neutral-100 sm:text-sm"},$Ce={__name:"DealMiniPipelineStageFuture",props:{requestInProgress:Boolean},emits:["click"],setup(e){return(t,n)=>{const o=c("ISpinner"),a=c("Icon"),r=c("ILink");return g(),R(r,{class:"group flex items-center",tabindex:"-1",plain:"",onClick:n[0]||(n[0]=s=>t.$emit("click"))},{default:p(()=>[_("span",ICe,[_("span",xCe,[e.requestInProgress?(g(),R(o,{key:0,class:"size-6 text-neutral-500 dark:text-white/10"})):Z("",!0),te(l(a,{icon:"PlusSolid",class:"size-5 text-neutral-500 dark:text-neutral-100"},null,512),[[fe,!e.requestInProgress]])]),_("span",kCe,[Ee(t.$slots,"default")])])]),_:3})}}},CCe={class:"relative overflow-hidden truncate bg-neutral-50 dark:bg-neutral-800 lg:flex lg:flex-1"},SCe={key:3,class:"absolute right-0 top-0 hidden h-full w-5 bg-neutral-50 dark:bg-neutral-800 lg:block","aria-hidden":"true"},TCe={__name:"DealMiniPipelineStage",props:{dealStatus:{type:String,required:!0},stageId:{type:Number,required:!0},timeInStages:{type:Object,required:!0},stageName:{type:String,required:!0},totalStages:{type:Number,required:!0},dealId:{type:Number,required:!0},dealStageId:{type:Number,required:!0},dealStageIndex:{type:Number,required:!0},index:{required:!0,type:Number}},emits:["stageUpdated"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{humanizeDuration:r}=it(),{updateResource:s,resourceBeingUpdated:i}=qt(Innoclapps.resourceName("deals")),u=P(()=>n.index),d=P(()=>n.dealStageIndex>u.value),m=P(()=>n.dealStageIndex===u.value),f=P(()=>n.timeInStages[n.stageId]!=null),h=P(()=>{let b="";return n.totalStages>6&&(b+=n.stageName+" - "),f.value?b+=a("deals::deal.been_in_stage_time",{time:r(n.timeInStages[n.stageId])}):b+=a("deals::deal.hasnt_been_in_stage"),b});function y(){n.stageId===n.dealStageId||n.dealStatus!=="open"||s({stage_id:n.stageId},n.dealId).then(b=>{o("stageUpdated",b)})}return(b,I)=>{const w=ze("i-tooltip");return g(),D("li",CCe,[d.value||e.dealStatus==="lost"||e.dealStatus==="won"?te((g(),R(gCe,{key:0,"request-in-progress":v(i),"deal-status":e.dealStatus,"deal-stage-index":e.dealStageIndex,"stage-index":e.index,onClick:y},{default:p(()=>[ne(K(e.stageName),1)]),_:1},8,["request-in-progress","deal-status","deal-stage-index","stage-index"])),[[w,h.value]]):m.value?te((g(),R(wCe,{key:1,"request-in-progress":v(i),onClick:y},{default:p(()=>[ne(K(e.stageName),1)]),_:1},8,["request-in-progress"])),[[w,h.value]]):te((g(),R($Ce,{key:2,"request-in-progress":v(i),onClick:y},{default:p(()=>[ne(K(e.stageName),1)]),_:1},8,["request-in-progress"])),[[w,h.value]]),e.index!==e.totalStages-1?(g(),D("div",SCe,I[0]||(I[0]=[_("svg",{class:"h-full w-full text-neutral-300 dark:text-neutral-500/30",viewBox:"0 0 22 80",fill:"none",preserveAspectRatio:"none"},[_("path",{d:"M0 -2L20 40L0 82","vector-effect":"non-scaling-stroke",stroke:"currentcolor","stroke-linejoin":"round"})],-1)]))):Z("",!0)])}}},ECe={"aria-label":"Progress"},FCe={class:"divide-y divide-neutral-300 overflow-hidden rounded-md border border-neutral-300 dark:divide-neutral-500/30 dark:border-neutral-500/30 lg:flex lg:flex-wrap lg:divide-y-0"},ACe={__name:"DealMiniPipeline",props:{stages:{type:Array,required:!0},dealId:{type:Number,required:!0},dealStageId:{type:Number,required:!0},dealStatus:{type:String,required:!0},timeInStages:{type:Object,required:!0}},emits:["stageUpdated"],setup(e){const t=e,n=P(()=>t.stages.findIndex(o=>o.id==t.dealStageId));return(o,a)=>(g(),D("nav",ECe,[_("ol",FCe,[(g(!0),D(de,null,Ie(e.stages,(r,s)=>(g(),R(TCe,{key:r.id,"stage-id":r.id,"stage-name":r.name,"total-stages":e.stages.length,"time-in-stages":e.timeInStages,"deal-stage-id":e.dealStageId,"deal-id":e.dealId,"deal-status":e.dealStatus,"deal-stage-index":n.value,index:s,onStageUpdated:a[0]||(a[0]=i=>o.$emit("stageUpdated",i))},null,8,["stage-id","stage-name","total-stages","time-in-stages","deal-stage-id","deal-id","deal-status","deal-stage-index","index"]))),128))])]))}},RCe={class:"mx-auto max-w-7xl"},DCe={key:1,class:"relative"},OCe={class:"px-3 py-4 sm:p-6"},PCe={class:"flex grow flex-col lg:flex-row lg:items-center"},MCe={class:"overflow-hidden text-center lg:flex lg:grow lg:items-center lg:space-x-4 lg:text-left"},BCe={class:"overflow-hidden"},NCe={class:"flex flex-col items-center space-y-1 lg:flex-row lg:space-x-4 lg:space-y-0"},VCe={class:"shrink-0"},LCe={class:"my-1 flex flex-col items-center justify-center space-y-2 lg:mb-1 lg:flex-row lg:justify-start lg:space-x-3 lg:space-y-0"},qCe={key:1},UCe=["textContent"],jCe={class:"order-1 shrink-0 justify-center font-medium text-neutral-800 hover:text-neutral-600 dark:text-neutral-200 dark:hover:text-neutral-400 sm:order-2 sm:text-sm/5 lg:justify-start"},zCe={class:"flex shrink-0 flex-col items-center lg:ml-6 lg:flex-row lg:space-x-2 lg:self-start"},HCe={class:"mt-5 flex shrink-0 justify-center space-x-0.5 lg:mt-0 lg:items-center lg:justify-normal"},WCe={key:2,class:"mt-8"},GCe={class:"lg:grid lg:grid-cols-12 lg:gap-8"},KCe={class:"col-span-4"},ZCe={class:"mb-3"},YCe={class:"col-span-8 mt-4 lg:mt-0"},XCe={__name:"DealsView",setup(e){const t={"timeline-tab":lh,"timeline-tab-panel":sh},n=Innoclapps.resourceName("deals"),o=wt(),a=Ct(),{formatMoney:r}=lo(),{localizedDateTime:s}=it(),{form:i}=Qe({name:null}),u=V(!1);let d=P(()=>a.params.id);const{resourceInformation:m,resource:f,synchronizeResource:h,detachResourceAssociations:y,incrementResourceCount:b,decrementResourceCount:I,fetchResource:w,updateResource:k,resourceReady:x}=eu(n,d),$=V(m.value.detailPage),C=a.query.section?$.value.tabs.findIndex(B=>B.id===a.query.section):0,F=P(()=>{var B,M;return(M=(B=f.value)==null?void 0:B.authorizations)!=null&&M.view?`Modules.Deals.Models.Deal.${d.value}`:null});jt("refresh-details-view",()=>w()),jt("floating-resource-updated",()=>w());const T=P(()=>f.value.pipeline.stages.map(({id:B,name:M})=>({id:B,name:M})));st("fetchResource",w),st("synchronizeResource",h),st("detachResourceAssociations",y),st("incrementResourceCount",b),st("decrementResourceCount",I),yo(P(()=>f.value.display_name));const{stopListening:S}=ou(F,".DealUpdated",()=>w());mn(S);function A(B){B.destroyable?o.push({name:"deal-index"}):w()}function E(){return k(i)}return w(),(B,M)=>{const N=c("IAlertBody"),G=c("IAlert"),U=c("IPopoverButton"),j=c("IFormError"),O=c("IFormGroup"),H=c("IPopoverBody"),W=c("IButton"),X=c("IPopoverFooter"),q=c("IPopoverPanel"),L=c("IPopover"),ee=c("ILink"),ce=c("ITextBlock"),ue=c("ICard"),oe=c("Panels"),re=c("ITabList"),Y=c("ITabPanels"),ae=c("ITabGroup"),se=c("MainLayout"),xe=ze("t");return g(),R(se,{overlay:!v(x)},{default:p(()=>[_("div",RCe,[v(x)&&!v(f).authorizations.view?(g(),R(G,{key:0,class:"mb-6",variant:"warning"},{default:p(()=>[l(N,null,{default:p(()=>[ne(K(B.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})):Z("",!0),v(x)?(g(),D("div",DCe,[l(ue,null,{default:p(()=>[_("div",OCe,[_("div",PCe,[_("div",MCe,[_("div",BCe,[_("div",NCe,[l(L,{onShow:M[1]||(M[1]=le=>v(i).name=v(f).name),onHide:M[2]||(M[2]=le=>v(i).errors.clear())},{default:p(({hide:le})=>[l(U,{as:"button",class:"relative rounded-md text-2xl font-bold text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:text-white dark:hover:bg-neutral-800 lg:truncate",text:v(f).display_name,disabled:!v(f).authorizations.update},null,8,["text","disabled"]),l(q,{class:"w-80"},{default:p(()=>[_("form",{onSubmit:ot(E,["prevent"])},[l(H,null,{default:p(()=>[l(O,{"label-for":"editDealName",label:B.$t("deals::fields.deals.name"),required:""},{default:p(()=>[(g(),R(_t(v(f).name.length<=60?"IFormInput":"IFormTextarea"),{id:"editDealName",modelValue:v(i).name,"onUpdate:modelValue":M[0]||(M[0]=ge=>v(i).name=ge)},null,8,["modelValue"])),l(j,{error:v(i).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1}),l(X,{class:"flex justify-end space-x-1"},{default:p(()=>[l(W,{disabled:v(i).busy,text:B.$t("core::app.cancel"),basic:"",onClick:le},null,8,["disabled","text","onClick"]),l(W,{variant:"primary",loading:v(i).busy,disabled:v(i).busy||!v(i).name,text:B.$t("core::app.save"),onClick:ge=>E().then(le)},null,8,["loading","disabled","text","onClick"])]),_:2},1024)],32)]),_:2},1024)]),_:1}),_("div",VCe,[l(Ts,{disabled:!v(f).authorizations.update,type:B.$scriptConfig("deals.tags_type"),"model-value":v(f).tags,simple:"","onUpdate:modelValue":M[3]||(M[3]=le=>v(k)({tags:le}))},null,8,["disabled","type","model-value"])])]),v(f).authorizations.update?(g(),R(Ld,{key:0,"resource-name":v(n),"resource-id":v(f).id,visible:u.value,prefetch:"",onHidden:M[4]||(M[4]=le=>u.value=!1),onSaved:M[5]||(M[5]=le=>v(h)({_sync_timestamp:new Date,billable:le,amount:le.total,products_count:le.products.length}))},null,8,["resource-name","resource-id","visible"])):Z("",!0),_("div",LCe,[l(ce,{class:"order-2 shrink-0 space-x-1 sm:order-1"},{default:p(()=>[v(f).authorizations.update?(g(),R(ee,{key:0,text:B.$t("billable::product.count",{count:v(f).products_count}),onClick:M[6]||(M[6]=le=>u.value=!0)},null,8,["text"])):te((g(),D("span",qCe,null,512)),[[xe,{path:"billable::product.count",args:{count:v(f).products_count}}]]),Object.hasOwn(v(f),"amount")?(g(),D("span",{key:2,class:be(["font-medium text-neutral-700 dark:text-neutral-100",v(f).authorizations.update&&v(f).products_count?"cursor-pointer":""]),onClick:M[7]||(M[7]=le=>v(f).authorizations.update&&v(f).products_count?u.value=!0:void 0),textContent:K(v(r)(v(f).amount))},null,10,UCe)):Z("",!0)]),_:1}),_("div",jCe,[l(d5,{"deal-id":v(f).id,pipeline:v(f).pipeline,"stage-id":v(f).stage_id,status:v(f).status,"authorized-to-update":v(f).authorizations.update,onUpdated:M[8]||(M[8]=le=>v(h)(le,!0))},null,8,["deal-id","pipeline","stage-id","status","authorized-to-update"])])]),M[9]||(He(-1),(M[9]=_("p",{class:"text-base/6 text-neutral-600 dark:text-neutral-300 sm:text-sm/6"},[ne(K(B.$t("core::app.created_at"))+" "+K(v(s)(v(f).created_at)),1)])).cacheIndex=9,He(1),M[9])])]),_("div",zCe,[v(f).authorizations.update?(g(),R(f5,{key:0,class:"mr-2 mt-5 lg:mt-0 lg:shrink-0","deal-id":v(f).id,"deal-status":v(f).status,onUpdated:M[10]||(M[10]=le=>v(h)(le,!0))},null,8,["deal-id","deal-status"])):Z("",!0),_("div",HCe,[l(ih,{owner:v(f).user,"authorize-update":v(f).authorizations.update,onChange:M[11]||(M[11]=le=>v(k)({user_id:(le==null?void 0:le.id)||null}))},null,8,["owner","authorize-update"]),l(xs,{type:"dropdown",ids:v(f).id||[],actions:v(f).actions||[],"resource-name":v(n),onActionExecuted:A},null,8,["ids","actions","resource-name"])])])]),l(ACe,{class:"mt-5",stages:T.value,"time-in-stages":v(f).time_in_stages,"deal-status":v(f).status,"deal-stage-id":v(f).stage_id,"deal-id":v(f).id,onStageUpdated:M[12]||(M[12]=le=>v(h)(le,!0))},null,8,["stages","time-in-stages","deal-status","deal-stage-id","deal-id"])])]),_:1})])):Z("",!0),v(x)?(g(),D("div",WCe,[_("div",GCe,[_("div",KCe,[l(oe,{panels:$.value.panels,"onUpdate:panels":M[14]||(M[14]=le=>$.value.panels=le),identifier:v(n)},{default:p(({panel:le})=>[_("div",ZCe,[(g(),R(_t(le.component),{"resource-name":v(n),"resource-id":v(f).id,resource:v(f),panel:le,onUpdated:M[13]||(M[13]=ge=>v(h)(ge,!0))},null,40,["resource-name","resource-id","resource","panel"]))])]),_:1},8,["panels","identifier"])]),_("div",YCe,[l(ae,{"default-index":v(C)},{default:p(()=>[l(ue,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:rounded-b-none"},{default:p(()=>[l(re,{class:"has-[[data-headlessui-state=selected]:not(:first-child)]:pb-2.5 has-[[data-headlessui-state=selected]:not(:first-child)]:sm:pb-0",centered:""},{default:p(()=>[(g(!0),D(de,null,Ie($.value.tabs,le=>(g(),R(_t(t[le.component]||le.component),{key:le.id,"resource-name":v(n),"resource-id":v(f).id,resource:v(f)},null,8,["resource-name","resource-id","resource"]))),128))]),_:1})]),_:1}),l(Y,{class:"[&_[data-slot=panel]]:-mt-[18px]"},{default:p(()=>[(g(!0),D(de,null,Ie($.value.tabs,le=>(g(),R(_t(t[le.panelComponent]||le.panelComponent),{id:"tabPanel-"+le.id,key:le.id,"scroll-element":"#main","resource-name":v(n),"resource-id":v(f).id,resource:v(f)},null,8,["id","resource-name","resource-id","resource"]))),128))]),_:1})]),_:1},8,["default-index"])])])])):Z("",!0)])]),_:1},8,["overlay"])}}},Xm=qi("deals-board-view-default",!1),QCe=[{path:"/deals",name:"deal-index",component:pCe,meta:{title:rt("deals::deal.deals"),subRoutes:["create-deal"],boardRoute:"deal-board"},beforeEnter:async(e,t)=>{if(Xm.value&&t.name!=e.meta.boardRoute&&e.meta.subRoutes.indexOf(e.name)===-1)return{name:e.meta.boardRoute,query:e.query};e.meta.subRoutes.indexOf(e.name)===-1&&(Xm.value=!1)},children:[{path:"create",name:"create-deal",components:{create:jd},meta:{title:rt("deals::deal.create")}}]},{path:"/import/deals",name:"import-deal",component:iCe,meta:{title:rt("deals::deal.import")}},{path:"/deals/board",name:"deal-board",component:lCe,meta:{title:rt("deals::deal.deals")},beforeEnter:()=>{Xm.value=!0}},{path:"/deals/:id",name:"view-deal",component:XCe}];window.Innoclapps&&Innoclapps.booting((e,t)=>{e.component("DealPresentationCard",E5e),e.component("DealFloatingModal",S5e),e.component("CreateDealModal",c5e),e.component("ResourceDealsPanel",F5e),e.component("FormLostReasonField",M5e),e.component("FormPipelineStageField",B5e),e.component("IndexPipelineStageField",j5e),e.component("IndexLostReasonField",L5e),QCe.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"deals",name:"deals-settings-index",component:P5e,meta:{title:rt("deals::deal.deals")},children:[{path:"pipelines/create",name:"create-pipeline",component:z5e,meta:{title:rt("deals::deal.pipeline.create")}}]}),t.addRoute("settings",{path:"deals/pipelines/:id/edit",name:"edit-pipeline",component:J5e,meta:{title:rt("deals::deal.pipeline.edit")}})});window.Innoclapps&&Innoclapps.booting(function(e,t){});const JCe={class:"my-1 flex flex-col sm:flex-row sm:items-center"},e8e={class:"flex grow space-x-2"},t8e={class:"space-y-1"},n8e={key:0},o8e={class:"flex flex-col space-y-2 sm:flex-row sm:space-x-2 sm:space-y-0"},a8e={class:"flex-1 rounded bg-warning-100 p-2 px-2 py-3 text-center text-warning-700"},r8e={class:"font-medium"},l8e=["textContent"],s8e={class:"flex-1 rounded bg-success-100 p-2 px-2 py-3 text-center text-success-700"},i8e={class:"font-medium"},u8e=["textContent"],c8e={key:1},d8e={key:0,class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},m8e={class:"flex items-center justify-between"},f8e={class:"flex items-center"},p8e={class:"inline-block",tabindex:"-1"},v8e={__name:"SettingsUpdate",setup(e){const{t}=Pe(),{form:n,submit:o}=Ao(),{localizedDateTime:a}=it(),{scriptConfig:r}=qe(),s=r("requirements.zip"),i=V({}),u=V([]),d=V(!1),m=V(!1),f=V(!1),h=V(!1),y=P(()=>Vt(u.value.map(E=>(E._date=new Date(E.date),E)),["isApplied","_date"],["asc","asc"])),b=P(()=>u.value.length>0),I=P(()=>u.value.some(E=>!E.isApplied)),w=P(()=>d.value?t("updater::update.update_in_progress"):t("updater::update.perform")),k=P(()=>LA(i.value.purchase_key)),x=P(()=>i.value.is_new_version_available&&k.value&&s);function $(){n.purchase_key=i.value.purchase_key,o()}function C(E){E.data==="Incorrect files permissions."?window.location.href="/update/errors/permissions":Innoclapps.error(E.data)}function F(){d.value=!0,Innoclapps.request().post(`/update?purchase_key=${i.value.purchase_key}`).then(()=>window.location.reload()).catch(({response:E})=>C(E)).finally(()=>d.value=!1)}function T(E,B){m.value=B,Innoclapps.request().post(`/patches/${E}?purchase_key=${i.value.purchase_key}`).then(()=>window.location.reload()).catch(({response:M})=>C(M)).finally(()=>m.value=!1)}function S(){f.value=!0,Innoclapps.request().post(`/patches?purchase_key=${i.value.purchase_key}`).then(()=>window.location.reload()).catch(({response:E})=>C(E)).finally(()=>f.value=!1)}function A(){Promise.all([Innoclapps.request("/update"),Innoclapps.request("/patches")]).then(E=>{i.value=E[0].data,u.value=E[1].data}).catch(({response:E})=>C(E)).finally(()=>h.value=!0)}return A(),(E,B)=>{const M=c("IFormLabel"),N=c("IFormInput"),G=c("IButton"),U=c("ICardBody"),j=c("ICard"),O=c("ICardHeading"),H=c("Icon"),W=c("IText"),X=c("ICardHeader"),q=c("ITextDisplay"),L=c("IOverlay"),ee=c("ICardFooter"),ce=c("ICardActions"),ue=c("ITextDark"),oe=c("IBadge"),re=c("ITextSmall"),Y=c("ILink"),ae=ze("t"),se=ze("i-tooltip");return g(),D(de,null,[l(j,{class:"mb-3"},{default:p(()=>[l(U,null,{default:p(()=>[_("div",JCe,[l(M,{for:"purchase-key",class:"mb-1 shrink-0 sm:mb-0 sm:mr-4"},{default:p(()=>[ne(K(E.$t("core::app.purchase_key")),1)]),_:1}),_("div",e8e,[l(N,{id:"purchase-key",modelValue:i.value.purchase_key,"onUpdate:modelValue":B[0]||(B[0]=xe=>i.value.purchase_key=xe),placeholder:E.$t("core::app.enter_purchase_key"),class:be([h.value&&!k.value?"text-danger-900 placeholder-danger-400 focus:ring-danger-500 dark:placeholder-danger-300 dark:focus:ring-danger-400":""])},null,8,["modelValue","placeholder","class"]),l(G,{variant:"secondary",text:E.$t("core::app.save"),onClick:$},null,8,["text"])])])]),_:1})]),_:1}),l(L,{show:!v(s)&&h.value},gn({default:p(()=>[l(j,{class:"mb-3"},{default:p(()=>[l(X,null,{default:p(()=>[_("div",t8e,[l(O,{text:E.$t("updater::update.system")},null,8,["text"]),te(l(W,{class:"flex items-center gap-x-1.5"},{default:p(()=>[l(H,{icon:"ExclamationTriangle",class:"size-5 text-warning-500"}),ne(" "+K(E.$t("updater::update.apply_patches_before_updating")),1)]),_:1},512),[[fe,I.value&&x.value]])])]),_:1}),l(U,null,{default:p(()=>[l(L,{show:!h.value},{default:p(()=>[i.value.is_new_version_available?(g(),D("div",n8e,[_("div",o8e,[_("div",a8e,[te(_("h4",r8e,null,512),[[ae,"updater::update.installed_version"]]),_("h5",{textContent:K(i.value.installed_version)},null,8,l8e)]),_("div",s8e,[te(_("h4",i8e,null,512),[[ae,"updater::update.latest_version"]]),_("h5",{textContent:K(i.value.latest_available_version)},null,8,u8e)])])])):(g(),D("div",c8e,[te(l(q,{class:"text-center"},{default:p(()=>[l(H,{icon:"EmojiHappy",class:"m-auto mb-2 size-10 text-success-500"}),ne(" "+K(E.$t("updater::update.not_available")),1)]),_:1},512),[[fe,h.value]]),te(l(W,{class:"text-center",text:E.$t("updater::update.using_latest_version")},null,8,["text"]),[[fe,h.value]])]))]),_:1},8,["show"])]),_:1}),l(ee,{class:"text-right"},{default:p(()=>[l(G,{variant:"success",text:w.value,disabled:!x.value||d.value||m.value!==!1||f.value||I.value,onClick:F},null,8,["text","disabled"])]),_:1})]),_:1})]),_:2},[v(s)?void 0:{name:"overlay",fn:p(()=>[ne(K(E.$t("updater::update.update_zip_is_required")),1)]),key:"0"}]),1032,["show"]),l(L,{show:!v(s)&&h.value},gn({default:p(()=>[l(j,null,{default:p(()=>[l(X,null,{default:p(()=>[l(O,{text:E.$t("updater::update.patches")},null,8,["text"]),I.value?(g(),R(ce,{key:0},{default:p(()=>[l(G,{disabled:f.value,loading:f.value,basic:"",small:"",onClick:S},{default:p(()=>[ne(K(E.$t("updater::update.apply_all_patches")),1)]),_:1},8,["disabled","loading"])]),_:1})):Z("",!0)]),_:1}),l(L,{show:!h.value},{default:p(()=>[b.value?(g(),D("ul",d8e,[(g(!0),D(de,null,Ie(y.value,(xe,le)=>(g(),D("li",{key:xe.token,class:"px-4 py-4 sm:px-6"},[_("div",m8e,[_("div",null,[l(ue,{class:"font-medium",innerHTML:xe.description},null,8,["innerHTML"]),xe.isApplied?(g(),R(oe,{key:0,class:"mr-1",variant:"success",text:E.$t("updater::update.patch_applied")},null,8,["text"])):Z("",!0),xe.isCritical?(g(),R(oe,{key:1,class:"mr-1",variant:"danger",text:E.$t("updater::update.is_critical")},null,8,["text"])):Z("",!0),l(oe,{text:xe.token},null,8,["text"]),l(re,{class:"ml-2.5 inline"},{default:p(()=>[ne(K(v(a)(xe.date)),1)]),_:2},1024),B[1]||(B[1]=_("br",null,null,-1))]),_("div",f8e,[l(Y,{href:"/patches/"+xe.token+"/"+i.value.purchase_key,class:be(["mr-3",{"pointer-events-none opacity-70":le>0||f.value||m.value!==!1||!k.value||!v(s)||d.value||xe.isApplied}])},{default:p(()=>[l(H,{icon:"DocumentDownload",class:"size-5"})]),_:2},1032,["href","class"]),te((g(),D("span",p8e,[l(G,{disabled:le>0||f.value||m.value!==!1||!k.value||!v(s)||d.value||xe.isApplied,small:"",onClick:ge=>T(xe.token,le)},{default:p(()=>[ne(K(m.value===le?E.$t("updater::update.update_in_progress"):E.$t("core::app.apply")),1)]),_:2},1032,["disabled","onClick"])])),[[se,le===0||xe.isApplied?null:E.$t("updater::update.apply_oldest_first")]])])])]))),128))])):(g(),R(U,{key:1},{default:p(()=>[te(l(W,{class:"text-center",text:E.$t("updater::update.no_patches")},null,8,["text"]),[[fe,h.value]])]),_:1}))]),_:1},8,["show"])]),_:1})]),_:2},[v(s)?void 0:{name:"overlay",fn:p(()=>[ne(K(E.$t("updater::update.patch_zip_is_required")),1)]),key:"0"}]),1032,["show"])],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/update",component:v8e,name:"update",meta:{title:rt("updater::update.system")}})});const h8e={__name:"RecordTabDocument",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){const t=e,n=P(()=>t.resource.draft_documents_count>0?t.resource.draft_documents_count:t.resource.documents_count),o=P(()=>(t.resource.documents||[]).filter(a=>a.status==="draft").length>0?"danger":"neutral");return(a,r)=>{const s=c("Icon"),i=c("IBadge"),u=c("ITab");return Ia([n.value,o.value],()=>l(u,null,{default:p(()=>[l(s,{icon:"DocumentText"}),ne(" "+K(a.$t("documents::document.documents"))+" ",1),te(l(i,{text:n.value,variant:o.value,pill:""},null,8,["text","variant"]),[[fe,n.value]])]),_:1}),r,0)}}},g8e=(e,t)=>{if(b8e(e)){t&&t();return}var n=document.createElement("script");n.onload=()=>{t&&t()},n.src=e,document.head.appendChild(n)},Sc=e=>{e.forEach(t=>{h5(`https://fonts.googleapis.com/css2?family=${decodeURI(t.name)}${t.stylesQueryString}&display=swap`)})},h5=(e,t=!1)=>{if(!y8e(e)){var n=document.createElement("link");n.rel="stylesheet",n.href=e,t?document.head.prepend(n):document.head.appendChild(n)}},b8e=e=>{const t=document.getElementsByTagName("script");for(let n=0;n<t.length;n++)if(t[n].getAttribute("src")===e)return!0;return!1},y8e=e=>{const t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)if(t[n].getAttribute("href")===e)return!0;return!1},_8e=e=>{const t=document.getElementsByTagName("link");for(let n=0;n<t.length;n++)t[n].getAttribute("href")===e&&t[n].parentNode.removeChild(t[n])},w8e=["innerHTML"],ch={__name:"ContentBuilder",props:{modelValue:{},disabled:Boolean,placeholders:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{appUrl:s,scriptConfig:i,isDarkMode:u,locale:d}=qe(),m=V(""),f=V(!1),h=So(),y=i("favourite_colors").concat(["#388d3c","#616161","#e64918","#d32f2f","#5d4038"]);window._txt=window.lang[d.value].core.contentbuilder.builder;const b=["elm-remove","cell-remove","row-remove"];let I=null;const w=C("contentbuilder/contentbuilder.css"),k=C("contentbuilder/contentbuilder.min.js");Se(()=>o.disabled,(N,G)=>{N?x():!N&&G&&A()},{immediate:!0}),Se(m,N=>{N!=o.modelValue&&a("update:modelValue",N)}),Se(()=>o.modelValue,N=>{N!=m.value&&I&&I.loadHtml(N||"")},{immediate:!0});function x(){let N=document.querySelector(".add-more");N&&N.removeEventListener("click",$),document.removeEventListener("click",B),I&&I.destroy(),I=null}function $(){I.viewSnippets();let G=document.querySelector(".is-modal.snippets").querySelector("iframe");if(G){G.classList.add("rounded-lg");let U=G.contentDocument||G.contentWindow.document,j=document.createElement("style");U.head.appendChild(j),j.appendChild(document.createTextNode(u.value?`
          .light *::-webkit-scrollbar-thumb { background-color: rgba(148, 163, 184, 0.5); }
          .is-pop-close {margin-top: 5px; margin-right: 5px;}
           svg { fill: white; !important;}
          .is-pop-close:hover svg {fill: #cbd5e1; !important;}
          .is-category-list>div {background:#1e293a !important;}
          .is-more-categories {margin-top: 1px;}
          .is-more-categories a {color:white;}
          .is-category-list a {background: #64748b !important; color: white !important}
          .is-category-list a.active, .is-category-list a:hover {background: #475569 !important;}
          .is-more-categories a.active, .is-more-categories a:hover, .is-more-categories a:focus {background:#475569 !important;}
          .is-design-list, .is-more-categories a {background:#0f172a !important;}
        `:`
          .light *::-webkit-scrollbar-thumb { background-color: rgba(148, 163, 184, 0.7); }
          .is-pop-close {margin-top: 5px; margin-right: 5px;}
           svg { fill: #475569; !important;}
          .is-pop-close:hover svg {fill: #64748b; !important;}
          .is-category-list>div {background:#e2e8f0 !important;}
          .is-more-categories {margin-top: 1px;}
          .is-more-categories a {color:white;}
          .is-category-list a {background: #f1f5f9 !important; color: #334155 !important}
          .is-category-list a.active, .is-category-list a:hover {background: #cbd5e1 !important;}
          .is-more-categories a {color:#334155 !important;}
          .is-more-categories a.active, .is-more-categories a:hover, .is-more-categories a:focus {background:#cbd5e1 !important;}
          .is-design-list, .is-more-categories a {background:white !important;}
        `))}}function C(N){return`${s}/static/contentbuilder/${N}`}async function F(N,G,U){U=U||(N.match(/^data:([^;]+);/)||"")[1];const O=await(await fetch(N)).arrayBuffer();return new File([O],G,{type:U})}function T(N){return new Promise((G,U)=>{const j=new FormData;j.append("file",N),Innoclapps.request().post(`/media/pending/${h}`,j).then(({data:O})=>G(O.preview_path)).catch(O=>{let H=O.message&&O.message.includes("413")?r("core::app.file_too_large"):O.response.data.message;Innoclapps.error(H),U(H)})})}function S(){return new Promise((N,G)=>{if(!I){N();return}I.saveImages("",()=>{m.value=I.html(),N()},(U,j,O)=>{F(U.getAttribute("src"),O).then(H=>{T(H).then(W=>U.setAttribute("src",W)).catch(W=>G(W))}).catch(H=>G(H))})})}function A(){if(o.disabled)return;x();const N=".contentbuilder";I=new ContentBuilder({container:N,colors:y,useCssClasses:!1,toolStyle:"gray",outlineStyle:"grayoutline",rowHtmlEditor:!1,columnHtmlEditor:!1,enableDragResize:!0,customTags:o.placeholders.map(G=>{let U=`${G.interpolation_start} ${G.tag} ${G.interpolation_end}`;return[G.description||U,U]}),buttons:["bold","italic","underline","formatting","formatPara","color","align","createLink","tags","|","undo","redo","more"],buttonsMore:["textsettings","icon","image","|","list","font"],elementButtons:["left","center","right","full","undo","redo","more"],elementButtonsMore:[],iconButtons:["icon","color","textsettings","createLink","|","undo","redo","more"],iconButtonsMore:[],onChange:()=>{m.value=I.html()},snippetUrl:C("assets/minimalist-blocks/content.js"),snippetPath:C("assets/minimalist-blocks/"),modulePath:C("assets/modules/"),assetPath:C("assets/"),fontAssetPath:C("assets/fonts/"),maxColumns:3,snippetCategories:[[120,r("core::contentbuilder.snippets.basic")],[118,r("core::contentbuilder.snippets.text")],[101,r("core::contentbuilder.snippets.headline")],[119,r("core::contentbuilder.snippets.buttons")],[102,r("core::contentbuilder.snippets.photos")],[103,r("core::contentbuilder.snippets.profile")],[116,r("core::contentbuilder.snippets.contact")],[104,r("core::contentbuilder.snippets.products")],[105,r("core::contentbuilder.snippets.features")],[106,r("core::contentbuilder.snippets.process")],[107,r("core::contentbuilder.snippets.pricing")],[108,r("core::contentbuilder.snippets.skills")],[109,r("core::contentbuilder.snippets.achievements")],[110,r("core::contentbuilder.snippets.quotes")],[111,r("core::contentbuilder.snippets.partners")],[112,r("core::contentbuilder.snippets.as_featured_on")],[115,r("core::contentbuilder.snippets.help_and_faq")]],defaultSnippetCategory:120,plugins:[{name:"pagebreak",showInMainToolbar:!1,showInElementToolbar:!1},{name:"products",showInMainToolbar:!1,showInElementToolbar:!1},{name:"signatures",showInMainToolbar:!1,showInElementToolbar:!1}],pluginPath:C("contentbuilder/"),imageSelect:C("assets.html"),fileSelect:C("assets.html"),videoSelect:C("assets.html"),onMediaUpload:G=>{T(G.target.files[0]).then(U=>{I.returnUrl(U)})},onVideoUpload:G=>{T(G.target.files[0]).then(U=>{I.returnUrl(U)})}}),I.loadSnippets(C("assets/minimalist-blocks/content.js")),I.loadHtml(o.modelValue),f.value=!0}function E(N){b.forEach(G=>{if(N.target.classList.contains(G)){let U=document.querySelector(".is-modal.is-confirm");U&&U.querySelector("button").focus();return}})}function B(){document.addEventListener("click",E)}function M(){let N=document.querySelector(".add-more");if(N){let G=N.cloneNode(!0);N.parentNode.replaceChild(G,N),G.addEventListener("click",$)}}return Xe(()=>{h5(w,!0),g8e(k,A),zn(()=>{M(),B()},1e3)}),mn(()=>{_8e(w),x()}),t({saveBase64Images:S,viewSnippets:$}),(N,G)=>{const U=c("IOverlay");return g(),R(U,{show:!f.value&&!e.disabled},{default:p(()=>[G[0]||(G[0]=_("div",{class:"contentbuilder"},null,-1)),e.disabled?(g(),D("div",{key:0,class:"contentbuilder",innerHTML:e.modelValue},null,8,w8e)):Z("",!0)]),_:1},8,["show"])}}},uu={form:{required:!0},visible:Boolean,document:{default:()=>({}),type:Object}},I8e={class:"mx-auto max-w-6xl"},x8e={class:"mb-8 flex justify-end space-x-2 text-right"},k8e={class:"relative w-72"},$8e={class:"space-y-1 border-b border-neutral-200 pb-3 dark:border-neutral-500/30"},C8e={class:"grid auto-cols-max grid-flow-col gap-4"},S8e={class:"w-72"},T8e={class:"grid auto-cols-max grid-flow-col gap-4"},E8e={class:"w-72"},F8e={class:"mt-2.5"},A8e={class:"grid auto-cols-max grid-flow-col gap-4"},R8e={class:"w-72"},D8e={class:"grid auto-cols-max grid-flow-col gap-4"},O8e={class:"w-72"},P8e={class:"mt-10"},M8e={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert"},g5={__name:"DocumentFormContent",props:{...uu,isReady:{default:!0,type:Boolean}},setup(e,{expose:t}){const n=e,{scriptConfig:o}=qe(),a=o("contentbuilder.fonts"),r=P(()=>a.map(N=>N["font-family"])),s=V(!1),i=V(null),u=V(null),d=V([]),m=V(null),f=V(!1),h=V(!1),y=o("documents.placeholders"),b=V(!1),{form:I}=Qe({name:"",content:"",is_shared:!1});Se(()=>n.document.updated_at,()=>{n.visible&&T()}),qa(()=>n.visible,()=>{!f.value&&M(),s.value=!0,T()},{immediate:!0});const w=P(()=>n.form.content&&n.form.content.indexOf("{{ ")>-1),k=P(()=>n.form.content&&n.form.content.match(/(contact.|deal.|company.)/)),x=P(()=>n.form.billable.products.length>0&&(!n.form.content||n.form.content.indexOf("products-section")===-1)),$=P(()=>n.form.signers.length>0&&(!n.form.content||n.form.content.indexOf("signatures-section")===-1)),C=P(()=>n.document.associations_count===0&&n.isReady&&n.document.id&&w.value&&k.value),F=P(()=>mr(d.value,["name","asc"]).map(N=>pr(N,["content"])));function T(){Sc(n.document.google_fonts||[])}function S(){i.value.viewSnippets()}function A(){u.value.focus(),I.content=n.form.content}function E(){I.post("/document-templates").then(N=>{d.value.push(N),Innoclapps.dialog().hide("saveAsTemplateModal")})}function B(N){Sc(N.google_fonts),n.form.content===null&&(n.form.content="");let G=ft(d.value,["id",N.id]);n.form.content+=G.content,G.view_type&&(n.form.view_type=G.view_type),zn(()=>m.value=null,500)}function M(){h.value=!0,Innoclapps.request("document-templates",{params:{per_page:100}}).then(({data:N})=>{d.value=N.data,f.value=!0}).finally(()=>h.value=!1)}return t({builderRef:i}),(N,G)=>{const U=c("IFormInput"),j=c("IFormError"),O=c("IFormGroup"),H=c("IFormCheckbox"),W=c("IFormCheckboxLabel"),X=c("IFormCheckboxField"),q=c("IModal"),L=c("IButton"),ee=c("ICustomSelect"),ce=c("Icon"),ue=c("ILink"),oe=c("ITextBlockDark"),re=c("IFormLabel"),Y=c("IAlertBody"),ae=c("IAlert"),se=c("I18nT"),xe=ze("dialog"),le=ze("i-tooltip");return te((g(),D("div",I8e,[_("div",x8e,[l(q,{id:"saveAsTemplateModal",size:"sm","ok-text":N.$t("core::app.save"),"ok-disabled":v(I).busy,title:N.$t("documents::document.template.save_as_template"),static:"",form:"",onShown:A,onSubmit:E},{default:p(()=>[l(O,{"label-for":"name",label:N.$t("documents::document.template.name"),required:""},{default:p(()=>[l(U,{id:"name",ref_key:"inputNameRef",ref:u,modelValue:v(I).name,"onUpdate:modelValue":G[0]||(G[0]=ge=>v(I).name=ge)},null,8,["modelValue"]),l(j,{error:v(I).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(O,null,{default:p(()=>[l(X,null,{default:p(()=>[l(H,{checked:v(I).is_shared,"onUpdate:checked":G[1]||(G[1]=ge=>v(I).is_shared=ge)},null,8,["checked"]),l(W,{text:N.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l(j,{error:v(I).getError("is_shared")},null,8,["error"])]),_:1})]),_:1},8,["ok-text","ok-disabled","title"]),l(L,{icon:"AdjustmentsVerticalSolid",class:"shrink-0 self-start",basic:"",onClick:G[2]||(G[2]=ge=>b.value=!b.value)}),l(L,{icon:"SparklesSolid",variant:"secondary",class:"shrink-0 self-start",disabled:N.document.status==="accepted",text:N.$t("core::contentbuilder.builder.Snippets"),onClick:S},null,8,["disabled","text"]),te(l(L,{variant:"secondary",icon:"Bookmark",class:"shrink-0 self-start",text:N.$t("documents::document.template.save_as_template")},null,8,["text"]),[[fe,N.form.content],[xe,"saveAsTemplateModal"]]),_("div",k8e,[l(ee,{modelValue:m.value,"onUpdate:modelValue":G[3]||(G[3]=ge=>m.value=ge),label:"name",clearable:!1,loading:h.value,disabled:N.document.status==="accepted",placeholder:N.$t("documents::document.template.insert_template"),options:F.value,onOptionSelected:B},null,8,["modelValue","loading","disabled","placeholder","options"]),te(_("a",{href:"#",class:"absolute right-9 top-2.5 text-neutral-400 hover:text-neutral-600 focus:outline-none",onClick:ot(M,["prevent","stop"])},[l(ce,{icon:"Refresh",class:"size-4"})],512),[[fe,!h.value]]),l(ue,{target:"_blank",class:"inline-flex items-center",to:{name:"document-templates-index"}},{default:p(()=>[ne(K(N.$t("documents::document.template.manage"))+" ",1),l(ce,{icon:"ExternalLink",class:"ml-2 size-4"})]),_:1})])]),te(_("div",$8e,[l(oe,{class:"mb-4 inline-flex w-full items-center border-b border-neutral-200 pb-2 font-medium dark:border-neutral-500/30"},{default:p(()=>[l(ce,{icon:"Document",class:"mr-1.5 size-4"}),ne(" "+K(N.$t("documents::pdf.settings")),1)]),_:1}),_("div",C8e,[l(re,{for:"pdf-padding",class:"mt-2.5 w-32",label:N.$t("documents::pdf.padding")},null,8,["label"]),_("div",S8e,[l(U,{id:"pdf-padding",modelValue:N.form.pdf.padding,"onUpdate:modelValue":G[4]||(G[4]=ge=>N.form.pdf.padding=ge),placeholder:N.$t("documents::pdf.no_padding")},null,8,["modelValue","placeholder"]),l(j,{error:N.form.getError("pdf.padding")},null,8,["error"])])]),_("div",T8e,[l(re,{for:"pdf-font",class:"mt-2.5 w-32",label:N.$t("documents::pdf.default_font")},null,8,["label"]),_("div",E8e,[l(ee,{modelValue:N.form.pdf.font,"onUpdate:modelValue":G[5]||(G[5]=ge=>N.form.pdf.font=ge),"input-id":"pdf-font",placeholder:N.$t("documents::document.settings.inherits_setting_from_brand"),options:r.value},null,8,["modelValue","placeholder","options"]),l(j,{error:N.form.getError("pdf.font")},null,8,["error"])]),te((g(),D("span",F8e,[l(ce,{icon:"QuestionMarkCircle",class:"size-5 text-neutral-500 dark:text-neutral-200"})])),[[le,N.$t("documents::pdf.default_font_info",{fontName:"DejaVu Sans"})]])]),_("div",A8e,[l(re,{for:"pdf-size",class:"mt-2.5 w-32",label:N.$t("documents::pdf.size")},null,8,["label"]),_("div",R8e,[l(ee,{modelValue:N.form.pdf.size,"onUpdate:modelValue":G[6]||(G[6]=ge=>N.form.pdf.size=ge),"input-id":"pdf-size",options:["a4","letter"],placeholder:N.$t("documents::document.settings.inherits_setting_from_brand")},null,8,["modelValue","placeholder"]),l(j,{error:N.form.getError("pdf.size")},null,8,["error"])])]),_("div",D8e,[l(re,{for:"pdf-orientation",class:"mt-2.5 w-32",label:N.$t("documents::pdf.orientation")},null,8,["label"]),_("div",O8e,[l(ee,{modelValue:N.form.pdf.orientation,"onUpdate:modelValue":G[7]||(G[7]=ge=>N.form.pdf.orientation=ge),"input-id":"pdf-orientation",options:["portrait","landscape"],placeholder:N.$t("documents::document.settings.inherits_setting_from_brand")},null,8,["modelValue","placeholder"]),l(j,{error:N.form.getError("pdf.orientation")},null,8,["error"])])])],512),[[fe,b.value]]),_("div",P8e,[C.value?(g(),R(ae,{key:0,class:"mb-4"},{default:p(()=>[l(Y,null,{default:p(()=>[ne(K(N.$t("documents::document.placeholders_replacement_info")),1)]),_:1})]),_:1})):Z("",!0),x.value?(g(),R(ae,{key:1,class:"mb-4"},{default:p(()=>[l(Y,null,{default:p(()=>[l(se,{scope:"global",tag:"span",class:"inline-flex items-center",keypath:"documents::document.products_snippet_missing"},{icon:p(()=>[l(ce,{icon:"PlusSolid",class:"size-5"})]),_:1})]),_:1})]),_:1})):Z("",!0),$.value?(g(),R(ae,{key:2,class:"mb-4"},{default:p(()=>[l(Y,null,{default:p(()=>[l(se,{scope:"global",tag:"span",class:"inline-flex items-center",keypath:"documents::document.signatures_snippet_missing"},{icon:p(()=>[l(ce,{icon:"PlusSolid",class:"size-5"})]),_:1})]),_:1})]),_:1})):Z("",!0),_("div",M8e,[s.value?(g(),R(ch,{key:0,ref_key:"builderRef",ref:i,modelValue:N.form.content,"onUpdate:modelValue":G[8]||(G[8]=ge=>N.form.content=ge),disabled:N.document.status==="accepted",placeholders:v(y)},null,8,["modelValue","disabled","placeholders"])):Z("",!0)])])],512)),[[fe,N.visible]])}}},hl=V([]),cu=()=>{const{setLoading:e,isLoading:t}=Cn(),{scriptConfig:n}=qe();hl.value=[...n("documents.types")||[]],Jt(()=>{n("documents.types",[...hl.value])});const o=P(()=>Vt(hl.value,"name"));function a(i){return o.value.find(u=>u.id==i)}function r(i){hl.value=i}function s(i={}){e(!0),Innoclapps.request("/document-types",Object.assign({},{params:{per_page:100}},i)).then(({data:u})=>hl.value=u.data).finally(()=>e(!1))}return{documentTypes:hl,typesByName:o,typesAreBeingFetched:t,findTypeById:a,setDocumentTypes:r,fetchDocumentTypes:s}},B8e={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},N8e={class:"flex flex-1"},V8e={class:"flex flex-col"},L8e={class:"mt-2 h-[104px] w-full overflow-hidden rounded border border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-400"},q8e={key:0,class:"flex flex-col"},U8e={key:1,class:"flex"},j8e={key:2,class:"flex"},dh={__name:"DocumentFormViewTypes",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue"),{scriptConfig:n}=qe(),{t:o}=Pe(),a=[{id:"nav-top",title:o("documents::document.view_type.nav_top.name"),description:o("documents::document.view_type.nav_top.description")},{id:"nav-left",title:o("documents::document.view_type.nav_left.name"),description:o("documents::document.view_type.nav_left.description",{headingTagName:n("documents.navigation_heading_tag_name")})},{id:"nav-left-full-width",title:o("documents::document.view_type.nav_left_full_width.name"),description:o("documents::document.view_type.nav_left_full_width.description",{headingTagName:n("documents.navigation_heading_tag_name")})}];return(r,s)=>{const i=c("Icon");return g(),R(v($s),{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value=u)},{default:p(()=>[l(v(vr),{class:"sr-only"},{default:p(()=>s[1]||(s[1]=[ne("Select HTML view type")])),_:1}),_("div",B8e,[(g(),D(de,null,Ie(a,u=>l(v(Td),{key:u.id,as:"template",value:u.id},{default:p(({checked:d,active:m})=>[_("div",{class:be([d?"border-transparent":"border-neutral-300 dark:border-neutral-500/30",m?"border-primary-600 ring-2 ring-primary-600":"","relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none dark:bg-neutral-500/10"])},[_("span",N8e,[_("span",V8e,[l(v(vr),{as:"span",class:"block text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[ne(K(u.title),1)]),_:2},1024),l(v(gi),{as:"span",class:"mt-1 flex items-center text-base/6 text-neutral-500 dark:text-neutral-300 sm:text-sm/6"},{default:p(()=>[ne(K(u.description),1)]),_:2},1024),l(v(gi),{class:"mt-auto"},{default:p(()=>[_("div",L8e,[u.id==="nav-top"?(g(),D("div",q8e,s[2]||(s[2]=[_("div",{class:"h-5 w-full bg-neutral-100 dark:bg-neutral-300"},null,-1),_("div",{class:"mt-1 space-y-1 px-5 py-2"},[_("div",{class:"h-3 w-1/3 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-3 w-full rounded bg-neutral-100 dark:bg-neutral-200"}),_("div",{class:"mt h-3 w-1/2 rounded bg-neutral-100 dark:bg-neutral-200"}),_("div",{class:"mt h-3 w-full rounded bg-neutral-100 dark:bg-neutral-200"})],-1)]))):u.id==="nav-left"?(g(),D("div",U8e,s[3]||(s[3]=[_("div",{class:"h-[102px] w-6 bg-neutral-200"},null,-1),_("div",{class:"mt-1 flex-1 space-y-1 p-2"},[_("div",{class:"h-3 w-1/3 rounded bg-neutral-200"}),_("div",{class:"h-3 w-full rounded bg-neutral-100"}),_("div",{class:"mt h-3 w-1/2 rounded bg-neutral-100"}),_("div",{class:"mt h-3 w-full rounded bg-neutral-100"}),_("div",{class:"h-3 w-1/3 rounded bg-neutral-100"})],-1)]))):u.id==="nav-left-full-width"?(g(),D("div",j8e,s[4]||(s[4]=[_("div",{class:"h-[102px] w-6 bg-neutral-200 dark:bg-neutral-200"},null,-1),_("div",{class:"flex-1"},[_("div",{class:"flex flex-col"},[_("div",{class:"flex"},[_("div",{class:"flex h-8 w-full flex-col items-center justify-center space-y-1 bg-neutral-100 p-2.5 dark:bg-neutral-300"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200"})]),_("div",{class:"flex h-8 w-full flex-col items-center justify-center space-y-1 bg-neutral-100 p-2.5 dark:bg-neutral-300"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200"})])]),_("div",{class:"flex h-12 w-full flex-col items-center justify-center space-y-1 bg-neutral-300 p-2.5 dark:bg-neutral-400"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"}),_("div",{class:"h-1.5 w-full shrink-0 rounded bg-neutral-200 dark:bg-neutral-300"})]),_("div",{class:"flex h-[22px] w-full flex-col justify-center space-y-1 bg-neutral-200/70 p-2"},[_("div",{class:"h-1.5 w-1/2 shrink-0 rounded bg-neutral-200"})])])],-1)]))):Z("",!0)])]),_:2},1024)])]),l(i,{icon:"CheckCircle",class:be([d?"":"invisible","size-5 shrink-0 text-primary-600"])},null,8,["class"]),_("span",{"aria-hidden":"true",class:be([m?"border":"border-2",d?"border-primary-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"])},null,2)],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])}}},z8e={class:"mx-auto max-w-3xl"},H8e={class:"relative"},W8e={class:"mb-4 mt-3 flex items-center md:absolute md:right-1 md:top-3.5 md:my-0 md:space-x-2.5"},G8e={class:"order-last ml-auto mr-0 place-self-end md:-order-none md:mr-2.5"},K8e=["textContent"],Z8e={class:"sm:grid sm:grid-cols-12 sm:gap-x-4"},Y8e={role:"list",class:"space-y-6"},X8e={class:"relative flex size-6 flex-none items-center justify-center bg-white dark:bg-neutral-900"},Q8e={key:0,class:"flex-auto rounded-md p-3 ring-1 ring-inset ring-neutral-200 dark:ring-neutral-700"},J8e={class:"flex justify-between gap-x-4"},eSe={class:"mt-1.5 py-0.5"},tSe={class:"flex-none"},b5={__name:"DocumentFormDetails",props:uu,setup(e){const t=e,{localizedDateTime:n}=it(),{scriptConfig:o,users:a,currentUser:r,locales:s}=qe(),{typesByName:i}=cu(),u=o("documents.statuses"),d=V(null),m=V(null),f=V(null),h=Le("brands"),y=P(()=>t.document.changelog?t.document.changelog.slice().reverse():[]);function b(){Object.keys(t.document).length===0?(f.value=ft(h.value,I=>I.is_default),f.value&&t.form.set("brand_id",f.value.id),m.value=ft(i.value,["id",parseInt(o("documents.default_document_type"))]),m.value&&t.form.set("document_type_id",m.value.id),d.value=r.value,t.form.set("user_id",d.value.id)):(f.value=t.document.brand,m.value=t.document.type,d.value=t.document.user)}return b(),(I,w)=>{const k=c("Icon"),x=c("ITab"),$=c("IBadge"),C=c("ITabList"),F=c("IAlertBody"),T=c("IAlert"),S=c("ICustomSelect"),A=c("IFormError"),E=c("IFormGroup"),B=c("IFormInput"),M=c("IFormLabel"),N=c("ITabPanel"),G=c("IText"),U=c("ITextSmall"),j=c("ITextDark"),O=c("ITabPanels"),H=c("ITabGroup");return te((g(),D("div",z8e,[_("div",H8e,[l(H,null,{default:p(()=>[l(C,null,{default:p(()=>[l(x,{class:"sm:-ml-3.5"},{default:p(()=>[l(k,{icon:"AdjustmentsVerticalSolid"}),ne(" "+K(I.$t("documents::document.document_details")),1)]),_:1}),l(x,{disabled:Object.keys(I.document).length===0},{default:p(()=>[l(k,{icon:"DocumentText"}),ne(" "+K(I.$t("documents::document.document_activity"))+" ",1),te(l($,{variant:"neutral",text:y.value.length,pill:""},null,8,["text"]),[[fe,y.value.length]])]),_:1},8,["disabled"])]),_:1}),l(O,null,{default:p(()=>[l(N,null,{default:p(()=>[I.document.status==="accepted"?(g(),R(T,{key:0,class:"mb-6"},{default:p(()=>[l(F,null,{default:p(()=>[ne(K(I.$t("documents::document.limited_editing")),1)]),_:1})]),_:1})):Z("",!0),_("div",W8e,[_("div",G8e,[Ee(I.$slots,"actions")]),m.value?(g(),R($,{key:0,class:"mr-2.5 md:mr-0",color:m.value.swatch_color,icon:m.value.icon},{default:p(()=>[_("span",{class:"max-w-[90px] truncate",textContent:K(m.value.name)},null,8,K8e)]),_:1},8,["color","icon"])):Z("",!0),l($,{class:"mr-2.5 md:mr-0",color:I.document.status?v(u)[I.document.status].color:v(u).draft.color,text:I.document.status?v(u)[I.document.status].display_name:v(u).draft.display_name},null,8,["color","text"])]),Ee(I.$slots,"top"),_("div",Z8e,[l(E,{class:"sm:col-span-6","label-for":"brand_id",label:I.$t("brands::brand.brand"),required:""},{default:p(()=>[l(S,{modelValue:f.value,"onUpdate:modelValue":[w[0]||(w[0]=W=>f.value=W),w[1]||(w[1]=W=>I.form.brand_id=W.id)],"input-id":"brand_id",label:"name",options:v(h),clearable:!1,disabled:I.document.status==="accepted"},null,8,["modelValue","options","disabled"]),l(A,{error:I.form.getError("brand_id")},null,8,["error"])]),_:1},8,["label"]),l(E,{class:"sm:col-span-6","label-for":"document_type_id",label:I.$t("documents::document.type.type"),required:""},{default:p(()=>[l(S,{modelValue:m.value,"onUpdate:modelValue":[w[2]||(w[2]=W=>m.value=W),w[3]||(w[3]=W=>I.form.document_type_id=W.id)],"input-id":"document_type_id",label:"name",options:v(i),clearable:!1},null,8,["modelValue","options"]),l(A,{error:I.form.getError("document_type_id")},null,8,["error"])]),_:1},8,["label"])]),l(E,{"label-for":"user_id",label:I.$t("documents::fields.documents.user.name"),required:""},{default:p(()=>[l(S,{modelValue:d.value,"onUpdate:modelValue":[w[4]||(w[4]=W=>d.value=W),w[5]||(w[5]=W=>I.form.user_id=W?W.id:null)],label:"name","input-id":"user_id",clearable:!1,options:v(a),disabled:I.document.status==="accepted"},null,8,["modelValue","options","disabled"]),l(A,{error:I.form.getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(E,{"label-for":"title",label:I.$t("documents::document.title"),required:""},{default:p(()=>[l(B,{id:"title",modelValue:I.form.title,"onUpdate:modelValue":w[6]||(w[6]=W=>I.form.title=W),disabled:I.document.status==="accepted"},null,8,["modelValue","disabled"]),l(A,{error:I.form.getError("title")},null,8,["error"])]),_:1},8,["label"]),l(E,{"label-for":"locale",label:I.$t("core::app.locale"),required:""},{default:p(()=>[l(S,{modelValue:I.form.locale,"onUpdate:modelValue":w[7]||(w[7]=W=>I.form.locale=W),"input-id":"locale",clearable:!1,options:v(s)},null,8,["modelValue","options"]),l(A,{error:I.form.getError("locale")},null,8,["error"])]),_:1},8,["label"]),l(M,{as:"p",class:"my-2",label:I.$t("documents::document.view_type.html_view_type")},null,8,["label"]),l(dh,{modelValue:I.form.view_type,"onUpdate:modelValue":w[8]||(w[8]=W=>I.form.view_type=W)},null,8,["modelValue"]),l(A,{error:I.form.getError("view_type")},null,8,["error"])]),_:3}),l(N,null,{default:p(()=>[_("ul",Y8e,[(g(!0),D(de,null,Ie(y.value,(W,X)=>(g(),D("li",{key:W.id,class:"relative flex gap-x-4"},[_("div",{class:be([X===y.value.length-1?"h-6":"-bottom-6","absolute left-0 top-0 flex w-6 justify-center"])},w[9]||(w[9]=[_("div",{class:"w-px bg-neutral-200 dark:bg-neutral-500"},null,-1)]),2),_("div",X8e,[_("div",{class:be(["h-1.5 w-1.5 rounded-full ring-1",W.properties.type==="success"?"bg-success-200 ring-success-500 dark:bg-success-400":"bg-neutral-100 ring-neutral-300 dark:bg-neutral-300"])},null,2)]),W.properties.section?(g(),D("div",Q8e,[_("div",J8e,[l(G,{class:"py-0.5",text:I.$t(W.properties.lang.key,W.properties.lang.attrs)},null,8,["text"]),l(U,{as:"time",class:"flex-none py-0.5",datetime:W.dateTime,text:v(n)(W.created_at)},null,8,["datetime","text"])]),_("div",eSe,[l(j,{class:"font-medium"},{default:p(()=>[ne(K(I.$t(W.properties.section.lang.key,W.properties.section.lang.attrs||{})),1)]),_:2},1024),_("ul",tSe,[(g(!0),D(de,null,Ie(W.properties.section.list,(q,L)=>(g(),D("li",{key:L},[l(G,null,{default:p(()=>[ne(K(I.$t(q.lang.key,q.lang.attrs||{})),1)]),_:2},1024)]))),128))])])])):(g(),D(de,{key:1},[l(G,{class:"flex-auto py-0.5",text:I.$t(W.properties.lang.key,W.properties.lang.attrs)},null,8,["text"]),l(U,{class:"flex-none py-0.5",as:"time",datetime:W.dateTime,text:v(n)(W.created_at)},null,8,["datetime","text"])],64))]))),128))])]),_:1})]),_:3})]),_:3})])],512)),[[fe,I.visible]])}}},nSe={class:"absolute inset-0 z-40 h-full max-h-full min-h-screen w-full bg-white dark:bg-neutral-900"},oSe={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},aSe={class:"container mx-auto"},rSe={class:"mx-auto max-w-6xl"},lSe={class:"px-3 py-4 sm:px-0"},sSe={class:"flex items-center justify-between space-x-4 sm:space-x-0"},iSe=["value"],uSe={class:"hidden justify-center sm:flex"},cSe={class:"inline-flex"},dSe=["textContent"],mSe={class:"h-full min-h-full overflow-y-auto"},fSe={class:"px-4 py-6 sm:px-0"},pSe={style:{"padding-bottom":"200px"}},y5={__name:"DocumentFormLayout",props:{activeSection:{required:!0,type:String},totalProducts:Number,totalSigners:Number,remainingSigners:Number},emits:["exitRequested","update:active-section"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),r=P(()=>[{name:a("documents::document.sections.details"),id:"details"},{name:a("documents::document.sections.products"),id:"products",badge:n.totalProducts},{name:a("documents::document.sections.signature"),id:"signature",badge:n.totalSigners>0&&n.remainingSigners>0?n.remainingSigners:n.totalSigners,badgeVariant:n.remainingSigners>0?"warning":n.remainingSigners===0&&n.totalSigners>0?"success":"primary"},{name:a("documents::document.sections.content"),id:"content"},{name:a("documents::document.sections.send"),id:"send"}]);function s(i){o("update:active-section",i)}return La(()=>{document.body.classList.add("overflow-y-hidden")}),mn(()=>{document.body.classList.remove("overflow-y-hidden"),document.body.classList.remove("document-section-"+n.activeSection)}),Se(()=>n.activeSection,(i,u)=>{document.body.classList.remove("document-section-"+u),document.body.classList.add("document-section-"+i)},{immediate:!0}),(i,u)=>{const d=c("ILink"),m=c("IFormSelect"),f=c("IBadge"),h=c("Icon");return g(),D("div",nSe,[_("div",oSe,[_("div",aSe,[_("div",rSe,[_("div",lSe,[_("div",sSe,[l(d,{class:"sm:!text-base/6",text:i.$t("core::app.exit"),onClick:u[0]||(u[0]=y=>i.$emit("exitRequested"))},null,8,["text"]),l(m,{class:"block sm:hidden","model-value":e.activeSection,"onUpdate:modelValue":u[1]||(u[1]=y=>s(y))},{default:p(()=>[(g(!0),D(de,null,Ie(r.value,y=>(g(),D("option",{key:y.id,value:y.id},K(y.name),9,iSe))),128))]),_:1},8,["model-value"]),_("div",uSe,[(g(!0),D(de,null,Ie(r.value,(y,b)=>(g(),R(d,{key:y.id,variant:"primary",basic:y.id!==e.activeSection,class:be(["flex items-center font-medium sm:!text-base/6",b!==r.value.length-1?"mr-6 space-x-4":""]),onClick:I=>s(y.id)},{default:p(()=>[_("div",cSe,[_("span",{textContent:K(y.name)},null,8,dSe),te(l(f,{class:"-mt-px ml-1.5",variant:y.badgeVariant||"primary",text:y.badge,pill:""},null,8,["variant","text"]),[[fe,y.badge]])]),b!==r.value.length-1?(g(),R(h,{key:0,icon:"ChevronRight",class:"mt-0.5 size-4 shrink-0 text-neutral-400 dark:text-neutral-500"})):Z("",!0)]),_:2},1032,["basic","class","onClick"]))),128))]),Ee(i.$slots,"actions")])])])])]),_("div",mSe,[_("div",fSe,[_("div",pSe,[Ee(i.$slots,"default")])])])])}}},vSe={class:"mx-auto max-w-5xl"},_5={__name:"DocumentFormProducts",props:uu,setup(e){return(t,n)=>{const o=c("ITextDisplay"),a=c("IFormError");return te((g(),D("div",vSe,[l(o,{class:"mb-6",text:t.$t("documents::document.document_products")},null,8,["text"]),_("div",{class:be({"pointer-events-none opacity-70":t.document.status==="accepted"})},[l(nh,{modelValue:t.form.billable.tax_type,"onUpdate:modelValue":n[0]||(n[0]=r=>t.form.billable.tax_type=r),class:"mb-4"},null,8,["modelValue"]),l(th,{products:t.form.billable.products,"onUpdate:products":n[1]||(n[1]=r=>t.form.billable.products=r),"removed-products":t.form.billable.removed_products,"onUpdate:removedProducts":n[2]||(n[2]=r=>t.form.billable.removed_products=r),"tax-type":t.form.billable.tax_type},{"after-product-select":p(({index:r})=>[l(a,{error:t.form.getError("billable.products."+r+".name")},null,8,["error"])]),_:1},8,["products","removed-products","tax-type"])],2)],512)),[[fe,t.visible]])}}},hSe={class:"mx-auto max-w-3xl"},gSe={key:1,class:"mb-6"},bSe={class:"mb-3 inline-flex items-center"},ySe={class:"ml-1 inline-flex min-w-full items-center justify-center"},_Se={class:"mt-1.5 inline-flex min-w-full justify-center"},wSe={key:2},ISe={class:"mb-4"},xSe={class:"inline-block"},kSe={class:"inline-block"},w5={__name:"DocumentFormSend",props:{...uu,sending:Boolean},emits:["sendRequested","saveRequested"],setup(e){const t=e,{localizedDateTime:n}=it(),{emailAccounts:o,fetchEmailAccounts:a}=$a(),r=Le("brands"),s=V(null),i=V(null),u=V(!!t.form.send_at),d=P(()=>t.form.brand_id?ft(r.value,["id",parseInt(t.form.brand_id)]):null),m=P(()=>t.form.signers.filter(x=>!Ut(x.name)&&!Ut(x.email))),f=P(()=>t.form.recipients.filter(x=>x.send_email&&!Ut(x.name)&&!Ut(x.email))),h=P(()=>t.form.signers.filter(x=>x.send_email&&!Ut(x.name)&&!Ut(x.email))),y=P(()=>t.form.recipients.filter(x=>Ut(x.name)||Ut(x.email)).length>0),b=P(()=>!(!t.form.send_mail_body||!t.form.send_mail_subject||!t.form.send_mail_account_id||f.value.length===0&&h.value.length===0));function I(x){t.form.recipients.splice(x,1)}function w(){t.form.recipients.push({name:"",email:"",send_email:!0}),We(()=>{s.value[t.form.recipients.length-1].focus()})}function k(x){t.form.send_mail_account_id?i.value=ft(x,["id",parseInt(t.form.send_mail_account_id)]):(i.value=x.length?x[0]:null,i.value&&(t.form.send_mail_account_id=i.value.id))}return Se(d,(x,$)=>{(x&&Ut(t.form.send_mail_body)||$&&t.form.send_mail_body===$.config.document.mail_message[t.form.locale])&&(t.form.send_mail_body=x.config.document.mail_message[t.form.locale]),(x&&Ut(t.form.send_mail_subject)||$&&$.config.document.mail_subject[t.form.locale]===t.form.send_mail_subject)&&(t.form.send_mail_subject=x.config.document.mail_subject[t.form.locale])},{immediate:!0}),a().then(k),(x,$)=>{const C=c("IAlertBody"),F=c("IAlert"),T=c("ITextDisplay"),S=c("IText"),A=c("IFormCheckbox"),E=c("IFormCheckboxLabel"),B=c("IFormCheckboxDescription"),M=c("IFormCheckboxField"),N=c("ITableHeader"),G=c("ITableRow"),U=c("ITableHead"),j=c("ITableCell"),O=c("IFormInput"),H=c("IFormError"),W=c("IButton"),X=c("ITableBody"),q=c("ITable"),L=c("ITableOuter"),ee=c("ILink"),ce=c("IFormLabel"),ue=c("ICustomSelect"),oe=c("Icon"),re=c("IFormGroup"),Y=c("Editor"),ae=c("DatePicker"),se=ze("t"),xe=ze("i-tooltip");return te((g(),D("div",hSe,[x.form.originalData.send_at?(g(),R(F,{key:0,class:"mb-5"},{default:p(()=>[l(C,null,{default:p(()=>[ne(K(x.$t("documents::document.send.is_scheduled",{date:v(n)(x.form.originalData.send_at)})),1)]),_:1})]),_:1})):Z("",!0),x.form.requires_signature?(g(),D("div",gSe,[l(T,{text:x.$t("documents::document.send.send_to_signers"),class:be(["mb-3",{hidden:m.value.length===0&&x.document.status==="accepted"}])},null,8,["text","class"]),te(l(S,{class:"-mt-3",text:x.$t("documents::document.send.send_to_signers_empty")},null,8,["text"]),[[fe,m.value.length===0&&x.document.status!=="accepted"]]),(g(!0),D(de,null,Ie(m.value,le=>(g(),R(M,{key:le.email,class:"gap-y-0"},{default:p(()=>[l(A,{checked:le.send_email,"onUpdate:checked":ge=>le.send_email=ge},null,8,["checked","onUpdate:checked"]),l(E,null,{default:p(()=>[ne(K(le.name+" ("+le.email+")"),1)]),_:2},1024),le.sent_at?(g(),R(B,{key:0,class:"-mt-1"},{default:p(()=>[ne(K(x.$t("documents::document.sent_at",{date:v(n)(le.sent_at)})),1)]),_:2},1024)):Z("",!0)]),_:2},1024))),128))])):Z("",!0),_("div",bSe,[l(T,{text:x.$t("documents::document.recipients.recipients")},null,8,["text"]),l(S,{class:"ml-1 mt-1"},{default:p(()=>[ne(" ("+K(x.$t("documents::document.recipients.additional_recipients"))+") ",1)]),_:1})]),l(L,null,{default:p(()=>[l(q,null,{default:p(()=>[l(U,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(G,null,{default:p(()=>[l(N,{class:"w-0 !p-0"}),te(l(N,null,null,512),[[se,"documents::document.recipients.recipient_name"]]),te(l(N,null,null,512),[[se,"documents::document.recipients.recipient_email"]]),te(l(N,{class:"text-center"},null,512),[[se,"documents::document.recipients.is_sent"]]),l(N,{class:"w-0 !p-0"})]),_:1})]),_:1}),l(X,null,{default:p(()=>[x.form.recipients.length===0?(g(),R(G,{key:0},{default:p(()=>[l(j,{colspan:"5",class:"align-middle"},{default:p(()=>[l(S,{class:"ml-2"},{default:p(()=>[ne(K(x.$t("documents::document.recipients.no_recipients")),1)]),_:1})]),_:1})]),_:1})):Z("",!0),(g(!0),D(de,null,Ie(x.form.recipients,(le,ge)=>(g(),R(G,{key:ge},{default:p(()=>[l(j,{class:"border-r border-neutral-900/5 dark:border-white/5"},{default:p(()=>[_("span",ySe,[l(A,{checked:le.send_email,"onUpdate:checked":ve=>le.send_email=ve},null,8,["checked","onUpdate:checked"])])]),_:2},1024),l(j,{class:"align-top"},{default:p(()=>[l(O,{ref_for:!0,ref_key:"recipientNameInputRef",ref:s,modelValue:le.name,"onUpdate:modelValue":ve=>le.name=ve,placeholder:x.$t("documents::document.recipients.enter_full_name")},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(H,{error:x.form.getError("recipients."+ge+".name")},null,8,["error"])]),_:2},1024),l(j,{class:"align-top"},{default:p(()=>[l(O,{modelValue:le.email,"onUpdate:modelValue":ve=>le.email=ve,type:"email",placeholder:x.$t("documents::document.recipients.enter_email"),onKeyup:mo(w,["enter"])},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(H,{error:x.form.getError("recipients."+ge+".email")},null,8,["error"])]),_:2},1024),l(j,{class:"align-middle"},{default:p(()=>[_("span",_Se,[te(_("span",{class:be(["inline-block size-4 rounded-full",le.sent_at?"bg-success-400":"bg-danger-400"])},null,2),[[xe,le.sent_at?v(n)(le.sent_at):null]])])]),_:2},1024),l(j,{class:"align-middle"},{default:p(()=>[l(W,{class:"mt-0.5",icon:"XSolid",basic:"",onClick:ve=>I(ge)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),te(l(ee,{class:"mt-3 inline-block font-medium",onClick:w},{default:p(()=>[ne(" + "+K(x.$t("documents::document.recipients.add")),1)]),_:1},512),[[fe,!y.value]]),l(T,{class:"mb-3 mt-6",text:x.$t("documents::document.send.send")},null,8,["text"]),te(l(ce,{as:"p",class:"mt-3",text:x.$t("documents::document.send.select_brand")},null,8,["text"]),[[fe,!d.value]]),d.value?(g(),D("div",wSe,[l(re,{"label-for":"send_mail_account_id",label:x.$t("documents::document.send.send_from_account")},{default:p(()=>[v(o).length?(g(),R(ue,{key:0,"input-id":"send_mail_account_id",label:"email","model-value":i.value,clearable:!1,options:v(o),"onUpdate:modelValue":$[0]||($[0]=le=>x.form.send_mail_account_id=le.id),onOptionSelected:$[1]||($[1]=le=>k(v(o)))},null,8,["model-value","options"])):(g(),R(S,{key:1,class:"mt-2 inline-flex items-center"},{default:p(()=>[l(oe,{icon:"ExclamationTriangle",class:"mr-1 size-5 text-warning-500"}),ne(" "+K(x.$t("documents::document.send.connect_an_email_account")),1)]),_:1}))]),_:1},8,["label"]),l(re,{"label-for":"send_mail_subject",class:"mt-4",label:x.$t("documents::document.send.send_subject")},{default:p(()=>[l(O,{id:"send_mail_subject",modelValue:x.form.send_mail_subject,"onUpdate:modelValue":$[2]||($[2]=le=>x.form.send_mail_subject=le)},null,8,["modelValue"])]),_:1},8,["label"]),l(re,{"label-for":"send_mail_body",label:x.$t("documents::document.send.send_body")},{default:p(()=>[l(Y,{id:"send_mail_body",modelValue:x.form.send_mail_body,"onUpdate:modelValue":$[3]||($[3]=le=>x.form.send_mail_body=le),"with-image":!1,"absolute-urls":""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",ISe,[_("div",xSe,[l(M,null,{default:p(()=>[l(A,{checked:u.value,"onUpdate:checked":[$[4]||($[4]=le=>u.value=le),$[5]||($[5]=le=>le?"":x.form.send_at=null)],disabled:!x.document.id},null,8,["checked","disabled"]),l(E,{text:x.$t("documents::document.send.send_later")},null,8,["text"]),x.document.id?Z("",!0):(g(),R(B,{key:0},{default:p(()=>[ne(K(x.$t("documents::document.send.save_to_schedule")),1)]),_:1}))]),_:1})]),u.value&&x.document.id?(g(),R(ae,{key:0,modelValue:x.form.send_at,"onUpdate:modelValue":$[6]||($[6]=le=>x.form.send_at=le),class:"mt-3","min-date":"now",mode:"dateTime",placeholder:x.$t("documents::document.send.select_schedule_date"),required:!0},null,8,["modelValue","placeholder"])):Z("",!0)]),te((g(),D("span",kSe,[te(l(W,{variant:"primary",icon:"Mail",loading:e.sending,text:x.$t("core::app.send"),disabled:e.sending||!b.value||x.document.authorizations&&!x.document.authorizations.update,onClick:$[7]||($[7]=le=>x.$emit("sendRequested"))},null,8,["loading","text","disabled"]),[[fe,!u.value]]),te(l(W,{variant:"primary",icon:"Clock",text:x.$t("documents::document.send.schedule"),disabled:x.form.busy||!b.value||!x.form.send_at||x.document.authorizations&&!x.document.authorizations.update,onClick:$[8]||($[8]=le=>x.$emit("saveRequested"))},null,8,["text","disabled"]),[[fe,u.value]])])),[[xe,x.document.authorizations&&!x.document.authorizations.update?x.$t("core::app.action_not_authorized"):""]])])):Z("",!0)],512)),[[fe,x.visible]])}}},$Se={class:"mx-auto max-w-3xl"},CSe={class:"-space-y-px rounded-md bg-white dark:bg-neutral-900"},SSe={class:"ml-3 flex flex-col"},TSe={class:"hidden sm:block"},ESe={class:"bg-success-50 px-5 py-2 text-success-500 dark:bg-success-600/20"},FSe={class:"font-medium"},ASe=["textContent"],RSe={class:"mt-1 inline-flex flex-row space-x-2"},DSe={class:"font-medium"},OSe=["textContent"],PSe={class:"font-medium"},MSe=["textContent"],BSe={class:"mt-1.5 inline-flex min-w-full justify-center"},I5={__name:"DocumentFormSignature",props:uu,setup(e){const t=e,{t:n}=Pe(),{localizedDateTime:o}=it(),a=V(null),r=[{name:n("documents::document.signature.no_signature"),description:n("documents::document.signature.no_signature_description"),value:!1},{name:n("documents::document.signature.e_signature"),description:n("documents::document.signature.e_signature_description"),value:!0}],s=P(()=>t.form.signers.filter(d=>Ut(d.name)||Ut(d.email)).length>0);function i(){t.form.signers.push({name:"",email:"",send_email:!0}),We(()=>{a.value[t.form.signers.length-1].focus()})}function u(d){t.form.signers.splice(d,1)}return(d,m)=>{const f=c("ITextDisplay"),h=c("ITableHeader"),y=c("ITableRow"),b=c("ITableHead"),I=c("IText"),w=c("ITableCell"),k=c("IFormInput"),x=c("IFormError"),$=c("IButton"),C=c("ITableBody"),F=c("ITable"),T=c("ITableOuter"),S=c("ILink"),A=ze("t"),E=ze("i-tooltip");return te((g(),D("div",$Se,[l(f,{class:"mb-3",text:d.$t("documents::document.sections.signature")},null,8,["text"]),l(v($s),{modelValue:d.form.requires_signature,"onUpdate:modelValue":m[0]||(m[0]=B=>d.form.requires_signature=B)},{default:p(()=>[l(v(vr),{class:"sr-only"},{default:p(()=>[ne(K(d.$t("documents::document.sections.signature")),1)]),_:1}),_("div",CSe,[(g(),D(de,null,Ie(r,(B,M)=>l(v(Td),{key:B.name,as:"template",value:B.value},{default:p(({checked:N,active:G})=>[_("div",{class:be(["relative flex cursor-pointer border p-4 focus:outline-none",d.document.status==="accepted"?"pointer-events-none opacity-70":"",M===0?"rounded-tl-md rounded-tr-md":"",M===r.length-1?"rounded-bl-md rounded-br-md":"",N?"z-10 border-primary-700/10 bg-primary-50 text-primary-700 dark:border-primary-400/20 dark:bg-primary-400/10":"border-neutral-200 bg-white dark:border-neutral-500/30 dark:bg-neutral-800"])},[_("span",{"aria-hidden":"true",class:be([N?"border-transparent bg-primary-600":"border-neutral-300 bg-white",G?"ring-2 ring-primary-500 ring-offset-2":"","mt-0.5 flex size-4 shrink-0 cursor-pointer items-center justify-center rounded-full border"])},m[1]||(m[1]=[_("span",{class:"h-1.5 w-1.5 rounded-full bg-white"},null,-1)]),2),_("span",SSe,[l(v(vr),{as:"span",class:be([N?"text-primary-800 dark:text-primary-400":"text-neutral-900 dark:text-neutral-200","block text-base font-medium sm:text-sm"])},{default:p(()=>[ne(K(B.name),1)]),_:2},1032,["class"]),l(v(gi),{as:"span",class:be([N?"text-primary-700 dark:text-primary-300":"text-neutral-500 dark:text-neutral-400","block text-base/6 sm:text-sm/6"])},{default:p(()=>[ne(K(B.description),1)]),_:2},1032,["class"])])],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"]),te(_("div",null,[l(f,{class:"mb-3 mt-6",text:d.$t("documents::document.signers.document_signers")},null,8,["text"]),l(T,null,{default:p(()=>[l(F,null,{default:p(()=>[l(b,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(y,null,{default:p(()=>[l(h,null,{default:p(()=>[ne(K(d.$t("documents::document.signers.signer_name")),1)]),_:1}),l(h,null,{default:p(()=>[ne(K(d.$t("documents::document.signers.signer_email")),1)]),_:1}),l(h,{class:"text-center"},{default:p(()=>[te(_("span",TSe,null,512),[[A,"documents::document.signers.is_signed"]])]),_:1}),l(h)]),_:1})]),_:1}),l(C,null,{default:p(()=>[d.form.signers.length===0?(g(),R(y,{key:0},{default:p(()=>[l(w,{colspan:"4",class:"align-middle"},{default:p(()=>[l(I,{class:"ml-2"},{default:p(()=>[ne(K(d.$t("documents::document.signers.no_signers")),1)]),_:1})]),_:1})]),_:1})):Z("",!0),(g(!0),D(de,null,Ie(d.form.signers,(B,M)=>(g(),D(de,{key:"signer-"+M},[B.signed_at?(g(),R(y,{key:0},{default:p(()=>[l(w,{colspan:"4",class:"!p-0"},{default:p(()=>[_("div",ESe,[_("p",null,[_("span",FSe,K(d.$t("documents::document.signature.signature"))+": ",1),_("span",{class:"font-signature text-[1.4rem] text-success-700",textContent:K(B.signature)},null,8,ASe)]),_("div",RSe,[_("p",null,[_("span",DSe,K(d.$t("documents::document.signature.signed_on"))+": ",1),_("span",{textContent:K(v(o)(B.signed_at))},null,8,OSe)]),_("p",null,[_("span",PSe,K(d.$t("documents::document.signature.sign_ip"))+": ",1),_("span",{textContent:K(B.sign_ip)},null,8,MSe)])])])]),_:2},1024)]),_:2},1024)):Z("",!0),l(y,null,{default:p(()=>[l(w,{class:"align-top"},{default:p(()=>[l(k,{ref_for:!0,ref_key:"signerNameInputRef",ref:a,modelValue:B.name,"onUpdate:modelValue":N=>B.name=N,placeholder:d.$t("documents::document.signers.enter_full_name"),disabled:d.document.status==="accepted"},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),l(x,{error:d.form.getError("signers."+M+".name")},null,8,["error"])]),_:2},1024),l(w,{class:"align-top"},{default:p(()=>[l(k,{modelValue:B.email,"onUpdate:modelValue":N=>B.email=N,type:"email",disabled:d.document.status==="accepted",placeholder:d.$t("documents::document.signers.enter_email"),onKeyup:mo(i,["enter"])},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]),l(x,{error:d.form.getError("signers."+M+".email")},null,8,["error"])]),_:2},1024),l(w,{class:"align-middle"},{default:p(()=>[_("span",BSe,[te(_("span",{class:be(["inline-block size-4 rounded-full",B.signed_at?"bg-success-400":"bg-danger-400"])},null,2),[[E,B.signed_at?v(o)(B.signed_at):null]])])]),_:2},1024),l(w,{class:"align-middle"},{default:p(()=>[l($,{class:"mt-0.5",icon:"XSolid",basic:"",onClick:N=>u(M)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1}),te(l(S,{class:"mt-3 inline-block font-medium",onClick:i},{default:p(()=>[ne(" + "+K(d.$t("documents::document.signers.add")),1)]),_:1},512),[[fe,!s.value&&d.document.status!=="accepted"]])],512),[[fe,d.form.requires_signature]])],512)),[[fe,d.visible]])}}},NSe={key:0},VSe={class:"inline-block"},LSe={key:0,class:"ml-2"},qSe=["textContent"],x5={__name:"DocumentsCreate",props:{viaResource:String,viaResourceId:[String,Number],relatedResource:Object,editRedirectHandler:Function,exitUsing:Function},emits:["created","sent"],setup(e,{emit:t}){const n=e,o=t,a=Le("synchronizeResource",null),r=Le("incrementResourceCount",null),{t:s}=Pe(),i=wt(),u=Ct(),{scriptConfig:d,currentUser:m}=qe(),{createResource:f,updateResource:h}=qt(Innoclapps.resourceName("documents")),y=V(null),b=V(!1),{orderedBrands:I,brandsAreBeingFetched:w}=lu(),k=V(u.query.section||"details"),x=V({}),$=V(!1),C=V(null),F=V(!0),T=V([]);st("brands",I);const S=P(()=>!w.value),{documentTypes:A}=cu(),{form:E}=Qe({title:null,brand_id:null,user_id:null,content:null,view_type:"nav-top",locale:m.value.locale,document_type_id:null,requires_signature:!0,signers:[],recipients:[],pdf:{padding:"15px"},billable:{tax_type:d("tax_type"),products:[]},send:!1,send_mail_account_id:null,send_mail_body:null,send_mail_subject:null,associations:{}});function B(){if(n.exitUsing){n.exitUsing();return}i.back()}function M(oe,re={}){if(i.document=oe,n.editRedirectHandler){n.editRedirectHandler(oe,re);return}i.replace({name:"edit-document",params:{id:oe.id},query:re})}function N(){b.value=!0,j().then(oe=>{if(E.send=!0,!oe.authorizations.view){M(oe,{section:"send"}),Innoclapps.error("Document not sent, your account not authorized to perform this action.");return}E.billable=oe.billable,E.signers=oe.signers,h(E,oe.id).then(re=>{Innoclapps.success(s("documents::document.sent")),o("sent",re),M(re,{section:"send"})})}).catch(()=>b.value=!1)}function G(){j().then(B)}async function U(){let oe=await j();return M(oe,{section:k.value}),oe}async function j(){E.busy=!0,y.value.builderRef&&await y.value.builderRef.saveBase64Images(),await We();let oe=await f(E).catch(re=>(re.isValidationError()&&Innoclapps.error(s("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(re)));return n.viaResource&&oe.authorizations.view&&(a({documents:[oe]}),r(["documents_count","documents_for_user_count","draft_documents_for_user_count"])),o("created",oe),oe}function O({deal:oe}){C.value=oe,T.value.push(oe),X(oe),$.value=!1}function H(oe,re){let Y=Mt(x.value[re],["id",oe]),ae=E.associations[re].findIndex(se=>se===oe);Y!==-1&&x.value[re].splice(Y,1),ae!==-1&&E.associations[re].splice(ae,1)}function W(oe,re){Object.hasOwn(E.associations,re)||(E.associations[re]=[]),Object.hasOwn(x.value,re)||(x.value[re]=[]),ft(E.associations[re],["id",oe.id])||(E.associations[re].push(oe.id),x.value[re].push(oe))}function X(oe){oe&&(W({id:oe.id,display_name:oe.display_name},"deals"),L(oe))}function q(oe){!oe&&C.value&&H(C.value.id,"deals"),C.value=oe}function L(oe){!E.title&&E.document_type_id&&(E.title=`${oe.display_name} ${ft(A.value,["id",parseInt(E.document_type_id)]).name}`),oe.billable&&(E.billable.products=oe.billable.products.map(re=>pr(re,["id"])),E.billable.tax_type=oe.billable.tax_type),E.requires_signature&&(oe.contacts||[]).filter(re=>!!re.email).forEach(re=>E.signers.unshift({name:re.display_name,email:re.email,send_email:!0}))}function ee(){W({id:n.viaResourceId,display_name:n.relatedResource.display_name},n.viaResource),n.viaResource==="deals"&&(L(n.relatedResource),F.value=!1),n.viaResource==="contacts"&&n.relatedResource.email&&E.signers.unshift({name:n.relatedResource.display_name,email:n.relatedResource.email,send_email:!0}),n.viaResource==="companies"&&(n.relatedResource.contacts||[]).filter(oe=>!!oe.email).forEach(oe=>{E.signers.unshift({name:oe.display_name,email:oe.email,send_email:!0})})}async function ce(oe,re){if(oe==""){T.value=[];return}re(!0);let{data:Y}=await Innoclapps.request("/deals/search",{params:{q:oe,with:"billable.products"}});T.value=Y,re(!1)}function ue(){n.viaResource&&ee(),E.set("user_id",m.value.id)}return ue(),(oe,re)=>{const Y=c("IDropdownItem"),ae=c("IDropdownMenu"),se=c("IExtendedDropdown"),xe=c("Icon"),le=c("ILink"),ge=c("ICustomSelect"),ve=c("IFormGroup"),ie=c("CreateDealModal"),me=ze("i-tooltip"),Ce=ze("t");return g(),R(To,{to:"body"},[l(y5,{"active-section":k.value,"onUpdate:activeSection":re[2]||(re[2]=ke=>k.value=ke),"total-products":v(E).billable.products.length,"total-signers":v(E).requires_signature?v(E).signers.length:void 0,onExitRequested:B},{actions:p(()=>[l(se,{placement:"bottom-end",disabled:v(E).busy,loading:v(E).busy,text:oe.$t("core::app.save"),onClick:U},{default:p(()=>[l(ae,null,{default:p(()=>[l(Y,{text:oe.$t("core::app.save_and_exit"),onClick:G},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])]),default:p(()=>[S.value?(g(),D("div",NSe,[l(b5,{form:v(E),visible:k.value=="details"},{actions:p(()=>[_("div",VSe,[l(Uo,{modelValue:v(E).associations,"onUpdate:modelValue":re[0]||(re[0]=ke=>v(E).associations=ke),placement:"bottom-end","width-class":"w-80","primary-resource-name":e.viaResource,"primary-record":e.viaResource?e.relatedResource:void 0,"primary-record-disabled":!0,"initial-associateables":e.viaResource?e.relatedResource:void 0,associateables:x.value},{"after-record":p(({record:ke,selectedRecords:Be,isSearching:Fe,title:he})=>[Be[0]===ke.id&&!Fe?te((g(),D("span",LSe,[l(xe,{icon:"CodeBracket",class:"size-4 text-neutral-500 dark:text-neutral-400"})])),[[me,oe.$t("documents::document.will_use_placeholders_from_record",{resourceName:he}),void 0,{top:!0}]]):Z("",!0)]),_:1},8,["modelValue","primary-resource-name","primary-record","initial-associateables","associateables"])])]),top:p(()=>[F.value?(g(),R(ve,{key:0,class:"mb-6 mt-3 rounded-lg border border-neutral-200 bg-info-50/40 p-5 dark:border-info-400/10 dark:bg-info-900/10",description:oe.$t("documents::document.deal_description")},{default:p(()=>[l(ge,{ref:"createDealSelectRef",label:"name","input-id":"deal_id",placeholder:oe.$t("deals::deal.choose_or_create"),options:T.value,filterable:!1,"model-value":C.value,debounce:"","onUpdate:modelValue":q,onSearch:ce,onOptionSelected:X},{"no-options":p(({searching:ke,text:Be})=>[te(_("span",{textContent:K(Be)},null,8,qSe),[[fe,ke]]),te(_("span",null,null,512),[[fe,!ke],[Ce,"core::app.type_to_search"]])]),footer:p(()=>[l(le,{class:"block border-t border-neutral-200 px-4 py-2 hover:bg-neutral-50 dark:border-neutral-500/30 dark:hover:bg-neutral-700",onClick:re[1]||(re[1]=ke=>{$.value=!0,oe.$refs.createDealSelectRef.hide()})},{default:p(()=>[ne(" + "+K(oe.$t("deals::deal.create")),1)]),_:1})]),_:1},8,["placeholder","options","model-value"])]),_:1},8,["description"])):Z("",!0)]),_:1},8,["form","visible"]),l(_5,{form:v(E),visible:k.value=="products"},null,8,["form","visible"]),l(g5,{ref_key:"sectionContentRef",ref:y,form:v(E),visible:k.value=="content"},null,8,["form","visible"]),l(I5,{form:v(E),visible:k.value=="signature"},null,8,["form","visible"]),l(w5,{sending:b.value,form:v(E),visible:k.value=="send",onSendRequested:N,onSaveRequested:U},null,8,["sending","form","visible"])])):Z("",!0)]),_:1},8,["active-section","total-products","total-signers"]),l(ie,{visible:$.value,"onUpdate:visible":re[3]||(re[3]=ke=>$.value=ke),onCreated:O},null,8,["visible"])])}}},USe={class:"flex space-x-0.5"},jSe={class:"inline-block"},zSe={key:0,class:"container mx-auto"},HSe={key:0,class:"mx-auto mb-6 max-w-6xl"},WSe={class:"inline-block"},GSe={key:0,class:"ml-2"},Tc={__name:"DocumentsEdit",props:{id:Number,viaResource:String,viaResourceId:[String,Number],relatedResource:Object,section:String,exitUsing:Function},emits:["changed","updated","deleted","cloned","lost","reactivated","accept","sent","associations-updated"],setup(e,{emit:t}){const n=e,o=t,a=Innoclapps.resourceName("documents"),r=Le("synchronizeResource",null),s=Le("incrementResourceCount",null),{t:i}=Pe(),{retrieveResource:u,deleteResource:d,cloneResource:m}=qt(a),f=wt(),h=Ct(),y=yo(),b=V(null),I=V(!1),w=V(!1),{orderedBrands:k,brandsAreBeingFetched:x}=lu(),$=V(n.section||h.query.section||"details"),C=V({}),F=V(!1),{form:T}=Qe(),S=P(()=>w.value&&!x.value);st("brands",k),st("document",C);function A(q){return f.document?new Promise(L=>L(f.document)):u(q)}function E(q){A(q).then(L=>{T.set({send:!1}),B(L),w.value=!0,f.document&&delete f.document}).catch(L=>{L.response.status===404&&(F.value=!0)})}function B(q){C.value=q,n.viaResource||(y.value=q.title),T.set({title:q.title,view_type:q.view_type,locale:q.locale,user_id:q.user_id,brand_id:q.brand_id,document_type_id:q.document_type_id,content:q.content,requires_signature:q.requires_signature,signers:q.signers,recipients:q.recipients,pdf:q.pdf,billable:{tax_type:q.billable.tax_type,products:q.billable.products,removed_products:[]},send_at:q.send_at,send_mail_account_id:q.send_mail_account_id,send_mail_body:q.send_mail_body,send_mail_subject:q.send_mail_subject})}async function M(){await Innoclapps.confirm({message:i("documents::document.actions.mark_as_lost_message"),title:!1,icon:"QuestionMarkCircle",iconWrapperColorClass:"bg-info-100",iconColorClass:"text-info-400",html:!0,confirmText:i("core::app.confirm"),confirmVariant:"info"}),Innoclapps.request().post(`/documents/${C.value.id}/lost`).then(({data:q})=>{o("lost",q),o("changed",q),Innoclapps.success(i("documents::document.marked_as_lost")),X()})}function N(){Innoclapps.request().post(`/documents/${C.value.id}/accept`).then(({data:q})=>{o("accept",q),o("changed",q),Innoclapps.success(i("documents::document.marked_as_accepted")),B(q)})}async function G(){Innoclapps.request().post(`/documents/${C.value.id}/draft`).then(({data:q})=>{Innoclapps.success(i("documents::document.reactivated")),o("reactivated",q),o("changed",q),B(q)})}function U(){I.value=!0,j().then(()=>{T.send=!0,j().then(()=>Innoclapps.success(i("documents::document.sent"))).finally(q=>{T.send=!1,I.value=!1,o("sent",q)})}).catch(q=>{console.error(q),I.value=!1})}async function j(){T.busy=!0,b.value.builderRef&&await b.value.builderRef.saveBase64Images(),await We();let q=await T.put(`/documents/${C.value.id}`).catch(L=>(L.isValidationError()&&Innoclapps.error(i("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(L)));return B(q),o("updated",q),o("changed",q),q}function O(){j().then(X)}async function H(){const q=await m(C.value.id);o("cloned",q),n.viaResource?(f.push({name:h.name,params:{documentId:q.id}}),n.viaResource&&q.authorizations.view&&(r({documents:[q]}),s(["documents_count","documents_for_user_count","draft_documents_for_user_count"]))):f.push({name:h.name,params:{id:q.id}}),B(q)}async function W(){await d(C.value.id),o("deleted",C.value),Innoclapps.success(i("documents::document.deleted")),X()}function X(){if(n.exitUsing){n.exitUsing();return}f.back()}return E(n.id||h.params.id),(q,L)=>{const ee=c("IButtonCopy"),ce=c("IDropdownButton"),ue=c("IDropdownItem"),oe=c("IDropdownMenu"),re=c("IDropdown"),Y=c("IDropdownSeparator"),ae=c("IExtendedDropdown"),se=c("IAlertBody"),xe=c("IAlert"),le=c("Icon"),ge=c("IOverlay"),ve=ze("i-tooltip");return g(),R(To,{to:"body",disabled:F.value},[l(y5,{"active-section":$.value,"onUpdate:activeSection":L[2]||(L[2]=ie=>$.value=ie),"total-products":S.value?v(T).billable.products.length:void 0,"total-signers":S.value&&v(T).requires_signature?v(T).signers.length:void 0,"remaining-signers":S.value?v(T).signers.filter(ie=>!ie.signed_at).length:void 0,onExitRequested:X},{actions:p(()=>[_("div",USe,[S.value&&C.value.authorizations.view?te((g(),R(ee,{key:0,class:"shrink-0",text:C.value.public_url,"success-message":q.$t("documents::document.url_copied")},null,8,["text","success-message"])),[[ve,q.$t("documents::document.copy_url"),void 0,{bottom:!0}]]):Z("",!0),S.value&&C.value.authorizations.view?(g(),R(re,{key:1,placement:"bottom-end"},{default:p(()=>[l(ce,{icon:"DocumentDownload",basic:"","no-caret":""}),l(oe,null,{default:p(()=>[l(ue,{target:"_blank",rel:"noopener noreferrer",href:C.value.public_url+"/pdf",text:q.$t("documents::document.view_pdf")},null,8,["href","text"]),l(ue,{href:C.value.public_url+"/pdf?output=download",text:q.$t("documents::document.download_pdf")},null,8,["href","text"])]),_:1})]),_:1})):Z("",!0),te((g(),D("span",jSe,[S.value?(g(),R(ae,{key:0,placement:"bottom-end",disabled:v(T).busy||!C.value.authorizations.update,loading:v(T).busy,text:q.$t("core::app.save"),onClick:j},{default:p(()=>[l(oe,null,{default:p(()=>[l(ue,{text:q.$t("core::app.save_and_exit"),onClick:O},null,8,["text"]),C.value.status!=="accepted"&&C.value.status!=="lost"?(g(),R(ue,{key:0,text:q.$t("documents::document.actions.mark_as_lost"),onClick:M},null,8,["text"])):Z("",!0),C.value.status!=="accepted"?(g(),R(ue,{key:1,text:q.$t("documents::document.actions.mark_as_accepted"),onClick:N},null,8,["text"])):Z("",!0),C.value.status==="lost"?(g(),R(ue,{key:2,text:q.$t("documents::document.actions.reactivate"),confirmable:"",onConfirmed:G},null,8,["text"])):Z("",!0),C.value.status==="accepted"&&C.value.marked_accepted_by?(g(),R(ue,{key:3,text:q.$t("documents::document.actions.undo_acceptance"),confirmable:"",onConfirmed:G},null,8,["text"])):Z("",!0),l(ue,{text:q.$t("core::app.clone"),onClick:H},null,8,["text"]),l(Y),C.value.authorizations.delete?(g(),R(ue,{key:4,text:q.$t("core::app.delete"),"confirm-text":q.$t("core::app.confirm"),confirmable:"",onConfirmed:W},null,8,["text","confirm-text"])):Z("",!0)]),_:1})]),_:1},8,["disabled","loading","text"])):Z("",!0)])),[[ve,C.value.authorizations&&!C.value.authorizations.update?q.$t("core::app.action_not_authorized"):"",void 0,{bottom:!0}]])])]),default:p(()=>[l(ge,{show:!S.value},{default:p(()=>[S.value?(g(),D("div",zSe,[S.value&&!C.value.authorizations.view?(g(),D("div",HSe,[l(xe,{variant:"warning"},{default:p(()=>[l(se,null,{default:p(()=>[ne(K(q.$t("core::role.view_non_authorized_after_record_create")),1)]),_:1})]),_:1})])):Z("",!0),l(b5,{form:v(T),document:C.value,visible:$.value=="details"},{actions:p(()=>[_("div",WSe,[l(Uo,{"associations-count":C.value.associations_count,"onUpdate:associationsCount":L[0]||(L[0]=ie=>C.value.associations_count=ie),placement:"bottom-end","width-class":"w-80","resource-name":v(a),"resource-id":C.value.id,"initial-associateables":e.viaResource?e.relatedResource:void 0,"primary-resource-name":e.viaResource,onSynced:L[1]||(L[1]=ie=>q.$emit("changed",ie))},{"after-record":p(({record:ie,isSelected:me,isSearching:Ce,title:ke})=>[ie.is_primary_associated&&me&&!Ce?te((g(),D("span",GSe,[l(le,{icon:"CodeBracket",class:"size-4 text-neutral-500 dark:text-neutral-400"})])),[[ve,q.$t("documents::document.will_use_placeholders_from_record",{resourceName:ke}),void 0,{top:!0}]]):Z("",!0)]),_:1},8,["associations-count","resource-name","resource-id","initial-associateables","primary-resource-name"])])]),_:1},8,["form","document","visible"]),l(_5,{form:v(T),visible:$.value=="products",document:C.value},null,8,["form","visible","document"]),l(g5,{ref_key:"sectionContentRef",ref:b,form:v(T),document:C.value,visible:$.value=="content","is-ready":S.value},null,8,["form","document","visible","is-ready"]),l(I5,{form:v(T),document:C.value,visible:$.value=="signature"},null,8,["form","document","visible"]),l(w5,{sending:I.value,form:v(T),document:C.value,visible:$.value=="send",onSendRequested:U,onSaveRequested:j},null,8,["sending","form","document","visible"])])):Z("",!0)]),_:1},8,["show"])]),_:1},8,["active-section","total-products","total-signers","remaining-signers"])],8,["disabled"])}}},KSe={class:"my-1 flex items-center"},ZSe={class:"mt-5"},YSe={class:"rounded-md bg-neutral-50 px-6 py-5 dark:bg-neutral-800 sm:flex sm:items-start sm:justify-between"},XSe={class:"sm:flex sm:items-start"},QSe={class:"mt-3 sm:ml-4 sm:mt-0"},JSe=["textContent"],e3e={class:"mt-4 sm:ml-6 sm:mt-0 sm:shrink-0"},t3e={class:"flex items-center space-x-2"},k5=Object.assign({inheritAttrs:!1},{__name:"RelatedDocument",props:{documentId:{type:Number,required:!0},typeId:{type:Number,required:!0},status:{type:String,required:!0},displayName:{type:String,required:!0},path:{type:String,required:!0},publicUrl:{type:String,required:!0},acceptedAt:String,lastDateSent:String,amount:{required:!0},authorizations:{type:Object,required:!0},associationsCount:{type:Number,required:!0},viaResource:{type:String,required:!0},viaResourceId:{required:!0,type:[String,Number]},relatedResource:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("documents"),o=Le("synchronizeResource"),a=Le("decrementResourceCount"),{t:r}=Pe(),{deleteResource:s}=qt(n),{formatMoney:i}=lo(),{localizedDateTime:u}=it(),{scriptConfig:d}=qe(),{findTypeById:m}=cu(),f=V(!1),h=V(null),y=P(()=>m(t.typeId)),b=d("documents.statuses");function I(C){o({documents:C})}function w(C){o({documents:{id:C.id,_delete:!0}}),x()}function k(C=null){h.value=typeof C=="string"?C:"details",f.value=!0}function x(){Ot("refresh-details-view")}async function $(C){await s(C),t.status==="draft"&&a("draft_documents_for_user_count"),o({documents:{id:C,_delete:!0}}),a("documents_count"),a("documents_for_user_count"),Innoclapps.success(r("documents::document.deleted"))}return(C,F)=>{const T=c("ILink"),S=c("IBadge"),A=c("ITextBlockDark"),E=c("IText"),B=c("ITextBlock"),M=c("IButton"),N=c("IDropdownItem"),G=c("IDropdownSeparator"),U=c("IDropdownMinimal"),j=c("ICardBody"),O=c("ICard");return g(),D(de,null,[f.value?(g(),R(Tc,{key:0,id:e.documentId,section:h.value,"via-resource":e.viaResource,"exit-using":()=>f.value=!1,onReactivated:x,onSent:x,onLost:x,onAccept:x,onChanged:I,onDeleted:w},null,8,["id","section","via-resource","exit-using"])):Z("",!0),l(O,Ue(C.$attrs,{class:"document-"+e.documentId}),{default:p(()=>[l(j,null,{default:p(()=>[_("div",KSe,[l(T,{class:"font-medium",href:e.path,text:e.displayName,basic:"",onClick:k},null,8,["href","text"]),l(S,{class:"ml-3",text:y.value.name,color:y.value.swatch_color,icon:y.value.icon},null,8,["text","color","icon"])]),l(Uo,{placement:"bottom-start","associations-count":e.associationsCount,"initial-associateables":e.relatedResource,"resource-id":e.documentId,"resource-name":v(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:F[0]||(F[0]=H=>v(o)({documents:H}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"]),_("div",ZSe,[_("div",YSe,[_("div",XSe,[l(S,{class:"w-auto self-start sm:shrink-0",text:v(b)[e.status].display_name,color:v(b)[e.status].color},null,8,["text","color"]),_("div",QSe,[l(A,{class:"font-medium",text:v(i)(e.amount)},null,8,["text"]),l(E,{class:"mt-1",text:C.$t("documents::document.sent_at",{date:e.lastDateSent?v(u)(e.lastDateSent):"N/A"})},null,8,["text"]),e.acceptedAt?(g(),R(B,{key:0,class:"mt-1 space-x-1 sm:flex sm:items-center"},{default:p(()=>[_("span",null,K(C.$t("documents::document.accepted_at"))+":",1),_("span",{textContent:K(v(u)(e.acceptedAt))},null,8,JSe)]),_:1})):Z("",!0)])]),_("div",e3e,[_("div",t3e,[te(l(M,{variant:"secondary",text:C.$t("core::app.edit"),onClick:k},null,8,["text"]),[[fe,e.authorizations.view]]),e.status==="draft"?te((g(),R(M,{key:0,variant:"secondary",icon:"Mail",text:C.$t("documents::document.send.send"),onClick:F[1]||(F[1]=H=>k("send"))},null,8,["text"])),[[fe,e.authorizations.view]]):Z("",!0),l(U,null,{default:p(()=>[l(N,{href:e.publicUrl,text:C.$t("documents::document.view")},null,8,["href","text"]),l(G),l(N,{target:"_blank",rel:"noopener noreferrer",href:e.publicUrl+"/pdf",text:C.$t("documents::document.view_pdf")},null,8,["href","text"]),l(N,{href:e.publicUrl+"/pdf?output=download",text:C.$t("documents::document.download_pdf")},null,8,["href","text"]),l(G),e.authorizations.update?(g(),R(N,{key:0,text:C.$t("core::app.edit"),onClick:k},null,8,["text"])):Z("",!0),e.authorizations.delete?(g(),R(N,{key:1,text:C.$t("core::app.delete"),onClick:F[2]||(F[2]=H=>C.$confirm(()=>$(e.documentId)))},null,8,["text"])):Z("",!0)]),_:1})])])])])]),_:1})]),_:1},16,["class"])],64)}}}),n3e={class:"sm:flex sm:items-start sm:justify-between"},o3e={class:"mt-5 sm:ml-6 sm:mt-0"},a3e={class:"mt-3 space-y-4 sm:mt-7"},r3e="documents",l3e={__name:"RecordTabDocumentPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o=V(null),a=V(!1),r=V(null),{dataLoadedFirstTime:s,searchResults:i,isSearching:u,hasSearchResults:d,performSearch:m,search:f,loadData:h,infiniteHandler:y}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,infinityRef:o,synchronizeResource:n,timelineRelation:r3e}),b=P(()=>u.value?i.value||[]:t.resource.documents||[]),I=P(()=>Vt(b.value.filter(E=>E.status==="lost"),E=>new Date(E.created_at),"asc")),w=P(()=>Vt(b.value.filter(E=>E.status==="accepted"),E=>new Date(E.accepted_at),"asc")),k=P(()=>Vt(b.value.filter(E=>E.status==="draft"),E=>new Date(E.created_at),"asc")),x=P(()=>Vt(b.value.filter(E=>E.status==="sent"),E=>new Date(E.last_date_sent),"desc")),$=P(()=>[...k.value,...x.value,...I.value,...w.value]),C=P(()=>$.value.length>0);function F(E){n({documents:E})}function T(E){n({documents:{id:E.id,_delete:!0}}),A()}function S(E){r.value=E.id,a.value=!1}function A(){Ot("refresh-details-view")}return(E,B)=>{const M=c("ITextDark"),N=c("IText"),G=c("IButton"),U=c("InputSearch"),j=c("ICardBody"),O=c("ICard"),H=c("ITabPanel");return g(),R(H,{lazy:!v(s),onActivatedOnce:v(h)},{default:p(()=>[l(O,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(j,null,{default:p(()=>[_("div",n3e,[_("div",null,[l(M,{class:"font-semibold",text:E.$t("documents::document.manage_documents")},null,8,["text"]),l(N,{class:"max-w-xl",text:E.$t("documents::document.info")},null,8,["text"])]),_("div",o3e,[l(G,{variant:"primary",icon:"PlusSolid",text:E.$t("documents::document.create"),onClick:B[0]||(B[0]=W=>a.value=!0)},null,8,["text"])])]),te(l(U,{modelValue:v(f),"onUpdate:modelValue":[B[1]||(B[1]=W=>hn(f)?f.value=W:null),v(m)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[fe,C.value||v(f)]])]),_:1})]),_:1}),a.value?(g(),R(x5,{key:0,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,"exit-using":()=>a.value=null,"edit-redirect-handler":S},null,8,["via-resource","via-resource-id","related-resource","exit-using"])):Z("",!0),r.value?(g(),R(Tc,{key:1,id:r.value,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource,"exit-using":()=>r.value=!1,onReactivated:A,onSent:A,onLost:A,onAccept:A,onChanged:F,onDeleted:T},null,8,["id","via-resource","via-resource-id","related-resource","exit-using"])):Z("",!0),_("div",a3e,[(g(!0),D(de,null,Ie($.value,W=>(g(),R(k5,{key:W.id,"document-id":W.id,"type-id":W.document_type_id,status:W.status,"display-name":W.display_name,path:W.path,"public-url":W.public_url,"accepted-at":W.accepted_at,"last-date-sent":W.last_date_sent,amount:W.amount,authorizations:W.authorizations,"associations-count":W.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["document-id","type-id","status","display-name","path","public-url","accepted-at","last-date-sent","amount","authorizations","associations-count","via-resource","via-resource-id","related-resource"]))),128))]),te(l(N,{class:"mt-6 text-center",text:E.$t("core::app.no_search_results")},null,8,["text"]),[[fe,v(u)&&!v(d)]]),l(Ir,{ref_key:"infinityRef",ref:o,"scroll-element":e.scrollElement,onHandle:B[2]||(B[2]=W=>v(y)(W))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},s3e={__name:"RecordTabTimelineDocument",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),R(_o,{"heading-class":"font-medium","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,icon:e.log.type.icon,heading:t.$t("documents::document.timeline.heading")},{default:p(()=>[l(k5,{class:"mt-3","document-id":e.log.id,"type-id":e.log.document_type_id,status:e.log.status,"display-name":e.log.display_name,path:e.log.path,"public-url":e.log.public_url,"accepted-at":e.log.accepted_at,"last-date-sent":e.log.last_date_sent,amount:e.log.amount,authorizations:e.log.authorizations,"associations-count":e.log.associations_count,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["document-id","type-id","status","display-name","path","public-url","accepted-at","last-date-sent","amount","authorizations","associations-count","via-resource","via-resource-id","related-resource"])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","icon","heading"]))}},i3e={__name:"DocumentsTypeIndex",setup(e){const t=Innoclapps.resourceName("document-types"),{fetchDocumentTypes:n}=cu();return(o,a)=>{const r=c("ICardHeading");return g(),R(Ui,{"resource-name":v(t),"with-cancel":!1,onCreated:v(n),onUpdated:v(n),onDeleted:v(n)},{header:p(()=>[l(r,{text:o.$t("documents::document.type.types")},null,8,["text"])]),_:1},8,["resource-name","onCreated","onUpdated","onDeleted"])}}},u3e={class:"space-y-8"},c3e={class:"divide-y divide-neutral-200 dark:divide-neutral-700"},d3e={class:"px-4 py-4 sm:px-6"},m3e={__name:"SettingsDocuments",setup(e){const{resetStoreState:t}=qe(),{form:n,submit:o,isReady:a}=Ao(),r=V(null),{typesByName:s}=cu();function i(u){n.default_document_type=u.id,o(t)}return Se(a,()=>{r.value=s.value.find(u=>u.id==n.default_document_type)},{once:!0}),(u,d)=>{const m=c("ICardHeading"),f=c("ICardHeader"),h=c("ICustomSelect"),y=c("IFormGroup"),b=c("ICard");return g(),D("div",u3e,[_("div",null,[l(f,null,{default:p(()=>[l(m,{text:u.$t("documents::document.documents")},null,8,["text"])]),_:1}),l(b,{overlay:!v(a)},{default:p(()=>[_("ul",c3e,[_("li",d3e,[l(y,{class:"mb-0","label-for":"default_document_type",label:u.$t("documents::document.type.default_type")},{default:p(()=>[l(h,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=I=>r.value=I),"input-id":"default_document_type",class:"xl:w-1/3",label:"name",clearable:!1,options:v(s),onOptionSelected:i},null,8,["modelValue","options"])]),_:1},8,["label"])])])]),_:1},8,["overlay"])]),_("div",null,[l(i3e)])])}}},f3e={class:"container mx-auto"},p3e={class:"mx-auto max-w-6xl"},v3e={class:"px-4 py-4"},h3e={class:"flex items-center justify-between"},g3e={class:"min-w-0 flex-1"},b3e=["href"],y3e=["src","alt"],_3e={class:"flex space-x-3 md:ml-3"},w3e={class:"py-6"},I3e={class:"container mx-auto"},x3e={class:"mx-auto max-w-6xl"},k3e={__name:"DocumentsPublicViewNavbar",props:["publicUrl","brandName","logo","backgroundColor"],setup(e){return(t,n)=>{const o=c("Icon");return g(),D(de,null,[_("div",{class:"sticky top-0 z-50 drop-shadow-[0_1.5px_1.5px_rgba(0,0,0,0.15)]",style:Nt({backgroundColor:e.backgroundColor})},[_("div",f3e,[_("div",p3e,[_("div",v3e,[_("div",h3e,[_("div",g3e,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-12 w-auto",src:e.logo,alt:e.brandName},null,8,y3e)):(g(),R(o,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,b3e)]),_("div",_3e,[Ee(t.$slots,"actions")])])])])])],4),_("div",w3e,[_("div",I3e,[_("div",x3e,[Ee(t.$slots,"content")])])])],64)}}},$3e={class:"fixed inset-0 z-40 flex"},C3e={class:"absolute right-0 top-0 -mr-12 pt-2"},S3e={class:"h-0 flex-1 overflow-y-auto py-10"},T3e={class:"flex shrink-0 items-center px-4"},E3e=["href"],F3e=["src","alt"],A3e={class:"mt-5 space-y-1 px-3"},R3e=["href","textContent"],D3e={class:"flex shrink-0 space-x-3 p-4"},O3e={class:"z-10 hidden md:fixed md:inset-y-0 md:flex md:w-72 md:flex-col"},P3e={class:"flex flex-1 flex-col overflow-y-auto py-10"},M3e={class:"flex shrink-0 items-center px-4"},B3e=["href"],N3e=["src","alt"],V3e=["href","textContent"],L3e={class:"flex shrink-0 justify-center space-x-3 p-4"},q3e={class:"flex flex-1 flex-col md:pl-72"},U3e={class:"sticky top-0 z-10 bg-white pl-1 pt-1 sm:pl-3 sm:pt-3 md:hidden"},j3e={class:"size-12"},z3e={class:"flex-1"},H3e={__name:"DocumentsPublicViewSidebar",props:["navigation","publicUrl","brandName","logo","backgroundColor","full","navigationHeadingTagName"],setup(e){const t=e,n=V(!1),o=V(null);document.body.classList.add("h-full");var a=document.getElementsByTagName("html")[0];return a.className+=" h-full scroll-smooth",o.value=window.location.hash,!o.value&&t.navigation.length>0&&(o.value=t.navigation[0].href),window.addEventListener("hashchange",r=>{o.value=r.currentTarget.location.hash}),Xe(()=>{let r=document.querySelectorAll(t.navigationHeadingTagName),s=[];r.forEach(u=>{const d=ft(t.navigation,{name:u.innerText});d&&(u.getAttribute("id")||u.setAttribute("id",d.id),s.push({...d,element:u}))});const i=function(u){const d=u.getBoundingClientRect();return d.top>=0&&d.left>=0&&d.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&d.right<=(window.innerWidth||document.documentElement.clientWidth)};window.addEventListener("scroll",xa(()=>{let u=[];s.forEach(d=>{i(d.element)&&u.push(d),u.length>0&&(o.value=`${u[0].href}`)})},150))}),(r,s)=>{const i=c("Icon");return g(),D("div",null,[l(v(rl),{as:"template",show:n.value},{default:p(()=>[l(v(Yi),{as:"div",class:"relative z-40 md:hidden",onClose:s[1]||(s[1]=u=>n.value=!1)},{default:p(()=>[l(v(ho),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>s[3]||(s[3]=[_("div",{class:"fixed inset-0 bg-neutral-900/75 transition-opacity dark:bg-neutral-700/90"},null,-1)])),_:1}),_("div",$3e,[l(v(ho),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:p(()=>[l(v(Xi),{class:"relative flex w-full max-w-xs flex-1 flex-col",style:Nt({backgroundColor:e.backgroundColor})},{default:p(()=>[l(v(ho),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:p(()=>[_("div",C3e,[_("button",{type:"button",class:"ml-1 flex size-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:s[0]||(s[0]=u=>n.value=!1)},[s[4]||(s[4]=_("span",{class:"sr-only"},"Close sidebar",-1)),l(i,{icon:"XSolid",class:"size-6 text-white"})])])]),_:1}),_("div",S3e,[_("div",T3e,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-8 w-auto",src:e.logo,alt:e.brandName},null,8,F3e)):(g(),R(i,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,E3e)]),_("nav",A3e,[(g(!0),D(de,null,Ie(e.navigation,u=>(g(),D("a",{key:u.name,href:u.href,style:Nt({color:v(Zr)(e.backgroundColor)}),class:be([o.value===u.href?"font-medium":"font-normal","flex px-2 py-2 text-base focus:outline-none"]),textContent:K(u.name)},null,14,R3e))),128))])]),_("div",D3e,[Ee(r.$slots,"actions")])]),_:3},8,["style"])]),_:3}),s[5]||(s[5]=_("div",{class:"w-14 shrink-0"},null,-1))])]),_:3})]),_:3},8,["show"]),_("div",O3e,[_("div",{class:"flex min-h-0 flex-1 flex-col shadow-[0px_0px_25px_0px_rgba(0,0,0,0.3)]",style:Nt({backgroundColor:e.backgroundColor})},[_("div",P3e,[_("div",M3e,[_("a",{class:"focus:outline-none",href:e.publicUrl},[e.logo?(g(),D("img",{key:0,class:"h-8 w-auto",src:e.logo,alt:e.brandName},null,8,N3e)):(g(),R(i,{key:1,icon:"Document",class:"size-8 text-neutral-400"}))],8,B3e)]),_("nav",{class:"mt-5 flex-1 space-y-1 px-3",style:Nt({backgroundColor:e.backgroundColor})},[(g(!0),D(de,null,Ie(e.navigation,u=>(g(),D("a",{key:u.name,href:u.href,style:Nt({color:v(Zr)(e.backgroundColor)}),class:be([o.value===u.href?"font-medium":"font-normal","flex px-2 py-2 text-base focus:outline-none sm:text-sm"]),textContent:K(u.name)},null,14,V3e))),128))],4)]),_("div",L3e,[Ee(r.$slots,"actions")])],4)]),_("div",q3e,[_("div",U3e,[_("div",j3e,[_("button",{type:"button",class:"mt-1.5 inline-flex items-center justify-center rounded-md p-1 text-neutral-500 hover:text-neutral-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500",onClick:s[2]||(s[2]=u=>n.value=!0)},[s[6]||(s[6]=_("span",{class:"sr-only"},"Open sidebar",-1)),l(i,{icon:"Bars3BottomLeft",class:"size-6"})])])]),_("main",z3e,[_("div",{class:be({"py-6":!e.full})},[_("div",{class:be({"mx-auto max-w-7xl px-4 sm:px-6 md:px-8":!e.full})},[Ee(r.$slots,"content")],2)],2)])])])}}},W3e={class:"h-full max-h-full w-full bg-white"},G3e={class:"hidden sm:block"},K3e={key:0,xmlns:"http://www.w3.org/2000/svg","data-slot":"icon",viewBox:"0 0 640 512",class:"fill-white"},Z3e=["innerHTML"],Y3e=["innerHTML"],X3e=["innerHTML"],Q3e={class:"relative pb-3"},J3e={class:"shrink-0"},e4e={__name:"DocumentsPublicView",props:["requiresSignature","title","content","uuid","status","publicUrl","signatureBoundText","acceptThankYouMessage","signThankYouMessage","navigationBackgroundColor","brandName","logo","viewType","navigation","navigationHeadingTagName"],setup(e){const t=e,n=V(null),o=V(!1),a=V(!1),r=V(!1),s=V(!1),i=V(!1),{form:u}=Qe({email:null,signature:null}),d=P(()=>t.viewType==="nav-top"?k3e:H3e),m=P(()=>{let b={publicUrl:t.publicUrl,brandName:t.brandName,logo:t.logo,backgroundColor:t.navigationBackgroundColor};return t.viewType!=="nav-top"&&(b.navigation=t.navigation,b.navigationHeadingTagName=t.navigationHeadingTagName,b.full=t.viewType==="nav-left-full-width"),b});function f(){t.requiresSignature?i.value=!0:(s.value=!0,Innoclapps.request().post(`/d/${t.uuid}/accept`).then(()=>window.location.href=`${t.publicUrl}?accepted=1`).finally(()=>s.value=!1))}function h(){u.post(`/d/${t.uuid}/sign`).then(()=>window.location.href=`${t.publicUrl}?signed=1`)}function y(){a.value=!1,r.value=!0,Innoclapps.request().post(`/d/${t.uuid}/validate`,{email:u.email}).then(({data:b})=>{typeof b=="object"?(n.value=b.name,o.value=!0):a.value=!0}).finally(()=>r.value=!1)}return(b,I)=>{const w=c("IButton"),k=c("IAlertBody"),x=c("IAlert"),$=c("IFormInput"),C=c("IFormError"),F=c("IFormGroup"),T=c("IText"),S=c("IModal"),A=ze("t");return g(),D("div",W3e,[(g(),R(_t(d.value),zt(Qt(m.value)),{actions:p(()=>[l(w,{class:"shrink-0",icon:"DocumentDownload",href:e.publicUrl+"/pdf?output=download"},{default:p(()=>[te(_("span",G3e,null,512),[[A,"documents::document.download_pdf"]])]),_:1},8,["href"]),e.status!=="accepted"?(g(),R(w,{key:0,class:"shrink-0",variant:"success",icon:e.requiresSignature?"":"Check",disabled:s.value,loading:s.value,onClick:f},{default:p(()=>[e.requiresSignature?(g(),D("svg",K3e,I[4]||(I[4]=[_("path",{d:"M192 128c0-17.7 14.3-32 32-32s32 14.3 32 32v7.8c0 27.7-2.4 55.3-7.1 82.5l-84.4 25.3c-40.6 12.2-68.4 49.6-68.4 92v71.9c0 40 32.5 72.5 72.5 72.5c26 0 50-13.9 62.9-36.5l13.9-24.3c26.8-47 46.5-97.7 58.4-150.5l94.4-28.3-12.5 37.5c-3.3 9.8-1.6 20.5 4.4 28.8s15.7 13.3 26 13.3H544c17.7 0 32-14.3 32-32s-14.3-32-32-32H460.4l18-53.9c3.8-11.3 .9-23.8-7.4-32.4s-20.7-11.8-32.2-8.4L316.4 198.1c2.4-20.7 3.6-41.4 3.6-62.3V128c0-53-43-96-96-96s-96 43-96 96v32c0 17.7 14.3 32 32 32s32-14.3 32-32V128zm-9.2 177l49-14.7c-10.4 33.8-24.5 66.4-42.1 97.2l-13.9 24.3c-1.5 2.6-4.3 4.3-7.4 4.3c-4.7 0-8.5-3.8-8.5-8.5V335.6c0-14.1 9.3-26.6 22.8-30.7zM24 368c-13.3 0-24 10.7-24 24s10.7 24 24 24H64.3c-.2-2.8-.3-5.6-.3-8.5V368H24zm592 48c13.3 0 24-10.7 24-24s-10.7-24-24-24H305.9c-6.7 16.3-14.2 32.3-22.3 48H616z"},null,-1)]))):Z("",!0),ne(" "+K(e.requiresSignature?b.$t("documents::document.sign"):b.$t("documents::document.accept")),1)]),_:1},8,["icon","disabled","loading"])):Z("",!0)]),content:p(()=>[b.$route.query.accepted?(g(),R(x,{key:0,class:"mb-6",variant:"success"},{default:p(()=>[l(k,null,{default:p(()=>[_("div",{innerHTML:e.acceptThankYouMessage},null,8,Z3e)]),_:1})]),_:1})):b.$route.query.signed?(g(),R(x,{key:1,class:"mb-6",variant:"success"},{default:p(()=>[l(k,null,{default:p(()=>[_("div",{innerHTML:e.signThankYouMessage},null,8,Y3e)]),_:1})]),_:1})):Z("",!0),_("div",{class:"contentbuilder prose prose-sm prose-neutral relative max-w-none",innerHTML:e.content},null,8,X3e)]),_:1},16)),l(S,{id:"signModal",visible:i.value,"onUpdate:visible":I[3]||(I[3]=E=>i.value=E),size:"sm","ok-text":"Sign","ok-disabled":v(u).busy,title:o.value?b.$t("documents::document.sign"):b.$t("documents::document.signers.confirm_email"),"hide-footer":!o.value,static:"",form:"",onSubmit:h},{default:p(()=>[te(_("div",Q3e,[l($,{modelValue:v(u).email,"onUpdate:modelValue":I[0]||(I[0]=E=>v(u).email=E),type:"email",class:"pr-28",placeholder:b.$t("documents::document.signers.enter_email"),onKeyup:mo(y,["enter"])},null,8,["modelValue","placeholder"]),_("div",J3e,[te(l(w,{class:"absolute right-1.5 top-1.5 sm:top-1",loading:r.value,disabled:r.value,text:b.$t("core::app.confirm"),small:"",basic:"",onClick:y},null,8,["loading","disabled","text"]),[[fe,v(u).email]])])],512),[[fe,!o.value]]),te(l(F,{"label-for":"emailAddress",label:b.$t("documents::document.signers.signer_email")},{default:p(()=>[l($,{id:"emailAddress",modelValue:v(u).email,"onUpdate:modelValue":I[1]||(I[1]=E=>v(u).email=E),type:"email",disabled:!0,placeholder:b.$t("documents::document.signers.enter_email")},null,8,["modelValue","placeholder"]),l(C,{error:v(u).getError("email")},null,8,["error"])]),_:1},8,["label"]),[[fe,o.value]]),a.value?(g(),R(x,{key:0,variant:"warning",class:"mt-3"},{default:p(()=>[l(k,null,{default:p(()=>[ne(K(b.$t("documents::document.signature.verification_failed")),1)]),_:1})]),_:1})):Z("",!0),te(l(F,{"label-for":"signature",label:b.$t("documents::document.signature.accept_name")},{default:p(()=>[l($,{id:"signature",modelValue:v(u).signature,"onUpdate:modelValue":I[2]||(I[2]=E=>v(u).signature=E),class:"font-signature text-[1.3rem] sm:text-[1.2rem]"},null,8,["modelValue"]),l(C,{error:v(u).getError("signature")},null,8,["error"])]),_:1},8,["label"]),[[fe,o.value]]),te(l(T,{class:"mb-3",text:e.signatureBoundText.replace("{{ signerName }}",n.value).replace("{{signerName}}",e.signatureBoundText)},null,8,["text"]),[[fe,o.value]])]),_:1},8,["visible","ok-disabled","title","hide-footer"])])}}},t4e={key:1,class:"m-auto mt-8 max-w-5xl"},n4e={__name:"DocumentsIndex",setup(e){const t=Innoclapps.resourceName("documents"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),{scriptConfig:a}=qe(),r=a("documents.statuses"),s=V(!0),i=V(!1),u=P(()=>!s.value),d=P(()=>s.value&&i.value);function m(h){s.value=h.isPreEmpty,i.value=!0}function f(){Ot("refresh-cards"),o()}return(h,y)=>{const b=c("NavbarSeparator"),I=c("IDropdownItem"),w=c("IDropdownMinimal"),k=c("IButton"),x=c("NavbarItems"),$=c("IOverlay"),C=c("IEmptyState"),F=c("IBadge"),T=c("ResourceTable"),S=c("RouterView"),A=c("MainLayout");return g(),R(A,null,{actions:p(()=>[l(b,{class:"hidden lg:block"}),l(x,null,{default:p(()=>[l(w,{placement:s.value?"bottom-end":"bottom",horizontal:""},{default:p(()=>[l(I,{icon:"Bars3CenterLeft",to:{name:"document-templates-index"},text:h.$t("documents::document.template.manage")},null,8,["text"]),v(n).usesSoftDeletes?(g(),R(I,{key:0,icon:"Trash",to:{name:"trashed-resource-records",params:{resourceName:v(t)}},text:h.$t("core::resource.trashed",{resource:v(n).label})},null,8,["to","text"])):Z("",!0)]),_:1},8,["placement"]),te(l(k,{variant:"primary",icon:"PlusSolid",disabled:!v(n).authorizedToCreate,to:{name:"create-document"},text:h.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["disabled","text"]),[[fe,!s.value]])]),_:1})]),default:p(()=>[i.value?Z("",!0):(g(),R($,{key:0,show:""})),d.value?(g(),D("div",t4e,[l(C,zt(Qt({to:{name:"create-document"},title:h.$t("documents::document.empty_state.title"),buttonText:h.$t("documents::document.create"),description:h.$t("documents::document.empty_state.description")})),null,16)])):Z("",!0),u.value?(g(),R(Ud,{key:2,class:"mb-6","resource-name":v(t)},null,8,["resource-name"])):Z("",!0),te(_("div",null,[l(T,{"resource-name":v(t),onLoaded:m},{status:p(({row:E})=>[l(F,{color:v(r)[E.status].color,text:v(r)[E.status].display_name},null,8,["color","text"])]),_:1},8,["resource-name"])],512),[[fe,!s.value]]),l(S,{name:"create",onCreated:f,onSent:f}),l(S,{name:"edit","exit-using":()=>h.$router.push({name:"document-index"}),onChanged:f,onDeleted:f,onCloned:f},null,8,["exit-using"])]),_:1})}}},o4e={class:"absolute inset-0 z-40 h-full max-h-full w-full bg-white dark:bg-neutral-900"},a4e={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},r4e={class:"container mx-auto"},l4e={class:"mx-auto max-w-6xl"},s4e={class:"px-3 py-4 sm:-mx-1.5"},i4e={class:"flex items-center justify-between space-x-4 sm:space-x-0"},u4e={class:"h-full min-h-full overflow-y-auto"},c4e={class:"px-4 py-6 sm:px-0"},d4e={class:"container mx-auto max-w-6xl"},m4e={class:"flex"},f4e={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert",style:{"padding-bottom":"200px"}},p4e={__name:"DocumentsTemplatesCreate",emits:["created"],setup(e,{emit:t}){const n=t,o=wt(),{t:a}=Pe(),{scriptConfig:r}=qe(),s=r("documents.placeholders"),i=V(null),{form:u}=Qe({name:"Template name",is_shared:!1,content:"",view_type:null});function d(){m(!1).then(()=>o.back())}async function m(f=!0){u.busy=!0,await i.value.saveBase64Images(),await We();let h=await u.post("/document-templates").catch(y=>(y.isValidationError()&&Innoclapps.error(a("core::app.form_validation_failed"),3e3),Promise.reject(y)));return n("created",h),f&&o.replace({name:"edit-document-template",params:{id:h.id}}),h}return La(()=>{document.body.classList.add("overflow-y-hidden")}),mn(()=>{document.body.classList.remove("overflow-y-hidden")}),(f,h)=>{const y=c("ILink"),b=c("IDropdownItem"),I=c("IDropdownMenu"),w=c("IExtendedDropdown"),k=c("IFormInput"),x=c("IFormError"),$=c("IFormGroup"),C=c("IFormCheckbox"),F=c("IFormCheckboxLabel"),T=c("IFormCheckboxField"),S=c("IFormLabel"),A=c("IText"),E=c("IFormText");return g(),R(To,{to:"body"},[_("div",o4e,[_("div",a4e,[_("div",r4e,[_("div",l4e,[_("div",s4e,[_("div",i4e,[l(y,{class:"sm:!text-base/6",text:f.$t("core::app.exit"),onClick:f.$router.back},null,8,["text","onClick"]),l(w,{placement:"bottom-end",disabled:v(u).busy,loading:v(u).busy,text:f.$t("core::app.save"),onClick:m},{default:p(()=>[l(I,null,{default:p(()=>[l(b,{text:f.$t("core::app.save_and_exit"),onClick:d},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])])])])])]),_("div",u4e,[_("div",c4e,[_("div",d4e,[l($,{"label-for":"templateName",label:f.$t("documents::document.template.name"),required:""},{default:p(()=>[l(k,{id:"templateName",modelValue:v(u).name,"onUpdate:modelValue":h[0]||(h[0]=B=>v(u).name=B)},null,8,["modelValue"]),l(x,{error:v(u).getError("name")},null,8,["error"])]),_:1},8,["label"]),l($,null,{default:p(()=>[l(T,null,{default:p(()=>[l(C,{checked:v(u).is_shared,"onUpdate:checked":h[1]||(h[1]=B=>v(u).is_shared=B)},null,8,["checked"]),l(F,{text:f.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l(x,{error:v(u).getError("is_shared")},null,8,["error"])]),_:1}),l($,{class:"mt-6"},{default:p(()=>[_("div",m4e,[l(S,{as:"p",label:f.$t("documents::document.view_type.html_view_type")},null,8,["label"]),l(A,{class:"ml-1 self-end",text:f.$t("core::app.optional")},null,8,["text"])]),l(E,{class:"-mt-px mb-3",text:f.$t("documents::document.view_type.template_info")},null,8,["text"]),l(dh,{modelValue:v(u).view_type,"onUpdate:modelValue":h[2]||(h[2]=B=>v(u).view_type=B)},null,8,["modelValue"]),l(x,{error:v(u).getError("view_type")},null,8,["error"])]),_:1}),l($,{class:"mt-6"},{default:p(()=>[_("div",f4e,[l(ch,{ref_key:"builderRef",ref:i,modelValue:v(u).content,"onUpdate:modelValue":h[3]||(h[3]=B=>v(u).content=B),placeholders:v(s)},null,8,["modelValue","placeholders"]),l(x,{error:v(u).getError("content")},null,8,["error"])])]),_:1})])])])])])}}},v4e={class:"absolute inset-0 z-40 h-full max-h-full w-full bg-white dark:bg-neutral-900"},h4e={class:"sticky top-0 z-50 border-b border-neutral-200 bg-neutral-100 dark:border-neutral-500/30 dark:bg-neutral-800"},g4e={class:"container mx-auto"},b4e={class:"mx-auto max-w-6xl"},y4e={class:"px-3 py-4 sm:-mx-1"},_4e={class:"flex items-center justify-between space-x-4 sm:space-x-0"},w4e={class:"h-full min-h-full overflow-y-auto"},I4e={class:"px-4 py-6 sm:px-0"},x4e={class:"container mx-auto max-w-6xl"},k4e={class:"flex"},$4e={class:"ml-1 self-end text-xs text-neutral-600 dark:text-neutral-200"},C4e={class:"prose prose-sm prose-neutral relative max-w-none dark:prose-invert",style:{"padding-bottom":"200px"}},S4e={__name:"DocumentsTemplatesEdit",emits:["updated"],setup(e,{emit:t}){const n=t,o=wt(),a=Ct(),{t:r}=Pe(),{scriptConfig:s}=qe(),i=V(null),u=s("documents.placeholders"),d=V(!0),m=V(null),{form:f}=Qe({name:null,is_shared:!1,content:"",view_type:null});function h(w){Innoclapps.request(`/document-templates/${w}`).then(({data:k})=>{m.value=k,y(k),Sc(k.google_fonts)}).finally(()=>d.value=!1)}function y(w){f.set({name:w.name,is_shared:w.is_shared,content:w.content,view_type:w.view_type})}function b(){I().then(()=>o.back())}async function I(){f.busy=!0,await i.value.saveBase64Images(),await We();let w=await f.put(`/document-templates/${m.value.id}`).catch(k=>(k.isValidationError()&&Innoclapps.error(r("core::app.form_validation_failed"),3e3),Promise.reject(k)));return Sc(w.google_fonts),y(w),n("updated",w),w}return La(()=>{h(a.params.id),document.body.classList.add("overflow-y-hidden")}),mn(()=>{document.body.classList.remove("overflow-y-hidden")}),(w,k)=>{const x=c("ILink"),$=c("IDropdownItem"),C=c("IDropdownMenu"),F=c("IExtendedDropdown"),T=c("IFormInput"),S=c("IFormError"),A=c("IFormGroup"),E=c("IFormCheckbox"),B=c("IFormCheckboxLabel"),M=c("IFormCheckboxField"),N=c("IFormLabel"),G=c("IText"),U=c("IOverlay"),j=ze("t");return g(),R(To,{to:"body"},[_("div",v4e,[_("div",h4e,[_("div",g4e,[_("div",b4e,[_("div",y4e,[_("div",_4e,[l(x,{class:"sm:!text-base/6",text:w.$t("core::app.exit"),onClick:w.$router.back},null,8,["text","onClick"]),l(F,{placement:"bottom-end",disabled:v(f).busy,loading:v(f).busy,text:w.$t("core::app.save"),onClick:I},{default:p(()=>[l(C,null,{default:p(()=>[l($,{text:w.$t("core::app.save_and_exit"),onClick:b},null,8,["text"])]),_:1})]),_:1},8,["disabled","loading","text"])])])])])]),_("div",w4e,[l(U,{class:"h-full",show:d.value},{default:p(()=>[_("div",I4e,[_("div",x4e,[l(A,{"label-for":"templateName",label:w.$t("documents::document.template.name"),required:""},{default:p(()=>[l(T,{id:"templateName",modelValue:v(f).name,"onUpdate:modelValue":k[0]||(k[0]=O=>v(f).name=O)},null,8,["modelValue"]),l(S,{error:v(f).getError("name")},null,8,["error"])]),_:1},8,["label"]),l(A,null,{default:p(()=>[l(M,null,{default:p(()=>[l(E,{checked:v(f).is_shared,"onUpdate:checked":k[1]||(k[1]=O=>v(f).is_shared=O)},null,8,["checked"]),l(B,{text:w.$t("documents::document.template.share_with_team_members")},null,8,["text"])]),_:1}),l(S,{error:v(f).getError("is_shared")},null,8,["error"])]),_:1}),l(A,{class:"mt-6"},{default:p(()=>[_("div",k4e,[l(N,{as:"p",label:w.$t("documents::document.view_type.html_view_type")},null,8,["label"]),te(_("span",$4e,null,512),[[j,"core::app.optional"]])]),l(G,{class:"-mt-px mb-3",text:w.$t("documents::document.view_type.template_info")},null,8,["text"]),l(dh,{modelValue:v(f).view_type,"onUpdate:modelValue":k[2]||(k[2]=O=>v(f).view_type=O)},null,8,["modelValue"]),l(S,{error:v(f).getError("view_type")},null,8,["error"])]),_:1}),l(A,{class:"mt-6"},{default:p(()=>[_("div",C4e,[l(ch,{ref_key:"builderRef",ref:i,modelValue:v(f).content,"onUpdate:modelValue":k[3]||(k[3]=O=>v(f).content=O),placeholders:v(u)},null,8,["modelValue","placeholders"]),l(S,{error:v(f).getError("content")},null,8,["error"])])]),_:1})])])]),_:1},8,["show"])])])])}}},T4e={key:1,class:"m-auto mt-8 max-w-5xl"},E4e={__name:"DocumentsTemplatesIndex",setup(e){const t=Innoclapps.resourceName("document-templates"),n=Innoclapps.resource(t),{reloadTable:o}=qo(t),a=V(!0),r=V(!1),s=P(()=>a.value&&r.value);function i(u){a.value=u.isPreEmpty,r.value=!0}return(u,d)=>{const m=c("NavbarSeparator"),f=c("IButton"),h=c("IOverlay"),y=c("IEmptyState"),b=c("ResourceTable"),I=c("RouterView"),w=c("MainLayout");return g(),R(w,null,{actions:p(()=>[l(m,{class:"hidden lg:block"}),te(l(f,{variant:"primary",icon:"PlusSolid",to:{name:"create-document-template"},text:u.$t("core::resource.create",{resource:v(n).singularLabel})},null,8,["text"]),[[fe,!a.value]])]),default:p(()=>[r.value?Z("",!0):(g(),R(h,{key:0,show:""})),s.value?(g(),D("div",T4e,[l(y,zt(Qt({to:{name:"create-document-template"},title:u.$t("documents::document.template.empty_state.title"),buttonText:u.$t("documents::document.template.create"),description:u.$t("documents::document.template.empty_state.description")})),null,16)])):Z("",!0),te(_("div",null,[l(b,{"resource-name":v(t),onLoaded:i},null,8,["resource-name"])],512),[[fe,!a.value]]),l(I,{name:"create",onCreated:v(o)},null,8,["onCreated"]),l(I,{name:"edit",onUpdated:v(o)},null,8,["onUpdated"])]),_:1})}}},F4e=[{path:"/documents",name:"document-index",component:n4e,meta:{title:rt("documents::document.documents")},children:[{path:"create",name:"create-document",components:{create:x5},meta:{title:rt("documents::document.create")}},{path:":id",name:"view-document",components:{edit:Tc}},{path:":id/edit",name:"edit-document",components:{edit:Tc}}]},{path:"/document-templates",name:"document-templates-index",component:E4e,meta:{title:rt("documents::document.template.templates")},children:[{path:"create",name:"create-document-template",components:{create:p4e},meta:{title:rt("documents::document.template.create")}},{path:":id/edit",name:"edit-document-template",components:{edit:S4e}}]}];window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("DocumentPublicView",e4e),e.component("DocumentsTab",h8e),e.component("DocumentsTabPanel",l3e),e.component("RecordTabTimelineDocument",s3e),F4e.forEach(n=>t.addRoute(n)),t.addRoute("settings",{path:"documents",name:"document-settings",component:m3e,meta:{title:rt("documents::document.documents")}})});function Zu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zu=function(t){return typeof t}:Zu=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function A4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R4e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D4e(e,t,n){return t&&R4e(e.prototype,t),e}function Z1(e){return O4e(e)||P4e(e)||M4e(e)||B4e()}function O4e(e){if(Array.isArray(e))return op(e)}function P4e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function M4e(e,t){if(e){if(typeof e=="string")return op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return op(e,t)}}function op(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function B4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N4e(e){var t;return typeof e=="function"?t={callback:e}:t=e,t}function V4e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,r,s=function(u){for(var d=arguments.length,m=new Array(d>1?d-1:0),f=1;f<d;f++)m[f-1]=arguments[f];if(r=m,!(o&&u===a)){var h=n.leading;typeof h=="function"&&(h=h(u,a)),(!o||u!==a)&&h&&e.apply(void 0,[u].concat(Z1(r))),a=u,clearTimeout(o),o=setTimeout(function(){e.apply(void 0,[u].concat(Z1(r))),o=0},t)}};return s._clear=function(){clearTimeout(o),o=null},s}function $5(e,t){if(e===t)return!0;if(Zu(e)==="object"){for(var n in e)if(!$5(e[n],t[n]))return!1;return!0}return!1}var L4e=function(){function e(t,n,o){A4e(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(n,o)}return D4e(e,[{key:"createObserver",value:function(n,o){var a=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=N4e(n),this.callback=function(i,u){a.options.callback(i,u),i&&a.options.once&&(a.frozen=!0,a.destroyObserver())},this.callback&&this.options.throttle){var r=this.options.throttleOptions||{},s=r.leading;this.callback=V4e(this.callback,this.options.throttle,{leading:function(u){return s==="both"||s==="visible"&&u||s==="hidden"&&!u}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(i){var u=i[0];if(i.length>1){var d=i.find(function(f){return f.isIntersecting});d&&(u=d)}if(a.callback){var m=u.isIntersecting&&u.intersectionRatio>=a.threshold;if(m===a.oldResult)return;a.oldResult=m,a.callback(m,u)}},this.options.intersection),We(function(){a.observer&&a.observer.observe(a.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function C5(e,t,n){var o=t.value;if(o)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var a=new L4e(e,o,n);e._vue_visibilityState=a}}function q4e(e,t,n){var o=t.value,a=t.oldValue;if(!$5(o,a)){var r=e._vue_visibilityState;if(!o){S5(e);return}r?r.createObserver(o,n):C5(e,{value:o},n)}}function S5(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var U4e={beforeMount:C5,updated:q4e,unmounted:S5};function mh(){const{findTagsByType:e}=Lk(),{scriptConfig:t}=qe(),n=t("mail.tags_type");async function o(r,s){let{data:i}=await Innoclapps.request().post(`/emails/${r}/tags`,{tags:s});return i}const a=P(()=>e(n));return{syncTags:o,availableTags:a,TAGS_TYPE:n}}const j4e=["textContent"],fh={__name:"MessageAddress",props:{address:{type:Object,required:!0}},setup(e){return(t,n)=>{const o=ze("i-tooltip");return e.address.name?te((g(),D("span",{key:0,class:be(["text-neutral-700 dark:text-neutral-300",{"border-b border-dashed border-neutral-400":e.address.address}])},[ne(K(e.address.name),1)],2)),[[o,e.address.address]]):(g(),D("span",{key:1,class:"text-neutral-700 dark:text-neutral-300",textContent:K(e.address.address)},null,8,j4e))}}},z4e={class:"font-semibold"},H4e=["textContent"],Po={__name:"MessageAddresses",props:{showWhenEmpty:{default:!0,type:Boolean},label:String,addresses:{}},setup(e){const t=e,n=P(()=>Vn(t.addresses?t.addresses:[])),o=P(()=>!t.addresses||n.value.length>0),a=P(()=>t.showWhenEmpty?!0:!(!o.value&&t.showWhenEmpty===!1));return(r,s)=>{const i=c("ITextDark");return te((g(),D("div",null,[l(i,{class:"space-x-1"},{default:p(()=>[_("span",z4e,K(e.label)+":",1),(g(!0),D(de,null,Ie(n.value,u=>(g(),D("span",{key:u.address},[l(fh,{address:u},null,8,["address"]),o.value?Z("",!0):(g(),D("span",{key:0,textContent:K("("+r.$t("mailclient::inbox.unknown_address")+")")},null,8,H4e))]))),128))]),_:1})],512)),[[fe,a.value]])}}},W4e=["href","target"],G4e={role:"list",class:"divide-y divide-neutral-100 rounded-lg border border-neutral-200 bg-white dark:divide-neutral-800 dark:border-neutral-800 dark:bg-neutral-900"},K4e={class:"flex w-0 flex-1 items-center"},Z4e={class:"ml-4 flex min-w-0 flex-1 gap-2"},Y4e={class:"truncate font-medium"},X4e=["textContent"],Q4e={class:"ml-4 shrink-0"},T5={__name:"MessageAttachments",props:{attachments:{required:!0,type:Array}},setup(e){const t=e,n=V(null),o=P(()=>t.attachments.filter(i=>i.aggregate_type==="image")),a=P(()=>o.value.map(i=>i.preview_url)),r=P(()=>o.value[n.value]);function s(i){return t.attachments.findIndex(u=>u.preview_url===i)}return(i,u)=>{const d=c("Icon"),m=c("ILink"),f=c("ITextBlockDark");return g(),D(de,null,[l(yv,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=h=>n.value=h),urls:a.value},{toolbar:p(()=>[(g(),D(de,null,Ie(["preview_url","download_url"],h=>_("a",{key:h,tabindex:"-1",rel:"noopener noreferrer",class:"toolbar-btn",href:r.value[h],target:h==="preview_url"?"_blank":void 0},[l(d,{class:"size-5",icon:h==="preview_url"?"Eye":"DownloadSolid"},null,8,["icon"])],8,W4e)),64))]),_:1},8,["modelValue","urls"]),l(f,{as:"dd"},{default:p(()=>[_("ul",G4e,[(g(!0),D(de,null,Ie(e.attachments,h=>(g(),D("li",{key:h.id,class:"flex items-center justify-between py-4 pl-4 pr-5"},[_("div",K4e,[l(d,{icon:"PaperClip",class:"size-5 shrink-0 text-neutral-400"}),_("div",Z4e,[_("span",Y4e,[h.aggregate_type!=="image"?(g(),R(m,{key:0,class:"font-medium",tabindex:"0",href:h.view_url,text:h.file_name,basic:""},null,8,["href","text"])):(g(),R(m,{key:1,class:"font-medium",tabindex:"0",href:h.view_path,text:h.file_name,basic:"",onClick:ot(y=>n.value=s(h.preview_url),["prevent"])},null,8,["href","text","onClick"]))]),_("span",{class:"shrink-0 text-neutral-400",textContent:K(v(Hy)(h.size))},null,8,X4e)])]),_("div",Q4e,[l(m,{class:"font-medium",href:h.download_url,text:i.$t("core::app.download"),download:""},null,8,["href","text"])])]))),128))])]),_:1})],64)}}},J4e={class:"mt-5"},E5={__name:"MessageHiddenText",props:{text:{type:String,required:!0}},setup(e){const t=V(!1);return(n,o)=>{const a=c("Icon"),r=c("IButton"),s=ze("i-tooltip");return te((g(),D("div",null,[te((g(),R(r,{class:"px-3 py-0",small:"",onClick:o[0]||(o[0]=i=>t.value=!t.value)},{default:p(()=>[l(a,{icon:"DotsHorizontal"})]),_:1})),[[s,n.$t("mailclient::mail.trimmed_content")]]),te(_("div",J4e,[l(iu,{html:e.text},null,8,["html"])],512),[[fe,t.value]])],512)),[[fe,e.text]])}}};function ph(){const{currentUser:e}=qe(),t=P(()=>e.value.mail_signature?e.value.mail_signature:"");function n(o=""){return o+t.value}return{addSignature:n,signature:t}}function F5(e,t,n){const{t:o}=Pe(),{addSignature:a}=ph(),{createFollowUpActivity:r}=su(),{placeholders:s,allPlaceholders:i,allPlaceholdersInterpolations:u,makeParsePlaceholdersRequest:d}=Hk(),m=V(!1),f=V(!1),h=V(!1),y=V({}),b=V(So()),I=V([]),w=V(null),k=V(null),{form:x}=Qe({subject:null,message:"<p></p>"+a(),to:[],cc:null,bcc:null,associations:{},task_date:null,scheduled_at:null}),$=P(()=>{if(!x.message)return!1;let Y=document.createElement("template");if(Y.innerHTML=x.message.trim(),!Y.content.firstChild.hasChildNodes())return!1;const ae=Y.content.firstChild.querySelectorAll("._placeholder");return ae.length===0?!1:Array.from(ae).filter(se=>se.value.trim()==="").length>0});function C(Y,ae,se,xe,le){if(le||!xe)return!1;const ge=ae[0]===Y.id;if(se==="contacts"||se==="companies"){const ie=x.to.filter(me=>me.resourceName===se)[0];return ie?ie.id===Y.id:ge}return ge}const F=P(()=>{const Y=[];return Object.keys(x.associations).forEach(ae=>{if(x.associations[ae].length===0)return;if(ae==="contacts"||ae==="companies"){const xe=x.to.filter(le=>le.resourceName===ae)[0];xe?Y.push({name:ae,id:xe.id}):Y.push({name:ae,id:x.associations[ae][0]})}else Y.push({name:ae,id:x.associations[ae][0]})}),Y}),T=P(()=>{if(!s.value||!k.value)return[];const Y=[];return u.value.forEach(ae=>{const se=new RegExp(`${ae[0]}\\s?(.*?)\\s?${ae[1]}`).exec(k.value);se&&Y.push({interpolation_start:ae[0],interpolation_end:ae[1],tag:se[1].trim()})}),Y}),S=P(()=>{let Y=!1;return T.value.forEach(ae=>ft(i.value,["tag",ae.tag])?!0:(Y=!0,!1)),Y}),A=P(()=>{if(!k.value)return!0;let Y=!0;return i.value.concat(T.value).every(ae=>k.value.indexOf(ae.tag)>-1&&!new RegExp(`${ae.interpolation_start}\\s?${ae.tag}\\s?${ae.interpolation_end}`).test(k.value)?(Y=!1,!1):!0),Y}),E=P(()=>T.value.length>0),B=P(()=>!!(x.errors.first("to.0.address")||x.errors.first("cc.0.address")||x.errors.first("bcc.0.address"))),M=P(()=>x.cc!==null),N=P(()=>x.bcc!==null);function G(){h.value=!0,j(x.message,"input-fields").then(Y=>{x.message=Y,h.value=!1})}function U(){!E.value||!A.value||j(k.value,"interpolation").then(Y=>w.value=Y)}async function j(Y,ae){if(Y)return F.value.length===0?Y:d(F.value,Y,ae)}function O(Y){n({activities:[Y],incomplete_activities_for_user_count:t.incomplete_activities_for_user_count+1})}async function H(Y){m.value=!0,x.subject=w.value||k.value,x.fill("attachments_draft_id",b),e&&(x.fill("via_resource",e),x.fill("via_resource_id",bt(t).id));try{let ae=await Innoclapps.request().post(Y,x.data());if(ae.status===202?Innoclapps.info(o("mailclient::mail.message_queued_for_sending")):ae.status===201?(Innoclapps.info(o("mailclient::schedule.message_scheduled")),Ot("email-scheduled")):(Innoclapps.success(o("mailclient::inbox.message_sent")),Ot("email-sent",ae.data)),x.task_date&&e){let se=await r(x.task_date,e,bt(t).id,bt(t).display_name);O(se)}return x.reset(),ae}catch(ae){throw new Error(ae)}finally{m.value=!1}}function W(){x.cc=[]}function X(){x.bcc=[]}function q(Y){I.value.push(Y)}function L(Y){Innoclapps.request().delete(`/media/pending/${Y.pending_data.id}`).then(()=>{let ae=Mt(I.value,["id",Y.id]);I.value.splice(ae,1)})}function ee(Y){re(Y),G(),U()}function ce(Y){ue(Y),G(),U()}function ue(Y){if(!Y.resourceName||!y.value[Y.resourceName]||e===Y.resourceName&&bt(t).id===Y.id)return;let ae=Mt(y.value[Y.resourceName],["id",Y.id]),se=x.associations[Y.resourceName].findIndex(xe=>xe===Y.id);ae!==-1&&y.value[Y.resourceName].splice(ae,1),se!==-1&&x.associations[Y.resourceName].splice(se,1)}function oe(Y,ae){y.value[ae]||(y.value[ae]=[]),ft(y.value[ae],["id",Y.id])||y.value[ae].push(Y),Object.hasOwn(x.associations,ae)||(x.associations[ae]=[]),x.associations[ae].find(se=>se==Y.id)||x.associations[ae].push(Y.id)}function re(Y){Y.filter(ae=>!!ae.resourceName).forEach(ae=>{ae.disabled=!0,oe({...ae,display_name:ae.name},ae.resourceName)})}return Ba(k,()=>{U()},{debounce:600}),{form:x,sending:m,customAssociationsValue:y,attachments:I,attachmentsDraftId:b,placeholders:s,resourcesForPlaceholders:F,parsedSubject:w,hasEmptyPlaceholders:$,subject:k,hasInvalidAddresses:B,schedule:f,wantsCc:M,wantsBcc:N,sendRequest:H,subjectContainsPlaceholders:E,messagePlaceholdersBeingParsed:h,parsePlaceholdersForMessage:G,parsePlaceholdersForSubject:U,subjectPlaceholdersSyntaxIsValid:A,showWillUsePlaceholdersIconToAssociateResourceRecord:C,hasInvalidSubjectPlaceholders:S,handleAttachmentUploaded:q,destroyPendingAttachment:L,associateSelectedRecipients:re,dissociateRemovedRecipients:ue,associateMessageRecord:oe,handleRecipientSelectedEvent:ee,handleToRecipientRemovedEvent:ce,setWantsBCC:X,setWantsCC:W}}const vh=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=P(()=>Vt(n.value,"name"));f();function a(h){return n.value.findIndex(y=>y.id==h)}function r(h){return n.value[a(h)]}function s(h){n.value.splice(a(h),1)}function i(h){n.value.push(h)}function u(h,y){n.value[a(h)]=y}async function d(h,y){const{data:b}=await Innoclapps.request("/mails/templates/"+h,y);return b}async function m(h){await Innoclapps.request().delete(`/mails/templates/${h}`),s(h)}function f(h){e(!0),Innoclapps.request("/mails/templates",h).then(({data:y})=>n.value=y).finally(()=>e(!1))}return{mailTemplates:n,templatesByName:o,templatesAreBeingFetched:t,addTemplate:i,removeTemplate:s,setTemplate:u,findTemplateById:r,fetchMailTemplates:f,fetchTemplate:d,deleteTemplate:m}}),A5={__name:"PredefinedMailTemplatesForm",props:{isShared:{required:!0,type:Boolean},body:{required:!0,type:String},subject:{required:!0,type:String},name:{required:!0,type:String},form:{required:!0,type:Object}},emits:["update:isShared","update:body","update:subject","update:name"],setup(e){const t=V(!1),{placeholders:n}=Hk();return(o,a)=>{const r=c("IFormInput"),s=c("IFormError"),i=c("IFormGroup"),u=c("IFormCheckbox"),d=c("IFormCheckboxLabel"),m=c("IFormCheckboxField");return g(),D("form",{onSubmit:a[7]||(a[7]=ot(()=>{},["prevent"]))},[l(i,{"label-for":"name",label:o.$t("mailclient::mail.templates.name"),required:""},{default:p(()=>[l(r,{"model-value":e.name,"onUpdate:modelValue":a[0]||(a[0]=f=>o.$emit("update:name",f))},null,8,["model-value"]),l(s,{error:e.form.getError("name")},null,8,["error"])]),_:1},8,["label"]),l(i,{"label-for":"subject",label:o.$t("mailclient::mail.templates.subject"),required:""},{default:p(()=>[l(r,{"model-value":e.subject,class:be({"border-dashed !border-neutral-400":t.value}),"onUpdate:modelValue":a[1]||(a[1]=f=>o.$emit("update:subject",f)),onDragover:a[2]||(a[2]=f=>t.value=!0),onDragleave:a[3]||(a[3]=f=>t.value=!1),onDrop:a[4]||(a[4]=f=>t.value=!1)},null,8,["model-value","class"]),l(s,{error:e.form.getError("subject")},null,8,["error"])]),_:1},8,["label"]),l(i,{"label-for":"body",label:o.$t("mailclient::mail.templates.body"),required:""},{default:p(()=>[l(au,{"model-value":e.body,placeholders:v(n),"placeholders-disabled":!0,"onUpdate:modelValue":a[5]||(a[5]=f=>o.$emit("update:body",f))},null,8,["model-value","placeholders"]),l(s,{error:e.form.getError("body")},null,8,["error"])]),_:1},8,["label"]),l(i,null,{default:p(()=>[l(m,null,{default:p(()=>[l(u,{checked:e.isShared,"onUpdate:checked":a[6]||(a[6]=f=>o.$emit("update:isShared",f))},null,8,["checked"]),l(d,{text:o.$t("mailclient::mail.templates.is_shared")},null,8,["text"])]),_:1}),l(s,{error:e.form.getError("is_shared")},null,8,["error"])]),_:1}),Ee(o.$slots,"bottom")],32)}}},eTe={class:"space-x-2 pt-6 text-right sm:pt-8"},tTe={__name:"PredefinedMailTemplatesCreate",emits:["created","cancelRequested"],setup(e,{emit:t}){const n=t,{t:o}=Pe(),{addTemplate:a}=vh(),{form:r}=Qe({name:"",body:"",subject:"",is_shared:!0});function s(){r.post("/mails/templates").then(i=>{a(i),n("created",i),Innoclapps.success(o("mailclient::mail.templates.created"))})}return(i,u)=>{const d=c("IButton");return g(),R(A5,{"is-shared":v(r).is_shared,"onUpdate:isShared":u[1]||(u[1]=m=>v(r).is_shared=m),body:v(r).body,"onUpdate:body":u[2]||(u[2]=m=>v(r).body=m),subject:v(r).subject,"onUpdate:subject":u[3]||(u[3]=m=>v(r).subject=m),name:v(r).name,"onUpdate:name":u[4]||(u[4]=m=>v(r).name=m),form:v(r)},{bottom:p(()=>[_("div",eTe,[l(d,{variant:"secondary",text:i.$t("core::app.cancel"),onClick:u[0]||(u[0]=m=>i.$emit("cancelRequested"))},null,8,["text"]),l(d,{type:"submit",variant:"primary",text:i.$t("core::app.create"),onClick:s},null,8,["text"])])]),_:1},8,["is-shared","body","subject","name","form"])}}},nTe={class:"space-x-2 pt-6 text-right sm:pt-8"},oTe={__name:"PredefinedMailTemplatesEdit",props:{templateId:{required:!0,type:Number}},emits:["updated","cancelRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),{setTemplate:r,findTemplateById:s}=vh(),{form:i}=Qe();function u(){i.put(`/mails/templates/${n.templateId}`).then(m=>{r(m.id,m),o("updated",m),Innoclapps.success(a("mailclient::mail.templates.updated"))})}function d(){i.set(_v(s(n.templateId),["subject","body","name","is_shared"]))}return d(),(m,f)=>{const h=c("IButton");return v(i).keys().length?(g(),R(A5,{key:0,"is-shared":v(i).is_shared,"onUpdate:isShared":f[1]||(f[1]=y=>v(i).is_shared=y),body:v(i).body,"onUpdate:body":f[2]||(f[2]=y=>v(i).body=y),subject:v(i).subject,"onUpdate:subject":f[3]||(f[3]=y=>v(i).subject=y),name:v(i).name,"onUpdate:name":f[4]||(f[4]=y=>v(i).name=y),form:v(i)},{bottom:p(()=>[_("div",nTe,[l(h,{variant:"secondary",text:m.$t("core::app.cancel"),onClick:f[0]||(f[0]=y=>m.$emit("cancelRequested"))},null,8,["text"]),l(h,{type:"submit",variant:"primary",text:m.$t("core::app.save"),onClick:u},null,8,["text"])])]),_:1},8,["is-shared","body","subject","name","form"])):Z("",!0)}}},aTe={class:"mb-3 text-right"},rTe={class:"flex"},lTe={class:"grow"},sTe={class:"flex items-center space-x-2"},R5={__name:"PredefinedMailTemplatesList",emits:["selected","updated","created","willEdit","willCreate"],setup(e,{emit:t}){const n=t,{t:o}=Pe(),{localizedDateTime:a}=it(),{templatesByName:r,deleteTemplate:s}=vh(),i=V(null),u=V(!1),d=P(()=>r.value.length>0),m=P(()=>i.value||u.value);function f(k){n("willEdit",k),i.value=k}function h(){u.value=!0,n("willCreate")}function y(k){u.value=!1,n("created",k)}function b(k){i.value=!1,n("updated",k)}async function I(k){await s(k),Innoclapps.success(o("mailclient::mail.templates.deleted"))}function w(k){n("selected",r.value[k])}return(k,x)=>{const $=c("IButton"),C=c("ITableHeader"),F=c("ITableRow"),T=c("ITableHead"),S=c("ILink"),A=c("ITextSmall"),E=c("IDropdownItem"),B=c("IDropdownMinimal"),M=c("ITableCell"),N=c("IText"),G=c("ITableBody"),U=c("ITable"),j=ze("t");return g(),D("div",null,[te(_("div",null,[_("div",aTe,[l($,{variant:"primary",text:k.$t("mailclient::mail.templates.create"),onClick:h},null,8,["text"])]),l(U,{class:"[--gutter:theme(spacing.8)]",bleed:""},{default:p(()=>[l(T,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(F,null,{default:p(()=>[l(C,{width:"50%"},{default:p(()=>[ne(K(k.$t("mailclient.mail.templates.name")),1)]),_:1}),l(C,null,{default:p(()=>[ne(K(k.$t("core::app.created_by")),1)]),_:1}),l(C,null,{default:p(()=>[ne(K(k.$t("core::app.last_modified_at")),1)]),_:1})]),_:1})]),_:1}),l(G,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(r),(O,H)=>(g(),R(F,{key:O.id},{default:p(()=>[l(M,{width:"50%"},{default:p(()=>[_("div",rTe,[_("div",lTe,[l(S,{onClick:W=>f(O.id)},{default:p(()=>[ne(K(O.name),1)]),_:2},1032,["onClick"]),l(A,{class:"-mt-1"},{default:p(()=>[ne(K(k.$t("mailclient::mail.templates.subject"))+": "+K(O.subject),1)]),_:2},1024)]),_("div",sTe,[l($,{variant:"secondary",text:k.$t("mailclient::mail.templates.select"),small:"",onClick:W=>w(H)},null,8,["text","onClick"]),O.authorizations.update||O.authorizations.delete?(g(),R(B,{key:0},{default:p(()=>[O.authorizations.update?(g(),R(E,{key:0,text:k.$t("core::app.edit"),onClick:W=>f(O.id)},null,8,["text","onClick"])):Z("",!0),O.authorizations.delete?(g(),R(E,{key:1,text:k.$t("core::app.delete"),"confirm-text":k.$t("core::app.confirm"),confirmable:"",onConfirmed:W=>I(O.id)},null,8,["text","confirm-text","onConfirmed"])):Z("",!0)]),_:2},1024)):Z("",!0)])])]),_:2},1024),l(M,null,{default:p(()=>[ne(K(O.user.name),1)]),_:2},1024),l(M,null,{default:p(()=>[ne(K(v(a)(O.updated_at)),1)]),_:2},1024)]),_:2},1024))),128)),te(l(F,null,{default:p(()=>[l(M,{class:"p-5 text-center",colspan:3},{default:p(()=>[te(l(N,null,null,512),[[j,"core::table.empty"]])]),_:1})]),_:1},512),[[fe,!d.value]])]),_:1})]),_:1})],512),[[fe,!m.value]]),u.value?(g(),R(tTe,{key:0,onCancelRequested:x[0]||(x[0]=O=>u.value=!1),onCreated:y})):Z("",!0),i.value?(g(),R(oTe,{key:1,"template-id":i.value,onUpdated:b,onCancelRequested:x[1]||(x[1]=O=>i.value=null)},null,8,["template-id"])):Z("",!0)])}}};var D5={},iTe=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;D5.validate=function(e){if(!e||e.length>254)return!1;var t=iTe.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var o=n[1].split(".");return!o.some(function(a){return a.length>63})};const uTe={class:"mr-1 min-w-14"},cTe={class:"recipient grow"},dTe={class:"flex justify-between"},mTe={class:"mr-2 truncate"},fTe=["textContent"],pTe=["textContent"],vTe=["disabled","onClick"],hTe=Object.assign({inheritAttrs:!1},{__name:"RecipientSelectorField",props:{label:String,type:{type:String,required:!0},form:{required:!0}},emits:["recipientRemoved","recipientSelected"],setup(e,{expose:t,emit:n}){const o=n,a=V(null),r=Pt([]);let s=null;function i(b,I,w){return(I||"").toLowerCase().indexOf(w.toLowerCase())>-1||(b.name||"").toLowerCase().indexOf(w.toLowerCase())>-1}function u(b){o("recipientSelected",b)}function d(b,I){b(I),o("recipientRemoved",I)}function m(){a.value.focus()}function f(b,I){b&&(s&&s(),I(!0),Innoclapps.request("/search/email-address",h(b)).then(({data:w})=>{if(w){let k=[];w.forEach(x=>k.push(...x.data)),r.value=k}}).finally(()=>I(!1)))}function h(b){return{params:{q:b},cancelToken:new ol(I=>s=I)}}function y(b){return D5.validate(b)}return t({focus:m}),(b,I)=>{const w=c("IFormLabel"),k=c("Icon"),x=c("ICustomSelect"),$=c("IFormError"),C=ze("i-tooltip");return g(),D("div",{class:be(["flex items-center",e.type])},[_("div",uTe,[l(w,{label:e.label,for:e.type},null,8,["label","for"])]),_("div",cTe,[l(x,Ue({ref_key:"selectRef",ref:a},b.$attrs,{label:"address","input-id":e.type,options:r.value,filterable:!1,clearable:!1,taggable:!0,multiple:!0,"filter-by":i,"option-key":F=>String(F.address+F.id+F.resourceName+F.name),"create-option-provider":F=>({name:"",address:F}),"option-comparator-provider":(F,T,S)=>typeof F=="string"&&typeof T=="object"?F===T.address:typeof T=="string"&&typeof F=="object"?T===F.address:S(F)===S(T),"display-new-options-last":!0,placeholder:b.$t("mailclient::inbox.search_recipients"),debounce:400,onOptionSelected:u,onSearch:f}),{option:p(F=>[_("span",dTe,[_("span",mTe,K(F.name)+" "+K(F.address),1),F.resourceName?(g(),R(k,{key:0,class:"size-5",icon:F.resourceName==="contacts"?"User":"OfficeBuilding"},null,8,["icon"])):Z("",!0)])]),"selected-option-container":p(({option:F,disabled:T,deselect:S,multiple:A})=>[(g(),D("span",{key:F.index,class:be(["mr-2 inline-flex rounded-md bg-neutral-100 px-2 dark:bg-neutral-500 dark:text-white",{"border border-danger-500":!y(F.address)}])},[F.name?te((g(),D("span",{key:1,textContent:K(F.name)},null,8,pTe)),[[C,F.address]]):(g(),D("span",{key:0,textContent:K(F.address)},null,8,fTe)),A?(g(),D("button",{key:2,type:"button",class:"ml-1 text-neutral-400 hover:text-neutral-600 dark:text-neutral-200 dark:hover:text-neutral-400",title:"Remove recipient","aria-label":"Remove recipient",disabled:T,onClick:ot(E=>d(S,F),["prevent","stop"])},[l(k,{icon:"XSolid",class:"size-4"})],8,vTe)):Z("",!0)],2))]),_:1},16,["input-id","options","option-key","create-option-provider","option-comparator-provider","placeholder"]),l($,{error:e.form.getError(e.type)},null,8,["error"])]),Ee(b.$slots,"after",{},void 0,!0)],2)}}}),Pl=an(hTe,[["__scopeId","data-v-17f30641"]]),gTe={class:"-mx-8 bg-neutral-50 px-8 py-2 dark:bg-neutral-500/10"},bTe={class:"flex"},yTe={class:"mr-4"},_Te={class:"font-medium"},wTe={class:"ml-2"},ITe={class:"ml-2 space-x-2"},xTe={key:0},kTe={key:1},$Te={class:"flex items-center"},CTe={class:"mr-1 min-w-14"},STe={class:"grow"},TTe={class:"relative"},ETe={class:"relative mt-3"},FTe={class:"flex flex-col sm:flex-row sm:items-center"},ATe={class:"grow"},RTe={class:"mt-2 space-y-2 sm:mt-0 sm:flex sm:items-center sm:space-y-0"},DTe=["value","placeholder"],O5={__name:"MessageReply",props:{resourceName:String,resourceId:[String,Number],relatedResource:Object,visible:Boolean,toAll:Boolean,forward:Boolean,message:{type:Object,required:!0}},setup(e){const t=e,n=Le("synchronizeResource",null),o=["RE:","SV:","Antw:","VS:","RE:","REF:","ΑΠ:","ΣΧΕΤ:","Vá:","R:","RIF:","BLS:","RES:","Odp:","YNT:","ATB:","FW:","FWD:","Doorst:","VL:","TR:","WG:","ΠΡΘ:","Továbbítás:","I:","FS:","TRS:","VB:","RV:","ENC:","PD:","İLT:","YML:"],{t:a}=Pe(),{DateTime:r}=it(),{addSignature:s}=ph(),{scriptConfig:i}=qe(),{form:u,attachments:d,attachmentsDraftId:m,handleAttachmentUploaded:f,destroyPendingAttachment:h,customAssociationsValue:y,placeholders:b,resourcesForPlaceholders:I,subject:w,parsedSubject:k,subjectPlaceholdersSyntaxIsValid:x,hasInvalidSubjectPlaceholders:$,subjectContainsPlaceholders:C,parsePlaceholdersForMessage:F,parsePlaceholdersForSubject:T,showWillUsePlaceholdersIconToAssociateResourceRecord:S,hasEmptyPlaceholders:A,sending:E,sendRequest:B,hasInvalidAddresses:M,associateSelectedRecipients:N,dissociateRemovedRecipients:G,handleRecipientSelectedEvent:U,handleToRecipientRemovedEvent:j,setWantsCC:O,setWantsBCC:H,wantsBcc:W,wantsCc:X,schedule:q,messagePlaceholdersBeingParsed:L}=F5(t.resourceName,t.relatedResource,n),ee=V(!1),ce=V(!1);Se(A,(Oe,Ze)=>{Ze&&!Oe&&(ee.value=!1)});const ue=V(null),oe=V(null),re=V(!1),Y=V([]),ae=V(!1),se=P(()=>u.to.length===0||E.value||q.value&&!u.scheduled_at),xe=P(()=>t.message.cc&&t.message.cc.length>0),le=P(()=>t.message.reply_to&&t.message.reply_to.length>0);function ge(){document.querySelector(".dialog").scrollTo({top:0,behavior:"instant"})}function ve(Oe){const Ze=Mt(Y.value,["id",Oe.id]);Y.value.splice(Ze,1)}function ie(Oe){u.message=Oe.body+u.message,re.value=!1,F(),T(),ge(),We(()=>oe.value.focus())}function me(){rn(),m.value=So();let Oe=yt(t.message.subject);Oe=t.forward?Ce(Oe):ke(Oe),u.message=s(u.message),w.value=Oe}function Ce(Oe){return Y.value=structuredClone(Wn(t.message.media)),Be(),u.message=Fe(),Oe&&(Oe=i("mail.forward_prefix")+Oe),ue.value.focus(),Oe}function ke(Oe){return Y.value=[],we(),u.message=he(),zn(()=>oe.value.focus(),1200),Oe&&(Oe=i("mail.reply_prefix")+Oe),Oe}function Be(){["cc","bcc","to"].forEach(Oe=>u.set(Oe,Oe==="to"?[]:null))}function Fe(){let Oe="<br /><div class='concord_attr'>"+a("mailclient::inbox.forwarded_message_placeholder",{from:`${t.message.from.name?t.message.from.name+" ":""}&lt;${t.message.from.address}&gt;`,date:r.fromISO(t.message.date).toFormat("EEE, LLL d, yyyy, h:mm a"),subject:t.message.subject,to:t.message.to.reduce((Ze,Et)=>(Ze.push((Et.name?Et.name+" ":"")+`&lt;${Et.address}&gt;`),Ze),[]).join(", "),pre:"----------",after:"---------"})+"</div><br />";return Te(t.message.editor_text,Oe)}function he(){let Oe=t.message.editor_text;if(!Oe)return"";let Ze=`&lt;${t.message.from.address}&gt;`;t.message.from.name&&(Ze=t.message.from.name+" "+Ze);let Et=`On ${r.fromISO(t.message.date).toFormat("EEE, LLL d, yyyy, h:mm a")} ${Ze} wrote:`;if(_e(Oe)){let Wt=/(<body[^>]*>)([\s\S]*?)(<\/body>)/i,Qn=Oe.replace(Wt,function(wo,ht,Rn,On){return ht+"<blockquote>"+Rn+"</blockquote>"+On});return Te(Qn,`<br /><div class="concord_attr">${Et}</div>`)}else return`<br /><div class="concord_attr">${Et}</div><blockquote style="all: unset;" class="concord_quote">${Oe}</blockquote>`}function _e(Oe){let Ze=Oe.includes("<html"),Et=Oe.includes("<body");return Ze&&Et}function Te(Oe,Ze){var Et=/<body[^>]*>/i;return _e(Oe)?Oe=Oe.replace(Et,function(Wt){return Wt+Ze}):Oe=Ze+Oe,Oe}function Ne(){u.reset(),w.value=null,q.value=!1,k.value=null,d.value=[],y.value={}}function lt(Oe=!1){if(Oe===!1&&A.value){ee.value=!0;return}else ee.value&&(ee.value=!1);t.forward?(u.fill("forward_attachments",Y.value.map(Ze=>Ze.id)),B(`/emails/${t.message.id}/forward`).then(()=>Innoclapps.dialog().hide("replyMessageModal"))):B(`/emails/${t.message.id}/reply`).then(()=>Innoclapps.dialog().hide("replyMessageModal"))}function Ke(){if(Ge()?at():De()||dt(),xe.value){const Oe=$e();Oe.length>0&&u.set("cc",Oe)}}function $e(){let Oe=t.message.cc;return le.value&&(Oe=Oe.filter(Ze=>!t.message.reply_to.some(Et=>Et.address===Ze.address))),Oe.map(Ze=>({address:Ze.address,name:Ze.name}))}function De(){if(le.value){const Oe=t.message.reply_to.map(Ze=>({address:Ze.address,name:Ze.name}));return u.set("to",Oe),!0}return!1}function at(){u.set("to",t.message.to.map(Oe=>({address:Oe.address,name:Oe.name})))}function dt(){t.message.from&&u.set("to",[{address:t.message.from.address,name:t.message.from.name}])}function we(){if(t.toAll){Ke();return}Ge()?at():De()||dt(),u.set("cc",null)}function Ge(){const{message:Oe}=t;return Oe.reply_to.length===1&&Oe.reply_to[0].address===Oe.email_account_email||!le.value&&Oe.from.address===Oe.email_account_email}function yt(Oe){if(Oe===null)return Oe;const Ze=[...o,i("mail.reply_prefix"),i("mail.forward_prefix")];return Oe.replace(new RegExp(Ze.join("|"),"gmi"),"").trim()}function rn(){Innoclapps.request(`/associations/emails/${t.message.id}`,{perPage:100}).then(({data:Oe})=>{let Ze={};for(let Et in Oe)Ze[Et]=Oe[Et].map(Wt=>Wt.id);u.set("associations",Ze)})}return(Oe,Ze)=>{const Et=c("IModalSeparator"),Wt=c("ILink"),Qn=c("Icon"),wo=c("IAlertBody"),ht=c("IAlert"),Rn=c("IFormLabel"),On=c("IFormInput"),ca=c("IFormError"),da=c("IFormCheckbox"),et=c("IFormCheckboxLabel"),vt=c("IFormCheckboxField"),Sn=c("DatePicker"),mt=c("IButton"),Ln=c("IModal"),so=ze("i-tooltip");return g(),R(Ln,{id:"replyMessageModal",size:"xl","hide-footer":re.value,visible:e.visible,title:Oe.$t("mailclient::inbox."+(e.forward?"forward_message":"reply_to_message"),{subject:e.message.subject}),static:"",onHidden:Ne,onShown:me},{"modal-footer":p(({cancel:en})=>[_("div",FTe,[_("div",ATe,[te(l(Fs,{modelValue:v(u).task_date,"onUpdate:modelValue":Ze[14]||(Ze[14]=uo=>v(u).task_date=uo)},null,8,["modelValue"]),[[fe,!!e.resourceName]])]),_("div",RTe,[_("div",{class:be(["flex items-center",v(q)?"sm:mr-1":"sm:mr-4"])},[l(vt,{class:"shrink-0"},{default:p(()=>[l(da,{checked:v(q),"onUpdate:checked":Ze[15]||(Ze[15]=uo=>hn(q)?q.value=uo:null)},null,8,["checked"]),l(et,{text:v(q)?"":Oe.$t("mailclient::schedule.send_later")},null,8,["text"])]),_:1}),v(q)?(g(),R(Sn,{key:0,modelValue:v(u).scheduled_at,"onUpdate:modelValue":Ze[16]||(Ze[16]=uo=>v(u).scheduled_at=uo),"min-date":"now",mode:"dateTime",required:!0},{default:p(({inputValue:uo,inputEvents:Wa})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:uo,placeholder:Oe.$t("mailclient::schedule.choose_date")},Kr(Wa,!0)),null,16,DTe)]),_:1},8,["modelValue"])):Z("",!0)],2),l(mt,{class:"w-full sm:mr-1 sm:w-auto",text:Oe.$t("core::app.cancel"),basic:"",onClick:en},null,8,["text","onClick"]),l(mt,{class:"w-full sm:w-auto",variant:ee.value?"danger":"primary",loading:v(E),disabled:se.value,text:ee.value?Oe.$t("core::app.confirm"):v(q)?Oe.$t("mailclient::schedule.schedule"):e.forward?Oe.$t("mailclient::inbox.forward"):Oe.$t("mailclient::inbox.reply"),onClick:Ze[17]||(Ze[17]=uo=>lt(ee.value))},null,8,["variant","loading","disabled","text"])])])]),default:p(()=>[l(Et),_("div",gTe,[_("div",bTe,[_("div",yTe,[te(l(Wt,{class:"font-medium",text:Oe.$t("mailclient.mail.templates.templates"),onClick:Ze[0]||(Ze[0]=en=>re.value=!0)},null,8,["text"]),[[fe,!re.value]]),te(l(Wt,{class:"font-medium",text:Oe.$t("mailclient.mail.compose"),onClick:Ze[1]||(Ze[1]=en=>re.value=!1)},null,8,["text"]),[[fe,re.value]])]),te(_("div",_Te,[l(Uo,{modelValue:v(u).associations,"onUpdate:modelValue":Ze[2]||(Ze[2]=en=>v(u).associations=en),"resource-name":"emails","resource-id":e.message.id,"associations-count":e.message.associations_count,"primary-resource-name":e.resourceName,"initial-associateables":e.resourceName?e.relatedResource:void 0,associateables:v(y),onChange:Ze[3]||(Ze[3]=en=>(v(F)(),v(T)()))},{"after-record":p(({title:en,resource:uo,record:Wa,isSelected:As,isSearching:Rs,selectedRecords:Ds})=>[te((g(),D("span",wTe,[v(S)(Wa,Ds,uo,As,Rs)?(g(),R(Qn,{key:0,icon:"CodeBracket",class:"size-4 text-neutral-500 dark:text-neutral-400"})):Z("",!0)])),[[so,Oe.$t("mailclient::inbox.will_use_placeholders_from_record",{resourceName:en}),void 0,{top:!0}]])]),_:1},8,["modelValue","resource-id","associations-count","primary-resource-name","initial-associateables","associateables"])],512),[[fe,!re.value]])])]),l(Et,{class:"mb-4"}),te(_("div",null,[l(ht,{variant:"danger",show:v(M),dismissible:""},{default:p(()=>[l(wo,null,{default:p(()=>[ne(K(Oe.$t("mailclient::mail.validation.invalid_recipients")),1)]),_:1})]),_:1},8,["show"]),l(Pl,{ref_key:"toRef",ref:ue,modelValue:v(u).to,"onUpdate:modelValue":Ze[4]||(Ze[4]=en=>v(u).to=en),type:"to",form:v(u),label:Oe.$t("mailclient::inbox.to"),onRecipientRemoved:v(j),onRecipientSelected:v(U)},{after:p(()=>[_("div",ITe,[v(X)?Z("",!0):(g(),R(Wt,{key:0,text:Oe.$t("mailclient.inbox.cc"),onClick:v(O)},null,8,["text","onClick"])),v(W)?Z("",!0):(g(),R(Wt,{key:1,text:Oe.$t("mailclient.inbox.bcc"),onClick:v(H)},null,8,["text","onClick"]))])]),_:1},8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),Ze[20]||(Ze[20]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),v(X)?(g(),D("div",xTe,[l(Pl,{modelValue:v(u).cc,"onUpdate:modelValue":Ze[5]||(Ze[5]=en=>v(u).cc=en),type:"cc",form:v(u),label:Oe.$t("mailclient::inbox.cc"),onRecipientRemoved:v(G),onRecipientSelected:v(N)},null,8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),Ze[18]||(Ze[18]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1))])):Z("",!0),v(W)?(g(),D("div",kTe,[l(Pl,{modelValue:v(u).bcc,"onUpdate:modelValue":Ze[6]||(Ze[6]=en=>v(u).bcc=en),type:"bcc",form:v(u),label:Oe.$t("mailclient::inbox.bcc")},null,8,["modelValue","form","label"]),Ze[19]||(Ze[19]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1))])):Z("",!0),_("div",$Te,[_("div",CTe,[l(Rn,{for:"subject",label:Oe.$t("mailclient::inbox.subject")},null,8,["label"])]),_("div",STe,[_("div",TTe,[l(On,{id:"subject",class:be({"border-danger-600":!v(x)||v($),"border-dashed !border-neutral-400":ce.value}),"model-value":ae.value?v(k):v(w),disabled:ae.value,"onUpdate:modelValue":Ze[7]||(Ze[7]=en=>w.value=en),onDragover:Ze[8]||(Ze[8]=en=>ae.value?void 0:ce.value=!0),onDragleave:Ze[9]||(Ze[9]=en=>ce.value=!1),onDrop:Ze[10]||(Ze[10]=en=>ce.value=!1)},null,8,["class","model-value","disabled"]),te(l(Wt,{tabindex:"-1",onClick:Ze[11]||(Ze[11]=en=>ae.value=!1)},{default:p(()=>[l(Qn,{icon:"CodeBracket",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1},512),[[fe,ae.value]]),v(C)&&!ae.value&&v(I).length>0?(g(),R(Wt,{key:0,tabindex:"-1",plain:"",onClick:Ze[12]||(Ze[12]=en=>ae.value=!0)},{default:p(()=>[l(Qn,{icon:"ViewfinderCircle",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1})):Z("",!0)]),l(ca,{error:v(u).getError("subject")},null,8,["error"])])]),Ze[21]||(Ze[21]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),l(au,{ref_key:"editorRef",ref:oe,modelValue:v(u).message,"onUpdate:modelValue":Ze[13]||(Ze[13]=en=>v(u).message=en),placeholders:v(b),"placeholders-parse-in-progress":v(L),"with-drop":!0,onPlaceholderInserted:v(F),onTemplateSelected:ie},null,8,["modelValue","placeholders","placeholders-parse-in-progress","onPlaceholderInserted"]),_("div",ETe,[l(ur,{"action-url":`${Oe.$scriptConfig("apiURL")}/media/pending/${v(m)}`,"select-file-text":Oe.$t("core::app.attach_files"),onFileUploaded:v(f)},{default:p(()=>[l(_c,{class:be({"border-b border-neutral-200 dark:border-neutral-500/30":Y.value.length>0&&v(d).length>0}),items:Y.value,"authorize-delete":!0,onDeleteRequested:ve},null,8,["class","items"]),l(_c,{class:"mb-3",items:v(d),"authorize-delete":!0,onDeleteRequested:v(h)},null,8,["items","onDeleteRequested"])]),_:1},8,["action-url","select-file-text","onFileUploaded"])]),ee.value?(g(),R(ht,{key:2,variant:"warning",class:"mt-4"},{default:p(()=>[l(wo,null,{default:p(()=>[ne(K(Oe.$t("mailclient::inbox.pre_send_empty_placeholders_found")),1)]),_:1})]),_:1})):Z("",!0)],512),[[fe,!re.value]]),re.value?(g(),R(R5,{key:0,onSelected:ie,onCreated:ge,onUpdated:ge,onWillCreate:ge,onWillEdit:ge})):Z("",!0)]),_:1},8,["hide-footer","visible","title"])}}},OTe={class:"flex flex-1 grow flex-col space-y-1 lg:flex-row lg:space-x-3 lg:space-y-0"},PTe={class:"flex grow flex-col items-start"},MTe={class:"inline-flex items-center space-x-3"},BTe={class:"flex items-center space-x-1 self-start"},NTe={class:"flex"},VTe={class:"-mt-0.5 ml-3"},LTe={class:"flex flex-col px-3 py-2"},qTe={class:"font-sans text-base leading-[initial] dark:text-white sm:text-sm"},UTe={key:0,class:"-mx-6 mb-3 mt-4 border-t border-neutral-200 px-6 pt-4 dark:border-neutral-500/30"},P5={__name:"RelatedEmail",props:{viaResource:{type:String,required:!0},viaResourceId:{type:[String,Number],required:!0},relatedResource:{type:Object,required:!0},email:{type:Object,required:!0}},setup(e){const t=e,n=Innoclapps.resourceName("emails"),o=Le("synchronizeResource"),a=Le("decrementResourceCount"),r=U4e,s=fn(),{deleteResource:i}=qt(n),{localizedDateTime:u}=it(),{TAGS_TYPE:d,syncTags:m}=mh(),f=V(!1),h=V(!1),y=V(!1),b=P(()=>t.email.cc&&t.email.cc.length>0);function I(){x(!1),$(!1)}function w(T){T&&!t.email.is_read&&Innoclapps.request().post(`/emails/${t.email.id}/read`).then(({data:S})=>{o({emails:S}),a("unread_emails_for_user_count"),s.dispatch("emailAccounts/decrementUnreadCountUI")})}async function k(){await i(t.email.id),t.email.is_read||(a("unread_emails_for_user_count"),s.dispatch("emailAccounts/decrementUnreadCountUI")),o({emails:{id:t.email.id,_delete:!0}})}function x(T=!0){f.value=T,y.value=!1}function $(T=!0){h.value=T}function C(){f.value=!0,y.value=!0}async function F(T){let S=await m(t.email.id,T);o({emails:{id:S.id,tags:{_reset:S.tags}}})}return(T,S)=>{const A=c("ICardHeading"),E=c("IButton"),B=c("IDropdownItem"),M=c("IDropdownMinimal"),N=c("ICardActions"),G=c("IBadge"),U=c("ICardHeader"),j=c("IPopoverButton"),O=c("IPopoverPanel"),H=c("IPopover"),W=c("ITextDark"),X=c("IText"),q=c("TextCollapse"),L=c("ICardBody"),ee=c("ICard");return te((g(),R(ee,{class:be("email-"+e.email.id)},{default:p(()=>[l(U,null,{default:p(()=>{var ce;return[_("div",OTe,[_("div",PTe,[l(A,{class:be(["text-base/6 sm:text-sm/6",e.email.is_read?"font-medium":"rounded-md bg-neutral-50 px-1.5 font-bold dark:bg-neutral-500/10"])},{default:p(()=>[S[0]||(He(-1),(S[0]=_("span",{textContent:K(e.email.subject?e.email.subject:"("+T.$t("mailclient::inbox.no_subject")+")")},null,8,["textContent"])).cacheIndex=0,He(1),S[0])]),_:1},8,["class"]),_("div",MTe,[l(Uo,{placement:"bottom-start","associations-count":e.email.associations_count,"initial-associateables":e.relatedResource,"resource-id":e.email.id,"resource-name":v(n),"primary-record":e.relatedResource,"primary-resource-name":e.viaResource,onSynced:S[1]||(S[1]=ue=>v(o)({emails:ue}))},null,8,["associations-count","initial-associateables","resource-id","resource-name","primary-record","primary-resource-name"]),l(Ts,{class:"!w-auto",simple:!0,type:v(d),"model-value":e.email.tags,disabled:!((ce=e.email.authorizations)!=null&&ce.update),"onUpdate:modelValue":F},null,8,["type","model-value","disabled"])])]),_("div",BTe,[S[2]||(He(-1),(S[2]=l(E,{class:"lg:mt-1.5",variant:"secondary",icon:"Reply",text:T.$t("mailclient::inbox.reply"),small:"",onClick:ue=>x(!0)},null,8,["text","onClick"])).cacheIndex=2,He(1),S[2]),b.value?(g(),R(E,{key:0,class:"lg:mt-1.5",variant:"secondary",icon:"Reply",text:T.$t("mailclient::inbox.reply_all"),small:"",onClick:C},null,8,["text"])):Z("",!0),S[3]||(He(-1),(S[3]=l(E,{class:"lg:mt-1.5",variant:"secondary",icon:"Share",text:T.$t("mailclient::inbox.forward"),small:"",onClick:ue=>$(!0)},null,8,["text","onClick"])).cacheIndex=3,He(1),S[3])])]),l(N,{class:"mt-1.5 self-start"},{default:p(()=>[l(M,{small:""},{default:p(()=>[l(B,{icon:"Eye",text:T.$t("mailclient::mail.view"),to:{name:"inbox-message",params:{id:e.email.id,account_id:e.email.email_account_id,folder_id:e.email.folders[0].id}}},null,8,["text","to"]),l(B,{icon:"Trash",text:T.$t("core::app.delete"),onClick:S[4]||(S[4]=ue=>T.$confirm(k))},null,8,["text"])]),_:1})]),_:1}),S[5]||(He(-1),(S[5]=e.email.opened_at?(g(),R(G,{key:0,class:"absolute -bottom-6 right-2",variant:"success",icon:"Eye"},{default:p(()=>[ne(" ("+K(e.email.opens)+") - "+K(v(u)(e.email.opened_at)),1)]),_:1})):Z("",!0)).cacheIndex=5,He(1),S[5])]}),_:1}),l(L,null,{default:p(()=>[S[6]||(He(-1),(S[6]=l(Po,{label:T.$t("mailclient::inbox.from"),addresses:e.email.from},null,8,["label","addresses"])).cacheIndex=6,He(1),S[6]),_("div",NTe,[S[7]||(He(-1),(S[7]=l(Po,{label:T.$t("mailclient::inbox.to"),addresses:e.email.to},null,8,["label","addresses"])).cacheIndex=7,He(1),S[7]),_("div",VTe,[l(H,{placement:"top"},{default:p(()=>[l(j,{link:""},{default:p(()=>[ne(K(T.$t("core::app.details"))+" ",1),S[16]||(S[16]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1}),l(O,{class:"w-72"},{default:p(()=>[_("div",LTe,[S[8]||(He(-1),(S[8]=l(Po,{label:T.$t("mailclient::inbox.from"),addresses:e.email.from},null,8,["label","addresses"])).cacheIndex=8,He(1),S[8]),S[9]||(He(-1),(S[9]=l(Po,{label:T.$t("mailclient::inbox.to"),addresses:e.email.to},null,8,["label","addresses"])).cacheIndex=9,He(1),S[9]),S[10]||(He(-1),(S[10]=l(Po,{label:T.$t("mailclient::inbox.reply_to"),addresses:e.email.reply_to,"show-when-empty":!1},null,8,["label","addresses"])).cacheIndex=10,He(1),S[10]),S[11]||(He(-1),(S[11]=l(Po,{label:T.$t("mailclient::inbox.cc"),addresses:e.email.cc,"show-when-empty":!1},null,8,["label","addresses"])).cacheIndex=11,He(1),S[11]),S[12]||(He(-1),(S[12]=l(Po,{label:T.$t("mailclient::inbox.bcc"),addresses:e.email.bcc,"show-when-empty":!1},null,8,["label","addresses"])).cacheIndex=12,He(1),S[12])])]),_:1})]),_:1})])]),S[13]||(He(-1),(S[13]=_("div",{class:"inline-flex space-x-1"},[l(W,{class:"font-semibold"},{default:p(()=>[ne(K(T.$t("mailclient::inbox.date"))+": ",1)]),_:1}),l(X,{text:v(u)(e.email.date)},null,8,["text"])])).cacheIndex=13,He(1),S[13]),S[14]||(He(-1),(S[14]=_("div",{class:"mail-text all-revert"},[_("div",qTe,[e.email.visible_text?(g(),R(q,{key:0,class:"mt-3",text:e.email.visible_text,length:250,lightbox:""},null,8,["text"])):Z("",!0),S[17]||(S[17]=_("div",{class:"clear-both"},null,-1)),l(E5,{text:e.email.hidden_text},null,8,["text"])])])).cacheIndex=14,He(1),S[14]),S[15]||(He(-1),(S[15]=e.email.media.length>0?(g(),D("div",UTe,[l(W,{class:"mb-2 font-medium",as:"dd",text:T.$t("mailclient.mail.attachments")},null,8,["text"]),l(T5,{attachments:e.email.media},null,8,["attachments"])])):Z("",!0)).cacheIndex=15,He(1),S[15])]),_:1}),l(O5,{message:e.email,visible:f.value||h.value,forward:h.value,"resource-name":e.viaResource,"resource-id":e.viaResourceId,"related-resource":e.relatedResource,"to-all":y.value,onHidden:I},null,8,["message","visible","forward","resource-name","resource-id","related-resource","to-all"])]),_:1},8,["class"])),[[v(r),{callback:w,once:!0,throttle:300,intersection:{threshold:.5}}]])}}},jTe={class:"mt-3"},zTe={__name:"RecordTabTimelineEmail",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const{localizedDateTime:t}=it();return(n,o)=>(g(),R(_o,{"heading-class":"font-medium",icon:"Mail","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:n.$t("mailclient::mail.message")},{date:p(()=>[ne(K(v(t)(e.log.date)),1)]),default:p(()=>[_("div",jTe,[l(P5,{email:e.log,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["email","via-resource","via-resource-id","related-resource"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}};function M5(e,t){const n=V([]);return Jt(()=>{n.value=[];const o=bt(t),a=bt(e);Object.keys(o).length!==0&&(a==="deals"||a==="contacts"?o.companies.length===1&&n.value.push({id:o.companies[0].id,display_name:o.companies[0].display_name,path:o.companies[0].path,resourceName:Innoclapps.resourceName("companies")}):a===Innoclapps.resourceName("companies")&&o.contacts.length===1&&n.value.push({id:o.contacts[0].id,display_name:o.contacts[0].display_name,path:o.contacts[0].path,resourceName:Innoclapps.resourceName("contacts")}))}),{newMessageAdditionalAssociations:n}}const HTe={class:"-mx-8 bg-neutral-50 px-8 py-2 dark:bg-neutral-500/10"},WTe={class:"flex"},GTe={class:"mr-4"},KTe={class:"font-medium"},ZTe={key:0,class:"ml-2"},YTe={key:0,class:"ml-2 space-x-2"},XTe={class:"flex items-center"},QTe={class:"mr-1 hidden sm:inline-block"},JTe=["textContent"],eEe={class:"flex items-center"},tEe={class:"mr-1 min-w-14"},nEe={class:"grow"},oEe={class:"relative"},aEe={class:"relative mt-3"},rEe={class:"flex flex-col sm:flex-row sm:items-center"},lEe={class:"grow"},sEe={class:"mt-2 space-y-2 sm:mt-0 sm:flex sm:items-center sm:space-y-0"},iEe=["value","placeholder"],zd={__name:"ComposeMessage",props:{resourceName:String,resourceId:[String,Number],relatedResource:Object,visible:Boolean,defaultAccount:Object,to:{type:Array,default:()=>[]},associations:{type:Array,default:()=>[]}},setup(e,{expose:t}){const n=e,o=Le("synchronizeResource",null),{form:a,attachments:r,attachmentsDraftId:s,handleAttachmentUploaded:i,destroyPendingAttachment:u,customAssociationsValue:d,placeholders:m,resourcesForPlaceholders:f,subject:h,parsedSubject:y,subjectPlaceholdersSyntaxIsValid:b,hasInvalidSubjectPlaceholders:I,subjectContainsPlaceholders:w,parsePlaceholdersForMessage:k,parsePlaceholdersForSubject:x,showWillUsePlaceholdersIconToAssociateResourceRecord:$,sending:C,sendRequest:F,hasInvalidAddresses:T,associateSelectedRecipients:S,dissociateRemovedRecipients:A,associateMessageRecord:E,handleRecipientSelectedEvent:B,handleToRecipientRemovedEvent:M,setWantsCC:N,setWantsBCC:G,wantsBcc:U,wantsCc:j,hasEmptyPlaceholders:O,schedule:H,messagePlaceholdersBeingParsed:W}=F5(n.resourceName,n.relatedResource,o),{signature:X}=ph(),{emailAccounts:q,fetchEmailAccounts:L}=$a(),ee=V(!1);Se(O,(Be,Fe)=>{Fe&&!Be&&(ee.value=!1)});const ce=V(null),ue=V(null),oe=V(!1),re=V({}),Y=V(!1),ae=V(!1),se=V(!1),xe=P(()=>a.to.length===0||!h.value||C.value||H.value&&!a.scheduled_at);Se(()=>n.defaultAccount,Be=>{re.value=Be}),Se(()=>n.to,Be=>{a.to=Be,S(Be)},{immediate:!0});function le(Be){Be.forEach(Fe=>E(Fe,Fe.resourceName))}Se(()=>n.associations,Be=>{le(Be)},{immediate:!0});function ge(Be){h.value||(h.value=Be.subject),a.message&&a.message.startsWith("<p></p>"+X.value)&&(a.message=a.message.replace("<p></p>","")),a.message=Be.body+a.message,ae.value=!1,k(),x(),ve(),We(()=>ce.value.focus())}function ve(){document.querySelector(".dialog").scrollTo({top:0,behavior:"instant"})}function ie(){a.to&&S(a.to),le(n.associations),s.value=So()}function me(){a.reset(),H.value=!1,n.to&&(a.to=n.to),h.value=null,y.value=null,r.value=[],d.value={}}function Ce(Be=!1){if(Be===!1&&O.value){ee.value=!0;return}else ee.value&&(ee.value=!1);F(`/inbox/emails/${re.value.id}`).then(()=>Innoclapps.dialog().hide("composeMessageModal"))}function ke(){L().then(Be=>{re.value=n.defaultAccount||Be[0],Y.value=!0})}return ke(),t({subjectRef:ue}),(Be,Fe)=>{const he=c("IModalSeparator"),_e=c("ILink"),Te=c("Icon"),Ne=c("IAlertBody"),lt=c("IAlert"),Ke=c("IFormLabel"),$e=c("IDropdownButton"),De=c("IDropdownItem"),at=c("IDropdownMenu"),dt=c("IDropdown"),we=c("IFormInput"),Ge=c("IFormError"),yt=c("IOverlay"),rn=c("IFormCheckbox"),Oe=c("IFormCheckboxLabel"),Ze=c("IFormCheckboxField"),Et=c("DatePicker"),Wt=c("IButton"),Qn=c("IModal"),wo=ze("i-tooltip");return g(),R(Qn,{id:"composeMessageModal",size:"xl","hide-footer":ae.value,visible:e.visible,title:Be.$t("mailclient::inbox.new_message"),static:"",onHidden:me,onShown:ie},{"modal-footer":p(({cancel:ht})=>[_("div",rEe,[_("div",lEe,[te(l(Fs,{modelValue:v(a).task_date,"onUpdate:modelValue":Fe[14]||(Fe[14]=Rn=>v(a).task_date=Rn)},null,8,["modelValue"]),[[fe,!!e.resourceName]])]),_("div",sEe,[_("div",{class:be(["flex items-center",v(H)?"sm:mr-1":"sm:mr-4"])},[l(Ze,{class:"shrink-0"},{default:p(()=>[l(rn,{checked:v(H),"onUpdate:checked":Fe[15]||(Fe[15]=Rn=>hn(H)?H.value=Rn:null)},null,8,["checked"]),l(Oe,{text:v(H)?"":Be.$t("mailclient::schedule.send_later")},null,8,["text"])]),_:1}),v(H)?(g(),R(Et,{key:0,modelValue:v(a).scheduled_at,"onUpdate:modelValue":Fe[16]||(Fe[16]=Rn=>v(a).scheduled_at=Rn),"min-date":"now",mode:"dateTime",required:!0},{default:p(({inputValue:Rn,inputEvents:On})=>[_("input",Ue({class:"cursor-pointer rounded-md border-neutral-300 bg-transparent py-1 text-base font-medium text-neutral-700 ring-primary-600 focus:border-transparent focus:ring-primary-600 dark:border-neutral-500/30 dark:text-neutral-100 dark:ring-primary-500 dark:focus:ring-primary-500 sm:text-sm",value:Rn,placeholder:Be.$t("mailclient::schedule.choose_date")},Kr(On,!0)),null,16,iEe)]),_:1},8,["modelValue"])):Z("",!0)],2),l(Wt,{class:"w-full sm:mr-1 sm:w-auto",text:Be.$t("core::app.cancel"),basic:"",onClick:ht},null,8,["text","onClick"]),l(Wt,{class:"w-full sm:w-auto",loading:v(C),variant:ee.value?"danger":"primary",disabled:xe.value,text:ee.value?Be.$t("core::app.confirm"):v(H)?Be.$t("mailclient::schedule.schedule"):Be.$t("mailclient::inbox.send"),onClick:Fe[17]||(Fe[17]=Rn=>Ce(ee.value))},null,8,["loading","variant","disabled","text"])])])]),default:p(()=>[l(he),_("div",HTe,[_("div",WTe,[_("div",GTe,[te(l(_e,{class:"font-medium",text:Be.$t("mailclient.mail.templates.templates"),onClick:Fe[0]||(Fe[0]=ht=>ae.value=!0)},null,8,["text"]),[[fe,!ae.value]]),te(l(_e,{class:"font-medium",text:Be.$t("mailclient.mail.compose"),onClick:Fe[1]||(Fe[1]=ht=>ae.value=!1)},null,8,["text"]),[[fe,ae.value]])]),te(_("div",KTe,[l(Uo,{modelValue:v(a).associations,"onUpdate:modelValue":Fe[2]||(Fe[2]=ht=>v(a).associations=ht),"primary-record-disabled":!0,"primary-record":e.resourceName?e.relatedResource:void 0,"primary-resource-name":e.resourceName,"initial-associateables":e.resourceName?e.relatedResource:void 0,associateables:v(d),onChange:Fe[3]||(Fe[3]=ht=>(v(k)(),v(x)()))},{"after-record":p(({title:ht,resource:Rn,record:On,isSelected:ca,isSearching:da,selectedRecords:et})=>[v($)(On,et,Rn,ca,da)?te((g(),D("span",ZTe,[l(Te,{icon:"CodeBracket",class:"size-4 text-neutral-500 dark:text-neutral-400"})])),[[wo,Be.$t("mailclient::inbox.will_use_placeholders_from_record",{resourceName:ht}),void 0,{top:!0}]]):Z("",!0)]),_:1},8,["modelValue","primary-record","primary-resource-name","initial-associateables","associateables"])],512),[[fe,!ae.value]])])]),l(he,{class:"mb-4"}),te(_("div",null,[l(yt,{show:!Y.value},{default:p(()=>[l(lt,{variant:"danger",show:v(T),dismissible:""},{default:p(()=>[l(Ne,null,{default:p(()=>[ne(K(Be.$t("mailclient::mail.validation.invalid_recipients")),1)]),_:1})]),_:1},8,["show"]),l(Pl,{modelValue:v(a).to,"onUpdate:modelValue":Fe[4]||(Fe[4]=ht=>v(a).to=ht),type:"to",form:v(a),label:Be.$t("mailclient::inbox.to"),onRecipientRemoved:v(M),onRecipientSelected:v(B)},{after:p(()=>[!v(U)||!v(j)?(g(),D("div",YTe,[v(j)?Z("",!0):(g(),R(_e,{key:0,text:Be.$t("mailclient.inbox.cc"),onClick:v(N)},null,8,["text","onClick"])),v(U)?Z("",!0):(g(),R(_e,{key:1,text:Be.$t("mailclient.inbox.bcc"),onClick:v(G)},null,8,["text","onClick"]))])):Z("",!0)]),_:1},8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),Fe[22]||(Fe[22]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),te(_("div",null,[l(Pl,{modelValue:v(a).cc,"onUpdate:modelValue":Fe[5]||(Fe[5]=ht=>v(a).cc=ht),type:"cc",form:v(a),label:Be.$t("mailclient::inbox.cc"),onRecipientRemoved:v(A),onRecipientSelected:v(S)},null,8,["modelValue","form","label","onRecipientRemoved","onRecipientSelected"]),Fe[18]||(Fe[18]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1))],512),[[fe,v(j)]]),te(_("div",null,[l(Pl,{modelValue:v(a).bcc,"onUpdate:modelValue":Fe[6]||(Fe[6]=ht=>v(a).bcc=ht),type:"bcc",form:v(a),label:Be.$t("mailclient::inbox.bcc")},null,8,["modelValue","form","label"]),Fe[19]||(Fe[19]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1))],512),[[fe,v(U)]]),_("div",XTe,[l(Ke,{as:"p",class:"mr-1 min-w-14",label:Be.$t("mailclient::inbox.from")},null,8,["label"]),l(dt,{"adaptive-width":""},{default:p(()=>[l($e,{basic:""},{default:p(()=>[_("span",null,[_("span",QTe,K(re.value.formatted_from_name_header),1),Fe[20]||(Fe[20]=_("span",{class:"hidden sm:inline",textContent:"<"},null,-1)),_("span",{textContent:K(re.value.display_email)},null,8,JTe),Fe[21]||(Fe[21]=_("span",{class:"hidden sm:inline",textContent:">"},null,-1))])]),_:1}),l(at,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(q),ht=>(g(),R(De,{key:ht.id,text:ht.display_email,active:ht.id===re.value.id,onClick:Rn=>re.value=ht},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})]),Fe[23]||(Fe[23]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),_("div",eEe,[_("div",tEe,[l(Ke,{for:"subject",label:Be.$t("mailclient::inbox.subject")},null,8,["label"])]),_("div",nEe,[_("div",oEe,[l(we,{id:"subject",ref_key:"subjectRef",ref:ue,class:be({"!border-danger-600":!v(b)||v(I),"border-dashed !border-neutral-400":se.value}),"model-value":oe.value?v(y):v(h),disabled:oe.value,"onUpdate:modelValue":Fe[7]||(Fe[7]=ht=>h.value=ht),onDragover:Fe[8]||(Fe[8]=ht=>oe.value?void 0:se.value=!0),onDragleave:Fe[9]||(Fe[9]=ht=>se.value=!1),onDrop:Fe[10]||(Fe[10]=ht=>se.value=!1)},null,8,["class","model-value","disabled"]),te(l(_e,{tabindex:"-1",onClick:Fe[11]||(Fe[11]=ht=>oe.value=!1)},{default:p(()=>[l(Te,{icon:"CodeBracket",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1},512),[[fe,oe.value]]),v(w)&&!oe.value&&v(f).length>0?(g(),R(_e,{key:0,tabindex:"-1",plain:"",onClick:Fe[12]||(Fe[12]=ht=>oe.value=!0)},{default:p(()=>[l(Te,{icon:"ViewfinderCircle",class:"absolute bottom-0 right-4 top-0 m-auto size-5 text-neutral-500"})]),_:1})):Z("",!0)]),l(Ge,{error:v(a).getError("subject")},null,8,["error"])])]),Fe[24]||(Fe[24]=_("hr",{class:"my-3 border-t border-neutral-200 dark:border-neutral-500/30"},null,-1)),l(au,{ref_key:"editorRef",ref:ce,modelValue:v(a).message,"onUpdate:modelValue":Fe[13]||(Fe[13]=ht=>v(a).message=ht),placeholders:v(m),"placeholders-parse-in-progress":v(W),"with-drop":!0,onPlaceholderInserted:v(k),onTemplateSelected:ge},null,8,["modelValue","placeholders","placeholders-parse-in-progress","onPlaceholderInserted"]),_("div",aEe,[l(ur,{"action-url":`${Be.$scriptConfig("apiURL")}/media/pending/${v(s)}`,"select-file-text":Be.$t("core::app.attach_files"),onFileUploaded:v(i)},{default:p(()=>[l(_c,{class:"mb-3",items:v(r),"authorize-delete":!0,onDeleteRequested:v(u)},null,8,["items","onDeleteRequested"])]),_:1},8,["action-url","select-file-text","onFileUploaded"])])]),_:1},8,["show"]),ee.value?(g(),R(lt,{key:0,variant:"warning",class:"mt-4"},{default:p(()=>[l(Ne,null,{default:p(()=>[ne(K(Be.$t("mailclient::inbox.pre_send_empty_placeholders_found")),1)]),_:1})]),_:1})):Z("",!0)],512),[[fe,!ae.value]]),ae.value?(g(),R(R5,{key:0,onSelected:ge,onCreated:ve,onUpdated:ve,onWillCreate:ve,onWillEdit:ve})):Z("",!0)]),_:1},8,["hide-footer","visible","title"])}}},uEe=Object.assign({inheritAttrs:!1},{__name:"EmailSendableField",props:["resource","resourceName","resourceId","field","isFloating"],setup(e){const t=e,n=V(!1),o=V(null),{newMessageAdditionalAssociations:a}=M5(xt(t,"resourceName"),xt(t,"resource")),{emailAccounts:r,fetchEmailAccounts:s}=$a(),i=P(()=>[{address:t.field.value,name:t.resource.display_name,path:t.resource.path,resourceName:t.resourceName,id:t.resourceId}]);function u(d=!0){n.value=d,We(()=>{o.value.subjectRef.focus()})}return(d,m)=>{const f=c("IDropdownItem"),h=ze("i-tooltip");return g(),D(de,null,[n.value?(g(),R(zd,{key:0,ref_key:"composeRef",ref:o,visible:n.value,"resource-name":e.resourceName,"resource-id":e.resourceId,"related-resource":e.resource,associations:v(a),to:i.value,onHidden:m[0]||(m[0]=y=>n.value=!1)},null,8,["visible","resource-name","resource-id","related-resource","associations","to"])):Z("",!0),l(qk,Ue(d.$attrs,{field:e.field,"is-floating":e.isFloating,resource:e.resource,"resource-name":e.resourceName,"resource-id":e.resourceId,onShow:v(s)}),gn({_:2},[e.field.value&&!e.isFloating?{name:"start",fn:p(()=>[te((g(),D("span",null,[l(f,{href:"#",disabled:!v(r).length,text:d.$t("mailclient::mail.create"),onClick:m[1]||(m[1]=y=>u(!0))},null,8,["disabled","text"])])),[[h,v(r).length?"":d.$t("mailclient::mail.account.integration_not_configured")]])]),key:"0"}:void 0]),1040,["field","is-floating","resource","resource-name","resource-id","onShow"])],64)}}}),cEe={__name:"MailEditorField",props:pt({field:{type:Object,required:!0},resourceName:String,resourceId:[String,Number],validationErrors:Object,isFloating:Boolean},{modelValue:{},modelModifiers:{}}),emits:pt(["setInitialValue"],["update:modelValue"]),setup(e,{emit:t}){const n=e,o=t,a=Ht(e,"modelValue");function r(){o("setInitialValue",Zt(n.field.value)?"":n.field.value)}return r(),(s,i)=>{const u=c("BaseFormField");return g(),R(u,{"resource-name":e.resourceName,field:e.field,value:a.value,"is-floating":e.isFloating},{default:p(({readonly:d,fieldId:m})=>[l(cn,{field:e.field,label:e.field.label,"field-id":m,"validation-errors":e.validationErrors},{default:p(()=>[l(au,Ue({id:m,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),disabled:d},e.field.attributes),null,16,["id","modelValue","disabled"])]),_:2},1032,["field","label","field-id","validation-errors"])]),_:1},8,["resource-name","field","value","is-floating"])}}},dEe=Object.assign({inheritAttrs:!1},{__name:"EmailSendableField",props:["column","row","field","resourceName","resourceId"],setup(e){const t=e,{emailAccounts:n,fetchEmailAccounts:o}=$a(),a=V(!1),r=V(null),s=P(()=>[{address:t.field.value,name:t.row.display_name||t.row.name||t.row.contact,resourceName:t.resourceName,path:t.row.path,id:t.row.id}]);function i(u=!0){a.value=u,We(()=>{r.value.subjectRef.focus()})}return(u,d)=>{const m=c("IDropdownItem"),f=ze("i-tooltip");return g(),D(de,null,[a.value?(g(),R(zd,{key:0,ref_key:"composeRef",ref:r,visible:a.value,to:s.value,onHidden:d[0]||(d[0]=h=>a.value=!1)},null,8,["visible","to"])):Z("",!0),l(Uk,Ue(u.$attrs,{column:e.column,row:e.row,field:e.field,"resource-name":e.resourceName,"resource-id":e.resourceId,onShow:v(o)}),gn({_:2},[e.field.value?{name:"start",fn:p(()=>[te((g(),D("span",null,[e.row._trashed?Z("",!0):(g(),R(m,{key:0,href:"#",disabled:!v(n).length,text:u.$t("mailclient::mail.create"),onClick:d[1]||(d[1]=h=>i(!0))},null,8,["disabled","text"]))])),[[f,v(n).length?"":u.$t("mailclient::mail.account.integration_not_configured")]])]),key:"0"}:void 0]),1040,["column","row","field","resource-name","resource-id","onShow"])],64)}}}),B5={collection:[],collectionSet:!1,endpoint:"/mail/accounts"},mEe={SET(e,t){e.collection=t,e.collectionSet=!0},RESET(e){e.collection=[],e.collectionSet=!1},ADD(e,t){e.collection.push(t)},UPDATE(e,t){const n=Mt(e.collection,["id",parseInt(t.id)]);n!==-1&&(e.collection[n]=t.item)},REMOVE(e,t){const n=Mt(e.collection,["id",parseInt(t)]);n!=-1&&e.collection.splice(n,1)},SET_ACCOUNT_AS_PRIMARY(e,t){e.collection.forEach((n,o)=>{e.collection[o].is_primary=n.id==t})}},fEe={async fetch({state:e,commit:t},n={}){if(e.collectionSet)return e.collection;let{data:o}=await Innoclapps.request(e.endpoint,n);return t("SET",o),o},removePrimary({state:e,commit:t}){Innoclapps.request().delete(`${e.endpoint}/primary`).then(()=>{t("SET_ACCOUNT_AS_PRIMARY",null)})},setPrimary({state:e,commit:t},n){Innoclapps.request().put(`${e.endpoint}/${n}/primary`).then(()=>{t("SET_ACCOUNT_AS_PRIMARY",n)})},enableSync({state:e,commit:t},n){Innoclapps.request().post(`${e.endpoint}/${n}/sync/enable`).then(({data:o})=>{t("UPDATE",{id:o.id,item:o})})},disableSync({state:e,commit:t},n){Innoclapps.request().post(`${e.endpoint}/${n}/sync/disable`).then(({data:o})=>{t("UPDATE",{id:o.id,item:o})})},async destroy(e,t){let{data:n}=await Innoclapps.request().delete(`${B5.endpoint}/${t}`);return e.commit("REMOVE",t),e.dispatch("updateUnreadCountUI",n.unread_count),n},updateUnreadCountUI(e,t){e.commit("UPDATE_SIDEBAR_MENU_ITEM",{id:"inbox",data:{badge:t}},{root:!0})},decrementUnreadCountUI(e){let t=e.rootGetters.getSidebarMenuItem("inbox");t.badge<1||e.dispatch("updateUnreadCountUI",t.badge-1)}},pEe={namespaced:!0,state:B5,mutations:mEe,actions:fEe},vEe={__name:"RecordTabEmails",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("IBadge"),r=c("ITab");return Ia([e.resource.unread_emails_for_user_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"Mail"}),ne(" "+K(t.$t("mailclient::mail.emails"))+" ",1),te(l(a,{variant:"info",text:e.resource.unread_emails_for_user_count,pill:""},null,8,["text"]),[[fe,e.resource.unread_emails_for_user_count]])]),_:1}),n,0)}}},hEe=["title"],gEe={key:0},N5={__name:"ScheduledEmailsTable",props:{isFloating:Boolean},emits:["sent","deleted"],setup(e,{emit:t}){const n=t,o={sent:"success",sending:"neutral",pending:"info",failed:"danger"},{localizedDateTime:a}=it(),{t:r}=Pe(),s=V(null),i=V(null),u=V([{key:"subject",label:r("mailclient::inbox.subject"),tdClass:"font-medium"},{key:"to",label:r("mailclient::inbox.to")},{key:"scheduled_by",label:r("mailclient::schedule.scheduled_by")},{key:"scheduled_at",label:r("mailclient::schedule.scheduled_at"),sortable:!0},{key:"status",label:r("mailclient::schedule.status")},{key:"actions",label:""}]);async function d(f){i.value=f,await Innoclapps.request().post(`/emails/scheduled/${f}/send`),i.value=null,n("sent",f),s.value.reload()}async function m(f,h=!0){h&&await Innoclapps.confirm(),await Innoclapps.request().delete(`/emails/scheduled/${f}`),n("deleted",f),s.value.reload()}return(f,h)=>{const y=c("ITextSmall"),b=c("IBadge"),I=c("ITableRowAction"),w=c("ITableRowActions"),k=c("ISpinner"),x=c("IAlertBody"),$=c("IAlert"),C=c("ITableCell"),F=c("ITableRow");return g(),R(lv,{ref_key:"tableRef",ref:s,"table-id":"scheduled-emails","request-uri":"emails/scheduled",fields:u.value,searchable:!1},{scheduled_at:p(({row:T})=>[ne(K(v(a)(T.scheduled_at))+" ",1),T.sent_at?(g(),R(y,{key:0,class:"block"},{default:p(()=>[ne(K(f.$t("mailclient::schedule.sent_at"))+": "+K(v(a)(T.sent_at)),1)]),_:2},1024)):Z("",!0)]),status:p(({row:T})=>[l(b,{variant:o[T.status],text:f.$t("mailclient.schedule.statuses."+T.status)},null,8,["variant","text"])]),scheduled_by:p(({row:T})=>[ne(K(T.user.name)+" ",1),l(y,{class:"block"},{default:p(()=>[ne(K(v(a)(T.created_at)),1)]),_:2},1024)]),to:p(({row:T})=>[(g(!0),D(de,null,Ie(T.to,S=>(g(),D("span",{key:S.address,class:"block",title:S.address},K(S.name||S.address),9,hEe))),128))]),actions:p(({row:T})=>[te(_("div",null,[T.status!=="sending"?(g(),R(w,{key:0,disabled:!!i.value},{default:p(()=>[T.authorizations.delete?(g(),R(I,{key:0,text:f.$t(T.status==="pending"?"mailclient::schedule.cancel_and_delete":"core::app.delete"),"confirm-text":f.$t("core::app.confirm"),confirmable:e.isFloating,onConfirmed:S=>m(T.id,!1),onClick:S=>e.isFloating?void 0:m(T.id)},null,8,["text","confirm-text","confirmable","onConfirmed","onClick"])):Z("",!0),T.status!=="sent"?(g(),R(I,{key:1,text:f.$t("mailclient::schedule.send_now"),onClick:S=>d(T.id)},null,8,["text","onClick"])):Z("",!0)]),_:2},1032,["disabled"])):Z("",!0)],512),[[fe,!i.value||i.value&&i.value!==T.id]]),i.value&&i.value==T.id?(g(),R(k,{key:0,class:"size-4 text-success-500"})):Z("",!0)]),"before-row":p(({row:T})=>[T.fail_reason||T.retry_after?(g(),R(F,{key:0},{default:p(()=>[l(C,{colspan:"6"},{default:p(()=>[l($,{class:"-mx-6 -my-3 rounded-none",variant:T.retry_after?"warning":"danger"},{default:p(()=>[l(x,null,{default:p(()=>[T.retry_after?(g(),D("p",gEe,K(f.$t("mailclient::schedule.will_retry_at",{date:v(a)(T.retry_after)})),1)):Z("",!0),_("p",null,K(T.fail_reason),1)]),_:2},1024)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024)):Z("",!0)]),_:1},8,["fields"])}}},bEe={class:"[&>[data-slot=header]]:-mx-4 sm:[&>[data-slot=header]]:-mx-6"},yEe={class:"text-right"},_Ee={__name:"ScheduledEmailsModalTable",props:{requestQueryString:Object},emits:["sent","deleted"],setup(e){return(t,n)=>{const o=c("IButton"),a=c("IModal");return g(),R(a,{size:"xxl",title:t.$t("mailclient::schedule.scheduled_emails")},{"modal-footer":p(({cancel:r})=>[_("div",yEe,[l(o,{variant:"secondary",text:t.$t("core::app.hide"),onClick:r},null,8,["text","onClick"])])]),default:p(()=>[_("div",bEe,[l(N5,{class:"[--gutter:theme(spacing.6)] sm:[--gutter:theme(spacing.8)]","request-query-string":e.requestQueryString,"is-floating":"",bleed:"",onSent:n[0]||(n[0]=r=>t.$emit("sent",r)),onDeleted:n[1]||(n[1]=r=>t.$emit("deleted",r))},null,8,["request-query-string"])])]),_:1},8,["title"])}}},wEe={class:"sm:flex sm:items-start sm:justify-between"},IEe={class:"mt-5 sm:ml-6 sm:mt-0"},xEe={class:"mt-3 space-x-3 text-base font-medium sm:text-sm"},kEe={class:"mt-3 space-y-4 sm:mt-7"},Qm="emails",$Ee={__name:"RecordTabEmailsPanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o=Ct(),a=V(!1),r=V(!1),s=V(null),i=V(null),u=V(null),{dataLoadedFirstTime:d,focusToAssociateableElement:m,searchResults:f,isSearching:h,hasSearchResults:y,performSearch:b,search:I,loadData:w,infiniteHandler:k,refresh:x}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,infinityRef:s,synchronizeResource:n,timelineRelation:Qm}),{newMessageAdditionalAssociations:$}=M5(xt(t,"resourceName"),xt(t,"resource")),{emailAccounts:C}=$a(),F=P(()=>Vt(f.value||t.resource.emails,"date","desc")),T=P(()=>F.value.length>0),S=P(()=>{if(t.resource.email)return M(t.resource,t.resourceName);if(Object.keys(t.resource).length===0)return[];if(t.resourceName==="contacts"){if(t.resource.companies[0])return M(t.resource.companies[0],"companies")}else if(t.resourceName==="companies"){if(t.resource.contacts[0])return M(t.resource.contacts[0],"contacts")}else if(t.resourceName==="deals"){if(t.resource.contacts[0])return M(t.resource.contacts[0],"contacts");if(t.resource.companies[0])return M(t.resource.companies[0],"companies")}return[]});function A(){E(),x()}async function E(){const{data:U}=await Innoclapps.request("/emails/scheduled/count",{params:{via_resource:t.resourceName,via_resource_id:t.resourceId}});u.value=U.count}function B(){w(),u.value===null&&E()}function M(U,j){return U.email?[{address:U.email,name:U.display_name,id:U.id,resourceName:j}]:[]}function N(U=!0){a.value=U,U&&We(()=>i.value.subjectRef.focus())}function G(U){n({[Qm]:[U]})}return o.query.resourceId&&o.query.section===Qm&&Se(d,()=>{m(o.query.resourceId,"email")},{once:!0}),jt("email-accounts-sync-finished",x),jt("email-sent",G),jt("email-scheduled",E),(U,j)=>{const O=c("ITextDark"),H=c("IText"),W=c("IButton"),X=c("ILink"),q=c("InputSearch"),L=c("ICardBody"),ee=c("ICard"),ce=c("ITabPanel"),ue=ze("i-tooltip");return g(),R(ce,{lazy:!v(d),onActivatedOnce:B},{default:p(()=>[l(ee,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(L,null,{default:p(()=>[_("div",wEe,[_("div",null,[l(O,{class:"font-semibold",text:U.$t("mailclient.mail.manage_emails")},null,8,["text"]),l(H,{class:"max-w-xl",text:U.$t("mailclient.mail.info")},null,8,["text"])]),_("div",IEe,[te((g(),D("div",null,[l(W,{variant:"primary",icon:"PlusSolid",disabled:!v(C).length,text:U.$t("mailclient::mail.create"),onClick:j[0]||(j[0]=oe=>N(!0))},null,8,["disabled","text"])])),[[ue,v(C).length?null:U.$t("mailclient::mail.account.integration_not_configured")]])])]),_("div",xEe,[l(X,{to:{name:"email-accounts-index"},text:U.$t("mailclient::mail.account.connect")},null,8,["text"]),te(l(X,{onClick:j[1]||(j[1]=oe=>r.value=!0)},{default:p(()=>[ne(K(U.$t("mailclient::schedule.scheduled_emails"))+" ("+K(u.value)+") ",1)]),_:1},512),[[fe,u.value&&u.value>0]])]),te(l(q,{modelValue:v(I),"onUpdate:modelValue":[j[2]||(j[2]=oe=>hn(I)?I.value=oe:null),v(b)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[fe,T.value||v(I)]])]),_:1})]),_:1}),l(zd,{ref_key:"composeRef",ref:i,visible:a.value,"resource-name":e.resourceName,"resource-id":e.resourceId,"related-resource":e.resource,associations:v($),to:S.value,onHidden:j[3]||(j[3]=oe=>N(!1))},null,8,["visible","resource-name","resource-id","related-resource","associations","to"]),l(_Ee,{visible:r.value,"onUpdate:visible":j[4]||(j[4]=oe=>r.value=oe),"request-query-string":{via_resource:e.resourceName,via_resource_id:e.resourceId},onSent:A,onDeleted:E},null,8,["visible","request-query-string"]),_("div",kEe,[(g(!0),D(de,null,Ie(F.value,oe=>(g(),R(P5,{key:oe.id,email:oe,"via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource":e.resource},null,8,["email","via-resource","via-resource-id","related-resource"]))),128))]),te(l(H,{class:"mt-6 text-center",text:U.$t("core::app.no_search_results")},null,8,["text"]),[[fe,v(h)&&!v(y)]]),l(Ir,{ref_key:"infinityRef",ref:s,"scroll-element":e.scrollElement,onHandle:j[5]||(j[5]=oe=>v(k)(oe))},null,8,["scroll-element"])]),_:1},8,["lazy"])}}};function V5(e=!1){const{form:t}=Qe(),n=V(e);function o(a){return t.set({id:a.id||null,connection_type:a.connection_type,email:a.email,password:a.password,username:a.username,imap_server:a.imap_server,imap_port:a.imap_port,imap_encryption:a.imap_encryption,smtp_server:a.smtp_server,smtp_port:a.smtp_port,smtp_encryption:a.smtp_encryption,validate_cert:a.validate_cert}),new Promise((r,s)=>{t.post("/mail/accounts/connection").then(i=>{n.value=!0,r(i)}).catch(i=>{n.value=!1,s(i)})})}return{testConnection:o,isSuccessful:n,testConnectionForm:t}}const CEe=Object.assign({name:"EmailAccountsFormFolder"},{__name:"EmailAccountsFormFolder",props:{folder:{required:!0,type:Object},folders:{required:!0,type:Array},index:{required:!0,type:Number}},setup(e){return(t,n)=>{const o=c("IFormCheckbox"),a=c("IFormCheckboxLabel"),r=c("IFormCheckboxField"),s=c("EmailAccountsFormFolder",!0);return g(),D(de,null,[l(r,null,{default:p(()=>[l(o,{checked:e.folders[e.index].syncable,"onUpdate:checked":n[0]||(n[0]=i=>e.folders[e.index].syncable=i),disabled:!e.folder.selectable},null,8,["checked","disabled"]),l(a,{text:e.folder.display_name},null,8,["text"])]),_:1}),e.folder.children?(g(!0),D(de,{key:0},Ie(e.folder.children,(i,u)=>(g(),D("div",{key:u+i.name,class:"ml-6"},[l(s,{folder:i,index:u,folders:e.folder.children},null,8,["folder","index","folders"])]))),128)):Z("",!0)],64)}}}),SEe={__name:"EmailAccountsFormFolders",props:{folders:Array},setup(e){return(t,n)=>(g(!0),D(de,null,Ie(e.folders,(o,a)=>(g(),R(CEe,{key:a+o.name,folder:o,index:a,folders:e.folders},null,8,["folder","index","folders"]))),128))}},Y1={__name:"EmailAccountsFormFolderTypeSelect",props:pt(["form","field","folders","label","required"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue");return(n,o)=>{const a=c("ICustomSelect"),r=c("IFormError"),s=c("IFormGroup");return g(),R(s,{label:e.label,"label-for":e.field,required:e.required},{default:p(()=>[l(a,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=i=>t.value=i),clearable:!1,"input-id":e.field,options:e.folders,"option-label":i=>"--"+i.parent_id+"--"+i.display_name,reduce:i=>i.id},{option:p(i=>[ne(K(i.display_name.replace("--"+i.parent_id+"--","")),1)]),"selected-option":p(i=>[ne(K(i.display_name.replace("--"+i.parent_id+"--","")),1)]),_:1},8,["modelValue","input-id","options","option-label","reduce"]),l(r,{error:e.form.getError(e.field)},null,8,["error"])]),_:1},8,["label","label-for","required"])}}},TEe=["innerHTML"],EEe={key:0,class:"mb-3 rounded-lg border border-neutral-200 px-4 py-3 dark:border-neutral-500/30"},FEe={class:"mt-3 flex flex-col items-center sm:flex-row sm:space-x-2"},AEe={class:"mb-4 mt-6"},REe={class:"mb-4 font-medium text-neutral-700 dark:text-neutral-100"},DEe={class:"grid grid-cols-6 gap-6"},OEe={class:"col-span-2"},PEe={class:"col-span-4"},MEe={class:"mb-4 font-medium text-neutral-700 dark:text-neutral-100"},BEe={class:"grid grid-cols-6 gap-6"},NEe={class:"col-span-2"},VEe={class:"col-span-4"},LEe={class:"mb-3 rounded-lg border border-neutral-200 p-3 dark:border-neutral-500/30"},qEe={class:"rounded-lg border border-neutral-200 p-3 dark:border-neutral-500/30"},UEe={class:"flex items-center"},jEe={class:"mr-3"},zEe=["textContent"],HEe={key:1},WEe={key:2,class:"mt-4"},L5={__name:"EmailAccountsFormFields",props:{account:Object,type:{required:!0,type:String},form:{required:!0,type:Object},testConnectionForm:{required:!0,type:Object}},emits:["submit","ready","configError"],setup(e,{expose:t,emit:n}){const o=e,a=n,{t:r}=Pe(),{scriptConfig:s,currentUser:i,isMicrosoftGraphConfigured:u,isGoogleApiConfigured:d}=qe(),{localizedDate:m,UTCDateTimeInstance:f}=it(),{emailAccounts:h}=$a(),y=[{text:r("mailclient::mail.account.sync_period_now"),value:f.toISO()},{text:r("mailclient::mail.account.sync_period_1_month_ago"),value:f.minus({months:1}).toISO()},{text:r("mailclient::mail.account.sync_period_3_months_ago"),value:f.minus({months:3}).toISO()},{text:r("mailclient::mail.account.sync_period_6_months_ago"),value:f.minus({months:6}).toISO(),warning:!0}],b=V(!1);Se(()=>{var O;return(O=o.account)==null?void 0:O.alias_email},O=>{O&&(b.value=!0)},{once:!0});const I=s("mail.accounts.encryptions"),w=s("mail.accounts.connections"),k=V([]),x=V(null),$=P(()=>HI(k.value,O=>ft(h.value,["email",O.email]))),C=P(()=>$.value.length>0),F=P(()=>{let O=ft(y,["value",o.form.initial_sync_from]);return O?O.warning===!0:!1}),T=P(()=>o.form.from_name_header?o.form.from_name_header.replace("{agent}",i.value.name).replace("{company}",s("company_name")||""):""),S=P(()=>!o.account),A=P(()=>o.form.connection_type==="Imap"),E=P(()=>S.value&&!A.value),B=P(()=>A.value),M=P(()=>o.form.folders?o.form.folders.length>0:!1);function N(O){x.value=O}function G(O){N(null),O=="Outlook"&&!u()?N(`Microsoft application not configured,
                        you must <a href="/settings/integrations/microsoft" rel="noopener noreferrer" target="_blank" class="font-medium underline text-danger-700 hover:text-danger-600 focus:outline-none">configure</a> your
                        Microsoft application in order to connect Outlook mail client.`):O=="Gmail"&&!d()?N(`Google application project not configured,
                        you must <a href="/settings/integrations/google" rel="noopener noreferrer" target="_blank" class="font-medium underline text-danger-700 hover:text-danger-600 focus:outline-none">configure</a> your
                        Google application project in order to connect Gmail mail client.`):O==="Imap"&&!s("requirements.imap")&&N('In order to use IMAP account type, you will need to enable the PHP extension "imap".')}function U(){Innoclapps.request("oauth/accounts").then(({data:O})=>k.value=O)}function j(O){switch(O.type){case"microsoft":o.form.fill("connection_type","Outlook");break;case"google":o.form.fill("connection_type","Gmail");break;default:o.form.fill("connection_type",O.type)}a("submit")}return Xe(()=>{U(),a("ready")}),t({initialSyncOptions:y}),(O,H)=>{const W=c("IAlertBody"),X=c("IAlert"),q=c("ICustomSelect"),L=c("IFormError"),ee=c("IFormGroup"),ce=c("ITextDark"),ue=c("IButton"),oe=c("IFormLabel"),re=c("IFormRadio"),Y=c("IFormRadioLabel"),ae=c("IFormRadioField"),se=c("IFormInput"),xe=c("IFormCheckbox"),le=c("IFormCheckboxLabel"),ge=c("IFormCheckboxField"),ve=c("ITextDisplay"),ie=c("IText"),me=c("Icon"),Ce=ze("t");return g(),D(de,null,[l(X,{class:"mb-5",show:x.value!==null},{default:p(()=>[l(W,null,{default:p(()=>[_("div",{innerHTML:x.value},null,8,TEe)]),_:1})]),_:1},8,["show"]),_("div",{class:be({"mb-3 rounded-lg border border-warning-400 px-4 py-3":!e.form.connection_type})},[l(ee,{"label-for":"connection_type",label:O.$t("mailclient::mail.account.type"),required:""},{default:p(()=>[l(q,{modelValue:e.form.connection_type,"onUpdate:modelValue":H[0]||(H[0]=ke=>e.form.connection_type=ke),options:v(w),clearable:!1,placeholder:O.$t("mailclient::mail.account.select_type"),disabled:!S.value,onOptionSelected:G},null,8,["modelValue","options","placeholder","disabled"]),l(L,{error:e.form.getError("connection_type")},null,8,["error"])]),_:1},8,["label"]),S.value&&C.value?(g(),D("div",{key:0,class:be({"mb-3":e.form.connection_type})},[l(ce,{class:"mb-2 mt-4",text:O.$t("core::oauth.or_choose_existing")},null,8,["text"]),(g(!0),D(de,null,Ie($.value,ke=>(g(),R(pc,{key:ke.id,class:"mb-2",account:ke,"with-reconnect-link":!1},{default:p(()=>[l(ue,{class:"ml-2",variant:"info",disabled:ke.requires_auth,text:O.$t("core::oauth.connect"),soft:"",onClick:Be=>j(ke)},null,8,["disabled","text","onClick"])]),_:2},1032,["account"]))),128))],2)):Z("",!0)],2),S.value?(g(),D("div",EEe,[l(oe,{label:O.$t("mailclient::mail.account.sync_emails_from")},null,8,["label"]),_("div",FEe,[(g(),D(de,null,Ie(y,ke=>l(ae,{key:ke.value,class:"self-start"},{default:p(()=>[l(re,{modelValue:e.form.initial_sync_from,"onUpdate:modelValue":H[1]||(H[1]=Be=>e.form.initial_sync_from=Be),name:"initial_sync_from",value:ke.value},null,8,["modelValue","value"]),l(Y,{text:ke.text},null,8,["text"])]),_:2},1024)),64))]),F.value?(g(),R(X,{key:0,class:"mt-4"},{default:p(()=>[l(W,null,{default:p(()=>[ne(K(O.$t("mailclient::mail.account.sync_period_note",{date:v(m)(e.form.initial_sync_from)})),1)]),_:1})]),_:1})):Z("",!0)])):Z("",!0),_("div",{class:be({"pointer-events-none blur-sm":E.value})},[l(ee,{"label-for":"email",label:O.$t("mailclient::mail.account.email_address"),required:""},{default:p(()=>[l(se,{modelValue:e.form.email,"onUpdate:modelValue":H[2]||(H[2]=ke=>e.form.email=ke),name:"email",spellcheck:"false",autocomplete:"off",type:"email",disabled:!S.value},null,8,["modelValue","disabled"]),l(L,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label"]),b.value?(g(),R(ee,{key:0,"label-for":"alias_email",label:O.$t("mailclient::mail.account.enter_alias"),description:O.$t("mailclient::mail.account.use_aliass_info")},{default:p(()=>[l(se,{modelValue:e.form.alias_email,"onUpdate:modelValue":H[3]||(H[3]=ke=>e.form.alias_email=ke),name:"alias_email",spellcheck:"false",autocomplete:"off",type:"email"},null,8,["modelValue"]),l(L,{error:e.form.getError("email")},null,8,["error"])]),_:1},8,["label","description"])):Z("",!0),l(ee,null,{default:p(()=>[S.value?Z("",!0):(g(),R(ge,{key:0},{default:p(()=>[l(xe,{checked:b.value,"onUpdate:checked":H[4]||(H[4]=ke=>b.value=ke),onChange:H[5]||(H[5]=ke=>e.form.alias_email=null)},null,8,["checked"]),l(le,{text:O.$t("mailclient::mail.account.use_aliass")},null,8,["text"])]),_:1})),l(ge,null,{default:p(()=>[l(xe,{checked:e.form.create_contact,"onUpdate:checked":H[6]||(H[6]=ke=>e.form.create_contact=ke),onChange:H[7]||(H[7]=ke=>e.form.alias_email=null)},null,8,["checked"]),l(le,{text:O.$t("mailclient::mail.account.create_contact")},null,8,["text"])]),_:1})]),_:1})],2),te(_("div",{class:be({"pointer-events-none blur-sm":E.value})},[l(ee,{"label-for":"password",label:O.$t("mailclient::mail.account.password"),required:""},{default:p(()=>[l(se,{modelValue:e.form.password,"onUpdate:modelValue":H[8]||(H[8]=ke=>e.form.password=ke),spellcheck:"false",autocomplete:"new-password",type:"password",placeholder:e.form.id?"•••••••••••":""},null,8,["modelValue","placeholder"]),l(L,{error:e.form.getError("password")},null,8,["error"])]),_:1},8,["label"]),l(ee,{"label-for":"username",label:O.$t("mailclient::mail.account.username"),optional:""},{default:p(()=>[l(se,{id:"username",modelValue:e.form.username,"onUpdate:modelValue":H[9]||(H[9]=ke=>e.form.username=ke),autocomplete:"off",spellcheck:"false",name:"username"},null,8,["modelValue"])]),_:1},8,["label"]),_("div",AEe,[te(_("h5",REe,null,512),[[Ce,"mailclient.mail.account.incoming_mail"]]),l(ee,{"label-for":"imap_server",label:O.$t("mailclient::mail.account.server"),required:""},{default:p(()=>[l(se,{modelValue:e.form.imap_server,"onUpdate:modelValue":H[10]||(H[10]=ke=>e.form.imap_server=ke),name:"imap_server",placeholder:"imap.example.com",spellcheck:"false",autocomplete:"off"},null,8,["modelValue"]),l(L,{error:e.form.getError("imap_server")},null,8,["error"])]),_:1},8,["label"]),_("div",DEe,[_("div",OEe,[l(ee,{"label-for":"imap_port",label:O.$t("mailclient::mail.account.port"),required:""},{default:p(()=>[l(se,{modelValue:e.form.imap_port,"onUpdate:modelValue":H[11]||(H[11]=ke=>e.form.imap_port=ke),name:"imap_port",type:"number",autocomplete:"off"},null,8,["modelValue"]),l(L,{error:e.form.getError("imap_port")},null,8,["error"])]),_:1},8,["label"])]),_("div",PEe,[l(ee,{"label-for":"imap_encryption",label:O.$t("mailclient::mail.account.encryption")},{default:p(()=>[l(q,{modelValue:e.form.imap_encryption,"onUpdate:modelValue":H[12]||(H[12]=ke=>e.form.imap_encryption=ke),options:v(I),placeholder:O.$t("mailclient::mail.account.without_encryption")},null,8,["modelValue","options","placeholder"]),l(L,{error:e.form.getError("imap_encryption")},null,8,["error"])]),_:1},8,["label"])])])]),te(_("h5",MEe,null,512),[[Ce,"mailclient.mail.account.outgoing_mail"]]),l(ee,{"label-for":"smtp_server",label:O.$t("mailclient::mail.account.server"),required:""},{default:p(()=>[l(se,{modelValue:e.form.smtp_server,"onUpdate:modelValue":H[13]||(H[13]=ke=>e.form.smtp_server=ke),name:"smtp_server",placeholder:"smtp.example.com",spellcheck:"false",autocomplete:"off"},null,8,["modelValue"]),l(L,{error:e.form.getError("smtp_server")},null,8,["error"])]),_:1},8,["label"]),_("div",BEe,[_("div",NEe,[l(ee,{"label-for":"smtp_port",label:O.$t("mailclient::mail.account.port"),required:""},{default:p(()=>[l(se,{modelValue:e.form.smtp_port,"onUpdate:modelValue":H[14]||(H[14]=ke=>e.form.smtp_port=ke),name:"smtp_port",type:"number",autocomplete:"off"},null,8,["modelValue"]),l(L,{error:e.form.getError("smtp_port")},null,8,["error"])]),_:1},8,["label"])]),_("div",VEe,[l(ee,{"label-for":"smtp_encryption",label:O.$t("mailclient::mail.account.encryption")},{default:p(()=>[l(q,{modelValue:e.form.smtp_encryption,"onUpdate:modelValue":H[15]||(H[15]=ke=>e.form.smtp_encryption=ke),options:v(I),placeholder:O.$t("mailclient::mail.account.without_encryption")},null,8,["modelValue","options","placeholder"]),l(L,{error:e.form.getError("smtp_encryption")},null,8,["error"])]),_:1},8,["label"])])]),l(ee,null,{default:p(()=>[l(ge,null,{default:p(()=>[l(xe,{checked:e.form.validate_cert,"onUpdate:checked":H[16]||(H[16]=ke=>e.form.validate_cert=ke),value:0,"unchecked-value":1},null,8,["checked"]),l(le,{text:O.$t("mailclient::mail.account.allow_non_secure_certificate")},null,8,["text"])]),_:1}),l(L,{error:e.form.getError("validate_cert")},null,8,["error"])]),_:1})],2),[[fe,B.value||S.value]]),_("div",{class:be({"pointer-events-none blur-sm":E.value,hidden:e.form.connection_type==="Outlook"})},[l(ve,{class:"mb-2 mt-6 font-medium",text:O.$t("mailclient.mail.from_header")},null,8,["text"]),_("div",LEe,[l(ee,{label:O.$t("mailclient::mail.from_name"),description:O.$t("mailclient::mail.placeholders_info",{placeholders:"{agent}, {company}"})},{default:p(()=>[l(se,{modelValue:e.form.from_name_header,"onUpdate:modelValue":H[17]||(H[17]=ke=>e.form.from_name_header=ke),name:"from_name_header",autocomplete:"off"},null,8,["modelValue"]),l(L,{error:e.form.getError("from_name_header")},null,8,["error"])]),_:1},8,["label","description"]),l(ee,null,{default:p(()=>[l(ve,{text:O.$t("core::app.preview")},null,8,["text"]),l(ie,{class:"mb-2",text:O.$t("mailclient.mail.from_header_info")},null,8,["text"]),_("div",qEe,[_("div",UEe,[_("div",jEe,[l(me,{icon:"Mail",class:"size-6 text-neutral-600 dark:text-neutral-300"})]),_("div",null,[l(ce,{class:"font-medium",text:T.value},null,8,["text"]),te(l(ie,{text:"<"+e.form.email+">"},null,8,["text"]),[[fe,e.form.email]])])])])]),_:1})])],2),te(_("div",{class:be({"pointer-events-none blur-sm":E.value})},[e.testConnectionForm.errors&&e.testConnectionForm.errors.any()?(g(),R(ee,{key:0},{default:p(()=>[l(X,{variant:"danger",class:"mt-3 space-y-1"},{default:p(()=>[l(W,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.testConnectionForm.errors.all(),(ke,Be)=>(g(),D("p",{key:Be,textContent:K(e.testConnectionForm.getError(Be))},null,8,zEe))),128))]),_:1})]),_:1})]),_:1})):Z("",!0)],2),[[fe,B.value]]),e.account?(g(),D("div",HEe,[l(Y1,{modelValue:e.form.sent_folder_id,"onUpdate:modelValue":H[18]||(H[18]=ke=>e.form.sent_folder_id=ke),field:"sent_folder_id",form:e.form,folders:e.account.folders,required:!0,label:O.$t("mailclient::mail.account.sent_folder")},null,8,["modelValue","form","folders","label"]),l(Y1,{modelValue:e.form.trash_folder_id,"onUpdate:modelValue":H[19]||(H[19]=ke=>e.form.trash_folder_id=ke),field:"trash_folder_id",form:e.form,required:!0,folders:e.account.folders,label:O.$t("mailclient::mail.account.trash_folder")},null,8,["modelValue","form","folders","label"])])):Z("",!0),M.value?(g(),D("div",WEe,[l(ce,{class:"font-medium"},{default:p(()=>[ne(K(O.$t("mailclient::mail.account.active_folders")),1)]),_:1}),l(ie,{class:"-mt-1 mb-2"},{default:p(()=>[ne(K(O.$t("mailclient::mail.account.active_folders_info")),1)]),_:1}),l(SEe,{folders:e.form.folders},null,8,["folders"])])):Z("",!0)],64)}}},GEe={__name:"EmailAccountsCreate",setup(e){const{t}=Pe(),n=Ct(),o=wt(),a=fn(),{scriptConfig:r,currentUser:s}=qe(),{form:i}=Qe(),{createOAuthConnectUrl:u}=$a(),{isSuccessful:d,testConnectionForm:m,testConnection:f}=V5(),h=r("requirements"),y=V(null),b=V(null),I=P(()=>!d.value&&w.value||i.busy||b.value!==null||!i.connection_type),w=P(()=>i.connection_type==="Imap");function k(){return u(i.connection_type,n.query.type)+"?period="+i.initial_sync_from}function x(){i.set("initial_sync_from",y.value.initialSyncOptions[1].value)}function $(){if(!w.value){window.location.href=k();return}i.post("/mail/accounts").then(T=>{a.commit("emailAccounts/ADD",T),Innoclapps.success(t("mailclient::mail.account.created")),o.push({name:"email-accounts-index"})})}function C(){f(i).then(T=>{i.requires_auth=!1,i.folders=T.folders})}function F(){let T={connection_type:null,email:null,password:null,username:null,imap_server:null,imap_port:993,imap_encryption:"ssl",smtp_server:null,smtp_port:465,smtp_encryption:"ssl",validate_cert:1,folders:[],create_contact:!1,from_name_header:r("mail.accounts.from_name")};n.query.type==="personal"?T.user_id=s.value.id:n.query.type!=="shared"&&o.push({name:"404"}),i.set(T)}return F(),(T,S)=>{const A=c("IButton"),E=c("ISlideover");return g(),R(E,{title:T.$t("mailclient::mail.account.create"),visible:"",static:"",form:"",onSubmit:$,onHidden:T.$router.back},{"modal-ok":p(()=>[w.value&&v(h).imap?(g(),R(A,{key:0,variant:"primary",loading:v(m).busy,disabled:v(m).busy,text:T.$t("mailclient::mail.account.test_connection"),onClick:C},null,8,["loading","disabled","text"])):Z("",!0),l(A,{type:"submit",variant:"primary",disabled:I.value,text:T.$t("mailclient::mail.account.connect"),loading:v(i).busy},null,8,["disabled","text","loading"])]),default:p(()=>[l(L5,{ref_key:"formFieldsRef",ref:y,type:T.$route.query.type,"test-connection-form":v(m),form:v(i),onReady:x,onConfigError:S[0]||(S[0]=B=>b.value=B),onSubmit:$},null,8,["type","test-connection-form","form"])]),_:1},8,["title","onHidden"])}}},KEe={__name:"EmailAccountsEdit",setup(e){const t=Ct(),n=wt(),o=fn(),{t:a}=Pe(),{scriptConfig:r}=qe(),{form:s}=Qe(),{isSuccessful:i,testConnectionForm:u,testConnection:d}=V5(!0),m=r("requirements"),f=V({}),h=P(()=>s.connection_type==="Imap"),y=P(()=>t.params.id),b=P(()=>f.value.is_sync_stopped||f.value.is_sync_disabled);function I(){s.put(`/mail/accounts/${t.params.id}`).then(x=>{o.commit("emailAccounts/UPDATE",{id:x.id,item:x}),Innoclapps.success(a("mailclient::mail.account.updated")),n.back()})}function w(){d(s).then(x=>{s.requires_auth=!1,s.folders=x.folders})}function k(x){x&&Innoclapps.request(`/mail/accounts/${x}`).then(({data:$})=>{s.set($),s.folders=$.folders_tree,f.value=$})}return Se(y,k,{immediate:!0}),(x,$)=>{const C=c("IAlertBody"),F=c("IAlert"),T=c("IButton"),S=c("ISlideover");return g(),R(S,{title:x.$t("mailclient::mail.account.edit"),visible:"",static:"",form:"",onHidden:x.$router.back,onSubmit:I},{"modal-ok":p(()=>[h.value&&v(m).imap?(g(),R(T,{key:0,variant:"primary",loading:v(u).busy,disabled:v(u).busy,text:x.$t("mailclient::mail.account.test_connection"),onClick:w},null,8,["loading","disabled","text"])):Z("",!0),l(T,{type:"submit",variant:"primary",loading:v(s).busy,text:x.$t("core::app.save"),disabled:!v(i)||v(s).busy},null,8,["loading","text","disabled"])]),default:p(()=>[b.value?(g(),R(F,{key:0,class:"mb-4",variant:"warning"},{default:p(()=>[l(C,null,{default:p(()=>[ne(K(f.value.sync_state_comment),1)]),_:1})]),_:1})):Z("",!0),l(L5,{form:v(s),"test-connection-form":v(u),type:f.value.type||"",account:f.value},null,8,["form","test-connection-form","type","account"])]),_:1},8,["title","onHidden"])}}},ZEe={class:"mx-auto max-w-7xl"},YEe={class:"flex w-full flex-col space-x-0 space-y-1 sm:flex-row sm:space-x-2 sm:space-y-0"},XEe={class:"grid sm:inline"},QEe={key:0},JEe=["textContent"],e6e={class:"flex items-center px-4 py-4 sm:px-6"},t6e={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},n6e={class:"flex text-base/6 sm:text-sm/6"},o6e={class:"mt-2 flex"},a6e={class:"flex items-center space-x-1 text-base/6 sm:text-sm/6"},r6e={class:"mt-4 shrink-0 sm:ml-5 sm:mt-0"},l6e={class:"flex space-x-6"},s6e={class:"mx-auto max-w-2xl p-4 sm:p-6"},i6e={role:"list",class:"mt-6 grid grid-cols-1 gap-6 border-y border-neutral-200 py-6 dark:border-neutral-500/30 lg:grid-cols-2"},u6e={class:"relative -m-2 flex items-center space-x-4 rounded-xl p-2"},c6e={class:"flex h-10 w-12 shrink-0 items-center justify-center rounded-lg border border-primary-200 bg-primary-50 dark:border-primary-400/30 dark:bg-primary-400/10"},d6e={class:"mt-6 space-y-1 sm:space-x-2 sm:text-right"},m6e={class:"inline-block w-full sm:w-auto"},f6e={__name:"EmailAccountsIndex",setup(e){const{t}=Pe(),n=wt(),o=Ct(),a=fn(),{emailAccounts:r,emailAccountsBeingLoaded:s,latestEmailAccount:i,fetchEmailAccounts:u,createOAuthConnectUrl:d}=$a(),m=[{description:t("mailclient::mail.account.featured.sync"),icon:"Refresh"},{description:t("mailclient::mail.account.featured.save_time"),icon:"DocumentAdd"},{description:t("mailclient::mail.account.featured.placeholders"),icon:"CodeBracket"},{description:t("mailclient::mail.account.featured.signature"),icon:"Pencil"},{description:t("mailclient::mail.account.featured.associations",{resources:t("contacts::contact.contacts")+", "+t("contacts::company.companies"),resource:t("deals::deal.deals")}),icon:"Mail"},{description:t("mailclient::mail.account.featured.types"),icon:"CheckCircle"}];async function f(x){await Innoclapps.confirm(t("mailclient::mail.account.delete_warning")),await Innoclapps.request().delete(`/mail/accounts/${x}`),a.commit("emailAccounts/REMOVE",x),Innoclapps.success(t("mailclient::mail.account.deleted"))}function h(){Innoclapps.confirm({message:t("mailclient::mail.account.create_shared_confirmation_message"),title:!1,icon:"QuestionMarkCircle",iconWrapperColorClass:"bg-info-100",iconColorClass:"text-info-400",html:!0,confirmText:t("core::app.continue"),confirmVariant:"info"}).then(()=>n.push({name:"create-email-account",query:{type:"shared"}}))}function y(){n.push({name:"create-email-account",query:{type:"personal"}})}function b(x){n.push({name:"edit-email-account",params:{id:x.id}})}function I(x,$){x?a.dispatch("emailAccounts/setPrimary",$.id):a.dispatch("emailAccounts/removePrimary")}function w(x){let $=x.is_sync_disabled?"enable":"disable";a.dispatch(`emailAccounts/${$}Sync`,x.id)}function k(x){x.connection_type==="Imap"?b(x):window.location.href=d(x.connection_type,x.type)+"?re_auth=1"}return u().finally(()=>{o.query.viaOAuth&&b(i.value)}),(x,$)=>{const C=c("NavbarSeparator"),F=c("IButton"),T=c("ICardHeading"),S=c("ICardActions"),A=c("ICardHeader"),E=c("IAlertBody"),B=c("IAlertActions"),M=c("IAlert"),N=c("IBadge"),G=c("IFormSwitchLabel"),U=c("IFormSwitch"),j=c("IFormSwitchField"),O=c("IDropdownItem"),H=c("IDropdownMinimal"),W=c("ICard"),X=c("ITextDisplay"),q=c("IText"),L=c("Icon"),ee=c("IOverlay"),ce=c("RouterView"),ue=c("MainLayout"),oe=ze("i-tooltip"),re=ze("t");return g(),R(ue,null,{actions:p(()=>[te(l(C,{class:"hidden lg:block"},null,512),[[fe,v(r).length]]),te(l(F,{variant:"secondary",icon:"Inbox",to:{name:"inbox"},text:x.$t("mailclient::inbox.inbox")},null,8,["text"]),[[fe,v(r).length]])]),default:p(()=>[te(_("div",ZEe,[l(A,null,{default:p(()=>[l(T,{text:x.$t("mailclient::mail.account.accounts")},null,8,["text"]),l(S,{class:"mt-2 w-full sm:mt-0 sm:w-auto"},{default:p(()=>[_("div",YEe,[te((g(),D("span",XEe,[l(F,{variant:"secondary",icon:"Share",disabled:x.$gate.isRegularUser(),text:x.$t("mailclient::mail.account.connect_shared"),onClick:h},null,8,["disabled","text"])])),[[oe,x.$t(x.$gate.isRegularUser()?"users::user.not_authorized":"mailclient::mail.account.create_shared_info")]]),l(F,{icon:"User",variant:"secondary",text:x.$t("mailclient::mail.account.connect_personal"),onClick:y},null,8,["text"])])]),_:1})]),_:1}),l(W,{overlay:v(s)},{default:p(()=>[l(wi,{class:"divide-y divide-neutral-200 dark:divide-neutral-500/30",name:"flip-list",tag:"ul"},{default:p(()=>[(g(!0),D(de,null,Ie(v(r),Y=>(g(),D("li",{key:Y.id},[Y.is_sync_stopped||Y.requires_auth?(g(),R(M,{key:0,variant:"warning"},{default:p(()=>[l(E,null,{default:p(()=>[Y.requires_auth?te((g(),D("p",QEe,null,512)),[[re,"core::oauth.requires_authentication"]]):Z("",!0),Y.is_sync_stopped?(g(),D("p",{key:1,textContent:K(Y.sync_state_comment)},null,8,JEe)):Z("",!0)]),_:2},1024),Y.requires_auth?(g(),R(B,{key:0},{default:p(()=>[l(F,{variant:"warning",text:x.$t("core::oauth.re_authenticate"),ghost:"",onClick:ae=>k(Y)},null,8,["text","onClick"])]),_:2},1024)):Z("",!0)]),_:2},1024)):Z("",!0),_("div",e6e,[_("div",t6e,[_("div",{class:be(["truncate",{"opacity-70":Y.is_sync_stopped||Y.is_sync_disabled}])},[_("div",n6e,[(g(),R(_t(Y.authorizations.update?"a":"p"),{class:be(["truncate font-medium text-primary-600 dark:text-primary-400",Y.authorizations.update?"cursor-pointer":""]),onClick:ae=>Y.authorizations.update?b(Y):""},{default:p(()=>[ne(K(Y.email)+" "+K(Y.alias_email?`(${Y.alias_email})`:""),1)]),_:2},1032,["class","onClick"]))]),_("div",o6e,[_("div",a6e,[Y.connection_type==="Gmail"?(g(),R(Jk,{key:0,class:"mr-3 size-5 shrink-0"})):Y.connection_type==="Outlook"?(g(),R(e5,{key:1,class:"mr-3 size-5 shrink-0"})):Z("",!0),Y.authorizations.update?(g(),R(N,{key:2,variant:"info",text:Y.connection_type},null,8,["text"])):Z("",!0),l(N,{variant:Y.is_personal?"neutral":"info",text:x.$t("mailclient::mail.account."+Y.type)},null,8,["variant","text"]),Y.is_primary||v(r).length===1?(g(),R(N,{key:3,variant:"primary",text:x.$t("mailclient::mail.account.is_primary")},null,8,["text"])):Z("",!0)])])],2),_("div",r6e,[_("div",l6e,[v(r).length>1?(g(),R(j,{key:0},{default:p(()=>[l(G,{text:x.$t("mailclient::mail.account.is_primary")},null,8,["text"]),l(U,{disabled:Y.is_sync_stopped,"model-value":Y.is_primary,onChange:ae=>I(ae,Y)},null,8,["disabled","model-value","onChange"])]),_:2},1024)):Z("",!0),te(l(j,null,{default:p(()=>[l(G,{text:x.$t("mailclient::mail.disable_sync")},null,8,["text"]),l(U,{"model-value":Y.is_sync_disabled,onChange:ae=>w(Y)},null,8,["model-value","onChange"])]),_:2},1536),[[fe,!Y.is_sync_stopped&&Y.authorizations.update]])])])]),Y.authorizations.update||Y.authorizations.delete?(g(),R(H,{key:0,class:"ml-5 shrink-0 self-start sm:self-auto"},{default:p(()=>[Y.authorizations.update?(g(),R(O,{key:0,text:x.$t("core::app.edit"),onClick:ae=>b(Y)},null,8,["text","onClick"])):Z("",!0),Y.authorizations.delete?(g(),R(O,{key:1,text:x.$t("core::app.delete"),onClick:ae=>f(Y.id)},null,8,["text","onClick"])):Z("",!0)]),_:2},1024)):Z("",!0)])]))),128))]),_:1})]),_:1},8,["overlay"])],512),[[fe,v(r).length]]),v(r).length?Z("",!0):(g(),R(ee,{key:0,class:"m-auto max-w-5xl",show:v(s)},{default:p(()=>[te(_("div",s6e,[l(X,{text:x.$t("mailclient.mail.account.no_accounts_configured")},null,8,["text"]),l(q,{text:x.$t("mailclient.mail.account.no_accounts_configured_info")},null,8,["text"]),_("ul",i6e,[(g(),D(de,null,Ie(m,(Y,ae)=>_("li",{key:ae,class:"flow-root"},[_("div",u6e,[_("div",c6e,[l(L,{class:"size-6 text-primary-600 dark:text-primary-400",icon:Y.icon},null,8,["icon"])]),_("div",null,[l(q,{class:"mt-1",text:Y.description},null,8,["text"])])])])),64))]),_("div",d6e,[te((g(),D("span",m6e,[l(F,{class:"sm:w-justify-around w-full justify-center sm:w-auto",variant:"primary",icon:"Share",disabled:x.$gate.isRegularUser(),text:x.$t("mailclient::mail.account.connect_shared"),onClick:h},null,8,["disabled","text"])])),[[oe,x.$t(x.$gate.isRegularUser()?"users::user.not_authorized":"mailclient::mail.account.create_shared_info")]]),l(F,{class:"sm:w-justify-around w-full justify-center sm:w-auto",variant:"primary",icon:"User",text:x.$t("mailclient::mail.account.connect_personal"),onClick:y},null,8,["text"])])],512),[[fe,!v(s)]])]),_:1},8,["show"])),l(ce)]),_:1})}}},p6e={class:"font-sans text-base leading-[initial] dark:text-white sm:text-sm"},v6e={__name:"MessagePreview",props:{visibleText:null,hiddenText:null},setup(e){return(t,n)=>n[0]||(He(-1),(n[0]=_("div",{class:"mail-text all-revert"},[_("div",p6e,[l(iu,{html:e.visibleText},null,8,["html"]),l(E5,{text:e.hiddenText},null,8,["text"])])])).cacheIndex=0,He(1),n[0])}},h6e={class:"sticky top-2 z-auto"},g6e={class:"mr-3 grow"},b6e=["textContent"],y6e={class:"mt-1.5 inline-flex items-center"},_6e={class:"mr-4 flex-none"},w6e={class:"mt-2 shrink-0 self-start sm:mt-0"},I6e={key:0,class:"flex items-center space-x-2"},x6e={id:"messageInfo",class:"flex pt-1"},k6e={class:"mr-2"},$6e={class:"mt-2 inline-flex"},C6e={class:"inline-flex flex-1 flex-wrap justify-end space-y-1 self-start sm:flex-nowrap sm:items-center sm:space-x-2 sm:space-y-0"},S6e=["textContent"],T6e={key:0,class:"mt-6"},E6e={key:0,class:"mb-3 mt-5"},F6e={__name:"InboxMessage",props:{account:{required:!0,type:Object}},setup(e){const t=e,n=Innoclapps.resourceName("emails"),{t:o}=Pe(),a=Ct(),r=wt(),s=fn(),i=yo(),{localizedDateTime:u}=it(),{setLoading:d,isLoading:m}=Cn(),{TAGS_TYPE:f,syncTags:h}=mh(),y=V(null),b=V({_placeholder:!0,avatar_url:"",from:{name:"",address:""},to:[],cc:[],bcc:[]}),I=V(!1),w=V(!1),k=V(!1),x=V(!1),$=V(!1),C=V(!1),F=V(!0),T=V([]),S=Pt([]),A=V({});let E=null;const B=P(()=>b.value._placeholder!==!0),M=P(()=>b.value.cc&&b.value.cc.length>0),N=P(()=>({folder_id:a.params.folder_id,account_id:a.params.account_id})),G=P(()=>B.value&&!b.value.is_draft),U=P(()=>b.value.subject?b.value.subject:o("mailclient::inbox.no_subject")),j=P(()=>B.value&&b.value.media.length>0),O=P(()=>`/inbox/emails/folders/${a.params.folder_id}/${a.params.id}`),H=P(()=>s.getters.getSidebarMenuItem("inbox").badge);async function W(){let{data:le}=await Innoclapps.request("contacts/search",{params:{q:b.value.from.address,search_fields:"email:="}});S.value=le,k.value=!0}async function X(le){let ge=await h(b.value.id,le);b.value.tags=ge.tags}async function q(){T.value=await ee(),I.value=!0}function L(){w.value=!0,A.value.email=b.value.from.address,b.value.from.name&&(A.value["first-name"]=b.value.from.name.split(" ")[0],A.value["last-name"]=b.value.from.name.split(" ")[1]||null)}async function ee(){let{data:le}=await Innoclapps.request("contacts/search",{params:{q:b.value.from.address,search_fields:"email:="}});return le}function ce(){re(!1),Y(!1)}function ue(le){le.uriKey==="email-account-message-move"?(oe(le.response.moved_to_folder_id),se()):le.uriKey==="email-account-message-delete"?parseInt(a.params.folder_id)===parseInt(t.account.trash_folder.id)?r.replace({name:"inbox"}):(oe(t.account.trash_folder.id),se()):se()}function oe(le){r.replace({name:"inbox-message",params:{account_id:t.account.id,folder_id:le,id:b.value.id}})}function re(le=!0){x.value=le,C.value=!1}function Y(le=!0){$.value=le}function ae(){x.value=!0,C.value=!0}function se(){return xe(!0)}async function xe(le=!1){d(!le);let{data:ge}=await Innoclapps.request(O.value,{params:{silent:le,account_id:t.account.id,folder_id:a.params.folder_id}});b.value=ge,s.commit("emailAccounts/UPDATE",{id:t.account.id,item:{...t.account,active_folders_tree:ge.account_active_folders_tree}}),ge.was_unread===!0&&s.dispatch("emailAccounts/updateUnreadCountUI",H.value===0?0:H.value-1),i.value=U.value,d(!1)}return xe(),Xe(()=>{E=new IntersectionObserver(le=>{F.value=le[0].isIntersecting},{root:document.getElementById("main"),threshold:1}),E.observe(document.getElementById("messageInfo"))}),mn(()=>{E&&(E.unobserve(document.getElementById("messageInfo")),E=null)}),(le,ge)=>{var Ke;const ve=c("IButton"),ie=c("IDropdownItem"),me=c("IDropdownMinimal"),Ce=c("IAvatar"),ke=c("ITextDark"),Be=c("IText"),Fe=c("IBadge"),he=c("ICardBody"),_e=c("ICard"),Te=c("CreateDealModal"),Ne=c("CreateContactModal"),lt=c("CreateActivityModal");return g(),D(de,null,[_("div",{class:be({"sticky top-0 bg-opacity-75 p-2 backdrop-blur-lg backdrop-filter dark:bg-neutral-500/80":!F.value})},null,2),_("div",h6e,[_("div",{class:be([F.value?"rounded-t-lg bg-white dark:bg-neutral-900":"border-t border-neutral-200 bg-neutral-50 dark:border-neutral-500/30 dark:bg-neutral-800","overflow-hidden shadow"])},[_("div",{class:be(["flex flex-col border-b border-neutral-200 p-4 dark:border-neutral-800 sm:flex-row sm:items-center sm:px-6",{"pointer-events-none blur":v(m)}])},[_("div",g6e,[_("h5",{class:"text-lg/6 font-semibold text-neutral-700 dark:text-white",textContent:K(U.value)},null,8,b6e),_("div",y6e,[_("div",_6e,[l(Uo,{ref_key:"associationsPopoverRef",ref:y,"associations-count":b.value.associations_count,"onUpdate:associationsCount":ge[0]||(ge[0]=$e=>b.value.associations_count=$e),class:"inline-flex",placement:"bottom-start","resource-name":v(n),"resource-id":b.value.id},null,8,["associations-count","resource-name","resource-id"])]),l(Ts,{simple:!0,type:v(f),"model-value":b.value.tags,disabled:!((Ke=b.value.authorizations)!=null&&Ke.update),"onUpdate:modelValue":X},null,8,["type","model-value","disabled"])])]),_("div",w6e,[B.value?(g(),D("div",I6e,[te(_("div",null,[l(xs,{type:"dropdown",ids:b.value.id,actions:b.value.actions,"additional-request-params":N.value,"resource-name":v(n),onActionExecuted:ue},null,8,["ids","actions","additional-request-params","resource-name"])],512),[[fe,!e.account.is_sync_stopped]]),G.value?(g(),R(ve,{key:0,variant:"secondary",icon:"Reply",disabled:e.account.is_sync_stopped,text:le.$t("mailclient::inbox.reply"),onClick:ge[1]||(ge[1]=$e=>re(!0))},null,8,["disabled","text"])):Z("",!0),G.value&&M.value?(g(),R(ve,{key:1,variant:"secondary",icon:"Reply",disabled:e.account.is_sync_stopped,text:le.$t("mailclient::inbox.reply_all"),onClick:ge[2]||(ge[2]=$e=>ae())},null,8,["disabled","text"])):Z("",!0),G.value?(g(),R(ve,{key:2,variant:"secondary",icon:"Share",disabled:e.account.is_sync_stopped,text:le.$t("mailclient::inbox.forward"),onClick:ge[3]||(ge[3]=$e=>Y(!0))},null,8,["disabled","text"])):Z("",!0),l(me,{horizontal:""},{default:p(()=>[l(ie,{icon:"Users",text:le.$t("contacts::contact.convert"),onClick:L},null,8,["text"]),l(ie,{icon:"Banknotes",text:le.$t("deals::deal.create"),onClick:q},null,8,["text"]),l(ie,{icon:"Calendar",text:le.$t("activities::activity.create"),onClick:W},null,8,["text"])]),_:1})])):Z("",!0)])],2)],2)]),l(_e,{class:"-mt-1 mb-3",overlay:v(m)},{default:p(()=>[l(he,null,{default:p(()=>[_("div",x6e,[te(_("div",k6e,[l(Ce,{src:b.value.avatar_url},null,8,["src"])],512),[[fe,B.value]]),_("div",{class:be(["grow",B.value?"":"blur"])},[l(Po,{label:le.$t("mailclient::inbox.from"),addresses:b.value.from},null,8,["label","addresses"]),l(Po,{label:le.$t("mailclient::inbox.reply_to"),addresses:b.value.reply_to,"show-when-empty":!1},null,8,["label","addresses"]),l(Po,{label:le.$t("mailclient::inbox.to"),addresses:b.value.to},null,8,["label","addresses"]),l(Po,{label:le.$t("mailclient::inbox.cc"),addresses:b.value.cc,"show-when-empty":!1},null,8,["label","addresses"]),l(Po,{label:le.$t("mailclient::inbox.bcc"),addresses:b.value.bcc,"show-when-empty":!1},null,8,["label","addresses"]),_("div",$6e,[l(ke,{class:"mr-1 font-semibold"},{default:p(()=>[ne(K(le.$t("mailclient::inbox.date"))+": ",1)]),_:1}),l(Be,{text:v(u)(b.value.date)},null,8,["text"])])],2),_("div",C6e,[(g(!0),D(de,null,Ie(b.value.folders,$e=>(g(),R(Fe,{key:$e.id,class:"flex shrink-0",variant:"info"},{default:p(()=>[ge[11]||(ge[11]=_("span",{class:"size-1 rounded-full bg-info-500"},null,-1)),ne(" "+K($e.display_name),1)]),_:2},1024))),128)),b.value.opened_at?(g(),R(Fe,{key:0,variant:"success",icon:"Eye",class:"shrink-0"},{default:p(()=>[ne(" ("+K(b.value.opens)+") ",1),_("span",{class:"hidden sm:block",textContent:K(" - "+v(u)(b.value.opened_at))},null,8,S6e)]),_:1})):Z("",!0)])]),v(m)?Z("",!0):(g(),D("div",T6e,[l(v6e,{"visible-text":b.value.visible_text,"hidden-text":b.value.hidden_text},null,8,["visible-text","hidden-text"])]))]),_:1})]),_:1},8,["overlay"]),j.value?(g(),D("div",E6e,[l(ke,{class:"mb-2 font-medium",as:"dd",text:le.$t("mailclient.mail.attachments")},null,8,["text"]),l(T5,{attachments:b.value.media},null,8,["attachments"])])):Z("",!0),G.value?(g(),R(O5,{key:1,message:b.value,visible:x.value||$.value,"to-all":C.value,forward:$.value,onHidden:ce},null,8,["message","visible","to-all","forward"])):Z("",!0),l(Te,{visible:I.value,"onUpdate:visible":ge[4]||(ge[4]=$e=>I.value=$e),associations:{emails:[b.value.id]},contacts:T.value,name:b.value.subject,onCreated:ge[5]||(ge[5]=$e=>(I.value=!1,le.$refs.associationsPopoverRef.retrieveAssociatedResources()))},null,8,["visible","associations","contacts","name"]),l(Ne,Ue({visible:w.value,"onUpdate:visible":ge[6]||(ge[6]=$e=>w.value=$e),associations:{emails:[b.value.id]}},A.value,{onHidden:ge[7]||(ge[7]=$e=>A.value={}),onCreated:ge[8]||(ge[8]=$e=>(w.value=!1,le.$refs.associationsPopoverRef.retrieveAssociatedResources()))}),null,16,["visible","associations"]),k.value?(g(),R(lt,{key:2,contacts:S.value,title:le.$t("activities::activity.title_via_create_message",{subject:b.value.subject}),message:b.value,onCreated:ge[9]||(ge[9]=$e=>k.value=!1),onHidden:ge[10]||(ge[10]=$e=>k.value=!1)},null,8,["contacts","title","message"])):Z("",!0)],64)}}},A6e=Object.assign({name:"InboxMessagesFoldersMenuItem"},{__name:"InboxMessagesFoldersMenuItem",props:{folder:{required:!0,type:Object}},setup(e){const t=e,n=Ct(),o=P(()=>n.params.account_id?{name:"inbox-messages",params:{account_id:n.params.account_id,folder_id:t.folder.id}}:null),a=P(()=>t.folder.children&&t.folder.children.length>0);return(r,s)=>{const i=c("IBadge"),u=c("IVerticalNavigationItem"),d=c("InboxMessagesFoldersMenuItem",!0),m=c("IVerticalNavigationCollapsible");return g(),R(m,{fixed:""},{default:p(()=>[l(u,{to:o.value},{default:p(()=>[ne(K(e.folder.display_name)+" ",1),e.folder.unread_count?(g(),R(i,{key:0,text:e.folder.unread_count,pill:""},null,8,["text"])):Z("",!0)]),_:1},8,["to"]),a.value?(g(!0),D(de,{key:0},Ie(e.folder.children,f=>(g(),R(d,{key:f.id,folder:f},null,8,["folder"]))),128)):Z("",!0)]),_:1})}}}),R6e={key:0},D6e={__name:"InboxMessagesFoldersMenu",props:{folders:{type:Array,required:!0}},setup(e){return(t,n)=>{const o=c("IVerticalNavigation");return g(),D(de,null,[l(o,null,{default:p(()=>[(g(!0),D(de,null,Ie(e.folders,a=>(g(),R(A6e,{key:a.id,folder:a},null,8,["folder"]))),128))]),_:1}),e.folders.length?Z("",!0):(g(),D("div",R6e,[(g(),D(de,null,Ie([1,2,3,4],a=>_("div",{key:"p-"+a,class:"mb-2 rounded-lg bg-neutral-200 p-4 dark:bg-neutral-500"})),64))]))],64)}}},O6e=["textContent"],P6e={__name:"InboxMessagesWarnings",props:{account:{type:Object,required:!0},totalAccounts:{required:!0,type:Number},hasPrimaryAccount:{required:!0,type:Boolean},isSyncDisabled:{required:!0,type:Boolean}},setup(e){return(t,n)=>{const o=c("ILink"),a=c("IAlertBody"),r=c("IAlert"),s=ze("t");return g(),D(de,null,[e.isSyncDisabled?(g(),R(r,{key:0,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[_("p",{textContent:K(e.account.sync_state_comment)},null,8,O6e),l(o,{variant:"warning",class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[ne(K(t.$t("mailclient::mail.account.manage"))+" ",1),n[0]||(n[0]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1})]),_:1})]),_:1})):Z("",!0),!e.hasPrimaryAccount&&e.totalAccounts>1?(g(),R(r,{key:1,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[te(_("p",null,null,512),[[s,"mailclient::mail.account.missing_primary_account"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[ne(K(t.$t("mailclient::mail.account.manage"))+" ",1),n[1]||(n[1]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1})]),_:1})]),_:1})):Z("",!0),!e.account.sent_folder_id||!e.account.sent_folder?(g(),R(r,{key:2,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[te(_("p",null,null,512),[[s,"mailclient::mail.account.missing_sent_folder"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"edit-email-account",params:{id:e.account.id}}},{default:p(()=>[ne(K(t.$t("mailclient::mail.account.edit"))+" ",1),n[2]||(n[2]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1},8,["to"])]),_:1})]),_:1})):Z("",!0),!e.account.trash_folder_id||!e.account.trash_folder?(g(),R(r,{key:3,class:"mb-4",variant:"warning"},{default:p(()=>[l(a,null,{default:p(()=>[te(_("p",null,null,512),[[s,"mailclient::mail.account.missing_trash_folder"]]),l(o,{variant:"warning",class:"font-medium",to:{name:"edit-email-account",params:{id:e.account.id}}},{default:p(()=>[ne(K(t.$t("mailclient::mail.account.edit"))+" ",1),n[3]||(n[3]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1},8,["to"])]),_:1})]),_:1})):Z("",!0)],64)}}},M6e={class:"flex items-center space-x-2"},B6e={key:0,class:"relative"},N6e={key:0,class:"absolute -right-1 -top-px z-10"},V6e={class:"mx-auto max-w-7xl"},L6e={key:0,class:"grid grid-cols-12 gap-6"},q6e={class:"col-span-12 lg:col-span-3"},U6e=["textContent"],j6e={key:1,class:"grid grid-cols-12 gap-6"},z6e={class:"col-span-12 lg:col-span-3"},H6e={class:"sm:sticky sm:top-2"},W6e={class:"mb-2 text-base font-semibold leading-6 text-neutral-700 dark:text-neutral-300 sm:text-sm"},G6e=["textContent"],K6e={class:"-my-1"},Z6e={class:"col-span-12 lg:col-span-9"},Y6e={key:2,class:"h-60"},X6e={class:"mx-auto mt-5 block max-w-2xl text-center"},Q6e={class:"mt-6 space-x-6"},J6e={__name:"InboxMessages",setup(e){const t=Ct(),n=wt(),o=fn(),a=V(!0),r=V(!1),s=V(0),i=V(null),{availableTags:u}=mh(),{emailAccounts:d,hasPrimaryEmailAccount:m,emailAccountBeingSynced:f,fetchEmailAccounts:h,syncEmailAccount:y}=$a();Se(()=>t.query.compose,M=>{M&&$()}),Se(()=>t.query.tag,M=>{M&&t.params.id&&n.push({name:"inbox-messages",account_id:t.params.accountId,folderId:t.params.folderId,query:{...t.query,tag:M}})}),Qc((M,N,G)=>{M.name==="inbox"?T(b.value,M.query):G()});const b=P(()=>d.value.find(M=>M.id===i.value)||{}),I=P(()=>d.value.length>0),w=P(()=>b.value.active_folders.length>0),k=P(()=>b.value.is_sync_stopped||b.value.is_sync_disabled);function x(M){o.commit("emailAccounts/UPDATE",M)}function $(M=!0){if(r.value=M,M==!1){let N=Object.assign({},t.query);delete N.compose,n.replace({query:N})}}function C(M){i.value=M.id,T(M)}function F(M){Object.hasOwn(M.response,"account")&&o.commit("emailAccounts/UPDATE",{id:M.response.account.id,item:M.response.account}),Object.hasOwn(M.response,"unread_count")&&o.dispatch("emailAccounts/updateUnreadCountUI",M.response.unread_count)}function T(M,N={}){let G=M.active_folders[0]?M.active_folders[0].id:null;G&&n.replace({name:"inbox-messages",params:{account_id:M.id,folder_id:G},query:{...t.query,...N}})}async function S(){const{data:M}=await Innoclapps.request("/emails/scheduled/count");s.value=M.count}function A(){E(!0)}async function E(M=!1){if(await h({force:M}),!I.value){n.replace({name:"email-accounts-index"});return}S(),t.params.account_id&&t.params.folder_id?i.value=parseInt(t.params.account_id):Object.keys(b.value).length===0&&(i.value=d.value[0].id),t.name==="inbox"&&w.value&&T(b.value)}function B(){y(b.value.id).then(M=>{x({id:M.id,item:M}),Ot("user-synchronized-email-account",M)})}return E().then(()=>t.query.compose&&$()).finally(()=>a.value=!1),jt("email-scheduled",S),jt("action-executed",F),jt("email-accounts-sync-finished",A),(M,N)=>{const G=c("NavbarSeparator"),U=c("IDropdownItem"),j=c("IDropdownMinimal"),O=c("IButton"),H=c("NavbarItems"),W=c("IDropdownButton"),X=c("IDropdownMenu"),q=c("IDropdown"),L=c("Icon"),ee=c("ILink"),ce=c("IAlertBody"),ue=c("IAlert"),oe=c("RouterView"),re=c("IText"),Y=c("MainLayout"),ae=ze("i-tooltip");return g(),R(Y,{overlay:a.value},{actions:p(()=>[l(G,{class:"hidden lg:block"}),l(H,null,{default:p(()=>[l(j,{placement:b.value.is_initial_sync_performed&&!k.value?"bottom":"bottom-end",horizontal:""},{default:p(()=>[b.value.authorizations.update?(g(),R(U,{key:0,to:{name:"edit-email-account",params:{id:b.value.id}},text:M.$t("mailclient::mail.account.edit")},null,8,["to","text"])):Z("",!0),l(U,{to:{name:"email-accounts-index"},text:M.$t("mailclient::mail.account.manage")},null,8,["text"])]),_:1},8,["placement"]),te(_("div",M6e,[s.value>0?(g(),D("div",B6e,[te(l(O,{variant:"secondary",icon:"Clock",to:{name:"scheduled-emails-index"},pill:""},null,512),[[ae,M.$t("mailclient::schedule.scheduled_emails"),void 0,{left:!0}]]),s.value>0?te((g(),D("span",N6e,N[3]||(N[3]=[_("span",{class:"relative flex size-3"},[_("span",{class:"absolute inline-flex h-full w-full rounded-full bg-info-400 opacity-75"}),_("span",{class:"relative inline-flex size-3 rounded-full bg-info-500"})],-1)]))),[[ae,s.value,void 0,{bottom:!0}]]):Z("",!0)])):Z("",!0),b.value.is_initial_sync_performed&&!k.value?te((g(),R(O,{key:1,variant:"secondary",icon:"Refresh",disabled:v(f),loading:v(f),pill:"",onClick:B},null,8,["disabled","loading"])),[[ae,M.$t("mailclient::inbox.synchronize"),void 0,{left:!0}]]):Z("",!0)],512),[[fe,s.value>0||b.value.is_initial_sync_performed&&!k.value]])]),_:1})]),default:p(()=>[_("div",V6e,[!a.value&&I.value?(g(),D("div",L6e,[_("div",q6e,[l(q,{"adaptive-width":""},{default:p(()=>[l(W,{class:"mb-1.5 w-full",icon:"InboxStack",loading:v(f),basic:""},{default:p(()=>[_("span",{class:"max-w-[15rem] truncate",textContent:K(b.value.display_email)},null,8,U6e)]),_:1},8,["loading"]),l(X,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(d),se=>(g(),R(U,{key:se.id,text:se.display_email,active:se.id===b.value.id,onClick:xe=>C(se)},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])])):Z("",!0),!a.value&&I.value?(g(),D("div",j6e,[_("div",z6e,[_("div",H6e,[l(O,{variant:"primary",class:"mb-3",disabled:!b.value.can_send_email,block:"",onClick:N[0]||(N[0]=se=>$(!0))},{default:p(()=>[N[4]||(N[4]=_("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mr-2 fill-white",height:"16",width:"16",viewBox:"0 0 512 512"},[_("path",{d:"M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"})],-1)),ne(" "+K(M.$t("mailclient::mail.compose")),1)]),_:1},8,["disabled"]),l(D6e,{folders:b.value&&b.value.active_folders_tree},null,8,["folders"]),v(u).length?(g(),D("ul",{key:0,class:be(["mt-8 flex flex-1 flex-col gap-y-0.5",w.value?"":"hidden"])},[_("li",W6e,K(M.$t("core::tags.tags"))+" ("+K(v(u).length)+") ",1),(g(!0),D(de,null,Ie(v(u),se=>(g(),D("li",{key:se.id},[l(ee,{class:be(["flex items-center space-x-2 rounded-lg px-3 py-2 text-base/6 font-medium text-neutral-700 hover:bg-neutral-200/50 focus:outline-none dark:text-neutral-100 dark:hover:dark:bg-neutral-700 sm:text-sm/6",M.$route.query.tag==se.name?"bg-neutral-200/50 dark:bg-neutral-700":""]),to:{query:{tag:se.name}},plain:""},{default:p(()=>[l(L,{icon:"Tag",class:"size-4",style:Nt({color:se.swatch_color})},null,8,["style"]),_("span",{class:"grow",textContent:K(se.name)},null,8,G6e),_("span",K6e,[M.$route.query.tag==se.name?(g(),R(O,{key:0,icon:"XSolid",basic:"",small:"",onClick:N[1]||(N[1]=ot(xe=>M.$router.replace({query:{...M.$route.query,tag:void 0}}),["prevent","stop"]))})):Z("",!0)])]),_:2},1032,["class","to"])]))),128))],2)):Z("",!0)])]),_("div",Z6e,[l(P6e,{account:b.value,"total-accounts":v(d).length,"has-primary-account":v(m),"is-sync-disabled":k.value},null,8,["account","total-accounts","has-primary-account","is-sync-disabled"]),b.value.is_initial_sync_performed?Z("",!0):(g(),R(ue,{key:0,class:"mb-4"},{default:p(()=>[l(ce,null,{default:p(()=>[ne(K(M.$t("mailclient::mail.initial_sync_info")),1)]),_:1})]),_:1})),l(oe,{name:"message",account:b.value},null,8,["account"]),w.value?(g(),R(oe,{key:1,ref:"messages",name:"messages",account:b.value},null,8,["account"])):(g(),D("div",Y6e,[_("div",X6e,[l(L,{icon:"Folder",class:"mx-auto size-12 text-neutral-400"}),l(re,{class:"mt-4",text:M.$t("mailclient.mail.account.no_active_folders")},null,8,["text"]),_("div",Q6e,[b.value.authorizations.update?(g(),R(ee,{key:0,class:"font-medium",to:{name:"edit-email-account",params:{id:b.value.id}}},{default:p(()=>[ne(K(M.$t("mailclient::mail.account.activate_folders"))+" ",1),N[5]||(N[5]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1},8,["to"])):Z("",!0),l(ee,{class:"font-medium",to:{name:"email-accounts-index"}},{default:p(()=>[ne(K(M.$t("mailclient::mail.account.manage"))+" ",1),N[6]||(N[6]=_("span",{"aria-hidden":"true"},"→",-1))]),_:1})])])]))])])):Z("",!0)]),l(zd,{visible:r.value,"default-account":b.value,onHidden:N[2]||(N[2]=se=>$(!1))},null,8,["visible","default-account"])]),_:1},8,["overlay"])}}},q5={__name:"InboxMessageSubject",props:["subject","messageId","accountId"],setup(e){const t=Ct(),n=V(t.params.folder_id);return(o,a)=>{const r=c("ILink");return g(),R(r,{title:e.subject,to:{name:"inbox-message",params:{account_id:e.accountId,folder_id:n.value,id:e.messageId}},text:e.subject?e.subject:"("+o.$t("mailclient::inbox.no_subject")+")",basic:""},null,8,["title","to","text"])}}},eFe={class:"inline-flex max-w-[380px] flex-nowrap items-center"},tFe={class:"block min-w-0 truncate"},nFe={key:0,class:"ml-2 inline-flex shrink-0 space-x-0.5 group-hover/td:hidden"},oFe=["textContent"],aFe=["title"],rFe=Object.assign({inheritAttrs:!1},{__name:"InboxMessagesTableIncoming",props:{cacheKey:{type:String,required:!0},isSyncStopped:Boolean,accountId:{type:Number,required:!0}},setup(e,{expose:t}){const n=Innoclapps.resourceName("emails"),{DateTime:o,localizedDate:a,localizedTime:r,localizedDateTime:s}=it(),i=V(null);function u(d){const m=o.fromISO(d);return m.hasSame(o.now(),"day")?r(m.toISO()):a(m.toISO())}return t({tableRef:i}),(d,m)=>{const f=c("IBadge"),h=c("ResourceTable");return g(),D("div",{class:be({"sync-stopped-by-system":e.isSyncStopped})},[l(h,Ue({ref_key:"tableRef",ref:i,"resource-name":v(n),"cache-key":e.cacheKey},d.$attrs),{subject:p(({row:y})=>[_("div",eFe,[_("div",tFe,[l(q5,{subject:y.subject,"message-id":y.id,"account-id":e.accountId},null,8,["subject","message-id","account-id"])]),y.tags?(g(),D("div",nFe,[(g(!0),D(de,null,Ie(y.tags,b=>(g(),R(f,{key:b.id,color:b.swatch_color,text:b.name},null,8,["color","text"]))),128))])):Z("",!0)])]),from:p(({row:y})=>[y.from?(g(),R(fh,{key:0,address:y.from},null,8,["address"])):(g(),D("p",{key:1,textContent:K("("+d.$t("mailclient::inbox.unknown_address")+")")},null,8,oFe))]),date:p(({row:y})=>[_("span",{title:v(s)(y.date)},K(u(y.date)),9,aFe)]),_:1},16,["resource-name","cache-key"])],2)}}}),lFe={class:"inline-flex max-w-[380px] flex-nowrap items-center"},sFe={class:"block min-w-0 truncate"},iFe={key:0,class:"ml-2 inline-flex shrink-0 space-x-0.5 group-hover/td:hidden"},uFe=["textContent"],cFe=["title"],dFe=Object.assign({inheritAttrs:!1},{__name:"InboxMessagesTableOutgoing",props:{cacheKey:{type:String,required:!0},accountId:{type:Number,required:!0},isSyncStopped:Boolean},setup(e,{expose:t}){const n=Innoclapps.resourceName("emails"),{DateTime:o,localizedTime:a,localizedDate:r,localizedDateTime:s}=it(),i=V(null);function u(d){const m=o.fromISO(d);return m.hasSame(o.now(),"day")?a(m.toISO()):r(m.toISO())}return t({tableRef:i}),(d,m)=>{const f=c("IBadge"),h=c("ResourceTable");return g(),D("div",{class:be({"sync-stopped-by-system":e.isSyncStopped})},[l(h,Ue({ref_key:"tableRef",ref:i,"resource-name":v(n),"cache-key":e.cacheKey},d.$attrs),{subject:p(({row:y})=>[_("div",lFe,[_("div",sFe,[l(q5,{subject:y.subject,"message-id":y.id,"account-id":e.accountId},null,8,["subject","message-id","account-id"])]),y.tags?(g(),D("div",iFe,[(g(!0),D(de,null,Ie(y.tags,b=>(g(),R(f,{key:b.id,color:b.swatch_color,text:b.name},null,8,["color","text"]))),128))])):Z("",!0)])]),to:p(({row:y})=>[(g(!0),D(de,null,Ie(y.to,(b,I)=>(g(),D("div",{key:I},[l(fh,{address:b},null,8,["address"])]))),128)),!y.to||y.to.length===0?(g(),D("span",{key:0,textContent:K("("+d.$t("mailclient::inbox.unknown_address")+")")},null,8,uFe)):Z("",!0)]),date:p(({row:y})=>[_("span",{title:v(s)(y.date)},K(u(y.date)),9,cFe)]),_:1},16,["resource-name","cache-key"])],2)}}}),mFe={__name:"InboxMessagesTable",props:{account:{type:Object,required:!0}},setup(e){const t=e,n=Ct(),o=yo(),{scriptConfig:a}=qe(),r=V(null),s=V(null),i=V({}),u=V(null),d=P(()=>({folder_id:r.value,account_id:s.value})),m=P(()=>({account_id:s.value,folder_id:r.value,folder_type:f.value,tag:n.query.tag})),f=P(()=>y.value?"outgoing":b.value?"incoming":a("mail.folders.other")),h=P(()=>f.value==="incoming"||f.value===a("mail.folders.other")?"messages-incoming":"messages-outgoing"),y=P(()=>a("mail.folders.outgoing").indexOf(i.value.type)>-1?!0:w("outgoing")),b=P(()=>a("mail.folders.incoming").indexOf(i.value.type)>-1?!0:w("incoming")),{reloadTable:I}=qo("emails",h);function w(x,$){let C=$||i.value;if(!C.parent_id)return!1;let F=ft(t.account.folders,["id",parseInt(C.parent_id)]);return a(`mail.folders.${x}`).indexOf(F.type)>-1?!0:F.parent_id?w(x,F):!1}function k(){y.value&&I()}return Se(()=>n.params,(x,$)=>{const C=x.account_id&&x.folder_id&&!x.id;s.value=x.account_id,r.value=x.folder_id,(!$||$&&$.folder_id!=x.folder_id)&&(i.value=ft(t.account.folders,F=>parseInt(F.id)===parseInt(x.folder_id))),C&&We(()=>o.value=`${i.value.display_name} - ${t.account.display_email}`),C&&$&&parseInt(x.account_id)!==parseInt($.account_id)&&(u.value.tableRef.setPage(1),console.log("refresh"),We(()=>{u.value.tableRef.refetchActions()}))},{immediate:!0}),jt("user-synchronized-email-account",I),jt("email-accounts-sync-finished",I),jt("email-sent",k),(x,$)=>(g(),R(_t(h.value==="messages-incoming"?rFe:dFe),{ref_key:"tableComponentRef",ref:u,"cache-key":h.value,"account-id":e.account.id,"is-sync-stopped":e.account.is_sync_stopped,"data-request-query-string":m.value,"run-action-request-additional-params":d.value},null,8,["cache-key","account-id","is-sync-stopped","data-request-query-string","run-action-request-additional-params"]))}},fFe={__name:"ScheduledEmailsIndex",setup(e){return(t,n)=>{const o=c("ICardHeading"),a=c("ICardHeader"),r=c("ICard"),s=c("MainLayout");return g(),R(s,null,{default:p(()=>[l(r,{class:"mx-auto max-w-6xl"},{default:p(()=>[l(a,null,{default:p(()=>[l(o,{text:t.$t("mailclient::schedule.scheduled_emails")},null,8,["text"])]),_:1}),l(N5,{"wrapper-class":"px-6",class:"[--gutter:theme(spacing.6)]",bleed:""})]),_:1})]),_:1})}}},pFe=[{path:"/inbox",name:"inbox",component:J6e,meta:{title:rt("mailclient::inbox.inbox")},children:[{path:":account_id/folder/:folder_id/messages",components:{messages:mFe},name:"inbox-messages",meta:{title:rt("mailclient::inbox.inbox")}},{path:":account_id/folder/:folder_id/messages/:id",components:{message:F6e},name:"inbox-message",meta:{scrollToTop:!1}}]},{path:"/mail/accounts",name:"email-accounts-index",component:f6e,meta:{title:rt("mailclient::mail.account.accounts")},children:[{path:"create",name:"create-email-account",component:GEe,meta:{title:rt("mailclient::mail.account.create")}},{path:":id/edit",name:"edit-email-account",component:KEe}]},{path:"/mail/scheduled",name:"scheduled-emails-index",component:fFe,meta:{title:rt("mailclient::schedule.scheduled_emails")}}];window.Innoclapps&&Innoclapps.booting(function(e,t,n){e.component("RecordTabTimelineEmail",zTe),e.component("FormMailEditorField",cEe),e.component("DetailEmailSendableField",uEe),e.component("IndexEmailSendableField",dEe),e.component("EmailsTab",vEe),e.component("EmailsTabPanel",$Ee),n.registerModule("emailAccounts",pEe),pFe.forEach(o=>t.addRoute(o)),ou("inbox.emails",".synchronized",o=>{this.$emit("email-accounts-sync-finished",o),this.request("mail/accounts/unread").then(({data:a})=>n.dispatch("emailAccounts/updateUnreadCountUI",a))})});const vFe={__name:"RecordTabNote",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object}},setup(e){return(t,n)=>{const o=c("Icon"),a=c("IBadge"),r=c("ITab");return Ia([e.resource.notes_count],()=>l(r,null,{default:p(()=>[l(o,{icon:"PencilAlt"}),ne(" "+K(t.$t("notes::note.notes"))+" ",1),te(l(a,{variant:"neutral",text:e.resource.notes_count,pill:""},null,8,["text"]),[[fe,e.resource.notes_count]])]),_:1}),n,0)}}},hFe={class:"mt-2 space-y-2 sm:mt-0 sm:space-x-2 sm:space-y-0"},gFe={__name:"NotesCreate",props:{viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},relatedResourceDisplayName:{required:!0,type:String}},emits:["cancel"],setup(e){const t=e,n=Le("synchronizeResource"),o=Le("incrementResourceCount"),{t:a}=Pe(),{createFollowUpActivity:r}=su(),{createResource:s}=qt(Innoclapps.resourceName("notes")),{form:i}=Qe({body:"",task_date:null}),u=V(null);async function d(f){if(i.task_date){let h=await r(i.task_date,t.viaResource,t.viaResourceId,t.relatedResourceDisplayName,{note:a("notes::note.follow_up_task_body",{content:f.body})});u.value.reset(),h&&(n({activities:[h]}),o("incomplete_activities_for_user_count"))}n({notes:[f]}),o("notes_count"),Innoclapps.success(a("notes::note.created")),i.reset()}function m(){s(i.set(t.viaResource,[t.viaResourceId]).withQueryString({via_resource:t.viaResource,via_resource_id:t.viaResourceId})).then(d)}return(f,h)=>{const y=c("Editor"),b=c("IFormError"),I=c("ICardBody"),w=c("IButton"),k=c("ICardFooter"),x=c("ICard");return g(),R(x,{as:"form",onSubmit:ot(m,["prevent"])},{default:p(()=>[l(I,null,{default:p(()=>[l(y,{ref:"editorRef",modelValue:v(i).body,"onUpdate:modelValue":h[0]||(h[0]=$=>v(i).body=$),placeholder:f.$t("notes::note.write"),"with-mention":"",minimal:"",onInit:h[1]||(h[1]=()=>f.$refs.editorRef.focus())},null,8,["modelValue","placeholder"]),l(b,{error:v(i).getError("body")},null,8,["error"])]),_:1}),l(k,{class:"flex flex-col sm:flex-row sm:items-center"},{default:p(()=>[l(Fs,{ref_key:"createFollowUpTaskRef",ref:u,modelValue:v(i).task_date,"onUpdate:modelValue":h[2]||(h[2]=$=>v(i).task_date=$),class:"grow"},null,8,["modelValue"]),_("div",hFe,[l(w,{class:"w-full sm:w-auto",variant:"secondary",text:f.$t("core::app.cancel"),onClick:h[3]||(h[3]=$=>f.$emit("cancel"))},null,8,["text"]),l(w,{class:"w-full sm:w-auto",variant:"primary",text:f.$t("notes::note.add"),disabled:v(i).busy,onClick:m},null,8,["text","disabled"])])]),_:1})]),_:1})}}},bFe={__name:"NotesEdit",props:{noteId:{required:!0,type:Number},body:{required:!0,type:String},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]}},emits:["updated","cancelled"],setup(e,{emit:t}){const n=e,o=t,a=Le("synchronizeResource"),{t:r}=Pe(),{updateResource:s}=qt(Innoclapps.resourceName("notes")),{form:i}=Qe({body:n.body});async function u(){let d=await s(i.withQueryString({via_resource:n.viaResource,via_resource_id:n.viaResourceId}),n.noteId);a({notes:d}),o("updated",d),Innoclapps.success(r("notes::note.updated"))}return(d,m)=>{const f=c("Editor"),h=c("IFormError"),y=c("ICardBody"),b=c("IButton"),I=c("ICardFooter"),w=c("ICard");return g(),R(w,{as:"form",onSubmit:ot(u,["prevent"])},{default:p(()=>[l(y,null,{default:p(()=>[l(f,{modelValue:v(i).body,"onUpdate:modelValue":m[0]||(m[0]=k=>v(i).body=k),minimal:"","with-mention":""},null,8,["modelValue"]),l(h,{error:v(i).getError("body")},null,8,["error"])]),_:1}),l(I,{class:"space-x-2 text-right"},{default:p(()=>[l(b,{variant:"secondary",text:d.$t("core::app.cancel"),onClick:m[1]||(m[1]=k=>d.$emit("cancelled"))},null,8,["text"]),l(b,{type:"submit",variant:"primary",text:d.$t("core::app.save"),disabled:v(i).busy,onClick:u},null,8,["text","disabled"])]),_:1})]),_:1})}}},yFe={class:"flex flex-1"},_Fe={class:"mr-1 shrink-0 self-start"},wFe=["textContent"],IFe=["textContent"],U5=Object.assign({inheritAttrs:!1},{__name:"NotesView",props:{noteId:{required:!0,type:Number},commentsCount:{required:!0,type:Number},createdAt:{required:!0,type:String},body:{required:!0,type:String},userId:{required:!0,type:Number},authorizations:{required:!0,type:Object},comments:{required:!0,type:Array},viaResource:{required:!0,type:String},viaResourceId:{required:!0,type:[String,Number]},collapsable:Boolean},setup(e){const t=e,n=Innoclapps.resourceName("notes"),o=Le("synchronizeResource"),a=Le("decrementResourceCount"),{t:r}=Pe(),{localizedDateTime:s}=it(),{findUserById:i}=qe(),{deleteResource:u}=qt(n),{commentsAreVisible:d}=Ca(t.noteId,"notes"),m=P(()=>i(t.userId)),f=V(!1);async function h(b){await u(b),o({notes:{id:b,_delete:!0}}),a("notes_count"),Innoclapps.success(r("notes::note.deleted"))}function y(b){b.type=="dblclick"&&f.value||t.authorizations.update&&(f.value=!f.value)}return(b,I)=>{const w=c("IAvatar"),k=c("I18nT"),x=c("ITextBlockDark"),$=c("IDropdownItem"),C=c("IDropdownMinimal"),F=c("ICardActions"),T=c("ICardHeader"),S=c("TextCollapse"),A=c("EditorText"),E=c("CollapseableCommentsLink"),B=c("CollapsableCommentsList"),M=c("ICardBody"),N=c("CommentsAdd"),G=c("ICardFooter"),U=c("ICard");return g(),D(de,null,[te(l(U,Ue(b.$attrs,{class:"note-"+e.noteId}),{default:p(()=>[l(T,null,{default:p(()=>[_("div",yFe,[_("div",_Fe,[l(w,{src:m.value.avatar_url},null,8,["src"])]),l(x,{class:"ml-1 mt-0.5"},{default:p(()=>[l(k,{scope:"global",keypath:"notes::note.info_created"},{user:p(()=>[_("span",{class:"font-medium",textContent:K(m.value.name)},null,8,wFe)]),date:p(()=>[_("span",{class:"font-medium",textContent:K(v(s)(e.createdAt))},null,8,IFe)]),_:1})]),_:1})]),l(F,null,{default:p(()=>[e.authorizations.update&&e.authorizations.delete?(g(),R(C,{key:0,small:""},{default:p(()=>[te(l($,{text:b.$t("core::app.edit"),onClick:y},null,8,["text"]),[[fe,e.authorizations.update]]),te(l($,{text:b.$t("core::app.delete"),onClick:I[0]||(I[0]=j=>b.$confirm(()=>h(e.noteId)))},null,8,["text"]),[[fe,e.authorizations.delete]])]),_:1})):Z("",!0)]),_:1})]),_:1}),l(M,null,{default:p(()=>[l(A,{onDblclick:y},{default:p(()=>[e.collapsable?(g(),R(S,{key:0,text:e.body,length:250,lightbox:""},null,8,["text"])):(g(),R(iu,{key:1,html:e.body},null,8,["html"]))]),_:1}),l(B,{class:"mt-3","commentable-type":"notes","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.noteId,count:e.commentsCount,comments:e.comments,onUpdated:I[1]||(I[1]=j=>v(o)({notes:{id:e.noteId,comments:j}})),onDeleted:I[2]||(I[2]=j=>v(o)({notes:{id:e.noteId,comments:{id:j,_delete:!0}}})),"onUpdate:comments":I[3]||(I[3]=j=>v(o)({notes:{id:e.noteId,comments:j}})),"onUpdate:count":I[4]||(I[4]=j=>v(o)({notes:{id:e.noteId,comments_count:j}}))},{default:p(({hasComments:j,totalComments:O,commentsAreBeingLoaded:H,toggleCommentsVisibility:W})=>[j?(g(),R(E,{key:0,class:"mt-6",loading:H,total:O,collapsed:v(d),onClick:W},null,8,["loading","total","collapsed","onClick"])):Z("",!0)]),_:1},8,["via-resource","via-resource-id","commentable-id","count","comments"])]),_:1}),l(G,{class:"text-right"},{default:p(()=>[l(N,{class:"self-end","commentable-type":"notes","via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"commentable-id":e.noteId,onCreated:I[5]||(I[5]=j=>(d.value=!0,v(o)({notes:{id:e.noteId,comments:[j]}})))},null,8,["via-resource","via-resource-id","commentable-id"])]),_:1})]),_:1},16,["class"]),[[fe,!f.value]]),f.value?(g(),R(bFe,{key:0,"via-resource":e.viaResource,"via-resource-id":e.viaResourceId,"note-id":e.noteId,body:e.body,onCancelled:I[6]||(I[6]=j=>f.value=!1),onUpdated:I[7]||(I[7]=j=>f.value=!1)},null,8,["via-resource","via-resource-id","note-id","body"])):Z("",!0)],64)}}}),xFe={class:"sm:flex sm:items-start sm:justify-between"},kFe={class:"mt-5 sm:ml-6 sm:mt-0 sm:shrink-0"},$Fe={class:"mt-3 space-y-4 sm:mt-7"},Jm="notes",CFe={__name:"RecordTabNotePanel",props:{resourceName:{required:!0,type:String},resourceId:{required:!0,type:[String,Number]},resource:{required:!0,type:Object},scrollElement:{type:String}},setup(e){const t=e,n=Le("synchronizeResource"),o=Ct(),a=V(null),r=V(!1),{commentsAreVisible:s}=Ca(o.query.resourceId,Jm),{dataLoadedFirstTime:i,focusToAssociateableElement:u,searchResults:d,isSearching:m,hasSearchResults:f,performSearch:h,search:y,loadData:b,infiniteHandler:I}=Es({resourceName:t.resourceName,resource:xt(t,"resource"),scrollElement:t.scrollElement,infinityRef:a,synchronizeResource:n,timelineRelation:Jm}),w=P(()=>Vt(d.value||t.resource.notes,"created_at","desc")),k=P(()=>w.value.length>0);return o.query.resourceId&&o.query.section===Jm&&Se(i,()=>{u(o.query.resourceId,"note").then(()=>{o.query.comment_id&&(s.value=!0)})},{once:!0}),(x,$)=>{const C=c("ITextDark"),F=c("IText"),T=c("IButton"),S=c("InputSearch"),A=c("ICardBody"),E=c("ICard"),B=c("ITabPanel");return g(),R(B,{lazy:!v(i),onActivatedOnce:v(b)},{default:p(()=>[te(l(E,{class:"rounded-t-none pt-5 sm:pt-0"},{default:p(()=>[l(A,null,{default:p(()=>[_("div",xFe,[_("div",null,[l(C,{class:"font-semibold",text:x.$t("notes::note.manage_notes")},null,8,["text"]),l(F,{class:"max-w-xl",text:x.$t("notes::note.info")},null,8,["text"])]),_("div",kFe,[l(T,{variant:"primary",icon:"PlusSolid",text:x.$t("notes::note.add"),onClick:$[0]||($[0]=M=>r.value=!0)},null,8,["text"])])]),te(l(S,{modelValue:v(y),"onUpdate:modelValue":[$[1]||($[1]=M=>hn(y)?y.value=M:null),v(h)],class:"mt-4"},null,8,["modelValue","onUpdate:modelValue"]),[[fe,k.value||v(y)]])]),_:1})]),_:1},512),[[fe,!r.value]]),r.value?(g(),R(gFe,{key:0,class:"rounded-t-none","via-resource":e.resourceName,"via-resource-id":e.resourceId,"related-resource-display-name":e.resource.display_name,onCancel:$[2]||($[2]=M=>r.value=!1)},null,8,["via-resource","via-resource-id","related-resource-display-name"])):Z("",!0),_("div",$Fe,[(g(!0),D(de,null,Ie(w.value,(M,N,G,U)=>{const j=[M.updated_at,M.comments_count,M.comments?M.comments.map(H=>H.updated_at):null];if(U&&U.key===M.id&&Fc(U,j))return U;const O=(g(),D("div",{key:M.id},[l(U5,{"note-id":M.id,"comments-count":M.comments_count,"created-at":M.created_at,body:M.body,"user-id":M.user_id,authorizations:M.authorizations,comments:M.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId},null,8,["note-id","comments-count","created-at","body","user-id","authorizations","comments","via-resource","via-resource-id"])]));return O.memo=j,O},$,3),128))]),te(l(F,{class:"mt-6 text-center",text:x.$t("core::app.no_search_results")},null,8,["text"]),[[fe,v(m)&&!v(f)]]),l(Ir,{ref_key:"infinityRef",ref:a,"scroll-element":e.scrollElement,onHandle:$[5]||($[5]=M=>v(I)(M))},null,8,["scroll-element"])]),_:1},8,["lazy","onActivatedOnce"])}}},SFe={class:"mt-3"},TFe={__name:"RecordTabTimelineNote",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){return(t,n)=>(g(),R(_o,{"heading-class":"font-medium",icon:"PencilAlt","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned||!1,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:t.$t("notes::note.timeline.heading")},{default:p(()=>[_("div",SFe,[l(U5,{"note-id":e.log.id,"comments-count":e.log.comments_count,"created-at":e.log.created_at,body:e.log.body,"user-id":e.log.user_id,authorizations:e.log.authorizations,comments:e.log.comments||[],"via-resource":e.resourceName,"via-resource-id":e.resourceId,collapsable:""},null,8,["note-id","comments-count","created-at","body","user-id","authorizations","comments","via-resource","via-resource-id"])])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"]))}};window.Innoclapps&&Innoclapps.booting(e=>{e.component("NotesTab",vFe),e.component("NotesTabPanel",CFe),e.component("RecordTabTimelineNote",TFe)});const EFe={key:0},FFe={key:0,class:"text-danger-500"},AFe={class:"mt-1"},X1={__name:"SettingsTranslatorTranslate",props:pt(["source"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=Ht(e,"modelValue"),o=/:(?:[a-z]+|[A-Z]+|[A-Z][a-zA-Z]*)\b/g,a=P(()=>{let s=t.source.match(o),i=t.modelValue.match(o,t.modelValue);return Ik(s,i)}),r=P(()=>a.value.length>0);return(s,i)=>{const u=c("IFormTextarea");return Array.isArray(e.modelValue)?Z("",!0):(g(),D("div",EFe,[l(u,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=d=>n.value=d),rows:"3"},null,8,["modelValue"]),r.value?(g(),D("div",FFe,[i[1]||(i[1]=_("p",{class:"mt-0.5"},' The parameters starting with ":" must not be translated or modified. ',-1)),_("p",AFe," Modified parameters: "+K(a.value.join(", ")),1)])):Z("",!0)]))}}},RFe={class:"flex items-center space-x-4"},DFe={class:"flex items-center space-x-2"},OFe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},PFe={class:"group hover:bg-neutral-100 dark:hover:bg-neutral-700/60"},MFe={class:"flex items-center"},BFe={class:"grow"},NFe={class:"px-6 py-2"},VFe={class:"ml-2 py-2 pr-6"},LFe=["onSubmit"],qFe={class:"px-6"},UFe={class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},jFe={class:"group hover:bg-neutral-100 dark:hover:bg-neutral-700/60"},zFe={class:"flex items-center"},HFe={class:"grow"},WFe={class:"px-6 py-2"},GFe={class:"ml-2 py-2 pr-6"},KFe=["onSubmit"],ZFe={class:"px-6"},YFe={__name:"SettingsTranslator",setup(e){const t=Ct(),{t:n}=Pe(),{appUrl:o,scriptConfig:a,locales:r}=qe(),{form:s}=Qe({name:null});let i={};const u=V(t.query.locale||a("locale")),d=Pt({source:{groups:{},namespaces:{}},current:{groups:{},namespaces:{}}}),m=V(null),f=V(null),h=V(!1);Se(u,I),v2((T,S,A)=>{y().length>0?Innoclapps.confirm({message:n("translator::translator.changes_not_saved"),title:"Are you sure you want to leave this page?",confirmText:n("core::app.discard_changes")}).then(()=>A()).catch(()=>A(!1)):A()});function y(){let T=[],S={},A={};f.value?(T=Object.keys(i.namespaces[f.value]),S=i.namespaces[f.value],A=d.value.current.namespaces[f.value]):(T=Object.keys(i.groups),S=i.groups,A=d.value.current.groups);let E=[];return T.forEach(B=>{ha(S[B],A[B])||E.push(B)}),E}function b(T,S=null){h.value=!0;let A=null;S?A=d.value.current.namespaces[S][T]:A=d.value.current.groups[T],Innoclapps.request().put(`/translation/${u.value}/${T}`,{translations:A,namespace:S}).then(()=>{window.location.href=`${o}/settings/translator?locale=${u.value}`}).finally(()=>setTimeout(()=>h.value=!1,1e3))}function I(T){Innoclapps.request(`/translation/${T}`).then(({data:S})=>{i=structuredClone(S.current),d.value=S})}function w(){s.post("/translation").then(T=>{r.value.push(T.locale),u.value=T.locale,Innoclapps.dialog().hide("newLocaleModal")})}function k(T,S=null){if(m.value){$(T);return}x(T,S)}function x(T,S=null){m.value=T,f.value=S}function $(T,S=!1){const A=y();let E=f.value;const B=A.indexOf(T)>-1;if(S||!B){m.value=null,f.value=null,B&&C(T,E);return}Innoclapps.confirm({message:n("translator::translator.changes_not_saved"),title:n("translator::translator.group_has_unsaved_translations"),confirmText:n("core::app.discard_changes")}).then(()=>{f.value=null,m.value=null,C(T,E)})}function C(T,S=null){if(S){d.value.current.namespaces[S][T]=structuredClone(i.namespaces[S][T]),Nr(d);return}d.value.current.groups[T]=structuredClone(i.groups[T]),Nr(d)}function F(T){T=T.toLowerCase().split(" ");for(var S=0;S<T.length;S++)T[S]=T[S].charAt(0).toUpperCase()+T[S].slice(1);return T.join(" ")}return I(u.value),(T,S)=>{const A=c("ICardHeading"),E=c("ITextDark"),B=c("IDropdownButton"),M=c("IDropdownItem"),N=c("IDropdownMenu"),G=c("IDropdown"),U=c("IButton"),j=c("ICardActions"),O=c("ICardHeader"),H=c("ILink"),W=c("ITableHeader"),X=c("ITableRow"),q=c("ITableHead"),L=c("ITableCell"),ee=c("ITableBody"),ce=c("ITable"),ue=c("ICardFooter"),oe=c("IFormInput"),re=c("IFormError"),Y=c("IFormGroup"),ae=c("IModal"),se=c("ICard"),xe=ze("dialog");return g(),D(de,null,[l(O,null,{default:p(()=>[_("div",RFe,[l(A,{text:T.$t("translator::translator.translator")},null,8,["text"]),_("div",DFe,[l(E,{class:"font-medium",text:T.$t("core::app.locale")},null,8,["text"]),l(G,null,{default:p(()=>[l(B,{text:u.value,basic:""},null,8,["text"]),l(N,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(r),le=>(g(),R(M,{key:le,text:le,active:u.value===le,condensed:"",onClick:ge=>u.value=le},null,8,["text","active","onClick"]))),128))]),_:1})]),_:1})])]),l(j,null,{default:p(()=>[te(l(U,{variant:"primary",icon:"PlusSolid",text:T.$t("translator::translator.new_locale")},null,8,["text"]),[[xe,"newLocaleModal"]])]),_:1})]),_:1}),l(se,null,{default:p(()=>[_("ul",OFe,[(g(!0),D(de,null,Ie(d.value.current.groups,(le,ge)=>te((g(),D("li",{key:ge},[_("div",PFe,[_("div",MFe,[_("div",BFe,[_("div",NFe,[l(H,{class:"block font-medium group-hover:text-neutral-900",text:F(ge.replace("_"," ")),basic:"",onClick:ve=>k(ge)},null,8,["text","onClick"])])]),_("div",VFe,[l(U,{variant:"secondary",icon:"ChevronDownSolid",small:"",onClick:ve=>k(ge)},null,8,["onClick"])])])]),te(_("form",{novalidate:"true",onSubmit:ot(ve=>b(ge),["prevent"])},[_("div",qFe,[l(ce,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(q,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(X,null,{default:p(()=>[l(W,{width:"15%"},{default:p(()=>S[2]||(S[2]=[ne("Key")])),_:1}),l(W,{width:"30%"},{default:p(()=>S[3]||(S[3]=[ne("Source")])),_:1}),l(W,{width:"55%"},{default:p(()=>[ne(K(u.value),1)]),_:1})]),_:1})]),_:1}),l(ee,null,{default:p(()=>[(g(!0),D(de,null,Ie(le,(ve,ie)=>(g(),R(X,{key:ie},{default:p(()=>[l(L,{width:"15%",class:"whitespace-normal font-medium"},{default:p(()=>[ne(K(ie),1)]),_:2},1024),l(L,{width:"30%",class:"whitespace-normal"},{default:p(()=>[ne(K(d.value.source.groups[ge][ie]),1)]),_:2},1024),l(L,{width:"55%"},{default:p(()=>[l(X1,{modelValue:d.value.current.groups[ge][ie],"onUpdate:modelValue":me=>d.value.current.groups[ge][ie]=me,source:d.value.source.groups[ge][ie]},null,8,["modelValue","onUpdate:modelValue","source"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),l(ue,{class:"-mt-px flex items-center justify-end space-x-2"},{default:p(()=>[l(U,{variant:"secondary",disabled:h.value,text:T.$t("core::app.cancel"),onClick:ve=>$(ge,!0)},null,8,["disabled","text","onClick"]),l(U,{type:"submit",variant:"primary",text:T.$t("core::app.save"),disabled:h.value,loading:h.value},null,8,["text","disabled","loading"])]),_:2},1024)],40,LFe),[[fe,m.value===ge]])])),[[fe,!m.value||m.value===ge]])),128))]),(g(!0),D(de,null,Ie(d.value.current.namespaces,(le,ge)=>(g(),D(de,{key:ge},[te(_("p",{class:"border-y border-neutral-200 bg-neutral-100 px-6 py-3 font-semibold text-neutral-700 dark:border-neutral-500/30 dark:bg-neutral-700 dark:text-neutral-300"},K(F(ge)),513),[[fe,!m.value]]),_("ul",UFe,[(g(!0),D(de,null,Ie(d.value.current.namespaces[ge],(ve,ie)=>te((g(),D("li",{key:ie},[_("div",jFe,[_("div",zFe,[_("div",HFe,[_("div",WFe,[l(H,{class:"block font-medium",text:F(ie.replace("_"," ")),basic:"",onClick:me=>k(ie,ge)},null,8,["text","onClick"])])]),_("div",GFe,[l(U,{variant:"secondary",icon:"ChevronDownSolid",small:"",onClick:me=>k(ie,ge)},null,8,["onClick"])])])]),te(_("form",{novalidate:"true",onSubmit:ot(me=>b(ie,ge),["prevent"])},[_("div",ZFe,[l(ce,{class:"[--gutter:theme(spacing.6)]",bleed:""},{default:p(()=>[l(q,{class:"bg-neutral-50 dark:bg-neutral-500/10"},{default:p(()=>[l(X,null,{default:p(()=>[l(W,{width:"15%"},{default:p(()=>S[4]||(S[4]=[ne("Key")])),_:1}),l(W,{width:"30%"},{default:p(()=>S[5]||(S[5]=[ne("Source")])),_:1}),l(W,{width:"55%"},{default:p(()=>[ne(K(u.value),1)]),_:1})]),_:1})]),_:1}),_("tbody",null,[(g(!0),D(de,null,Ie(ve,(me,Ce)=>(g(),R(X,{key:Ce},{default:p(()=>[l(L,{width:"15%",class:"whitespace-normal font-medium"},{default:p(()=>[ne(K(Ce),1)]),_:2},1024),l(L,{width:"30%",class:"whitespace-normal"},{default:p(()=>[ne(K(d.value.source.namespaces[ge][ie][Ce]),1)]),_:2},1024),l(L,{width:"55%"},{default:p(()=>[l(X1,{modelValue:d.value.current.namespaces[ge][ie][Ce],"onUpdate:modelValue":ke=>d.value.current.namespaces[ge][ie][Ce]=ke,source:d.value.source.namespaces[ge][ie][Ce]},null,8,["modelValue","onUpdate:modelValue","source"])]),_:2},1024)]),_:2},1024))),128))])]),_:2},1024)]),l(ue,{class:"-mt-px flex items-center justify-end space-x-2"},{default:p(()=>[l(U,{variant:"secondary",disabled:h.value,text:T.$t("core::app.cancel"),onClick:me=>$(ie,!0)},null,8,["disabled","text","onClick"]),l(U,{type:"submit",variant:"primary",text:T.$t("core::app.save"),disabled:h.value,loading:h.value},null,8,["text","disabled","loading"])]),_:2},1024)],40,KFe),[[fe,m.value===ie&&f.value===ge]])])),[[fe,!m.value||m.value===ie&&f.value===ge]])),128))])],64))),128)),l(ae,{id:"newLocaleModal",size:"sm","ok-text":T.$t("core::app.create"),title:T.$t("translator::translator.create_new_locale"),form:"",onSubmit:w,onShown:S[1]||(S[1]=()=>T.$refs.inputNameRef.focus())},{default:p(()=>[l(Y,{"label-for":"localeName",label:T.$t("translator::translator.locale_name"),required:""},{default:p(()=>[l(oe,{id:"localeName",ref:"inputNameRef",modelValue:v(s).name,"onUpdate:modelValue":S[0]||(S[0]=le=>v(s).name=le)},null,8,["modelValue"]),l(re,{error:v(s).getError("name")},null,8,["error"])]),_:1},8,["label"])]),_:1},8,["ok-text","title"])]),_:1})],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/translator",component:YFe,meta:{title:rt("translator::translator.translator")}})});const XFe=["innerHTML"],QFe={__name:"RecordTabTimelineWebFormSubmission",props:{log:{type:Object,required:!0},resourceName:{type:String,required:!0},resourceId:{type:[String,Number],required:!0},resource:{type:Object,required:!0}},setup(e){const{localizeIfDate:t}=it(),n=Innoclapps.resources();return(o,a)=>{const r=c("ITextDark"),s=c("ITextBlockDark"),i=c("IText"),u=c("ICardBody"),d=c("ICard");return g(),R(_o,{"heading-class":"font-medium",icon:"Bars3BottomLeft","resource-name":e.resourceName,"resource-id":e.resourceId,"created-at":e.log.created_at,"is-pinned":e.log.is_pinned,"timelineable-id":e.log.id,"timeline-relationship":e.log.timeline_relation,"timeline-subject-key":e.resource.timeline_subject_key,"timelineable-key":e.log.timeline_key,heading:o.$t("webforms::form.submission")},{default:p(()=>[a[0]||(He(-1),(a[0]=l(d,{class:"mt-2"},{default:p(()=>[l(u,null,{default:p(()=>[l(r,{class:"mb-2 font-semibold",text:e.log.description},null,8,["text"]),(g(!0),D(de,null,Ie(e.log.properties,(m,f)=>(g(),D(de,{key:f},[l(s,{class:"flex justify-start font-semibold"},{default:p(()=>[_("span",null,K(v(n)[m.resourceName].singularLabel)+" /",1),_("span",{class:"ml-1 font-medium",innerHTML:m.label},null,8,XFe)]),_:2},1024),l(i,{class:"mb-4 last:mb-0"},{default:p(()=>[ne(K(m.value===null?"/":v(t)(m.value)||m.value),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})).cacheIndex=0,He(1),a[0])]),_:1},8,["resource-name","resource-id","created-at","is-pinned","timelineable-id","timeline-relationship","timeline-subject-key","timelineable-key","heading"])}}},hh=ys(()=>{const{setLoading:e,isLoading:t}=Cn(),n=V([]),o=P(()=>Vt(n.value,["status","title"],["asc","asc"]));h();function a(y){return n.value.findIndex(b=>b.id==y)}function r(y){n.value.splice(a(y),1)}function s(y){n.value.push(y)}function i(y,b){n.value[a(y)]=b}function u(y){return n.value[a(y)]}async function d(y,b){const{data:I}=await Innoclapps.request().post(`/forms/${y}/clone`,b);return I}async function m(y,b){const{data:I}=await Innoclapps.request(`/forms/${y}`,b);return I}async function f(y){await Innoclapps.request().delete(`/forms/${y}`),r(y)}function h(y){e(!0),Innoclapps.request("/forms",y).then(({data:b})=>n.value=b).finally(()=>e(!1))}return{webForms:n,webFormsOrderedByNameAndStatus:o,formsAreBeingFetched:t,addWebForm:s,removeWebForm:r,setWebForm:i,findWebForm:u,fetchWebForms:h,fetchWebForm:m,deleteWebForm:f,cloneWebForm:d}}),JFe={class:"flex items-center px-4 py-5 sm:px-6"},eAe={class:"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between"},tAe={class:"truncate"},nAe={class:"flex flex-col sm:flex-row"},oAe={class:"whitespace-normal sm:max-w-md sm:truncate"},aAe={class:"mt-2 sm:flex sm:items-center sm:space-x-4"},rAe={class:"mt-2 shrink-0 sm:ml-5 sm:mt-0"},lAe={__name:"WebFormsIndex",setup(e){const{t}=Pe(),n=wt(),{webFormsOrderedByNameAndStatus:o,formsAreBeingFetched:a,setWebForm:r,deleteWebForm:s,cloneWebForm:i,addWebForm:u}=hh(),{findPipelineById:d,findPipelineStageById:m}=Sa(),{form:f}=Qe({status:null}),h=P(()=>o.value.length>0);async function y(x){const $=await i(x);u($),n.push({name:"web-form-edit",params:{id:$.id}})}async function b(x){await s(x),Innoclapps.success(t("webforms::form.deleted"))}function I(){n.push({name:"web-form-create"})}function w(x){n.push({name:"web-form-edit",params:{id:x}})}function k(x){f.fill("status",x.status==="active"?"inactive":"active"),f.put(`/forms/${x.id}`).then($=>{r($.id,$)})}return(x,$)=>{const C=c("ICardHeading"),F=c("IButton"),T=c("ICardActions"),S=c("ICardHeader"),A=c("Icon"),E=c("ILink"),B=c("IBadge"),M=c("ITextDark"),N=c("IFormSwitchLabel"),G=c("IFormSwitch"),U=c("IFormSwitchField"),j=c("IDropdownItem"),O=c("IDropdownMinimal"),H=c("IEmptyState"),W=c("ICardBody"),X=c("ICard"),q=c("RouterView");return g(),D(de,null,[l(S,null,{default:p(()=>[l(C,{text:x.$t("webforms::form.forms")},null,8,["text"]),l(T,null,{default:p(()=>[te(l(F,{variant:"primary",icon:"PlusSolid",text:x.$t("webforms::form.create"),onClick:I},null,8,["text"]),[[fe,h.value]])]),_:1})]),_:1}),l(X,{overlay:v(a)},{default:p(()=>[v(a)?Z("",!0):(g(),D(de,{key:0},[h.value?(g(),R(wi,{key:0,name:"flip-list",tag:"ul",class:"divide-y divide-neutral-200 dark:divide-neutral-500/30"},{default:p(()=>[(g(!0),D(de,null,Ie(v(o),L=>(g(),D("li",{key:L.id},[_("div",{class:be({"opacity-70":L.status==="inactive"})},[_("div",JFe,[_("div",eAe,[_("div",tAe,[_("div",nAe,[l(E,{class:"font-medium sm:flex sm:items-center",onClick:ee=>w(L.id)},{default:p(()=>[_("span",oAe,K(L.title),1),l(A,{icon:"ArrowRight",class:"ml-1 hidden size-4 sm:block"})]),_:2},1032,["onClick"]),v(d)(L.submit_data.pipeline_id)?(g(),R(B,{key:0,class:"sm:ml-2",variant:"primary"},{default:p(()=>[ne(K(v(d)(L.submit_data.pipeline_id).name)+" ",1),l(A,{icon:"ChevronRight",class:"mx-0.5 size-3"}),ne(" "+K(v(m)(L.submit_data.pipeline_id,L.submit_data.stage_id).name),1)]),_:2},1024)):Z("",!0)]),_("div",aAe,[l(E,{text:x.$t("core::app.preview"),href:L.public_url},null,8,["text","href"]),l(M,{class:"font-medium",text:x.$t("webforms::form.total_submissions",{total:L.total_submissions||0})},null,8,["text"])])]),_("div",rAe,[l(U,null,{default:p(()=>[l(N,{text:x.$t("webforms::form.active")},null,8,["text"]),l(G,{value:"active","unchecked-value":"inactive","model-value":L.status,onChange:ee=>k(L)},null,8,["model-value","onChange"])]),_:2},1024)])]),l(O,{class:"ml-2 shrink-0 self-start sm:self-auto"},{default:p(()=>[l(j,{icon:"PencilAlt",text:x.$t("core::app.edit"),onClick:ee=>w(L.id)},null,8,["text","onClick"]),l(j,{icon:"Duplicate",text:x.$t("core::app.clone"),onClick:ee=>y(L.id)},null,8,["text","onClick"]),l(j,{icon:"Trash",text:x.$t("core::app.delete"),onClick:ee=>x.$confirm(()=>b(L.id))},null,8,["text","onClick"])]),_:2},1024)])],2)]))),128))]),_:1})):(g(),R(W,{key:1},{default:p(()=>[l(H,{"button-text":x.$t("webforms::form.create"),description:x.$t("webforms::form.info"),onClick:I},null,8,["button-text","description"])]),_:1}))],64))]),_:1},8,["overlay"]),l(q)],64)}}},sAe={__name:"SettingsWebForms",setup(e){return(t,n)=>(g(),R(lAe))}},du={section:{required:!0,type:Object},form:{required:!0,type:Object}},iAe={__name:"FieldSection",props:du,emits:["fillFormAttribute","setFormAttribute"],setup(e){return(t,n)=>(g(),R(_t(t.section.field.formComponent),{field:t.section.field,"validation-errors":t.form.errors.groupByField()[t.section.field.attribute],"model-value":t.form[t.section.field.attribute],"onUpdate:modelValue":n[0]||(n[0]=o=>t.$emit("fillFormAttribute",{attribute:t.section.field.attribute,value:o})),onSetInitialValue:n[1]||(n[1]=o=>t.$emit("setFormAttribute",{attribute:t.section.field.attribute,value:o}))},null,40,["field","validation-errors","model-value"]))}},uAe={class:"flex flex-col items-center"},cAe=["innerHTML"],dAe={__name:"FileSection",props:du,emits:{fillFormAttribute:({attribute:e,value:t})=>e&&typeof t<"u"?!0:(console.warn('Invalid "fillFormAttribute" event payload!'),!1)},setup(e,{emit:t}){const n=e,o=t,a=V([]),r=P(()=>a.value.length);return Se(r,()=>{let s={attribute:n.section.requestAttribute};a.value.length===0?s.value=n.section.multiple?[]:null:n.section.multiple?s.value=a.value.map(i=>i.file):s.value=a.value[0].file,o("fillFormAttribute",s)}),(s,i)=>{const u=c("Icon"),d=c("IFormError"),m=c("IFormGroup");return g(),R(m,null,{default:p(()=>[l(ur,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f),"wrapper-classes":"","base-classes":"group block rounded-lg border border-dashed border-neutral-300 dark:border-neutral-400 w-full py-4 sm:py-5 hover:border-neutral-400 cursor-pointer hover:bg-neutral-50 dark:hover:bg-neutral-700/60 font-medium text-center",drop:!0,multiple:s.section.multiple,"show-upload-button":!1,"automatic-upload":!1,name:s.section.requestAttribute,"input-id":s.section.requestAttribute},{"upload-content":p(()=>[_("div",uAe,[l(u,{icon:"CloudArrowUp",class:"size-7 text-neutral-600 dark:text-neutral-300 dark:group-hover:text-white"}),_("p",{class:"mt-1 max-w-sm text-sm text-neutral-700 dark:text-neutral-100 dark:group-hover:text-white",innerHTML:s.section.label},null,8,cAe)])]),_:1},8,["modelValue","multiple","name","input-id"]),l(d,{error:s.form.getError(s.section.requestAttribute)},null,8,["error"])]),_:1})}}},mAe={key:0,class:"mb-3"},fAe=["innerHTML"],pAe={__name:"IntroductionSection",props:du,setup(e){const t=e,n=P(()=>t.section.title||t.section.message);return(o,a)=>{const r=c("ITextDisplay"),s=c("EditorText");return n.value?(g(),D("div",mAe,[l(r,{text:o.section.title},null,8,["text"]),l(s,null,{default:p(()=>[_("div",{innerHTML:o.section.message},null,8,fAe)]),_:1})])):Z("",!0)}}},vAe=["innerHTML"],hAe={__name:"MessageSection",props:du,setup(e){return(t,n)=>{const o=c("EditorText");return g(),R(o,{class:"mb-3"},{default:p(()=>[_("div",{innerHTML:t.section.message},null,8,vAe)]),_:1})}}},gAe={key:1,class:"flex"},bAe={__name:"SubmitButtonSection",props:du,emits:{fillFormAttribute:({attribute:e,value:t})=>e&&typeof t<"u"?!0:(console.warn('Invalid "fillFormAttribute" event payload!'),!1)},setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),r=a("reCaptcha")||{},s=V(!1),i=P(()=>n.section.spamProtected?r.validate&&r.configured:!1);function u(d){o("fillFormAttribute",{attribute:"g-recaptcha-response",value:d})}return(d,m)=>{const f=c("IFormError"),h=c("IFormGroup"),y=c("IFormCheckbox"),b=c("ILink"),I=c("I18nT"),w=c("IFormCheckboxLabel"),k=c("IFormCheckboxField"),x=c("IButton");return g(),D("div",null,[i.value?(g(),R(h,{key:0},{default:p(()=>[l(v(Jv),{sitekey:v(r).siteKey,onVerify:u},null,8,["sitekey"]),l(f,{error:d.form.getError("g-recaptcha-response")},null,8,["error"])]),_:1})):Z("",!0),d.section.privacyPolicyAcceptIsRequired?(g(),D("div",gAe,[l(k,null,{default:p(()=>[l(y,{checked:s.value,"onUpdate:checked":m[0]||(m[0]=$=>s.value=$),class:"self-start",onChange:m[1]||(m[1]=$=>d.form.fill("_privacy-policy",$))},null,8,["checked"]),l(w,{class:"-mt-1 text-neutral-500"},{default:p(()=>[l(I,{scope:"global",keypath:"core::app.agree_to_privacy_policy"},{privacyPolicyLink:p(()=>[l(b,{variant:"primary",href:d.section.privacyPolicyUrl},{default:p(()=>[ne(K(d.$t("core::app.privacy_policy")),1)]),_:1},8,["href"])]),_:1})]),_:1})]),_:1})])):Z("",!0),l(f,{class:"ml-6",error:d.form.getError("_privacy-policy")},null,8,["error"]),l(x,{id:"submitButton",variant:"primary",class:"mt-3",type:"submit",disabled:d.form.busy,loading:d.form.busy,text:d.section.text,block:""},null,8,["disabled","loading","text"])])}}},yAe=["src"],_Ae={key:0},wAe=["textContent"],IAe=["innerHTML"],xAe={__name:"WebFormPublicView",props:{sections:{required:!0,type:Array},styles:{required:!0,type:Object},submitData:{required:!0,type:Object},publicUrl:{required:!0,type:String},logo:String},setup(e){const t=e,n={"field-section":iAe,"file-section":dAe,"introduction-section":pAe,"message-section":hAe,"submit-button-section":bAe},o=V(!1),a=Ct(),{findField:r}=In(t.sections.filter($=>h($)&&$.field).map($=>$.field)),{form:s}=Qe();t.sections.filter(y).forEach($=>{s.set($.requestAttribute,$.multiple?[]:null)});const i=P(()=>t.sections.map($=>(h($)&&($.field=r($.requestAttribute)),$)).filter($=>h($)?!!$.field:!0)),u=P(()=>i.value.length>0),d=P(()=>Object.hasOwn(a.query,"bgColor")?a.query.bgColor:t.styles.background_color),m=P(()=>Object.hasOwn(a.query,"primaryColor")?"#"+a.query.primaryColor:t.styles.primary_color),f=P(()=>a.query.e==="true");function h($){return $.type==="field-section"}function y($){return $.type==="file-section"}function b(){s.post(t.publicUrl).then(()=>{t.submitData.action==="redirect"?window.top?window.top.location.href=t.submitData.success_redirect_url:window.location.href=t.submitData.success_redirect_url:o.value=!0})}let I=new WeakMap,w=function(){return!!window.getComputedStyle(document.body).getPropertyValue("--color-primary-50")}();function k($){let C=Array.prototype.slice.call(document.querySelectorAll("style"),0),F=/(\-\-[-\w]+)\:\s*(.*?)\;/g,T=$||{};if(w){Object.keys(T).forEach(function(A){document.body.style.setProperty("--"+A,T[A])});return}function S(A){return new RegExp("var\\(s*"+A+"s*\\)","gmi")}C.forEach(function(A){let E=I[A]||(I[A]=A.textContent),B;for(;B=F.exec(E);)E=E.replace(S(B[1]),T[B[1].substr(2)]||B[2]);A.textContent=E})}let x=$=>{try{return Ju(UA(m.value,$))}catch{return Ju(m.value)}};return k({"color-primary-50":x(100),"color-primary-100":x(80),"color-primary-200":x(60),"color-primary-300":x(40),"color-primary-400":x(20),"color-primary-500":x(10),"color-primary-600":x(0),"color-primary-700":x(-10),"color-primary-800":x(-20),"color-primary-900":x(-30)}),Xe(()=>{document.body.style.backgroundColor=d.value,document.getElementById("app").style.backgroundColor=d.value}),($,C)=>{const F=c("EditorText"),T=c("IAlertBody"),S=c("IAlert"),A=c("ICardBody"),E=c("ICard");return g(),D("div",{dusk:"web-form",class:be(["m-auto",{"w-full":f.value,"max-w-2xl":!f.value}]),style:Nt({"--primary-contrast":v(Zr)(m.value)})},[e.logo?(g(),D("img",{key:0,class:"mx-auto mb-3 mt-10 h-12 w-auto",src:e.logo},null,8,yAe)):Z("",!0),l(E,{class:be(["m-4 sm:m-8 sm:p-3",{"my-5":!f.value,"rounded-none shadow-none":f.value}])},{default:p(()=>[l(A,null,{default:p(()=>[o.value?(g(),D("div",_Ae,[_("h4",{class:"text-lg text-neutral-800",textContent:K(e.submitData.success_title)},null,8,wAe),te(l(F,null,{default:p(()=>[_("div",{innerHTML:e.submitData.success_message},null,8,IAe)]),_:1},512),[[fe,e.submitData.success_message]])])):u.value?(g(),D("form",{key:2,novalidate:"true",onSubmit:ot(b,["prevent"])},[(g(!0),D(de,null,Ie(i.value,(B,M)=>(g(),R(_t(n[B.type]),{key:M,form:v(s),section:B,onFillFormAttribute:C[0]||(C[0]=N=>v(s).fill(N.attribute,N.value)),onSetFormAttribute:C[1]||(C[1]=N=>v(s).set(N.attribute,N.value))},null,40,["form","section"]))),128))],32)):(g(),R(S,{key:1,variant:"warning"},{default:p(()=>[l(T,null,{default:p(()=>[ne(K($.$t("webforms::form.no_sections")),1)]),_:1})]),_:1}))]),_:1})]),_:1},8,["class"])],6)}}},kAe={class:"mb-2"},$Ae={class:"mb-3 font-medium text-neutral-700 dark:text-neutral-300"},CAe={__name:"WebFormsCreate",setup(e){const t=wt(),{addWebForm:n}=hh(),{scriptConfig:o}=qe(),a=o("favourite_colors"),{form:r}=Qe({title:null,styles:{primary_color:"#4f46e5",background_color:"#F3F4F6"}});function s(){r.post("/forms").then(i=>{n(i),t.push({name:"web-form-edit",params:{id:i.id}})})}return(i,u)=>{const d=c("IFormInput"),m=c("IFormError"),f=c("IFormGroup"),h=c("IColorSwatch"),y=c("IModal"),b=ze("t");return g(),R(y,{size:"sm","ok-text":i.$t("core::app.create"),"ok-disabled":v(r).busy,title:i.$t("webforms::form.create"),visible:"",static:"",form:"",onSubmit:s,onHidden:i.$router.back,onShown:u[3]||(u[3]=()=>i.$refs.inputTitleRef.focus())},{default:p(()=>[l(f,{"label-for":"title",description:i.$t("webforms::form.title_visibility_info"),label:i.$t("webforms::form.title"),required:""},{default:p(()=>[l(d,{id:"title",ref:"inputTitleRef",modelValue:v(r).title,"onUpdate:modelValue":u[0]||(u[0]=I=>v(r).title=I)},null,8,["modelValue"]),l(m,{error:v(r).getError("title")},null,8,["error"])]),_:1},8,["description","label"]),_("div",kAe,[te(_("h5",$Ae,null,512),[[b,"webforms::form.style.style"]]),l(f,{label:i.$t("webforms::form.style.primary_color")},{default:p(()=>[l(h,{modelValue:v(r).styles.primary_color,"onUpdate:modelValue":u[1]||(u[1]=I=>v(r).styles.primary_color=I),swatches:v(a)},null,8,["modelValue","swatches"]),l(m,{error:v(r).getError("styles.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(f,{label:i.$t("webforms::form.style.background_color")},{default:p(()=>[l(h,{modelValue:v(r).styles.background_color,"onUpdate:modelValue":u[2]||(u[2]=I=>v(r).styles.background_color=I),swatches:v(a)},null,8,["modelValue","swatches"]),l(m,{error:v(r).getError("styles.background_color")},null,8,["error"])]),_:1},8,["label"])])]),_:1},8,["ok-text","ok-disabled","title","onHidden"])}}};function j5(e,t,n){const o=V(null),a=V(null),r=V(!1),s=P(()=>o.value&&o.value.isRequired&&o.value.primary),i=P(()=>Vt(Fn(bt(t),f=>(f.disabled=m(f),f)),["disabled","order"],["desc","asc"]));function u(){return So(25)}function d(f){f?(a.value=f.label,r.value=f.isRequired):(a.value="",r.value=!1)}function m(f){return!ft(bt(n),{attribute:f.attribute,resourceName:bt(e)})}return{field:o,fieldLabel:a,isRequired:r,fieldMustBeRequired:s,availableFields:i,generateRequestAttribute:u,handleFieldChanged:d,isFieldAlreadySelected:m}}const SAe=["innerHTML"],TAe={class:"text-right"},EAe={class:"flex items-center justify-between"},FAe={class:"space-x-2"},AAe={__name:"FieldSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},companiesFields:{required:!0},contactsFields:{required:!0},dealsFields:{required:!0},availableResources:{required:!0}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),r=V(!1),s=V(n.section.resourceName),i=P(()=>n[s.value+"Fields"]),u=ft(i.value,{attribute:n.section.attribute}),{field:d,availableFields:m,handleFieldChanged:f,fieldLabel:h,isRequired:y,fieldMustBeRequired:b,generateRequestAttribute:I}=j5(s,i,xt(n.form,"sections")),w=P(()=>!r.value&&u),k=P(()=>ft(n.availableResources,{id:n.section.resourceName}).label),x=P(()=>u?k.value+" | "+u.label:a("core::fields.no_longer_available")),$=P(()=>h.value===null||h.value==""||d.value==null);function C(){let S={isRequired:y.value,label:h.value,resourceName:s.value,attribute:d.value.attribute};(!u||s.value!=n.section.resourceName||d.value.attribute!=u.attribute)&&(S.requestAttribute=I()),o("updateSectionRequested",S),r.value=!1}function F(){d.value=u,s.value=n.section.resourceName,h.value=n.section.label,y.value=n.section.isRequired,r.value=!0}function T(){o("removeSectionRequested")}return(S,A)=>{const E=c("ITextSmall"),B=c("ICardHeading"),M=c("IButton"),N=c("ICardActions"),G=c("ICardHeader"),U=c("ITextBlockDark"),j=c("ICustomSelect"),O=c("IFormGroup"),H=c("Editor"),W=c("IFormCheckbox"),X=c("IFormCheckboxLabel"),q=c("IFormCheckboxField"),L=c("ICardBody"),ee=c("ICard");return g(),R(ee,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-danger-500":!v(u),"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value&&v(u)}]])},{default:p(()=>[l(G,null,{default:p(()=>[l(B,{class:"truncate text-sm/6"},{default:p(()=>[ne(K(x.value)+" ",1),v(u)&&!e.section.isRequired?(g(),R(E,{key:0,class:"inline font-normal"},{default:p(()=>[ne(K(S.$t("core::fields.optional")),1)]),_:1})):Z("",!0)]),_:1}),l(N,null,{default:p(()=>[l(M,{icon:"PencilAlt",class:be([w.value?"opacity-100 md:opacity-0 md:group-hover:opacity-100":"opacity-0"]),basic:"",small:"",onClick:F},null,8,["class"]),l(M,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:T})]),_:1})]),_:1}),l(L,null,{default:p(()=>[te(l(U,null,{default:p(()=>[_("p",{innerHTML:e.section.label},null,8,SAe)]),_:1},512),[[fe,!r.value]]),r.value?(g(),D(de,{key:0},[l(O,{"label-for":"resourceName",label:S.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(j,{modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=ce=>s.value=ce),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:ce=>ce.id,onOptionSelected:A[1]||(A[1]=ce=>d.value=null)},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(O,{"label-for":"field",label:S.$t("core::fields.field")},{default:p(()=>[l(j,{modelValue:v(d),"onUpdate:modelValue":A[2]||(A[2]=ce=>hn(d)?d.value=ce:null),label:"label","field-id":"field",clearable:!1,selectable:ce=>ce.disabled,options:v(m),onOptionSelected:v(f)},null,8,["modelValue","selectable","options","onOptionSelected"])]),_:1},8,["label"]),te(l(O,{label:S.$t("core::fields.label")},{default:p(()=>[l(H,{modelValue:v(h),"onUpdate:modelValue":A[3]||(A[3]=ce=>hn(h)?h.value=ce:null),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),[[fe,v(d)!==null]]),_("div",TAe,[_("div",EAe,[te(l(q,null,{default:p(()=>[l(W,{checked:v(y),"onUpdate:checked":A[4]||(A[4]=ce=>hn(y)?y.value=ce:null),disabled:v(b)},null,8,["checked","disabled"]),l(X,{text:S.$t("core::fields.is_required")},null,8,["text"])]),_:1},512),[[fe,v(d)!==null]]),_("div",FAe,[l(M,{variant:"secondary",text:S.$t("core::app.cancel"),onClick:A[5]||(A[5]=ce=>r.value=!1)},null,8,["text"]),l(M,{variant:"primary",disabled:$.value,text:S.$t("core::app.save"),onClick:C},null,8,["disabled","text"])])])])],64)):Z("",!0)]),_:1})]),_:1},8,["class"])}}},RAe=["innerHTML"],DAe={class:"space-x-2 text-right"},OAe={__name:"FileSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},availableResources:{required:!0}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),r=V(!1),s=V(null),i=V(!1),u=V(null),d=V(!1),m=P(()=>!r.value),f=P(()=>ft(n.availableResources,{id:n.section.resourceName}).label),h=P(()=>f.value+" | "+(n.section.multiple?a("webforms::form.sections.file.files"):a("webforms::form.sections.file.file"))+(n.section.isRequired?"":" "+a("core::fields.optional"))),y=P(()=>s.value===null||s.value=="");function b(){o("updateSectionRequested",{resourceName:u.value,label:s.value,isRequired:i.value,multiple:d.value}),r.value=!1}function I(){o("removeSectionRequested")}function w(){u.value=n.section.resourceName,s.value=n.section.label,i.value=n.section.isRequired,d.value=n.section.multiple,r.value=!0}return(k,x)=>{const $=c("ICardHeading"),C=c("IButton"),F=c("ICardActions"),T=c("ICardHeader"),S=c("ITextBlockDark"),A=c("ICustomSelect"),E=c("IFormGroup"),B=c("Editor"),M=c("IFormCheckbox"),N=c("IFormCheckboxLabel"),G=c("IFormCheckboxField"),U=c("ICardBody"),j=c("ICard");return g(),R(j,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value}]])},{default:p(()=>[l(T,null,{default:p(()=>[l($,{class:"text-sm/6",text:h.value},null,8,["text"]),l(F,null,{default:p(()=>[l(C,{icon:"PencilAlt",class:be([m.value?"opacity-100 md:opacity-0 md:group-hover:opacity-100":"opacity-0"]),basic:"",small:"",onClick:w},null,8,["class"]),l(C,{class:"opacity-100 md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:I})]),_:1})]),_:1}),l(U,null,{default:p(()=>[te(l(S,null,{default:p(()=>[_("p",{innerHTML:e.section.label},null,8,RAe)]),_:1},512),[[fe,!r.value]]),r.value?(g(),D(de,{key:0},[l(E,{"label-for":"resourceName",label:k.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(A,{modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=O=>u.value=O),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:O=>O.id},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),l(E,{label:k.$t("core::fields.label")},{default:p(()=>[l(B,{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=O=>s.value=O),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),l(E,null,{default:p(()=>[l(G,null,{default:p(()=>[l(M,{checked:i.value,"onUpdate:checked":x[2]||(x[2]=O=>i.value=O)},null,8,["checked"]),l(N,{text:k.$t("core::fields.is_required")},null,8,["text"])]),_:1}),l(G,null,{default:p(()=>[l(M,{checked:d.value,"onUpdate:checked":x[3]||(x[3]=O=>d.value=O)},null,8,["checked"]),l(N,{text:k.$t("webforms::form.sections.file.multiple")},null,8,["text"])]),_:1})]),_:1}),_("div",DAe,[l(C,{variant:"secondary",text:k.$t("core::app.cancel"),onClick:x[4]||(x[4]=O=>r.value=!1)},null,8,["text"]),l(C,{variant:"primary",disabled:y.value,text:k.$t("core::app.save"),onClick:b},null,8,["disabled","text"])])],64)):Z("",!0)]),_:1})]),_:1},8,["class"])}}},PAe=["innerHTML"],MAe={class:"space-x-2 text-right"},BAe=Object.assign({inheritAttrs:!1},{__name:"IntroductionSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested"],setup(e,{emit:t}){const n=e,o=t,a=V(!1),r=V(null),s=V(null);function i(){o("updateSectionRequested",{title:r.value,message:s.value}),a.value=!1}function u(){r.value=n.section.title,s.value=n.section.message,a.value=!0}return(d,m)=>{const f=c("ICardHeading"),h=c("IButton"),y=c("ICardActions"),b=c("ICardHeader"),I=c("ITextDisplay"),w=c("EditorText"),k=c("IFormInput"),x=c("IFormGroup"),$=c("Editor"),C=c("ICardBody"),F=c("ICard");return g(),R(F,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":a.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!a.value}]])},{default:p(()=>[l(b,null,{default:p(()=>[l(f,{class:"text-sm/6",text:d.$t("webforms::form.sections.introduction.introduction")},null,8,["text"]),l(y,null,{default:p(()=>[l(h,{icon:"PencilAlt",class:be([a.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:u},null,8,["class"])]),_:1})]),_:1}),l(C,null,{default:p(()=>[te(_("div",null,[l(I,{text:e.section.title},null,8,["text"]),l(w,null,{default:p(()=>[_("div",{innerHTML:e.section.message},null,8,PAe)]),_:1})],512),[[fe,!a.value]]),a.value?(g(),D(de,{key:0},[l(x,{"label-for":"title",label:d.$t("webforms::form.sections.introduction.title")},{default:p(()=>[l(k,{id:"title",modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=T=>r.value=T)},null,8,["modelValue"])]),_:1},8,["label"]),l(x,{label:d.$t("webforms::form.sections.introduction.message")},{default:p(()=>[l($,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=T=>s.value=T),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",MAe,[l(h,{variant:"secondary",text:d.$t("core::app.cancel"),onClick:m[2]||(m[2]=T=>a.value=!1)},null,8,["text"]),l(h,{variant:"primary",text:d.$t("core::app.save"),onClick:i},null,8,["text"])])],64)):Z("",!0)]),_:1})]),_:1},8,["class"])}}}),NAe=["innerHTML"],VAe={class:"space-x-2 text-right"},LAe=Object.assign({inheritAttrs:!1},{__name:"MessageSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,a=V(!1),r=V(null);function s(){o("updateSectionRequested",{message:r.value}),a.value=!1}function i(){o("removeSectionRequested")}function u(){r.value=n.section.message,a.value=!0}return(d,m)=>{const f=c("ICardHeading"),h=c("IButton"),y=c("ICardActions"),b=c("ICardHeader"),I=c("EditorText"),w=c("Editor"),k=c("IFormGroup"),x=c("ICardBody"),$=c("ICard");return g(),R($,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":a.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!a.value}]])},{default:p(()=>[l(b,null,{default:p(()=>[l(f,{class:"text-sm/6",text:d.$t("webforms::form.sections.message.message")},null,8,["text"]),l(y,null,{default:p(()=>[l(h,{icon:"PencilAlt",class:be([a.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:u},null,8,["class"]),l(h,{class:"block md:opacity-0 md:group-hover:opacity-100",icon:"Trash",basic:"",small:"",onClick:i})]),_:1})]),_:1}),l(x,null,{default:p(()=>[te(l(I,null,{default:p(()=>[_("div",{innerHTML:e.section.message},null,8,NAe)]),_:1},512),[[fe,!a.value]]),a.value?(g(),D(de,{key:0},[l(k,{label:d.$t("webforms::form.sections.message.message")},{default:p(()=>[l(w,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=C=>r.value=C),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),_("div",VAe,[l(h,{variant:"secondary",text:d.$t("core::app.cancel"),onClick:m[1]||(m[1]=C=>a.value=!1)},null,8,["text"]),l(h,{variant:"primary",text:d.$t("core::app.save"),onClick:s},null,8,["text"])])],64)):Z("",!0)]),_:1})]),_:1},8,["class"])}}}),qAe={key:1},UAe={class:"space-x-2 text-right"},jAe=Object.assign({inheritAttrs:!1},{__name:"NewSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object},companiesFields:{required:!0},contactsFields:{required:!0},dealsFields:{required:!0},availableResources:{required:!0}},emits:["createSectionRequested","removeSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{t:a}=Pe(),r=V("field"),s=V("contacts"),i=V(!1),u=V(null),d=P(()=>n[s.value+"Fields"]),{field:m,availableFields:f,handleFieldChanged:h,fieldLabel:y,isRequired:b,fieldMustBeRequired:I,generateRequestAttribute:w}=j5(s,d,xt(n.form,"sections")),k=[{id:"field",label:a("webforms::form.sections.types.input_field")},{id:"message",label:a("webforms::form.sections.types.message")},{id:"file",label:a("webforms::form.sections.types.file")}],x=P(()=>r.value==="field"?y.value===null||y.value==""||m.value==null:r.value==="message"?u.value===null||u.value=="":r.value==="file"?y.value===null||y.value=="":!1);function $(){o("createSectionRequested",{type:"message-section",message:u.value})}function C(){o("createSectionRequested",{type:"field-section",isRequired:b.value,label:y.value,resourceName:s.value,attribute:m.value.attribute,requestAttribute:w()})}function F(){o("createSectionRequested",{type:"file-section",isRequired:b.value,label:y.value,resourceName:s.value,multiple:i.value,requestAttribute:w()})}function T(){r.value==="message"?$():r.value==="file"?F():C()}function S(){o("removeSectionRequested")}return(A,E)=>{const B=c("ICardHeading"),M=c("IButton"),N=c("ICardActions"),G=c("ICardHeader"),U=c("ICustomSelect"),j=c("IFormGroup"),O=c("Editor"),H=c("IFormCheckbox"),W=c("IFormCheckboxLabel"),X=c("IFormCheckboxField"),q=c("ICardBody"),L=c("ICard");return g(),R(L,{class:"border border-primary-400 dark:border-primary-500 [&>[data-slot=header]]:py-3"},{default:p(()=>[l(G,null,{default:p(()=>[l(B,{class:"text-sm/6",text:A.$t("webforms::form.sections.new")},null,8,["text"]),l(N,null,{default:p(()=>[l(M,{icon:"XSolid",basic:"",small:"",onClick:S})]),_:1})]),_:1}),l(q,null,{default:p(()=>[l(j,{"label-for":"section_type",label:A.$t("webforms::form.sections.type")},{default:p(()=>[l(U,{modelValue:r.value,"onUpdate:modelValue":E[0]||(E[0]=ee=>r.value=ee),label:"label","field-id":"section_type",options:k,clearable:!1,reduce:ee=>ee.id,onOptionSelected:E[1]||(E[1]=ee=>(ee.id==="file"&&(y.value="Attachment"),ee.id!=="field"?m.value=null:""))},null,8,["modelValue","reduce"])]),_:1},8,["label"]),r.value==="message"?(g(),R(j,{key:0,label:A.$t("webforms::form.sections.message.message")},{default:p(()=>[l(O,{modelValue:u.value,"onUpdate:modelValue":E[2]||(E[2]=ee=>u.value=ee),"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"])):(g(),D("div",qAe,[l(j,{"label-for":"resourceName",label:A.$t("webforms::form.sections.field.resourceName")},{default:p(()=>[l(U,{modelValue:s.value,"onUpdate:modelValue":E[3]||(E[3]=ee=>s.value=ee),label:"label","field-id":"resourceName",clearable:!1,options:e.availableResources,reduce:ee=>ee.id,onOptionSelected:E[4]||(E[4]=ee=>m.value=null)},null,8,["modelValue","options","reduce"])]),_:1},8,["label"]),r.value==="field"?(g(),R(j,{key:0,"label-for":"field",label:A.$t("core::fields.field")},{default:p(()=>[l(U,{modelValue:v(m),"onUpdate:modelValue":E[5]||(E[5]=ee=>hn(m)?m.value=ee:null),label:"label","field-id":"field",clearable:!1,selectable:ee=>ee.disabled,options:v(f),onOptionSelected:v(h)},null,8,["modelValue","selectable","options","onOptionSelected"])]),_:1},8,["label"])):Z("",!0),te(l(j,{label:A.$t("core::fields.label")},{default:p(()=>[l(O,{modelValue:v(y),"onUpdate:modelValue":E[6]||(E[6]=ee=>hn(y)?y.value=ee:null),"default-tag":"div",config:{toolbar:"bold italic underline link removeformat",quickbars_insert_toolbar:!1,quickbars_selection_toolbar:!1},"with-image":!1,minimal:""},null,8,["modelValue"])]),_:1},8,["label"]),[[fe,v(m)!==null||r.value==="file"]]),l(j,null,{default:p(()=>[te(l(X,null,{default:p(()=>[l(H,{checked:v(b),"onUpdate:checked":E[7]||(E[7]=ee=>hn(b)?b.value=ee:null),disabled:v(I)},null,8,["checked","disabled"]),l(W,{text:A.$t("core::fields.is_required")},null,8,["text"])]),_:1},512),[[fe,v(m)!==null||r.value==="file"]]),te(l(X,null,{default:p(()=>[l(H,{checked:i.value,"onUpdate:checked":E[8]||(E[8]=ee=>i.value=ee)},null,8,["checked"]),l(W,{text:A.$t("webforms::form.sections.file.multiple")},null,8,["text"])]),_:1},512),[[fe,r.value==="file"]])]),_:1})])),_("div",UAe,[l(M,{variant:"secondary",text:A.$t("core::app.cancel"),onClick:S},null,8,["text"]),l(M,{variant:"primary",disabled:x.value,text:A.$t("core::app.save"),onClick:T},null,8,["disabled","text"])])]),_:1})]),_:1})}}}),zAe={key:0},HAe={class:"space-x-2 text-right"},WAe=Object.assign({inheritAttrs:!1},{__name:"SubmitButtonSection",props:{index:{type:Number},form:{type:Object,required:!0},section:{required:!0,type:Object}},emits:["updateSectionRequested"],setup(e,{emit:t}){const n=e,o=t,{scriptConfig:a}=qe(),r=V(!1),s=V(null),i=V(!1),u=V(!1),d=V(a("privacyPolicyUrl"));function m(){o("updateSectionRequested",{text:s.value,spamProtected:i.value,privacyPolicyAcceptIsRequired:u.value,privacyPolicyUrl:d.value}),r.value=!1}function f(){s.value=n.section.text,i.value=n.section.spamProtected,u.value=n.section.privacyPolicyAcceptIsRequired,d.value=n.section.privacyPolicyUrl,r.value=!0}return(h,y)=>{const b=c("ICardHeading"),I=c("IButton"),w=c("ICardActions"),k=c("ICardHeader"),x=c("ITextDark"),$=c("IFormInput"),C=c("IFormGroup"),F=c("IFormCheckbox"),T=c("IFormCheckboxLabel"),S=c("IFormCheckboxField"),A=c("ICardBody"),E=c("ICard");return g(),R(E,{class:be(["group",["[&>[data-slot=header]]:py-3",{"border border-primary-400 dark:border-primary-500":r.value,"border transition duration-75 hover:border-primary-400 dark:hover:border-primary-500":!r.value}]])},{default:p(()=>[l(k,null,{default:p(()=>[l(b,{class:"text-sm/6",text:h.$t("webforms::form.sections.submit.button")},null,8,["text"]),l(w,null,{default:p(()=>[l(I,{icon:"PencilAlt",class:be([r.value?"opacity-0":"opacity-100 md:opacity-0 md:group-hover:opacity-100"]),basic:"",small:"",onClick:f},null,8,["class"])]),_:1})]),_:1}),l(A,null,{default:p(()=>[te(l(x,{text:e.section.text},null,8,["text"]),[[fe,!r.value]]),r.value?(g(),D("div",zAe,[l(C,{"label-for":"text",label:h.$t("webforms::form.sections.submit.button_text")},{default:p(()=>[l($,{id:"text",modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=B=>s.value=B)},null,8,["modelValue"])]),_:1},8,["label"]),te(l(C,null,{default:p(()=>[l(S,null,{default:p(()=>[l(F,{checked:i.value,"onUpdate:checked":y[1]||(y[1]=B=>i.value=B)},null,8,["checked"]),l(T,{text:h.$t("webforms::form.sections.submit.spam_protected")},null,8,["text"])]),_:1})]),_:1},512),[[fe,h.$scriptConfig("reCaptcha.configured")]]),l(C,null,{default:p(()=>[l(S,null,{default:p(()=>[l(F,{checked:u.value,"onUpdate:checked":y[2]||(y[2]=B=>u.value=B)},null,8,["checked"]),l(T,{text:h.$t("webforms::form.sections.submit.require_privacy_policy")},null,8,["text"])]),_:1})]),_:1}),te(l(C,{"label-for":"privacy_policy_url",label:h.$t("webforms::form.sections.submit.privacy_policy_url")},{default:p(()=>[l($,{id:"privacy_policy_url",modelValue:d.value,"onUpdate:modelValue":y[3]||(y[3]=B=>d.value=B)},null,8,["modelValue"])]),_:1},8,["label"]),[[fe,u.value]]),_("div",HAe,[l(I,{variant:"secondary",text:h.$t("core::app.cancel"),onClick:y[4]||(y[4]=B=>r.value=!1)},null,8,["text"]),l(I,{variant:"primary",text:h.$t("core::app.save"),onClick:m},null,8,["text"])])])):Z("",!0)]),_:1})]),_:1},8,["class"])}}}),GAe={class:"select-all rounded-lg border border-neutral-200 bg-neutral-100 px-3 py-1.5 text-neutral-900 dark:border-neutral-500/30 dark:bg-neutral-800 dark:text-neutral-200"},KAe={class:"mt-3 select-all rounded-lg border border-neutral-200 bg-neutral-100 px-2 py-1.5 text-neutral-900 dark:border-neutral-500/30 dark:bg-neutral-800 dark:text-neutral-200"},ZAe={__name:"WebFormsEditEmbed",props:["form"],setup(e){const t=e,n=P(()=>`<iframe src="${t.form.public_url}?e=true" frameborder="0" width="700" height="500" sandbox="allow-top-navigation allow-scripts allow-forms allow-same-origin allow-popups allow-popups-to-escape-sandbox"></iframe>`);return(o,a)=>{const r=c("IButtonCopy"),s=c("ITextDisplay"),i=c("ITextBlock"),u=c("IText"),d=ze("i-tooltip");return g(),D("div",null,[l(s,{class:"mb-3 inline-flex items-center"},{default:p(()=>[a[0]||(a[0]=ne(" Share via link ")),te(l(r,{class:"ml-3",text:e.form.public_url,"success-message":o.$t("core::app.copied")},null,8,["text","success-message"]),[[d,o.$t("core::app.copy")]])]),_:1}),_("div",GAe,K(e.form.public_url),1),l(s,{class:"mb-3 mt-8"},{default:p(()=>a[1]||(a[1]=[ne(" Embed the form on your Website ")])),_:1}),l(i,null,{default:p(()=>a[2]||(a[2]=[_("ul",{class:"ml-4 list-disc leading-7"},[_("li",null,"Copy the code snippet below"),_("li",null," Paste the code right where you want the form to appear in your template or CMS editor ")],-1)])),_:1}),l(u,{class:"mb-2 mt-4"},{default:p(()=>a[3]||(a[3]=[_("em",{class:"font-italic"},[ne("* When entering the snippet to your CMS, make sure you are in "),_("span",{class:"font-medium"},'"editing mode"'),ne(". ")],-1)])),_:1}),l(u,{class:"mb-2 mt-4"},{default:p(()=>a[4]||(a[4]=[_("em",{class:"font-italic"},[ne(" * You must place the iframe snippet on a website that uses the same protocol like your installation, for example, if the current installation uses "),_("span",{class:"font-medium"},"https://"),ne(" URL protocol, you will need to add the iframe in a website that uses "),_("span",{class:"font-medium"},"https://"),ne(" URL protocol, "),_("span",{class:"font-medium"}," adding https URL iframe on a non-https url, will prevent the form from loading. ")],-1)])),_:1}),l(s,{class:"mb-3 mt-8"},{default:p(()=>a[5]||(a[5]=[ne(" Snippet code ")])),_:1}),_("div",KAe,K(n.value),1)])}}},YAe={class:"grid max-w-lg grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4"},XAe={class:"flex flex-1"},QAe={class:"flex flex-col items-center rounded-md bg-white px-3 py-2"},JAe={__name:"WebFormsEditLogoType",props:pt({modelValue:String,backgroundColor:String,primaryColor:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Ht(e,"modelValue"),{t:n}=Pe(),o=[{id:"form_no_logo",title:n("core::app.no"),value:null},{id:"form_logo_light",value:"light",title:n("core::app.logo.light")},{id:"form_logo_dark",value:"dark",title:n("core::app.logo.dark")}];return(a,r)=>{const s=c("Icon");return g(),R(v($s),{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=i=>t.value=i)},{default:p(()=>[l(v(vr),{class:"sr-only"},{default:p(()=>r[1]||(r[1]=[ne("Select web form logo type")])),_:1}),_("div",YAe,[(g(),D(de,null,Ie(o,i=>l(v(Td),{key:i.id,as:"template",value:i.value},{default:p(({checked:u,active:d})=>[_("div",{class:be([u?"border-transparent":"border-neutral-300 dark:border-neutral-500/30",d?"border-primary-600 ring-2 ring-primary-600":"","relative flex cursor-pointer flex-col rounded-lg border bg-white p-4 shadow-sm focus:outline-none dark:bg-neutral-500/10"])},[_("span",XAe,[l(v(vr),{as:"span",class:"block self-start truncate text-base font-medium text-neutral-900 dark:text-white sm:text-sm"},{default:p(()=>[ne(K(i.title),1)]),_:2},1024),l(s,{icon:"CheckCircle",class:be([u?"":"invisible","ml-auto size-5 text-primary-600"])},null,8,["class"])]),l(v(gi),{class:"mt-auto"},{default:p(()=>[_("div",{class:"mt-2 h-[130px] w-full overflow-hidden p-3",style:Nt({backgroundColor:e.backgroundColor})},[i.value==="dark"?(g(),R(s,{key:0,icon:"RocketLaunch",class:"mx-auto mb-2 size-5"})):i.value==="light"?(g(),R(s,{key:1,icon:"RocketLaunch",class:"mx-auto mb-2 size-5 text-white"})):Z("",!0),_("div",QAe,[_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),_("div",{class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4),i.value===null?(g(),D("div",{key:0,class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4)):Z("",!0),i.value===null?(g(),D("div",{key:1,class:"mt-1 h-2 w-full rounded-sm border bg-neutral-50",style:Nt({borderColor:e.primaryColor})},null,4)):Z("",!0),_("div",{class:"mt-3 h-3 w-full rounded",style:Nt({backgroundColor:e.primaryColor})},null,4)])],4)]),_:2},1024),_("span",{"aria-hidden":"true",class:be([d?"border":"border-2",u?"border-primary-600":"border-transparent","pointer-events-none absolute -inset-px rounded-lg"])},null,2)],2)]),_:2},1032,["value"])),64))])]),_:1},8,["modelValue"])}}},eRe={class:"text-right"},tRe={class:"flex w-full sm:mr-16"},nRe={class:"w-full min-w-0"},oRe={class:"mr-3 flex sm:mr-6"},aRe={class:"overflow-auto sm:h-[calc(100vh-(var(--navbar-height)+220px))]"},rRe={class:"m-auto max-w-full"},lRe={key:0,class:"group relative flex flex-col items-center justify-center"},sRe={class:"absolute"},iRe={class:"mb-3"},uRe={class:"flex space-x-2"},cRe={class:"relative flex grow text-neutral-500 focus-within:text-neutral-600 dark:text-neutral-300 dark:focus-within:text-neutral-100"},dRe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},mRe={__name:"WebFormsEdit",setup(e){const t={"field-section":AAe,"introduction-section":BAe,"submit-button-section":WAe,"file-section":OAe,"new-section":jAe,"message-section":LAe},n=Ct(),{t:o}=Pe(),{scriptConfig:a,users:r,currentUser:s,locales:i}=qe(),{fetchWebForm:u,setWebForm:d,findWebForm:m}=hh(),{orderedPipelines:f}=Sa();yo(P(()=>{var ve;return(ve=m(n.params.id))==null?void 0:ve.title}));const h=a("favourite_colors"),y=V({email:!0,phones:!0}),b=V([]),I=V([]),w=V([]),k=V(null),x=V(null),$=V(!1),C=V(!1),{form:F}=Qe({notifications:[],sections:[],styles:[],submit_data:[]}),T=[{id:"contacts",label:o("contacts::contact.contact")},{id:"companies",label:o("contacts::company.company")},{id:"deals",label:o("deals::deal.deal")}],S=P(()=>F.notifications.length),A=P(()=>F.notifications.filter(Ut).length>0),E=P(()=>F.sections.length),B=P(()=>ft(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"})!==void 0),M=P(()=>ft(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"})!==void 0),N=P(()=>B.value?ft(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"}).isRequired===!0:!1),G=P(()=>M.value?ft(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"}).isRequired===!0:!1),U=P(()=>!B.value&&!M.value),j=P(()=>!N.value&&!G.value);function O(ve,ie){q(ve,ie,!1),U.value||j.value?re():ae()}function H(){const ve=Mt(F.sections,{type:"new-section"});ve!==-1&&X(ve)}function W(ve){C.value=!0,F.sections.splice(ve+1,0,{type:"new-section",label:o("webforms::form.sections.new")})}async function X(ve){F.sections[ve].type==="new-section"?(C.value=!1,F.sections.splice(ve,1)):(await Innoclapps.confirm(),F.sections.splice(ve,1),ee())}function q(ve,ie,me=!0){F.sections[ve]=Object.assign({},F.sections[ve],ie),me&&ae(!0)}function L(ve,ie){F.sections.splice(ve+1,0,ie),ee(),H()}function ee(){!U.value&&!j.value&&ae(!0)}function ce(){E.value===0&&(F.sections.push({type:"introduction-section",message:"",title:""}),F.sections.push({type:"submit-button-section",text:o("webforms::form.sections.submit.default_text")}))}function ue(ve){F.notifications.splice(ve,1)}function oe(){F.notifications.push(""),F.notifications.length===1&&(F.notifications[0]=s.value.email)}function re(){if(U.value){Innoclapps.dialog().show("requiresFieldsModal");return}else if(j.value){Innoclapps.dialog().show("nonOptionalFieldRequiredModal");return}ae()}function Y(){B.value&&y.value.email&&q(Mt(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"email"}),{isRequired:!0},!1),M.value&&y.value.phones&&q(Mt(F.sections,{resourceName:Innoclapps.resourceName("contacts"),attribute:"phones"}),{isRequired:!0},!1),ae(),Innoclapps.dialog().hide("nonOptionalFieldRequiredModal")}function ae(ve=!1){F.submit_data.pipeline_id=k.value?k.value.id:null,F.submit_data.stage_id=x.value?x.value.id:null,H(),F.put(`/forms/${n.params.id}`).then(ie=>{d(ie.id,ie),ve||Innoclapps.success(o("webforms::form.updated"))}).catch(ie=>(ie.isValidationError()&&Innoclapps.error(o("core::app.form_validation_failed_with_sections"),3e3),Promise.reject(ie)))}function se(ve){return ve.readonly||En(ve,"attributes.readonly")}function xe(ve,ie){return ve.filter(me=>ie.indexOf(me.attribute)===-1||se(me))}async function le(){let{data:ve}=await Innoclapps.request("/fields/settings/bulk/create?intent=create",{params:{groups:["contacts","companies","deals"]}});b.value=xe(ve.contacts,["user_id","source_id","tags","deals","companies"]),w.value=xe(ve.deals,["user_id","pipeline_id","stage_id","tags","contacts","companies"]),I.value=xe(ve.companies,["user_id","parent_company_id","source_id","tags","contacts","deals"])}function ge(){le().finally(()=>{u(n.params.id).then(ve=>{F.clear().set(ve),k.value=f.value.filter(ie=>ie.id==ve.submit_data.pipeline_id)[0],x.value=k.value.stages.filter(ie=>ie.id==ve.submit_data.stage_id)[0],ce(),$.value=!0})})}return ge(),(ve,ie)=>{const me=c("ITextDisplay"),Ce=c("IText"),ke=c("IButton"),Be=c("IModal"),Fe=c("IFormCheckbox"),he=c("IFormCheckboxLabel"),_e=c("IFormCheckboxField"),Te=c("IActionMessage"),Ne=c("IFormSwitchLabel"),lt=c("IFormSwitch"),Ke=c("IFormSwitchField"),$e=c("ILink"),De=c("ICardActions"),at=c("ICardHeader"),dt=c("ITab"),we=c("ITabList"),Ge=c("ITabPanel"),yt=c("IFormLabel"),rn=c("IFormRadio"),Oe=c("IFormRadioLabel"),Ze=c("IFormRadioField"),Et=c("IFormError"),Wt=c("IFormGroup"),Qn=c("IFormInput"),wo=c("Editor"),ht=c("ICustomSelect"),Rn=c("Icon"),On=c("ICardBody"),ca=c("IColorSwatch"),da=c("ITabPanels"),et=c("ITabGroup"),vt=c("ICard"),Sn=c("IOverlay");return g(),D("div",null,[l(Sn,{show:!$.value},{default:p(()=>[l(Be,{id:"requiresFieldsModal",size:"xs","hide-header":""},{"modal-footer":p(({cancel:mt})=>[_("div",eRe,[l(ke,{variant:"secondary",text:ve.$t("core::app.hide"),onClick:mt},null,8,["text","onClick"])])]),default:p(()=>[l(me,{class:"mb-2"},{default:p(()=>[ne(K(ve.$t("webforms::form.fields_action_required")),1)]),_:1}),l(Ce,null,{default:p(()=>[ne(K(ve.$t("webforms::form.required_fields_needed")),1)]),_:1})]),_:1}),l(Be,{id:"nonOptionalFieldRequiredModal",size:"xs","ok-text":ve.$t("core::app.continue"),"ok-disabled":B.value&&!y.value.email&&M.value&&!y.value.phones,"hide-header":"",onOk:Y},{default:p(()=>[l(me,{class:"mb-2"},{default:p(()=>[ne(K(ve.$t("webforms::form.fields_action_required")),1)]),_:1}),l(Ce,{class:"mb-3"},{default:p(()=>[ne(K(ve.$t("webforms::form.must_requires_fields")),1)]),_:1}),te(l(_e,null,{default:p(()=>[l(Fe,{checked:y.value.email,"onUpdate:checked":ie[0]||(ie[0]=mt=>y.value.email=mt)},null,8,["checked"]),l(he,{text:ve.$t("contacts::fields.contacts.email")},null,8,["text"])]),_:1},512),[[fe,!N.value&&B.value]]),te(l(_e,null,{default:p(()=>[l(Fe,{checked:y.value.phones,"onUpdate:checked":ie[1]||(ie[1]=mt=>y.value.phones=mt)},null,8,["checked"]),l(he,{text:ve.$t("contacts::fields.contacts.phone")},null,8,["text"])]),_:1},512),[[fe,!G.value&&M.value]])]),_:1},8,["ok-text","ok-disabled"]),l(vt,{as:"form",novalidate:"true",onSubmit:ot(re,["prevent"])},{default:p(()=>[l(at,null,{default:p(()=>[_("div",tRe,[l(ke,{class:"-ml-5 mr-1 shrink-0 sm:-ml-0 sm:mr-2",icon:"ChevronLeftSolid",to:{name:"web-forms-index"},basic:""}),_("div",nRe,[te(_("input",{id:"name","onUpdate:modelValue":ie[2]||(ie[2]=mt=>v(F).title=mt),type:"text",name:"name",class:be(["block w-full border-0 border-b-2 bg-neutral-50 text-base/6 font-medium focus:bg-neutral-100 focus:ring-0 dark:bg-neutral-500/10 dark:text-white dark:focus:bg-neutral-800 sm:text-sm/6",(!v(F).title||v(F).getError("title"))&&$.value?"border-danger-500 focus:border-danger-600":"border-transparent focus:border-primary-500"])},null,2),[[pa,v(F).title]])])]),l(De,{class:"w-full justify-end sm:w-auto"},{default:p(()=>[_("div",oRe,[l(Te,{class:"mr-2",show:v(F).recentlySuccessful,message:ve.$t("core::app.saved")},null,8,["show","message"]),l(Ke,null,{default:p(()=>[l(Ne,{text:ve.$t("webforms::form.active")},null,8,["text"]),l(lt,{modelValue:v(F).status,"onUpdate:modelValue":ie[3]||(ie[3]=mt=>v(F).status=mt),value:"active","unchecked-value":"inactive",disabled:C.value||v(F).busy},null,8,["modelValue","disabled"])]),_:1})]),l($e,{class:"mr-2",text:ve.$t("core::app.preview"),href:v(F).public_url},null,8,["text","href"]),l(ke,{variant:"primary",loading:v(F).busy,disabled:v(F).busy||C.value,text:ve.$t("core::app.save"),onClick:re},null,8,["loading","disabled","text"])]),_:1})]),_:1}),_("div",aRe,[_("div",rRe,[l(et,null,{default:p(()=>[l(we,{class:"sticky top-0 z-10 bg-white dark:bg-neutral-900",centered:""},{default:p(()=>[l(dt,{title:ve.$t("webforms::form.editor")},null,8,["title"]),l(dt,{title:ve.$t("webforms::form.submit_options")},null,8,["title"]),l(dt,{title:ve.$t("webforms::form.style.style")},null,8,["title"]),l(dt,{title:ve.$t("webforms::form.sections.embed.embed")},null,8,["title"])]),_:1}),l(da,{class:"mt-4 sm:mt-0"},{default:p(()=>[l(Ge,{class:"px-2 sm:px-0"},{default:p(()=>[(g(!0),D(de,null,Ie(v(F).sections,(mt,Ln)=>(g(),D("div",{key:Ln+mt.type+mt.attribute,class:"m-auto max-w-sm"},[(g(),R(_t(t[mt.type]),{form:v(F),"companies-fields":I.value,"contacts-fields":b.value,"deals-fields":w.value,index:Ln,"available-resources":T,section:mt,onRemoveSectionRequested:so=>X(Ln),onUpdateSectionRequested:so=>O(Ln,so),onCreateSectionRequested:so=>L(Ln,so)},null,40,["form","companies-fields","contacts-fields","deals-fields","index","section","onRemoveSectionRequested","onUpdateSectionRequested","onCreateSectionRequested"])),E.value-1!=Ln?(g(),D("div",lRe,[te(_("div",sRe,[l(ke,{class:"transition-opacity delay-75 md:opacity-0 md:group-hover:opacity-100",icon:"PlusSolid",variant:"primary",soft:"",onClick:so=>W(Ln)},null,8,["onClick"])],512),[[fe,!C.value]]),ie[18]||(ie[18]=_("svg",{height:"56",width:"360"},[_("line",{x1:"180",y1:"0",x2:"180",y2:"56",class:"stroke-current stroke-1 text-neutral-900 dark:text-neutral-700"}),ne(" Sorry, your browser does not support inline SVG. ")],-1))])):Z("",!0)]))),128))]),_:1}),l(Ge,null,{default:p(()=>[l(On,null,{default:p(()=>[l(me,{class:"mb-3",text:ve.$t("webforms::form.success_page.success_page")},null,8,["text"]),l(Wt,null,{default:p(()=>[l(yt,{as:"p",class:"mb-1"},{default:p(()=>[ne(K(ve.$t("webforms::form.success_page.success_page_info")),1)]),_:1}),l(Ze,null,{default:p(()=>[l(rn,{modelValue:v(F).submit_data.action,"onUpdate:modelValue":ie[4]||(ie[4]=mt=>v(F).submit_data.action=mt),value:"message",name:"submit-action"},null,8,["modelValue"]),l(Oe,{text:ve.$t("webforms::form.success_page.thank_you_message")},null,8,["text"])]),_:1}),l(Ze,null,{default:p(()=>[l(rn,{modelValue:v(F).submit_data.action,"onUpdate:modelValue":ie[5]||(ie[5]=mt=>v(F).submit_data.action=mt),value:"redirect",name:"submit-action"},null,8,["modelValue"]),l(Oe,{text:ve.$t("webforms::form.success_page.redirect")},null,8,["text"])]),_:1}),l(Et,{error:v(F).getError("submit_data.action")},null,8,["error"])]),_:1}),_("div",iRe,[te(_("div",null,[l(Wt,{"label-for":"success_title",label:ve.$t("webforms::form.success_page.title"),required:""},{default:p(()=>[l(Qn,{modelValue:v(F).submit_data.success_title,"onUpdate:modelValue":ie[6]||(ie[6]=mt=>v(F).submit_data.success_title=mt),placeholder:ve.$t("webforms::form.success_page.title_placeholder")},null,8,["modelValue","placeholder"]),l(Et,{error:v(F).getError("submit_data.success_title")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{label:ve.$t("webforms::form.success_page.message"),optional:""},{default:p(()=>[l(wo,{modelValue:v(F).submit_data.success_message,"onUpdate:modelValue":ie[7]||(ie[7]=mt=>v(F).submit_data.success_message=mt),"with-image":!1,"absolute-urls":"",minimal:""},null,8,["modelValue"])]),_:1},8,["label"])],512),[[fe,v(F).submit_data.action==="message"]]),te(_("div",null,[l(Wt,{"label-for":"success_redirect_url",label:ve.$t("webforms::form.success_page.redirect_url"),required:""},{default:p(()=>[l(Qn,{modelValue:v(F).submit_data.success_redirect_url,"onUpdate:modelValue":ie[8]||(ie[8]=mt=>v(F).submit_data.success_redirect_url=mt),type:"url",placeholder:ve.$t("webforms::form.success_page.redirect_url_placeholder")},null,8,["modelValue","placeholder"]),l(Et,{error:v(F).getError("submit_data.success_redirect_url")},null,8,["error"])]),_:1},8,["label"])],512),[[fe,v(F).submit_data.action==="redirect"]])]),l(me,{class:"mb-3 mt-8",text:ve.$t("webforms::form.saving_preferences.saving_preferences")},null,8,["text"]),l(Wt,{"label-for":"title_prefix",label:ve.$t("webforms::form.saving_preferences.deal_title_prefix"),description:ve.$t("webforms::form.saving_preferences.deal_title_prefix_info"),optional:""},{default:p(()=>[l(Qn,{id:"title_prefix",modelValue:v(F).title_prefix,"onUpdate:modelValue":ie[9]||(ie[9]=mt=>v(F).title_prefix=mt)},null,8,["modelValue"])]),_:1},8,["label","description"]),l(Wt,{"label-for":"pipeline_id",label:ve.$t("deals::fields.deals.pipeline.name"),required:""},{default:p(()=>[l(ht,{modelValue:k.value,"onUpdate:modelValue":[ie[10]||(ie[10]=mt=>k.value=mt),ie[11]||(ie[11]=mt=>x.value=mt.stages[0])],label:"name","input-id":"pipeline_id",options:v(f),clearable:!1},null,8,["modelValue","options"]),l(Et,{error:v(F).getError("submit_data.pipeline_id")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{"label-for":"stage_id",label:ve.$t("deals::fields.deals.stage.name"),required:""},{default:p(()=>[l(ht,{modelValue:x.value,"onUpdate:modelValue":ie[12]||(ie[12]=mt=>x.value=mt),label:"name","input-id":"stage_id",options:k.value?k.value.stages:[],clearable:!1},null,8,["modelValue","options"]),l(Et,{error:v(F).getError("submit_data.stage_id")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{"label-for":"user_id",label:ve.$t("deals::fields.deals.user.name"),required:""},{default:p(()=>[l(ht,{modelValue:v(F).user_id,"onUpdate:modelValue":ie[13]||(ie[13]=mt=>v(F).user_id=mt),label:"name","input-id":"user_id",options:v(r),clearable:!1,reduce:mt=>mt.id},null,8,["modelValue","options","reduce"]),l(Et,{error:v(F).getError("user_id")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{"label-for":"notifications",label:ve.$t("webforms::form.notifications")},{default:p(()=>[(g(!0),D(de,null,Ie(v(F).notifications,(mt,Ln)=>(g(),D("div",{key:Ln,class:"mb-3"},[_("div",uRe,[_("div",cRe,[_("div",dRe,[l(Rn,{icon:"Mail",class:"size-5"})]),l(Qn,{modelValue:v(F).notifications[Ln],"onUpdate:modelValue":so=>v(F).notifications[Ln]=so,class:"pl-10 sm:pl-11",type:"email",placeholder:ve.$t("webforms::form.notification_email_placeholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),l(ke,{icon:"Trash",basic:"",onClick:so=>ue(Ln)},null,8,["onClick"])]),l(Et,{error:v(F).getError("notifications."+Ln)},null,8,["error"])]))),128)),te(l($e,{class:"font-medium",text:ve.$t("webforms::form.new_notification"),onClick:oe},null,8,["text"]),[[fe,!A.value||S.value===0]])]),_:1},8,["label"])]),_:1})]),_:1}),l(Ge,null,{default:p(()=>[l(On,null,{default:p(()=>[l(me,{class:"mb-3",text:ve.$t("webforms::form.style.style")},null,8,["text"]),l(Wt,{class:"mt-3 w-full sm:w-[373px]","label-for":"locale",label:ve.$t("core::app.locale")},{default:p(()=>[l(ht,{modelValue:v(F).locale,"onUpdate:modelValue":ie[14]||(ie[14]=mt=>v(F).locale=mt),"input-id":"locale",clearable:!1,options:v(i)},null,8,["modelValue","options"]),l(Et,{error:v(F).getError("locale")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{label:ve.$t("webforms::form.style.primary_color")},{default:p(()=>[l(ca,{modelValue:v(F).styles.primary_color,"onUpdate:modelValue":ie[15]||(ie[15]=mt=>v(F).styles.primary_color=mt),swatches:v(h)},null,8,["modelValue","swatches"]),l(Et,{error:v(F).getError("styles.primary_color")},null,8,["error"])]),_:1},8,["label"]),l(Wt,{label:ve.$t("webforms::form.style.background_color")},{default:p(()=>[l(ca,{modelValue:v(F).styles.background_color,"onUpdate:modelValue":ie[16]||(ie[16]=mt=>v(F).styles.background_color=mt),swatches:v(h)},null,8,["modelValue","swatches"]),l(Et,{error:v(F).getError("styles.background_color")},null,8,["error"])]),_:1},8,["label"]),l(yt,{as:"p",class:"mb-1 mt-4",label:ve.$t("webforms::form.style.logo")},null,8,["label"]),l(JAe,{modelValue:v(F).styles.logo,"onUpdate:modelValue":ie[17]||(ie[17]=mt=>v(F).styles.logo=mt),"background-color":v(F).styles.background_color,"primary-color":v(F).styles.primary_color},null,8,["modelValue","background-color","primary-color"])]),_:1})]),_:1}),l(Ge,null,{default:p(()=>[l(On,null,{default:p(()=>[l(ZAe,{form:v(F)},null,8,["form"])]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])}}};window.Innoclapps&&Innoclapps.booting(function(e,t){e.component("WebFormPublicView",xAe),e.component("WebFormSubmissionChangelog",QFe),t.addRoute("settings",{path:"forms/:id/edit",name:"web-form-edit",component:mRe}),t.addRoute("settings",{path:"forms",name:"web-forms-index",component:sAe,meta:{title:rt("webforms::form.forms")},children:[{path:"create",name:"web-form-create",component:CAe}]})});const fRe=`*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:Inter var,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}[type=text],input:where(:not([type])),[type=email],[type=url],[type=password],[type=number],[type=date],[type=datetime-local],[type=month],[type=search],[type=tel],[type=time],[type=week],[multiple],textarea,select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#6b7280;border-width:1px;border-radius:0;padding:.5rem .75rem;font-size:1rem;line-height:1.5rem;--tw-shadow: 0 0 #0000}[type=text]:focus,input:where(:not([type])):focus,[type=email]:focus,[type=url]:focus,[type=password]:focus,[type=number]:focus,[type=date]:focus,[type=datetime-local]:focus,[type=month]:focus,[type=search]:focus,[type=tel]:focus,[type=time]:focus,[type=week]:focus,[multiple]:focus,textarea:focus,select:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow);border-color:#2563eb}input::-moz-placeholder,textarea::-moz-placeholder{color:#6b7280;opacity:1}input::placeholder,textarea::placeholder{color:#6b7280;opacity:1}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-date-and-time-value{min-height:1.5em;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit,::-webkit-datetime-edit-year-field,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute-field,::-webkit-datetime-edit-second-field,::-webkit-datetime-edit-millisecond-field,::-webkit-datetime-edit-meridiem-field{padding-top:0;padding-bottom:0}select{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");background-position:right .5rem center;background-repeat:no-repeat;background-size:1.5em 1.5em;padding-right:2.5rem;-webkit-print-color-adjust:exact;print-color-adjust:exact}[multiple],[size]:where(select:not([size="1"])){background-image:initial;background-position:initial;background-repeat:unset;background-size:initial;padding-right:.75rem;-webkit-print-color-adjust:unset;print-color-adjust:unset}[type=checkbox],[type=radio]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;-webkit-print-color-adjust:exact;print-color-adjust:exact;display:inline-block;vertical-align:middle;background-origin:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none;flex-shrink:0;height:1rem;width:1rem;color:#2563eb;background-color:#fff;border-color:#6b7280;border-width:1px;--tw-shadow: 0 0 #0000}[type=checkbox]{border-radius:0}[type=radio]{border-radius:100%}[type=checkbox]:focus,[type=radio]:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 2px;--tw-ring-offset-color: #fff;--tw-ring-color: #2563eb;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}[type=checkbox]:checked,[type=radio]:checked{border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}[type=checkbox]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=checkbox]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=radio]:checked{background-image:url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e")}@media (forced-colors: active){[type=radio]:checked{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:checked:hover,[type=checkbox]:checked:focus,[type=radio]:checked:hover,[type=radio]:checked:focus{border-color:transparent;background-color:currentColor}[type=checkbox]:indeterminate{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 16 16'%3e%3cpath stroke='white' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 8h8'/%3e%3c/svg%3e");border-color:transparent;background-color:currentColor;background-size:100% 100%;background-position:center;background-repeat:no-repeat}@media (forced-colors: active){[type=checkbox]:indeterminate{-webkit-appearance:auto;-moz-appearance:auto;appearance:auto}}[type=checkbox]:indeterminate:hover,[type=checkbox]:indeterminate:focus{border-color:transparent;background-color:currentColor}[type=file]{background:unset;border-color:inherit;border-width:0;border-radius:0;padding:0;font-size:unset;line-height:inherit}[type=file]:focus{outline:1px solid ButtonText;outline:1px auto -webkit-focus-ring-color}*{scrollbar-color:initial;scrollbar-width:initial}:root{--navbar-height: 4rem;--navbar-bg-color: rgba(255, 255, 255);--navbar-dark-bg-color: rgba(var(--color-neutral-900, 50%));--sidebar-bg-color: var(--color-neutral-800);--sidebar-dark-bg-color: var(--color-neutral-900);--color-neutral-50: 248, 250, 252;--color-neutral-100: 241, 245, 249;--color-neutral-200: 226, 232, 240;--color-neutral-300: 203, 213, 225;--color-neutral-400: 148, 163, 184;--color-neutral-500: 100, 116, 139;--color-neutral-600: 71, 85, 105;--color-neutral-700: 51, 65, 85;--color-neutral-800: 30, 41, 59;--color-neutral-900: 15, 23, 42;--color-primary-50: 238, 242, 255;--color-primary-100: 224, 231, 255;--color-primary-200: 199, 210, 254;--color-primary-300: 165, 180, 252;--color-primary-400: 129, 140, 248;--color-primary-500: 99, 102, 241;--color-primary-600: 79, 70, 229;--color-primary-700: 67, 56, 202;--color-primary-800: 55, 48, 163;--color-primary-900: 49, 46, 129;--color-warning-50: 255, 251, 235;--color-warning-100: 254, 243, 199;--color-warning-200: 253, 230, 138;--color-warning-300: 252, 211, 77;--color-warning-400: 251, 191, 36;--color-warning-500: 245, 158, 11;--color-warning-600: 217, 119, 6;--color-warning-700: 180, 83, 9;--color-warning-800: 146, 64, 14;--color-warning-900: 120, 53, 15;--color-danger-50: 254, 242, 242;--color-danger-100: 254, 226, 226;--color-danger-200: 254, 202, 202;--color-danger-300: 252, 165, 165;--color-danger-400: 248, 113, 113;--color-danger-500: 239, 68, 68;--color-danger-600: 220, 38, 38;--color-danger-700: 185, 28, 28;--color-danger-800: 153, 27, 27;--color-danger-900: 127, 29, 29;--color-success-50: 240, 253, 244;--color-success-100: 220, 252, 231;--color-success-200: 187, 247, 208;--color-success-300: 134, 239, 172;--color-success-400: 74, 222, 128;--color-success-500: 34, 197, 94;--color-success-600: 22, 163, 74;--color-success-700: 21, 128, 61;--color-success-800: 22, 101, 52;--color-success-900: 20, 83, 45;--color-info-50: 239, 246, 255;--color-info-100: 219, 234, 254;--color-info-200: 191, 219, 254;--color-info-300: 147, 197, 253;--color-info-400: 96, 165, 250;--color-info-500: 59, 130, 246;--color-info-600: 37, 99, 235;--color-info-700: 29, 78, 216;--color-info-800: 30, 64, 175;--color-info-900: 30, 58, 138}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }`,pRe={class:"text-center text-sm font-medium"},vRe={class:"text-center text-xs uppercase opacity-90"},hRe=["for"],gRe=["id","value"],bRe={__name:"SettingsThemeStyleSwatch",props:["swatch","color"],emits:["update:hex"],setup(e,{emit:t}){const n=t,o=xa(a=>n("update:hex",a.target.value),300);return(a,r)=>(g(),D("div",{class:"flex h-14 w-full flex-col justify-center rounded-lg p-2 md:h-32 md:p-4",style:Nt({background:e.swatch.hex})},[_("div",{class:"flex items-center justify-between px-4 md:mt-auto md:block md:px-0",style:Nt({color:v(Zr)(e.swatch.hex)})},[_("div",pRe,K(e.swatch.stop),1),_("div",vRe,[_("label",{class:"cursor-pointer",for:e.swatch.hex},K(e.swatch.hex),9,hRe),_("input",{id:e.swatch.hex,type:"color",class:"h-0 [&::-moz-color-swatch]:border-0 [&::-webkit-color-swatch-wrapper]:p-0 [&::-webkit-color-swatch]:border-0",value:e.swatch.hex,onInput:r[0]||(r[0]=(...s)=>v(o)&&v(o)(...s))},null,40,gRe)])],4)],4))}},yRe={class:"mb-2 items-center md:flex"},_Re={class:"mb-4 grow text-left sm:mb-0"},wRe={class:"flex items-center justify-center space-x-3"},IRe={class:"relative"},xRe={for:"lMax",class:"inline-block bg-white px-1 text-xs font-medium text-neutral-900 dark:bg-neutral-900 dark:text-neutral-300 sm:absolute sm:-top-2.5 sm:left-2"},kRe=["onUpdate:modelValue","onInput"],$Re={class:"relative"},CRe={for:"lMin",class:"inline-block bg-white px-1 text-xs font-medium text-neutral-900 dark:bg-neutral-900 dark:text-neutral-300 sm:absolute sm:-top-2.5 sm:left-2"},SRe=["onUpdate:modelValue","onInput"],TRe=["value","onInput"],ERe={class:"flex flex-col justify-between space-y-1 overflow-hidden md:flex-row md:space-x-1 md:space-y-0"},FRe={key:0,class:"absolute left-1/2 top-10 hidden h-2 -translate-x-1/2 transform items-center justify-center md:flex"},ARe={__name:"SettingsThemeStyle",setup(e){const t=[],n={},o=[0,950,1e3];k();const a={},r=ro({}),s=V(!1);t.forEach($=>{r[$]=I($),a[$]=I($)});const{form:i,submit:u,isReady:d,originalSettings:m}=Ao();qa(d,()=>{m.value.theme_style&&h(m.value.theme_style)});function f($){s.value=!0;let C=structuredClone(Wn(r));delete C[$],y(C,()=>{r[$]=I($),b(),s.value=!1})}function h($){let C=JSON.parse($);ga(C,(F,T)=>{r[T]=F})}function y($,C=null){let F=structuredClone(Wn($));ga(F,(S,A)=>{ha(a[A],S)&&delete F[A]});let T=new Date;i.theme_style=JSON.stringify(F),i.theme_style_modified_at=Date.UTC(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate(),T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds()),u(C)}function b(){ga(r,($,C)=>{$.swatches.forEach(F=>{let T=`--color-${C}-${F.stop}`;document.documentElement.style.setProperty(T,Ju(F.hex),"important")})})}function I($){return{valueStop:Qr,lMax:Ko.lMax,lMin:Ko.lMin,hex:n[$][Qr].hex,swatches:S1.filter(C=>!o.includes(C)).map(C=>({stop:C,hex:n[$][C].hex}))}}const w=xa(function($,C){let F=r[$];C||(C=F.hex),r[$].hex=C;const T=Object.assign({},Ko,{value:C.substring(1),valueStop:F.valueStop,lMax:F.lMax,lMin:F.lMin}),S=Tk(T).filter(A=>!o.includes(A.stop));r[$].swatches=S.map(A=>({hex:A.hex,stop:A.stop})),b()},300);function k(){const $=/--color-([a-z]+)-([0-9]+):\s[0-9]+,\s[0-9]+,\s[0-9]+/gm;let C;for(;(C=$.exec(fRe))!==null;){C.index===$.lastIndex&&$.lastIndex++;let F=C[0],T=C[1].trim(),S=C[2];t.indexOf(T)===-1&&t.push(C[1]),Object.hasOwn(n,T)||(n[T]={}),Object.hasOwn(n[T],S)||(n[T][S]=[]);const A=F.replaceAll(",","").split(" ").map(E=>E.trim());n[T][S]={rgb:F,hex:Aue(A[1],A[2],A[3])}}}function x($){return $!="neutral"||m.value.theme_style&&m.value.theme_style.indexOf("neutral")!==-1}return($,C)=>{const F=c("ICardHeading"),T=c("ICardHeader"),S=c("ITextDisplay"),A=c("ILink"),E=c("IDropdownButton"),B=c("IDropdownItem"),M=c("IDropdownMenu"),N=c("IDropdown"),G=c("ICardBody"),U=c("IButton"),j=c("ICardFooter"),O=c("ICard"),H=ze("t");return g(),D(de,null,[l(T,null,{default:p(()=>[l(F,{text:$.$t("themestyle::style.theme_style")},null,8,["text"])]),_:1}),l(O,{as:"form",overlay:!v(d),onSubmit:C[1]||(C[1]=ot(W=>y(r),["prevent"]))},{default:p(()=>[l(G,null,{default:p(()=>[(g(!0),D(de,null,Ie(r,(W,X)=>(g(),D("div",{key:X,class:be(x(X)?"mb-14 last:mb-0":"hidden")},[_("div",yRe,[_("div",_Re,[l(S,null,{default:p(()=>[ne(K(X.charAt(0).toUpperCase()+X.slice(1)),1)]),_:2},1024)]),_("div",wRe,[v(ha)(a[X],r[X])?Z("",!0):(g(),R(A,{key:0,text:$.$t("core::app.reset"),class:be(["mr-3",s.value?"pointer-events-none":""]),onClick:q=>f(X)},null,8,["text","class","onClick"])),_("div",IRe,[te(_("label",xRe,null,512),[[H,"themestyle::style.lightness_maximum"]]),te(_("input",{id:"lMax","onUpdate:modelValue":q=>W.lMax=q,type:"number",class:"block w-full rounded-md border-0 py-1 text-base/6 text-neutral-900 shadow-sm ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:bg-neutral-900 dark:text-neutral-200 dark:ring-neutral-700 dark:focus:ring-primary-500 sm:text-sm/6",onInput:q=>v(w)(X)},null,40,kRe),[[pa,W.lMax]])]),_("div",$Re,[te(_("label",CRe,null,512),[[H,"themestyle::style.lightness_minimum"]]),te(_("input",{id:"lMin","onUpdate:modelValue":q=>W.lMin=q,type:"number",class:"block w-full rounded-md border-0 py-1 text-base/6 text-neutral-900 shadow-sm ring-1 ring-inset ring-neutral-300 placeholder:text-neutral-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 dark:bg-neutral-900 dark:text-neutral-200 dark:ring-neutral-700 dark:focus:ring-primary-500 sm:text-sm/6",onInput:q=>v(w)(X)},null,40,SRe),[[pa,W.lMin]])]),l(N,null,{default:p(()=>[l(E,{class:"self-end sm:self-auto",text:W.valueStop,basic:""},null,8,["text"]),l(M,null,{default:p(()=>[(g(!0),D(de,null,Ie(v(S1),q=>(g(),R(B,{key:q,text:q,active:q===W.valueStop,condensed:"",onClick:L=>(W.valueStop=q,v(w)(X))},null,8,["text","active","onClick"]))),128))]),_:2},1024)]),_:2},1024),_("input",{type:"color",class:"-ml-0.5 size-8 shrink-0 cursor-pointer appearance-none self-end border-0 bg-white p-0 outline-none sm:self-auto [&::-webkit-color-swatch]:rounded",value:W.hex,onInput:q=>v(w)(X,q.target.value)},null,40,TRe)])]),_("div",ERe,[(g(!0),D(de,null,Ie(W.swatches,(q,L)=>(g(),D("div",{key:L,class:"relative"},[q.stop===W.valueStop?(g(),D("div",FRe,[_("div",{class:"-mt-2 size-2 rounded-full shadow",style:Nt({backgroundColor:v(Zr)(q.hex)})},null,4)])):Z("",!0),l(bRe,{hex:q.hex,"onUpdate:hex":[ee=>q.hex=ee,C[0]||(C[0]=ee=>b())],swatch:q,color:X},null,8,["hex","onUpdate:hex","swatch","color"])]))),128))])],2))),128))]),_:1}),l(j,{class:"text-right"},{default:p(()=>[l(U,{type:"submit",variant:"primary",disabled:v(i).busy,text:$.$t("core::app.save")},null,8,["disabled","text"])]),_:1})]),_:1},8,["overlay"])],64)}}};window.Innoclapps&&Innoclapps.booting(function(e,t){t.addRoute("settings",{path:"/settings/theme-style",component:ARe,meta:{title:rt("themestyle::style.theme_style")}})});window.CreateApplication=(e,t=[],n=[])=>new RRe(e).booting(t).booted(n);class RRe{constructor(t){this.bus=Bc(),this.config=t,this.bootingCallbacks=[],this.bootedCallbacks=[],this.availableTimezones=[],this.teleport={},this.axios=fs,this.axios.defaults.baseURL=t.apiURL}start(){nm.init();const t=J1({});this.boot(t,Sg),t.use(Sg).use($u).use(Dp),this.app=t,this.app.mount("#app")}booting(t){return Array.isArray(t)?t.forEach(n=>this.booting(n)):this.bootingCallbacks.push(t),this}booted(t){return Array.isArray(t)?t.forEach(n=>this.booted(n)):this.bootedCallbacks.push(t),this}boot(t,n){t.config.globalProperties.$scriptConfig=(...o)=>this.scriptConfig(...o),t.config.globalProperties.$csrfToken=this.scriptConfig("csrfToken"),this.scriptConfig("broadcasting")&&this.scriptConfig("user_id")&&(this.broadcaster=new O7(this.scriptConfig("broadcasting"))),$u.commit("SET_SIDEBAR_MENU_ITEMS",this.scriptConfig("menu.sidebar")||[]),this.bootingCallbacks.forEach(o=>o.call(this,t,n,$u)),this.bootingCallbacks=[],this.bootedCallbacks.forEach(o=>o.call(this,t,n,$u)),this.bootedCallbacks=[]}resources(){return this.scriptConfig("resources")}resource(t){return this.scriptConfig(`resources.${t}`)}resourceName(t){return this.resource(t).name}scriptConfig(t,n=void 0){return n===void 0?En(this.config,t):(AT(this.config,t,n),this)}request(t){return t!==void 0?typeof t=="string"?this.axios.get(t,arguments[1]||void 0):this.axios(t):this.axios}$on(...t){this.bus.on(...t)}$off(...t){this.bus.off(...t)}$emit(...t){this.bus.emit(...t)}success(t,n=4e3,o={}){this.notify(t,"success",n,o)}info(t,n=4e3,o={}){this.notify(t,"info",n,o)}error(t,n=4e3,o={}){this.notify(t,"error",n,o)}notify(t,n,o=4e3,a={},r="app"){this.app.config.globalProperties.$notify(Object.assign({},a,{text:t,type:n,group:r}),o)}addShortcut(t,n){nm.bind(t,n)}disableShortcut(t){nm.unbind(t)}confirm(t){return this.app.config.globalProperties.$confirm(t)}dialog(){return this.app.config.globalProperties.$dialog}teleportTo(t,n,o=10){Object.hasOwn(this.teleport,t)||(this.teleport[t]=[]),this.teleport[t].push({component:n,priority:o})}async timezones(t=null){if(Array.isArray(t))return this.availableTimezones=Object.freeze(t),t;if(this.availableTimezones.length===0){let{data:n}=await this.request("/timezones");this.availableTimezones=Object.freeze(n)}return this.availableTimezones}}export{ot as $,ly as A,Rt as B,TY as C,ut as D,Vr as E,de as F,Se as G,Ue as H,be as I,fe as J,mn as K,K as L,ro as M,Xe as N,un as O,Jt as P,st as Q,Le as R,ny as S,To as T,ne as U,xt as V,_t as W,Nt as X,mo as Y,sr as Z,iu as _,Pe as a,hn as a0,Kr as a1,yo as b,qe as c,Ve as d,qi as e,P as f,c as g,Ae as h,ze as i,D as j,_ as k,Ee as l,l as m,p as n,g as o,v as p,R as q,V as r,gn as s,Ie as t,D8 as u,zt as v,te as w,Qt as x,Z as y,We as z};
